(function(c,b,d){function e(e,d){var c=b(e);c.data("JSGrid",this);this._container=c;this.data=[];this.fields=[];this._sortField=this._editingRow=null;this._sortOrder="asc";this._firstDisplayingPage=1;this._init(d);this.render()}var g=function(e,d){return b.isFunction(e)?e.apply(d,b.makeArray(arguments).slice(2)):e},f=function(e){var d=b.Deferred();e&&e.then?e.then(function(){d.resolve.apply(d,arguments)},function(){d.reject.apply(d,arguments)}):d.resolve(e);return d.promise()},h={loadData:b.noop,
insertItem:b.noop,updateItem:b.noop,deleteItem:b.noop};e.prototype={width:"auto",height:"auto",updateOnResize:!0,rowClass:b.noop,rowRenderer:null,rowClick:function(e){this.editing&&this.editItem(b(e.event.target).closest("tr"))},rowDoubleClick:b.noop,noDataContent:"Not found",noDataRowClass:"jsgrid-nodata-row",heading:!0,headerRowRenderer:null,headerRowClass:"jsgrid-header-row",headerCellClass:"jsgrid-header-cell",filtering:!1,filterRowRenderer:null,filterRowClass:"jsgrid-filter-row",inserting:!1,
insertRowRenderer:null,insertRowClass:"jsgrid-insert-row",editing:!1,editRowRenderer:null,editRowClass:"jsgrid-edit-row",confirmDeleting:!0,deleteConfirm:"Are you sure?",selecting:!0,selectedRowClass:"jsgrid-selected-row",oddRowClass:"jsgrid-row",evenRowClass:"jsgrid-alt-row",cellClass:"jsgrid-cell",sorting:!1,sortableClass:"jsgrid-header-sortable",sortAscClass:"jsgrid-header-sort jsgrid-header-sort-asc",sortDescClass:"jsgrid-header-sort jsgrid-header-sort-desc",paging:!1,pagerContainer:null,pageIndex:1,
pageSize:20,pageButtonCount:15,pagerFormat:"Pages: {first} {prev} {pages} {next} {last} &nbsp;&nbsp; {pageIndex} of {pageCount}",pagePrevText:"Prev",pageNextText:"Next",pageFirstText:"First",pageLastText:"Last",pageNavigatorNextText:"...",pageNavigatorPrevText:"...",pagerContainerClass:"jsgrid-pager-container",pagerClass:"jsgrid-pager",pagerNavButtonClass:"jsgrid-pager-nav-button",pagerNavButtonInactiveClass:"jsgrid-pager-nav-inactive-button",pageClass:"jsgrid-pager-page",currentPageClass:"jsgrid-pager-current-page",
customLoading:!1,pageLoading:!1,autoload:!1,controller:h,loadIndication:!0,loadIndicationDelay:500,loadMessage:"Please, wait...",loadShading:!0,invalidMessage:"Invalid data entered!",invalidNotify:function(e){e=b.map(e.errors,function(b){return b.message||null});c.alert([this.invalidMessage].concat(e).join("\n"))},onInit:b.noop,onRefreshing:b.noop,onRefreshed:b.noop,onPageChanged:b.noop,onItemDeleting:b.noop,onItemDeleted:b.noop,onItemInserting:b.noop,onItemInserted:b.noop,onItemEditing:b.noop,onItemUpdating:b.noop,
onItemUpdated:b.noop,onItemInvalid:b.noop,onDataLoading:b.noop,onDataLoaded:b.noop,onOptionChanging:b.noop,onOptionChanged:b.noop,onError:b.noop,invalidClass:"jsgrid-invalid",containerClass:"jsgrid",tableClass:"jsgrid-table",gridHeaderClass:"jsgrid-grid-header",gridBodyClass:"jsgrid-grid-body",_init:function(e){b.extend(this,e);this._initLoadStrategy();this._initController();this._initFields();this._attachWindowLoadResize();this._attachWindowResizeCallback();this._callEventHandler(this.onInit)},loadStrategy:function(){return this.pageLoading?
new jsGrid.loadStrategies.PageLoadingStrategy(this):new jsGrid.loadStrategies.DirectLoadingStrategy(this)},_initLoadStrategy:function(){this._loadStrategy=g(this.loadStrategy,this)},_initController:function(){this._controller=b.extend({},h,g(this.controller,this))},renderTemplate:function(b,e,c){args=[];for(var f in c)args.push(c[f]);args.unshift(b,e);b=g.apply(null,args);return b===d||null===b?"":b},loadIndicator:function(b){return new jsGrid.LoadIndicator(b)},validation:function(b){return jsGrid.Validation&&
new jsGrid.Validation(b)},_initFields:function(){var e=this;e.fields=b.map(e.fields,function(d){b.isPlainObject(d)&&(d=new (d.type&&jsGrid.fields[d.type]||jsGrid.Field)(d));d._grid=e;return d})},_attachWindowLoadResize:function(){b(c).on("load",b.proxy(this._refreshSize,this))},_attachWindowResizeCallback:function(){if(this.updateOnResize)b(c).on("resize",b.proxy(this._refreshSize,this))},_detachWindowResizeCallback:function(){b(c).off("resize",this._refreshSize)},option:function(b,e){var d;if(1===
arguments.length)return this[b];d={option:b,oldValue:this[b],newValue:e};this._callEventHandler(this.onOptionChanging,d);this._handleOptionChange(d.option,d.newValue);this._callEventHandler(this.onOptionChanged,{option:d.option,value:d.newValue})},fieldOption:function(b,e,d){b=this._normalizeField(b);if(2===arguments.length)return b[e];b[e]=d;this._renderGrid()},_handleOptionChange:function(b,e){this[b]=e;switch(b){case "width":case "height":this._refreshSize();break;case "rowClass":case "rowRenderer":case "rowClick":case "rowDoubleClick":case "noDataRowClass":case "noDataContent":case "selecting":case "selectedRowClass":case "oddRowClass":case "evenRowClass":this._refreshContent();
break;case "pageButtonCount":case "pagerFormat":case "pagePrevText":case "pageNextText":case "pageFirstText":case "pageLastText":case "pageNavigatorNextText":case "pageNavigatorPrevText":case "pagerClass":case "pagerNavButtonClass":case "pageClass":case "currentPageClass":case "pagerRenderer":this._refreshPager();break;case "fields":this._initFields();this.render();break;case "data":case "editing":case "heading":case "filtering":case "inserting":case "paging":this.refresh();break;case "loadStrategy":case "pageLoading":this._initLoadStrategy();
this.search();break;case "pageIndex":this.openPage(e);break;case "pageSize":this.refresh();this.search();break;case "editRowRenderer":case "editRowClass":this.cancelEdit();break;case "updateOnResize":this._detachWindowResizeCallback();this._attachWindowResizeCallback();break;case "invalidNotify":case "invalidMessage":break;default:this.render()}},destroy:function(){this._detachWindowResizeCallback();this._clear();this._container.removeData("JSGrid")},render:function(){this._renderGrid();return this.autoload?
this.loadData():b.Deferred().resolve().promise()},_renderGrid:function(){this._clear();this._container.addClass(this.containerClass).css("position","relative").append(this._createHeader()).append(this._createBody());this._pagerContainer=this._createPagerContainer();this._loadIndicator=this._createLoadIndicator();this._validation=this._createValidation();this.refresh()},_createLoadIndicator:function(){return g(this.loadIndicator,this,{message:this.loadMessage,shading:this.loadShading,container:this._container})},
_createValidation:function(){return g(this.validation,this)},_clear:function(){this.cancelEdit();clearTimeout(this._loadingTimer);this._pagerContainer&&this._pagerContainer.empty();this._container.empty().css({position:"",width:"",height:""})},_createHeader:function(){var e=this._headerRow=this._createHeaderRow(),d=this._filterRow=this._createFilterRow(),c=this._insertRow=this._createInsertRow(),e=this._headerGrid=b("<table>").addClass(this.tableClass).append(e).append(d).append(c);return this._header=
b("<div>").addClass(this.gridHeaderClass).addClass(this._scrollBarWidth()?"jsgrid-header-scrollbar":"").append(e)},_createBody:function(){var e=this._content=b("<tbody>"),e=this._bodyGrid=b("<table>").addClass(this.tableClass).append(e);return this._body=b("<div>").addClass(this.gridBodyClass).append(e).on("scroll",b.proxy(function(b){this._header.scrollLeft(b.target.scrollLeft)},this))},_createPagerContainer:function(){var e=this.pagerContainer||b("<div>").appendTo(this._container);return b(e).addClass(this.pagerContainerClass)},
_eachField:function(e){var d=this;b.each(this.fields,function(b,c){c.visible&&e.call(d,c,b)})},_createHeaderRow:function(){if(b.isFunction(this.headerRowRenderer))return b(this.renderTemplate(this.headerRowRenderer,this));var e=b("<tr>").addClass(this.headerRowClass);this._eachField(function(d,c){var g=this._prepareCell("<th>",d,"headercss",this.headerCellClass).append(this.renderTemplate(d.headerTemplate,d)).appendTo(e);if(this.sorting&&d.sorting)g.addClass(this.sortableClass).on("click",b.proxy(function(){this.sort(c)},
this))});return e},_prepareCell:function(e,d,c,g){return b(e).css("width",d.width).addClass(g||this.cellClass).addClass(c&&d[c]||d.css).addClass(d.align?"jsgrid-align-"+d.align:"")},_createFilterRow:function(){if(b.isFunction(this.filterRowRenderer))return b(this.renderTemplate(this.filterRowRenderer,this));var e=b("<tr>").addClass(this.filterRowClass);this._eachField(function(b){this._prepareCell("<td>",b,"filtercss").append(this.renderTemplate(b.filterTemplate,b)).appendTo(e)});return e},_createInsertRow:function(){if(b.isFunction(this.insertRowRenderer))return b(this.renderTemplate(this.insertRowRenderer,
this));var e=b("<tr>").addClass(this.insertRowClass);this._eachField(function(b){this._prepareCell("<td>",b,"insertcss").append(this.renderTemplate(b.insertTemplate,b)).appendTo(e)});return e},_callEventHandler:function(e,d){e.call(this,b.extend(d,{grid:this}));return d},reset:function(){this._resetSorting();this._resetPager();return this._loadStrategy.reset()},_resetPager:function(){this._firstDisplayingPage=1;this._setPage(1)},_resetSorting:function(){this._sortField=null;this._sortOrder="asc";
this._clearSortingCss()},refresh:function(){this._callEventHandler(this.onRefreshing);this.cancelEdit();this._refreshHeading();this._refreshFiltering();this._refreshInserting();this._refreshContent();this._refreshPager();this._refreshSize();this._callEventHandler(this.onRefreshed)},_refreshHeading:function(){this._headerRow.toggle(this.heading)},_refreshFiltering:function(){this._filterRow.toggle(this.filtering)},_refreshInserting:function(){this._insertRow.toggle(this.inserting)},_refreshContent:function(){var b=
this._content;b.empty();if(!this.data.length)return b.append(this._createNoDataRow()),this;for(var e=this._loadStrategy.firstDisplayIndex(),d=this._loadStrategy.lastDisplayIndex();e<d;e++)b.append(this._createRow(this.data[e],e))},_createNoDataRow:function(){var e=0;this._eachField(function(){e++});return b("<tr>").addClass(this.noDataRowClass).append(b("<td>").addClass(this.cellClass).attr("colspan",e).append(this.renderTemplate(this.noDataContent,this)))},_createRow:function(e,d){var c;b.isFunction(this.rowRenderer)?
c=this.renderTemplate(this.rowRenderer,this,{item:e,itemIndex:d}):(c=b("<tr>"),this._renderCells(c,e));c.addClass(this._getRowClasses(e,d)).data("JSGridItem",e).on("click",b.proxy(function(b){this.rowClick({item:e,itemIndex:d,event:b})},this)).on("dblclick",b.proxy(function(b){this.rowDoubleClick({item:e,itemIndex:d,event:b})},this));this.selecting&&this._attachRowHover(c);return c},_getRowClasses:function(b,e){var d=[];d.push((e+1)%2?this.oddRowClass:this.evenRowClass);d.push(g(this.rowClass,this,
b,e));return d.join(" ")},_attachRowHover:function(e){var d=this.selectedRowClass;e.hover(function(){b(this).addClass(d)},function(){b(this).removeClass(d)})},_renderCells:function(b,e){this._eachField(function(d){b.append(this._createCell(e,d))});return this},_createCell:function(e,d){var c;c=this._getItemFieldValue(e,d);var g={value:c,item:e};c=b.isFunction(d.cellRenderer)?this.renderTemplate(d.cellRenderer,d,g):b("<td>").append(this.renderTemplate(d.itemTemplate||c,d,g));return this._prepareCell(c,
d)},_getItemFieldValue:function(b,e){for(var d=e.name.split("."),c=b[d.shift()];c&&d.length;)c=c[d.shift()];return c},_setItemFieldValue:function(b,e,d){e=e.name.split(".");for(var c=b,g=e[0];c&&e.length;)b=c,g=e.shift(),c=b[g];if(!c)for(;e.length;)b=b[g]={},g=e.shift();b[g]=d},sort:function(e,d){b.isPlainObject(e)&&(d=e.order,e=e.field);this._clearSortingCss();this._setSortingParams(e,d);this._setSortingCss();return this._loadStrategy.sort()},_clearSortingCss:function(){this._headerRow.find("th").removeClass(this.sortAscClass).removeClass(this.sortDescClass)},
_setSortingParams:function(b,e){b=this._normalizeField(b);e=e||(this._sortField===b?this._reversedSortOrder(this._sortOrder):"asc");this._sortField=b;this._sortOrder=e},_normalizeField:function(e){return b.isNumeric(e)?this.fields[e]:"string"===typeof e?b.grep(this.fields,function(b){return b.name===e})[0]:e},_reversedSortOrder:function(b){return"asc"===b?"desc":"asc"},_setSortingCss:function(){var b=this._visibleFieldIndex(this._sortField);this._headerRow.find("th").eq(b).addClass("asc"===this._sortOrder?
this.sortAscClass:this.sortDescClass)},_visibleFieldIndex:function(e){return b.inArray(e,b.grep(this.fields,function(b){return b.visible}))},_sortData:function(){var b=this._sortFactor(),e=this._sortField;e&&this.data.sort(function(d,c){return b*e.sortingFunc(d[e.name],c[e.name])})},_sortFactor:function(){return"asc"===this._sortOrder?1:-1},_itemsCount:function(){return this._loadStrategy.itemsCount()},_pagesCount:function(){var b=this._itemsCount(),e=this.pageSize;return Math.floor(b/e)+(b%e?1:0)},
_refreshPager:function(){var b=this._pagerContainer;b.empty();this.paging&&b.append(this._createPager());var e=this.paging&&1<this._pagesCount();b.toggle(e)},_createPager:function(){var e;e=b.isFunction(this.pagerRenderer)?b(this.pagerRenderer({pageIndex:this.pageIndex,pageCount:this._pagesCount()})):b("<div>").append(this._createPagerByFormat());e.addClass(this.pagerClass);return e},_createPagerByFormat:function(){var e=this.pageIndex,d=this._pagesCount(),c=this._itemsCount(),g=this.pagerFormat.split(" ");
return b.map(g,b.proxy(function(g){var f=g;"{pages}"===g?f=this._createPages():"{first}"===g?f=this._createPagerNavButton(this.pageFirstText,1,1<e):"{prev}"===g?f=this._createPagerNavButton(this.pagePrevText,e-1,1<e):"{next}"===g?f=this._createPagerNavButton(this.pageNextText,e+1,e<d):"{last}"===g?f=this._createPagerNavButton(this.pageLastText,d,e<d):"{pageIndex}"===g?f=e:"{pageCount}"===g?f=d:"{itemCount}"===g&&(f=c);return b.isArray(f)?f.concat([" "]):[f," "]},this))},_createPages:function(){var b=
this._pagesCount(),e=this.pageButtonCount,d=this._firstDisplayingPage,c=[];1<d&&c.push(this._createPagerPageNavButton(this.pageNavigatorPrevText,this.showPrevPages));for(var g=0,f=d;g<e&&f<=b;g++,f++)c.push(f===this.pageIndex?this._createPagerCurrentPage():this._createPagerPage(f));d+e-1<b&&c.push(this._createPagerPageNavButton(this.pageNavigatorNextText,this.showNextPages));return c},_createPagerNavButton:function(e,d,c){return this._createPagerButton(e,this.pagerNavButtonClass+(c?"":" "+this.pagerNavButtonInactiveClass),
c?function(){this.openPage(d)}:b.noop)},_createPagerPageNavButton:function(b,e){return this._createPagerButton(b,this.pagerNavButtonClass,e)},_createPagerPage:function(b){return this._createPagerButton(b,this.pageClass,function(){this.openPage(b)})},_createPagerButton:function(e,d,c){e=b("<a>").attr("href","javascript:void(0);").html(e).on("click",b.proxy(c,this));return b("<span>").addClass(d).append(e)},_createPagerCurrentPage:function(){return b("<span>").addClass(this.pageClass).addClass(this.currentPageClass).text(this.pageIndex)},
_refreshSize:function(){this._refreshHeight();this._refreshWidth()},_refreshWidth:function(){var b=this._headerGrid,e=this._bodyGrid,d=this.width;"auto"===d&&(b.width("auto"),d=b.outerWidth());b.width("");e.width("");this._container.width(d);d=b.outerWidth();e.width(d)},_scrollBarWidth:function(){var e;return function(){if(e===d){var c=b("<div style='width:50px;height:50px;overflow:hidden;position:absolute;top:-10000px;left:-10000px;'></div>"),g=b("<div style='height:100px;'></div>");c.append(g).appendTo("body");
var f=g.innerWidth();c.css("overflow-y","auto");g=g.innerWidth();c.remove();e=f-g}return e}}(),_refreshHeight:function(){var b=this._container,e=this._pagerContainer,d=this.height,c;b.height(d);"auto"!==d&&(d=b.height(),c=this._header.outerHeight(!0),e.parents(b).length&&(c+=e.outerHeight(!0)),this._body.outerHeight(d-c))},showPrevPages:function(){var b=this._firstDisplayingPage,e=this.pageButtonCount;this._firstDisplayingPage=b>e?b-e:1;this._refreshPager()},showNextPages:function(){var b=this._firstDisplayingPage,
e=this.pageButtonCount,d=this._pagesCount();this._firstDisplayingPage=b+2*e>d?d-e+1:b+e;this._refreshPager()},openPage:function(b){1>b||b>this._pagesCount()||(this._setPage(b),this._loadStrategy.openPage(b))},_setPage:function(b){var e=this._firstDisplayingPage,d=this.pageButtonCount;this.pageIndex=b;b<e&&(this._firstDisplayingPage=b);b>e+d-1&&(this._firstDisplayingPage=b-d+1);this._callEventHandler(this.onPageChanged,{pageIndex:b})},_controllerCall:function(e,d,c,g){if(c)return b.Deferred().reject().promise();
this._showLoading();c=this._controller;if(!c||!c[e])throw Error("controller has no method '"+e+"'");return f(c[e](d)).done(b.proxy(g,this)).fail(b.proxy(this._errorHandler,this)).always(b.proxy(this._hideLoading,this))},_errorHandler:function(){this._callEventHandler(this.onError,{args:b.makeArray(arguments)})},_showLoading:function(){this.loadIndication&&(clearTimeout(this._loadingTimer),this._loadingTimer=setTimeout(b.proxy(function(){this._loadIndicator.show()},this),this.loadIndicationDelay))},
_hideLoading:function(){this.loadIndication&&(clearTimeout(this._loadingTimer),this._loadIndicator.hide())},search:function(b){this._resetSorting();this._resetPager();return this.loadData(b)},loadData:function(e){e=e||(this.filtering?this.getFilter():{});b.extend(e,this._loadStrategy.loadParams(),this._sortingParams());var d=this._callEventHandler(this.onDataLoading,{filter:e});return this._controllerCall("loadData",e,d.cancel,function(b){b&&(this._loadStrategy.finishLoad(b),this._callEventHandler(this.onDataLoaded,
{data:b}))})},getFilter:function(){var b={};this._eachField(function(e){e.filtering&&this._setItemFieldValue(b,e,e.filterValue())});return b},_sortingParams:function(){return this.sorting&&this._sortField?{sortField:this._sortField.name,sortOrder:this._sortOrder}:{}},getSorting:function(){var b=this._sortingParams();return{field:b.sortField,order:b.sortOrder}},clearFilter:function(){var b=this._createFilterRow();this._filterRow.replaceWith(b);this._filterRow=b;return this.search()},insertItem:function(e){var d=
e||this._getValidatedInsertItem();if(!d)return b.Deferred().reject().promise();e=this._callEventHandler(this.onItemInserting,{item:d});return this._controllerCall("insertItem",d,e.cancel,function(b){b=b||d;this._loadStrategy.finishInsert(b);this._callEventHandler(this.onItemInserted,{item:b})})},_getValidatedInsertItem:function(){var b=this._getInsertItem();return this._validateItem(b,this._insertRow)?b:null},_getInsertItem:function(){var b={};this._eachField(function(e){e.inserting&&this._setItemFieldValue(b,
e,e.insertValue())});return b},_validateItem:function(e,c){var g=[],f={item:e,itemIndex:this._rowIndex(c),row:c};this._eachField(function(h){if(h.validate){var l=this._getItemFieldValue(e,h);l!==d&&(l=this._validation.validate(b.extend({value:l,rules:h.validate},f)),this._setCellValidity(c.children().eq(this._visibleFieldIndex(h)),l),l.length&&g.push.apply(g,b.map(l,function(b){return{field:h,message:b}})))}});if(!g.length)return!0;var h=b.extend({errors:g},f);this._callEventHandler(this.onItemInvalid,
h);this.invalidNotify(h);return!1},_setCellValidity:function(b,e){b.toggleClass(this.invalidClass,!!e.length).attr("title",e.join("\n"))},clearInsert:function(){var b=this._createInsertRow();this._insertRow.replaceWith(b);this._insertRow=b;this.refresh()},editItem:function(b){b=this.rowByItem(b);b.length&&this._editRow(b)},rowByItem:function(e){return e.jquery||e.nodeType?b(e):this._content.find("tr").filter(function(){return b.data(this,"JSGridItem")===e})},_editRow:function(b){if(this.editing){var e=
b.data("JSGridItem");this._callEventHandler(this.onItemEditing,{row:b,item:e,itemIndex:this._itemIndex(e)}).cancel||(this._editingRow&&this.cancelEdit(),e=this._createEditRow(e),this._editingRow=b,b.hide(),e.insertBefore(b),b.data("JSGridEditRow",e))}},_createEditRow:function(e){if(b.isFunction(this.editRowRenderer))return b(this.renderTemplate(field.editRowRenderer,field,{item:e,itemIndex:this._itemIndex(e)}));var d=b("<tr>").addClass(this.editRowClass);this._eachField(function(b){var c=this._getItemFieldValue(e,
b);this._prepareCell("<td>",b,"editcss").append(this.renderTemplate(b.editTemplate||"",b,{value:c,item:e})).appendTo(d)});return d},updateItem:function(b,e){1===arguments.length&&(e=b);var d=b?this.rowByItem(b):this._editingRow;if(e=e||this._getValidatedEditedItem())return this._updateRow(d,e)},_getValidatedEditedItem:function(){var b=this._getEditedItem();return this._validateItem(b,this._getEditRow())?b:null},_updateRow:function(e,d){var c=e.data("JSGridItem"),g=this._itemIndex(c),f=b.extend(!0,
{},c);b.extend(!0,c,d);var h=this._callEventHandler(this.onItemUpdating,{row:e,item:c,itemIndex:g,previousItem:f});return this._controllerCall("updateItem",c,h.cancel,function(b){b=b||c;var d=this._finishUpdate(e,b,g);this._callEventHandler(this.onItemUpdated,{row:d,item:b,itemIndex:g,previousItem:f})})},_rowIndex:function(e){return this._content.children().index(b(e))},_itemIndex:function(e){return b.inArray(e,this.data)},_finishUpdate:function(b,e,d){this.cancelEdit();this.data[d]=e;e=this._createRow(e,
d);b.replaceWith(e);return e},_getEditedItem:function(){var b={};this._eachField(function(e){e.editing&&this._setItemFieldValue(b,e,e.editValue())});return b},cancelEdit:function(){this._editingRow&&(this._getEditRow().remove(),this._editingRow.show(),this._editingRow=null)},_getEditRow:function(){return this._editingRow.data("JSGridEditRow")},deleteItem:function(b){b=this.rowByItem(b);if(b.length&&(!this.confirmDeleting||c.confirm(g(this.deleteConfirm,this,b.data("JSGridItem")))))return this._deleteRow(b)},
_deleteRow:function(b){var e=b.data("JSGridItem"),d=this._itemIndex(e),c=this._callEventHandler(this.onItemDeleting,{row:b,item:e,itemIndex:d});return this._controllerCall("deleteItem",e,c.cancel,function(){this._loadStrategy.finishDelete(e,d);this._callEventHandler(this.onItemDeleted,{row:b,item:e,itemIndex:d})})}};b.fn.jsGrid=function(c){var g=b.makeArray(arguments).slice(1),f=this;this.each(function(){var h=b(this),l=h.data("JSGrid");if(l)if("string"===typeof c){if(h=l[c].apply(l,g),h!==d&&h!==
l)return f=h,!1}else l._detachWindowResizeCallback(),l._init(c),l.render();else new e(h,c)});return f};var l={},q={},r=function(e,d){b.each(d,function(d,c){b.isPlainObject(c)?r(e[d]||e[d[0].toUpperCase()+d.slice(1)],c):e.hasOwnProperty(d)?e[d]=c:e.prototype[d]=c})};c.jsGrid={Grid:e,fields:l,setDefaults:function(d,c){var g;b.isPlainObject(d)?g=e.prototype:(g=l[d].prototype,d=c||{});b.extend(g,d)},locales:q,locale:function(e){var d=b.isPlainObject(e)?e:q[e];if(!d)throw Error("unknown locale "+e);r(jsGrid,
d)},version:"1.5.2"}})(window,jQuery);
(function(c,b,d){function e(b){this._init(b)}e.prototype={container:"body",message:"Loading...",shading:!0,zIndex:1E3,shaderClass:"jsgrid-load-shader",loadPanelClass:"jsgrid-load-panel",_init:function(e){b.extend(!0,this,e);this._initContainer();this._initShader();this._initLoadPanel()},_initContainer:function(){this._container=b(this.container)},_initShader:function(){this.shading&&(this._shader=b("<div>").addClass(this.shaderClass).hide().css({position:"absolute",top:0,right:0,bottom:0,left:0,zIndex:this.zIndex}).appendTo(this._container))},
_initLoadPanel:function(){this._loadPanel=b("<div>").addClass(this.loadPanelClass).text(this.message).hide().css({position:"absolute",top:"50%",left:"50%",zIndex:this.zIndex}).appendTo(this._container)},show:function(){var b=this._loadPanel.show(),e=b.outerWidth(),d=b.outerHeight();b.css({marginTop:-d/2,marginLeft:-e/2});this._shader.show()},hide:function(){this._loadPanel.hide();this._shader.hide()}};c.LoadIndicator=e})(jsGrid,jQuery);
(function(c,b,d){function e(b){this._grid=b}function g(b){this._grid=b;this._itemsCount=0}e.prototype={firstDisplayIndex:function(){var b=this._grid;return b.option("paging")?(b.option("pageIndex")-1)*b.option("pageSize"):0},lastDisplayIndex:function(){var b=this._grid,e=b.option("data").length;return b.option("paging")?Math.min(b.option("pageIndex")*b.option("pageSize"),e):e},itemsCount:function(){return this._grid.option("data").length},openPage:function(b){this._grid.refresh()},loadParams:function(){return{}},
sort:function(){this._grid._sortData();this._grid.refresh();return b.Deferred().resolve().promise()},reset:function(){this._grid.refresh();return b.Deferred().resolve().promise()},finishLoad:function(b){this._grid.option("data",b)},finishInsert:function(b){var e=this._grid;e.option("data").push(b);e.refresh()},finishDelete:function(b,e){var d=this._grid;d.option("data").splice(e,1);d.reset()}};g.prototype={firstDisplayIndex:function(){return 0},lastDisplayIndex:function(){return this._grid.option("data").length},
itemsCount:function(){return this._itemsCount},openPage:function(b){this._grid.loadData()},loadParams:function(){var b=this._grid;return{pageIndex:b.option("pageIndex"),pageSize:b.option("pageSize")}},reset:function(){return this._grid.loadData()},sort:function(){return this._grid.loadData()},finishLoad:function(b){this._itemsCount=b.itemsCount;this._grid.option("data",b.data)},finishInsert:function(b){this._grid.search()},finishDelete:function(b,e){this._grid.search()}};c.loadStrategies={DirectLoadingStrategy:e,
PageLoadingStrategy:g}})(jsGrid,jQuery);(function(c,b,d){var e=function(b){return"undefined"!==typeof b&&null!==b};c.sortStrategies={string:function(b,d){return e(b)||e(d)?e(b)?e(d)?(""+b).localeCompare(""+d):1:-1:0},number:function(b,e){return b-e},date:function(b,e){return b-e},numberAsString:function(b,e){return parseFloat(b)-parseFloat(e)}}})(jsGrid,jQuery);
(function(c,b,d){function e(b){this._init(b)}e.prototype={_init:function(e){b.extend(!0,this,e)},validate:function(e){var d=[];b.each(this._normalizeRules(e.rules),function(c,g){if(!g.validator(e.value,e.item,g.param)){var r=b.isFunction(g.message)?g.message(e.value,e.item):g.message;d.push(r)}});return d},_normalizeRules:function(e){b.isArray(e)||(e=[e]);return b.map(e,b.proxy(function(b){return this._normalizeRule(b)},this))},_normalizeRule:function(e){"string"===typeof e&&(e={validator:e});b.isFunction(e)&&
(e={validator:e});if(b.isPlainObject(e))e=b.extend({},e);else throw Error("wrong validation config specified");return b.isFunction(e.validator)?e:this._applyNamedValidator(e,e.validator)},_applyNamedValidator:function(e,d){delete e.validator;var c=g[d];if(!c)throw Error('unknown validator "'+d+'"');b.isFunction(c)&&(c={validator:c});return b.extend({},c,e)}};c.Validation=e;var g={required:{message:"Field is required",validator:function(b){return b!==d&&null!==b&&""!==b}},rangeLength:{message:"Field value length is out of the defined range",
validator:function(b,e,d){return b.length>=d[0]&&b.length<=d[1]}},minLength:{message:"Field value is too short",validator:function(b,e,d){return b.length>=d}},maxLength:{message:"Field value is too long",validator:function(b,e,d){return b.length<=d}},pattern:{message:"Field value is not matching the defined pattern",validator:function(b,e,d){"string"===typeof d&&(d=new RegExp("^(?:"+d+")$"));return d.test(b)}},range:{message:"Field value is out of the defined range",validator:function(b,e,d){return b>=
d[0]&&b<=d[1]}},min:{message:"Field value is too small",validator:function(b,e,d){return b>=d}},max:{message:"Field value is too large",validator:function(b,e,d){return b<=d}}};c.validators=g})(jsGrid,jQuery);
(function(c,b,d){function e(e){b.extend(!0,this,e);this.sortingFunc=this._getSortingFunc()}e.prototype={name:"",title:null,css:"",align:"",width:100,visible:!0,filtering:!0,inserting:!0,editing:!0,sorting:!0,sorter:"string",headerTemplate:function(){return this.title===d||null===this.title?this.name:this.title},itemTemplate:function(b,e){return b},filterTemplate:function(){return""},insertTemplate:function(){return""},editTemplate:function(b,e){this._value=b;return this.itemTemplate(b,e)},filterValue:function(){return""},
insertValue:function(){return""},editValue:function(){return this._value},_getSortingFunc:function(){var e=this.sorter;if(b.isFunction(e))return e;if("string"===typeof e)return c.sortStrategies[e];throw Error('wrong sorter for the field "'+this.name+'"!');}};c.Field=e})(jsGrid,jQuery);
(function(c,b,d){function e(b){g.call(this,b)}var g=c.Field;e.prototype=new g({autosearch:!0,readOnly:!1,filterTemplate:function(){if(!this.filtering)return"";var b=this._grid,e=this.filterControl=this._createTextBox();if(this.autosearch)e.on("keypress",function(e){13===e.which&&(b.search(),e.preventDefault())});return e},insertTemplate:function(){return this.inserting?this.insertControl=this._createTextBox():""},editTemplate:function(b){if(!this.editing)return this.itemTemplate(b);var e=this.editControl=
this._createTextBox();e.val(b);return e},filterValue:function(){return this.filterControl.val()},insertValue:function(){return this.insertControl.val()},editValue:function(){return this.editControl.val()},_createTextBox:function(){return b("<input>").attr("type","text").prop("readonly",!!this.readOnly)}});c.fields.text=c.TextField=e})(jsGrid,jQuery);
(function(c,b,d){function e(b){g.call(this,b)}var g=c.TextField;e.prototype=new g({sorter:"number",align:"right",readOnly:!1,filterValue:function(){return parseInt(this.filterControl.val()||0,10)},insertValue:function(){return parseInt(this.insertControl.val()||0,10)},editValue:function(){return parseInt(this.editControl.val()||0,10)},_createTextBox:function(){return b("<input>").attr("type","number").prop("readonly",!!this.readOnly)}});c.fields.number=c.NumberField=e})(jsGrid,jQuery);
(function(c,b,d){function e(b){g.call(this,b)}var g=c.TextField;e.prototype=new g({insertTemplate:function(){return this.inserting?this.insertControl=this._createTextArea():""},editTemplate:function(b){if(!this.editing)return this.itemTemplate(b);var e=this.editControl=this._createTextArea();e.val(b);return e},_createTextArea:function(){return b("<textarea>").prop("readonly",!!this.readOnly)}});c.fields.textarea=c.TextAreaField=e})(jsGrid,jQuery);
(function(c,b,d){function e(b){this.items=[];this.selectedIndex=-1;this.textField=this.valueField="";b.valueField&&b.items.length&&(this.valueType="number"===typeof b.items[0][b.valueField]?"number":"string");this.sorter=this.valueType;g.call(this,b)}var g=c.NumberField;e.prototype=new g({align:"center",valueType:"number",itemTemplate:function(e){var c=this.items,g=this.valueField,q=this.textField,c=g?b.grep(c,function(b,d){return b[g]===e})[0]||{}:c[e],q=q?c[q]:c;return q===d||null===q?"":q},filterTemplate:function(){if(!this.filtering)return"";
var b=this._grid,e=this.filterControl=this._createSelect();if(this.autosearch)e.on("change",function(e){b.search()});return e},insertTemplate:function(){return this.inserting?this.insertControl=this._createSelect():""},editTemplate:function(b){if(!this.editing)return this.itemTemplate(b);var e=this.editControl=this._createSelect();b!==d&&e.val(b);return e},filterValue:function(){var b=this.filterControl.val();return"number"===this.valueType?parseInt(b||0,10):b},insertValue:function(){var b=this.insertControl.val();
return"number"===this.valueType?parseInt(b||0,10):b},editValue:function(){var b=this.editControl.val();return"number"===this.valueType?parseInt(b||0,10):b},_createSelect:function(){var e=b("<select>"),d=this.valueField,c=this.textField,g=this.selectedIndex;b.each(this.items,function(r,t){var w=d?t[d]:r,z=c?t[c]:t;b("<option>").attr("value",w).text(z).appendTo(e).prop("selected",g===r)});e.prop("disabled",!!this.readOnly);return e}});c.fields.select=c.SelectField=e})(jsGrid,jQuery);
(function(c,b,d){function e(b){g.call(this,b)}var g=c.Field;e.prototype=new g({sorter:"number",align:"center",autosearch:!0,itemTemplate:function(b){return this._createCheckbox().prop({checked:b,disabled:!0})},filterTemplate:function(){if(!this.filtering)return"";var e=this._grid,d=this.filterControl=this._createCheckbox();d.prop({readOnly:!0,indeterminate:!0});d.on("click",function(){var e=b(this);e.prop("readOnly")?e.prop({checked:!1,readOnly:!1}):e.prop("checked")||e.prop({readOnly:!0,indeterminate:!0})});
if(this.autosearch)d.on("click",function(){e.search()});return d},insertTemplate:function(){return this.inserting?this.insertControl=this._createCheckbox():""},editTemplate:function(b){if(!this.editing)return this.itemTemplate(b);var e=this.editControl=this._createCheckbox();e.prop("checked",b);return e},filterValue:function(){return this.filterControl.get(0).indeterminate?d:this.filterControl.is(":checked")},insertValue:function(){return this.insertControl.is(":checked")},editValue:function(){return this.editControl.is(":checked")},
_createCheckbox:function(){return b("<input>").attr("type","checkbox")}});c.fields.checkbox=c.CheckboxField=e})(jsGrid,jQuery);
(function(c,b,d){function e(b){g.call(this,b);this._configInitialized=!1}var g=c.Field;e.prototype=new g({css:"jsgrid-control-field",align:"center",width:50,filtering:!1,inserting:!1,editing:!1,sorting:!1,buttonClass:"jsgrid-button",modeButtonClass:"jsgrid-mode-button",modeOnButtonClass:"jsgrid-mode-on-button",searchModeButtonClass:"jsgrid-search-mode-button",insertModeButtonClass:"jsgrid-insert-mode-button",editButtonClass:"jsgrid-edit-button",deleteButtonClass:"jsgrid-delete-button",searchButtonClass:"jsgrid-search-button",
clearFilterButtonClass:"jsgrid-clear-filter-button",insertButtonClass:"jsgrid-insert-button",updateButtonClass:"jsgrid-update-button",cancelEditButtonClass:"jsgrid-cancel-edit-button",searchModeButtonTooltip:"Switch to searching",insertModeButtonTooltip:"Switch to inserting",editButtonTooltip:"Edit",deleteButtonTooltip:"Delete",searchButtonTooltip:"Search",clearFilterButtonTooltip:"Clear filter",insertButtonTooltip:"Insert",updateButtonTooltip:"Update",cancelEditButtonTooltip:"Cancel edit",editButton:!0,
deleteButton:!0,clearFilterButton:!0,modeSwitchButton:!0,_initConfig:function(){this._hasFiltering=this._grid.filtering;(this._hasInserting=this._grid.inserting)&&this.modeSwitchButton&&(this._grid.inserting=!1);this._configInitialized=!0},headerTemplate:function(){this._configInitialized||this._initConfig();var b=this._hasFiltering,e=this._hasInserting;return this.modeSwitchButton&&(b||e)?b&&!e?this._createFilterSwitchButton():e&&!b?this._createInsertSwitchButton():this._createModeSwitchButton():
""},itemTemplate:function(e,d){var c=b([]);this.editButton&&(c=c.add(this._createEditButton(d)));this.deleteButton&&(c=c.add(this._createDeleteButton(d)));return c},filterTemplate:function(){var b=this._createSearchButton();return this.clearFilterButton?b.add(this._createClearFilterButton()):b},insertTemplate:function(){return this._createInsertButton()},editTemplate:function(){return this._createUpdateButton().add(this._createCancelEditButton())},_createFilterSwitchButton:function(){return this._createOnOffSwitchButton("filtering",
this.searchModeButtonClass,!0)},_createInsertSwitchButton:function(){return this._createOnOffSwitchButton("inserting",this.insertModeButtonClass,!1)},_createOnOffSwitchButton:function(e,d,c){var g=c,r=b.proxy(function(){t.toggleClass(this.modeOnButtonClass,g)},this),t=this._createGridButton(this.modeButtonClass+" "+d,"",function(b){g=!g;b.option(e,g);r()});r();return t},_createModeSwitchButton:function(){var e=!1,d=b.proxy(function(){c.attr("title",e?this.searchModeButtonTooltip:this.insertModeButtonTooltip).toggleClass(this.insertModeButtonClass,
!e).toggleClass(this.searchModeButtonClass,e)},this),c=this._createGridButton(this.modeButtonClass,"",function(b){e=!e;b.option("inserting",e);b.option("filtering",!e);d()});d();return c},_createEditButton:function(b){return this._createGridButton(this.editButtonClass,this.editButtonTooltip,function(e,d){e.editItem(b);d.stopPropagation()})},_createDeleteButton:function(b){return this._createGridButton(this.deleteButtonClass,this.deleteButtonTooltip,function(e,d){e.deleteItem(b);d.stopPropagation()})},
_createSearchButton:function(){return this._createGridButton(this.searchButtonClass,this.searchButtonTooltip,function(b){b.search()})},_createClearFilterButton:function(){return this._createGridButton(this.clearFilterButtonClass,this.clearFilterButtonTooltip,function(b){b.clearFilter()})},_createInsertButton:function(){return this._createGridButton(this.insertButtonClass,this.insertButtonTooltip,function(b){b.insertItem().done(function(){b.clearInsert()})})},_createUpdateButton:function(){return this._createGridButton(this.updateButtonClass,
this.updateButtonTooltip,function(b,e){b.updateItem();e.stopPropagation()})},_createCancelEditButton:function(){return this._createGridButton(this.cancelEditButtonClass,this.cancelEditButtonTooltip,function(b,e){b.cancelEdit();e.stopPropagation()})},_createGridButton:function(e,d,c){var g=this._grid;return b("<input>").addClass(this.buttonClass).addClass(e).attr({type:"button",title:d}).on("click",function(b){c(g,b)})},editValue:function(){return""}});c.fields.control=c.ControlField=e})(jsGrid,jQuery);
Array.prototype.filter||(Array.prototype.filter=function(c){for(var b=this.length,d=Array(b),e=0,g=0;g<b;++g){var f=this[g];c(f,g,this)&&(d[e++]=f)}d.length=e;return d});Array.prototype.some||(Array.prototype.some=function(c){for(var b=this.length,d=0;d<b;++d)if(c(this[d],d,this))return!0;return!1});Array.prototype.every||(Array.prototype.every=function(c){return!this.some(function(b,d,e){return!c(b,d,e)})});
Array.prototype.remove||(Array.prototype.remove=function(c,b){if(!b){if(!c)return[];b=this.length}return this.filter(function(d,e,g){return e<c||e>=b})});Array.prototype.forEach||(Array.prototype.forEach=function(c){for(var b=this.length,d=0;d<b;++d)c(this[d],d,this)});Array.prototype.indexOf||(Array.prototype.indexOf=function(c,b){for(var d=this.length,e=0;e<d;++e)if(this[e]===c)return e;return-1});Array.prototype.contains||(Array.prototype.contains=function(c,b){return 0<=this.indexOf(c)});
Array.prototype.map||(Array.prototype.map=function(c){for(var b=this.length,d=Array(b),e=0;e<b;++e)d[e]=c(this[e],e,this);return d});Array.prototype.reduce||(Array.prototype.reduce=function(c,b){for(var d=this.length,e=0;e<d;++e)b=c(b,this[e],e,this);return b});var oldBrowser=document.all&&!document.addEventListener;
oldBrowser||function(c,b){function d(b){var e=Ia[b]={};A.each(b.split(ia),function(b,d){e[d]=!0});return e}function e(e,d,c){if(c===b&&1===e.nodeType)if(c="data-"+d.replace(bb,"-$1").toLowerCase(),c=e.getAttribute(c),"string"===typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:cb.test(c)?A.parseJSON(c):c}catch(g){}A.data(e,d,c)}else c=b;return c}function g(b){for(var e in b)if(("data"!==e||!A.isEmptyObject(b[e]))&&"toJSON"!==e)return!1;return!0}function f(){return!1}function h(){return!0}
function l(b){return!b||!b.parentNode||11===b.parentNode.nodeType}function q(b,e){do b=b[e];while(b&&1!==b.nodeType);return b}function r(b,e,d){e=e||0;if(A.isFunction(e))return A.grep(b,function(b,c){return!!e.call(b,c,b)===d});if(e.nodeType)return A.grep(b,function(b,c){return b===e===d});if("string"===typeof e){var c=A.grep(b,function(b){return 1===b.nodeType});if(db.test(e))return A.filter(e,c,!d);e=A.filter(e,c)}return A.grep(b,function(b,c){return 0<=A.inArray(b,e)===d})}function t(b){var e=
Ja.split("|");b=b.createDocumentFragment();if(b.createElement)for(;e.length;)b.createElement(e.pop());return b}function w(b,e){return b.getElementsByTagName(e)[0]||b.appendChild(b.ownerDocument.createElement(e))}function z(b,e){if(1===e.nodeType&&A.hasData(b)){var d,c,g;c=A._data(b);var f=A._data(e,c),h=c.events;if(h)for(d in delete f.handle,f.events={},h)for(c=0,g=h[d].length;c<g;c++)A.event.add(e,d,h[d][c]);f.data&&(f.data=A.extend({},f.data))}}function B(b,e){var d;1===e.nodeType&&(e.clearAttributes&&
e.clearAttributes(),e.mergeAttributes&&e.mergeAttributes(b),d=e.nodeName.toLowerCase(),"object"===d?(e.parentNode&&(e.outerHTML=b.outerHTML),A.support.html5Clone&&b.innerHTML&&!A.trim(e.innerHTML)&&(e.innerHTML=b.innerHTML)):"input"===d&&Ka.test(b.type)?(e.defaultChecked=e.checked=b.checked,e.value!==b.value&&(e.value=b.value)):"option"===d?e.selected=b.defaultSelected:"input"===d||"textarea"===d?e.defaultValue=b.defaultValue:"script"===d&&e.text!==b.text&&(e.text=b.text),e.removeAttribute(A.expando))}
function v(b){return"undefined"!==typeof b.getElementsByTagName?b.getElementsByTagName("*"):"undefined"!==typeof b.querySelectorAll?b.querySelectorAll("*"):[]}function y(b){Ka.test(b.type)&&(b.defaultChecked=b.checked)}function C(b,e){if(e in b)return e;for(var d=e.charAt(0).toUpperCase()+e.slice(1),c=e,g=La.length;g--;)if(e=La[g]+d,e in b)return e;return c}function D(b,e){b=e||b;return"none"===A.css(b,"display")||!A.contains(b.ownerDocument,b)}function E(b,e){for(var d,c,g=[],f=0,h=b.length;f<h;f++)d=
b[f],d.style&&(g[f]=A._data(d,"olddisplay"),e?(g[f]||"none"!==d.style.display||(d.style.display=""),""===d.style.display&&D(d)&&(g[f]=A._data(d,"olddisplay",M(d.nodeName)))):(c=da(d,"display"),g[f]||"none"===c||A._data(d,"olddisplay",c)));for(f=0;f<h;f++)d=b[f],!d.style||e&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=e?g[f]||"":"none");return b}function F(b,e,d){return(b=eb.exec(e))?Math.max(0,b[1]-(d||0))+(b[2]||"px"):e}function G(b,e,d,c){e=d===(c?"border":"content")?4:"width"===
e?1:0;for(var g=0;4>e;e+=2)"margin"===d&&(g+=A.css(b,d+ma[e],!0)),c?("content"===d&&(g-=parseFloat(da(b,"padding"+ma[e]))||0),"margin"!==d&&(g-=parseFloat(da(b,"border"+ma[e]+"Width"))||0)):(g+=parseFloat(da(b,"padding"+ma[e]))||0,"padding"!==d&&(g+=parseFloat(da(b,"border"+ma[e]+"Width"))||0));return g}function H(b,e,d){var c="width"===e?b.offsetWidth:b.offsetHeight,g=!0,f=A.support.boxSizing&&"border-box"===A.css(b,"boxSizing");if(0>=c||null==c){c=da(b,e);if(0>c||null==c)c=b.style[e];if(ua.test(c))return c;
g=f&&(A.support.boxSizingReliable||c===b.style[e]);c=parseFloat(c)||0}return c+G(b,e,d||(f?"border":"content"),g)+"px"}function M(b){if(za[b])return za[b];var e=A("<"+b+">").appendTo(K.body),d=e.css("display");e.remove();if("none"===d||""===d)oa=K.body.appendChild(oa||A.extend(K.createElement("iframe"),{frameBorder:0,width:0,height:0})),pa&&oa.createElement||(pa=(oa.contentWindow||oa.contentDocument).document,pa.write("<!doctype html><html><body>"),pa.close()),e=pa.body.appendChild(pa.createElement(b)),
d=da(e,"display"),K.body.removeChild(oa);return za[b]=d}function P(b,e,d,c){var g;if(A.isArray(e))A.each(e,function(e,g){d||fb.test(b)?c(b,g):P(b+"["+("object"===typeof g?e:"")+"]",g,d,c)});else if(d||"object"!==A.type(e))c(b,e);else for(g in e)P(b+"["+g+"]",e[g],d,c)}function J(){setTimeout(function(){qa=b},0);return qa=A.now()}function O(b,e){A.each(e,function(e,d){for(var c=(sa[e]||[]).concat(sa["*"]),g=0,f=c.length;g<f&&!c[g].call(b,e,d);g++);})}function W(b,e,d){var c=0,g=va.length,f=A.Deferred().always(function(){delete h.elem}),
h=function(){for(var e=qa||J(),e=Math.max(0,l.startTime+l.duration-e),d=1-(e/l.duration||0),c=0,g=l.tweens.length;c<g;c++)l.tweens[c].run(d);f.notifyWith(b,[l,d,e]);if(1>d&&g)return e;f.resolveWith(b,[l]);return!1},l=f.promise({elem:b,props:A.extend({},e),opts:A.extend(!0,{specialEasing:{}},d),originalProperties:e,originalOptions:d,startTime:qa||J(),duration:d.duration,tweens:[],createTween:function(e,d,c){e=A.Tween(b,l.opts,e,d,l.opts.specialEasing[e]||l.opts.easing);l.tweens.push(e);return e},stop:function(e){for(var d=
0,c=e?l.tweens.length:0;d<c;d++)l.tweens[d].run(1);e?f.resolveWith(b,[l,e]):f.rejectWith(b,[l,e]);return this}});d=l.props;for(X(d,l.opts.specialEasing);c<g;c++)if(e=va[c].call(l,b,d,l.opts))return e;O(l,d);A.isFunction(l.opts.start)&&l.opts.start.call(b,l);A.fx.timer(A.extend(h,{anim:l,queue:l.opts.queue,elem:b}));return l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function X(b,e){var d,c,g,f,h;for(d in b)if(c=A.camelCase(d),g=e[c],f=b[d],
A.isArray(f)&&(g=f[1],f=b[d]=f[0]),d!==c&&(b[c]=f,delete b[d]),(h=A.cssHooks[c])&&"expand"in h)for(d in f=h.expand(f),delete b[c],f)d in b||(b[d]=f[d],e[d]=g);else e[c]=g}function N(b,e,d,c,g){return new N.prototype.init(b,e,d,c,g)}function U(b,e){var d,c={height:b},g=0;for(e=e?1:0;4>g;g+=2-e)d=ma[g],c["margin"+d]=c["padding"+d]=b;e&&(c.opacity=c.width=b);return c}function T(b){return A.isWindow(b)?b:9===b.nodeType?b.defaultView||b.parentWindow:!1}var Q,I,K=c.document,S=c.navigator,L=c.JQXLite,V=
c.$,ja=Array.prototype.push,Z=Array.prototype.slice,ca=Array.prototype.indexOf,ea=Object.prototype.toString,fa=Object.prototype.hasOwnProperty,ka=String.prototype.trim,A=function(b,e){return new A.fn.init(b,e,Q)},aa=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,R=/\S/,ia=/\s+/,Y=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ba=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,wa=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ta=/^[\],:{}\s]*$/,Aa=/(?:^|:|,)(?:\s*\[)+/g,Ba=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,la=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,
Ca=/^-ms-/,ra=/-([\da-z])/gi,Da=function(b,e){return(e+"").toUpperCase()},na=function(){K.addEventListener?(K.removeEventListener("DOMContentLoaded",na,!1),A.ready()):"complete"===K.readyState&&(K.detachEvent("onreadystatechange",na),A.ready())},xa={};A.fn=A.prototype={constructor:A,init:function(e,d,c){var g;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("string"===typeof e){g="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&3<=e.length?[null,e,null]:ba.exec(e);
if(!g||!g[1]&&d)return!d||d.jqx?(d||c).find(e):this.constructor(d).find(e);if(g[1])return e=(d=d instanceof A?d[0]:d)&&d.nodeType?d.ownerDocument||d:K,e=A.parseHTML(g[1],e,!0),wa.test(g[1])&&A.isPlainObject(d)&&this.attr.call(e,d,!0),A.merge(this,e);if((d=K.getElementById(g[2]))&&d.parentNode){if(d.id!==g[2])return c.find(e);this.length=1;this[0]=d}this.context=K;this.selector=e;return this}if(A.isFunction(e))return c.ready(e);e.selector!==b&&(this.selector=e.selector,this.context=e.context);return A.makeArray(e,
this)},selector:"",jqx:"4.5.0",length:0,size:function(){return this.length},toArray:function(){return Z.call(this)},get:function(b){return null==b?this.toArray():0>b?this[this.length+b]:this[b]},pushStack:function(b,e,d){b=A.merge(this.constructor(),b);b.prevObject=this;b.context=this.context;"find"===e?b.selector=this.selector+(this.selector?" ":"")+d:e&&(b.selector=this.selector+"."+e+"("+d+")");return b},each:function(b,e){return A.each(this,b,e)},ready:function(b){A.ready.promise().done(b);return this},
eq:function(b){b=+b;return-1===b?this.slice(b):this.slice(b,b+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(Z.apply(this,arguments),"slice",Z.call(arguments).join(","))},map:function(b){return this.pushStack(A.map(this,function(e,d){return b.call(e,d,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:ja,sort:[].sort,splice:[].splice};A.fn.init.prototype=A.fn;A.extend=A.fn.extend=function(){var e,d,c,g,f,h=
arguments[0]||{},l=1,v=arguments.length,q=!1;"boolean"===typeof h&&(q=h,h=arguments[1]||{},l=2);"object"===typeof h||A.isFunction(h)||(h={});v===l&&(h=this,--l);for(;l<v;l++)if(null!=(e=arguments[l]))for(d in e)c=h[d],g=e[d],h!==g&&(q&&g&&(A.isPlainObject(g)||(f=A.isArray(g)))?(f?(f=!1,c=c&&A.isArray(c)?c:[]):c=c&&A.isPlainObject(c)?c:{},h[d]=A.extend(q,c,g)):g!==b&&(h[d]=g));return h};A.extend({noConflict:function(b){c.$===A&&(c.$=V);b&&c.JQXLite===A&&(c.JQXLite=L);return A},isReady:!1,readyWait:1,
holdReady:function(b){b?A.readyWait++:A.ready(!0)},ready:function(b){if(!0===b?!--A.readyWait:!A.isReady){if(!K.body)return setTimeout(A.ready,1);A.isReady=!0;!0!==b&&0<--A.readyWait||(I.resolveWith(K,[A]),A.fn.trigger&&A(K).trigger("ready").off("ready"))}},isFunction:function(b){return"function"===A.type(b)},isArray:Array.isArray||function(b){return"array"===A.type(b)},isWindow:function(b){return null!=b&&b==b.window},isNumeric:function(b){return!isNaN(parseFloat(b))&&isFinite(b)},type:function(b){return null==
b?String(b):xa[ea.call(b)]||"object"},isPlainObject:function(e){if(!e||"object"!==A.type(e)||e.nodeType||A.isWindow(e))return!1;try{if(e.constructor&&!fa.call(e,"constructor")&&!fa.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(d){return!1}for(var c in e);return c===b||fa.call(e,c)},isEmptyObject:function(b){for(var e in b)return!1;return!0},error:function(b){throw Error(b);},parseHTML:function(b,e,d){var c;if(!b||"string"!==typeof b)return null;"boolean"===typeof e&&(d=e,e=0);e=e||
K;if(c=wa.exec(b))return[e.createElement(c[1])];c=A.buildFragment([b],e,d?null:[]);return A.merge([],(c.cacheable?A.clone(c.fragment):c.fragment).childNodes)},parseJSON:function(b){if(!b||"string"!==typeof b)return null;b=A.trim(b);if(c.JSON&&c.JSON.parse)return c.JSON.parse(b);if(ta.test(b.replace(Ba,"@").replace(la,"]").replace(Aa,"")))return(new Function("return "+b))();A.error("Invalid JSON: "+b)},parseXML:function(e){var d,g;if(!e||"string"!==typeof e)return null;try{c.DOMParser?(g=new DOMParser,
d=g.parseFromString(e,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(e))}catch(f){d=b}d&&d.documentElement&&!d.getElementsByTagName("parsererror").length||A.error("Invalid XML: "+e);return d},noop:function(){},globalEval:function(b){b&&R.test(b)&&(c.execScript||function(b){c.eval.call(c,b)})(b)},camelCase:function(b){return b.replace(Ca,"ms-").replace(ra,Da)},nodeName:function(b,e){return b.nodeName&&b.nodeName.toLowerCase()===e.toLowerCase()},each:function(e,d,c){var g,
f=0,h=e.length,l=h===b||A.isFunction(e);if(c)if(l)for(g in e){if(!1===d.apply(e[g],c))break}else for(;f<h&&!1!==d.apply(e[f++],c););else if(l)for(g in e){if(!1===d.call(e[g],g,e[g]))break}else for(;f<h&&!1!==d.call(e[f],f,e[f++]););return e},trim:ka&&!ka.call("\ufeff\u00a0")?function(b){return null==b?"":ka.call(b)}:function(b){return null==b?"":(b+"").replace(Y,"")},makeArray:function(b,e){var d,c=e||[];null!=b&&(d=A.type(b),null==b.length||"string"===d||"function"===d||"regexp"===d||A.isWindow(b)?
ja.call(c,b):A.merge(c,b));return c},inArray:function(b,e,d){var c;if(e){if(ca)return ca.call(e,b,d);c=e.length;for(d=d?0>d?Math.max(0,c+d):d:0;d<c;d++)if(d in e&&e[d]===b)return d}return-1},merge:function(e,d){var c=d.length,g=e.length,f=0;if("number"===typeof c)for(;f<c;f++)e[g++]=d[f];else for(;d[f]!==b;)e[g++]=d[f++];e.length=g;return e},grep:function(b,e,d){var c,g=[],f=0,h=b.length;for(d=!!d;f<h;f++)c=!!e(b[f],f),d!==c&&g.push(b[f]);return g},map:function(e,d,c){var g,f,h=[],l=0,v=e.length;
if(e instanceof A||v!==b&&"number"===typeof v&&(0<v&&e[0]&&e[v-1]||0===v||A.isArray(e)))for(;l<v;l++)g=d(e[l],l,c),null!=g&&(h[h.length]=g);else for(f in e)g=d(e[f],f,c),null!=g&&(h[h.length]=g);return h.concat.apply([],h)},guid:1,proxy:function(e,d){var c,g;"string"===typeof d&&(c=e[d],d=e,e=c);if(!A.isFunction(e))return b;g=Z.call(arguments,2);c=function(){return e.apply(d,g.concat(Z.call(arguments)))};c.guid=e.guid=e.guid||A.guid++;return c},access:function(e,d,c,g,f,h,l){var v,q=null==c,y=0,r=
e.length;if(c&&"object"===typeof c){for(y in c)A.access(e,d,y,c[y],1,h,g);f=1}else if(g!==b){v=l===b&&A.isFunction(g);q&&(v?(v=d,d=function(b,e,d){return v.call(A(b),d)}):(d.call(e,g),d=null));if(d)for(;y<r;y++)d(e[y],c,v?g.call(e[y],y,d(e[y],c)):g,l);f=1}return f?e:q?d.call(e):r?d(e[0],c):h},now:function(){return(new Date).getTime()}});A.ready.promise=function(b){if(!I)if(I=A.Deferred(),"complete"===K.readyState)setTimeout(A.ready,1);else if(K.addEventListener)K.addEventListener("DOMContentLoaded",
na,!1),c.addEventListener("load",A.ready,!1);else{K.attachEvent("onreadystatechange",na);c.attachEvent("onload",A.ready);var e=!1;try{e=null==c.frameElement&&K.documentElement}catch(d){}e&&e.doScroll&&function ab(){if(!A.isReady){try{e.doScroll("left")}catch(b){return setTimeout(ab,50)}A.ready()}}()}return I.promise(b)};A.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(b,e){xa["[object "+e+"]"]=e.toLowerCase()});Q=A(K);var Ia={};A.Callbacks=function(e){e="string"===
typeof e?Ia[e]||d(e):A.extend({},e);var c,g,f,h,l,v,q=[],y=!e.once&&[],r=function(b){c=e.memory&&b;g=!0;v=h||0;h=0;l=q.length;for(f=!0;q&&v<l;v++)if(!1===q[v].apply(b[0],b[1])&&e.stopOnFalse){c=!1;break}f=!1;q&&(y?y.length&&r(y.shift()):c?q=[]:t.disable())},t={add:function(){if(q){var b=q.length;(function gb(b){A.each(b,function(b,d){var c=A.type(d);"function"===c?e.unique&&t.has(d)||q.push(d):d&&d.length&&"string"!==c&&gb(d)})})(arguments);f?l=q.length:c&&(h=b,r(c))}return this},remove:function(){q&&
A.each(arguments,function(b,e){for(var d;-1<(d=A.inArray(e,q,d));)q.splice(d,1),f&&(d<=l&&l--,d<=v&&v--)});return this},has:function(b){return-1<A.inArray(b,q)},empty:function(){q=[];return this},disable:function(){q=y=c=b;return this},disabled:function(){return!q},lock:function(){y=b;c||t.disable();return this},locked:function(){return!y},fireWith:function(b,e){e=e||[];e=[b,e.slice?e.slice():e];!q||g&&!y||(f?y.push(e):r(e));return this},fire:function(){t.fireWith(this,arguments);return this},fired:function(){return!!g}};
return t};A.extend({Deferred:function(b){var e=[["resolve","done",A.Callbacks("once memory"),"resolved"],["reject","fail",A.Callbacks("once memory"),"rejected"],["notify","progress",A.Callbacks("memory")]],d="pending",c={state:function(){return d},always:function(){g.done(arguments).fail(arguments);return this},then:function(){var b=arguments;return A.Deferred(function(d){A.each(e,function(e,c){var f=c[0],h=b[e];g[c[1]](A.isFunction(h)?function(){var b=h.apply(this,arguments);if(b&&A.isFunction(b.promise))b.promise().done(d.resolve).fail(d.reject).progress(d.notify);
else d[f+"With"](this===g?d:this,[b])}:d[f])});b=null}).promise()},promise:function(b){return null!=b?A.extend(b,c):c}},g={};c.pipe=c.then;A.each(e,function(b,f){var h=f[2],l=f[3];c[f[1]]=h.add;l&&h.add(function(){d=l},e[b^1][2].disable,e[2][2].lock);g[f[0]]=h.fire;g[f[0]+"With"]=h.fireWith});c.promise(g);b&&b.call(g,g);return g},when:function(b){var e=0,d=Z.call(arguments),c=d.length,g=1!==c||b&&A.isFunction(b.promise)?c:0,f=1===g?b:A.Deferred(),h=function(b,e,d){return function(c){e[b]=this;d[b]=
1<arguments.length?Z.call(arguments):c;d===l?f.notifyWith(e,d):--g||f.resolveWith(e,d)}},l,v,q;if(1<c)for(l=Array(c),v=Array(c),q=Array(c);e<c;e++)d[e]&&A.isFunction(d[e].promise)?d[e].promise().done(h(e,q,d)).fail(f.reject).progress(h(e,v,l)):--g;g||f.resolveWith(q,d);return f.promise()}});A.support=function(){var b,e,d,g,f,h,l,v=K.createElement("div");v.setAttribute("className","t");v.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";e=v.getElementsByTagName("*");d=
v.getElementsByTagName("a")[0];if(!e||!d||!e.length)return{};g=K.createElement("select");f=g.appendChild(K.createElement("option"));e=v.getElementsByTagName("input")[0];d.style.cssText="top:1px;float:left;opacity:.5";b={leadingWhitespace:3===v.firstChild.nodeType,tbody:!v.getElementsByTagName("tbody").length,htmlSerialize:!!v.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:"/a"===d.getAttribute("href"),opacity:/^0.5/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,
checkOn:"on"===e.value,optSelected:f.selected,getSetAttribute:"t"!==v.className,enctype:!!K.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==K.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===K.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1};e.checked=!0;b.noCloneChecked=e.cloneNode(!0).checked;g.disabled=!0;b.optDisabled=
!f.disabled;try{delete v.test}catch(q){b.deleteExpando=!1}!v.addEventListener&&v.attachEvent&&v.fireEvent&&(v.attachEvent("onclick",d=function(){b.noCloneEvent=!1}),v.cloneNode(!0).fireEvent("onclick"),v.detachEvent("onclick",d));e=K.createElement("input");e.value="t";e.setAttribute("type","radio");b.radioValue="t"===e.value;e.setAttribute("checked","checked");e.setAttribute("name","t");v.appendChild(e);d=K.createDocumentFragment();d.appendChild(v.lastChild);b.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked;
b.appendChecked=e.checked;d.removeChild(e);d.appendChild(v);if(v.attachEvent)for(h in{submit:!0,change:!0,focusin:!0})e="on"+h,l=e in v,l||(v.setAttribute(e,"return;"),l="function"===typeof v[e]),b[h+"Bubbles"]=l;A(function(){var e,d,g,f=K.getElementsByTagName("body")[0];f&&(e=K.createElement("div"),e.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",f.insertBefore(e,f.firstChild),d=K.createElement("div"),e.appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",
g=d.getElementsByTagName("td"),g[0].style.cssText="padding:0;margin:0;border:0;display:none",l=0===g[0].offsetHeight,g[0].style.display="",g[1].style.display="none",b.reliableHiddenOffsets=l&&0===g[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",b.boxSizing=4===d.offsetWidth,b.doesNotIncludeMarginInBodyOffset=1!==f.offsetTop,c.getComputedStyle&&
(b.pixelPosition="1%"!==(c.getComputedStyle(d,null)||{}).top,b.boxSizingReliable="4px"===(c.getComputedStyle(d,null)||{width:"4px"}).width,g=K.createElement("div"),g.style.cssText=d.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;",g.style.marginRight=g.style.width="0",d.style.width="1px",d.appendChild(g),b.reliableMarginRight=!parseFloat((c.getComputedStyle(g,null)||{}).marginRight)),"undefined"!==typeof d.style.zoom&&(d.innerHTML="",d.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;width:1px;padding:1px;display:inline;zoom:1",
b.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.style.overflow="visible",d.innerHTML="<div></div>",d.firstChild.style.width="5px",b.shrinkWrapBlocks=3!==d.offsetWidth,e.style.zoom=1),f.removeChild(e))});d.removeChild(v);e=d=g=f=e=d=v=null;return b}();var cb=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,bb=/([A-Z])/g;A.extend({cache:{},deletedIds:[],uuid:0,expando:"JQXLite"+(A.fn.jqx+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},
hasData:function(b){b=b.nodeType?A.cache[b[A.expando]]:b[A.expando];return!!b&&!g(b)},data:function(e,d,c,g){if(A.acceptData(e)){var f=A.expando,h="string"===typeof d,l=e.nodeType,v=l?A.cache:e,q=l?e[f]:e[f]&&f;if(q&&v[q]&&(g||v[q].data)||!h||c!==b){q||(l?e[f]=q=A.deletedIds.pop()||A.guid++:q=f);v[q]||(v[q]={},l||(v[q].toJSON=A.noop));if("object"===typeof d||"function"===typeof d)g?v[q]=A.extend(v[q],d):v[q].data=A.extend(v[q].data,d);e=v[q];g||(e.data||(e.data={}),e=e.data);c!==b&&(e[A.camelCase(d)]=
c);h?(c=e[d],null==c&&(c=e[A.camelCase(d)])):c=e;return c}}},removeData:function(b,e,d){if(A.acceptData(b)){var c,f,h,l=b.nodeType,v=l?A.cache:b,q=l?b[A.expando]:A.expando;if(v[q]){if(e&&(c=d?v[q]:v[q].data)){A.isArray(e)||(e in c?e=[e]:(e=A.camelCase(e),e=e in c?[e]:e.split(" ")));f=0;for(h=e.length;f<h;f++)delete c[e[f]];if(!(d?g:A.isEmptyObject)(c))return}if(!d&&(delete v[q].data,!g(v[q])))return;l?A.cleanData([b],!0):A.support.deleteExpando||v!=v.window?delete v[q]:v[q]=null}}},_data:function(b,
e,d){return A.data(b,e,d,!0)},acceptData:function(b){var e=b.nodeName&&A.noData[b.nodeName.toLowerCase()];return!e||!0!==e&&b.getAttribute("classid")===e}});A.fn.extend({data:function(d,c){var g,f,h,l,v,q=this[0],y=0,r=null;if(d===b){if(this.length&&(r=A.data(q),1===q.nodeType&&!A._data(q,"parsedAttrs"))){h=q.attributes;for(v=h.length;y<v;y++)l=h[y].name,l.indexOf("data-")||(l=A.camelCase(l.substring(5)),e(q,l,r[l]));A._data(q,"parsedAttrs",!0)}return r}if("object"===typeof d)return this.each(function(){A.data(this,
d)});g=d.split(".",2);g[1]=g[1]?"."+g[1]:"";f=g[1]+"!";return A.access(this,function(c){if(c===b)return r=this.triggerHandler("getData"+f,[g[0]]),r===b&&q&&(r=A.data(q,d),r=e(q,d,r)),r===b&&g[1]?this.data(g[0]):r;g[1]=c;this.each(function(){var b=A(this);b.triggerHandler("setData"+f,g);A.data(this,d,c);b.triggerHandler("changeData"+f,g)})},null,c,1<arguments.length,null,!1)},removeData:function(b){return this.each(function(){A.removeData(this,b)})}});A.extend({queue:function(b,e,d){var c;if(b)return e=
(e||"fx")+"queue",c=A._data(b,e),d&&(!c||A.isArray(d)?c=A._data(b,e,A.makeArray(d)):c.push(d)),c||[]},dequeue:function(b,e){e=e||"fx";var d=A.queue(b,e),c=d.length,g=d.shift(),f=A._queueHooks(b,e),h=function(){A.dequeue(b,e)};"inprogress"===g&&(g=d.shift(),c--);g&&("fx"===e&&d.unshift("inprogress"),delete f.stop,g.call(b,h,f));!c&&f&&f.empty.fire()},_queueHooks:function(b,e){var d=e+"queueHooks";return A._data(b,d)||A._data(b,d,{empty:A.Callbacks("once memory").add(function(){A.removeData(b,e+"queue",
!0);A.removeData(b,d,!0)})})}});A.fn.extend({queue:function(e,d){var c=2;"string"!==typeof e&&(d=e,e="fx",c--);return arguments.length<c?A.queue(this[0],e):d===b?this:this.each(function(){var b=A.queue(this,e,d);A._queueHooks(this,e);"fx"===e&&"inprogress"!==b[0]&&A.dequeue(this,e)})},dequeue:function(b){return this.each(function(){A.dequeue(this,b)})},delay:function(b,e){b=A.fx?A.fx.speeds[b]||b:b;return this.queue(e||"fx",function(e,d){var c=setTimeout(e,b);d.stop=function(){clearTimeout(c)}})},
clearQueue:function(b){return this.queue(b||"fx",[])},promise:function(e,d){var c,g=1,f=A.Deferred(),h=this,l=this.length,v=function(){--g||f.resolveWith(h,[h])};"string"!==typeof e&&(d=e,e=b);for(e=e||"fx";l--;)(c=A._data(h[l],e+"queueHooks"))&&c.empty&&(g++,c.empty.add(v));v();return f.promise(d)}});var Ma,Na=/[\t\r\n]/g,hb=/\r/g,ib=/^(?:button|input)$/i,jb=/^(?:button|input|object|select|textarea)$/i,kb=/^a(?:rea|)$/i,Oa=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,
lb=A.support.getSetAttribute;A.fn.extend({attr:function(b,e){return A.access(this,A.attr,b,e,1<arguments.length)},removeAttr:function(b){return this.each(function(){A.removeAttr(this,b)})},prop:function(b,e){return A.access(this,A.prop,b,e,1<arguments.length)},removeProp:function(e){e=A.propFix[e]||e;return this.each(function(){try{this[e]=b,delete this[e]}catch(d){}})},addClass:function(b){var e,d,c,g,f,h,l;if(A.isFunction(b))return this.each(function(e){A(this).addClass(b.call(this,e,this.className))});
if(b&&"string"===typeof b)for(e=b.split(ia),d=0,c=this.length;d<c;d++)if(g=this[d],1===g.nodeType)if(g.className||1!==e.length){f=" "+g.className+" ";h=0;for(l=e.length;h<l;h++)0>f.indexOf(" "+e[h]+" ")&&(f+=e[h]+" ");g.className=A.trim(f)}else g.className=b;return this},removeClass:function(e){var d,c,g,f,h,l,v;if(A.isFunction(e))return this.each(function(b){A(this).removeClass(e.call(this,b,this.className))});if(e&&"string"===typeof e||e===b)for(d=(e||"").split(ia),l=0,v=this.length;l<v;l++)if(g=
this[l],1===g.nodeType&&g.className){c=(" "+g.className+" ").replace(Na," ");f=0;for(h=d.length;f<h;f++)for(;0<=c.indexOf(" "+d[f]+" ");)c=c.replace(" "+d[f]+" "," ");g.className=e?A.trim(c):""}return this},toggleClass:function(b,e){var d=typeof b,c="boolean"===typeof e;return A.isFunction(b)?this.each(function(d){A(this).toggleClass(b.call(this,d,this.className,e),e)}):this.each(function(){if("string"===d)for(var g,f=0,h=A(this),l=e,v=b.split(ia);g=v[f++];)l=c?l:!h.hasClass(g),h[l?"addClass":"removeClass"](g);
else if("undefined"===d||"boolean"===d)this.className&&A._data(this,"__className__",this.className),this.className=this.className||!1===b?"":A._data(this,"__className__")||""})},hasClass:function(b){b=" "+b+" ";for(var e=0,d=this.length;e<d;e++)if(1===this[e].nodeType&&0<=(" "+this[e].className+" ").replace(Na," ").indexOf(b))return!0;return!1},val:function(e){var d,c,g,f=this[0];if(arguments.length)return g=A.isFunction(e),this.each(function(c){var f=A(this);1===this.nodeType&&(c=g?e.call(this,c,
f.val()):e,null==c?c="":"number"===typeof c?c+="":A.isArray(c)&&(c=A.map(c,function(b){return null==b?"":b+""})),d=A.valHooks[this.type]||A.valHooks[this.nodeName.toLowerCase()],d&&"set"in d&&d.set(this,c,"value")!==b||(this.value=c))});if(f){if((d=A.valHooks[f.type]||A.valHooks[f.nodeName.toLowerCase()])&&"get"in d&&(c=d.get(f,"value"))!==b)return c;c=f.value;return"string"===typeof c?c.replace(hb,""):null==c?"":c}}});A.extend({valHooks:{option:{get:function(b){var e=b.attributes.value;return!e||
e.specified?b.value:b.text}},select:{get:function(b){for(var e,d=b.options,c=b.selectedIndex,g=(b="select-one"===b.type||0>c)?null:[],f=b?c+1:d.length,h=0>c?f:b?c:0;h<f;h++)if(e=d[h],!(!e.selected&&h!==c||(A.support.optDisabled?e.disabled:null!==e.getAttribute("disabled"))||e.parentNode.disabled&&A.nodeName(e.parentNode,"optgroup"))){e=A(e).val();if(b)return e;g.push(e)}return g},set:function(b,e){var d=A.makeArray(e);A(b).find("option").each(function(){this.selected=0<=A.inArray(A(this).val(),d)});
d.length||(b.selectedIndex=-1);return d}}},attrFn:{},attr:function(e,d,c,g){var f,h,l=e.nodeType;if(e&&3!==l&&8!==l&&2!==l){if(g&&A.isFunction(A.fn[d]))return A(e)[d](c);if("undefined"===typeof e.getAttribute)return A.prop(e,d,c);if(g=1!==l||!A.isXMLDoc(e))d=d.toLowerCase(),h=A.attrHooks[d]||(Oa.test(d)?Ma:void 0);if(c!==b)if(null===c)A.removeAttr(e,d);else{if(h&&"set"in h&&g&&(f=h.set(e,c,d))!==b)return f;e.setAttribute(d,c+"");return c}else{if(h&&"get"in h&&g&&null!==(f=h.get(e,d)))return f;f=e.getAttribute(d);
return null===f?b:f}}},removeAttr:function(b,e){var d,c,g,f,h=0;if(e&&1===b.nodeType)for(c=e.split(ia);h<c.length;h++)if(g=c[h])d=A.propFix[g]||g,(f=Oa.test(g))||A.attr(b,g,""),b.removeAttribute(lb?g:d),f&&d in b&&(b[d]=!1)},attrHooks:{type:{set:function(b,e){if(ib.test(b.nodeName)&&b.parentNode)A.error("type property can't be changed");else if(!A.support.radioValue&&"radio"===e&&A.nodeName(b,"input")){var d=b.value;b.setAttribute("type",e);d&&(b.value=d);return e}}},value:{get:function(b,e){return e in
b?b.value:null},set:function(b,e,d){b.value=e}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,d,c){var g,f,h;h=e.nodeType;if(e&&3!==h&&8!==h&&2!==h){if(h=1!==h||!A.isXMLDoc(e))d=A.propFix[d]||d,f=A.propHooks[d];return c!==b?f&&"set"in f&&(g=f.set(e,c,d))!==b?
g:e[d]=c:f&&"get"in f&&null!==(g=f.get(e,d))?g:e[d]}},propHooks:{tabIndex:{get:function(e){var d=e.getAttributeNode("tabindex");return d&&d.specified?parseInt(d.value,10):jb.test(e.nodeName)||kb.test(e.nodeName)&&e.href?0:b}}}});Ma={get:function(e,d){var c,g=A.prop(e,d);return!0===g||"boolean"!==typeof g&&(c=e.getAttributeNode(d))&&!1!==c.nodeValue?d.toLowerCase():b},set:function(b,e,d){!1===e?A.removeAttr(b,d):(e=A.propFix[d]||d,e in b&&(b[e]=!0),b.setAttribute(d,d.toLowerCase()));return d}};A.support.enctype||
(A.propFix.enctype="encoding");var Pa=/^([^\.]*|)(?:\.(.+)|)$/,mb=/(?:^|\s)hover(\.\S+|)\b/,nb=/^key/,ob=/^(?:mouse|contextmenu)|click/,Qa=/^(?:focusinfocus|focusoutblur)$/,Ra=function(b){return A.event.special.hover?b:b.replace(mb,"mouseenter$1 mouseleave$1")};A.event={add:function(e,d,c,g,f){var h,l,v,q,y,r,t,C,w;if(3!==e.nodeType&&8!==e.nodeType&&d&&c&&(h=A._data(e))){c.handler&&(t=c,c=t.handler,f=t.selector);c.guid||(c.guid=A.guid++);v=h.events;v||(h.events=v={});l=h.handle;l||(h.handle=l=function(e){return"undefined"===
typeof A||e&&A.event.triggered===e.type?b:A.event.dispatch.apply(l.elem,arguments)},l.elem=e);d=A.trim(Ra(d)).split(" ");for(h=0;h<d.length;h++)q=Pa.exec(d[h])||[],y=q[1],r=(q[2]||"").split(".").sort(),w=A.event.special[y]||{},y=(f?w.delegateType:w.bindType)||y,w=A.event.special[y]||{},q=A.extend({type:y,origType:q[1],data:g,handler:c,guid:c.guid,selector:f,needsContext:f&&A.expr.match.needsContext.test(f),namespace:r.join(".")},t),C=v[y],C||(C=v[y]=[],C.delegateCount=0,w.setup&&!1!==w.setup.call(e,
g,r,l)||(e.addEventListener?e.addEventListener(y,l,!1):e.attachEvent&&e.attachEvent("on"+y,l))),w.add&&(w.add.call(e,q),q.handler.guid||(q.handler.guid=c.guid)),f?C.splice(C.delegateCount++,0,q):C.push(q),A.event.global[y]=!0;e=null}},global:{},remove:function(b,e,d,c,g){var f,h,l,v,q,y,r,t,C,w,B=A.hasData(b)&&A._data(b);if(B&&(r=B.events)){e=A.trim(Ra(e||"")).split(" ");for(f=0;f<e.length;f++)if(h=Pa.exec(e[f])||[],l=v=h[1],h=h[2],l){t=A.event.special[l]||{};l=(c?t.delegateType:t.bindType)||l;C=
r[l]||[];q=C.length;h=h?new RegExp("(^|\\.)"+h.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(y=0;y<C.length;y++)w=C[y],!g&&v!==w.origType||d&&d.guid!==w.guid||h&&!h.test(w.namespace)||c&&c!==w.selector&&("**"!==c||!w.selector)||(C.splice(y--,1),w.selector&&C.delegateCount--,t.remove&&t.remove.call(b,w));0===C.length&&q!==C.length&&(t.teardown&&!1!==t.teardown.call(b,h,B.handle)||A.removeEvent(b,l,B.handle),delete r[l])}else for(l in r)A.event.remove(b,l+e[f],d,c,!0);A.isEmptyObject(r)&&
(delete B.handle,A.removeData(b,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(e,d,g,f){if(!g||3!==g.nodeType&&8!==g.nodeType){var h,l,v,q,y,r,t=e.type||e;v=[];if(!Qa.test(t+A.event.triggered)&&(0<=t.indexOf("!")&&(t=t.slice(0,-1),h=!0),0<=t.indexOf(".")&&(v=t.split("."),t=v.shift(),v.sort()),g&&!A.event.customEvent[t]||A.event.global[t]))if(e="object"===typeof e?e[A.expando]?e:new A.Event(t,e):new A.Event(t),e.type=t,e.isTrigger=!0,e.exclusive=h,e.namespace=v.join("."),
e.namespace_re=e.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,v=0>t.indexOf(":")?"on"+t:"",g){if(e.result=b,e.target||(e.target=g),d=null!=d?A.makeArray(d):[],d.unshift(e),q=A.event.special[t]||{},!q.trigger||!1!==q.trigger.apply(g,d)){r=[[g,q.bindType||t]];if(!f&&!q.noBubble&&!A.isWindow(g)){y=q.delegateType||t;h=Qa.test(y+t)?g:g.parentNode;for(l=g;h;h=h.parentNode)r.push([h,y]),l=h;l===(g.ownerDocument||K)&&r.push([l.defaultView||l.parentWindow||c,y])}for(l=0;l<r.length&&
!e.isPropagationStopped();l++)h=r[l][0],e.type=r[l][1],(y=(A._data(h,"events")||{})[e.type]&&A._data(h,"handle"))&&y.apply(h,d),(y=v&&h[v])&&A.acceptData(h)&&y.apply&&!1===y.apply(h,d)&&e.preventDefault();e.type=t;f||e.isDefaultPrevented()||q._default&&!1!==q._default.apply(g.ownerDocument,d)||"click"===t&&A.nodeName(g,"a")||!A.acceptData(g)||!v||!g[t]||("focus"===t||"blur"===t)&&0===e.target.offsetWidth||A.isWindow(g)||((l=g[v])&&(g[v]=null),A.event.triggered=t,g[t](),A.event.triggered=b,l&&(g[v]=
l));return e.result}}else for(l in g=A.cache,g)g[l].events&&g[l].events[t]&&A.event.trigger(e,d,g[l].handle.elem,!0)}},dispatch:function(e){e=A.event.fix(e||c.event);var d,g,f,h,l,v,q=(A._data(this,"events")||{})[e.type]||[],y=q.delegateCount,r=Z.call(arguments),t=!e.exclusive&&!e.namespace,C=A.event.special[e.type]||{},w=[];r[0]=e;e.delegateTarget=this;if(!C.preDispatch||!1!==C.preDispatch.call(this,e)){if(y&&(!e.button||"click"!==e.type))for(g=e.target;g!=this;g=g.parentNode||this)if(!0!==g.disabled||
"click"!==e.type){h={};l=[];for(d=0;d<y;d++)f=q[d],v=f.selector,h[v]===b&&(h[v]=f.needsContext?0<=A(v,this).index(g):A.find(v,this,null,[g]).length),h[v]&&l.push(f);l.length&&w.push({elem:g,matches:l})}q.length>y&&w.push({elem:this,matches:q.slice(y)});for(d=0;d<w.length&&!e.isPropagationStopped();d++)for(h=w[d],e.currentTarget=h.elem,g=0;g<h.matches.length&&!e.isImmediatePropagationStopped();g++)if(f=h.matches[g],t||!e.namespace&&!f.namespace||e.namespace_re&&e.namespace_re.test(f.namespace))e.data=
f.data,e.handleObj=f,f=((A.event.special[f.origType]||{}).handle||f.handler).apply(h.elem,r),f!==b&&(e.result=f,!1===f&&(e.preventDefault(),e.stopPropagation()));C.postDispatch&&C.postDispatch.call(this,e);return e.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(b,e){null==b.which&&
(b.which=null!=e.charCode?e.charCode:e.keyCode);return b}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,d){var c,g,f=d.button,h=d.fromElement;null==e.pageX&&null!=d.clientX&&(c=e.target.ownerDocument||K,g=c.documentElement,c=c.body,e.pageX=d.clientX+(g&&g.scrollLeft||c&&c.scrollLeft||0)-(g&&g.clientLeft||c&&c.clientLeft||0),e.pageY=d.clientY+(g&&g.scrollTop||c&&c.scrollTop||0)-(g&&g.clientTop||c&&
c.clientTop||0));!e.relatedTarget&&h&&(e.relatedTarget=h===e.target?d.toElement:h);e.which||f===b||(e.which=f&1?1:f&2?3:f&4?2:0);return e}},fix:function(b){if(b[A.expando])return b;var e,d,c=b,g=A.event.fixHooks[b.type]||{},f=g.props?this.props.concat(g.props):this.props;b=A.Event(c);for(e=f.length;e;)d=f[--e],b[d]=c[d];b.target||(b.target=c.srcElement||K);3===b.target.nodeType&&(b.target=b.target.parentNode);b.metaKey=!!b.metaKey;return g.filter?g.filter(b,c):b},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},
blur:{delegateType:"focusout"},beforeunload:{setup:function(b,e,d){A.isWindow(this)&&(this.onbeforeunload=d)},teardown:function(b,e){this.onbeforeunload===e&&(this.onbeforeunload=null)}}},simulate:function(b,e,d,c){b=A.extend(new A.Event,d,{type:b,isSimulated:!0,originalEvent:{}});c?A.event.trigger(b,null,e):A.event.dispatch.call(e,b);b.isDefaultPrevented()&&d.preventDefault()}};A.event.handle=A.event.dispatch;A.removeEvent=K.removeEventListener?function(b,e,d){b.removeEventListener&&b.removeEventListener(e,
d,!1)}:function(b,e,d){e="on"+e;b.detachEvent&&("undefined"===typeof b[e]&&(b[e]=null),b.detachEvent(e,d))};A.Event=function(b,e){if(!(this instanceof A.Event))return new A.Event(b,e);b&&b.type?(this.originalEvent=b,this.type=b.type,this.isDefaultPrevented=b.defaultPrevented||!1===b.returnValue||b.getPreventDefault&&b.getPreventDefault()?h:f):this.type=b;e&&A.extend(this,e);this.timeStamp=b&&b.timeStamp||A.now();this[A.expando]=!0};A.Event.prototype={preventDefault:function(){this.isDefaultPrevented=
h;var b=this.originalEvent;b&&(b.preventDefault?b.preventDefault():b.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=h;var b=this.originalEvent;b&&(b.stopPropagation&&b.stopPropagation(),b.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=h;this.stopPropagation()},isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f};A.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(b,e){A.event.special[b]={delegateType:e,
bindType:e,handle:function(b){var d,c=b.relatedTarget,g=b.handleObj;if(!c||c!==this&&!A.contains(this,c))b.type=g.origType,d=g.handler.apply(this,arguments),b.type=e;return d}}});A.fn.extend({on:function(e,d,c,g,h){var l,v;if("object"===typeof e){"string"!==typeof d&&(c=c||d,d=b);for(v in e)this.on(v,d,c,e[v],h);return this}null==c&&null==g?(g=d,c=d=b):null==g&&("string"===typeof d?(g=c,c=b):(g=c,c=d,d=b));if(!1===g)g=f;else if(!g)return this;1===h&&(l=g,g=function(b){A().off(b);return l.apply(this,
arguments)},g.guid=l.guid||(l.guid=A.guid++));return this.each(function(){A.event.add(this,e,g,c,d)})},off:function(e,d,c){var g;if(e&&e.preventDefault&&e.handleObj)return g=e.handleObj,A(e.delegateTarget).off(g.namespace?g.origType+"."+g.namespace:g.origType,g.selector,g.handler),this;if("object"===typeof e){for(g in e)this.off(g,d,e[g]);return this}if(!1===d||"function"===typeof d)c=d,d=b;!1===c&&(c=f);return this.each(function(){A.event.remove(this,e,c,d)})},delegate:function(b,e,d,c){return this.on(e,
b,d,c)},undelegate:function(b,e,d){return 1===arguments.length?this.off(b,"**"):this.off(e,b||"**",d)},trigger:function(b,e){return this.each(function(){A.event.trigger(b,e,this)})},triggerHandler:function(b,e){if(this[0])return A.event.trigger(b,e,this[0],!0)},toggle:function(b){var e=arguments,d=b.guid||A.guid++,c=0,g=function(d){var g=(A._data(this,"lastToggle"+b.guid)||0)%c;A._data(this,"lastToggle"+b.guid,g+1);d.preventDefault();return e[g].apply(this,arguments)||!1};for(g.guid=d;c<e.length;)e[c++].guid=
d;return this.click(g)},hover:function(b,e){return this.mouseenter(b).mouseleave(e||b)}});A.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(b,e){A.fn[e]=function(b,d){null==d&&(d=b,b=null);return 0<arguments.length?this.on(e,null,b,d):this.trigger(e)};nb.test(e)&&(A.event.fixHooks[e]=A.event.keyHooks);ob.test(e)&&(A.event.fixHooks[e]=
A.event.mouseHooks)});(function(b,e){function d(b,e,c,g){c=c||[];e=e||ba;var f,h,l,v,q=e.nodeType;if(!b||"string"!==typeof b)return c;if(1!==q&&9!==q)return[];l=F(e);if(!l&&!g&&(f=Aa.exec(b)))if(v=f[1])if(9===q)if((h=e.getElementById(v))&&h.parentNode){if(h.id===v)return c.push(h),c}else return c;else{if(e.ownerDocument&&(h=e.ownerDocument.getElementById(v))&&O(e,h)&&h.id===v)return c.push(h),c}else{if(f[2])return T.apply(c,S.call(e.getElementsByTagName(b),0)),c;if((v=f[3])&&na&&e.getElementsByClassName)return T.apply(c,
S.call(e.getElementsByClassName(v),0)),c}return w(b.replace(ea,"$1"),e,c,g,l)}function c(b){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===b}}function g(b){return function(e){var d=e.nodeName.toLowerCase();return("input"===d||"button"===d)&&e.type===b}}function f(b){return V(function(e){e=+e;return V(function(d,c){for(var g,f=b([],d.length,e),h=f.length;h--;)d[g=f[h]]&&(d[g]=!(c[g]=d[g]))})})}function h(b,e,d){if(b===e)return d;for(b=b.nextSibling;b;){if(b===e)return-1;b=b.nextSibling}return 1}
function l(b,e){var c,g,f,h,v,q,y;if(v=L[Y][b+" "])return e?0:v.slice(0);v=b;q=[];for(y=J.preFilter;v;){if(!c||(g=Ba.exec(v)))g&&(v=v.slice(g[0].length)||v),q.push(f=[]);c=!1;if(g=fa.exec(v))f.push(c=new I(g.shift())),v=v.slice(c.length),c.type=g[0].replace(ea," ");for(h in J.filter)!(g=ra[h].exec(v))||y[h]&&!(g=y[h](g))||(f.push(c=new I(g.shift())),v=v.slice(c.length),c.type=h,c.matches=g);if(!c)break}return e?v.length:v?d.error(b):L(b,q).slice(0)}function v(b,e,d){var c=e.dir,g=d&&"parentNode"===
e.dir,f=wa++;return e.first?function(e,d,f){for(;e=e[c];)if(g||1===e.nodeType)return b(e,d,f)}:function(e,d,h){if(!h)for(var l,v=K+" "+f+" ",q=v+D;e=e[c];){if(g||1===e.nodeType){if((l=e[Y])===q)return e.sizset;if("string"===typeof l&&0===l.indexOf(v)){if(e.sizset)return e}else{e[Y]=q;if(b(e,d,h))return e.sizset=!0,e;e.sizset=!1}}}else for(;e=e[c];)if((g||1===e.nodeType)&&b(e,d,h))return e}}function q(b){return 1<b.length?function(e,d,c){for(var g=b.length;g--;)if(!b[g](e,d,c))return!1;return!0}:b[0]}
function y(b,e,d,c,g){for(var f,h=[],l=0,v=b.length,q=null!=e;l<v;l++)if(f=b[l])if(!d||d(f,c,g))h.push(f),q&&e.push(l);return h}function r(b,e,c,g,f,h){g&&!g[Y]&&(g=r(g));f&&!f[Y]&&(f=r(f,h));return V(function(h,l,v,q){var r,t,C=[],w=[],B=l.length,D;if(!(D=h)){D=e||"*";for(var z=v.nodeType?[v]:v,J=[],A=0,E=z.length;A<E;A++)d(D,z[A],J);D=J}D=!b||!h&&e?D:y(D,C,b,v,q);z=c?f||(h?b:B||g)?[]:l:D;c&&c(D,z,v,q);if(g)for(r=y(z,w),g(r,[],v,q),v=r.length;v--;)if(t=r[v])z[w[v]]=!(D[w[v]]=t);if(h){if(f||b){if(f){r=
[];for(v=z.length;v--;)(t=z[v])&&r.push(D[v]=t);f(null,z=[],r,q)}for(v=z.length;v--;)(t=z[v])&&-1<(r=f?Z.call(h,t):C[v])&&(h[r]=!(l[r]=t))}}else z=y(z===l?z.splice(B,z.length):z),f?f(null,l,z,q):T.apply(l,z)})}function t(b){var e,d,c,g=b.length,f=J.relative[b[0].type];d=f||J.relative[" "];for(var h=f?1:0,l=v(function(b){return b===e},d,!0),y=v(function(b){return-1<Z.call(e,b)},d,!0),C=[function(b,d,c){return!f&&(c||d!==G)||((e=d).nodeType?l(b,d,c):y(b,d,c))}];h<g;h++)if(d=J.relative[b[h].type])C=
[v(q(C),d)];else{d=J.filter[b[h].type].apply(null,b[h].matches);if(d[Y]){for(c=++h;c<g&&!J.relative[b[c].type];c++);return r(1<h&&q(C),1<h&&b.slice(0,h-1).join("").replace(ea,"$1"),d,h<c&&t(b.slice(h,c)),c<g&&t(b=b.slice(c)),c<g&&b.join(""))}C.push(d)}return q(C)}function C(b,e){var c=0<e.length,g=0<b.length,f=function(h,l,v,q,r){var t,C,w=[],B=0,z="0",A=h&&[],E=null!=r,F=G,O=h||g&&J.find.TAG("*",r&&l.parentNode||l),W=K+=null==F?1:Math.E;E&&(G=l!==ba&&l,D=f.el);for(;null!=(r=O[z]);z++){if(g&&r){for(t=
0;C=b[t];t++)if(C(r,l,v)){q.push(r);break}E&&(K=W,D=++f.el)}c&&((r=!C&&r)&&B--,h&&A.push(r))}B+=z;if(c&&z!==B){for(t=0;C=e[t];t++)C(A,w,l,v);if(h){if(0<B)for(;z--;)A[z]||w[z]||(w[z]=Q.call(q));w=y(w)}T.apply(q,w);E&&!h&&0<w.length&&1<B+e.length&&d.uniqueSort(q)}E&&(K=W,G=F);return A};f.el=0;return c?V(f):f}function w(b,e,d,c,g){var f,h,v,q,y=l(b);if(!c&&1===y.length){h=y[0]=y[0].slice(0);if(2<h.length&&"ID"===(v=h[0]).type&&9===e.nodeType&&!g&&J.relative[h[1].type]){e=J.find.ID(v.matches[0].replace(la,
""),e,g)[0];if(!e)return d;b=b.slice(h.shift().length)}for(f=ra.POS.test(b)?-1:h.length-1;0<=f;f--){v=h[f];if(J.relative[q=v.type])break;if(q=J.find[q])if(c=q(v.matches[0].replace(la,""),R.test(h[0].type)&&e.parentNode||e,g)){h.splice(f,1);b=c.length&&h.join("");if(!b)return T.apply(d,S.call(c,0)),d;break}}}W(b,y)(c,e,g,d,R.test(b));return d}function B(){}var D,z,J,E,F,O,W,X,U,G,N=!0,Y=("sizcache"+Math.random()).replace(".",""),I=String,ba=b.document,H=ba.documentElement,K=0,wa=0,Q=[].pop,T=[].push,
S=[].slice,Z=[].indexOf||function(b){for(var e=0,d=this.length;e<d;e++)if(this[e]===b)return e;return-1},V=function(b,e){b[Y]=null==e||e;return b},M=function(){var b={},e=[];return V(function(d,c){e.push(d)>J.cacheLength&&delete b[e.shift()];return b[d+" "]=c},b)},ja=M(),L=M(),ca=M(),M="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+"(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+".replace("w","w#")+")|)|)[\\x20\\t\\r\\n\\f]*\\]",
ta=":((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+M+")|[^:]|\\\\.)*|.*))\\)|)",ea=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),Ba=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,fa=/^[\x20\t\r\n\f]*([\x20\t\r\n\f>+~])[\x20\t\r\n\f]*/,P=new RegExp(ta),Aa=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,R=/[\x20\t\r\n\f]*[+~]/,Ca=/h\d/i,ka=/input|select|textarea|button/i,la=/\\(?!\\)/g,ra={ID:/^#((?:\\.|[-\w]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[-\w]|[^\x00-\xa0])+)/,
NAME:/^\[name=['"]?((?:\\.|[-\w]|[^\x00-\xa0])+)['"]?\]/,TAG:new RegExp("^("+"(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:new RegExp("^"+M),PSEUDO:new RegExp("^"+ta),POS:/:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i,CHILD:/^:(only|nth|first|last)-child(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},
aa=function(b){var e=ba.createElement("div");try{return b(e)}catch(d){return!1}finally{}},M=aa(function(b){b.appendChild(ba.createComment(""));return!b.getElementsByTagName("*").length}),ia=aa(function(b){b.innerHTML="<a href='#'></a>";return b.firstChild&&"undefined"!==typeof b.firstChild.getAttribute&&"#"===b.firstChild.getAttribute("href")}),Da=aa(function(b){b.innerHTML="<select></select>";b=typeof b.lastChild.getAttribute("multiple");return"boolean"!==b&&"string"!==b}),na=aa(function(b){b.innerHTML=
"<div class='hidden e'></div><div class='hidden'></div>";if(!b.getElementsByClassName||!b.getElementsByClassName("e").length)return!1;b.lastChild.className="e";return 2===b.getElementsByClassName("e").length}),xa=aa(function(b){b.id=Y+0;b.innerHTML="<a name='"+Y+"'></a><div name='"+Y+"'></div>";H.insertBefore(b,H.firstChild);var e=ba.getElementsByName&&ba.getElementsByName(Y).length===2+ba.getElementsByName(Y+0).length;z=!ba.getElementById(Y);H.removeChild(b);return e});try{S.call(H.childNodes,0)[0].nodeType}catch(Lb){S=
function(b){for(var e,d=[];e=this[b];b++)d.push(e);return d}}d.matches=function(b,e){return d(b,null,null,e)};d.matchesSelector=function(b,e){return 0<d(e,null,null,[b]).length};E=d.getText=function(b){var e,d="",c=0;if(e=b.nodeType)if(1===e||9===e||11===e){if("string"===typeof b.textContent)return b.textContent;for(b=b.firstChild;b;b=b.nextSibling)d+=E(b)}else{if(3===e||4===e)return b.nodeValue}else for(;e=b[c];c++)d+=E(e);return d};F=d.isXML=function(b){return(b=b&&(b.ownerDocument||b).documentElement)?
"HTML"!==b.nodeName:!1};O=d.contains=H.contains?function(b,e){var d=9===b.nodeType?b.documentElement:b,c=e&&e.parentNode;return b===c||!!(c&&1===c.nodeType&&d.contains&&d.contains(c))}:H.compareDocumentPosition?function(b,e){return e&&!!(b.compareDocumentPosition(e)&16)}:function(b,e){for(;e=e.parentNode;)if(e===b)return!0;return!1};d.attr=function(b,e){var d,c=F(b);c||(e=e.toLowerCase());return(d=J.attrHandle[e])?d(b):c||Da?b.getAttribute(e):(d=b.getAttributeNode(e))?"boolean"===typeof b[e]?b[e]?
e:null:d.specified?d.value:null:null};J=d.selectors={cacheLength:50,createPseudo:V,match:ra,attrHandle:ia?{}:{href:function(b){return b.getAttribute("href",2)},type:function(b){return b.getAttribute("type")}},find:{ID:z?function(b,e,d){if("undefined"!==typeof e.getElementById&&!d)return(b=e.getElementById(b))&&b.parentNode?[b]:[]}:function(b,d,c){if("undefined"!==typeof d.getElementById&&!c)return(d=d.getElementById(b))?d.id===b||"undefined"!==typeof d.getAttributeNode&&d.getAttributeNode("id").value===
b?[d]:e:[]},TAG:M?function(b,e){if("undefined"!==typeof e.getElementsByTagName)return e.getElementsByTagName(b)}:function(b,e){var d=e.getElementsByTagName(b);if("*"===b){for(var c,g=[],f=0;c=d[f];f++)1===c.nodeType&&g.push(c);return g}return d},NAME:xa&&function(b,e){if("undefined"!==typeof e.getElementsByName)return e.getElementsByName(name)},CLASS:na&&function(b,e,d){if("undefined"!==typeof e.getElementsByClassName&&!d)return e.getElementsByClassName(b)}},relative:{">":{dir:"parentNode",first:!0},
" ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(b){b[1]=b[1].replace(la,"");b[3]=(b[4]||b[5]||"").replace(la,"");"~="===b[2]&&(b[3]=" "+b[3]+" ");return b.slice(0,4)},CHILD:function(b){b[1]=b[1].toLowerCase();"nth"===b[1]?(b[2]||d.error(b[0]),b[3]=+(b[3]?b[4]+(b[5]||1):2*("even"===b[2]||"odd"===b[2])),b[4]=+(b[6]+b[7]||"odd"===b[2])):b[2]&&d.error(b[0]);return b},PSEUDO:function(b){var e,d;if(ra.CHILD.test(b[0]))return null;if(b[3])b[2]=
b[3];else if(e=b[4])P.test(e)&&(d=l(e,!0))&&(d=e.indexOf(")",e.length-d)-e.length)&&(e=e.slice(0,d),b[0]=b[0].slice(0,d)),b[2]=e;return b.slice(0,3)}},filter:{ID:z?function(b){b=b.replace(la,"");return function(e){return e.getAttribute("id")===b}}:function(b){b=b.replace(la,"");return function(e){return(e="undefined"!==typeof e.getAttributeNode&&e.getAttributeNode("id"))&&e.value===b}},TAG:function(b){if("*"===b)return function(){return!0};b=b.replace(la,"").toLowerCase();return function(e){return e.nodeName&&
e.nodeName.toLowerCase()===b}},CLASS:function(b){var e=ja[Y][b+" "];return e||(e=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+b+"([\\x20\\t\\r\\n\\f]|$)"),ja(b,function(b){return e.test(b.className||"undefined"!==typeof b.getAttribute&&b.getAttribute("class")||"")}))},ATTR:function(b,e,c){return function(g,f){var h=d.attr(g,b);if(null==h)return"!="===e;if(!e)return!0;h+="";return"="===e?h===c:"!="===e?h!==c:"^="===e?c&&0===h.indexOf(c):"*="===e?c&&-1<h.indexOf(c):"$="===e?c&&h.substr(h.length-c.length)===
c:"~="===e?-1<(" "+h+" ").indexOf(c):"|="===e?h===c||h.substr(0,c.length+1)===c+"-":!1}},CHILD:function(b,e,d,c){return"nth"===b?function(b){var e,g;e=b.parentNode;if(1===d&&0===c)return!0;if(e)for(g=0,e=e.firstChild;e&&(1!==e.nodeType||(g++,b!==e));e=e.nextSibling);g-=c;return g===d||0===g%d&&0<=g/d}:function(e){var d=e;switch(b){case "only":case "first":for(;d=d.previousSibling;)if(1===d.nodeType)return!1;if("first"===b)return!0;d=e;case "last":for(;d=d.nextSibling;)if(1===d.nodeType)return!1;return!0}}},
PSEUDO:function(b,e){var c,g=J.pseudos[b]||J.setFilters[b.toLowerCase()]||d.error("unsupported pseudo: "+b);return g[Y]?g(e):1<g.length?(c=[b,b,"",e],J.setFilters.hasOwnProperty(b.toLowerCase())?V(function(b,d){for(var c,f=g(b,e),h=f.length;h--;)c=Z.call(b,f[h]),b[c]=!(d[c]=f[h])}):function(b){return g(b,0,c)}):g}},pseudos:{not:V(function(b){var e=[],d=[],c=W(b.replace(ea,"$1"));return c[Y]?V(function(b,e,d,g){g=c(b,null,g,[]);for(var f=b.length;f--;)if(d=g[f])b[f]=!(e[f]=d)}):function(b,g,f){e[0]=
b;c(e,null,f,d);return!d.pop()}}),has:V(function(b){return function(e){return 0<d(b,e).length}}),contains:V(function(b){return function(e){return-1<(e.textContent||e.innerText||E(e)).indexOf(b)}}),enabled:function(b){return!1===b.disabled},disabled:function(b){return!0===b.disabled},checked:function(b){var e=b.nodeName.toLowerCase();return"input"===e&&!!b.checked||"option"===e&&!!b.selected},selected:function(b){b.parentNode&&b.parentNode.selectedIndex;return!0===b.selected},parent:function(b){return!J.pseudos.empty(b)},
empty:function(b){var e;for(b=b.firstChild;b;){if("@"<b.nodeName||3===(e=b.nodeType)||4===e)return!1;b=b.nextSibling}return!0},header:function(b){return Ca.test(b.nodeName)},text:function(b){var e,d;return"input"===b.nodeName.toLowerCase()&&"text"===(e=b.type)&&(null==(d=b.getAttribute("type"))||d.toLowerCase()===e)},radio:c("radio"),checkbox:c("checkbox"),file:c("file"),password:c("password"),image:c("image"),submit:g("submit"),reset:g("reset"),button:function(b){var e=b.nodeName.toLowerCase();return"input"===
e&&"button"===b.type||"button"===e},input:function(b){return ka.test(b.nodeName)},focus:function(b){var e=b.ownerDocument;return b===e.activeElement&&(!e.hasFocus||e.hasFocus())&&!!(b.type||b.href||~b.tabIndex)},active:function(b){return b===b.ownerDocument.activeElement},first:f(function(){return[0]}),last:f(function(b,e){return[e-1]}),eq:f(function(b,e,d){return[0>d?d+e:d]}),even:f(function(b,e){for(var d=0;d<e;d+=2)b.push(d);return b}),odd:f(function(b,e){for(var d=1;d<e;d+=2)b.push(d);return b}),
lt:f(function(b,e,d){for(e=0>d?d+e:d;0<=--e;)b.push(e);return b}),gt:f(function(b,e,d){for(d=0>d?d+e:d;++d<e;)b.push(d);return b})}};X=H.compareDocumentPosition?function(b,e){return b===e?(U=!0,0):(b.compareDocumentPosition&&e.compareDocumentPosition?b.compareDocumentPosition(e)&4:b.compareDocumentPosition)?-1:1}:function(b,e){if(b===e)return U=!0,0;if(b.sourceIndex&&e.sourceIndex)return b.sourceIndex-e.sourceIndex;var d,c,g=[],f=[];d=b.parentNode;c=e.parentNode;var l=d;if(d===c)return h(b,e);if(!d)return-1;
if(!c)return 1;for(;l;)g.unshift(l),l=l.parentNode;for(l=c;l;)f.unshift(l),l=l.parentNode;d=g.length;c=f.length;for(l=0;l<d&&l<c;l++)if(g[l]!==f[l])return h(g[l],f[l]);return l===d?h(b,f[l],-1):h(g[l],e,1)};[0,0].sort(X);N=!U;d.uniqueSort=function(b){var e,d=[],c=1,g=0;U=N;b.sort(X);if(U){for(;e=b[c];c++)e===b[c-1]&&(g=d.push(c));for(;g--;)b.splice(d[g],1)}return b};d.error=function(b){throw Error("Syntax error, unrecognized expression: "+b);};W=d.compile=function(b,e){var d,c=[],g=[],f=ca[Y][b+" "];
if(!f){e||(e=l(b));for(d=e.length;d--;)f=t(e[d]),f[Y]?c.push(f):g.push(f);f=ca(b,C(g,c))}return f};ba.querySelectorAll&&function(){var b,e=w,c=/'|\\/g,g=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,f=[":focus"],h=[":active"],v=H.matchesSelector||H.mozMatchesSelector||H.webkitMatchesSelector||H.oMatchesSelector||H.msMatchesSelector;aa(function(b){b.innerHTML="<select><option selected=''></option></select>";b.querySelectorAll("[selected]").length||f.push("\\[[\\x20\\t\\r\\n\\f]*(?:checked|disabled|ismap|multiple|readonly|selected|value)");
b.querySelectorAll(":checked").length||f.push(":checked")});aa(function(b){b.innerHTML="<p test=''></p>";b.querySelectorAll("[test^='']").length&&f.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:\"\"|'')");b.innerHTML="<input type='hidden'/>";b.querySelectorAll(":enabled").length||f.push(":enabled",":disabled")});f=new RegExp(f.join("|"));w=function(b,d,g,h,v){if(!h&&!v&&!f.test(b)){var q,y,r=!0,t=Y;y=d;q=9===d.nodeType&&b;if(1===d.nodeType&&"object"!==d.nodeName.toLowerCase()){q=l(b);(r=d.getAttribute("id"))?
t=r.replace(c,"\\$&"):d.setAttribute("id",t);t="[id='"+t+"'] ";for(y=q.length;y--;)q[y]=t+q[y].join("");y=R.test(b)&&d.parentNode||d;q=q.join(",")}if(q)try{return T.apply(g,S.call(y.querySelectorAll(q),0)),g}catch(C){}finally{r||d.removeAttribute("id")}}return e(b,d,g,h,v)};v&&(aa(function(e){b=v.call(e,"div");try{v.call(e,"[test!='']:sizzle"),h.push("!=",ta)}catch(d){}}),h=new RegExp(h.join("|")),d.matchesSelector=function(e,c){c=c.replace(g,"='$1']");if(!F(e)&&!h.test(c)&&!f.test(c))try{var l=v.call(e,
c);if(l||b||e.document&&11!==e.document.nodeType)return l}catch(q){}return 0<d(c,null,null,[e]).length})}();J.pseudos.nth=J.pseudos.eq;J.filters=B.prototype=J.pseudos;J.setFilters=new B;d.attr=A.attr;A.find=d;A.expr=d.selectors;A.expr[":"]=A.expr.pseudos;A.unique=d.uniqueSort;A.text=d.getText;A.isXMLDoc=d.isXML;A.contains=d.contains})(c);var pb=/Until$/,qb=/^(?:parents|prev(?:Until|All))/,db=/^.[^:#\[\.,]*$/,Sa=A.expr.match.needsContext,rb={children:!0,contents:!0,next:!0,prev:!0};A.fn.extend({find:function(b){var e,
d,c,g,f,h,l=this;if("string"!==typeof b)return A(b).filter(function(){e=0;for(d=l.length;e<d;e++)if(A.contains(l[e],this))return!0});h=this.pushStack("","find",b);e=0;for(d=this.length;e<d;e++)if(c=h.length,A.find(b,this[e],h),0<e)for(g=c;g<h.length;g++)for(f=0;f<c;f++)if(h[f]===h[g]){h.splice(g--,1);break}return h},has:function(b){var e,d=A(b,this),c=d.length;return this.filter(function(){for(e=0;e<c;e++)if(A.contains(this,d[e]))return!0})},not:function(b){return this.pushStack(r(this,b,!1),"not",
b)},filter:function(b){return this.pushStack(r(this,b,!0),"filter",b)},is:function(b){return!!b&&("string"===typeof b?Sa.test(b)?0<=A(b,this.context).index(this[0]):0<A.filter(b,this).length:0<this.filter(b).length)},closest:function(b,e){for(var d,c=0,g=this.length,f=[],h=Sa.test(b)||"string"!==typeof b?A(b,e||this.context):0;c<g;c++)for(d=this[c];d&&d.ownerDocument&&d!==e&&11!==d.nodeType;){if(h?-1<h.index(d):A.find.matchesSelector(d,b)){f.push(d);break}d=d.parentNode}f=1<f.length?A.unique(f):f;
return this.pushStack(f,"closest",b)},index:function(b){return b?"string"===typeof b?A.inArray(this[0],A(b)):A.inArray(b.jqx?b[0]:b,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(b,e){var d="string"===typeof b?A(b,e):A.makeArray(b&&b.nodeType?[b]:b),c=A.merge(this.get(),d);return this.pushStack(l(d[0])||l(c[0])?c:A.unique(c))},addBack:function(b){return this.add(null==b?this.prevObject:this.prevObject.filter(b))}});A.fn.andSelf=A.fn.addBack;A.each({parent:function(b){return(b=
b.parentNode)&&11!==b.nodeType?b:null},parents:function(b){return A.dir(b,"parentNode")},parentsUntil:function(b,e,d){return A.dir(b,"parentNode",d)},next:function(b){return q(b,"nextSibling")},prev:function(b){return q(b,"previousSibling")},nextAll:function(b){return A.dir(b,"nextSibling")},prevAll:function(b){return A.dir(b,"previousSibling")},nextUntil:function(b,e,d){return A.dir(b,"nextSibling",d)},prevUntil:function(b,e,d){return A.dir(b,"previousSibling",d)},siblings:function(b){return A.sibling((b.parentNode||
{}).firstChild,b)},children:function(b){return A.sibling(b.firstChild)},contents:function(b){return A.nodeName(b,"iframe")?b.contentDocument||b.contentWindow.document:A.merge([],b.childNodes)}},function(b,e){A.fn[b]=function(d,c){var g=A.map(this,e,d);pb.test(b)||(c=d);c&&"string"===typeof c&&(g=A.filter(c,g));g=1<this.length&&!rb[b]?A.unique(g):g;1<this.length&&qb.test(b)&&(g=g.reverse());return this.pushStack(g,b,Z.call(arguments).join(","))}});A.extend({filter:function(b,e,d){d&&(b=":not("+b+")");
return 1===e.length?A.find.matchesSelector(e[0],b)?[e[0]]:[]:A.find.matches(b,e)},dir:function(e,d,c){var g=[];for(e=e[d];e&&9!==e.nodeType&&(c===b||1!==e.nodeType||!A(e).is(c));)1===e.nodeType&&g.push(e),e=e[d];return g},sibling:function(b,e){for(var d=[];b;b=b.nextSibling)1===b.nodeType&&b!==e&&d.push(b);return d}});var Ja="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",sb=/ JQXLite\d+="(?:null|\d+)"/g,
Ea=/^\s+/,Ta=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ua=/<([\w:]+)/,tb=/<tbody/i,ub=/<|&#?\w+;/,vb=/<(?:script|style|link)/i,wb=/<(?:script|object|embed|option|style)/i,Fa=new RegExp("<(?:"+Ja+")[\\s/>]","i"),Ka=/^(?:checkbox|radio)$/,Va=/checked\s*(?:[^=]|=\s*.checked.)/i,xb=/\/(java|ecma)script/i,yb=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,ha={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],
tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Wa=t(K),Ga=Wa.appendChild(K.createElement("div"));ha.optgroup=ha.option;ha.tbody=ha.tfoot=ha.colgroup=ha.caption=ha.thead;ha.th=ha.td;A.support.htmlSerialize||(ha._default=[1,"X<div>","</div>"]);A.fn.extend({text:function(e){return A.access(this,function(e){return e===b?A.text(this):this.empty().append((this[0]&&
this[0].ownerDocument||K).createTextNode(e))},null,e,arguments.length)},wrapAll:function(b){if(A.isFunction(b))return this.each(function(e){A(this).wrapAll(b.call(this,e))});if(this[0]){var e=A(b,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]);e.map(function(){for(var b=this;b.firstChild&&1===b.firstChild.nodeType;)b=b.firstChild;return b}).append(this)}return this},wrapInner:function(b){return A.isFunction(b)?this.each(function(e){A(this).wrapInner(b.call(this,
e))}):this.each(function(){var e=A(this),d=e.contents();d.length?d.wrapAll(b):e.append(b)})},wrap:function(b){var e=A.isFunction(b);return this.each(function(d){A(this).wrapAll(e?b.call(this,d):b)})},unwrap:function(){return this.parent().each(function(){A.nodeName(this,"body")||A(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(b){1!==this.nodeType&&11!==this.nodeType||this.appendChild(b)})},prepend:function(){return this.domManip(arguments,
!0,function(b){1!==this.nodeType&&11!==this.nodeType||this.insertBefore(b,this.firstChild)})},before:function(){if(!l(this[0]))return this.domManip(arguments,!1,function(b){this.parentNode.insertBefore(b,this)});if(arguments.length){var b=A.clean(arguments);return this.pushStack(A.merge(b,this),"before",this.selector)}},after:function(){if(!l(this[0]))return this.domManip(arguments,!1,function(b){this.parentNode.insertBefore(b,this.nextSibling)});if(arguments.length){var b=A.clean(arguments);return this.pushStack(A.merge(this,
b),"after",this.selector)}},remove:function(b,e){for(var d,c=0;null!=(d=this[c]);c++)if(!b||A.filter(b,[d]).length)e||1!==d.nodeType||(A.cleanData(d.getElementsByTagName("*")),A.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var b,e=0;null!=(b=this[e]);e++)for(1===b.nodeType&&A.cleanData(b.getElementsByTagName("*"));b.firstChild;)b.removeChild(b.firstChild);return this},clone:function(b,e){b=null==b?!1:b;e=null==e?b:e;return this.map(function(){return A.clone(this,
b,e)})},html:function(e){return A.access(this,function(e){var d=this[0]||{},c=0,g=this.length;if(e===b)return 1===d.nodeType?d.innerHTML.replace(sb,""):b;if(!("string"!==typeof e||vb.test(e)||!A.support.htmlSerialize&&Fa.test(e)||!A.support.leadingWhitespace&&Ea.test(e)||ha[(Ua.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Ta,"<$1></$2>");try{for(;c<g;c++)d=this[c]||{},1===d.nodeType&&(A.cleanData(d.getElementsByTagName("*")),d.innerHTML=e);d=0}catch(f){}}d&&this.empty().append(e)},null,e,arguments.length)},
replaceWith:function(b){if(!l(this[0])){if(A.isFunction(b))return this.each(function(e){var d=A(this),c=d.html();d.replaceWith(b.call(this,e,c))});"string"!==typeof b&&(b=A(b).detach());return this.each(function(){var e=this.nextSibling,d=this.parentNode;A(this).remove();e?A(e).before(b):A(d).append(b)})}return this.length?this.pushStack(A(A.isFunction(b)?b():b),"replaceWith",b):this},detach:function(b){return this.remove(b,!0)},domManip:function(e,d,c){e=[].concat.apply([],e);var g,f,h,l=0,v=e[0],
q=[],y=this.length;if(!A.support.checkClone&&1<y&&"string"===typeof v&&Va.test(v))return this.each(function(){A(this).domManip(e,d,c)});if(A.isFunction(v))return this.each(function(g){var f=A(this);e[0]=v.call(this,g,d?f.html():b);f.domManip(e,d,c)});if(this[0]){g=A.buildFragment(e,this,q);h=g.fragment;f=h.firstChild;1===h.childNodes.length&&(h=f);if(f)for(d=d&&A.nodeName(f,"tr"),g=g.cacheable||y-1;l<y;l++)c.call(d&&A.nodeName(this[l],"table")?w(this[l],"tbody"):this[l],l===g?h:A.clone(h,!0,!0));
h=f=null;q.length&&A.each(q,function(b,e){e.src?A.ajax?A.ajax({url:e.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):A.error("no ajax"):A.globalEval((e.text||e.textContent||e.innerHTML||"").replace(yb,""));e.parentNode&&e.parentNode.removeChild(e)})}return this}});A.buildFragment=function(e,d,c){var g,f,h,l=e[0];d=d||K;d=!d.nodeType&&d[0]||d;d=d.ownerDocument||d;!(1===e.length&&"string"===typeof l&&512>l.length&&d===K&&"<"===l.charAt(0))||wb.test(l)||!A.support.checkClone&&Va.test(l)||
!A.support.html5Clone&&Fa.test(l)||(f=!0,g=A.fragments[l],h=g!==b);g||(g=d.createDocumentFragment(),A.clean(e,d,g,c),f&&(A.fragments[l]=h&&g));return{fragment:g,cacheable:f}};A.fragments={};A.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(b,e){A.fn[b]=function(d){var c,g=0,f=[];d=A(d);var h=d.length;c=1===this.length&&this[0].parentNode;if((null==c||c&&11===c.nodeType&&1===c.childNodes.length)&&1===h)return d[e](this[0]),this;
for(;g<h;g++)c=(0<g?this.clone(!0):this).get(),A(d[g])[e](c),f=f.concat(c);return this.pushStack(f,b,d.selector)}});A.extend({clone:function(b,e,d){var c,g,f,h;A.support.html5Clone||A.isXMLDoc(b)||!Fa.test("<"+b.nodeName+">")?h=b.cloneNode(!0):(Ga.innerHTML=b.outerHTML,Ga.removeChild(h=Ga.firstChild));if(!(A.support.noCloneEvent&&A.support.noCloneChecked||1!==b.nodeType&&11!==b.nodeType||A.isXMLDoc(b)))for(B(b,h),c=v(b),g=v(h),f=0;c[f];++f)g[f]&&B(c[f],g[f]);if(e&&(z(b,h),d))for(c=v(b),g=v(h),f=0;c[f];++f)z(c[f],
g[f]);return h},clean:function(b,e,d,c){var g,f,h,l,v,q,r=e===K&&Wa,C=[];e&&"undefined"!==typeof e.createDocumentFragment||(e=K);for(g=0;null!=(h=b[g]);g++)if("number"===typeof h&&(h+=""),h){if("string"===typeof h)if(ub.test(h)){r=r||t(e);q=e.createElement("div");r.appendChild(q);h=h.replace(Ta,"<$1></$2>");f=(Ua.exec(h)||["",""])[1].toLowerCase();l=ha[f]||ha._default;v=l[0];for(q.innerHTML=l[1]+h+l[2];v--;)q=q.lastChild;if(!A.support.tbody)for(v=tb.test(h),l="table"!==f||v?"<table>"!==l[1]||v?[]:
q.childNodes:q.firstChild&&q.firstChild.childNodes,f=l.length-1;0<=f;--f)A.nodeName(l[f],"tbody")&&!l[f].childNodes.length&&l[f].parentNode.removeChild(l[f]);!A.support.leadingWhitespace&&Ea.test(h)&&q.insertBefore(e.createTextNode(Ea.exec(h)[0]),q.firstChild);h=q.childNodes;q.parentNode.removeChild(q)}else h=e.createTextNode(h);h.nodeType?C.push(h):A.merge(C,h)}q&&(h=q=r=null);if(!A.support.appendChecked)for(g=0;null!=(h=C[g]);g++)A.nodeName(h,"input")?y(h):"undefined"!==typeof h.getElementsByTagName&&
A.grep(h.getElementsByTagName("input"),y);if(d)for(b=function(b){if(!b.type||xb.test(b.type))return c?c.push(b.parentNode?b.parentNode.removeChild(b):b):d.appendChild(b)},g=0;null!=(h=C[g]);g++)A.nodeName(h,"script")&&b(h)||(d.appendChild(h),"undefined"!==typeof h.getElementsByTagName&&(h=A.grep(A.merge([],h.getElementsByTagName("script")),b),C.splice.apply(C,[g+1,0].concat(h)),g+=h.length));return C},cleanData:function(b,e){for(var d,c,g,f,h=0,l=A.expando,v=A.cache,q=A.support.deleteExpando,y=A.event.special;null!=
(g=b[h]);h++)if(e||A.acceptData(g))if(d=(c=g[l])&&v[c]){if(d.events)for(f in d.events)y[f]?A.event.remove(g,f):A.removeEvent(g,f,d.handle);v[c]&&(delete v[c],q?delete g[l]:g.removeAttribute?g.removeAttribute(l):g[l]=null,A.deletedIds.push(c))}}});(function(){var b,e;A.uaMatch=function(b){b=b.toLowerCase();b=/(chrome)[ \/]([\w.]+)/.exec(b)||/(webkit)[ \/]([\w.]+)/.exec(b)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(b)||/(msie) ([\w.]+)/.exec(b)||0>b.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(b)||
[];return{browser:b[1]||"",version:b[2]||"0"}};b=A.uaMatch(S.userAgent);e={};b.browser&&(e[b.browser]=!0,e.version=b.version);e.chrome?e.webkit=!0:e.webkit&&(e.safari=!0);A.browser=e;A.sub=function(){function b(e,d){return new b.fn.init(e,d)}A.extend(!0,b,this);b.superclass=this;b.fn=b.prototype=this();b.fn.constructor=b;b.sub=this.sub;b.fn.init=function(d,c){c&&c instanceof A&&!(c instanceof b)&&(c=b(c));return A.fn.init.call(this,d,c,e)};b.fn.init.prototype=b.fn;var e=b(K);return b}})();var da,
oa,pa,Ha=/alpha\([^)]*\)/i,zb=/opacity=([^)]*)/,Ab=/^(top|right|bottom|left)$/,Bb=/^(none|table(?!-c[ea]).+)/,Xa=/^margin/,eb=new RegExp("^("+aa+")(.*)$","i"),ua=new RegExp("^("+aa+")(?!px)[a-z%]+$","i"),Cb=new RegExp("^([-+])=("+aa+")","i"),za={BODY:"block"},Db={position:"absolute",visibility:"hidden",display:"block"},Ya={letterSpacing:0,fontWeight:400},ma=["Top","Right","Bottom","Left"],La=["Webkit","O","Moz","ms"],Eb=A.fn.toggle;A.fn.extend({css:function(e,d){return A.access(this,function(e,d,
c){return c!==b?A.style(e,d,c):A.css(e,d)},e,d,1<arguments.length)},show:function(){return E(this,!0)},hide:function(){return E(this)},toggle:function(b,e){var d="boolean"===typeof b;return A.isFunction(b)&&A.isFunction(e)?Eb.apply(this,arguments):this.each(function(){(d?b:D(this))?A(this).show():A(this).hide()})}});A.extend({cssHooks:{opacity:{get:function(b,e){if(e){var d=da(b,"opacity");return""===d?"1":d}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,
zIndex:!0,zoom:!0},cssProps:{"float":A.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,d,c,g){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var f,h,l,v=A.camelCase(d),q=e.style;d=A.cssProps[v]||(A.cssProps[v]=C(q,v));l=A.cssHooks[d]||A.cssHooks[v];if(c!==b){if(h=typeof c,"string"===h&&(f=Cb.exec(c))&&(c=(f[1]+1)*f[2]+parseFloat(A.css(e,d)),h="number"),!(null==c||"number"===h&&isNaN(c)||("number"!==h||A.cssNumber[v]||(c+="px"),l&&"set"in l&&(c=l.set(e,c,g))===b)))try{q[d]=c}catch(y){}}else return l&&
"get"in l&&(f=l.get(e,!1,g))!==b?f:q[d]}},css:function(e,d,c,g){var f,h;h=A.camelCase(d);d=A.cssProps[h]||(A.cssProps[h]=C(e.style,h));(h=A.cssHooks[d]||A.cssHooks[h])&&"get"in h&&(f=h.get(e,!0,g));f===b&&(f=da(e,d));"normal"===f&&d in Ya&&(f=Ya[d]);return c||g!==b?(e=parseFloat(f),c||A.isNumeric(e)?e||0:f):f},swap:function(b,e,d){var c,g={};for(c in e)g[c]=b.style[c],b.style[c]=e[c];d=d.call(b);for(c in e)b.style[c]=g[c];return d}});c.getComputedStyle?da=function(b,e){var d,g,f,h,l=c.getComputedStyle(b,
null),v=b.style;l&&(d=l.getPropertyValue(e)||l[e],""!==d||A.contains(b.ownerDocument,b)||(d=A.style(b,e)),ua.test(d)&&Xa.test(e)&&(g=v.width,f=v.minWidth,h=v.maxWidth,v.minWidth=v.maxWidth=v.width=d,d=l.width,v.width=g,v.minWidth=f,v.maxWidth=h));return d}:K.documentElement.currentStyle&&(da=function(b,e){var d,c,g=b.currentStyle&&b.currentStyle[e],f=b.style;null==g&&f&&f[e]&&(g=f[e]);if(ua.test(g)&&!Ab.test(e)){d=f.left;if(c=b.runtimeStyle&&b.runtimeStyle.left)b.runtimeStyle.left=b.currentStyle.left;
f.left="fontSize"===e?"1em":g;g=f.pixelLeft+"px";f.left=d;c&&(b.runtimeStyle.left=c)}return""===g?"auto":g});A.each(["height","width"],function(b,e){A.cssHooks[e]={get:function(b,d,c){if(d)return 0===b.offsetWidth&&Bb.test(da(b,"display"))?A.swap(b,Db,function(){return H(b,e,c)}):H(b,e,c)},set:function(b,d,c){return F(b,d,c?G(b,e,c,A.support.boxSizing&&"border-box"===A.css(b,"boxSizing")):0)}}});A.support.opacity||(A.cssHooks.opacity={get:function(b,e){return zb.test((e&&b.currentStyle?b.currentStyle.filter:
b.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(b,e){var d=b.style,c=b.currentStyle,g=A.isNumeric(e)?"alpha(opacity="+100*e+")":"",f=c&&c.filter||d.filter||"";d.zoom=1;if(1<=e&&""===A.trim(f.replace(Ha,""))&&d.removeAttribute&&(d.removeAttribute("filter"),c&&!c.filter))return;d.filter=Ha.test(f)?f.replace(Ha,g):f+" "+g}});A(function(){A.support.reliableMarginRight||(A.cssHooks.marginRight={get:function(b,e){return A.swap(b,{display:"inline-block"},function(){if(e)return da(b,
"marginRight")})}});!A.support.pixelPosition&&A.fn.position&&A.each(["top","left"],function(b,e){A.cssHooks[e]={get:function(b,d){if(d){var c=da(b,e);return ua.test(c)?A(b).position()[e]+"px":c}}}})});A.expr&&A.expr.filters&&(A.expr.filters.hidden=function(b){return 0===b.offsetWidth&&0===b.offsetHeight||!A.support.reliableHiddenOffsets&&"none"===(b.style&&b.style.display||da(b,"display"))},A.expr.filters.visible=function(b){return!A.expr.filters.hidden(b)});A.each({margin:"",padding:"",border:"Width"},
function(b,e){A.cssHooks[b+e]={expand:function(d){var c="string"===typeof d?d.split(" "):[d],g={};for(d=0;4>d;d++)g[b+ma[d]+e]=c[d]||c[d-2]||c[0];return g}};Xa.test(b)||(A.cssHooks[b+e].set=F)});var Fb=/%20/g,fb=/\[\]$/,Za=/\r?\n/g,Gb=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Hb=/^(?:select|textarea)/i;A.fn.extend({serialize:function(){return A.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?
A.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Hb.test(this.nodeName)||Gb.test(this.type))}).map(function(b,e){var d=A(this).val();return null==d?null:A.isArray(d)?A.map(d,function(b,d){return{name:e.name,value:b.replace(Za,"\r\n")}}):{name:e.name,value:d.replace(Za,"\r\n")}}).get()}});A.param=function(e,d){var c,g=[],f=function(b,e){e=A.isFunction(e)?e():null==e?"":e;g[g.length]=encodeURIComponent(b)+"="+encodeURIComponent(e)};d===b&&(d=A.ajaxSettings&&
A.ajaxSettings.traditional);if(A.isArray(e)||e.jqx&&!A.isPlainObject(e))A.each(e,function(){f(this.name,this.value)});else for(c in e)P(c,e[c],d,f);return g.join("&").replace(Fb,"+")};A.support.ajax&&A.ajaxTransport(function(e){if(!e.crossDomain||A.support.cors){var d;return{send:function(g,f){var h,l,v=e.xhr();e.username?v.open(e.type,e.url,e.async,e.username,e.password):v.open(e.type,e.url,e.async);if(e.xhrFields)for(l in e.xhrFields)v[l]=e.xhrFields[l];e.mimeType&&v.overrideMimeType&&v.overrideMimeType(e.mimeType);
e.crossDomain||g["X-Requested-With"]||(g["X-Requested-With"]="XMLHttpRequest");try{for(l in g)v.setRequestHeader(l,g[l])}catch(q){}v.send(e.hasContent&&e.data||null);d=function(c,g){var l,q,y,r,t;try{if(d&&(g||4===v.readyState))if(d=b,h&&(v.onreadystatechange=A.noop,xhrOnUnloadAbort&&delete xhrCallbacks[h]),g)4!==v.readyState&&v.abort();else{l=v.status;y=v.getAllResponseHeaders();r={};(t=v.responseXML)&&t.documentElement&&(r.xml=t);try{r.text=v.responseText}catch(C){}try{q=v.statusText}catch(C){q=
""}l||!e.isLocal||e.crossDomain?1223===l&&(l=204):l=r.text?200:404}}catch(C){g||f(-1,C)}r&&f(l,q,r,y)};e.async?4===v.readyState?setTimeout(d,0):(h=++xhrId,xhrOnUnloadAbort&&(xhrCallbacks||(xhrCallbacks={},A(c).unload(xhrOnUnloadAbort)),xhrCallbacks[h]=d),v.onreadystatechange=d):d()},abort:function(){d&&d(0,1)}}}});var qa,ya,Ib=/^(?:toggle|show|hide)$/,Jb=new RegExp("^(?:([-+])=|)("+aa+")([a-z%]*)$","i"),Kb=/queueHooks$/,va=[function(b,e,d){var c,g,f,h,l,v,q=this,y=b.style,r={},t=[],C=b.nodeType&&
D(b);d.queue||(l=A._queueHooks(b,"fx"),null==l.unqueued&&(l.unqueued=0,v=l.empty.fire,l.empty.fire=function(){l.unqueued||v()}),l.unqueued++,q.always(function(){q.always(function(){l.unqueued--;A.queue(b,"fx").length||l.empty.fire()})}));1===b.nodeType&&("height"in e||"width"in e)&&(d.overflow=[y.overflow,y.overflowX,y.overflowY],"inline"===A.css(b,"display")&&"none"===A.css(b,"float")&&(A.support.inlineBlockNeedsLayout&&"inline"!==M(b.nodeName)?y.zoom=1:y.display="inline-block"));d.overflow&&(y.overflow=
"hidden",A.support.shrinkWrapBlocks||q.done(function(){y.overflow=d.overflow[0];y.overflowX=d.overflow[1];y.overflowY=d.overflow[2]}));for(c in e)f=e[c],Ib.exec(f)&&(delete e[c],g=g||"toggle"===f,f!==(C?"hide":"show")&&t.push(c));if(e=t.length)for(f=A._data(b,"fxshow")||A._data(b,"fxshow",{}),("hidden"in f)&&(C=f.hidden),g&&(f.hidden=!C),C?A(b).show():q.done(function(){A(b).hide()}),q.done(function(){var e;A.removeData(b,"fxshow",!0);for(e in r)A.style(b,e,r[e])}),c=0;c<e;c++)g=t[c],h=q.createTween(g,
C?f[g]:0),r[g]=f[g]||A.style(b,g),g in f||(f[g]=h.start,C&&(h.end=h.start,h.start="width"===g||"height"===g?1:0))}],sa={"*":[function(b,e){var d,c,g=this.createTween(b,e),f=Jb.exec(e),h=g.cur(),l=+h||0,v=1,q=20;if(f){d=+f[2];c=f[3]||(A.cssNumber[b]?"":"px");if("px"!==c&&l){l=A.css(g.elem,b,!0)||d||1;do v=v||".5",l/=v,A.style(g.elem,b,l+c);while(v!==(v=g.cur()/h)&&1!==v&&--q)}g.unit=c;g.start=l;g.end=f[1]?l+(f[1]+1)*d:d}return g}]};A.Animation=A.extend(W,{tweener:function(b,e){A.isFunction(b)?(e=b,
b=["*"]):b=b.split(" ");for(var d,c=0,g=b.length;c<g;c++)d=b[c],sa[d]=sa[d]||[],sa[d].unshift(e)},prefilter:function(b,e){e?va.unshift(b):va.push(b)}});A.Tween=N;N.prototype={constructor:N,init:function(b,e,d,c,g,f){this.elem=b;this.prop=d;this.easing=g||"swing";this.options=e;this.start=this.now=this.cur();this.end=c;this.unit=f||(A.cssNumber[d]?"":"px")},cur:function(){var b=N.propHooks[this.prop];return b&&b.get?b.get(this):N.propHooks._default.get(this)},run:function(b){var e,d=N.propHooks[this.prop];
this.pos=this.options.duration?e=A.easing[this.easing](b,this.options.duration*b,0,1,this.options.duration):e=b;this.now=(this.end-this.start)*e+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);d&&d.set?d.set(this):N.propHooks._default.set(this);return this}};N.prototype.init.prototype=N.prototype;N.propHooks={_default:{get:function(b){return null==b.elem[b.prop]||b.elem.style&&null!=b.elem.style[b.prop]?(b=A.css(b.elem,b.prop,!1,""))&&"auto"!==b?b:0:b.elem[b.prop]},set:function(b){if(A.fx.step[b.prop])A.fx.step[b.prop](b);
else b.elem.style&&(null!=b.elem.style[A.cssProps[b.prop]]||A.cssHooks[b.prop])?A.style(b.elem,b.prop,b.now+b.unit):b.elem[b.prop]=b.now}}};N.propHooks.scrollTop=N.propHooks.scrollLeft={set:function(b){b.elem.nodeType&&b.elem.parentNode&&(b.elem[b.prop]=b.now)}};A.each(["toggle","show","hide"],function(b,e){var d=A.fn[e];A.fn[e]=function(c,g,f){return null==c||"boolean"===typeof c||!b&&A.isFunction(c)&&A.isFunction(g)?d.apply(this,arguments):this.animate(U(e,!0),c,g,f)}});A.fn.extend({fadeTo:function(b,
e,d,c){return this.filter(D).css("opacity",0).show().end().animate({opacity:e},b,d,c)},animate:function(b,e,d,c){var g=A.isEmptyObject(b),f=A.speed(e,d,c);e=function(){var e=W(this,A.extend({},b),f);g&&e.stop(!0)};return g||!1===f.queue?this.each(e):this.queue(f.queue,e)},stop:function(e,d,c){var g=function(b){var e=b.stop;delete b.stop;e(c)};"string"!==typeof e&&(c=d,d=e,e=b);d&&!1!==e&&this.queue(e||"fx",[]);return this.each(function(){var b=!0,d=null!=e&&e+"queueHooks",f=A.timers,h=A._data(this);
if(d)h[d]&&h[d].stop&&g(h[d]);else for(d in h)h[d]&&h[d].stop&&Kb.test(d)&&g(h[d]);for(d=f.length;d--;)f[d].elem!==this||null!=e&&f[d].queue!==e||(f[d].anim.stop(c),b=!1,f.splice(d,1));!b&&c||A.dequeue(this,e)})}});A.each({slideDown:U("show"),slideUp:U("hide"),slideToggle:U("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(b,e){A.fn[b]=function(b,d,c){return this.animate(e,b,d,c)}});A.speed=function(b,e,d){var c=b&&"object"===typeof b?A.extend({},b):
{complete:d||!d&&e||A.isFunction(b)&&b,duration:b,easing:d&&e||e&&!A.isFunction(e)&&e};c.duration=A.fx.off?0:"number"===typeof c.duration?c.duration:c.duration in A.fx.speeds?A.fx.speeds[c.duration]:A.fx.speeds._default;if(null==c.queue||!0===c.queue)c.queue="fx";c.old=c.complete;c.complete=function(){A.isFunction(c.old)&&c.old.call(this);c.queue&&A.dequeue(this,c.queue)};return c};A.easing={linear:function(b){return b},swing:function(b){return.5-Math.cos(b*Math.PI)/2}};A.timers=[];A.fx=N.prototype.init;
A.fx.tick=function(){var e,d=A.timers,c=0;for(qa=A.now();c<d.length;c++)e=d[c],e()||d[c]!==e||d.splice(c--,1);d.length||A.fx.stop();qa=b};A.fx.timer=function(b){b()&&A.timers.push(b)&&!ya&&(ya=setInterval(A.fx.tick,A.fx.interval))};A.fx.interval=13;A.fx.stop=function(){clearInterval(ya);ya=null};A.fx.speeds={slow:600,fast:200,_default:400};A.fx.step={};A.expr&&A.expr.filters&&(A.expr.filters.animated=function(b){return A.grep(A.timers,function(e){return b===e.elem}).length});var $a=/^(?:body|html)$/i;
A.fn.offset=function(e){if(arguments.length)return e===b?this:this.each(function(b){A.offset.setOffset(this,e,b)});var d,c,g,f,h,l={top:0,left:0};if(g=(f=this[0])&&f.ownerDocument){if((c=g.body)===f)return A.offset.bodyOffset(f);d=g.documentElement;if(!A.contains(d,f))return l;"undefined"!==typeof f.getBoundingClientRect&&(l=f.getBoundingClientRect());g=T(g);f=d.clientTop||c.clientTop||0;c=d.clientLeft||c.clientLeft||0;h=g.pageYOffset||d.scrollTop;d=g.pageXOffset||d.scrollLeft;return{top:l.top+h-
f,left:l.left+d-c}}};A.offset={bodyOffset:function(b){var e=b.offsetTop,d=b.offsetLeft;A.support.doesNotIncludeMarginInBodyOffset&&(e+=parseFloat(A.css(b,"marginTop"))||0,d+=parseFloat(A.css(b,"marginLeft"))||0);return{top:e,left:d}},setOffset:function(b,e,d){var c=A.css(b,"position");"static"===c&&(b.style.position="relative");var g=A(b),f=g.offset(),h=A.css(b,"top"),l=A.css(b,"left"),v={};("absolute"===c||"fixed"===c)&&-1<A.inArray("auto",[h,l])?(l=g.position(),c=l.top,l=l.left):(c=parseFloat(h)||
0,l=parseFloat(l)||0);A.isFunction(e)&&(e=e.call(b,d,f));null!=e.top&&(v.top=e.top-f.top+c);null!=e.left&&(v.left=e.left-f.left+l);"using"in e?e.using.call(b,v):g.css(v)}};A.fn.extend({isRendered:function(){var b=this[0];return null==b.parentNode||0===b.offsetWidth||0===b.offsetHeight?!1:!0},getSizeFromStyle:function(){var b=null,e=null,d=this[0];d.style.width&&(b=d.style.width);d.style.height&&(e=d.style.height);if(d=c.getComputedStyle?getComputedStyle(d,null):d.currentStyle)d.width&&(b=d.width),
d.height&&(e=d.height);"0px"===b&&(b=0);"0px"===e&&(e=0);null===b&&(b=0);null===e&&(e=0);return{width:b,height:e}},initAnimate:function(){},sizeStyleChanged:function(b){var e=this,d,c=function(b){var c=d;b&&b[0]&&"style"===b[0].attributeName&&"attributes"===b[0].type&&(c.element.offsetWidth!==c.offsetWidth||c.element.offsetHeight!==c.offsetHeight)&&(c.offsetWidth=c.element.offsetWidth,c.offsetHeight=c.element.offsetHeight,e.isRendered()&&c.callback())};d={element:e[0],offsetWidth:e[0].offsetWidth,
offsetHeight:e[0].offsetHeight,callback:b};try{e.elementStyleObserver||(e.elementStyleObserver=new MutationObserver(c),e.elementStyleObserver.observe(e[0],{attributes:!0,childList:!1,characterData:!1}))}catch(g){}},position:function(){if(this[0]){var b=this[0],e=this.offsetParent(),d=this.offset(),c=$a.test(e[0].nodeName)?{top:0,left:0}:e.offset();d.top-=parseFloat(A.css(b,"marginTop"))||0;d.left-=parseFloat(A.css(b,"marginLeft"))||0;c.top+=parseFloat(A.css(e[0],"borderTopWidth"))||0;c.left+=parseFloat(A.css(e[0],
"borderLeftWidth"))||0;return{top:d.top-c.top,left:d.left-c.left}}},offsetParent:function(){return this.map(function(){for(var b=this.offsetParent||K.body;b&&!$a.test(b.nodeName)&&"static"===A.css(b,"position");)b=b.offsetParent;return b||K.body})}});A.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,d){var c=/Y/.test(d);A.fn[e]=function(g){return A.access(this,function(e,g,f){var h=T(e);if(f===b)return h?d in h?h[d]:h.document.documentElement[g]:e[g];h?h.scrollTo(c?A(h).scrollLeft():
f,c?f:A(h).scrollTop()):e[g]=f},e,g,arguments.length,null)}});A.each({Height:"height",Width:"width"},function(e,d){A.each({padding:"inner"+e,content:d,"":"outer"+e},function(c,g){A.fn[g]=function(g,f){var h=arguments.length&&(c||"boolean"!==typeof g),l=c||(!0===g||!0===f?"margin":"border");return A.access(this,function(d,c,g){return A.isWindow(d)?d.document.documentElement["client"+e]:9===d.nodeType?(c=d.documentElement,Math.max(d.body["scroll"+e],c["scroll"+e],d.body["offset"+e],c["offset"+e],c["client"+
e])):g===b?A.css(d,c,g,l):A.style(d,c,g,l)},d,h?g:b,h,null)}})});c.JQXLite=c.jqxHelper=A;"function"===typeof define&&define.amd&&define.amd.JQXLite&&define("jqx",[],function(){return A})}(window);(function(c){c.jQuery?c.minQuery=c.JQXLite=c.jQuery:c.$?c.minQuery=c.JQXLite=c.$:c.$=c.minQuery=c.JQXLite})(window);JQXLite.generateID=function(){var c=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},b="";do b="jqx"+c()+c()+c();while(0<$("#"+b).length);return b};
var jqxBaseFramework=window.jqxBaseFramework=window.minQuery||window.jQuery;
(function(c){c.jqx=c.jqx||{};window.jqx=c.jqx;jqwidgets={createInstance:function(b,d,e){if("jqxDataAdapter"==d)return new c.jqx.dataAdapter(e[0],e[1]||{});c(b)[d](e||{});return c(b)[d]("getInstance")}};c.jqx.define=function(b,d,e){b[d]=function(){this.baseType&&(this.base=new b[this.baseType],this.base.defineInstance());this.defineInstance();this.metaInfo()};b[d].prototype.defineInstance=function(){};b[d].prototype.metaInfo=function(){};b[d].prototype.base=null;b[d].prototype.baseType=void 0;e&&b[e]&&
(b[d].prototype.baseType=e)};c.jqx.invoke=function(b,d){if(0!=d.length){for(var e=typeof d==Array||0<d.length?d[0]:d,g=typeof d==Array||1<d.length?Array.prototype.slice.call(d,1):c({}).toArray();void 0==b[e]&&null!=b.base;){if(void 0!=b[e]&&c.isFunction(b[e]))return b[e].apply(b,g);if("string"==typeof e){var f=e.toLowerCase();if(void 0!=b[f]&&c.isFunction(b[f]))return b[f].apply(b,g)}b=b.base}if(void 0!=b[e]&&c.isFunction(b[e]))return b[e].apply(b,g);if("string"==typeof e&&(f=e.toLowerCase(),void 0!=
b[f]&&c.isFunction(b[f])))return b[f].apply(b,g)}};c.jqx.getByPriority=function(b){for(var d=void 0,e=0;e<b.length&&void 0==d;e++)void 0==d&&void 0!=b[e]&&(d=b[e]);return d};c.jqx.hasProperty=function(b,d){if("object"==typeof d)for(var e in d){for(var c=b;c;){if(c.hasOwnProperty(e)||c.hasOwnProperty(e.toLowerCase()))return!0;c=c.base}break}else for(;b;){if(b.hasOwnProperty(d)||b.hasOwnProperty(d.toLowerCase()))return!0;b=b.base}return!1};c.jqx.hasFunction=function(b,d){if(0==d.length||void 0==b)return!1;
var e=typeof d==Array||0<d.length?d[0]:d;for((typeof d==Array||1<d.length)&&Array.prototype.slice.call(d,1);void 0==b[e]&&null!=b.base;){if(b[e]&&c.isFunction(b[e]))return!0;if("string"==typeof e){var g=e.toLowerCase();if(b[g]&&c.isFunction(b[g]))return!0}b=b.base}return b[e]&&c.isFunction(b[e])||"string"==typeof e&&(g=e.toLowerCase(),b[g]&&c.isFunction(b[g]))?!0:!1};c.jqx.isPropertySetter=function(b,d){return 1==d.length&&"object"==typeof d[0]||2==d.length&&"string"==typeof d[0]&&!c.jqx.hasFunction(b,
d)?!0:!1};c.jqx.validatePropertySetter=function(b,d,e){if(!c.jqx.propertySetterValidation)return!0;if(1==d.length&&"object"==typeof d[0]){for(var g in d[0]){for(d=b;!d.hasOwnProperty(g)&&d.base;)d=d.base;if(!d||!d.hasOwnProperty(g)){if(!e)if(d.hasOwnProperty(g.toString().toLowerCase()))break;else throw"Invalid property: "+g;return!1}}return!0}if(2!=d.length){if(!e)throw 0<="Invalid property: "+d.length?d[0]:"";return!1}for(;!b.hasOwnProperty(d[0])&&b.base;)b=b.base;if(!b||!b.hasOwnProperty(d[0])){if(!e)throw"Invalid property: "+
d[0];return!1}return!0};Object.keys||(Object.keys=function(){var b=Object.prototype.hasOwnProperty,d=!{toString:null}.propertyIsEnumerable("toString"),e="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),c=e.length;return function(f){if("object"!==typeof f&&("function"!==typeof f||null===f))throw new TypeError("Object.keys called on non-object");var h=[],l;for(l in f)b.call(f,l)&&h.push(l);if(d)for(l=0;l<c;l++)b.call(f,e[l])&&h.push(e[l]);return h}}());
c.jqx.set=function(b,d){var e=0;if(1==d.length&&"object"==typeof d[0]){if(b.isInitialized&&Object.keys&&1<Object.keys(d[0]).length){var g=c.data(b.base?b.base.element:b.element,b.widgetName).initArgs;if(g&&JSON&&JSON.stringify&&d[0]&&g[0])try{if(JSON.stringify(d[0])==JSON.stringify(g[0])){var f=!0;c.each(d[0],function(e,d){if(b[e]!=d)return f=!1});if(f)return}}catch(q){}b.batchUpdate=d[0];var h={},l={};c.each(d[0],function(d,c){for(var g=b;!g.hasOwnProperty(d)&&null!=g.base;)g=g.base;g.hasOwnProperty(d)?
b[d]!=c&&(h[d]=b[d],l[d]=c,e++):g.hasOwnProperty(d.toLowerCase())&&b[d.toLowerCase()]!=c&&(h[d.toLowerCase()]=b[d.toLowerCase()],l[d.toLowerCase()]=c,e++)});2>e&&(b.batchUpdate=null)}c.each(d[0],function(e,d){for(var g=b;!g.hasOwnProperty(e)&&null!=g.base;)g=g.base;if(g.hasOwnProperty(e))c.jqx.setvalueraiseevent(g,e,d);else if(g.hasOwnProperty(e.toLowerCase()))c.jqx.setvalueraiseevent(g,e.toLowerCase(),d);else if(c.jqx.propertySetterValidation)throw"jqxCore: invalid property '"+e+"'";});null!=b.batchUpdate&&
(b.batchUpdate=null,b.propertiesChangedHandler&&1<e&&b.propertiesChangedHandler(b,h,l))}else if(2==d.length){for(;!b.hasOwnProperty(d[0])&&b.base;)b=b.base;if(b.hasOwnProperty(d[0]))c.jqx.setvalueraiseevent(b,d[0],d[1]);else if(b.hasOwnProperty(d[0].toLowerCase()))c.jqx.setvalueraiseevent(b,d[0].toLowerCase(),d[1]);else if(c.jqx.propertySetterValidation)throw"jqxCore: invalid property '"+d[0]+"'";}};c.jqx.setvalueraiseevent=function(b,d,e){var c=b[d];b[d]=e;if(b.isInitialized&&(void 0!=b.propertyChangedHandler&&
b.propertyChangedHandler(b,d,c,e),void 0!=b.propertyChangeMap&&void 0!=b.propertyChangeMap[d]))b.propertyChangeMap[d](b,d,c,e)};c.jqx.get=function(b,d){if(void 0!=d&&null!=d){if(b.propertyMap){var e=b.propertyMap(d);if(null!=e)return e}if(b.hasOwnProperty(d))return b[d];if(b.hasOwnProperty(d.toLowerCase()))return b[d.toLowerCase()];e=void 0;if(typeof d==Array){if(1!=d.length)return;e=d[0]}else"string"==typeof d&&(e=d);for(;!b.hasOwnProperty(e)&&b.base;)b=b.base;if(b)return b[e]}};c.jqx.serialize=
function(b){var d;if(c.isArray(b)){d="[";for(var e=0;e<b.length;e++)0<e&&(d+=", "),d+=c.jqx.serialize(b[e]);d+="]"}else if("object"==typeof b){d="{";var g=0;for(e in b)0<g++&&(d+=", "),d+=e+": "+c.jqx.serialize(b[e]);d+="}"}else d=b.toString();return d};c.jqx.propertySetterValidation=!0;c.jqx.jqxWidgetProxy=function(b,d,e){c(d);b=c.data(d,b);if(void 0!=b){b=b.instance;if(c.jqx.hasFunction(b,e))return c.jqx.invoke(b,e);if(c.jqx.isPropertySetter(b,e)){if(c.jqx.validatePropertySetter(b,e)){c.jqx.set(b,
e);return}}else{if("object"==typeof e&&0==e.length)return;if("object"==typeof e&&1==e.length&&c.jqx.hasProperty(b,e[0]))return c.jqx.get(b,e[0]);if("string"==typeof e&&c.jqx.hasProperty(b,e[0]))return c.jqx.get(b,e)}throw"jqxCore: Invalid parameter '"+c.jqx.serialize(e)+"' does not exist.";}};c.jqx.applyWidget=function(b,d,e,g){var f=!1;try{f=void 0!=window.MSApp}catch(t){}var h=c(b);g?(g.host=h,g.element=b):g=new c.jqx["_"+d];""==b.id&&(b.id=c.jqx.utilities.createId());var l={host:h,element:b,instance:g,
initArgs:e};g.widgetName=d;c.data(b,d,l);c.data(b,"jqxWidget",l.instance);var q=[];for(g=l.instance;g;)g.isInitialized=!1,q.push(g),g=g.base;q.reverse();q[0].theme=c.jqx.theme||"";c.jqx.jqxWidgetProxy(d,b,e);for(var r in q)g=q[r],0==r&&(g.host=h,g.element=b,g.WinJS=f),void 0!=g&&(g.definedInstance&&g.definedInstance(),null!=g.createInstance&&(f?MSApp.execUnsafeLocalFunction(function(){g.createInstance(e)}):g.createInstance(e)));for(r in q)void 0!=q[r]&&(q[r].isInitialized=!0);f?MSApp.execUnsafeLocalFunction(function(){l.instance.refresh(!0)}):
l.instance.refresh(!0)};c.jqx.jqxWidget=function(b,d,e){try{jqxArgs=Array.prototype.slice.call(e,0)}catch(l){jqxArgs=""}var g="";d&&(g="_"+d);c.jqx.define(c.jqx,"_"+b,g);var f=[];if(!window[b]){var h=function(b){if(null==b)return"";switch(c.type(b)){case "string":case "number":case "date":case "boolean":case "bool":return null===b?"":b.toString()}var e="";c.each(b,function(b,d){0<b&&(e+=", ");e+="[";var g=0;if("object"==c.type(d))for(var f in d)0<g&&(e+=", "),e+="{"+f+":"+d[f]+"}",g++;else 0<g&&(e+=
", "),e+="{"+b+":"+d+"}";e+="]"});return e};jqwidgets[b]=window[b]=function(e,d){var g=[];d||(d={});g.push(d);var t=e;"object"===c.type(t)&&e[0]?(t=e[0].id,""===t&&(t=e[0].id=c.jqx.utilities.createId())):"object"===c.type(e)&&e&&e.nodeName&&(t=e.id,""===t&&(t=e.id=c.jqx.utilities.createId()));if(window.jqxWidgets&&window.jqxWidgets[t]){d&&c.each(window.jqxWidgets[t],function(e){if((e=c(this.element).data())&&e.jqxWidget)c(this.element)[b](d)});if(1==window.jqxWidgets[t].length){var w=c(window.jqxWidgets[t][0].widgetInstance.element).data();
if(w&&w.jqxWidget)return window.jqxWidgets[t][0]}if((w=c(window.jqxWidgets[t][0].widgetInstance.element).data())&&w.jqxWidget)return window.jqxWidgets[t]}var z=c(e);if(0===z.length){z=c("<div></div>");if("jqxInput"===b||"jqxPasswordInput"===b||"jqxMaskedInput"===b)z=c("<input/>");"jqxTextArea"===b&&(z=c("<textarea></textarea>"));if("jqxButton"===b||"jqxRepeatButton"===b||"jqxToggleButton"===b)z=c("<button/>");"jqxSplitter"===b&&(z=c("<div><div>Panel 1</div><div>Panel 2</div></div>"));"jqxTabs"===
b&&(z=c("<div><ul><li>Tab 1</li><li>Tab 2</li></ul><div>Content 1</div><div>Content 2</div></div>"));"jqxRibbon"===b&&(z=c("<div><ul><li>Tab 1</li><li>Tab 2</li></ul><div><div>Content 1</div><div>Content 2</div></div></div>"));"jqxDocking"===b&&(z=c("<div><div><div><div>Title 1</div><div>Content 1</div></div></div></div>"));"jqxWindow"===b&&(z=c("<div><div>Title 1</div><div>Content 1</div></div>"))}var B=[];c.each(z,function(e){e=z[e];c.jqx.applyWidget(e,b,g,void 0);if(!f[b]){var d=c.data(e,"jqxWidget"),
d=c.jqx["_"+b].prototype.defineInstance();c.jqx["_"+b].prototype.metaInfo&&c.jqx["_"+b].prototype.metaInfo();"jqxDockingLayout"==b&&(d=c.extend(d,c.jqx._jqxLayout.prototype.defineInstance()));if("jqxToggleButton"==b||"jqxRepeatButton"==b)d=c.extend(d,c.jqx._jqxButton.prototype.defineInstance());"jqxTreeGrid"==b&&(d=c.extend(d,c.jqx._jqxDataTable.prototype.defineInstance()));var l=function(b){this.widgetInstance=b=c.data(b,"jqxWidget");var e=c.extend(this,b);e.on=e.addEventListener=function(b,d){e.addHandler(e.base?
e.base.host:e.host,b,d)};e.off=e.removeEventListener=function(b){e.removeHandler(e.base?e.base.host:e.host,b)};for(var d in b)"function"==c.type(b[d])&&(e[d]=c.proxy(b[d],b));return e};f[b]=l;c.each(d,function(e,d){Object.defineProperty(l.prototype,e,{get:function(){return this.widgetInstance?this.widgetInstance[e]:d},set:function(d){if(this.widgetInstance&&(this.widgetInstance[e]!=d||"width"===e||"height"===e)){var g=this.widgetInstance[e],f=c.type(g),l=c.type(d),v=!1;if(f!=l||"source"===e||"width"===
e||"height"===e)v=!0;if(v||h(g)!=h(d)){f={};f[e]=d;if(this.widgetInstance.host)this.widgetInstance.host[b](f);else this.widgetInstance.base.host[b](f);this.widgetInstance[e]=d;this.widgetInstance.propertyUpdated&&this.widgetInstance.propertyUpdated(e,g,d)}}}})})}d=new f[b](e);B.push(d);window.jqxWidgets||(window.jqxWidgets=[]);window.jqxWidgets[t]||(window.jqxWidgets[t]=[]);window.jqxWidgets[t].push(d)});return 1===B.length?B[0]:B}}c.fn[b]=function(){var e=Array.prototype.slice.call(arguments,0);
if(0==e.length||1==e.length&&"object"==typeof e[0]){if(0==this.length){if(this.selector)throw Error("Invalid Selector - "+this.selector+"! Please, check whether the used ID or CSS Class name is correct.");throw Error("Invalid Selector! Please, check whether the used ID or CSS Class name is correct.");}return this.each(function(){c(this);null==c.data(this,b)?c.jqx.applyWidget(this,b,e,void 0):c.jqx.jqxWidgetProxy(b,this,e)})}if(0==this.length){if(this.selector)throw Error("Invalid Selector - "+this.selector+
"! Please, check whether the used ID or CSS Class name is correct.");throw Error("Invalid Selector! Please, check whether the used ID or CSS Class name is correct.");}var d=null,g=0;this.each(function(){var f=c.jqx.jqxWidgetProxy(b,this,e);if(0==g)d=f,g++;else{if(1==g){var h=[];h.push(d);d=h}d.push(f)}});return d};try{c.extend(c.jqx["_"+b].prototype,Array.prototype.slice.call(e,0)[0])}catch(l){}c.extend(c.jqx["_"+b].prototype,{toThemeProperty:function(b,e){return c.jqx.toThemeProperty(this,b,e)}});
c.jqx["_"+b].prototype.refresh=function(){this.base&&this.base.refresh(!0)};c.jqx["_"+b].prototype.createInstance=function(){};c.jqx["_"+b].prototype.addEventHandler=function(b,e){this.host.on(b,e)};c.jqx["_"+b].prototype.removeEventHandler=function(b,e){this.host.off(b)};c.jqx["_"+b].prototype.applyTo=function(e,d){if(!(d instanceof Array)){var g=[];g.push(d);d=g}c.jqx.applyWidget(e,b,d,this)};c.jqx["_"+b].prototype.getInstance=function(){return this};c.jqx["_"+b].prototype.propertyChangeMap={};
c.jqx["_"+b].prototype.addHandler=function(b,e,d,g){c.jqx.addHandler(c(b),e,d,g)};c.jqx["_"+b].prototype.removeHandler=function(b,e,d){c.jqx.removeHandler(c(b),e,d)};c.jqx["_"+b].prototype.setOptions=function(){if(this.host&&this.host.length&&1==this.host.length)return c.jqx.jqxWidgetProxy(b,this.host[0],arguments)}};c.jqx.toThemeProperty=function(b,d,e){if(""==b.theme)return d;d=d.split(" ");for(var c="",f=0;f<d.length;f++){0<f&&(c+=" ");var h=d[f],c=null!=e&&e?c+(h+"-"+b.theme):c+(h+" "+h+"-"+b.theme)}return c};
c.jqx.addHandler=function(b,d,e,g){d=d.split(" ");for(var f=0;f<d.length;f++){var h=d[f];if(window.addEventListener)switch(h){case "mousewheel":c.jqx.browser.mozilla?b[0].addEventListener("DOMMouseScroll",e,!1):b[0].addEventListener("mousewheel",e,!1);continue;case "mousemove":if(!g){b[0].addEventListener("mousemove",e,!1);continue}}if(void 0==g||null==g)if(b.on)b.on(h,e);else b.bind(h,e);else if(b.on)b.on(h,g,e);else b.bind(h,g,e)}};c.jqx.removeHandler=function(b,d,e){if(d){d=d.split(" ");for(var g=
0;g<d.length;g++){var f=d[g];if(window.removeEventListener)switch(f){case "mousewheel":c.jqx.browser.mozilla?b[0].removeEventListener("DOMMouseScroll",e,!1):b[0].removeEventListener("mousewheel",e,!1);continue;case "mousemove":if(e){b[0].removeEventListener("mousemove",e,!1);continue}}void 0==f?b.off?b.off():b.unbind():void 0==e?b.off?b.off(f):b.unbind(f):b.off?b.off(f,e):b.unbind(f,e)}}else b.off?b.off():b.unbind()};c.jqx.theme=c.jqx.theme||"";c.jqx.scrollAnimation=c.jqx.scrollAnimation||!1;c.jqx.resizeDelay=
c.jqx.resizeDelay||10;c.jqx.ready=function(){c(window).trigger("jqxReady")};c.jqx.init=function(b){c.each(b,function(b,e){"theme"==b&&(c.jqx.theme=e);"scrollBarSize"==b&&(c.jqx.utilities.scrollBarSize=e);"touchScrollBarSize"==b&&(c.jqx.utilities.touchScrollBarSize=e);"scrollBarButtonsVisibility"==b&&(c.jqx.utilities.scrollBarButtonsVisibility=e)})};c.jqx.utilities=c.jqx.utilities||{};c.extend(c.jqx.utilities,{scrollBarSize:13,touchScrollBarSize:8,scrollBarButtonsVisibility:"visible",createId:function(){var b=
function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return"jqxWidget"+b()+b()+b()},setTheme:function(b,d,e){if("undefined"!==typeof e&&e[0].className.split){for(var g=e[0].className.split(" "),f=[],h=[],l=e.children(),q=0;q<g.length;q+=1)0<=g[q].indexOf(b)&&(0<b.length?(f.push(g[q]),h.push(g[q].replace(b,d))):h.push(g[q].replace("-"+d,"")+"-"+d));this._removeOldClasses(f,e);this._addNewClasses(h,e);for(q=0;q<l.length;q+=1)this.setTheme(b,d,c(l[q]))}},_removeOldClasses:function(b,
d){for(var e=0;e<b.length;e+=1)d.removeClass(b[e])},_addNewClasses:function(b,d){for(var e=0;e<b.length;e+=1)d.addClass(b[e])},getOffset:function(b){var d=c.jqx.mobile.getLeftPos(b[0]);return{top:c.jqx.mobile.getTopPos(b[0]),left:d}},resize:function(b,d,e,g){void 0===g&&(g=!0);var f=-1,h=this,l=function(b){if(!h.hiddenWidgets)return-1;for(var e=-1,d=0;d<h.hiddenWidgets.length;d++)if(b.id){if(h.hiddenWidgets[d].id==b.id){e=d;break}}else if(h.hiddenWidgets[d].id==b[0].id){e=d;break}return e};if(this.resizeHandlers){for(var q=
0;q<this.resizeHandlers.length;q++)if(b.id){if(this.resizeHandlers[q].id==b.id){f=q;break}}else if(this.resizeHandlers[q].id==b[0].id){f=q;break}if(!0===e){-1!=f&&(this.resizeHandlers.splice(f,1),this.watchedElementData&&0<this.watchedElementData.length&&this.watchedElementData.splice(f,1));0==this.resizeHandlers.length&&(e=c(window),e.off?(e.off("resize.jqx"),e.off("orientationchange.jqx"),e.off("orientationchanged.jqx")):(e.unbind("resize.jqx"),e.unbind("orientationchange.jqx"),e.unbind("orientationchanged.jqx")),
this.resizeHandlers=null);b=l(b);-1!=b&&this.hiddenWidgets&&this.hiddenWidgets.splice(b,1);return}}else if(!0===e){b=l(b);-1!=b&&this.hiddenWidgets&&this.hiddenWidgets.splice(b,1);return}var h=this,r=function(b,e){if(h.resizeHandlers){var d=function(b){var e=-1;for(b=b.parentNode;b;)e++,b=b.parentNode;return e},g=function(b,e){if(!b.widget||!e.widget)return 0;var c=d(b.widget[0]),g=d(e.widget[0]);return c<g?-1:c>g?1:0},f=function(b){if(0<h.hiddenWidgets.length){h.hiddenWidgets.sort(g);var d=function(){for(var b=
!1,d=[],g=0;g<h.hiddenWidgets.length;g++){var f=h.hiddenWidgets[g];c.jqx.isHidden(f.widget)?(b=!0,d.push(f)):f.callback&&f.callback(e)}h.hiddenWidgets=d;b||clearInterval(h.__resizeInterval)};0==b?(d(),h.__resizeInterval&&clearInterval(h.__resizeInterval)):(h.__resizeInterval&&clearInterval(h.__resizeInterval),h.__resizeInterval=setInterval(function(){d()},100))}};h.hiddenWidgets&&0<h.hiddenWidgets.length&&f(!1);h.hiddenWidgets=[];h.resizeHandlers.sort(g);for(var q=0;q<h.resizeHandlers.length;q++){var r=
h.resizeHandlers[q],t=r.widget,w=r.data;if(w&&w.jqxWidget){var H=w.jqxWidget.width,M=w.jqxWidget.height;w.jqxWidget.base&&(void 0==H&&(H=w.jqxWidget.base.width),void 0==M&&(M=w.jqxWidget.base.height));void 0===H&&void 0===M&&(H=w.jqxWidget.element.style.width,M=w.jqxWidget.element.style.height);var P=!1;null!=H&&-1!=H.toString().indexOf("%")&&(P=!0);null!=M&&-1!=M.toString().indexOf("%")&&(P=!0);if(c.jqx.isHidden(t))-1===l(t)&&(P||!0===b)&&!0!==r.data.nestedWidget&&h.hiddenWidgets.push(r);else if(void 0===
b||!0!==b){if(P){r.callback(e);if(h.watchedElementData)for(t=0;t<h.watchedElementData.length;t++)if(h.watchedElementData[t].element==w.jqxWidget.element){h.watchedElementData[t].offsetWidth=w.jqxWidget.element.offsetWidth;h.watchedElementData[t].offsetHeight=w.jqxWidget.element.offsetHeight;break}0<=h.hiddenWidgets.indexOf(r)&&h.hiddenWidgets.splice(h.hiddenWidgets.indexOf(r),1)}w.jqxWidget.element&&(r=w.jqxWidget.element.className,!(0<=r.indexOf("dropdownlist")||0<=r.indexOf("datetimeinput")||0<=
r.indexOf("combobox")||0<=r.indexOf("menu"))||!w.jqxWidget.isOpened||!w.jqxWidget.isOpened()||e&&"resize"==e&&c.jqx.mobile.isTouchDevice()||w.jqxWidget.close())}}}f()}};this.resizeHandlers||(this.resizeHandlers=[],e=c(window),e.on?(this._initResize=this._resizeTimer=null,e.on("resize.jqx",function(b){void 0!=h._resizeTimer&&clearTimeout(h._resizeTimer);h._initResize?h._resizeTimer=setTimeout(function(){r(null,"resize")},c.jqx.resizeDelay):(h._initResize=!0,r(null,"resize"))}),e.on("orientationchange.jqx",
function(b){r(null,"orientationchange")}),e.on("orientationchanged.jqx",function(b){r(null,"orientationchange")})):(e.bind("resize.jqx",function(b){r(null,"orientationchange")}),e.bind("orientationchange.jqx",function(b){r(null,"orientationchange")}),e.bind("orientationchanged.jqx",function(b){r(null,"orientationchange")})));e=b.data();g&&-1===f&&this.resizeHandlers.push({id:b[0].id,widget:b,callback:d,data:e});try{var t=e.jqxWidget.width,w=e.jqxWidget.height;e.jqxWidget.base&&(void 0==t&&(t=e.jqxWidget.base.width),
void 0==w&&(w=e.jqxWidget.base.height));void 0===t&&void 0===w&&(t=e.jqxWidget.element.style.width,w=e.jqxWidget.element.style.height);f=!1;null!=t&&-1!=t.toString().indexOf("%")&&(f=!0);null!=w&&-1!=w.toString().indexOf("%")&&(f=!0);f&&(this.watchedElementData||(this.watchedElementData=[]),h=this,t=function(b){h.watchedElementData.forEach&&h.watchedElementData.forEach(function(b){if(b.element.offsetWidth!==b.offsetWidth||b.element.offsetHeight!==b.offsetHeight)b.offsetWidth=b.element.offsetWidth,
b.offsetHeight=b.element.offsetHeight,b.timer&&clearTimeout(b.timer),b.timer=setTimeout(function(){c.jqx.isHidden(c(b.element))?b.timer=setInterval(function(){c.jqx.isHidden(c(b.element))||(clearInterval(b.timer),b.callback())},100):b.callback()})})},h.watchedElementData.push({element:b[0],offsetWidth:b[0].offsetWidth,offsetHeight:b[0].offsetHeight,callback:d}),h.observer||(h.observer=new MutationObserver(t),h.observer.observe(document.body,{attributes:!0,childList:!0,characterData:!0})))}catch(z){}c.jqx.isHidden(b)&&
!0===g&&r(!0);c.jqx.resize=function(){r(null,"resize")}},parseJSON:function(b){if(!b||"string"!==typeof b)return null;b=c.trim(b);if(window.JSON&&window.JSON.parse)return window.JSON.parse(b);if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,"@").replace(/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return(new Function("return "+b))();throw Error("Invalid JSON: "+b);},html:function(b,d){if(!c(b).on)return c(b).html(d);
try{return c.access(b,function(e){var d=b[0]||{},f=0,h=b.length;if(void 0===e)return 1===d.nodeType?d.innerHTML.replace(rinlinejQuery,""):void 0;var l=/<(?:script|style|link)/i,q=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,r=/<([\w:]+)/,t=/<(?:abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video)[\s/>]/i,w=/^\s+/,z={option:[1,"<select multiple='multiple'>","</select>"],
legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};if(!("string"!==typeof e||l.test(e)||!c.support.htmlSerialize&&t.test(e)||!c.support.leadingWhitespace&&w.test(e)||z[(r.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(q,"<$1></$2>");try{for(;f<h;f++)d=this[f]||{},1===d.nodeType&&
(c.cleanData(d.getElementsByTagName("*")),d.innerHTML=e);d=0}catch(B){}}d&&b.empty().append(e)},null,d,arguments.length)}catch(e){return c(b).html(d)}},hasTransform:function(b){var d;d=b.css("transform");if(""==d||"none"==d)if(d=b.parents().css("transform"),""==d||"none"==d){var e=c.jqx.utilities.getBrowser();if("msie"==e.browser){if(d=b.css("-ms-transform"),""==d||"none"==d)d=b.parents().css("-ms-transform")}else if("chrome"==e.browser){if(d=b.css("-webkit-transform"),""==d||"none"==d)d=b.parents().css("-webkit-transform")}else if("opera"==
e.browser){if(d=b.css("-o-transform"),""==d||"none"==d)d=b.parents().css("-o-transform")}else"mozilla"==e.browser&&(d=b.css("-moz-transform"),""==d||"none"==d)&&(d=b.parents().css("-moz-transform"))}else return""!=d&&"none"!=d;if(""==d||"none"==d)d=c(document.body).css("transform");return""!=d&&"none"!=d&&null!=d},getBrowser:function(){var b=navigator.userAgent.toLowerCase(),d=/(chrome)[ \/]([\w.]+)/.exec(b)||/(webkit)[ \/]([\w.]+)/.exec(b)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(b)||/(msie) ([\w.]+)/.exec(b)||
0>b.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(b)||[],e={browser:d[1]||"",version:d[2]||"0"};0<=b.indexOf("rv:11.0")&&0<=b.indexOf(".net4.0c")&&(e.browser="msie",e.version="11",d[1]="msie");0<=b.indexOf("edge")&&(e.browser="msie",e.version="12",d[1]="msie");e[d[1]]=d[1];return e}});c.jqx.browser=c.jqx.utilities.getBrowser();c.jqx.isHidden=function(b){if(!b||!b[0])return!1;var d=b[0].offsetHeight;return 0===b[0].offsetWidth||0===d?!0:!1};c.jqx.ariaEnabled=!0;c.jqx.aria=function(b,
d,e){if(c.jqx.ariaEnabled)if(void 0==d)c.each(b.aria,function(e,d){var h=b.base?b.base.host.attr(e):b.host.attr(e);if(void 0==h||c.isFunction(h)){h=b[d.name];c.isFunction(h)&&(h=b[d.name]());void 0==h&&(h="");try{b.base?b.base.host.attr(e,h.toString()):b.host.attr(e,h.toString())}catch(q){}}else{var l=h;switch(d.type){case "number":l=new Number(h);isNaN(l)&&(l=h);break;case "boolean":l="true"==h?!0:!1;break;case "date":if(l=new Date(h),"Invalid Date"==l||isNaN(l))l=h}b[d.name]=l}});else try{b.host?
b.base?b.base.host?b.base.host.attr(d,e.toString()):b.attr(d,e.toString()):b.host?b.element.setAttribute?b.element.setAttribute(d,e.toString()):b.host.attr(d,e.toString()):b.attr(d,e.toString()):b.setAttribute&&b.setAttribute(d,e.toString())}catch(g){}};Array.prototype.indexOf||(Array.prototype.indexOf=function(b,d){var e=this.length,c=Number(d)||0,c=0>c?Math.ceil(c):Math.floor(c);for(0>c&&(c+=e);c<e;c++)if(c in this&&this[c]===b)return c;return-1});c.jqx.mobile=c.jqx.mobile||{};c.jqx.position=function(b){var d=
parseInt(b.pageX),e=parseInt(b.pageY);c.jqx.mobile.isTouchDevice()&&(b=c.jqx.mobile.getTouches(b)[0],d=parseInt(b.pageX),e=parseInt(b.pageY));return{left:d,top:e}};c.extend(c.jqx.mobile,{_touchListener:function(b,d){var e={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},c=e[b.type],f=document.createEvent("MouseEvents");f.initMouseEvent(c,b.bubbles,b.cancelable,b.view,b.detail,b.screenX,b.screenY,b.clientX,b.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.button,b.relatedTarget);
f._pageX=b.pageX;f._pageY=b.pageY;b.target.dispatchEvent(f);e=b.target["on"+e[b.type]];"function"===typeof e&&e(b)},setMobileSimulator:function(b,d){if(!this.isTouchDevice()){this.simulatetouches=!0;0==d&&(this.simulatetouches=!1);var e={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"};if(window.addEventListener)for(var c in e)b.addEventListener&&(b.removeEventListener(c,this._touchListener),b.addEventListener(c,this._touchListener,!1))}},isTouchDevice:function(){if(void 0!=this.touchDevice)return this.touchDevice;
var b="Browser CodeName: "+navigator.appCodeName+"",b=b+("Browser Name: "+navigator.appName+""),b=b+("Browser Version: "+navigator.appVersion+""),b=b+("Platform: "+navigator.platform+""),b=b+("User-agent header: "+navigator.userAgent+"");if(-1!=b.indexOf("Android")||-1!=b.indexOf("IEMobile")||-1!=b.indexOf("Windows Phone")||-1!=b.indexOf("WPDesktop")||-1!=b.indexOf("ZuneWP7")||-1!=b.indexOf("BlackBerry")&&-1!=b.indexOf("Mobile Safari")||-1!=b.indexOf("ipod")||-1!=b.indexOf("nokia")||-1!=b.indexOf("Nokia"))return!0;
if(-1!=b.indexOf("Chrome/17")||-1!=b.indexOf("CrOS")||-1!=b.indexOf("Opera")&&-1==b.indexOf("Mobi")&&-1==b.indexOf("Mini")&&-1!=b.indexOf("Platform: Win"))return!1;if(-1!=b.indexOf("Opera")&&-1!=b.indexOf("Mobi")&&-1!=b.indexOf("Opera Mobi"))return!0;var d={ios:"i(?:Pad|Phone|Pod)(?:.*)CPU(?: iPhone)? OS ",android:"(Android |HTC_|Silk/)",blackberry:"BlackBerry(?:.*)Version/",rimTablet:"RIM Tablet OS ",webos:"(?:webOS|hpwOS)/",bada:"Bada/"};try{if(void 0!=this.touchDevice)return this.touchDevice;this.touchDevice=
!1;for(i in d)if(d.hasOwnProperty(i)&&(prefix=d[i],match=b.match(new RegExp("(?:"+prefix+")([^\\s;]+)"))))return"blackberry"==i.toString()?this.touchDevice=!1:this.touchDevice=!0;var e=navigator.userAgent;if(-1!=navigator.platform.toLowerCase().indexOf("win")){if(0<=e.indexOf("Windows Phone")||0<=e.indexOf("WPDesktop")||0<=e.indexOf("IEMobile")||0<=e.indexOf("ZuneWP7"))return this.touchDevice=!0;if(0<=e.indexOf("Touch"))return"MSPointerDown"in window||"pointerdown"in window||0<=e.indexOf("ARM")?this.touchDevice=
!0:this.touchDevice=!1}if(-1!=navigator.platform.toLowerCase().indexOf("win"))return this.touchDevice=!1;if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)this.touchDevice=!0;return this.touchDevice}catch(c){return this.touchDevice=!1}},getLeftPos:function(b){for(var d=b.offsetLeft;null!=(b=b.offsetParent);)"HTML"!=b.tagName&&(d+=b.offsetLeft,document.all&&(d+=b.clientLeft));return d},getTopPos:function(b){for(var d=b.offsetTop,e=c(b).coord();null!=(b=b.offsetParent);)"HTML"!=
b.tagName&&(d+=b.offsetTop-b.scrollTop,document.all&&(d+=b.clientTop));b=navigator.userAgent.toLowerCase();if((-1!=b.indexOf("windows phone")||-1!=b.indexOf("WPDesktop")||-1!=b.indexOf("ZuneWP7")||-1!=b.indexOf("msie 9")||-1!=b.indexOf("msie 11")||-1!=b.indexOf("msie 10"))&&-1!=b.indexOf("touch"))return e.top;if(this.isSafariMobileBrowser()){if(this.isSafari4MobileBrowser()&&this.isIPadSafariMobileBrowser())return d;if(-1!=b.indexOf("version/7"))return e.top;if(-1!=b.indexOf("version/6")||-1!=b.indexOf("version/5"))d+=
c(window).scrollTop();return/(Android.*Chrome\/[.0-9]* (!?Mobile))/.exec(navigator.userAgent)||/(Android.*Chrome\/[.0-9]* Mobile)/.exec(navigator.userAgent)?d+c(window).scrollTop():e.top}return d},isChromeMobileBrowser:function(){return-1!=navigator.userAgent.toLowerCase().indexOf("android")},isOperaMiniMobileBrowser:function(){var b=navigator.userAgent.toLowerCase();return-1!=b.indexOf("opera mini")||-1!=b.indexOf("opera mobi")},isOperaMiniBrowser:function(){return-1!=navigator.userAgent.toLowerCase().indexOf("opera mini")},
isNewSafariMobileBrowser:function(){var b=navigator.userAgent.toLowerCase(),d=-1!=b.indexOf("ipad")||-1!=b.indexOf("iphone")||-1!=b.indexOf("ipod");return d=d&&-1!=b.indexOf("version/5")},isSafari4MobileBrowser:function(){var b=navigator.userAgent.toLowerCase(),d=-1!=b.indexOf("ipad")||-1!=b.indexOf("iphone")||-1!=b.indexOf("ipod");return d=d&&-1!=b.indexOf("version/4")},isWindowsPhone:function(){var b=navigator.userAgent.toLowerCase();return-1!=b.indexOf("windows phone")||-1!=b.indexOf("WPDesktop")||
-1!=b.indexOf("ZuneWP7")||-1!=b.indexOf("msie 9")||-1!=b.indexOf("msie 11")||-1!=b.indexOf("msie 10")&&-1!=b.indexOf("touch")},isSafariMobileBrowser:function(){var b=navigator.userAgent.toLowerCase();return/(Android.*Chrome\/[.0-9]* (!?Mobile))/.exec(navigator.userAgent)||/(Android.*Chrome\/[.0-9]* Mobile)/.exec(navigator.userAgent)?!0:-1!=b.indexOf("ipad")||-1!=b.indexOf("iphone")||-1!=b.indexOf("ipod")||-1!=b.indexOf("mobile safari")},isIPadSafariMobileBrowser:function(){return-1!=navigator.userAgent.toLowerCase().indexOf("ipad")},
isMobileBrowser:function(){var b=navigator.userAgent.toLowerCase();return-1!=b.indexOf("ipad")||-1!=b.indexOf("iphone")||-1!=b.indexOf("android")},getTouches:function(b){if(b.originalEvent){if(b.originalEvent.touches&&b.originalEvent.touches.length)return b.originalEvent.touches;if(b.originalEvent.changedTouches&&b.originalEvent.changedTouches.length)return b.originalEvent.changedTouches}b.touches||(b.touches=[],b.touches[0]=void 0!=b.originalEvent?b.originalEvent:b,void 0!=b.originalEvent&&b.pageX&&
(b.touches[0]=b),"mousemove"==b.type&&(b.touches[0]=b));return b.touches},getTouchEventName:function(b){if(this.isWindowsPhone()){if(-1!=navigator.userAgent.toLowerCase().indexOf("windows phone 7")){if(-1!=b.toLowerCase().indexOf("start"))return"MSPointerDown";if(-1!=b.toLowerCase().indexOf("move"))return"MSPointerMove";if(-1!=b.toLowerCase().indexOf("end"))return"MSPointerUp"}if(-1!=b.toLowerCase().indexOf("start"))return"pointerdown";if(-1!=b.toLowerCase().indexOf("move"))return"pointermove";if(-1!=
b.toLowerCase().indexOf("end"))return"pointerup"}else return b},dispatchMouseEvent:function(b,d,e){if(!this.simulatetouches){var c=document.createEvent("MouseEvent");c.initMouseEvent(b,!0,!0,d.view,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null);null!=e&&e.dispatchEvent(c)}},getRootNode:function(b){for(;1!==b.nodeType;)b=b.parentNode;return b},setTouchScroll:function(b,d){this.enableScrolling||(this.enableScrolling=[]);this.enableScrolling[d]=b},touchScroll:function(b,d,e,g,f,h){function l(b){return b.targetTouches&&
1<=b.targetTouches.length?b.targetTouches[0].clientY:b.originalEvent&&void 0!==b.originalEvent.clientY?b.originalEvent.clientY:w.getTouches(b)[0].clientY}function q(b){return b.targetTouches&&1<=b.targetTouches.length?b.targetTouches[0].clientX:b.originalEvent&&void 0!==b.originalEvent.clientX?b.originalEvent.clientX:w.getTouches(b)[0].clientX}function r(){var b;X&&(b=Date.now()-O,b=-X*Math.exp(-b/Q),.5<b||-.5>b?(S(N+b),requestAnimationFrame(r)):S(N))}function t(){var b;X&&(b=Date.now()-O,b=-X*Math.exp(-b/
Q),.5<b||-.5>b?(L(U+b),requestAnimationFrame(t)):L(U))}if(null!=b){var w=this;this.scrolling||(this.scrolling=[]);var z=this.scrolling[g]=!1;b=c(b);var B=["select","input","textarea"],v=0;this.enableScrolling||(this.enableScrolling=[]);this.enableScrolling[g]=!0;var y=this.getTouchEventName("touchstart")+".touchScroll",C=this.getTouchEventName("touchend")+".touchScroll",D=this.getTouchEventName("touchmove")+".touchScroll",E,F,G,H,M,P,J,O,W,X,N,U,T,Q;F=d;initialXOffset=initialOffset=xoffset=G=0;E=
f.jqxScrollBar("max");Q=325;var I=function(){var b,e;b=Date.now();e=b-O;O=b;b=G-J;xdelta=xoffset-xframe;J=G;xframe=xoffset;M=!0;xv=1E3*xdelta/(1+e);P=1E3*b/(1+e)*.8+.2*P;xjqxAnimations=.8*xv+.2*xjqxAnimations},K=!1,v=function(b){if(!w.enableScrolling[g])return!0;if(-1===c.inArray(b.target.tagName.toLowerCase(),B)){G=h.jqxScrollBar("value");xoffset=f.jqxScrollBar("value");var e=w.getTouches(b),d=e[0];1==e.length&&w.dispatchMouseEvent("mousedown",d,w.getRootNode(d.target));E=f.jqxScrollBar("max");F=
h.jqxScrollBar("max");K=!1;M=!0;H=l(b);T=q(b);P=X=xjqxAnimations=0;J=G;xframe=xoffset;O=Date.now();clearInterval(W);W=setInterval(I,100);initialOffset=G;initialXOffset=xoffset;z=!1;return w.scrolling[g]=!0}};if(b.on)b.on(y,v);else b.bind(y,v);var S=function(b,d){G=b>F?F:0>b?0:b;e(null,b,0,0,d);return b>F?"max":0>b?"min":"value"},L=function(b,d){xoffset=b>E?E:0>b?0:b;e(b,null,0,0,d);return b>E?"max":0>b?"min":"value"};d=function(b){function e(b){var d,c,g;if(M){d=l(b);g=q(b);c=H-d;xdelta=T-g;if(2<
c||-2>c){H=d;d=S(G+c,b);I();if("min"==d&&0===initialOffset||"max"==d&&initialOffset===F||!y)return!0;b.preventDefault();b.stopPropagation();K=!0;return!1}if(2<xdelta||-2>xdelta){T=g;d=L(xoffset+xdelta,b);I();if("min"==d&&0===initialXOffset||"max"==d&&initialXOffset===E||!v)return!0;K=!0;b.preventDefault();b.stopPropagation();return!1}b.preventDefault()}}if(!w.enableScrolling[g]||!w.scrolling[g])return!0;K&&(b.preventDefault(),b.stopPropagation());var d=w.getTouches(b);if(1<d.length)return!0;var c=
d[0].pageX;w.simulatetouches&&void 0!=d[0]._pageY&&(c=d[0]._pageX);touchHorizontalEnd=c;z=!0;var v=null!=f?"hidden"!=f[0].style.visibility:!0,y=null!=h?"hidden"!=h[0].style.visibility:!0;(v||y)&&(v||y)&&e(b)};if(b.on)b.on(D,d);else b.bind(D,d);var V=function(b){if(!w.enableScrolling[g])return!0;var e=w.getTouches(b)[0];if(!w.scrolling[g])return!0;M=!1;clearInterval(W);if(10<P||-10>P)X=.8*P,N=Math.round(G+X),O=Date.now(),requestAnimationFrame(r);else if(10<xjqxAnimations||-10>xjqxAnimations)X=.8*xjqxAnimations,
U=Math.round(xoffset+X),O=Date.now(),requestAnimationFrame(t);w.scrolling[g]=!1;if(z)w.dispatchMouseEvent("mouseup",e,b.target);else return e=w.getTouches(b)[0],b=w.getRootNode(e.target),w.dispatchMouseEvent("mouseup",e,b),w.dispatchMouseEvent("click",e,b),!0};this.simulatetouches&&(void 0!=c(window).on||c(window),d=function(b){try{V(b)}catch(e){}w.scrolling[g]=!1},void 0!=c(window).on?c(document).on("mouseup.touchScroll",d):c(document).bind("mouseup.touchScroll",d),window.frameElement&&null!=window.top&&
(d=function(b){try{V(b)}catch(e){}w.scrolling[g]=!1},window.top.document&&(c(window.top.document).on?c(window.top.document).on("mouseup",d):c(window.top.document).bind("mouseup",d))),void 0!=c(document).on||c(document),d=function(b){if(!w.scrolling[g])return!0;w.scrolling[g]=!1;b=w.getTouches(b)[0];var e=w.getRootNode(b.target);w.dispatchMouseEvent("mouseup",b,e);w.dispatchMouseEvent("click",b,e)},void 0!=c(document).on?c(document).on("touchend",d):c(document).bind("touchend",d));b.on&&(b.on("dragstart",
function(b){b.preventDefault()}),b.on("selectstart",function(b){b.preventDefault()}));b.on?b.on(C+" touchcancel.touchScroll",V):b.bind(C+" touchcancel.touchScroll",V)}}});c.jqx.cookie=c.jqx.cookie||{};c.extend(c.jqx.cookie,{cookie:function(b,d,e){if(1<arguments.length&&"[object Object]"!==String(d)){e=c.extend({},e);if(null===d||void 0===d)e.expires=-1;if("number"===typeof e.expires){var g=e.expires,f=e.expires=new Date;f.setDate(f.getDate()+g)}d=String(d);return document.cookie=[encodeURIComponent(b),
"=",e.raw?d:encodeURIComponent(d),e.expires?"; expires="+e.expires.toUTCString():"",e.path?"; path="+e.path:"",e.domain?"; domain="+e.domain:"",e.secure?"; secure":""].join("")}e=d||{};f=e.raw?function(b){return b}:decodeURIComponent;return(g=(new RegExp("(?:^|; )"+encodeURIComponent(b)+"=([^;]*)")).exec(document.cookie))?f(g[1]):null}});c.jqx.string=c.jqx.string||{};c.extend(c.jqx.string,{replace:function(b,d,e){if(d===e)return this;for(var c=b.indexOf(d);-1!=c;)b=b.replace(d,e),c=b.indexOf(d);return b},
contains:function(b,d){return null==b||null==d?!1:-1!=b.indexOf(d)},containsIgnoreCase:function(b,d){return null==b||null==d?!1:-1!=b.toString().toUpperCase().indexOf(d.toString().toUpperCase())},equals:function(b,d){if(null==b||null==d)return!1;b=this.normalize(b);return d.length==b.length?b.slice(0,d.length)==d:!1},equalsIgnoreCase:function(b,d){if(null==b||null==d)return!1;b=this.normalize(b);return d.length==b.length?b.toUpperCase().slice(0,d.length)==d.toUpperCase():!1},startsWith:function(b,
d){return null==b||null==d?!1:b.slice(0,d.length)==d},startsWithIgnoreCase:function(b,d){return null==b||null==d?!1:b.toUpperCase().slice(0,d.length)==d.toUpperCase()},normalize:function(b){65279==b.charCodeAt(b.length-1)&&(b=b.substring(0,b.length-1));return b},endsWith:function(b,d){if(null==b||null==d)return!1;b=this.normalize(b);return b.slice(-d.length)==d},endsWithIgnoreCase:function(b,d){if(null==b||null==d)return!1;b=this.normalize(b);return b.toUpperCase().slice(-d.length)==d.toUpperCase()}});
c.extend(c.easing,{easeOutBack:function(b,d,e,c,f,h){void 0==h&&(h=1.70158);return c*((d=d/f-1)*d*((h+1)*d+h)+1)+e},easeInQuad:function(b,d,e,c,f){return c*(d/=f)*d+e},easeInOutCirc:function(b,d,e,c,f){return 1>(d/=f/2)?-c/2*(Math.sqrt(1-d*d)-1)+e:c/2*(Math.sqrt(1-(d-=2)*d)+1)+e},easeInOutSine:function(b,d,e,c,f){return-c/2*(Math.cos(Math.PI*d/f)-1)+e},easeInCubic:function(b,d,e,c,f){return c*(d/=f)*d*d+e},easeOutCubic:function(b,d,e,c,f){return c*((d=d/f-1)*d*d+1)+e},easeInOutCubic:function(b,d,
e,c,f){return 1>(d/=f/2)?c/2*d*d*d+e:c/2*((d-=2)*d*d+2)+e},easeInSine:function(b,d,e,c,f){return-c*Math.cos(d/f*(Math.PI/2))+c+e},easeOutSine:function(b,d,e,c,f){return c*Math.sin(d/f*(Math.PI/2))+e},easeInOutSine:function(b,d,e,c,f){return-c/2*(Math.cos(Math.PI*d/f)-1)+e}})})(jqxBaseFramework);
(function(c){c.event&&c.event.special&&c.extend(c.event.special,{close:{noBubble:!0},open:{noBubble:!0},cellclick:{noBubble:!0},rowclick:{noBubble:!0},tabclick:{noBubble:!0},selected:{noBubble:!0},expanded:{noBubble:!0},collapsed:{noBubble:!0},valuechanged:{noBubble:!0},expandedItem:{noBubble:!0},collapsedItem:{noBubble:!0},expandingItem:{noBubble:!0},collapsingItem:{noBubble:!0}});c.fn.extend&&c.fn.extend({ischildof:function(b){if(!c(this).parents)return b.element.contains(this.element);for(var e=
c(this).parents().get(),g=0;g<e.length;g++)if("string"!=typeof b){var f=e[g];if(void 0!==b&&f==b[0])return!0}else if(void 0!==b&&c(e[g]).is(b))return!0;return!1}});c.fn.jqxProxy=function(){var b=c(this).data().jqxWidget,e=Array.prototype.slice.call(arguments,0),g=b.element;g||(g=b.base.element);return c.jqx.jqxWidgetProxy(b.widgetName,g,e)};var b=this.originalVal=c.fn.val;c.fn.val=function(d){if("undefined"==typeof d){if(c(this).hasClass("jqx-widget")){var e=c(this).data().jqxWidget;if(e&&e.val)return e.val()}return this[0]&&
0<=this[0].tagName.toLowerCase().indexOf("angular")&&(e=c(this).find(".jqx-widget").data().jqxWidget)&&e.val?e.val():b.call(this)}return c(this).hasClass("jqx-widget")&&(e=c(this).data().jqxWidget)&&e.val||this[0]&&0<=this[0].tagName.toLowerCase().indexOf("angular")&&(e=c(this).find(".jqx-widget").data().jqxWidget)&&e.val?2!=arguments.length?e.val(d):e.val(d,arguments[1]):b.call(this,d)};c.fn.modal&&c.fn.modal.Constructor&&(c.fn.modal.Constructor.prototype.enforceFocus=function(){c(document).off("focusin.bs.modal").on("focusin.bs.modal",
c.proxy(function(b){if(this.$element[0]!==b.target&&!this.$element.has(b.target).length){if(c(b.target).parents().hasClass("jqx-popup"))return!0;this.$element.trigger("focus")}},this))});c.fn.coord=function(b){var e,g,f={top:0,left:0},h=(g=this[0])&&g.ownerDocument;if(h){e=h.documentElement;if(!c.contains(e,g))return f;f=g.getBoundingClientRect();g=c.isWindow(h)?h:9===h.nodeType?h.defaultView||h.parentWindow:!1;var l=h=0,q=navigator.userAgent.toLowerCase();if(-1!=q.indexOf("ipad")||-1!=q.indexOf("iphone"))h=
2;1==b&&"static"!=document.body.style.position&&""!=document.body.style.position&&(b=c(document.body).coord(),h=-b.left,l=-b.top);return{top:l+f.top+(g.pageYOffset||e.scrollTop)-(e.clientTop||0),left:h+f.left+(g.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}}}})(jqxBaseFramework);
(function(c){function b(b){return function(e,d){"string"!==typeof e&&(d=e,e="*");var g,f,h=e.toLowerCase().split(v),l=0,q=h.length;if(c.isFunction(d))for(;l<q;l++)g=h[l],(f=/^\+/.test(g))&&(g=g.substr(1)||"*"),g=b[g]=b[g]||[],g[f?"unshift":"push"](d)}}function d(b,e,c,g,f,h){f=f||e.dataTypes[0];h=h||{};h[f]=!0;var l;f=b[f];for(var v=0,q=f?f.length:0,r=b===y;v<q&&(r||!l);v++)l=f[v](e,c,g),"string"===typeof l&&(!r||h[l]?l=void 0:(e.dataTypes.unshift(l),l=d(b,e,c,g,l,h)));!r&&l||h["*"]||(l=d(b,e,c,g,
"*",h));return l}function e(b,e){var d,g,f=c.jqx.data.ajaxSettings.flatOptions||{};for(d in e)void 0!==e[d]&&((f[d]?b:g||(g={}))[d]=e[d]);g&&c.extend(!0,b,g)}function g(){try{return new window.XMLHttpRequest}catch(b){}}c.jqx.observableArray=function(b,e){"string"==typeof b&&(b=c.parseJSON(b));var d;if(!(d=!Object.defineProperty)){var g;try{Object.defineProperty({},"x",{}),g=!0}catch(f){g=!1}d=!g}if(d){var h=Object.defineProperty;Object.defineProperty=function(b,e,d){if(h)try{return h(b,e,d)}catch(c){}if(b!==
Object(b))throw TypeError("Object.defineProperty called on non-object");Object.prototype.__defineGetter__&&"get"in d&&Object.prototype.__defineGetter__.call(b,e,d.get);Object.prototype.__defineSetter__&&"set"in d&&Object.prototype.__defineSetter__.call(b,e,d.set);"value"in d?b[e]=d.value:b[e]||(b[e]=d);return b}}Array.prototype.forEach||(Array.prototype.forEach=function(b,e){if(void 0===this||null===this)throw TypeError();var d=Object(this),c=d.length>>>0;if("function"!==typeof b)throw TypeError();
var g;for(g=0;g<c;g++)g in d&&b.call(e,d[g],g,d)});"function"!==typeof Object.getOwnPropertyNames&&(Object.getOwnPropertyNames=function(b){if(b!==Object(b))throw TypeError("Object.getOwnPropertyNames called on non-object");var e=[],d;for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&e.push(d);return e});var l=this,v,q=[];l.notifier=null;l.name="observableArray";l.observing=!0;l.changes=[];l.observe=function(){l.observing=!0;1==arguments.length&&(e=arguments[0])};l.unobserve=function(){l.observing=
!1};l.toArray=function(){return q.slice(0)};l.toJSON=function(b,e){function d(b){return'"'+b.replace(l,function(b){var e=v[b];return"string"===typeof e?e:"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)})+'"'}function c(b){return 10>b?"0"+b:b}function g(b,e){switch(e){case "string":return d(b);case "number":case "float":case "integer":case "int":return isFinite(b)?b:"null";case "boolean":return b}return"null"}function f(e,h){var l=h[e],v=typeof l;l&&"object"===typeof l&&"function"===typeof l.toJSON&&
(l=l.toJSON(e),v=typeof l);if(/(number|float|int|integer|string|boolean)/.test(v)||!l&&"object"===v)return g(l,v);a:{switch(Object.prototype.toString.call(l)){case "[object Date]":l=isFinite(l.valueOf())?l.getUTCFullYear()+"-"+c(l.getUTCMonth()+1)+"-"+c(l.getUTCDate())+"T"+c(l.getUTCHours())+":"+c(l.getUTCMinutes())+":"+c(l.getUTCSeconds())+'Z"':"null";break a;case "[object Array]":var q=l.length,v=[],y;for(y=0;y<q;y++)v.push(f(y,l)||"null");l="["+v.join(",")+"]";break a}v=[];for(q in l)!Object.prototype.hasOwnProperty.call(l,
q)||""!=q&&b&&-1===b.indexOf(q)||(y=f(q,l))&&v.push(d(q)+":"+y);l="{"+v.join(",")+"}"}return l}var h=q;e&&(h=e);var l=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,v={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return!b&&window.JSON&&"function"===typeof window.JSON.stringify?window.JSON.stringify(h):f("",{"":h})};l.defineIndexProperty=function(b){if(!(b in l)){var e=function(b,e,d,g){var f=
b[e],h=f;d=function(){return h};var y=function(b){f=b;if(h!==f&&(b=h,h=f,"function"===typeof v)){var d=q.indexOf(g),y="",r=function(b,d){Object.getOwnPropertyNames(b).forEach(function(g){var f=c.type(b[g]);"array"==f||"object"==f?r(b[g],d+"."+g):e===g&&(y=d+"."+g)})};r(g,d);v({object:l,type:"update",path:y,index:d,name:e,newValue:f,oldValue:b})}return h=f};void 0!=b[e]&&"length"!=e&&(Object.defineProperty?Object.defineProperty(b,e,{get:d,set:y}):Object.prototype.__defineGetter__&&Object.prototype.__defineSetter__&&
(Object.prototype.__defineGetter__.call(b,e,d),Object.prototype.__defineSetter__.call(b,e,y)))},d=function(b,g,f){var h=c.type(b);/(number|float|int|integer|string|boolean)/.test(h)||void 0!==b&&Object.getOwnPropertyNames(b).forEach(function(h){var l=c.type(b[h]);"array"==l||"object"==l?(e(b,h,g+"."+h,f),d(b[h],g+"."+h,f)):e(b,h,g+"."+h,f)})};Object.defineProperty(l,b,{configurable:!0,enumerable:!0,get:function(){return q[b]},set:function(e){var c=q[b];l.toJSON(null,c)!=l.toJSON(null,e)&&(q[b]=e,
"function"===typeof v&&v({object:l,type:"update",path:b.toString(),index:b,name:"index",newValue:e,oldValue:c}),d(e,b,e))}});d(l[b],b,l[b])}};l.push=function(){for(var b,e=0,d=arguments.length;e<d;e++)b=q.length,q.push(arguments[e]),l.defineIndexProperty(b),"function"===typeof v&&v({object:l,type:"add",name:"length",index:b,newValue:q.length,oldValue:b});return q.length};l.pop=function(){if(~q.length){var b=q.length-1,e=q.pop();delete l[b];"function"===typeof v&&v({object:l,type:"delete",name:"length",
index:b,newValue:q.length,oldValue:b});return e}};l.unshift=function(){for(var b=q.length,e=0,d=arguments.length;e<d;e++)q.splice(e,0,arguments[e]),l.defineIndexProperty(q.length-1);"function"===typeof v&&v({object:l,type:"add",index:0,name:"length",newValue:q.length,oldValue:b});return q.length};l.shift=function(){var b=q.length;if(~q.length){var e=q.shift();0===q.length&&delete l[b];"function"===typeof v&&v({object:l,type:"delete",index:b,name:"length",newValue:q.length,oldValue:b});return e}};
l.slice=function(b,e,d){b=q.slice(b,e);return new c.jqx.observableArray(b,d)};l.splice=function(b,e,d){var g=[],f;b=~b?b:q.length-b;for(e=(null==e?q.length-b:e)||0;e--;)f=q.splice(b,1)[0],g.push(f),delete l[q.length],"function"===typeof v&&v({object:l,type:"delete",index:b,name:"length",newValue:-1,oldValue:b});f=2;for(var h=arguments.length;f<h;f++)q.splice(b,0,arguments[f]),defineIndexProperty(q.length-1),"function"===typeof v&&v({object:l,type:"add",index:b,name:"length",newValue:q.length-1,oldValue:b}),
b++;return new c.jqx.observableArray(g,d)};Object.defineProperty(l,"length",{configurable:!1,enumerable:!0,get:function(){return q.length},set:function(b){var e=Number(b);if(0===e%1&&0<=e)e<q.length?l.splice(e):e>q.length&&l.push.apply(l,Array(e-q.length));else throw new RangeError("Invalid array length");return b}});c.jqx.observableArray.prototype.fromArray=function(b,e){return new c.jqx.observableArray(b,e)};c.jqx.observableArray.prototype.clone=function(){var b=new c.jqx.observableArray(q,e);b.observing=
l.observing;b.changes=l.changes;b.notifier=l.notifier;return b};l.remove=function(b){if(0>b||b>=l.length)throw Error("Invalid index : "+b);if(l.hasOwnProperty(b)){var e=l[b];l[b]=void 0;q[b]=void 0;"function"===typeof v&&v({object:l,type:"delete",index:b,name:"index",newValue:void 0,oldValue:e});return!0}return!1};l.concat=function(b,e){var d=q.concat(b);return new c.jqx.observableArray(d,e)};Object.getOwnPropertyNames(Array.prototype).forEach(function(b){b in l||Object.defineProperty(l,b,{configurable:!1,
enumerable:!0,writeable:!1,value:function(){var e=l.observing;l.observing=!1;var d=q[b].apply(q,arguments);l.observing=e;return d}})});l.set=function(b,e){if("string"==c.type(b)&&1<b.split(".").length){for(var d=b.split("."),g=l,f=0;f<d.length;f++){if(0===f&&d[f]>=l.length)throw Error("Invalid Index: "+b);f<d.length-1?g=g[d[f]]:g[d[f]]=e}return!0}b>=l.length?l.push(e):l[b]=e;return!0};l.get=function(b){return l[b]};b instanceof Array&&l.push.apply(l,b);v=function(){l.observing&&(arguments&&arguments[0]&&
l.changes.push(arguments[0]),e&&e.apply(l,arguments),l.notifier&&l.notifier.apply(l,arguments))};return l};c.jqx.formatDate=function(b,e,d){return c.jqx.dataFormat.formatdate(b,e,d)};c.jqx.formatNumber=function(b,e,d){return c.jqx.dataFormat.formatnumber(b,e,d)};c.jqx.dataAdapter=function(b,e){void 0!=b&&(void 0!==b.dataFields&&(b.datafields=b.dataFields),void 0!==b.dataType&&(b.datatype=b.dataType),void 0!==b.localData&&(b.localdata=b.localData),void 0!==b.sortColumn&&(b.sortcolumn=b.sortColumn),
void 0!==b.sortDirection&&(b.sortdirection=b.sortDirection),void 0!==b.sortOrder&&(b.sortdirection=b.sortOrder),void 0!==b.formatData&&(b.formatdata=b.formatData),void 0!==b.processData&&(b.processdata=b.processData),void 0!==b.pageSize&&(b.pagesize=b.pageSize),void 0!==b.pageNum&&(b.pagenum=b.pageNum),void 0!==b.updateRow&&(b.updaterow=b.updateRow),void 0!==b.addRow&&(b.addrow=b.addRow),void 0!==b.deleteRow&&(b.deleterow=b.deleteRow),void 0!==b.contentType&&(b.contenttype=b.contentType),void 0!=
b.totalRecords&&(b.totalrecords=b.totalRecords),void 0!=b.loadError&&(b.loadError=b.loadError),void 0!=b.sortComparer&&(b.sortcomparer=b.sortComparer));this._source=b;this._options=e||{};void 0!=b.beforeLoadComplete&&(this._options.beforeLoadComplete=this._source.beforeLoadComplete);void 0!=b.downloadComplete&&(this._options.downloadComplete=this._source.downloadComplete);void 0!=b.loadComplete&&(this._options.loadComplete=this._source.loadComplete);void 0!=b.autoBind&&(this._options.downloadComplete=
this._source.autoBind);void 0!=b.formatData&&(this._options.formatData=this._source.formatData);void 0!=b.loadError&&(this._options.loadError=this._source.loadError);void 0!=b.beforeSend&&(this._options.beforeSend=this._source.beforeSend);void 0!=b.contentType&&(this._options.contentType=this._source.contentType);void 0!=b.async&&(this._options.async=this._source.async);void 0!=b.loadServerData&&(this._options.loadServerData=this._source.loadServerData);void 0!=b.uniqueDataFields&&(this._options.uniqueDataFields=
this._source.uniqueDataFields);this.records=[];this._downloadComplete=[];this._bindingUpdate=[];if(void 0!=b&&null!=b.localdata&&"function"==typeof b.localdata){var d=b.localdata();if(null!=d){b._localdata=b.localdata;var g=this;b._localdata.subscribe&&(g._oldlocaldata=[],b._localdata.subscribe(function(b){var e=function(b){return c.isArray(b)?c.makeArray(e(c(b))):c.extend(!0,{},b)};if(0==g.suspendKO||void 0==g.suspendKO||0==g._oldlocaldata.length)g._oldlocaldata=e(b)},b._localdata,"beforeChange"),
b._localdata.subscribe(function(e){if(0==g.suspendKO||void 0==g.suspendKO){var d="";g._oldrecords=g.records;0==g._oldlocaldata.length&&(b.localdata=b._localdata());0==g._oldlocaldata.length?d="change":e&&(g._oldlocaldata.length==e.length&&(d="update"),g._oldlocaldata.length>e.length&&(d="remove"),g._oldlocaldata.length<e.length&&(d="add"));g.dataBind(null,d)}},b._localdata,"change"),g._knockoutdatasource=!0);b.localdata=d}}1==this._options.autoBind&&this.dataBind()};c.jqx.dataAdapter.prototype={getrecords:function(){return this.records},
beginUpdate:function(){this.isUpdating=!0},endUpdate:function(b){this.isUpdating=!1;0!=b&&(this._changedrecords&&0<this._changedrecords.length?(this.callBindingUpdate("update"),this._changedrecords=[]):this.dataBind(null,""))},formatDate:function(b,e,d){return c.jqx.dataFormat.formatdate(b,e,d)},formatNumber:function(b,e,d){return c.jqx.dataFormat.formatnumber(b,e,d)},dataBind:function(b,e){if(1!=this.isUpdating){var d=this._source;if(d){d.generatedfields&&(d.datafields=null,d.generatedfields=null);
c.jqx.dataFormat.datescache=[];null!=d.dataFields&&(d.datafields=d.dataFields);void 0==d.recordstartindex&&(d.recordstartindex=0);void 0==d.recordendindex&&(d.recordendindex=0);void 0==d.loadallrecords&&(d.loadallrecords=!0);void 0==d.root&&(d.root="");void 0==d.record&&(d.record="");void 0!=d.sort&&(this.sort=d.sort);this.filter=void 0!=d.filter?d.filter:null;void 0!=d.sortcolumn&&(this.sortcolumn=d.sortcolumn);void 0!=d.sortdirection&&(this.sortdirection=d.sortdirection);void 0!=d.sortcomparer&&
(this.sortcomparer=d.sortcomparer);this.records=[];var g=this._options||{};this.virtualmode=void 0!=g.virtualmode?g.virtualmode:!1;this.totalrecords=void 0!=g.totalrecords?g.totalrecords:0;this.pageable=void 0!=g.pageable?g.pageable:!1;this.pagesize=void 0!=g.pagesize?g.pagesize:0;this.pagenum=void 0!=g.pagenum?g.pagenum:0;this.cachedrecords=void 0!=g.cachedrecords?g.cachedrecords:[];this.originaldata=[];this.recordids=[];this.updaterow=void 0!=g.updaterow?g.updaterow:null;this.addrow=void 0!=g.addrow?
g.addrow:null;this.deleterow=void 0!=g.deleterow?g.deleterow:null;this.cache=void 0!=g.cache?g.cache:!1;this.unboundmode=!1;void 0!=d.formatdata&&(g.formatData=d.formatdata);void 0!=d.data&&(void 0==g.data&&(g.data={}),c.extend(g.data,d.data));void 0!=d.mapChar&&(d.mapchar=d.maxChar);this.mapChar=void 0!=d.mapchar?d.mapchar?d.mapchar:">":g.mapChar?g.mapChar:">";if(g.unboundmode||d.unboundmode)this.unboundmode=g.unboundmode||d.unboundmode;void 0!=d.cache&&(this.cache=d.cache);if(this.koSubscriptions)for(var f=
0;f<this.koSubscriptions.length;f++)this.koSubscriptions[f].dispose();this.koSubscriptions=[];0>this.pagenum&&(this.pagenum=0);var h=this,l=d.datatype;if("csv"===d.datatype||"tab"===d.datatype||"tsv"===d.datatype||"text"==d.datatype)l="text";f=void 0!=g.async?g.async:!0;void 0!=d.async&&(f=d.async);switch(l){default:if(void 0==d.localdata&&d.length){d.localdata=[];for(var v=0;v<d.length;v++)d.localdata[d.localdata.length]=d[v],d[v].uid=v}d.beforeprocessing&&c.isFunction(d.beforeprocessing)&&d.beforeprocessing(d.localdata);
f=d.localdata.length;this.totalrecords=this.virtualmode?d.totalrecords||f:f;if(this.unboundmode){this.totalrecords=this.unboundmode?d.totalrecords||f:f;var q=d.datafields?d.datafields.length:0;if(0<q)for(v=0;v<this.totalrecords;v++){for(var y={},f=0;f<q;f++)y[d.datafields[f].name]="";y.uid=v;d.localdata[d.localdata.length]=y}}void 0==this.totalrecords&&(this.totalrecords=0);var q=d.datafields?d.datafields.length:0,r=function(b,e){for(var g={},f=0;f<e;f++){var l=d.datafields?d.datafields[f]:{},v="";
if(void 0!=l&&null!=l){if(l.map){if(c.isFunction(l.map))v=l.map(b);else if(v=l.map.split(h.mapChar),0<v.length){for(var q=b,y=0;y<v.length;y++)q&&(q=q[v[y]]);v=q}else v=b[l.map];void 0!=v&&null!=v?v=v.toString():void 0==v&&null!=v&&(v="")}q=!1;""==v&&(q=!0,v=b[l.name],void 0!=v&&null!=v&&(d._localdata&&v.subscribe?v=v():"array"!=l.type&&"date"!==l.type&&(v=v.toString())));"[object Object]"==v&&l.map&&q&&(v="");v=h.getvaluebytype(v,l);void 0!=l.displayname?g[l.displayname]=v:g[l.name]=v}}return g};
if(d._localdata)if(this._changedrecords=[],this.records=[],v=d._localdata(),c.each(v,function(b,g){if("string"===typeof g)h.records.push(g);else{var f={},l=0,v=this;c.each(this,function(e,g){var y=null,r="string",t=e;if(0<q){for(var C=!1,w=!1,z=0;z<q;z++){var B=d.datafields[z];if(void 0!=B&&B.name==e){C=!0;y=B.map;r=B.type;t=B.name;break}else if(void 0!=B&&B.map&&0<=B.map.indexOf(e)){C=!0;y=B.map;r=B.type;t=B.name;w=!0;B=v[e];if(null!=y)if(B=y.split(h.mapChar),0<B.length){for(var D=v,J=0;J<B.length;J++)D=
D[B[J]];B=D}else B=v[y];"string"!=r&&(B=h.getvaluebytype(B,{type:r}));f[t]=B;void 0!=f[t]&&(l+=f[t].toString().length+f[t].toString().substr(0,1))}}if(!C||w)return!0}if(c.isFunction(v[e]))B=v[e](),"string"!=r&&(B=h.getvaluebytype(B,{type:r})),f[e]=B,v[e].subscribe&&(h.koSubscriptions[h.koSubscriptions.length]=v[e].subscribe(function(d){f[e]=d;h._changedrecords.push({index:b,oldrecord:f,record:f});if(!h.isUpdating)return h.callBindingUpdate("update"),h._changedrecords=[],!1}));else{B=v[e];if(null!=
y)if(B=y.split(h.mapChar),0<B.length){D=v;for(J=0;J<B.length;J++)D=D[B[J]];B=D}else B=v[y];"string"!=r&&(B=h.getvaluebytype(B,{type:r}));f[t]=B;void 0!=f[t]&&(l+=f[t].toString().length+f[t].toString().substr(0,1))}});var y=h.getid(d.id,v,b);f.uid=y;h.records.push(f);f._koindex=l;h._oldrecords&&(y=h.records.length-1,"update"==e&&h._oldrecords[y]._koindex!=l&&h._changedrecords.push({index:y,oldrecord:h._oldrecords[y],record:f}))}}),"add"==e)for(f=h.records.length,v=0;v<f;v++){for(var y=h.records[v],
t=!1,C=0;C<h._oldrecords.length;C++)if(h._oldrecords[C]._koindex===y._koindex){t=!0;break}t||h._changedrecords.push({index:v,oldrecord:null,record:y,position:0!=v?"last":"first"})}else{if("remove"==e)for(f=h._oldrecords.length,v=0;v<f;v++)y=h._oldrecords[v],h.records[v]?h.records[v]._koindex!=y._koindex&&h._changedrecords.push({index:v,oldrecord:y,record:null}):h._changedrecords.push({index:v,oldrecord:y,record:null})}else if(c.isArray(d.localdata))0==q?(w=0,z=[],c.each(d.localdata,function(b,e){var g=
Object(this);if("string"===typeof e)return h.records=d.localdata,!1;var f=h.getid(d.id,g,b);"object"===typeof f&&(f=b);g.uid=f;if(0==b){for(var l in this){w++;var v=c.type(this[l]);z.push({name:l,type:v})}q=w;d.datafields=z;d.generatedfields=z}0<q&&(g=r(g,q),g.uid=f);h.records[h.records.length]=g})):c.each(d.localdata,function(b){var e=r(this,q),c=h.getid(d.id,e,b);"object"===typeof c&&(c=b);b=Object(e);b.uid=c;h.records[h.records.length]=b});else{this.records=[];var w=0,z=[];c.each(d.localdata,function(b){b=
h.getid(d.id,this,b);if(0==q&&!("string"===typeof this||this instanceof String)){for(var e in this){w++;var g=c.type(this[e]);z.push({name:e,type:g})}q=w;d.datafields=z;d.generatedfields=z}0<q?(e=r(this,q),e.uid=b,h.records[h.records.length]=e):(this.uid=b,h.records[h.records.length]=this)})}this.originaldata=d.localdata;this.cachedrecords=this.records;this.addForeignValues(d);g.uniqueDataFields&&(this.cachedrecords=this.records=v=this.getUniqueRecords(this.records,g.uniqueDataFields));g.beforeLoadComplete&&
(v=g.beforeLoadComplete(h.records,this.originaldata),void 0!=v&&(h.records=v,h.cachedrecords=v));g.autoSort&&g.autoSortField&&(v=Object.prototype.toString,Object.prototype.toString="function"==typeof field?field:function(){return this[g.autoSortField]},h.records.sort(function(b,e){void 0===b&&(b=null);void 0===e&&(e=null);if(null===b&&null===e)return 0;if(null===b&&null!==e)return 1;if(null!==b&&null===e)return-1;b=b.toString();e=e.toString();if(null===b&&null===e)return 0;if(null===b&&null!==e)return 1;
if(null!==b&&null===e)return-1;if(c.jqx.dataFormat.isNumber(b)&&c.jqx.dataFormat.isNumber(e)||c.jqx.dataFormat.isDate(b)&&c.jqx.dataFormat.isDate(e))return b<e?-1:b>e?1:0;c.jqx.dataFormat.isNumber(b)||c.jqx.dataFormat.isNumber(e)||(b=String(b).toLowerCase(),e=String(e).toLowerCase());return b<e?-1:b>e?1:0}),Object.prototype.toString=v);h.loadedData=d.localdata;h.buildHierarchy();c.isFunction(g.loadComplete)&&g.loadComplete(d.localdata,h.records);break;case "json":case "jsonp":case "xml":case "xhtml":case "script":case "text":case "ics":if(null!=
d.localdata&&!d.url){c.isFunction(d.beforeprocessing)&&d.beforeprocessing(d.localdata);"xml"===d.datatype?h.loadxml(d.localdata,d.localdata,d):"text"===l?h.loadtext(d.localdata,d):"ics"===l?h.loadics(d.localdata,d):h.loadjson(d.localdata,d.localdata,d);h.addForeignValues(d);g.uniqueDataFields&&(v=h.getUniqueRecords(h.records,g.uniqueDataFields),h.records=v,h.cachedrecords=v);g.beforeLoadComplete&&(v=g.beforeLoadComplete(h.records,this.originaldata),void 0!=v&&(h.records=v,h.cachedrecords=v));h.loadedData=
d.localdata;h.buildHierarchy.call(h);c.isFunction(g.loadComplete)&&g.loadComplete(d.localdata,h.records);h.callBindingUpdate(e);return}y=void 0!=g.data?g.data:{};d.processdata&&d.processdata(y);c.isFunction(g.processData)&&g.processData(y);c.isFunction(g.formatData)&&(t=g.formatData(y),void 0!=t&&(y=t));t="application/x-www-form-urlencoded";g.contentType&&(t=g.contentType);C="GET";d.type&&(C=d.type);g.type&&(C=g.type);var B=l;"ics"==l&&(B="text");d.url&&0<d.url.length?c.isFunction(g.loadServerData)?
h._requestData(y,d,g):this.xhr=c.jqx.data.ajax({dataType:B,cache:this.cache,type:C,url:d.url,async:f,timeout:d.timeout,contentType:t,data:y,success:function(b,e,f){if(c.isFunction(d.beforeprocessing)){var v=d.beforeprocessing(b,e,f);void 0!=v&&(b=v)}c.isFunction(g.downloadComplete)&&(v=g.downloadComplete(b,e,f),void 0!=v&&(b=v));null==b?(h.records=[],h.cachedrecords=[],h.originaldata=[],h.callDownloadComplete(),c.isFunction(g.loadComplete)&&g.loadComplete([])):(v=b,b.records&&(v=b.records),void 0!=
b.totalrecords?d.totalrecords=b.totalrecords:void 0!=b.totalRecords&&(d.totalrecords=b.totalRecords),"xml"===d.datatype?h.loadxml(null,v,d):"text"===l?h.loadtext(v,d):"ics"===l?h.loadics(v,d):h.loadjson(null,v,d),h.addForeignValues(d),g.uniqueDataFields&&(v=h.getUniqueRecords(h.records,g.uniqueDataFields),h.records=v,h.cachedrecords=v),g.beforeLoadComplete&&(v=g.beforeLoadComplete(h.records,b),void 0!=v&&(h.records=v,h.cachedrecords=v)),h.loadedData=b,h.buildHierarchy.call(h),h.callDownloadComplete(),
c.isFunction(g.loadComplete)&&g.loadComplete(b,e,f,h.records))},error:function(b,e,f){c.isFunction(d.loaderror)&&d.loaderror(b,e,f);c.isFunction(g.loadError)&&g.loadError(b,e,f);h.callDownloadComplete()},beforeSend:function(b,e){c.isFunction(g.beforeSend)&&g.beforeSend(b,e);c.isFunction(d.beforesend)&&d.beforesend(b,e)}}):(h.buildHierarchy([]),h.callDownloadComplete(),c.isFunction(g.loadComplete)&&(v||(v={}),g.loadComplete(v)))}this.callBindingUpdate(e)}}},buildHierarchy:function(b){var e=this._source,
d=[];if(e.datafields){if(e.hierarchy&&!e.hierarchy.reservedNames)e.hierarchy.reservedNames={leaf:"leaf",parent:"parent",expanded:"expanded",checked:"checked",selected:"selected",level:"level",icon:"icon",data:"data"};else if(e.hierarchy){var c=e.hierarchy.reservedNames;c.leaf||(c.leaf="leaf");c.parent||(c.parent="parent");c.expanded||(c.expanded="expanded");c.checked||(c.checked="checked");c.selected||(c.selected="selected");c.level||(c.level="level");c.data||(c.data="data")}if(e.hierarchy){var g=
this,c=e.hierarchy.reservedNames;if(e.hierarchy.root){if("xml"==e.dataType)return this.hierarchy=d=this.getRecordsHierarchy("uid","parentuid","records",null,b);this.hierarchy=this.records;for(var f=e.hierarchy.root,d=0;d<this.records.length;d++)if(b=this.records[d]){var h=function(b){if(e.hierarchy.record)b.records=b[f][e.hierarchy.record];else{var d=f.split(g.mapChar);if(1<d.length){for(var h=b,l=0;l<d.length;l++)void 0!=h&&(h=h[d[l]]);d=h}else d=b[f];b.records=d}if(null==b.records||b.records&&0==
b.records.length)b[c.leaf]=!0};h(b);b[c.level]=0;var l=this.getid(e.id,b,d);b.uid=l;b[c.parent]=null;b[c.data]=b;void 0===b[c.expanded]&&(b[c.expanded]=!1);var v=function(b,d){if(d)for(var f=0;f<d.length;f++){var l=d[f];if(l){h(l);l[c.level]=b[c.level]+1;l[c.parent]=b;l[c.data]=l;var q=g.getid(e.id,l,f);l.uid=q==f&&null==e.id?b.uid+"_"+q:q;void 0===l[c.expanded]&&(l[c.expanded]=!1);v(l,l.records)}}else b.records=[]};v(b,b.records)}return this.hierarchy}if(e.hierarchy.keyDataField&&e.hierarchy.parentDataField)return this.hierarchy=
d=this.getRecordsHierarchy(e.hierarchy.keyDataField.name,e.hierarchy.parentDataField.name,"records",null,b);if(e.hierarchy.groupingDataFields){l=[];for(d=0;d<e.hierarchy.groupingDataFields.length;d++)l.push(e.hierarchy.groupingDataFields[d].name);return this.hierarchy=d=this.getGroupedRecords(l,"records","label",null,"data",null,"parent",b)}}}},addRecord:function(b,e,d,c){var g=this,f=function(){return{leaf:"leaf",parent:"parent",expanded:"expanded",checked:"checked",selected:"selected",level:"level",
icon:"icon",data:"data"}};if(void 0!=b)if(void 0!=d){if(0<this.hierarchy.length){var h=function(c){if(c)for(var l=0;l<c.length;l++){var v=c[l];if(v.uid==d)return c=g._source&&g._source.hierarchy?g._source.hierarchy.reservedNames:null,null==c&&(c=f()),b[c.parent]=v,b[c.level]=v[c.level]+1,v.records||(v.records=[]),v[c.leaf]=!1,"last"==e?v.records.push(b):"number"===typeof e&&isFinite(e)?v.records.splice(e,0,b):v.records.splice(0,0,b),!0;v.records&&h(v.records)}};h(this.hierarchy)}}else return this.hierarchy&&
0<=this.hierarchy.length&&(this._source.hierarchy||c)?(c=g._source&&g._source.hierarchy?g._source.hierarchy.reservedNames:null,null==c&&(c=f()),b[c.level]=0,"last"==e?this.hierarchy.push(b):"number"===typeof e&&isFinite(e)?this.hierarchy.splice(e,0,b):this.hierarchy.splice(0,0,b)):"last"==e?this.records.push(b):"number"===typeof e&&isFinite(e)?this.records.splice(e,0,b):this.records.splice(0,0,b),!0;return!1},deleteRecord:function(b){var e=this;if(0<this.hierarchy.length){var d=function(c){if(c)for(var g=
0;g<c.length;g++){var f=c[g];if(f.uid==b){c.splice(g,1);e.recordids[b]&&delete e.recordids[b];var h=function(b){for(var d=0;d<b.length;d++){for(var c=b[d].uid,g=0;g<e.records.length;g++)if(e.records[g].uid==c){e.records.splice(g,1);break}b[d].records&&h(b[d].records)}};f.records&&h(f.records);for(c=0;c<e.records.length;c++)if(f=e.records[c],f.uid==b){e.records.splice(c,1);break}return!0}f.records&&d(f.records)}};d(this.hierarchy)}else for(var c=0;c<this.records.length;c++)if(this.records[c].uid==
b)return this.records.splice(c,1),!0;return!1},addForeignValues:function(b){for(var e=b.datafields?b.datafields.length:0,d=0;d<e;d++){var c=b.datafields[d];if(void 0!=c)if(void 0!=c.values){void 0==c.value&&(c.value=c.name);void 0==c.values.value&&(c.values.value=c.value);var g=[],f,h;this.pageable&&this.virtualmode?(f=this.pagenum*this.pagesize,h=f+this.pagesize,h>this.totalrecords&&(h=this.totalrecords)):this.virtualmode?(f=b.recordstartindex,h=b.recordendindex,h>this.totalrecords&&(h=this.totalrecords)):
(f=0,h=this.records.length);for(;f<h;f++){var l=this.records[f],v=c.name,q=l[c.value];if(void 0!=g[q])l[v]=g[q];else for(var y=0;y<c.values.source.length;y++){var r=c.values.source[y],t=r[c.values.value];void 0==t&&(t=r.uid);if(t==q){y=r[c.values.name];l[v]=y;g[q]=y;break}}}}else if(void 0!=c.value)for(f=0;f<this.records.length;f++)l=this.records[f],l[c.name]=l[c.value]}},abort:function(){this.xhr&&4!=this.xhr.readyState&&(this.xhr.abort(),me.callDownloadComplete())},_requestData:function(b,e,d){var g=
this;d.loadServerData(b,e,function(b){b.totalrecords&&(e.totalrecords=b.totalrecords,g.totalrecords=b.totalrecords);b.records&&(g.records=b.records,g.cachedrecords=b.records);g.addForeignValues(e);if(d.uniqueDataFields){var f=g.getUniqueRecords(g.records,d.uniqueDataFields);g.records=f;g.cachedrecords=f}d.beforeLoadComplete&&(f=d.beforeLoadComplete(g.records,data),void 0!=f&&(g.records=f,g.cachedrecords=f));for(f=0;f<g.records.length;f++){var h=g.records[f];void 0!=h&&void 0==h.uid&&(h.uid=g.getid(e.id,
h,f))}g.buildHierarchy.call(g);c.isFunction(d.loadComplete)&&d.loadComplete(b);g.callDownloadComplete()})},getUniqueRecords:function(b,e){if(b&&e)for(var d=b.length,c=e.length,g=[],f=[],h=0;h<d;h++){var l=b[h],v="";if(void 0!=l){for(var q=0;q<c;q++)v+=l[e[q]]+"_";f[v]||(g[g.length]=l);f[v]=!0}}return g},getAggregatedData:function(b,e,d,g){var f=d;f||(f=this.records);var h={};d=[];var l=f.length;if(0!=l&&void 0!=l){for(var v=0;v<l;v++)for(var q=f[v],y=0;y<b.length;y++){var r=b[y],t=q[r.name];if(r.aggregates){h[r.name]=
h[r.name]||{};d[r.name]=d[r.name]||0;d[r.name]++;var C=function(b){for(obj in b){var e=h[r.name][obj];null==e&&(e=h[r.name][obj]=0);c.isFunction(b[obj])&&(e=b[obj](e,t,r.name,q,g));h[r.name][obj]=e}},w=parseFloat(t);(w=isNaN(w)?!1:!0)&&(t=parseFloat(t));"number"===typeof t&&isFinite(t)?c.each(r.aggregates,function(){var b=h[r.name][this];null==b&&(b=0,"min"==this&&(b=9999999999999),"max"==this&&(b=-9999999999999));if("sum"==this||"avg"==this||"stdev"==this||"stdevp"==this||"var"==this||"varp"==this)b+=
parseFloat(t);else if("product"==this)b=0==v?parseFloat(t):b*parseFloat(t);else if("min"==this)b=Math.min(b,parseFloat(t));else if("max"==this)b=Math.max(b,parseFloat(t));else if("count"==this)b++;else if("object"==typeof this){C(this);return}h[r.name][this]=b}):c.each(r.aggregates,function(){if("min"==this||"max"==this||"count"==this||"product"==this||"sum"==this||"avg"==this||"stdev"==this||"stdevp"==this||"var"==this||"varp"==this){if(null===t)return!0;var b=h[r.name][this];null==b&&(b=0);h[r.name][this]=
b;return!0}"object"==typeof this&&C(this)})}}for(y=0;y<b.length;y++)r=b[y],h[r.name]||(h[r.name]={},c.each(r.aggregates,function(b){h[r.name][this]=0})),void 0!=h[r.name].avg?(t=h[r.name].avg,w=d[r.name],h[r.name].avg=0===w||void 0==w?0:t/w):void 0!=h[r.name].count&&(h[r.name].count=l),(h[r.name].stdev||h[r.name].stdevp||h[r.name]["var"]||h[r.name].varp)&&c.each(r.aggregates,function(b){if("stdev"==this||"var"==this||"varp"==this||"stdevp"==this){for(var e=h[r.name][this]/l,d=b=0;d<l;d++){var c=f[d][r.name];
b+=(c-e)*(c-e)}e="stdevp"==this||"varp"==this?l:l-1;0==e&&(e=1);if("var"==this||"varp"==this)h[r.name][this]=b/e;else if("stdevp"==this||"stdev"==this)h[r.name][this]=Math.sqrt(b/e)}}),r.formatStrings&&c.each(r.aggregates,function(b){if(b=r.formatStrings[b])if("min"==this||"max"==this||"count"==this||"product"==this||"sum"==this||"avg"==this||"stdev"==this||"stdevp"==this||"var"==this||"varp"==this){var d=h[r.name][this];h[r.name][this]=c.jqx.dataFormat.formatnumber(d,b,e)}else if("object"==typeof this)for(obj in this)d=
h[r.name][obj],h[r.name][obj]=c.jqx.dataFormat.formatnumber(d,b,e)});return h}},bindDownloadComplete:function(b,e){this._downloadComplete[this._downloadComplete.length]={id:b,func:e}},unbindDownloadComplete:function(b){for(var e=0;e<this._downloadComplete.length;e++)if(this._downloadComplete[e].id==b){this._downloadComplete[e].func=null;this._downloadComplete.splice(e,1);break}},callDownloadComplete:function(){for(var b=0;b<this._downloadComplete.length;b++){var e=this._downloadComplete[b];null!=
e.func&&e.func()}},setSource:function(b){this._source=b},generatekey:function(){var b=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return b()+b()+"-"+b()+"-"+b()+"-"+b()+"-"+b()+b()+b()},getGroupedRecords:function(b,e,d,g,f,h,l,v,q){q||(q=0);for(var y=[],r=0;r<b.length;r++)y[r]=this.generatekey();e||(e="items");d||(d="group");f||(f="record");l||(l="parentItem");void 0===h&&(h="value");var t=[],C=0,w=[],B=b.length;v||(v=this.records);for(var z=v.length,D=function(b){g&&c.each(g,
function(){this.name&&this.map&&(b[this.map]=b[this.name])});return b},E=0;E<z;E++){var F=D(v[E]);id=F[this.uniqueId];for(var A=[],G=0,r=0;r<B;r++){var H=F[b[r]];null!=H&&(A[G++]={value:H,hash:y[r]})}if(A.length!=B)break;for(var r=null,G="",H=-1,M=0;M<A.length;M++){H++;var Y=A[M].value,G=G+"_"+A[M].hash+"_"+Y;if(void 0!=w[G]&&null!=w[G])r=w[G];else{if(null==r){r={level:0};r[l]=null;r[d]=Y;r[f]=F;r.expanded=void 0!==F.expanded?F.expanded:!1;h&&(r[h]=F[h]);r[e]=[];Y=t.length+q;if(!this._source.id||
"number"===typeof F.uid||isFinite(F.uid))Y="Row"+Y;r.uid=Y;t[C++]=r}else{var ba={level:r.level+1};ba[l]=r;ba[d]=Y;ba[e]=[];ba[f]=F;ba.expanded=void 0!==F.expanded?F.expanded:!1;h&&(ba[h]=F[h]);ba.uid=r.uid+"_"+r[e].length;r=r[e][r[e].length]=ba}w[G]=r}}F&&(F.leaf=!0);null!=r?(null==this._source.id&&(void 0==F.uid?F.uid=r.uid+"_"+r[e].length:-1==F.uid.toString().indexOf(r.uid)&&(F.uid=r.uid+"_"+F.uid)),F[l]=r,F.level=r.level+1,r[e][r[e].length]=F):void 0==F.uid&&(F.uid=this.generatekey())}return t},
getRecordsHierarchy:function(b,e,d,g,f){var h=[],l=this.records;f&&(l=f);if(0==this.records.length)return null;var v=null!=d?d:"items";d=[];f=l.length;for(var q=this._source&&this._source.hierarchy?this._source.hierarchy.reservedNames:null,y=function(b){g&&c.each(g,function(){this.name&&this.map&&(b[this.map]=b[this.name])});return b},r=0;r<f;r++){var t=c.extend({},l[r]),C=t[e],w=t[b];d[w]={parentid:C,item:t}}for(r=0;r<f;r++)if(t=c.extend({},l[r]),C=t[e],w=t[b],void 0!=d[C]){var t={parentid:C,item:d[w].item},
B=d[C].item;B[v]||(B[v]=[]);var z=B[v].length,D=t.item;q?void 0==D[q.parent]&&(D[q.parent]=B):void 0==D.parent&&(D.parent=B);D=y(D);B[v][z]=D;d[C].item=B;d[w]=t}else D=d[w].item,q?void 0==D[q.parent]&&(D[q.parent]=null):void 0==D.parent&&(D.parent=null),D=y(D),q?D[q.level]=0:D.level=0,h[h.length]=D;if(0!=h.length){var E=function(b,e){for(var d=0;d<e.length;d++){q?e[d][q.level]=b:e[d].level=b;var c=e[d][v];c?0<c.length?E(b+1,c):q?e[d][q.leaf]=!0:e[d].leaf=!0:q?e[d][q.leaf]=!0:e[d].leaf=!0}};E(0,h)}return h},
bindBindingUpdate:function(b,e){this._bindingUpdate[this._bindingUpdate.length]={id:b,func:e}},unbindBindingUpdate:function(b){for(var e=0;e<this._bindingUpdate.length;e++)if(this._bindingUpdate[e].id==b){this._bindingUpdate[e].func=null;this._bindingUpdate.splice(e,1);break}},callBindingUpdate:function(b){for(var e=0;e<this._bindingUpdate.length;e++){var d=this._bindingUpdate[e];null!=d.func&&d.func(b)}},getid:function(b,e,d){if(null!=b&&void 0!=b.name&&b.name){var g=c(e).attr(b.name);if(null!=g&&
0<g.toString().length)return g;if(b.map)try{g=c(e).attr(b.map);if(null!=g&&0<g.toString().length)return g;if(0<c(b.map,e).length)return c(b.map,e).text();if(0<c(b.name,e).length)return c(b.name,e).text()}catch(f){return d}}else{if(0<c(b,e).length)return c(b,e).text();if(b&&0<b.toString().length){g=c(e).attr(b);if(null!=g&&0<g.toString().length)return c.trim(g).split(" ").join("").replace(/([ #;?%&,.+*~\':"!^$[\]()=>|\/@])/g,"");g=b.split(this.mapChar);if(1<g.length){b=e;for(e=0;e<g.length;e++)void 0!=
b&&(b=b[g[e]]);if(void 0!=b)return b}else if(void 0!=e[b])return e[b]}return d}},loadjson:function(b,e,d){"string"==typeof b&&(b=c.parseJSON(b));void 0==d.root&&(d.root="");void 0==d.record&&(d.record="");(b=b||e)||(b=[]);var g=this;if(""!=d.root){var f=d.root.split(g.mapChar);if(1<f.length){e=b;for(var h=0;h<f.length;h++)void 0!=e&&(e=e[f[h]]);b=e}else if(void 0!==b[d.root]?b=b[d.root]:b[0]&&void 0!==b[0][d.root]?b=b[0][d.root]:c.each(b,function(e){if(this==d.root)return b=this,!1;void 0!=this[d.root]&&
(b=this[d.root])}),!b&&(f=d.root.split(g.mapChar),0<f.length)){e=b;for(h=0;h<f.length;h++)void 0!=e&&(e=e[f[h]]);b=e}}else if(!b.length)for(obj in b)if(c.isArray(b[obj])){b=b[obj];break}null!=b&&void 0==b.length&&(b=c.makeArray(b));if(null==b||void 0==b||"undefined"==b||void 0==b.length)throw Error("jqxDataAdapter: JSON Parse error! Invalid JSON. Please, check your JSON or your jqxDataAdapter initialization!");if(0==b.length)this.totalrecords=0;else{e=b.length;this.totalrecords=this.virtualmode?d.totalrecords||
e:e;this.records=[];this.originaldata=[];var l=this.records,v=this.pageable?this.pagesize*this.pagenum:d.recordstartindex;this.recordids=[];d.loadallrecords&&(v=0,e=this.totalrecords);var q=0;this.virtualmode&&(q=v=this.pageable?this.pagesize*this.pagenum:d.recordstartindex,v=0,e=this.totalrecords);var y=d.datafields?d.datafields.length:0;if(0==y){var r=b[0],t=[];for(obj in r)t[t.length]={name:obj};d.datafields=t;d.generatedfields=d.datafields;y=t.length}for(t=r=v;t<e;t++){var C=b[t];if(void 0==C)break;
if(d.record&&""!=d.record&&(C=C[d.record],void 0==C))continue;var w=this.getid(d.id,C,t);"object"===typeof w&&(w=t);if(!this.recordids[w]){this.recordids[w]=C;for(var B={},D=0;D<y;D++){var z=d.datafields[D],f="";if(void 0!=z&&null!=z){if(z.map){if(c.isFunction(z.map))f=z.map(C);else if(f=z.map.split(g.mapChar),0<f.length){for(var E=C,h=0;h<f.length;h++)void 0!=E&&(E=E[f[h]]);f=E}else f=C[z.map];void 0!=f&&null!=f?f=this.getvaluebytype(f,z):void 0==f&&null!=f&&(f="")}""!=f||z.map||(f=C[z.name],void 0==
f&&null!=f&&(f=""),void 0!=z.value&&void 0!=f&&(h=f[z.value],void 0!=h&&(f=h)));f=this.getvaluebytype(f,z);void 0!=z.displayname?B[z.displayname]=f:B[z.name]=f;if("array"===z.type){var F=function(b){if(b)for(var e=0;e<b.length;e++){var f=b[e];if(f)for(var h=0;h<y;h++){var l=d.datafields[h],v="";if(void 0!=l&&null!=l){if(l.map){if(c.isFunction(l.map))v=l.map(f);else if(v=l.map.split(g.mapChar),0<v.length){for(var q=f,r=0;r<v.length;r++)void 0!=q&&(q=q[v[r]]);v=q}else v=f[l.map];void 0!=v&&null!=v?
v=this.getvaluebytype(v,l):void 0==v&&null!=v&&(v="")}""!=v||l.map||(v=f[l.name],void 0==v&&null!=v&&(v=""),void 0!=l.value&&void 0!=v&&(q=v[l.value],void 0!=q&&(v=q)));v=this.getvaluebytype(v,l);void 0!=l.displayname?f[l.displayname]=v:f[l.name]=v;"array"===l.type&&F.call(this,v)}}}};F.call(this,f)}}}if(0>=d.recordendindex||v<d.recordendindex)l[q+r]=Object(B),l[q+r].uid=w,this.originaldata[q+r]=Object(l[t]),r++}}this.cachedrecords=this.records=l}},loadxml:function(b,e,d){"string"==typeof b&&(e=c(c.parseXML(b)),
b=null);void 0==d.root&&(d.root="");void 0==d.record&&(d.record="");(b=c.jqx.browser.msie&&e?void 0!=e.xml?c(d.root+" "+d.record,c.parseXML(e.xml)):b||c(d.root+" "+d.record,e):b||c(d.root+" "+d.record,e))||(b=[]);e=b.length;if(0!=b.length){this.totalrecords=this.virtualmode?d.totalrecords||e:e;this.records=[];this.originaldata=[];var g=this.records,f=this.pageable?this.pagesize*this.pagenum:d.recordstartindex;this.recordids=[];d.loadallrecords&&(f=0,e=this.totalrecords);var h=0;this.virtualmode&&
(h=f=this.pageable?this.pagesize*this.pagenum:d.recordstartindex,f=0,e=this.totalrecords);var l=d.datafields?d.datafields.length:0;if(0==l){var v=b[0],q=[];for(obj in v)q[q.length]={name:obj};d.datafields=q;d.generatedfields=d.datafields;l=q.length}for(var y=f,v=f;v<e;v++){q=b[v];if(void 0==q)break;var r=this.getid(d.id,q,v);if(!this.recordids[r]){this.recordids[r]=q;var t={},C=!1;d.hierarchy&&d.hierarchy.root&&(C=!0);for(var w=0;w<l;w++){var B=d.datafields[w],z="";if(void 0!=B&&null!=B){if(B.map)if(c.isFunction(B.map))z=
B.map(q);else{var D=B.map.indexOf("[");if(0>D)if(z=c(B.map,q),1==z.length)z=z.text();else{for(var D=[],E=0;E<z.length;E++)D.push(c(z[E]).text());z=D;C&&0<D.length&&(z=D[0])}else z=B.map.substring(0,D-1),E=B.map.indexOf("]"),D=B.map.substring(D+1,E),z=c(z,q).attr(D),void 0==z&&(z=c(q).attr(D)),void 0==z&&(z="");""==z&&(z=c(q).attr(B.map),void 0==z&&(z=""))}if(""==z){z=c(B.name,q);if(1==z.length)z=z.text();else{D=[];for(E=0;E<z.length;E++)D.push(c(z[E]).text());z=D;C&&0<D.length&&(z=D[0])}""==z&&(z=
c(q).attr(B.name),void 0==z&&(z=""));""==z&&q.nodeName&&q.nodeName==B.name&&q.firstChild&&(z=c(q.firstChild).text())}z=this.getvaluebytype(z,B);void 0!=B.displayname?t[B.displayname]=z:t[B.name]=z}}if(0>=d.recordendindex||f<d.recordendindex)g[h+y]=c.extend({},t),g[h+y].uid=r,this.originaldata[h+y]=c.extend({},g[v]),y++}}if(d.hierarchy&&d.hierarchy.root)for(v=f;v<e;v++)q=b[v],f=g[v],0<c(q).parent().length?(r=this.getid(d.id,c(q).parents(d.hierarchy.record+":first")),f.parentuid=r):f.parentuid=null;
this.cachedrecords=this.records=g}},loadics:function(b,e){if(null!=b){var d=b.split(e.rowDelimiter||this.rowDelimiter||"\n"),c=d.length,g=b.split("\r");1==c&&1<g.length&&(d=g,c=d.length);this.records=[];this.originaldata=[];g=this.records;this.recordids=[];for(var f=function(b){var e=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z)?$/.exec(b);if(!e)throw Error("Invalid UNTIL value: "+b);return new Date(Date.UTC(e[1],e[2]-1,e[3],e[5]||0,e[6]||0,e[7]||0))},h=0;h<c;h++){var l=d[h];if("BEGIN:VEVENT"==
l)var v={};else 0<=l.indexOf("SUMMARY")?v.SUMMARY=l.substring(l.indexOf("SUMMARY")+8):0<=l.indexOf("LOCATION")?v.LOCATION=l.substring(l.indexOf("LOCATION")+9):0<=l.indexOf("DESCRIPTION")?v.DESCRIPTION=l.substring(l.indexOf("DESCRIPTION")+12):0<=l.indexOf("RRULE")?v.RRULE=l.substring(l.indexOf("RRULE")+6):0<=l.indexOf("EXDATE")?(l=l.substring(l.indexOf("EXDATE")+7),v.EXDATE=l):0<=l.indexOf("DTEND")?v.DTEND=f(l.substring(l.indexOf("DTEND")+6)):0<=l.indexOf("DTSTART")?v.DTSTART=f(l.substring(l.indexOf("DTSTART")+
8)):0<=l.indexOf("UID")?v.uid=v.UID=l.substring(l.indexOf("UID")+4):0<=l.indexOf("STATUS")?v.STATUS=l.substring(l.indexOf("STATUS")+7):"END:VEVENT"==l&&g.push(v)}this.cachedrecords=this.records=g}},loadtext:function(b,e){if(null!=b){var d=b.split(e.rowDelimiter||this.rowDelimiter||"\n"),g=d.length,f=b.split("\r");1==g&&1<f.length&&(d=f,g=d.length);this.totalrecords=this.virtualmode?e.totalrecords||g:g;this.records=[];this.originaldata=[];var f=this.records,h=this.pageable?this.pagesize*this.pagenum:
e.recordstartindex;this.recordids=[];e.loadallrecords&&(h=0,g=this.totalrecords);var l=0;this.virtualmode&&(l=h=this.pageable?this.pagesize*this.pagenum:e.recordstartindex,h=0,g=this.totalrecords);var v=e.datafields.length,q=e.columnDelimiter||this.columnDelimiter;for(q||(q="tab"===e.datatype||"tsv"===e.datatype?"\t":",");h<g;h++){var y=d[h],r=null;if(!this.recordids[r]){null==e.id&&(r=h,this.recordids[r]=y);for(var t={},C=d[h].split(q),w=0;w<v;w++)if(!(w>=C.length)){var z=e.datafields[w],B=C[w];
z.map&&c.isFunction(z.map)&&(B=z.map(y));z.type&&(B=this.getvaluebytype(B,z));t[z.map||z.name||w.toString()]=B;null!=e.id&&e.id===z.name&&(r=B,this.recordids[r]=y)}null==r&&(r=h);f[l+h]=c.extend({},t);f[l+h].uid=r;this.originaldata[l+h]=c.extend({},f[h])}}this.cachedrecords=this.records=f}},getvaluebytype:function(b,e){var d=b;if(null==b)return b;if(c.isArray(b)&&"array"!=e.type){for(d=0;d<b.length;d++)b[d]=this.getvaluebytype(b[d],e);return b}if("date"==e.type)if("NaN"==b)b="";else{if(b&&b instanceof
Date)return b;var g=new Date(b);if("string"==typeof b&&e.format){var f=c.jqx.dataFormat.parsedate(b,e.format);null!=f&&(g=f)}b="NaN"==g.toString()||"Invalid Date"==g.toString()?c.jqx.dataFormat?c.jqx.dataFormat.tryparsedate(b):g:g;null==b&&(b=d)}else if("float"==e.type||"number"==e.type||"decimal"==e.type)"NaN"==b?b="":(b=parseFloat(b),isNaN(b)&&(b=d));else if("int"==e.type||"integer"==e.type)b=parseInt(b),isNaN(b)&&(b=d);else if("bool"==e.type||"boolean"==e.type)null!=b&&void 0!=b.toLowerCase&&("false"==
b.toLowerCase()?b=!1:"true"==b.toLowerCase()&&(b=!0)),b=1==b?!0:0==b&&""!==b?!1:"";return b}};c.jqx.dataFormat={};c.extend(c.jqx.dataFormat,{regexTrim:/^\s+|\s+$/g,regexInfinity:/^[+-]?infinity$/i,regexHex:/^0x[a-f0-9]+$/i,regexParseFloat:/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/,toString:Object.prototype.toString,isBoolean:function(b){return"boolean"===typeof b},isObject:function(b){return b&&("object"===typeof b||c.isFunction(b))||!1},isDate:function(b){return b instanceof Date},arrayIndexOf:function(b,e){if(b.indexOf)return b.indexOf(e);
for(var d=0,c=b.length;d<c;d++)if(b[d]===e)return d;return-1},isString:function(b){return"string"===typeof b},isNumber:function(b){return"number"===typeof b&&isFinite(b)},isNull:function(b){return null===b},isUndefined:function(b){return"undefined"===typeof b},isValue:function(b){return this.isObject(b)||this.isString(b)||this.isNumber(b)||this.isBoolean(b)},isEmpty:function(b){if(!this.isString(b)&&this.isValue(b))return!1;if(!this.isValue(b))return!0;b=c.trim(b).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,
"");return""===b},startsWith:function(b,e){return 0===b.indexOf(e)},endsWith:function(b,e){return b.substr(b.length-e.length)===e},trim:function(b){return(b+"").replace(this.regexTrim,"")},isArray:function(b){return"[object Array]"===this.toString.call(b)},defaultcalendar:function(){return{"/":"/",":":":",firstDay:0,days:{names:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),namesAbbr:"Sun Mon Tue Wed Thu Fri Sat".split(" "),namesShort:"Su Mo Tu We Th Fr Sa".split(" ")},months:{names:"January February March April May June July August September October November December ".split(" "),
namesAbbr:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec ".split(" ")},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",d3:"MM-dd-yyyy",zone1:"yyyy-MM-ddTHH:mm:ss-HH:mm",
zone2:"yyyy-MM-ddTHH:mm:ss+HH:mm",custom:"yyyy-MM-ddTHH:mm:ss.fff",custom2:"yyyy-MM-dd HH:mm:ss.fff"},percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:","}},expandFormat:function(b,e){e=e||"F";var d;d=b.patterns;var c=e.length;if(1===c){d=d[e];if(!d)throw"Invalid date format string '"+e+"'.";e=d}else 2===c&&"%"===e.charAt(0)&&(e=e.charAt(1));return e},getEra:function(b,e){if(!e||"string"===typeof b)return 0;for(var d,c=b.getTime(),g=0,f=
e.length;g<f;g++)if(d=e[g].start,null===d||c>=d)return g;return 0},toUpper:function(b){return b.split("\u00a0").join(" ").toUpperCase()},toUpperArray:function(b){for(var e=[],d=0,c=b.length;d<c;d++)e[d]=this.toUpper(b[d]);return e},getEraYear:function(b,e,d,c){b=b.getFullYear();!c&&e.eras&&(b-=e.eras[d].offset);return b},toUpper:function(b){return b?b.toUpperCase():""},getDayIndex:function(b,e,d){var c=b.days,g=b._upperDays;g||(b._upperDays=g=[this.toUpperArray(c.names),this.toUpperArray(c.namesAbbr),
this.toUpperArray(c.namesShort)]);e=e.toUpperCase();d?(b=this.arrayIndexOf(g[1],e),-1===b&&(b=this.arrayIndexOf(g[2],e))):b=this.arrayIndexOf(g[0],e);return b},getMonthIndex:function(b,e,d){var c=b.months,g=b.monthsGenitive||b.months,f=b._upperMonths,h=b._upperMonthsGen;f||(b._upperMonths=f=[this.toUpperArray(c.names),this.toUpperArray(c.namesAbbr)],b._upperMonthsGen=h=[this.toUpperArray(g.names),this.toUpperArray(g.namesAbbr)]);e=this.toUpper(e);b=this.arrayIndexOf(d?f[1]:f[0],e);0>b&&(b=this.arrayIndexOf(d?
h[1]:h[0],e));return b},appendPreOrPostMatch:function(b,e){for(var d=0,c=!1,g=0,f=b.length;g<f;g++){var h=b.charAt(g);switch(h){case "'":c?e.push("'"):d++;c=!1;break;case "\\":c&&e.push("\\");c=!c;break;default:e.push(h),c=!1}}return d},getTokenRegExp:function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g},formatlink:function(b,e){var d="";e&&e.target&&(d="target="+e.target);return""!=d?"<a "+d+' href="'+b+'">'+b+"</a>":'<a href="'+b+'">'+b+"</a>"},
formatemail:function(b){return'<a href="mailto:'+b+'">'+b+"</a>"},formatNumber:function(b,e,d){return this.formatnumber(b,e,d)},formatnumber:function(b,e,d){if(void 0==d||null==d||""==d)d=this.defaultcalendar();if(""===e||null===e)return b;this.isNumber(b)||(b*=1);var c;1<e.length&&(c=parseInt(e.slice(1),10));var g,f,h,l=e.charAt(0).toUpperCase();e=d.thousandsseparator;g=d.decimalseparator;switch(l){case "D":case "d":case "F":case "f":break;case "N":case "n":c=0;break;case "C":case "c":"before"==
d.currencysymbolposition?f=d.currencysymbol:h=d.currencysymbol;break;case "P":case "p":h=d.percentsymbol;break;default:throw"Bad number format specifier: "+l;}if(this.isNumber(b)){d=0>b;g=g?g:".";if(this.isNumber(c)){var v=c;c=Math.pow(10,v);b=(b*c).toFixed(0)/c+"";c=b.lastIndexOf(".");if(0<v)for(0>c?(b+=g,c=b.length-1):"."!==g&&(b=b.replace(".",g));b.length-1-c<v;)b+="0"}else b+="",c=b.lastIndexOf("."),0<c&&void 0==v&&"."!==g&&(b=b.replace(".",g));if(e){c=b.lastIndexOf(g);c=-1<c?c:b.length;v=b.substring(c);
g=-1;for(l=c;0<l;l--)g++,0===g%3&&l!==c&&(!d||1<l)&&(v=e+v),v=b.charAt(l-1)+v;b=v}b=f?f+b:b;return h?b+h:b}return b},tryparsedate:function(b,e){if(void 0==e||null==e)e=this.defaultcalendar();if(""==b)return null;null==b||b.substring||(b=b.toString());if(null!=b&&"/Date("==b.substring(0,6)){var d=/^\/Date\((-?\d+)(\+|-)?(\d+)?\)\/$/,g=new Date(+b.replace(/\/Date\((\d+)\)\//,"$1"));if("Invalid Date"==g){var f=b.match(/^\/Date\((\d+)([-+]\d\d)(\d\d)\)\/$/),g=null;f&&(g=new Date(1*f[1]+36E5*f[2]+6E4*
f[3]))}if(null==g||"Invalid Date"==g||isNaN(g)){var h=d.exec(b);if(h){var l=new Date(parseInt(h[1]));h[2]&&(d=parseInt(h[3]),"-"===h[2]&&(d=-d),h=l.getUTCMinutes(),l.setUTCMinutes(h-d));if(!isNaN(l.valueOf()))return l}}return g}patterns=e.patterns;for(prop in patterns)if(g=this.parsedate(b,patterns[prop],e))return"ISO"==prop&&(d=this.parsedate(b,patterns.ISO2,e))?d:g;if(null!=b){for(var l=[":","/","-"],g=!0,v=0;v<l.length;v++)-1!=b.indexOf(l[v])&&(g=!1);if(g&&(g=new Number(b),!isNaN(g)))return new Date(g)}if("string"===
c.type(b)){b=this.trim(b);var q=[":","/","-"," ",","];b=b.replace(RegExp(", ","g"),",");var h="",y=b;0<=b.indexOf(":")?(h=b.substring(b.indexOf(":")-2),h=this.trim(h),y=b.substring(0,b.indexOf(":")-2)):0<=b.toUpperCase().indexOf("AM")?(h=b.substring(b.toUpperCase().indexOf("AM")-2),h=this.trim(h),y=b.substring(0,b.toUpperCase().indexOf("AM")-2)):0<=b.toUpperCase().indexOf("PM")&&(h=b.substring(b.toUpperCase().indexOf("PM")-2),h=this.trim(h),y=b.substring(0,b.toUpperCase().indexOf("PM")-2));g=new Date;
d=!1;if(y){for(f=0;f<q.length;f++)if(0<=y.indexOf(q[f])){l=y.split(q[f]);break}for(var q=[],y=[],r=[],t=null,C=null,f=0;f<l.length;f++){var v=l[f],w=this.parsedate(v,"d",e)||this.parsedate(v,"dd",e)||this.parsedate(v,"ddd",e)||this.parsedate(v,"dddd",e);if(w&&2>=v.length){t=f;q.push(w.getDate());break}}for(f=0;f<l.length;f++)if(v=l[f],(w=this.parsedate(v,"M",e)||this.parsedate(v,"MM",e)||this.parsedate(v,"MMM",e)||this.parsedate(v,"MMMM",e))&&(void 0==t||t!=f)&&(y.push(w.getMonth()),2<v.length)){C=
f;break}for(f=0;f<l.length;f++)v=l[f],v=this.parsedate(v,"yyyy",e),!v||void 0!=t&&t==f||void 0!=C&&C==f||r.push(v.getFullYear());v=[];for(t=0;t<q.length;t++)for(f=0;f<y.length;f++)for(C=0;C<r.length;C++)l=new Date(r[C],y[f],q[t]),1970>r[C]&&l.setFullYear(r[C]),NaN!=l.getTime()&&v.push(l);0<v.length&&(g=v[0],d=!0)}h&&(l=0<=h.indexOf(":")?h.split(":"):h,h=this.parsedate(h,"h:mm tt",e)||this.parsedate(h,"h:mm:ss tt",e)||this.parsedate(h,"HH:mm:ss.fff",e)||this.parsedate(h,"HH:mm:ss.ff",e)||this.parsedate(h,
"HH:mm:ss.tttt",e)||this.parsedate(h,"HH:mm:ss",e)||this.parsedate(h,"HH:mm",e)||this.parsedate(h,"HH",e),f=r=y=q=0,h&&NaN!=h.getTime()?(q=h.getHours(),y=h.getMinutes(),r=h.getSeconds(),f=h.getMilliseconds()):(1==l.length&&(q=parseInt(l[0])),2==l.length&&(q=parseInt(l[0]),y=parseInt(l[1])),3==l.length&&(q=parseInt(l[0]),y=parseInt(l[1]),0<=l[2].indexOf(".")?(r=parseInt(l[2].toString().split(".")[0]),f=parseInt(l[2].toString().split(".")[1])):r=parseInt(l[2])),4==l.length&&(q=parseInt(l[0]),y=parseInt(l[1]),
r=parseInt(l[2]),f=parseInt(l[3]))),!g||isNaN(q)||isNaN(y)||isNaN(r)||isNaN(f)||(g.setHours(q,y,r,f),d=!0));if(d)return g}return null},getparseregexp:function(b,e){var d=b._parseRegExp;if(d){var c=d[e];if(c)return c}else b._parseRegExp=d={};for(var c=this.expandFormat(b,e).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),g=["^"],f=[],h=0,l=0,v=this.getTokenRegExp(),q;null!==(q=v.exec(c));){var y=c.slice(h,q.index),h=v.lastIndex,l=l+this.appendPreOrPostMatch(y,g);if(l%2)g.push(q[0]);else{var y=
q[0],r=y.length;switch(y){case "dddd":case "ddd":case "MMMM":case "MMM":case "gg":case "g":y="(\\D+)";break;case "tt":case "t":y="(\\D*)";break;case "yyyy":case "fff":case "ff":case "f":y="(\\d{"+r+"})";break;case "dd":case "d":case "MM":case "M":case "yy":case "y":case "HH":case "H":case "hh":case "h":case "mm":case "m":case "ss":case "s":y="(\\d\\d?)";break;case "zzz":y="([+-]?\\d\\d?:\\d{2})";break;case "zz":case "z":y="([+-]?\\d\\d?)";break;case "/":y="(\\"+b["/"]+")";break;default:throw"Invalid date format pattern '"+
y+"'.";}y&&g.push(y);f.push(q[0])}}this.appendPreOrPostMatch(c.slice(h),g);g.push("$");c={regExp:g.join("").replace(/\s+/g,"\\s+"),groups:f};return d[e]=c},outOfRange:function(b,e,d){return b<e||b>d},expandYear:function(b,e){var d=new Date,c=this.getEra(d);if(100>e){var g=b.twoDigitYearMax,g="string"===typeof g?(new Date).getFullYear()%100+parseInt(g,10):g,d=this.getEraYear(d,b,c);e+=d-d%100;e>g&&(e-=100)}return e},parsedate:function(b,e,d){if(void 0==d||null==d)d=this.defaultcalendar();b=this.trim(b);
e=this.getparseregexp(d,e);var c=(new RegExp(e.regExp)).exec(b);if(null===c)return null;var g=e.groups,f=e=b=null,h=null,l=null,v=0,q,y=0,r=0,t=0;q=null;for(var C=!1,w=0,z=g.length;w<z;w++){var B=c[w+1];if(B){var D=g[w],E=D.length,A=parseInt(B,10);switch(D){case "dd":case "d":h=A;if(this.outOfRange(h,1,31))return null;break;case "MMM":case "MMMM":f=this.getMonthIndex(d,B,3===E);if(this.outOfRange(f,0,11))return null;break;case "M":case "MM":f=A-1;if(this.outOfRange(f,0,11))return null;break;case "y":case "yy":case "yyyy":e=
4>E?this.expandYear(d,A):A;if(this.outOfRange(e,0,9999))return null;break;case "h":case "hh":v=A;12===v&&(v=0);if(this.outOfRange(v,0,11))return null;break;case "H":case "HH":v=A;if(this.outOfRange(v,0,23))return null;break;case "m":case "mm":y=A;if(this.outOfRange(y,0,59))return null;break;case "s":case "ss":r=A;if(this.outOfRange(r,0,59))return null;break;case "tt":case "t":C=d.PM&&(B===d.PM[0]||B===d.PM[1]||B===d.PM[2]);if(!C&&(!d.AM||B!==d.AM[0]&&B!==d.AM[1]&&B!==d.AM[2]))return null;break;case "f":case "ff":case "fff":t=
A*Math.pow(10,3-E);if(this.outOfRange(t,0,999))return null;break;case "ddd":case "dddd":l=this.getDayIndex(d,B,3===E);if(this.outOfRange(l,0,6))return null;break;case "zzz":D=B.split(/:/);if(2!==D.length)return null;q=parseInt(D[0],10);if(this.outOfRange(q,-12,13))return null;D=parseInt(D[1],10);if(this.outOfRange(D,0,59))return null;q=60*q+(this.startsWith(B,"-")?-D:D);break;case "z":case "zz":q=A;if(this.outOfRange(q,-12,13))return null;q*=60;break;case "g":case "gg":if(!B||!d.eras)return null;
B=trim(B.toLowerCase());D=0;for(E=d.eras.length;D<E;D++)if(B===d.eras[D].name.toLowerCase()){b=D;break}if(null===b)return null}}}c=new Date;w=d.convert;g=c.getFullYear();null===e?e=g:d.eras&&(e+=d.eras[b||0].offset);null===f&&(f=0);null===h&&(h=1);if(w){if(c=w.toGregorian(e,f,h),null===c)return null}else if(c.setFullYear(e,f,h),c.getDate()!==h||null!==l&&c.getDay()!==l)return null;C&&12>v&&(v+=12);c.setHours(v,y,r,t);null!==q&&(d=c.getMinutes()-(q+c.getTimezoneOffset()),c.setHours(c.getHours()+parseInt(d/
60,10),d%60));return c},cleardatescache:function(){this.datescache=[]},formatDate:function(b,e,d){return this.formatdate(b,e,d)},formatdate:function(b,e,d){function c(b,e){var d;d=b+"";return 1<e&&d.length<e?(d=y[e-2]+d,d.substr(d.length-e,e)):d}function g(b,e){if(C)return C[e];if(void 0!=b.getMonth)switch(e){case 0:return b.getFullYear();case 1:return b.getMonth();case 2:return b.getDate()}}if(void 0==d||null==d)d=this.defaultcalendar();if("string"===typeof b)return b;var f=b.toString()+"_"+e;if(this.datescache&&
this.datescache[f]&&-1==e.indexOf("f"))return this.datescache[f];if(!e||!e.length||"i"===e){var h;return h=this.formatDate(b,d.patterns.F,d)}var l=d.eras,v="s"===e;e=this.expandFormat(d,e);h=[];for(var q,y=["0","00","000"],r=0,t=this.getTokenRegExp(),C;;){q=t.lastIndex;var w=t.exec(e);q=e.slice(q,w?w.index:e.length);r+=this.appendPreOrPostMatch(q,h);if(!w)break;if(r%2)h.push(w[0]);else switch(q=w[0],w=q.length,q){case "ddd":case "dddd":h.push((3===w?d.days.namesAbbr:d.days.names)[b.getDay()]);break;
case "d":case "dd":h.push(c(g(b,2),w));break;case "MMM":case "MMMM":q=g(b,1);h.push(d.months[3===w?"namesAbbr":"names"][q]);break;case "M":case "MM":h.push(c(g(b,1)+1,w));break;case "y":case "yy":case "yyyy":q=this.getEraYear(b,d,this.getEra(b,l),v);4>w&&(q%=100);h.push(c(q,w));break;case "h":case "hh":q=b.getHours()%12;0===q&&(q=12);h.push(c(q,w));break;case "H":case "HH":h.push(c(b.getHours(),w));break;case "m":case "mm":h.push(c(b.getMinutes(),w));break;case "s":case "ss":h.push(c(b.getSeconds(),
w));break;case "t":case "tt":q=12>b.getHours()?d.AM?d.AM[0]:" ":d.PM?d.PM[0]:" ";h.push(1===w?q.charAt(0):q);break;case "f":case "ff":case "fff":h.push(c(b.getMilliseconds(),3).substr(0,w));break;case "z":case "zz":q=b.getTimezoneOffset()/60;h.push((0>=q?"+":"-")+c(Math.floor(Math.abs(q)),w));break;case "zzz":q=b.getTimezoneOffset()/60;h.push((0>=q?"+":"-")+c(Math.floor(Math.abs(q)),2)+":"+c(Math.abs(b.getTimezoneOffset()%60),2));break;case "g":case "gg":d.eras&&h.push(d.eras[this.getEra(b,l)].name);
break;case "/":h.push(d["/"]);break;default:throw"Invalid date format pattern '"+q+"'.";}}b=h.join("");this.datescache||(this.datescache=[]);return this.datescache[f]=b}});c.jqx.data={};var f,h,l=/#.*$/,q=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,r=/^(?:GET|HEAD)$/,t=/^\/\//,w=/\?/,z=/([?&])_=[^&]*/,B=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,v=/\s+/,y={},C={};try{h=location.href}catch(J){h=document.createElement("a"),h.href="",h=h.href}f=B.exec(h.toLowerCase())||[];c.extend(c.jqx.data,{ajaxSetup:function(b,
d){d?e(b,c.jqx.data.ajaxSettings):(d=b,b=c.jqx.data.ajaxSettings);e(b,d);return b},ajaxSettings:{url:h,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(f[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},
converters:{"* text":window.String,"text html":!0,"text json":c.parseJSON,"text xml":c.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:b(y),ajaxTransport:b(C),ajax:function(b,e){function g(b,e,d,f){var l,v,q,y,r=e;if(2!==A){A=2;G&&clearTimeout(G);F=void 0;D=f||"";R.readyState=0<b?4:0;if(d){y=L;f=R;var t,C,w,B,z=y.contents,E=y.dataTypes,H=y.responseFields;for(C in H)C in d&&(f[H[C]]=d[C]);for(;"*"===E[0];)E.shift(),void 0===t&&(t=y.mimeType||f.getResponseHeader("content-type"));if(t)for(C in z)if(z[C]&&
z[C].test(t)){E.unshift(C);break}if(E[0]in d)w=E[0];else{for(C in d){if(!E[0]||y.converters[C+" "+E[0]]){w=C;break}B||(B=C)}w=w||B}w?(w!==E[0]&&E.unshift(w),y=d[w]):y=void 0}if(200<=b&&300>b||304===b)if(L.ifModified&&((d=R.getResponseHeader("Last-Modified"))&&(c.lastModified[h]=d),(d=R.getResponseHeader("Etag"))&&(c.etag[h]=d)),304===b)r="notmodified",l=!0;else{a:{v=L;q=y;var J,O,r=v.dataTypes.slice();t=r[0];C={};w=0;v.dataFilter&&(q=v.dataFilter(q,v.dataType));if(r[1])for(J in v.converters)C[J.toLowerCase()]=
v.converters[J];for(;d=r[++w];)if("*"!==d){if("*"!==t&&t!==d){J=C[t+" "+d]||C["* "+d];if(!J)for(O in C)if(l=O.split(" "),l[1]===d&&(J=C[t+" "+l[0]]||C["* "+l[0]])){!0===J?J=C[O]:!0!==C[O]&&(d=l[0],r.splice(w--,0,d));break}if(!0!==J)if(J&&v["throws"])q=J(q);else try{q=J(q)}catch(P){l={state:"parsererror",error:J?P:"No conversion from "+t+" to "+d};break a}}t=d}l={state:"success",data:q}}r=l.state;v=l.data;q=l.error;l=!q}else if(q=r,!r||b)r="error",0>b&&(b=0);R.status=b;R.statusText=(e||r)+"";l?Z.resolveWith(V,
[v,r,R]):Z.rejectWith(V,[R,r,q]);R.statusCode(ea);ea=void 0;M&&ja.trigger("ajax"+(l?"Success":"Error"),[R,L,l?v:q]);ca.fireWith(V,[R,r]);M&&(ja.trigger("ajaxComplete",[R,L]),--c.active||c.event.trigger("ajaxStop"))}}"object"===typeof b&&(e=b,b=void 0);e=e||{};var h,D,E,F,G,H,M,P,L=c.jqx.data.ajaxSetup({},e),V=L.context||L,ja=V!==L&&(V.nodeType||V instanceof c)?c(V):c.event,Z=c.Deferred(),ca=c.Callbacks("once memory"),ea=L.statusCode||{},fa={},ka={},A=0,aa="canceled",R={readyState:0,setRequestHeader:function(b,
e){if(!A){var d=b.toLowerCase();b=ka[d]=ka[d]||b;fa[b]=e}return this},getAllResponseHeaders:function(){return 2===A?D:null},getResponseHeader:function(b){var e;if(2===A){if(!E)for(E={};e=q.exec(D);)E[e[1].toLowerCase()]=e[2];e=E[b.toLowerCase()]}return void 0===e?null:e},overrideMimeType:function(b){A||(L.mimeType=b);return this},abort:function(b){b=b||aa;F&&F.abort(b);g(0,b);return this}};Z.promise(R);R.success=R.done;R.error=R.fail;R.complete=ca.add;R.statusCode=function(b){if(b){var e;if(2>A)for(e in b)ea[e]=
[ea[e],b[e]];else e=b[R.status],R.always(e)}return this};L.url=((b||L.url)+"").replace(l,"").replace(t,f[1]+"//");L.dataTypes=c.trim(L.dataType||"*").toLowerCase().split(v);null==L.crossDomain&&(H=B.exec(L.url.toLowerCase()),L.crossDomain=!(!H||H[1]===f[1]&&H[2]===f[2]&&(H[3]||("http:"===H[1]?80:443))==(f[3]||("http:"===f[1]?80:443))));L.data&&L.processData&&"string"!==typeof L.data&&(L.data=c.param(L.data,L.traditional));d(y,L,e,R);if(2===A)return R;M=L.global;L.type=L.type.toUpperCase();L.hasContent=
!r.test(L.type);M&&0===c.active++&&c.event.trigger("ajaxStart");if(!L.hasContent&&(L.data&&(L.url+=(w.test(L.url)?"&":"?")+L.data,delete L.data),h=L.url,!1===L.cache)){H=(new Date).getTime();var ia=L.url.replace(z,"$1_="+H);L.url=ia+(ia===L.url?(w.test(L.url)?"&":"?")+"_="+H:"")}(L.data&&L.hasContent&&!1!==L.contentType||e.contentType)&&R.setRequestHeader("Content-Type",L.contentType);L.ifModified&&(h=h||L.url,c.lastModified[h]&&R.setRequestHeader("If-Modified-Since",c.lastModified[h]),c.etag[h]&&
R.setRequestHeader("If-None-Match",c.etag[h]));R.setRequestHeader("Accept",L.dataTypes[0]&&L.accepts[L.dataTypes[0]]?L.accepts[L.dataTypes[0]]+("*"!==L.dataTypes[0]?", */*; q=0.01":""):L.accepts["*"]);for(P in L.headers)R.setRequestHeader(P,L.headers[P]);if(L.beforeSend&&(!1===L.beforeSend.call(V,R,L)||2===A))return R.abort();aa="abort";for(P in{success:1,error:1,complete:1})R[P](L[P]);if(F=d(C,L,e,R)){R.readyState=1;M&&ja.trigger("ajaxSend",[R,L]);L.async&&0<L.timeout&&(G=setTimeout(function(){R.abort("timeout")},
L.timeout));try{A=1,F.send(fa,g)}catch(Y){if(2>A)g(-1,Y);else throw Y;}}else g(-1,"No Transport");return R},active:0,lastModified:{},etag:{}});var D=[],E=/\?/,F=/(=)\?(?=&|$)|\?\?/,G=(new Date).getTime();c.jqx.data.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var b=D.pop()||c.expando+"_"+G++;this[b]=!0;return b}});c.jqx.data.ajaxPrefilter("json jsonp",function(b,e,d){var g,f,h,l=b.data,v=b.url,q=!1!==b.jsonp,y=q&&F.test(v),r=q&&!y&&"string"===typeof l&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&
F.test(l);if("jsonp"===b.dataTypes[0]||y||r)return g=b.jsonpCallback=c.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,f=window[g],y?b.url=v.replace(F,"$1"+g):r?b.data=l.replace(F,"$1"+g):q&&(b.url+=(E.test(v)?"&":"?")+b.jsonp+"="+g),b.converters["script json"]=function(){h||c.error(g+" was not called");return h[0]},b.dataTypes[0]="json",window[g]=function(){h=arguments},d.always(function(){window[g]=f;b[g]&&(b.jsonpCallback=e.jsonpCallback,D.push(g));h&&c.isFunction(f)&&f(h[0]);h=f=
void 0}),"script"});c.jqx.data.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(b){c.globalEval(b);return b}}});c.jqx.data.ajaxPrefilter("script",function(b){void 0===b.cache&&(b.cache=!1);b.crossDomain&&(b.type="GET",b.global=!1)});c.jqx.data.ajaxTransport("script",function(b){if(b.crossDomain){var e,d=document.head||document.getElementsByTagName("head")[0]||
document.documentElement;return{send:function(c,g){e=document.createElement("script");e.async="async";b.scriptCharset&&(e.charset=b.scriptCharset);e.src=b.url;e.onload=e.onreadystatechange=function(b,c){if(c||!e.readyState||/loaded|complete/.test(e.readyState))e.onload=e.onreadystatechange=null,d&&e.parentNode&&d.removeChild(e),e=void 0,c||g(200,"success")};d.insertBefore(e,d.firstChild)},abort:function(){if(e)e.onload(0,1)}}}});var H,M=window.ActiveXObject?function(){for(var b in H)H[b](0,1)}:!1,
P=0;c.jqx.data.ajaxSettings.xhr=window.ActiveXObject?function(){var b;if(!(b=!this.isLocal&&g()))a:{try{b=new window.ActiveXObject("Microsoft.XMLHTTP");break a}catch(e){}b=void 0}return b}:g;(function(b){c.extend(c.support,{ajax:!!b,cors:!!b&&"withCredentials"in b})})(c.jqx.data.ajaxSettings.xhr());c.support||(c.support={ajax:!0});c.support.ajax&&c.jqx.data.ajaxTransport(function(b){if(!b.crossDomain||c.support.cors){var e;return{send:function(d,g){var f,h,l=b.xhr();b.username?l.open(b.type,b.url,
b.async,b.username,b.password):l.open(b.type,b.url,b.async);if(b.xhrFields)for(h in b.xhrFields)l[h]=b.xhrFields[h];b.mimeType&&l.overrideMimeType&&l.overrideMimeType(b.mimeType);b.crossDomain||d["X-Requested-With"]||(d["X-Requested-With"]="XMLHttpRequest");try{for(h in d)l.setRequestHeader(h,d[h])}catch(v){}l.send(b.hasContent&&b.data||null);e=function(d,c){var h,v,q,y,r;try{if(e&&(c||4===l.readyState))if(e=void 0,f&&(l.onreadystatechange=function(){},M&&delete H[f]),c)4!==l.readyState&&l.abort();
else{h=l.status;q=l.getAllResponseHeaders();y={};(r=l.responseXML)&&r.documentElement&&(y.xml=r);try{y.text=l.responseText}catch(t){}try{v=l.statusText}catch(t){v=""}h||!b.isLocal||b.crossDomain?1223===h&&(h=204):h=y.text?200:404}}catch(t){c||g(-1,t)}y&&g(h,v,y,q)};b.async?4===l.readyState?setTimeout(e,0):(f=++P,M&&(H||(H={},c(window).unload(M)),H[f]=e),l.onreadystatechange=e):e()},abort:function(){e&&e(0,1)}}}});c.jqx.filter=function(){this.operator="and";var b="EMPTY NOT_EMPTY CONTAINS CONTAINS_CASE_SENSITIVE DOES_NOT_CONTAIN DOES_NOT_CONTAIN_CASE_SENSITIVE STARTS_WITH STARTS_WITH_CASE_SENSITIVE ENDS_WITH ENDS_WITH_CASE_SENSITIVE EQUAL EQUAL_CASE_SENSITIVE NULL NOT_NULL".split(" "),
e="EQUAL NOT_EQUAL LESS_THAN LESS_THAN_OR_EQUAL GREATER_THAN GREATER_THAN_OR_EQUAL NULL NOT_NULL".split(" "),d="EQUAL NOT_EQUAL LESS_THAN LESS_THAN_OR_EQUAL GREATER_THAN GREATER_THAN_OR_EQUAL NULL NOT_NULL".split(" "),g=["EQUAL","NOT_EQUAL"],f=[],h=[];this.evaluate=function(b){for(var e=!0,d=0;d<f.length;d++)var c=f[d].evaluate(b),e=0==d?c:1==h[d]||"or"==h[d]?e||c:e&&c;return e};this.getfilterscount=function(){return f.length};this.setoperatorsbyfiltertype=function(c,f){switch(c){case "numericfilter":e=
f;break;case "stringfilter":b=f;break;case "datefilter":d=f;break;case "booleanfilter":g=f}};this.getoperatorsbyfiltertype=function(c){var f=[];switch(c){case "numericfilter":f=e.slice(0);break;case "stringfilter":f=b.slice(0);break;case "datefilter":f=d.slice(0);break;case "booleanfilter":f=g.slice(0)}return f};var l=function(){var b=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return b()+"-"+b()+"-"+b()};this.createfilter=function(b,e,d,c,g,f){if(null==b||void 0==b)return null;
switch(b){case "numericfilter":return new y(e,d.toUpperCase());case "stringfilter":return new v(e,d.toUpperCase());case "datefilter":return new r(e,d.toUpperCase(),g,f);case "booleanfilter":return new q(e,d.toUpperCase());case "custom":return new t(e,d.toUpperCase(),c)}throw Error("jqxGrid: There is no such filter type. The available filter types are: 'numericfilter', 'stringfilter', 'datefilter' and 'booleanfilter'");};this.getfilters=function(){for(var b=[],e=0;e<f.length;e++){var d={value:f[e].filtervalue,
condition:f[e].comparisonoperator,operator:h[e],type:f[e].type};f[e].data&&(d.id=f[e].data);b[e]=d}return b};this.addfilter=function(b,e){f[f.length]=e;e.key=l();h[h.length]=b};this.removefilter=function(b){for(var e=0;e<f.length;e++)if(f[e].key==b.key){f.splice(e,1);h.splice(e,1);break}};this.getoperatorat=function(b){return void 0==b||null==b||0>b||b>f.length?null:h[b]};this.setoperatorat=function(b,e){if(void 0==b||null==b||0>b||b>f.length)return null;h[e]=e};this.getfilterat=function(b){return void 0==
b||null==b||0>b||b>f.length?null:f[b]};this.setfilterat=function(b,e){if(void 0==b||null==b||0>b||b>f.length)return null;e.key=l();f[b]=e};this.clear=function(){f=[];h=[]};var v=function(b,e){this.filtervalue=b;this.comparisonoperator=e;this.type="stringfilter";this.evaluate=function(b){var e=this.filtervalue,d=this.comparisonoperator;if(null==b||void 0==b||""==b){if("NULL"==d||"EQUAL"==d&&b==e||"NOT_EQUAL"==d&&b!=e)return!0;if("EMPTY"!=d)return!1;if(""==b)return!0}var g="";try{g=b.toString()}catch(f){return!0}var h=
function(b,e){switch(d){case "EQUAL":return c.jqx.string.equalsIgnoreCase(b,e);case "EQUAL_CASE_SENSITIVE":return c.jqx.string.equals(b,e);case "NOT_EQUAL":return!c.jqx.string.equalsIgnoreCase(b,e);case "NOT_EQUAL_CASE_SENSITIVE":return!c.jqx.string.equals(b,e);case "CONTAINS":return c.jqx.string.containsIgnoreCase(b,e);case "CONTAINS_CASE_SENSITIVE":return c.jqx.string.contains(b,e);case "DOES_NOT_CONTAIN":return!c.jqx.string.containsIgnoreCase(b,e);case "DOES_NOT_CONTAIN_CASE_SENSITIVE":return!c.jqx.string.contains(b,
e);case "EMPTY":return""==b;case "NOT_EMPTY":return""!=b;case "NOT_NULL":return null!=b;case "STARTS_WITH":return c.jqx.string.startsWithIgnoreCase(b,e);case "ENDS_WITH":return c.jqx.string.endsWithIgnoreCase(b,e);case "ENDS_WITH_CASE_SENSITIVE":return c.jqx.string.endsWith(b,e);case "STARTS_WITH_CASE_SENSITIVE":return c.jqx.string.startsWith(b,e);default:return!1}},l=[];if(e&&e.indexOf&&(0<=e.indexOf("|")||0<=e.indexOf(" AND ")||0<=e.indexOf(" OR ")||0<=e.indexOf(" and ")||0<=e.indexOf(" or "))){if(b=
h(g,e))return b;var v=0<=e.indexOf(" AND ")?e.split(" AND "):[];b=0<=e.indexOf(" OR ")?e.split(" OR "):[];var q=0<=e.indexOf(" and ")?e.split(" and "):[],y=0<=e.indexOf(" or ")?e.split(" or "):[],r=0<=e.indexOf("|")?e.split("|"):[];if(0<r.length)for(var t=0;t<r.length;t++)r[t]=c.trim(r[t]);e=0<=e.indexOf(" ")?e.split(" "):[];if(0<e.length)for(t=0;t<e.length;t++)e[t]=c.trim(e[t]);v=v.concat(e);v=v.concat(q);b=b.concat(r);b=b.concat(y);if(0<v.length)for(t=0;t<v.length;t++)0<=!v[t].indexOf(" OR ")&&
l.push(v[t]);if(0<b.length)for(t=0;t<b.length;t++)0<=!b[t].indexOf(" AND ")&&l.push(b[t]);e=void 0;for(q=0;q<l.length;q++)b=l[q],b=h(g,b),y=q<v.length?"and":"or",e=void 0==e?b:"or"==y?e||b:e&&b;return e}return h(g,e)}},q=function(b,e){this.filtervalue=b;this.comparisonoperator=e;this.type="booleanfilter";this.evaluate=function(b){var e=this.filtervalue,d=this.comparisonoperator;if(null==b||void 0==b)return"NULL"==d?!0:!1;switch(d){case "EQUAL":return b==e||b.toString()==e.toString();case "NOT_EQUAL":return b!=
e&&b.toString()!=e.toString();default:return!1}}},y=function(b,e){this.filtervalue=b;this.comparisonoperator=e;this.type="numericfilter";this.evaluate=function(b){var e=this.filtervalue,d=this.comparisonoperator;if(null===b||void 0===b||""===b){if("NOT_NULL"==d)return!1;if("NULL"==d)return!0;switch(d){case "EQUAL":return b==e;case "NOT_EQUAL":return b!=e}return!1}if("NULL"==d)return!1;if("NOT_NULL"==d)return!0;var g=b;try{g=parseFloat(g)}catch(f){if(""!=b.toString())return!1}var h=function(b,e){switch(d){case "EQUAL":return b==
e;case "NOT_EQUAL":return b!=e;case "GREATER_THAN":return b>e;case "GREATER_THAN_OR_EQUAL":return b>=e;case "LESS_THAN":return b<e;case "LESS_THAN_OR_EQUAL":return b<=e;case "STARTS_WITH":return c.jqx.string.startsWithIgnoreCase(b.toString(),e.toString());case "ENDS_WITH":return c.jqx.string.endsWithIgnoreCase(b.toString(),e.toString());case "ENDS_WITH_CASE_SENSITIVE":return c.jqx.string.endsWith(b.toString(),e.toString());case "STARTS_WITH_CASE_SENSITIVE":return c.jqx.string.startsWith(b.toString(),
e.toString());case "CONTAINS":return c.jqx.string.containsIgnoreCase(b.toString(),e.toString());case "CONTAINS_CASE_SENSITIVE":return c.jqx.string.contains(b.toString(),e.toString());case "DOES_NOT_CONTAIN":return!c.jqx.string.containsIgnoreCase(b.toString(),e.toString());case "DOES_NOT_CONTAIN_CASE_SENSITIVE":return!c.jqx.string.contains(b.toString(),e.toString());default:return!0}},l=[];if(e&&e.indexOf&&(0<=e.indexOf("|")||0<=e.indexOf(" AND ")||0<=e.indexOf(" OR ")||0<=e.indexOf(" and ")||0<=e.indexOf(" or "))){var v=
h(g,e);if(v)return v;var e=e.toString(),q=0<=e.indexOf(" AND ")?e.split(" AND "):[],y=0<=e.indexOf(" OR ")?e.split(" OR "):[];b=0<=e.indexOf(" and ")?e.split(" and "):[];var r=0<=e.indexOf(" or ")?e.split(" or "):[],q=q.concat(b),y=y.concat(r),e=0<=e.indexOf("|")?e.split("|"):[];if(0<e.length)for(b=0;b<e.length;b++)e[b]=c.trim(e[b]);y=y.concat(e);if(0<q.length)for(b=0;b<q.length;b++)0<=!q[b].indexOf(" OR ")&&l.push(q[b]);if(0<y.length)for(b=0;b<y.length;b++)0<=!y[b].indexOf(" AND ")&&l.push(y[b]);
y=void 0;for(e=0;e<l.length;e++)(b=l[e])&&b.indexOf&&0<=b.indexOf("..")?(b=b.toString().split(".."),2==b.length&&(v=g>=b[0]&&g<=b[1])):v=h(g,b),b=e<q.length?"and":"or",y=void 0==y?v:"or"==b?y||v:y&&v;return y}return e&&e.indexOf&&0<=e.indexOf("..")&&(l=e.toString().split(".."),2==l.length)?g>=l[0]&&g<=l[1]:h(g,e)}},r=function(b,e,d,g){this.filtervalue=b;this.type="datefilter";var f=this;if(void 0!=d&&void 0!=g){var h=c.jqx.dataFormat.parsedate(b,d,g);null!=h?this.filterdate=h:(h=c.jqx.dataFormat.tryparsedate(b,
g),null!=h&&(this.filterdate=h))}else h=new Date(b),this.filterdate="NaN"==h.toString()||"Invalid Date"==h.toString()?c.jqx.dataFormat.tryparsedate(b):h;this.filterdate||(h=new Date(b),this.filterdate="NaN"==h.toString()||"Invalid Date"==h.toString()?c.jqx.dataFormat.tryparsedate(b):h);this.comparisonoperator=e;this.evaluate=function(b){var e=this.filtervalue,h=this.comparisonoperator;if(null==b||void 0==b||""==b){if("NOT_NULL"==h)return!1;if("NULL"==h)return!0;switch(h){case "EQUAL":return b==e;
case "NOT_EQUAL":return b!=e}return!1}if("NULL"==h)return!1;if("NOT_NULL"==h)return!0;var l=new Date;l.setFullYear(1900,0,1);l.setHours(12,0,0,0);try{var v=new Date(b),l=b="NaN"==v.toString()||"Invalid Date"==v.toString()?c.jqx.dataFormat.tryparsedate(b):v,q=!1;if(void 0!=d&&void 0!=g&&(0<=d.indexOf("t")||0<=d.indexOf("T")||0<=d.indexOf(":")||0<=d.indexOf("f"))&&(q=!0,e&&-1==e.toString().indexOf(":"))){var y=c.jqx.dataFormat.tryparsedate(e.toString()+":00",g);null!=y&&(f.filterdate=y)}q||(l.setHours(0),
l.setMinutes(0),l.setSeconds(0))}catch(r){if(""!=b.toString())return!1}if(null!=f.filterdate)e=f.filterdate;else if(e&&e.indexOf&&(-1!=e.indexOf(":")||!isNaN(parseInt(e)))){y=new Date(l);y.setHours(12,0,0,0);v=e.split(":");for(e=0;e<v.length;e++)0==e&&y.setHours(v[e]),1==e&&y.setMinutes(v[e]),2==e&&y.setSeconds(v[e]);e=y}q&&e&&e.setFullYear&&l&&l.getFullYear&&-1==d.indexOf("d")&&-1==d.indexOf("M")&&-1==d.indexOf("y")&&e.setFullYear(l.getFullYear(),l.getMonth(),l.getDate());q=function(b,e){null==b&&
(b="");switch(h){case "EQUAL":return b.toString()==e.toString();case "NOT_EQUAL":return b.toString()!=e.toString();case "GREATER_THAN":return b>e;case "GREATER_THAN_OR_EQUAL":return b>=e;case "LESS_THAN":return b<e;case "LESS_THAN_OR_EQUAL":return b<=e;case "STARTS_WITH":return c.jqx.string.startsWithIgnoreCase(b.toString(),e.toString());case "ENDS_WITH":return c.jqx.string.endsWithIgnoreCase(b.toString(),e.toString());case "ENDS_WITH_CASE_SENSITIVE":return c.jqx.string.endsWith(b.toString(),e.toString());
case "STARTS_WITH_CASE_SENSITIVE":return c.jqx.string.startsWith(b.toString(),e.toString());case "CONTAINS":return c.jqx.string.containsIgnoreCase(b.toString(),e.toString());case "CONTAINS_CASE_SENSITIVE":return c.jqx.string.contains(b.toString(),e.toString());case "DOES_NOT_CONTAIN":return!c.jqx.string.containsIgnoreCase(b.toString(),e.toString());case "DOES_NOT_CONTAIN_CASE_SENSITIVE":return!c.jqx.string.contains(b.toString(),e.toString());default:return!0}};v=[];if(e&&e.indexOf&&(0<=e.indexOf("|")||
0<=e.indexOf(" AND ")||0<=e.indexOf(" OR ")||0<=e.indexOf(" and ")||0<=e.indexOf(" or "))){if(y=q(l,e))return y;var t=0<=e.indexOf(" AND ")?e.split(" AND "):[];b=0<=e.indexOf(" OR ")?e.split(" OR "):[];var C=0<=e.indexOf(" and ")?e.split(" and "):[],w=0<=e.indexOf(" or ")?e.split(" or "):[],t=t.concat(C);b=b.concat(w);C=0<=e.indexOf("|")?e.split("|"):[];if(0<C.length)for(e=0;e<C.length;e++)C[e]=c.trim(C[e]);b=b.concat(C);if(0<t.length)for(e=0;e<t.length;e++)0<=!t[e].indexOf(" OR ")&&v.push(t[e]);
if(0<b.length)for(e=0;e<b.length;e++)0<=!b[e].indexOf(" AND ")&&v.push(b[e]);e=void 0;for(C=0;C<v.length;C++)(b=v[C])&&b.indexOf&&0<=b.indexOf("..")?(b=b.toString().split(".."),2==b.length&&(y=l>=b[0]&&l<=b[1])):y=q(l,b),b=C<t.length?"and":"or",e=void 0==e?y:"or"==b?e||y:e&&y;return e}return e&&e.indexOf&&0<=e.indexOf("..")&&(v=e.toString().split(".."),2==v.length)?l>=v[0]&&l<=v[1]:q(l,e)}},t=function(b,e,d){this.filtervalue=b;this.comparisonoperator=e;this.evaluate=function(b,e){return d(this.filtervalue,
b,this.comparisonoperator)}}}})(jqxBaseFramework);
(function(c){c.jqx.cssroundedcorners=function(b){var d={all:"jqx-rc-all",top:"jqx-rc-t",bottom:"jqx-rc-b",left:"jqx-rc-l",right:"jqx-rc-r","top-right":"jqx-rc-tr","top-left":"jqx-rc-tl","bottom-right":"jqx-rc-br","bottom-left":"jqx-rc-bl"};for(prop in d)if(d.hasOwnProperty(prop)&&b==prop)return d[prop]};c.jqx.jqxWidget("jqxButton","",{});c.extend(c.jqx._jqxButton.prototype,{defineInstance:function(){var b={type:"",cursor:"arrow",roundedCorners:"all",disabled:!1,height:null,width:null,overrideTheme:!1,
enableHover:!0,enableDefault:!0,enablePressed:!0,imgPosition:"center",imgSrc:"",imgWidth:16,imgHeight:16,value:null,textPosition:"",textImageRelation:"overlay",rtl:!1,_ariaDisabled:!1,_scrollAreaButton:!1,template:"default",aria:{"aria-disabled":{name:"disabled",type:"boolean"}}};if(this===c.jqx._jqxButton.prototype)return b;c.extend(!0,this,b);return b},_addImage:function(b){if("input"==this.element.nodeName.toLowerCase()||"button"==this.element.nodeName.toLowerCase()||"div"==this.element.nodeName.toLowerCase()){if(this._img)this._img.setAttribute("src",
this.imgSrc),this._img.setAttribute("width",this.imgWidth),this._img.setAttribute("height",this.imgHeight),this._text.innerHTML=this.value;else{this.field=this.element;this.field.className&&(this._className=this.field.className);var d=this.field.title,e=null;this.field.getAttribute("value")?e=this.field.getAttribute("value"):"input"!=this.element.nodeName.toLowerCase()&&(e=this.element.innerHTML);this.value&&(e=this.value);b=this.field.id.length?this.field.id.replace(/[^\w]/g,"_")+"_"+b:c.jqx.utilities.createId()+
"_"+b;var g=document.createElement("div");g.id=b;g.title=d;g.style.cssText=this.field.style.cssText;g.style.boxSizing="border-box";d=document.createElement("img");d.setAttribute("src",this.imgSrc);d.setAttribute("width",this.imgWidth);d.setAttribute("height",this.imgHeight);g.appendChild(d);this._img=d;d=document.createElement("span");e&&(this.value=d.innerHTML=e);g.appendChild(d);this._text=d;this.field.style.display="none";this.field.parentNode&&this.field.parentNode.insertBefore(g,this.field.nextSibling);
e=this.host.data();this.host=c(g);this.host.data(e);this.element=g;this.element.id=this.field.id;this.field.id=b;b=new c(this.element);e=new c(this.field);this._className&&(b.addClass(this._className),e.removeClass(this._className));this.field.tabIndex&&(b=this.field.tabIndex,this.field.tabIndex=-1,this.element.tabIndex=b)}this._img.style.display=this.imgSrc?"inline":"none";this._text.style.display=this.value?"inline":"none";this._positionTextAndImage()}},_positionTextAndImage:function(){var b=this.element.offsetWidth,
d=this.element.offsetHeight,e=this.imgWidth,c=this.imgHeight;""==this.imgSrc&&(c=e=0);var f=this._text.offsetWidth,h=this._text.offsetHeight,l=0,q=0;switch(this.textImageRelation){case "imageBeforeText":case "textBeforeImage":l=e+f+8+4+8;q=Math.max(c,h)+8+4+8;break;case "imageAboveText":case "textAboveImage":l=Math.max(e,f)+8;q=c+h+4+8+8;break;case "overlay":l=Math.max(e,f)+8,q=Math.max(c,h)+8}this.width||(this.element.style.width=l+"px",b=l);this.height||(this.element.style.height=q+"px",d=q);this._img.style.position=
"absolute";this._text.style.position="absolute";this.element.style.position="relative";this.element.style.overflow="hidden";var l={},q={},r=function(b,e,d,c,g){e.width<c&&(e.width=c);e.height<g&&(e.height=g);switch(d){case "left":b.style.left=e.left+"px";b.style.top=e.top+e.height/2-g/2+"px";break;case "topLeft":b.style.left=e.left+"px";b.style.top=e.top+"px";break;case "bottomLeft":b.style.left=e.left+"px";b.style.top=e.top+e.height-g+"px";break;default:case "center":b.style.left=e.left+e.width/
2-c/2+"px";b.style.top=e.top+e.height/2-g/2+"px";break;case "top":b.style.left=e.left+e.width/2-c/2+"px";b.style.top=e.top+"px";break;case "bottom":b.style.left=e.left+e.width/2-c/2+"px";b.style.top=e.top+e.height-g+"px";break;case "right":b.style.left=e.left+e.width-c+"px";b.style.top=e.top+e.height/2-g/2+"px";break;case "topRight":b.style.left=e.left+e.width-c+"px";b.style.top=e.top+"px";break;case "bottomRight":b.style.left=e.left+e.width-c+"px",b.style.top=e.top+e.height-g+"px"}},t=0,w=0,z=(b-
t)/2,B=(d-w)/2,v=this._img,y=this._text,C=d-w,D=b-t,t=t+4,w=w+4,b=b-4-2,D=D-8-2,C=C-8-2;switch(this.textImageRelation){case "imageBeforeText":switch(this.imgPosition){case "left":case "topLeft":case "bottomLeft":q={left:t,top:w,width:t+e,height:C};l={left:t+e+4,top:w,width:D-e-4,height:C};break;case "center":case "top":case "bottom":q={left:z-f/2-e/2-2,top:w,width:e,height:C};l={left:q.left+e+4,top:w,width:b-q.left-e-4,height:C};break;case "right":case "topRight":case "bottomRight":q={left:b-f-e-
4,top:w,width:e,height:C},l={left:q.left+e+4,top:w,width:b-q.left-e-4,height:C}}r(v,q,this.imgPosition,e,c);r(y,l,this.textPosition,f,h);break;case "textBeforeImage":switch(this.textPosition){case "left":case "topLeft":case "bottomLeft":l={left:t,top:w,width:t+f,height:C};q={left:t+f+4,top:w,width:D-f-4,height:C};break;case "center":case "top":case "bottom":l={left:z-f/2-e/2-2,top:w,width:f,height:C};q={left:l.left+f+4,top:w,width:b-l.left-f-4,height:C};break;case "right":case "topRight":case "bottomRight":l=
{left:b-f-e-4,top:w,width:f,height:C},q={left:l.left+f+4,top:w,width:b-l.left-f-4,height:C}}r(v,q,this.imgPosition,e,c);r(y,l,this.textPosition,f,h);break;case "imageAboveText":switch(this.imgPosition){case "topRight":case "top":case "topLeft":q={left:t,top:w,width:D,height:c};l={left:t,top:w+c+4,width:D,height:C-c-4};break;case "left":case "center":case "right":q={left:t,top:B-c/2-h/2-2,width:D,height:c};l={left:t,top:q.top+4+c,width:D,height:C-q.top-4-c};break;case "bottomLeft":case "bottom":case "bottomRight":q=
{left:t,top:d-c-h-4,width:D,height:c},l={left:t,top:q.top+4+c,width:D,height:h}}r(v,q,this.imgPosition,e,c);r(y,l,this.textPosition,f,h);break;case "textAboveImage":switch(this.textPosition){case "topRight":case "top":case "topLeft":l={left:t,top:w,width:D,height:h};q={left:t,top:w+h+4,width:D,height:C-h-4};break;case "left":case "center":case "right":l={left:t,top:B-c/2-h/2-2,width:D,height:h};q={left:t,top:l.top+4+h,width:D,height:C-l.top-4-h};break;case "bottomLeft":case "bottom":case "bottomRight":l=
{left:t,top:d-c-h-4,width:D,height:h},q={left:t,top:l.top+4+h,width:D,height:c}}r(v,q,this.imgPosition,e,c);r(y,l,this.textPosition,f,h);break;default:l={left:t,top:w,width:D,height:C},q={left:t,top:w,width:D,height:C},r(v,q,this.imgPosition,e,c),r(y,l,this.textPosition,f,h)}},createInstance:function(b){var d=this;d._setSize();d.buttonObj=new c(d.element);if(""!=d.imgSrc||""!=d.textPosition||d.element.value&&0<=d.element.value.indexOf("<")||null!=d.value)d.refresh(),d._addImage("jqxButton"),d.buttonObj=
new c(d.element);d._ariaDisabled||d.element.setAttribute("role","button");""!==d.type&&d.element.setAttribute("type",d.type);d.overrideTheme||(d.buttonObj.addClass(d.toThemeProperty(c.jqx.cssroundedcorners(d.roundedCorners))),d.enableDefault&&d.buttonObj.addClass(d.toThemeProperty("jqx-button")),d.buttonObj.addClass(d.toThemeProperty("jqx-widget")));d.isTouchDevice=c.jqx.mobile.isTouchDevice();d._ariaDisabled||c.jqx.aria(this);"arrow"!=d.cursor&&(d.element.style.cursor=d.disabled?"arrow":d.cursor);
b="mouseenter mouseleave mousedown focus blur";d._scrollAreaButton&&(b="mousedown");d.isTouchDevice&&(d.addHandler(d.host,c.jqx.mobile.getTouchEventName("touchstart"),function(b){d.isPressed=!0;d.refresh()}),d.addHandler(c(document),c.jqx.mobile.getTouchEventName("touchend")+"."+d.element.id,function(b){d.isPressed=!1;d.refresh()}));d.addHandler(d.host,b,function(b){switch(b.type){case "mouseenter":d.isTouchDevice||d.disabled||!d.enableHover||(d.isMouseOver=!0,d.refresh());break;case "mouseleave":d.isTouchDevice||
d.disabled||!d.enableHover||(d.isMouseOver=!1,d.refresh());break;case "mousedown":d.disabled||(d.isPressed=!0,d.refresh());break;case "focus":d.disabled||(d.isFocused=!0,d.refresh());break;case "blur":d.disabled||(d.isFocused=!1,d.refresh())}});d.mouseupfunc=function(b){d.disabled||!d.isPressed&&!d.isMouseOver||(d.isPressed=!1,d.refresh())};d.addHandler(document,"mouseup.button"+d.element.id,d.mouseupfunc);try{""==document.referrer&&!window.frameElement||null==window.top||window.top==window.that||
(b="",window.parent&&document.referrer&&(b=document.referrer),-1!=b.indexOf(document.location.host)&&(b=function(b){d.isPressed=!1;d.refresh()},window.top.document&&d.addHandler(c(window.top.document),"mouseup",b)))}catch(e){}d.propertyChangeMap.roundedCorners=function(b,d,f,h){b.buttonObj.removeClass(b.toThemeProperty(c.jqx.cssroundedcorners(f)));b.buttonObj.addClass(b.toThemeProperty(c.jqx.cssroundedcorners(h)))};d.propertyChangeMap.disabled=function(b,d,f,h){f!=h&&(b.refresh(),b.element.setAttribute("disabled",
h),b.element.disabled=h,b.element.style.cursor=h?"default":b.cursor,c.jqx.aria(b,"aria-disabled",b.disabled))};d.propertyChangeMap.rtl=function(b,d,c,h){c!=h&&b.refresh()};d.propertyChangeMap.template=function(b,d,c,h){c!=h&&(b.buttonObj.removeClass(b.toThemeProperty("jqx-"+c)),b.refresh())};d.propertyChangeMap.theme=function(b,d,f,h){b.buttonObj.removeClass(b.element);b.enableDefault&&b.buttonObj.addClass(b.toThemeProperty("jqx-button"));b.buttonObj.addClass(b.toThemeProperty("jqx-widget"));b.overrideTheme||
b.buttonObj.addClass(b.toThemeProperty(c.jqx.cssroundedcorners(b.roundedCorners)));b._oldCSSCurrent=null;b.refresh()};d.disabled&&(d.element.disabled=!0,d.element.setAttribute("disabled","true"))},resize:function(b,d){this.width=b;this.height=d;this._setSize()},val:function(){var b=this.host.find("input");if(0<b.length){if(0==arguments.length||"object"==typeof value)return b.val();b.val(value);this.refresh();return b.val()}if(0==arguments.length||"object"==typeof value)return"button"==this.element.nodeName.toLowerCase()?
c(this.element).text():this.element.value;0<arguments.length&&this._text?this._text.innerHTML=arguments[0]:(0<arguments.length&&"DIV"===this.element.nodeName&&(this.element.innerHTML=arguments[0],this.refresh()),this.element.value=arguments[0],"button"==this.element.nodeName.toLowerCase()&&c(this.element).html(arguments[0]));this.refresh()},_setSize:function(){var b=this.height,d=this.width;b&&(isNaN(b)||(b+="px"),this.element.style.height=b);d&&(isNaN(d)||(d+="px"),this.element.style.width=d)},_removeHandlers:function(){this.removeHandler(this.host,
"selectstart");this.removeHandler(this.host,"click");this.removeHandler(this.host,"focus");this.removeHandler(this.host,"blur");this.removeHandler(this.host,"mouseenter");this.removeHandler(this.host,"mouseleave");this.removeHandler(this.host,"mousedown");this.removeHandler(c(document),"mouseup.button"+this.element.id,this.mouseupfunc);this.isTouchDevice&&(this.removeHandler(this.host,c.jqx.mobile.getTouchEventName("touchstart")),this.removeHandler(c(document),c.jqx.mobile.getTouchEventName("touchend")+
"."+this.element.id));this.mouseupfunc=null;delete this.mouseupfunc},focus:function(){this.host.focus()},destroy:function(){this._removeHandlers();var b=c.data(this.element,"jqxButton");b&&delete b.instance;this.host.removeClass();this.host.removeData();this.host.remove();delete this.set;delete this.get;delete this.call;delete this.element;delete this.host},render:function(){this.refresh()},propertiesChangedHandler:function(b,d,e){e&&e.width&&e.height&&2==Object.keys(e).length&&(b._setSize(),b.refresh())},
propertyChangedHandler:function(b,d,e,c){if(void 0!=this.isInitialized&&0!=this.isInitialized&&c!=e&&!(b.batchUpdate&&b.batchUpdate.width&&b.batchUpdate.height&&2==Object.keys(b.batchUpdate).length)){"type"===d&&b.element.setAttribute("type",c);if("textImageRelation"==d||"textPosition"==d||"imgPosition"==d)b._img?b._positionTextAndImage():b._addImage("jqxButton");"imgSrc"!=d&&"imgWidth"!=d&&"imgHeight"!=d||b._addImage("jqxButton");"value"===d&&b.val(c);if("width"==d||"height"==d)b._setSize(),b.refresh()}},
refresh:function(){if(!this.overrideTheme){var b=this.toThemeProperty("jqx-fill-state-focus"),d=this.toThemeProperty("jqx-fill-state-disabled"),e=this.toThemeProperty("jqx-fill-state-normal");this.enableDefault||(e="");var c=this.toThemeProperty("jqx-fill-state-hover"),f=this.toThemeProperty("jqx-fill-state-pressed"),h=this.toThemeProperty("jqx-fill-state-pressed");this.enablePressed||(f="");this.host&&((this.element.disabled=this.disabled)?(this._oldCSSCurrent&&this.buttonObj.removeClass(this._oldCSSCurrent),
d=e+" "+d,"default"!==this.template&&""!==this.template&&(d+=" jqx-"+this.template,""!=this.theme&&(d+=" jqx-"+this.template+"-"+this.theme)),this.buttonObj.addClass(d),this._oldCSSCurrent=d):(d=this.isMouseOver&&!this.isTouchDevice?this.isPressed?h:c:this.isPressed?f:e,this.isFocused&&(d+=" "+b),"default"!==this.template&&""!==this.template&&(d+=" jqx-"+this.template,""!=this.theme&&(d+=" jqx-"+this.template+"-"+this.theme)),d!=this._oldCSSCurrent&&(this._oldCSSCurrent&&this.buttonObj.removeClass(this._oldCSSCurrent),
this.buttonObj.addClass(d),this._oldCSSCurrent=d),this.rtl&&(this.buttonObj.addClass(this.toThemeProperty("jqx-rtl")),this.element.style.direction="rtl")))}}});c.jqx.jqxWidget("jqxLinkButton","",{});c.extend(c.jqx._jqxLinkButton.prototype,{defineInstance:function(){this.disabled=!1;this.width=this.height=null;this.rtl=!1;this.href=null},createInstance:function(b){var d=this;this.host.onselectstart=function(){return!1};this.host.attr("role","button");var e=this.height||this.element.offsetHeight,g=
this.width||this.element.offsetWidth;this.href=this.element.getAttribute("href");this.target=this.element.getAttribute("target");this.content=this.host.text();this.element.innerHTML="";var f=document.createElement("input");f.type="button";f.className="jqx-wrapper "+this.toThemeProperty("jqx-reset");this._setSize(f,g,e);f.value=this.content;(new c(this.element)).addClass(this.toThemeProperty("jqx-link"));this.element.style.color="inherit";this.element.appendChild(f);this._setSize(f,g,e);b=void 0==
b?{}:b[0]||{};c(f).jqxButton(b);this.wrapElement=f;this.disabled&&(this.element.disabled=!0);this.propertyChangeMap.disabled=function(b,e,d,c){b.element.disabled=c;b.wrapElement.jqxButton({disabled:c})};this.addHandler(c(f),"click",function(b){if(!this.disabled)d.onclick(b);return!1})},_setSize:function(b,d,e){e&&(isNaN(e)||(e+="px"),b.style.height=e);d&&(isNaN(d)||(d+="px"),b.style.width=d)},onclick:function(b){null!=this.target?window.open(this.href,this.target):window.location=this.href}});c.jqx.jqxWidget("jqxRepeatButton",
"jqxButton",{});c.extend(c.jqx._jqxRepeatButton.prototype,{defineInstance:function(){this.delay=50},createInstance:function(b){var d=this,e=c.jqx.mobile.isTouchDevice();b=e?"touchend."+this.base.element.id:"mouseup."+this.base.element.id;var g=e?"touchstart."+this.base.element.id:"mousedown."+this.base.element.id;this.addHandler(c(document),b,function(b){null!=d.timeout&&(clearTimeout(d.timeout),d.timeout=null,d.refresh());void 0!=d.timer&&(clearInterval(d.timer),d.timer=null,d.refresh())});this.addHandler(this.base.host,
g,function(b){null!=d.timer&&clearInterval(d.timer);d.timeout=setTimeout(function(){clearInterval(d.timer);d.timer=setInterval(function(b){d.ontimer(b)},d.delay)},150)});this.mousemovefunc=function(b){e||0!=b.which||null==d.timer||(clearInterval(d.timer),d.timer=null)};this.addHandler(this.base.host,"mousemove",this.mousemovefunc)},destroy:function(){var b=c.jqx.mobile.isTouchDevice(),d=b?"touchend."+this.base.element.id:"mouseup."+this.base.element.id,b=b?"touchstart."+this.base.element.id:"mousedown."+
this.base.element.id;this.removeHandler(this.base.host,"mousemove",this.mousemovefunc);this.removeHandler(this.base.host,b);this.removeHandler(c(document),d);this.timer=null;delete this.mousemovefunc;delete this.timer;(d=c.data(this.base.element,"jqxRepeatButton"))&&delete d.instance;c(this.base.element).removeData();this.base.destroy();delete this.base},stop:function(){clearInterval(this.timer);this.timer=null},ontimer:function(b){b=new c.Event("click");null!=this.base&&null!=this.base.host&&this.base.host.trigger(b)}});
c.jqx.jqxWidget("jqxToggleButton","jqxButton",{});c.extend(c.jqx._jqxToggleButton.prototype,{defineInstance:function(){this.toggled=!1;this.uiToggle=!0;this.aria={"aria-checked":{name:"toggled",type:"boolean"},"aria-disabled":{name:"disabled",type:"boolean"}}},createInstance:function(b){var d=this;d.base.overrideTheme=!0;d.isTouchDevice=c.jqx.mobile.isTouchDevice();c.jqx.aria(this);d.propertyChangeMap.roundedCorners=function(b,d,f,h){b.base.buttonObj.removeClass(b.toThemeProperty(c.jqx.cssroundedcorners(f)));
b.base.buttonObj.addClass(b.toThemeProperty(c.jqx.cssroundedcorners(h)))};d.propertyChangeMap.toggled=function(b,d,c,h){b.refresh()};d.propertyChangeMap.disabled=function(b,d,c,h){b.base.disabled=h;b.refresh()};d.addHandler(d.base.host,"click",function(b){!d.base.disabled&&d.uiToggle&&d.toggle()});d.isTouchDevice||(d.addHandler(d.base.host,"mouseenter",function(b){d.base.disabled||d.refresh()}),d.addHandler(d.base.host,"mouseleave",function(b){d.base.disabled||d.refresh()}));d.addHandler(d.base.host,
"mousedown",function(b){d.base.disabled||d.refresh()});d.addHandler(c(document),"mouseup.togglebutton"+d.base.element.id,function(b){d.base.disabled||d.refresh()})},destroy:function(){this._removeHandlers();this.base.destroy()},_removeHandlers:function(){this.removeHandler(this.base.host,"click");this.removeHandler(this.base.host,"mouseenter");this.removeHandler(this.base.host,"mouseleave");this.removeHandler(this.base.host,"mousedown");this.removeHandler(c(document),"mouseup.togglebutton"+this.base.element.id)},
toggle:function(){this.toggled=!this.toggled;this.refresh();c.jqx.aria(this,"aria-checked",this.toggled)},unCheck:function(){this.toggled=!1;this.refresh()},check:function(){this.toggled=!0;this.refresh()},refresh:function(){var b=this.base.toThemeProperty("jqx-fill-state-disabled"),d=this.base.toThemeProperty("jqx-fill-state-normal");this.base.enableDefault||(d="");var e=this.base.toThemeProperty("jqx-fill-state-hover"),c=this.base.toThemeProperty("jqx-fill-state-pressed"),f=this.base.toThemeProperty("jqx-fill-state-pressed"),
h;(this.base.element.disabled=this.base.disabled)?this.base.buttonObj.addClass(d+" "+b):(h=this.base.isMouseOver&&!this.isTouchDevice?this.base.isPressed||this.toggled?f:e:this.base.isPressed||this.toggled?c:d,"default"!==this.base.template&&""!==this.base.template&&(h+=" jqx-"+this.base.template,""!=this.base.theme&&(h+=" jqx-"+this.template+"-"+this.base.theme)),this.base.buttonObj.hasClass(b)&&b!=h&&this.base.buttonObj.removeClass(b),this.base.buttonObj.hasClass(d)&&d!=h&&this.base.buttonObj.removeClass(d),
this.base.buttonObj.hasClass(e)&&e!=h&&this.base.buttonObj.removeClass(e),this.base.buttonObj.hasClass(c)&&c!=h&&this.base.buttonObj.removeClass(c),this.base.buttonObj.hasClass(f)&&f!=h&&this.base.buttonObj.removeClass(f),this.base.buttonObj.hasClass(h)||this.base.buttonObj.addClass(h))}})})(jqxBaseFramework);
(function(c){c.jqx.jqxWidget("jqxScrollBar","",{});c.extend(c.jqx._jqxScrollBar.prototype,{defineInstance:function(){var b={height:null,width:null,vertical:!1,min:0,max:1E3,value:0,step:10,largestep:50,thumbMinSize:10,thumbSize:0,thumbStep:"auto",roundedCorners:"all",showButtons:!0,disabled:!1,touchMode:"auto",touchModeStyle:"auto",thumbTouchSize:0,_triggervaluechanged:!0,rtl:!1,areaDownCapture:!1,areaUpCapture:!1,_initialLayout:!1,offset:0,reference:0,velocity:0,frame:0,timestamp:0,ticker:null,amplitude:0,
target:0};if(this===c.jqx._jqxScrollBar.prototype)return b;c.extend(!0,this,b);return b},createInstance:function(b){this.render()},render:function(){this._mouseup=new Date;var b=this;c.jqx.utilities&&"hidden"==c.jqx.utilities.scrollBarButtonsVisibility&&(this.showButtons=!1);b.WinJS?MSApp.execUnsafeLocalFunction(function(){b.host.html("<div id='jqxScrollOuterWrap' style='box-sizing: content-box; width:100%; height: 100%; align:left; border: 0px; valign:top; position: relative;'><div id='jqxScrollWrap' style='box-sizing: content-box; width:100%; height: 100%; left: 0px; top: 0px; align:left; valign:top; position: absolute;'><div id='jqxScrollBtnUp' style='box-sizing: content-box; align:left; valign:top; left: 0px; top: 0px; position: absolute;'><div></div></div><div id='jqxScrollAreaUp' style='box-sizing: content-box; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='jqxScrollThumb' style='box-sizing: content-box; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='jqxScrollAreaDown' style='box-sizing: content-box; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='jqxScrollBtnDown' style='box-sizing: content-box; align:left; valign:top; left: 0px; top: 0px; position: absolute;'><div></div></div></div></div>")}):
this.element.innerHTML="<div id='jqxScrollOuterWrap' style='box-sizing: content-box; width:100%; height: 100%; align:left; border: 0px; valign:top; position: relative;'><div id='jqxScrollWrap' style='box-sizing: content-box; width:100%; height: 100%; left: 0px; top: 0px; align:left; valign:top; position: absolute;'><div id='jqxScrollBtnUp' style='box-sizing: content-box; align:left; valign:top; left: 0px; top: 0px; position: absolute;'><div></div></div><div id='jqxScrollAreaUp' style='box-sizing: content-box; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='jqxScrollThumb' style='box-sizing: content-box; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='jqxScrollAreaDown' style='box-sizing: content-box; align:left; valign:top; left: 0px; top: 0px; position: absolute;'></div><div id='jqxScrollBtnDown' style='box-sizing: content-box; align:left; valign:top; left: 0px; top: 0px; position: absolute;'><div></div></div></div></div>";
void 0!=this.width&&0<parseInt(this.width)&&this.host.width(parseInt(this.width));void 0!=this.height&&0<parseInt(this.height)&&this.host.height(parseInt(this.height));this.isPercentage=!1;null!=this.width&&-1!=this.width.toString().indexOf("%")&&(this.host.width(this.width),this.isPercentage=!0);null!=this.height&&-1!=this.height.toString().indexOf("%")&&(this.host.height(this.height),this.isPercentage=!0);if(this.isPercentage){var d=this;c.jqx.utilities.resize(this.host,function(){d._arrange()},
!1)}this.thumbCapture=!1;this.scrollOuterWrap=c(this.element.firstChild);this.scrollWrap=c(this.scrollOuterWrap[0].firstChild);this.btnUp=c(this.scrollWrap[0].firstChild);this.areaUp=c(this.btnUp[0].nextSibling);this.btnThumb=c(this.areaUp[0].nextSibling);this.arrowUp=c(this.btnUp[0].firstChild);this.areaDown=c(this.btnThumb[0].nextSibling);this.btnDown=c(this.areaDown[0].nextSibling);this.arrowDown=c(this.btnDown[0].firstChild);var e=this.element.id;this.btnUp[0].id="jqxScrollBtnUp"+e;this.btnDown[0].id=
"jqxScrollBtnDown"+e;this.btnThumb[0].id="jqxScrollThumb"+e;this.areaUp[0].id="jqxScrollAreaUp"+e;this.areaDown[0].id="jqxScrollAreaDown"+e;this.scrollWrap[0].id="jqxScrollWrap"+e;this.scrollOuterWrap[0].id="jqxScrollOuterWrap"+e;if(!this.host.jqxRepeatButton)throw Error("jqxScrollBar: Missing reference to jqxbuttons.js.");this.btnUp.jqxRepeatButton({_ariaDisabled:!0,overrideTheme:!0,disabled:this.disabled});this.btnDown.jqxRepeatButton({_ariaDisabled:!0,overrideTheme:!0,disabled:this.disabled});
this.btnDownInstance=c.data(this.btnDown[0],"jqxRepeatButton").instance;this.btnUpInstance=c.data(this.btnUp[0],"jqxRepeatButton").instance;this.areaUp.jqxRepeatButton({_scrollAreaButton:!0,_ariaDisabled:!0,overrideTheme:!0});this.areaDown.jqxRepeatButton({_scrollAreaButton:!0,_ariaDisabled:!0,overrideTheme:!0});this.btnThumb.jqxButton({_ariaDisabled:!0,overrideTheme:!0,disabled:this.disabled});this.propertyChangeMap.value=function(b,e,d,c){isNaN(c)||d!=c&&b.setPosition(parseFloat(c),!0)};this.propertyChangeMap.width=
function(b,e,d,c){void 0!=b.width&&0<parseInt(b.width)&&(b.host.width(parseInt(b.width)),b._arrange())};this.propertyChangeMap.height=function(b,e,d,c){void 0!=b.height&&0<parseInt(b.height)&&(b.host.height(parseInt(b.height)),b._arrange())};this.propertyChangeMap.theme=function(b,e,d,c){b.setTheme()};this.propertyChangeMap.max=function(b,e,d,c){isNaN(c)||d==c||(b.max=parseInt(c),b.min>b.max&&(b.max=b.min+1),b._arrange(),b.setPosition(b.value))};this.propertyChangeMap.min=function(b,e,d,c){isNaN(c)||
d==c||(b.min=parseInt(c),b.min>b.max&&(b.max=b.min+1),b._arrange(),b.setPosition(b.value))};this.propertyChangeMap.disabled=function(b,e,d,c){d!=c&&(c?b.host.addClass(b.toThemeProperty("jqx-fill-state-disabled")):b.host.removeClass(b.toThemeProperty("jqx-fill-state-disabled")),b.btnUp.jqxRepeatButton("disabled",b.disabled),b.btnDown.jqxRepeatButton("disabled",b.disabled),b.btnThumb.jqxButton("disabled",b.disabled))};this.propertyChangeMap.touchMode=function(b,e,d,c){d!=c&&(b._updateTouchBehavior(),
!0===c?(b.showButtons=!1,b.refresh()):!1===c&&(b.showButtons=!0,b.refresh()))};this.propertyChangeMap.rtl=function(b,e,d,c){d!=c&&b.refresh()};this.buttonDownCapture=this.buttonUpCapture=!1;this._updateTouchBehavior();this.setPosition(this.value);this._addHandlers();this.setTheme()},resize:function(b,d){this.width=b;this.height=d;this._arrange()},_updateTouchBehavior:function(){this.isTouchDevice=c.jqx.mobile.isTouchDevice();1==this.touchMode?(c.jqx.browser.msie&&9>c.jqx.browser.version||(this.isTouchDevice=
!0,c.jqx.mobile.setMobileSimulator(this.btnThumb[0]),this._removeHandlers(),this._addHandlers()),this.setTheme()):0==this.touchMode&&(this.isTouchDevice=!1)},_addHandlers:function(){var b=this,d=!1;try{if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)this._touchSupport=d=!0}catch(g){}if(b.isTouchDevice||d)this.addHandler(this.btnThumb,c.jqx.mobile.getTouchEventName("touchend"),function(e){var d=b.vertical?b.toThemeProperty("jqx-scrollbar-thumb-state-pressed"):b.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal"),
c=b.toThemeProperty("jqx-fill-state-pressed");b.btnThumb.removeClass(d);b.btnThumb.removeClass(c);b.disabled||b.handlemouseup(b,e);return!1}),this.addHandler(this.btnThumb,c.jqx.mobile.getTouchEventName("touchstart"),function(e){b.disabled||(1==b.touchMode?(e.clientX=e.originalEvent.clientX,e.clientY=e.originalEvent.clientY):e.originalEvent.touches&&e.originalEvent.touches.length?(e.clientX=e.originalEvent.touches[0].clientX,e.clientY=e.originalEvent.touches[0].clientY):(e.clientX=e.originalEvent.clientX,
e.clientY=e.originalEvent.clientY),b.handlemousedown(e),e.preventDefault&&e.preventDefault())}),c.jqx.mobile.touchScroll(this.element,b.max,function(e,d,c,l,q){"visible"==b.host.css("visibility")&&(1==b.touchMode?(q.clientX=q.originalEvent.clientX,q.clientY=q.originalEvent.clientY):q.originalEvent.touches&&q.originalEvent.touches.length?(q.clientX=q.originalEvent.touches[0].clientX,q.clientY=q.originalEvent.touches[0].clientY):(q.clientX=q.originalEvent.clientX,q.clientY=q.originalEvent.clientY),
e=b.vertical?b.toThemeProperty("jqx-scrollbar-thumb-state-pressed"):b.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal"),b.btnThumb.addClass(e),b.btnThumb.addClass(b.toThemeProperty("jqx-fill-state-pressed")),b.thumbCapture=!0,b.handlemousemove(q))},b.element.id,b.host,b.host);if(!this.isTouchDevice){try{""==document.referrer&&!window.frameElement||null==window.top||window.top==window.self||(d=null,window.parent&&document.referrer&&(d=document.referrer),d&&-1!=d.indexOf(document.location.host)&&
(d=function(e){b.disabled||b.handlemouseup(b,e)},window.top.document.addEventListener?window.top.document.addEventListener("mouseup",d,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",d)))}catch(g){}this.addHandler(this.btnDown,"click mouseup mousedown",function(e){var d=b.step;Math.abs(b.max-b.min)<=d&&(d=1);b.rtl&&!b.vertical&&(d=-b.step);switch(e.type){case "click":b.buttonDownCapture&&!b.isTouchDevice?b.disabled||b.setPosition(b.value+d):!b.disabled&&b.isTouchDevice&&
b.setPosition(b.value+d);break;case "mouseup":if(!b.btnDownInstance.base.disabled&&b.buttonDownCapture)return b.buttonDownCapture=!1,b.btnDown.removeClass(b.toThemeProperty("jqx-scrollbar-button-state-pressed")),b.btnDown.removeClass(b.toThemeProperty("jqx-fill-state-pressed")),b._removeArrowClasses("pressed","down"),b.handlemouseup(b,e),b.setPosition(b.value+d),!1;break;case "mousedown":if(!b.btnDownInstance.base.disabled)return b.buttonDownCapture=!0,b.btnDown.addClass(b.toThemeProperty("jqx-fill-state-pressed")),
b.btnDown.addClass(b.toThemeProperty("jqx-scrollbar-button-state-pressed")),b._addArrowClasses("pressed","down"),!1}});this.addHandler(this.btnUp,"click mouseup mousedown",function(e){var d=b.step;Math.abs(b.max-b.min)<=d&&(d=1);b.rtl&&!b.vertical&&(d=-b.step);switch(e.type){case "click":b.buttonUpCapture&&!b.isTouchDevice?b.disabled||b.setPosition(b.value-d):!b.disabled&&b.isTouchDevice&&b.setPosition(b.value-d);break;case "mouseup":if(!b.btnUpInstance.base.disabled&&b.buttonUpCapture)return b.buttonUpCapture=
!1,b.btnUp.removeClass(b.toThemeProperty("jqx-scrollbar-button-state-pressed")),b.btnUp.removeClass(b.toThemeProperty("jqx-fill-state-pressed")),b._removeArrowClasses("pressed","up"),b.handlemouseup(b,e),b.setPosition(b.value-d),!1;break;case "mousedown":if(!b.btnUpInstance.base.disabled)return b.buttonUpCapture=!0,b.btnUp.addClass(b.toThemeProperty("jqx-fill-state-pressed")),b.btnUp.addClass(b.toThemeProperty("jqx-scrollbar-button-state-pressed")),b._addArrowClasses("pressed","up"),!1}})}d="click";
this.isTouchDevice&&(d=c.jqx.mobile.getTouchEventName("touchend"));this.addHandler(this.areaUp,d,function(e){if(!b.disabled)return e=b.largestep,b.rtl&&!b.vertical&&(e=-b.largestep),b.setPosition(b.value-e),!1});this.addHandler(this.areaDown,d,function(e){if(!b.disabled)return e=b.largestep,b.rtl&&!b.vertical&&(e=-b.largestep),b.setPosition(b.value+e),!1});this.addHandler(this.areaUp,"mousedown",function(e){if(!b.disabled)return b.areaUpCapture=!0,!1});this.addHandler(this.areaDown,"mousedown",function(e){if(!b.disabled)return b.areaDownCapture=
!0,!1});this.addHandler(this.btnThumb,"mousedown dragstart",function(e){if("dragstart"===e.type)return!1;b.disabled||b.handlemousedown(e);e.preventDefault&&e.preventDefault()});this.addHandler(c(document),"mouseup."+this.element.id,function(e){b.disabled||b.handlemouseup(b,e)});if(!this.isTouchDevice&&(this.mousemoveFunc=function(e){b.disabled||b.handlemousemove(e)},this.addHandler(c(document),"mousemove."+this.element.id,this.mousemoveFunc),this.addHandler(c(document),"mouseleave."+this.element.id,
function(e){b.disabled||b.handlemouseleave(e)}),this.addHandler(c(document),"mouseenter."+this.element.id,function(e){b.disabled||b.handlemouseenter(e)}),!b.disabled)){this.addHandler(this.btnUp,"mouseenter mouseleave",function(e){"mouseenter"===e.type?b.disabled||b.btnUpInstance.base.disabled||1==b.touchMode||(b.btnUp.addClass(b.toThemeProperty("jqx-scrollbar-button-state-hover")),b.btnUp.addClass(b.toThemeProperty("jqx-fill-state-hover")),b._addArrowClasses("hover","up")):b.disabled||b.btnUpInstance.base.disabled||
1==b.touchMode||(b.btnUp.removeClass(b.toThemeProperty("jqx-scrollbar-button-state-hover")),b.btnUp.removeClass(b.toThemeProperty("jqx-fill-state-hover")),b._removeArrowClasses("hover","up"))});var e=b.toThemeProperty("jqx-scrollbar-thumb-state-hover");b.vertical||(e=b.toThemeProperty("jqx-scrollbar-thumb-state-hover-horizontal"));this.addHandler(this.btnThumb,"mouseenter mouseleave",function(d){"mouseenter"===d.type?b.disabled||1==b.touchMode||(b.btnThumb.addClass(e),b.btnThumb.addClass(b.toThemeProperty("jqx-fill-state-hover"))):
b.disabled||1==b.touchMode||(b.btnThumb.removeClass(e),b.btnThumb.removeClass(b.toThemeProperty("jqx-fill-state-hover")))});this.addHandler(this.btnDown,"mouseenter mouseleave",function(e){"mouseenter"===e.type?b.disabled||b.btnDownInstance.base.disabled||1==b.touchMode||(b.btnDown.addClass(b.toThemeProperty("jqx-scrollbar-button-state-hover")),b.btnDown.addClass(b.toThemeProperty("jqx-fill-state-hover")),b._addArrowClasses("hover","down")):b.disabled||b.btnDownInstance.base.disabled||1==b.touchMode||
(b.btnDown.removeClass(b.toThemeProperty("jqx-scrollbar-button-state-hover")),b.btnDown.removeClass(b.toThemeProperty("jqx-fill-state-hover")),b._removeArrowClasses("hover","down"))})}},destroy:function(){var b=this.btnUp,d=this.btnDown,e=this.btnThumb,g=this.areaUp,f=this.areaDown;this.arrowUp.remove();delete this.arrowUp;this.arrowDown.remove();delete this.arrowDown;f.removeClass();g.removeClass();d.removeClass();b.removeClass();e.removeClass();b.jqxRepeatButton("destroy");d.jqxRepeatButton("destroy");
g.jqxRepeatButton("destroy");f.jqxRepeatButton("destroy");e.jqxButton("destroy");b=c.data(this.element,"jqxScrollBar");this._removeHandlers();this.scrollOuterWrap=this.areaDown=this.areaUp=this.scrollWrap=this.btnDown=this.btnUp=null;delete this.mousemoveFunc;delete this.btnDownInstance;delete this.btnUpInstance;delete this.scrollOuterWrap;delete this.scrollWrap;delete this.btnDown;delete this.areaDown;delete this.areaUp;delete this.btnDown;delete this.btnUp;delete this.btnThumb;delete this.propertyChangeMap.value;
delete this.propertyChangeMap.min;delete this.propertyChangeMap.max;delete this.propertyChangeMap.touchMode;delete this.propertyChangeMap.disabled;delete this.propertyChangeMap.theme;delete this.propertyChangeMap;b&&delete b.instance;this.host.removeData();this.host.remove();delete this.host;delete this.set;delete this.get;delete this.call;delete this.element},_removeHandlers:function(){this.removeHandler(this.btnUp,"mouseenter");this.removeHandler(this.btnDown,"mouseenter");this.removeHandler(this.btnThumb,
"mouseenter");this.removeHandler(this.btnUp,"mouseleave");this.removeHandler(this.btnDown,"mouseleave");this.removeHandler(this.btnThumb,"mouseleave");this.removeHandler(this.btnUp,"click");this.removeHandler(this.btnDown,"click");this.removeHandler(this.btnDown,"mouseup");this.removeHandler(this.btnUp,"mouseup");this.removeHandler(this.btnDown,"mousedown");this.removeHandler(this.btnUp,"mousedown");this.removeHandler(this.areaUp,"mousedown");this.removeHandler(this.areaDown,"mousedown");this.removeHandler(this.areaUp,
"click");this.removeHandler(this.areaDown,"click");this.removeHandler(this.btnThumb,"mousedown");this.removeHandler(this.btnThumb,"dragstart");this.removeHandler(c(document),"mouseup."+this.element.id);this.mousemoveFunc?this.removeHandler(c(document),"mousemove."+this.element.id,this.mousemoveFunc):this.removeHandler(c(document),"mousemove."+this.element.id);this.removeHandler(c(document),"mouseleave."+this.element.id);this.removeHandler(c(document),"mouseenter."+this.element.id)},_addArrowClasses:function(b,
d){"pressed"==b&&(b="selected");""!=b&&(b="-"+b);this.vertical?("up"!=d&&void 0!=d||this.arrowUp.addClass(this.toThemeProperty("jqx-icon-arrow-up"+b)),"down"!=d&&void 0!=d||this.arrowDown.addClass(this.toThemeProperty("jqx-icon-arrow-down"+b))):("up"!=d&&void 0!=d||this.arrowUp.addClass(this.toThemeProperty("jqx-icon-arrow-left"+b)),"down"!=d&&void 0!=d||this.arrowDown.addClass(this.toThemeProperty("jqx-icon-arrow-right"+b)))},_removeArrowClasses:function(b,d){"pressed"==b&&(b="selected");""!=b&&
(b="-"+b);this.vertical?("up"!=d&&void 0!=d||this.arrowUp.removeClass(this.toThemeProperty("jqx-icon-arrow-up"+b)),"down"!=d&&void 0!=d||this.arrowDown.removeClass(this.toThemeProperty("jqx-icon-arrow-down"+b))):("up"!=d&&void 0!=d||this.arrowUp.removeClass(this.toThemeProperty("jqx-icon-arrow-left"+b)),"down"!=d&&void 0!=d||this.arrowDown.removeClass(this.toThemeProperty("jqx-icon-arrow-right"+b)))},setTheme:function(){var b=this.btnUp,d=this.btnDown,e=this.btnThumb,g=this.scrollWrap,f=this.arrowUp,
h=this.arrowDown;this.scrollWrap[0].className=this.toThemeProperty("jqx-reset");this.scrollOuterWrap[0].className=this.toThemeProperty("jqx-reset");var l=this.toThemeProperty("jqx-reset");this.areaDown[0].className=l;this.areaUp[0].className=l;var q=this.toThemeProperty("jqx-scrollbar")+" "+this.toThemeProperty("jqx-widget")+" "+this.toThemeProperty("jqx-widget-content");this.host.addClass(q);this.isTouchDevice&&this.host.addClass(this.toThemeProperty("jqx-scrollbar-mobile"));d[0].className=this.toThemeProperty("jqx-scrollbar-button-state-normal");
b[0].className=this.toThemeProperty("jqx-scrollbar-button-state-normal");this.vertical?(f[0].className=l+" "+this.toThemeProperty("jqx-icon-arrow-up"),h[0].className=l+" "+this.toThemeProperty("jqx-icon-arrow-down"),f=this.toThemeProperty("jqx-scrollbar-thumb-state-normal")):(f[0].className=l+" "+this.toThemeProperty("jqx-icon-arrow-left"),h[0].className=l+" "+this.toThemeProperty("jqx-icon-arrow-right"),f=this.toThemeProperty("jqx-scrollbar-thumb-state-normal-horizontal"));f+=" "+this.toThemeProperty("jqx-fill-state-normal");
e[0].className=f;this.disabled?(g.addClass(this.toThemeProperty("jqx-fill-state-disabled")),g.removeClass(this.toThemeProperty("jqx-scrollbar-state-normal"))):(g.addClass(this.toThemeProperty("jqx-scrollbar-state-normal")),g.removeClass(this.toThemeProperty("jqx-fill-state-disabled")));"all"==this.roundedCorners?(this.host.addClass(this.toThemeProperty("jqx-rc-all")),this.vertical?(g=c.jqx.cssroundedcorners("top"),g=this.toThemeProperty(g),b.addClass(g),g=c.jqx.cssroundedcorners("bottom")):(g=c.jqx.cssroundedcorners("left"),
g=this.toThemeProperty(g),b.addClass(g),g=c.jqx.cssroundedcorners("right")),g=this.toThemeProperty(g),d.addClass(g)):(d=c.jqx.cssroundedcorners(this.roundedCorners),d=this.toThemeProperty(d),elBtnUp.addClass(d),elBtnDown.addClass(d));d=c.jqx.cssroundedcorners(this.roundedCorners);d=this.toThemeProperty(d);e.hasClass(d)||e.addClass(d);"none"===b.css("display")&&(this.showButtons=!1,this.touchModeStyle=!0,e.addClass(this.toThemeProperty("jqx-scrollbar-thumb-state-normal-touch")));this.isTouchDevice&&
0!=this.touchModeStyle&&(this.showButtons=!1,e.addClass(this.toThemeProperty("jqx-scrollbar-thumb-state-normal-touch")))},isScrolling:function(){return void 0==this.thumbCapture||void 0==this.buttonDownCapture||void 0==this.buttonUpCapture||void 0==this.areaDownCapture||void 0==this.areaUpCapture?!1:this.thumbCapture||this.buttonDownCapture||this.buttonUpCapture||this.areaDownCapture||this.areaUpCapture},track:function(){var b,d;b=Date.now();d=b-this.timestamp;this.timestamp=b;b=this.offset-this.frame;
this.frame=this.offset;this.velocity=1E3*b/(1+d)*.2+.2*this.velocity},handlemousedown:function(b){function d(b){g.reference=parseInt(g.btnThumb[0].style.top);g.offset=parseInt(g.btnThumb[0].style.top);g.vertical||(g.reference=parseInt(g.btnThumb[0].style.left),g.offset=parseInt(g.btnThumb[0].style.left));g.velocity=g.amplitude=0;g.frame=g.offset;g.timestamp=Date.now();clearInterval(g.ticker);g.ticker=setInterval(function(){g.track()},100)}if(void 0==this.thumbCapture||0==this.thumbCapture){this.thumbCapture=
!0;var e=this.btnThumb;null!=e&&(e.addClass(this.toThemeProperty("jqx-fill-state-pressed")),this.vertical?e.addClass(this.toThemeProperty("jqx-scrollbar-thumb-state-pressed")):e.addClass(this.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal")))}var g=this;this.thumbCapture&&c.jqx.scrollAnimation&&d(b);this.dragStartX=b.clientX;this.dragStartY=b.clientY;this.dragStartValue=this.value},toggleHover:function(b,d){},refresh:function(){this._arrange()},_setElementPosition:function(b,d,e){isNaN(d)||
parseInt(b[0].style.left)==parseInt(d)||(b[0].style.left=d+"px");isNaN(e)||parseInt(b[0].style.top)==parseInt(e)||(b[0].style.top=e+"px")},_setElementTopPosition:function(b,d){isNaN(d)||(b[0].style.top=d+"px")},_setElementLeftPosition:function(b,d){isNaN(d)||(b[0].style.left=d+"px")},handlemouseleave:function(b){b=this.btnUp;var d=this.btnDown;if(this.buttonDownCapture||this.buttonUpCapture)b.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed")),d.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed")),
this._removeArrowClasses("pressed");1==this.thumbCapture&&(b=this.btnThumb,d=this.vertical?this.toThemeProperty("jqx-scrollbar-thumb-state-pressed"):this.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal"),b.removeClass(d),b.removeClass(this.toThemeProperty("jqx-fill-state-pressed")))},handlemouseenter:function(b){b=this.btnUp;var d=this.btnDown;this.buttonUpCapture&&(b.addClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed")),b.addClass(this.toThemeProperty("jqx-fill-state-pressed")),
this._addArrowClasses("pressed","up"));this.buttonDownCapture&&(d.addClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed")),d.addClass(this.toThemeProperty("jqx-fill-state-pressed")),this._addArrowClasses("pressed","down"));1==this.thumbCapture&&(b=this.btnThumb,this.vertical?b.addClass(this.toThemeProperty("jqx-scrollbar-thumb-state-pressed")):b.addClass(this.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal")),b.addClass(this.toThemeProperty("jqx-fill-state-pressed")))},handlemousemove:function(b){var d=
this.btnUp,e=this.btnDown;if(null!=e&&null!=d){null!=d&&null!=e&&void 0!=this.buttonDownCapture&&void 0!=this.buttonUpCapture&&(this.buttonDownCapture&&0==b.which?(e.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed")),e.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),this._removeArrowClasses("pressed","down"),this.buttonDownCapture=!1):this.buttonUpCapture&&0==b.which&&(d.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed")),d.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),
this._removeArrowClasses("pressed","up"),this.buttonUpCapture=!1));if(1!=this.thumbCapture)return!1;var c=this.btnThumb;if(0==b.which&&!this.isTouchDevice&&!this._touchSupport)return this.thumbCapture=!1,this._arrange(),b=this.vertical?this.toThemeProperty("jqx-scrollbar-thumb-state-pressed"):this.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal"),c.removeClass(b),c.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),!0;void 0!=b.preventDefault&&b.preventDefault();null!=b.originalEvent&&
(b.originalEvent.mouseHandled=!0);void 0!=b.stopPropagation&&b.stopPropagation();var f=0;try{var f=this.vertical?b.clientY-this.dragStartY:b.clientX-this.dragStartX,h=this._btnAndThumbSize;this._btnAndThumbSize||(h=this.vertical?d.height()+e.height()+c.height():d.width()+e.width()+c.width());var l=(this.max-this.min)/(this.scrollBarSize-h);if("auto"==this.thumbStep)f*=l;else{f*=l;if(Math.abs(this.dragStartValue+f-this.value)>=parseInt(this.thumbStep)){var q=Math.round(parseInt(f)/this.thumbStep)*
this.thumbStep;this.rtl&&!this.vertical?this.setPosition(this.dragStartValue-q):this.setPosition(this.dragStartValue+q)}return!1}q=f;this.rtl&&!this.vertical&&(q=-f);this.setPosition(this.dragStartValue+q);this.offset=parseInt(c[0].style.left);this.vertical&&(this.offset=parseInt(c[0].style.top))}catch(r){alert(r)}return!1}},handlemouseup:function(b,d){var e=!1;if(this.thumbCapture){this.thumbCapture=!1;var e=this.btnThumb,g=this.vertical?this.toThemeProperty("jqx-scrollbar-thumb-state-pressed"):
this.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal");e.removeClass(g);e.removeClass(this.toThemeProperty("jqx-fill-state-pressed"));e=!0;this._mouseup=new Date;if(c.jqx.scrollAnimation){var f=function(){var b;if(h.amplitude)if(b=Date.now()-h.timestamp,b=-h.amplitude*Math.exp(-b/325),.5<b||-.5>b){var e=(h.max-h.min)/(h.scrollBarSize-h._btnAndThumbSize),e=b=e*(h.target+b);h.rtl&&!h.vertical&&(e=-b);h.setPosition(h.dragStartValue+e);requestAnimationFrame(f)}else e=(h.max-h.min)/(h.scrollBarSize-
h._btnAndThumbSize),e=b=e*(h.target+b),h.rtl&&!h.vertical&&(e=-b),h.setPosition(h.dragStartValue+e)},h=this;clearInterval(this.ticker);if(25<this.velocity||-25>this.velocity)this.amplitude=.8*this.velocity,this.target=Math.round(this.offset+this.amplitude),this.target-=this.reference,this.timestamp=Date.now(),requestAnimationFrame(f)}}this.areaDownCapture=this.areaUpCapture=!1;if(this.buttonUpCapture||this.buttonDownCapture)e=this.btnUp,g=this.btnDown,this.buttonDownCapture=this.buttonUpCapture=!1,
e.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed")),g.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed")),e.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),g.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),this._removeArrowClasses("pressed"),e=!0,this._mouseup=new Date;e&&(void 0!=d.preventDefault&&d.preventDefault(),null!=d.originalEvent&&(d.originalEvent.mouseHandled=!0),void 0!=d.stopPropagation&&d.stopPropagation())},setPosition:function(b,
d){if(void 0==b||NaN==b)b=this.min;b>=this.max&&(b=this.max);b<this.min&&(b=this.min);if(this.value!==b||1==d){if(b==this.max){var e=new c.Event("complete");this.host.trigger(e)}e=this.value;if(this._triggervaluechanged){var g=new c.Event("valueChanged");g.previousValue=this.value;g.currentValue=b}this.value=b;this._positionelements();this._triggervaluechanged&&this.host.trigger(g);this.valueChanged&&this.valueChanged({currentValue:this.value,previousvalue:e})}return b},val:function(b){var d;a:{for(d in b)if(b.hasOwnProperty(d)){d=
!1;break a}d="number"==typeof b||"date"==typeof b||"boolean"==typeof b||"string"==typeof b?!1:!0}if(d||0==arguments.length)return this.value;this.setPosition(b);return b},_getThumbSize:function(b){var d=this.max-this.min,e=0;1<d?e=b/(d+b)*b:1==d?e=b-1:0==d&&(e=b);0<this.thumbSize&&(e=this.thumbSize);e<this.thumbMinSize&&(e=this.thumbMinSize);return Math.min(e,b)},_positionelements:function(){var b=this.areaUp,d=this.areaDown,e=this.btnThumb,c=this._height?this._height:this.host.height(),f=this._width?
this._width:this.host.width(),h=this.vertical?f:c;this.showButtons||(h=0);var l=this.vertical?c:f;this.scrollBarSize=l;c=this._getThumbSize(l-2*h);c=Math.floor(c);c<this.thumbMinSize&&(c=this.thumbMinSize);this.btnSize=h+=2;var q=this._btnAndThumbSize;this._btnAndThumbSize||(q=this.vertical?2*this.btnSize+e.outerHeight():2*this.btnSize+e.outerWidth(),q=Math.round(q));f=(l-q)/(this.max-this.min)*(this.value-this.min);this.rtl&&!this.vertical&&(f=(l-q)/(this.max-this.min)*(this.max-this.value-this.min));
f=Math.round(f);0>f&&(f=0);this.vertical?(l=l-f-q,0>l&&(l=0),d[0].style.height=l+"px",b[0].style.height=f+"px",this._setElementTopPosition(b,h),this._setElementTopPosition(e,h+f),this._setElementTopPosition(d,h+f+c)):(b[0].style.width=f+"px",d[0].style.width=0<=l-f-q?l-f-q+"px":"0px",this._setElementLeftPosition(b,h),this._setElementLeftPosition(e,h+f),this._setElementLeftPosition(d,2+h+f+c))},_arrange:function(){if(this._initialLayout)this._initialLayout=!1;else{if(this.min>this.max){var b=this.min;
this.min=this.max;this.max=b}0>this.min&&(b=this.max-this.min,this.min=0,this.max=b);var b=this.areaUp,d=this.areaDown,e=this.btnUp,c=this.btnDown,f=this.btnThumb,h=this.scrollWrap,l=parseInt(this.element.style.height),q=parseInt(this.element.style.width);this.isPercentage&&(l=this.host.height(),q=this.host.width());isNaN(l)&&(l=0);isNaN(q)&&(q=0);this._width=q;this._height=l;var r=this.vertical?q:l;this.showButtons||(r=0);e[0].style.width=r+"px";e[0].style.height=r+"px";c[0].style.width=r+"px";c[0].style.height=
r+"px";this.vertical?h[0].style.width=q+2+"px":h[0].style.height=l+2+"px";this._setElementPosition(e,0,0);e=r+2;this.vertical?this._setElementPosition(c,0,l-e):this._setElementPosition(c,q-e,0);var t=this.vertical?l:q;this.scrollBarSize=t;c=this._getThumbSize(t-2*e);c=Math.floor(c-2);c<this.thumbMinSize&&(c=this.thumbMinSize);h=!1;this.isTouchDevice&&0!=this.touchModeStyle&&(h=!0);this.vertical?(f[0].style.width=q+"px",f[0].style.height=c+"px",h&&0!==this.thumbTouchSize&&(f.css({width:this.thumbTouchSize+
"px"}),f.css("margin-left",(this.host.width()-this.thumbTouchSize)/2))):(f[0].style.width=c+"px",f[0].style.height=l+"px",h&&0!==this.thumbTouchSize&&(f.css({height:this.thumbTouchSize+"px"}),f.css("margin-top",(this.host.height()-this.thumbTouchSize)/2)));if(NaN==l||10>l)l=10;if(NaN==q||10>q)q=10;this.btnSize=r;h=this.vertical?2*e+(2+parseInt(f[0].style.height)):2*e+(2+parseInt(f[0].style.width));this._btnAndThumbSize=h=Math.round(h);var w=(t-h)/(this.max-this.min)*(this.value-this.min);this.rtl&&
!this.vertical&&(w=(t-h)/(this.max-this.min)*(this.max-this.value-this.min));w=Math.round(w);if(isNaN(w)||0>w||-Infinity===w||Infinity===w)w=0;if(this.vertical){l=t-w-h;0>l&&(l=0);d[0].style.height=l+"px";d[0].style.width=q+"px";b[0].style.height=w+"px";b[0].style.width=q+"px";l=parseInt(this.element.style.height);this.isPercentage&&(l=this.host.height());f[0].style.visibility="inherit";if(0>l-3*parseInt(r)||l<h)f[0].style.visibility="hidden";this._setElementPosition(b,0,e);this._setElementPosition(f,
0,e+w);this._setElementPosition(d,0,e+w+c)}else{0<w&&(b[0].style.width=w+"px");0<l&&(b[0].style.height=l+"px");q=t-w-h;0>q&&(q=0);d[0].style.width=q+"px";d[0].style.height=l+"px";l=parseInt(this.element.style.width);this.isPercentage&&(l=this.host.width());f[0].style.visibility="inherit";if(0>l-3*parseInt(r)||l<h)f[0].style.visibility="hidden";this._setElementPosition(b,e,0);this._setElementPosition(f,e+w,0);this._setElementPosition(d,e+w+c,0)}}}})})(jqxBaseFramework);
(function(c){c.jqx.jqxWidget("jqxMenu","",{});c.extend(c.jqx._jqxMenu.prototype,{defineInstance:function(){var b={items:[],mode:"horizontal",width:null,height:null,minimizeWidth:"auto",easing:"easeInOutSine",animationShowDuration:200,animationHideDuration:200,autoCloseInterval:0,animationHideDelay:100,animationShowDelay:100,menuElements:[],autoSizeMainItems:!1,autoCloseOnClick:!0,autoCloseOnMouseLeave:!0,enableRoundedCorners:!0,disabled:!1,autoOpenPopup:!0,enableHover:!0,autoOpen:!0,autoGenerate:!0,
clickToOpen:!1,showTopLevelArrows:!1,touchMode:"auto",source:null,popupZIndex:1E3,rtl:!1,keyboardNavigation:!1,lockFocus:!1,title:"",events:"shown closed itemclick initialized open close".split(" ")};if(this===c.jqx._jqxMenu.prototype)return b;c.extend(!0,this,b);return b},createInstance:function(b){var d=this;this.host.attr("role","menubar");c.jqx.utilities.resize(this.host,function(){d.refresh()},!1,"popup"!=this.mode);"auto"!=this.minimizeWidth&&null!=this.minimizeWidth&&this.width&&-1==this.width.toString().indexOf("%")&&
c(window).resize(function(){d.refresh()});this.host.css("outline","none");this.source&&null!=this.source&&(b=this.loadItems(this.source),this.element.innerHTML=b);this._tmpHTML=this.element.innerHTML;this.element.innerHTML.indexOf("UL")&&(b=this.host.find("ul:first"),0<b.length&&this._createMenu(b[0]));this.host.data("autoclose",{});this._render();this._setSize();c.jqx.browser.msie&&8>c.jqx.browser.version&&this.host.attr("hideFocus",!0)},focus:function(){try{if("popup"===this.mode&&this.keyboardNavigation&&
this.host.closest("div.jqx-menu-wrapper").focus(),this.keyboardNavigation){this.host.focus();var b=this,d=function(){if(c.jqx.isHidden(c(b.items[0].element))){var e=b._nextVisibleItem(b.items[0],0);e&&(c(e.element).addClass(b.toThemeProperty("jqx-fill-state-focus")),b.activeItem=e)}else c(b.items[0].element).addClass(b.toThemeProperty("jqx-fill-state-focus")),b.activeItem=b.items[0]};this.activeItem?c.jqx.isHidden(c(this.activeItem.element))?(c(this.activeItem.element).removeClass(this.toThemeProperty("jqx-fill-state-focus")),
d()):c(this.activeItem.element).addClass(this.toThemeProperty("jqx-fill-state-focus")):d()}}catch(e){}},loadItems:function(b,d){if(null!=b){if(0==b.length)return"";var e=this;this.items=[];var g='<ul class="jqx-menu-ul">';d&&(g='<ul class="jqx-menu-ul" style="width:'+d+';">');c.map(b,function(b){if(void 0==b)return null;g+=e._parseItem(b)});return g+="</ul>"}},_parseItem:function(b){var d;if(void 0==b)return null;var e=b.label;!b.label&&b.html&&(e=b.html);e||(e="Item");"string"===typeof b&&(e=b);
var c=!1;void 0!=b.disabled&&b.disabled&&(c=!0);d="<li";c&&(d+=' item-disabled="true" ');b.label&&!b.html&&(d+=' item-label="'+e+'" ');null!=b.value&&(d+=' item-value="'+b.value+'" ');void 0!=b.id&&(d+=' id="'+b.id+'" ');d+=">"+e;b.items&&(d=b.subMenuWidth?d+this.loadItems(b.items,b.subMenuWidth):d+this.loadItems(b.items));return d+"</li>"},_setSize:function(){null!=this.width&&-1!=this.width.toString().indexOf("%")?this.host.width(this.width):null!=this.width&&-1!=this.width.toString().indexOf("px")?
this.host.width(this.width):void 0==this.width||isNaN(this.width)||this.host.width(this.width);null!=this.height&&-1!=this.height.toString().indexOf("%")?this.host.height(this.height):null!=this.height&&-1!=this.height.toString().indexOf("px")?this.host.height(this.height):void 0==this.height||isNaN(this.height)||this.host.height(this.height);null===this.height&&this.host.height("auto");if(null!=this.minimizeWidth&&"popup"!=this.mode){var b=c(window).width();if(!c.jqx.response){var d=!1;navigator.userAgent.match(/Windows|Linux|MacOS/)&&
(0<=navigator.userAgent.indexOf("Windows Phone")||0<=navigator.userAgent.indexOf("WPDesktop")||0<=navigator.userAgent.indexOf("IEMobile")||0<=navigator.userAgent.indexOf("ZuneWP7")||(d=!0));var e=this.minimizeWidth;if(d&&"auto"==this.minimizeWidth)return}if("auto"==this.minimizeWidth&&c.jqx.response){if(b=new c.jqx.response,"Phone"==b.device.type||"Tablet"==b.device.type)this.minimized||this.minimize()}else b<e&&!this.minimized?this.minimize():this.minimized&&b>=e&&this.restore()}},minimize:function(){if(!this.minimized){var b=
this;this.host.addClass(this.toThemeProperty("jqx-menu-minimized"));this.minimized=!0;this._tmpMode=this.mode;this.mode="simple";var d=this.host.closest("div.jqx-menu-wrapper");d.remove();c("#menuWrapper"+this.element.id).remove();c.each(this.items,function(){c(this.element);c(this.subMenuElement).closest("div.jqx-menu-popup").remove()});if(this.source){var e=this.loadItems(this.source);this.element.innerHTML=e;this._tmpHTML=this.element.innerHTML}this.element.innerHTML=this._tmpHTML;this.element.innerHTML.indexOf("UL")&&
(e=this.host.find("ul:first"),0<e.length&&this._createMenu(e[0]));this._render();e=this.host.find("ul:first");e.wrap('<div class="jqx-menu-wrapper" style="z-index:'+this.popupZIndex+'; padding: 0px; display: none; margin: 0px; height: auto; width: auto; position: absolute; top: 0; left: 0; display: block; visibility: visible;"></div>');d=e.closest("div.jqx-menu-wrapper");d[0].id="menuWrapper"+this.element.id;d.detach();d.appendTo(c(document.body));d.addClass(this.toThemeProperty("jqx-widget"));d.addClass(this.toThemeProperty("jqx-menu"));
d.addClass(this.toThemeProperty("jqx-menu-minimized"));d.addClass(this.toThemeProperty("jqx-widget-header"));e.children().hide();d.hide();d.find("ul").addClass(this.toThemeProperty("jqx-menu-ul-minimized"));this.minimizedItem=c("<div></div>");this.minimizedItem.addClass(this.toThemeProperty("jqx-item"));this.minimizedItem.addClass(this.toThemeProperty("jqx-menu-item-top"));this.addHandler(d,"keydown",function(e){return b.handleKeyDown(e)});this.minimizedItem.addClass(this.toThemeProperty("jqx-menu-minimized-button"));
this.minimizedItem.prependTo(this.host);this.titleElement=c("<div>"+this.title+"</div>");this.titleElement.addClass(this.toThemeProperty("jqx-item"));this.titleElement.addClass(this.toThemeProperty("jqx-menu-title"));this.titleElement.prependTo(this.host);c("<div style='clear:both;'></div>").insertAfter(this.minimizedItem);b.minimizedHidden=!0;var g=function(e){b.minimizedHidden=!0;b.minimizedItem.show();e=!1;"right"==b.minimizedItem.css("float")&&(e=!0);d.animate({left:e?b.host.coord().left+b.host.width()+
d.width():-d.outerWidth(),opacity:0},b.animationHideDuration,function(){d.find("ul:first").children().hide();d.hide()})},f=function(e){if(b.minimizedHidden){d.find("ul:first").children().show();b.minimizedHidden=!1;d.show();d.css("opacity",0);d.css("left",-d.outerWidth());var c=!1,f=d.width();"right"==b.minimizedItem.css("float")&&(d.css("left",b.host.coord().left+b.host.width()+f),c=!0);d.css("top",b.host.coord().top+b.host.height());d.animate({left:c?b.host.coord().left+b.host.width()-f:b.host.coord().left,
opacity:.95},b.animationShowDuration,function(){})}else g(e);b._raiseEvent("2",{type:"mouse",item:b.minimizedItem[0],event:e});b._setSize()};this.addHandler(c(window),"orientationchange.jqxmenu"+this.element.id,function(e){setTimeout(function(){if(!b.minimizedHidden){var e;d.width();var c=!1;e=d.width();"right"==b.minimizedItem.css("float")&&(c=!0);d.css("top",b.host.coord().top+b.host.height());d.css({left:c?b.host.coord().left+b.host.width()-e:b.host.coord().left})}},25)});this.addHandler(this.minimizedItem,
"click",function(b){f(b)})}},restore:function(){if(this.minimized){this.host.find("ul").removeClass(this.toThemeProperty("jqx-menu-ul-minimized"));this.host.removeClass(this.toThemeProperty("jqx-menu-minimized"));this.minimized=!1;this.mode=this._tmpMode;this.minimizedItem&&this.minimizedItem.remove();c("#menuWrapper"+this.element.id).remove();if(this.source){var b=this.loadItems(this.source);this._tmpHTML=this.element.innerHTML=b}this.element.innerHTML=this._tmpHTML;this.element.innerHTML.indexOf("UL")&&
(b=this.host.find("ul:first"),0<b.length&&this._createMenu(b[0]));this._setSize();this._render()}},isTouchDevice:function(){if(void 0!=this._isTouchDevice)return this._isTouchDevice;var b=c.jqx.mobile.isTouchDevice();1==this.touchMode?b=!0:0==this.touchMode&&(b=!1);b&&(this.host.addClass(this.toThemeProperty("jqx-touch")),c(".jqx-menu-item").addClass(this.toThemeProperty("jqx-touch")));return this._isTouchDevice=b},refresh:function(b){b||this._setSize()},resize:function(b,d){this.width=b;this.height=
d;this.refresh()},_closeAll:function(b){var d=null!=b?b.data:this;c.each(d.items,function(){1==this.hasItems&&this.isOpen&&d._closeItem(d,this)});"popup"==d.mode&&null!=b&&(d._isRightClick(b)||d.close())},closeItem:function(b){if(null==b)return!1;var d=document.getElementById(b),e=this;c.each(e.items,function(){1==this.isOpen&&this.element==d&&e._closeItem(e,this)});return!0},openItem:function(b){if(null==b)return!1;var d=document.getElementById(b),e=this;c.each(e.items,function(){0==this.isOpen&&
this.element==d&&(e._openItem(e,this),this.parentId&&e.openItem(this.parentId))});return!0},_getClosedSubMenuOffset:function(b){var d=c(b.subMenuElement),e=-d.outerHeight(),g=-d.outerWidth(),f=0==b.level&&"horizontal"==this.mode;f?g=0:e=0;switch(b.openVerticalDirection){case "up":case "center":e=d.outerHeight()}switch(b.openHorizontalDirection){case this._getDir("left"):g=f?0:d.outerWidth();break;case "center":g=f?0:d.outerWidth()}return{left:g,top:e}},_closeItem:function(b,d,e,g){if(null==b||null==
d)return!1;var f=c(d.subMenuElement),h=0==d.level&&"horizontal"==this.mode,l=this._getClosedSubMenuOffset(d),q=l.top,r=l.left;c(d.element);var t=f.closest("div.jqx-menu-popup");if(null!=t){l=b.animationHideDelay;1==g&&(l=0);f.data("timer")&&null!=f.data("timer").show&&(clearTimeout(f.data("timer").show),f.data("timer").show=null);var w=function(){d.isOpen=!1;h?f.stop().animate({top:q},b.animationHideDuration,function(){c(d.element).removeClass(b.toThemeProperty("jqx-fill-state-pressed"));c(d.element).removeClass(b.toThemeProperty("jqx-menu-item-top-selected"));
c(d.element).removeClass(b.toThemeProperty("jqx-rc-b-expanded"));t.removeClass(b.toThemeProperty("jqx-rc-t-expanded"));var e=c(d.arrow);0<e.length&&b.showTopLevelArrows&&(e.removeClass(),"down"==d.openVerticalDirection?(e.addClass(b.toThemeProperty("jqx-menu-item-arrow-down")),e.addClass(b.toThemeProperty("jqx-icon-arrow-down"))):(e.addClass(b.toThemeProperty("jqx-menu-item-arrow-up")),e.addClass(b.toThemeProperty("jqx-icon-arrow-up"))));c.jqx.aria(c(d.element),"aria-expanded",!1);t.css({display:"none"});
0==b.animationHideDuration&&f.css({top:q});b._raiseEvent("1",d)}):f.stop().animate({left:r},b.animationHideDuration,function(){0==b.animationHideDuration&&f.css({left:r});if(0<d.level){c(d.element).removeClass(b.toThemeProperty("jqx-fill-state-pressed"));c(d.element).removeClass(b.toThemeProperty("jqx-menu-item-selected"));var e=c(d.arrow);0<e.length&&(e.removeClass(),"left"!=d.openHorizontalDirection?(e.addClass(b.toThemeProperty("jqx-menu-item-arrow-"+b._getDir("right"))),e.addClass(b.toThemeProperty("jqx-icon-arrow-"+
b._getDir("right")))):(e.addClass(b.toThemeProperty("jqx-menu-item-arrow-"+b._getDir("left"))),e.addClass(b.toThemeProperty("jqx-icon-arrow-"+b._getDir("left")))))}else c(d.element).removeClass(b.toThemeProperty("jqx-fill-state-pressed")),c(d.element).removeClass(b.toThemeProperty("jqx-menu-item-top-selected")),e=c(d.arrow),0<e.length&&(e.removeClass(),"left"!=d.openHorizontalDirection?(e.addClass(b.toThemeProperty("jqx-menu-item-arrow-top-"+b._getDir("right"))),e.addClass(b.toThemeProperty("jqx-icon-arrow-"+
b._getDir("right")))):(e.addClass(b.toThemeProperty("jqx-menu-item-arrow-top-"+b._getDir("left"))),e.addClass(b.toThemeProperty("jqx-icon-arrow-"+b._getDir("left")))));c.jqx.aria(c(d.element),"aria-expanded",!1);t.css({display:"none"});b._raiseEvent("1",d)})};0<l?f.data("timer")&&(f.data("timer").hide=setTimeout(function(){w()},l)):w();void 0!=e&&e&&(e=f.children(),c.each(e,function(){b.menuElements[this.id]&&b.menuElements[this.id].isOpen&&(c(b.menuElements[this.id].subMenuElement),b._closeItem(b,
b.menuElements[this.id],!0,!0))}))}},getSubItems:function(b,d){if(null==b)return!1;var e=this,g=[];null!=d&&c.extend(g,d);var f=c(this.menuElements[b].subMenuElement).find(".jqx-menu-item");c.each(f,function(){g[this.id]=e.menuElements[this.id];var b=e.getSubItems(this.id,g);c.extend(g,b)});return g},disable:function(b,d){if(null!=b&&this.menuElements[b]){var e=this.menuElements[b];e.disabled=d;var g=c(e.element);e.element.disabled=d;c.each(g.children(),function(){this.disabled=d});d?(g.addClass(this.toThemeProperty("jqx-menu-item-disabled")),
g.addClass(this.toThemeProperty("jqx-fill-state-disabled"))):(g.removeClass(this.toThemeProperty("jqx-menu-item-disabled")),g.removeClass(this.toThemeProperty("jqx-fill-state-disabled")))}},getItem:function(b){return this.menuElements[b]?this.menuElements[b]:null},disableItem:function(b){this.disable(b,!0)},hideItem:function(b){this.menuElements[b]&&c(this.menuElements[b].element).hide()},showItem:function(b){this.menuElements[b]&&c(this.menuElements[b].element).show()},enableItem:function(b){this.disable(b,
!1)},_setItemProperty:function(b,d,e){null!=b&&this.menuElements[b]&&(b=this.menuElements[b],b[d]&&(b[d]=e))},setItemOpenDirection:function(b,d,e){if(null!=b){var g=c.jqx.browser.msie&&8>c.jqx.browser.version;if(this.menuElements[b]){b=this.menuElements[b];if(null!=d&&(b.openHorizontalDirection=d,b.hasItems&&0<b.level&&(d=c(b.element),void 0!=d))){var f=c(b.arrow);null==b.arrow&&(f=c('<span id="arrow'+d[0].id+'"></span>'),g?f.appendTo(d):f.prependTo(d),b.arrow=f[0]);f.removeClass();"left"==b.openHorizontalDirection?
(f.addClass(this.toThemeProperty("jqx-menu-item-arrow-"+this._getDir("left"))),f.addClass(this.toThemeProperty("jqx-icon-arrow-"+this._getDir("left")))):(f.addClass(this.toThemeProperty("jqx-menu-item-arrow-"+this._getDir("right"))),f.addClass(this.toThemeProperty("jqx-icon-arrow-"+this._getDir("right"))));f.css("visibility","inherit");g?(f.css("display","inline-block"),f.css("float","none")):(f.css("display","block"),f.css("float","right"))}null!=e&&(b.openVerticalDirection=e,f=c(b.arrow),d=c(b.element),
this.showTopLevelArrows&&void 0!=d&&(null==b.arrow&&(f=c('<span id="arrow'+d[0].id+'"></span>'),g?f.appendTo(d):f.prependTo(d),b.arrow=f[0]),f.removeClass(),"down"==b.openVerticalDirection?(f.addClass(this.toThemeProperty("jqx-menu-item-arrow-down")),f.addClass(this.toThemeProperty("jqx-icon-arrow-down"))):(f.addClass(this.toThemeProperty("jqx-menu-item-arrow-up")),f.addClass(this.toThemeProperty("jqx-icon-arrow-up"))),f.css("visibility","inherit"),g?(f.css("display","inline-block"),f.css("float",
"none")):(f.css("display","block"),f.css("float","right"))))}}},_getSiblings:function(b){for(var d=[],e=0,c=0;c<this.items.length;c++)this.items[c]!=b&&this.items[c].parentId==b.parentId&&this.items[c].hasItems&&(d[e++]=this.items[c]);return d},_openItem:function(b,d,e){if(null==b||null==d||d.isOpen||d.disabled||b.disabled)return!1;var g=b.popupZIndex;void 0!=e&&(g=e);e=b.animationHideDuration;b.animationHideDuration=0;b._closeItem(b,d,!0,!0);b.animationHideDuration=e;c(d.element).focus();e=[5,5];
var f=c(d.subMenuElement);null!=f&&f.stop();f.data("timer")&&null!=f.data("timer").hide&&clearTimeout(f.data("timer").hide);var h=f.closest("div.jqx-menu-popup"),l=c(d.element),q=0==d.level?this._getOffset(d.element):l.position();if(0<d.level&&this.hasTransform){var r=parseInt(l.coord().top)-parseInt(this._getOffset(d.element).top);q.top+=r}0==d.level&&"popup"==this.mode&&(q=l.coord());var t=0==d.level&&"horizontal"==this.mode,r=t?q.left:null!=this.menuElements[d.parentId]&&null!=this.menuElements[d.parentId].subMenuElement?
parseInt(c(c(this.menuElements[d.parentId].subMenuElement).closest("div.jqx-menu-popup")).outerWidth())-e[0]:parseInt(f.outerWidth());h.css({visibility:"visible",display:"block",left:r,top:t?q.top+l.outerHeight():q.top,zIndex:g});f.css("display","block");"horizontal"!=this.mode&&0==d.level?(r=this._getOffset(this.element),h.css("left",-1+r.left+this.host.outerWidth()),f.css("left",-f.outerWidth())):(r=this._getClosedSubMenuOffset(d),f.css("left",r.left),f.css("top",r.top));h.css({height:parseInt(f.outerHeight())+
parseInt(e[1])+"px"});var w=0,z=0;switch(d.openVerticalDirection){case "up":t?(f.css("top",f.outerHeight()),w=e[1],r=parseInt(f.parent().css("padding-bottom")),isNaN(r)&&(r=0),0<r&&h.addClass(this.toThemeProperty("jqx-menu-popup-clear")),f.css("top",f.outerHeight()-r),h.css({display:"block",top:q.top-h.outerHeight(),zIndex:g})):(w=e[1],f.css("top",f.outerHeight()),h.css({display:"block",top:q.top-h.outerHeight()+e[1]+l.outerHeight(),zIndex:g}));break;case "center":t?(f.css("top",0),h.css({display:"block",
top:q.top-h.outerHeight()/2+e[1],zIndex:g})):(f.css("top",0),h.css({display:"block",top:q.top+l.outerHeight()/2-h.outerHeight()/2+e[1],zIndex:g}))}switch(d.openHorizontalDirection){case this._getDir("left"):t?h.css({left:q.left-(h.outerWidth()-l.outerWidth()-e[0])}):(z=0,f.css("left",h.outerWidth()),h.css({left:q.left-h.outerWidth()+2*d.level}));break;case "center":t?h.css({left:q.left-(h.outerWidth()/2-l.outerWidth()/2-e[0]/2)}):(h.css({left:q.left-(h.outerWidth()/2-l.outerWidth()/2-e[0]/2)}),f.css("left",
h.outerWidth()))}if(t){if(parseInt(f.css("top"))==w){d.isOpen=!0;return}}else if(parseInt(f.css("left"))==z){1==d.isOpen;return}c.each(b._getSiblings(d),function(){b._closeItem(b,this,!0,!0)});g=c.data(b.element,"animationHideDelay");b.animationHideDelay=g;0<this.autoCloseInterval&&(null!=this.host.data("autoclose")&&null!=this.host.data("autoclose").close&&clearTimeout(this.host.data("autoclose").close),null!=this.host.data("autoclose")&&(this.host.data("autoclose").close=setTimeout(function(){b._closeAll()},
this.autoCloseInterval)));f.data("timer")&&(f.data("timer").show=setTimeout(function(){if(null!=h)if(t){f.stop();f.css("left",z);l.addClass(b.toThemeProperty("jqx-fill-state-pressed"));l.addClass(b.toThemeProperty("jqx-menu-item-top-selected"));"down"==d.openVerticalDirection?(c(d.element).addClass(b.toThemeProperty("jqx-rc-b-expanded")),h.addClass(b.toThemeProperty("jqx-rc-t-expanded"))):(c(d.element).addClass(b.toThemeProperty("jqx-rc-t-expanded")),h.addClass(b.toThemeProperty("jqx-rc-b-expanded")));
var e=c(d.arrow);0<e.length&&b.showTopLevelArrows&&(e.removeClass(),"down"==d.openVerticalDirection?(e.addClass(b.toThemeProperty("jqx-menu-item-arrow-down-selected")),e.addClass(b.toThemeProperty("jqx-icon-arrow-down"))):(e.addClass(b.toThemeProperty("jqx-menu-item-arrow-up-selected")),e.addClass(b.toThemeProperty("jqx-icon-arrow-up"))));0==b.animationShowDuration?(f.css({top:w}),d.isOpen=!0,b._raiseEvent("0",d),c.jqx.aria(c(d.element),"aria-expanded",!0)):f.animate({top:w},b.animationShowDuration,
b.easing,function(){d.isOpen=!0;c.jqx.aria(c(d.element),"aria-expanded",!0);b._raiseEvent("0",d)})}else f.stop(),f.css("top",w),0<d.level?(l.addClass(b.toThemeProperty("jqx-fill-state-pressed")),l.addClass(b.toThemeProperty("jqx-menu-item-selected"))):(l.addClass(b.toThemeProperty("jqx-fill-state-pressed")),l.addClass(b.toThemeProperty("jqx-menu-item-top-selected"))),e=c(d.arrow),0<e.length&&(e.removeClass(),"left"!=d.openHorizontalDirection?(e.addClass(b.toThemeProperty("jqx-menu-item-arrow-"+b._getDir("right")+
"-selected")),e.addClass(b.toThemeProperty("jqx-icon-arrow-"+b._getDir("right")))):(e.addClass(b.toThemeProperty("jqx-menu-item-arrow-"+b._getDir("left")+"-selected")),e.addClass(b.toThemeProperty("jqx-icon-arrow-"+b._getDir("left"))))),0==b.animationShowDuration?(f.css({left:z}),b._raiseEvent("0",d),d.isOpen=!0,c.jqx.aria(c(d.element),"aria-expanded",!0)):f.animate({left:z},b.animationShowDuration,b.easing,function(){b._raiseEvent("0",d);d.isOpen=!0;c.jqx.aria(c(d.element),"aria-expanded",!0)})},
this.animationShowDelay))},_getDir:function(b){switch(b){case "left":return this.rtl?"right":"left";case "right":return this.rtl?"left":"right"}return"left"},_applyOrientation:function(b,d){var e=this,g=0;e.host.removeClass(e.toThemeProperty("jqx-menu-horizontal"));e.host.removeClass(e.toThemeProperty("jqx-menu-vertical"));e.host.removeClass(e.toThemeProperty("jqx-menu"));e.host.removeClass(e.toThemeProperty("jqx-widget"));e.host.addClass(e.toThemeProperty("jqx-widget"));e.host.addClass(e.toThemeProperty("jqx-menu"));
if(void 0!=b&&void 0!=d&&"popup"==d){if(0<e.host.parent().length&&0<e.host.parent().parent().length&&e.host.parent().parent()[0]==document.body){var f=c.data(document.body,"jqxMenuOldHost"+e.element.id);if(null!=f){var h=e.host.closest("div.jqx-menu-wrapper");h.remove();h.appendTo(f);e.host.css("display","block");e.host.css("visibility","visible");h.css("display","block");h.css("visibility","visible")}}}else void 0==b&&void 0==d&&c.data(document.body,"jqxMenuOldHost"+e.element.id,e.host.parent()[0]);
e.autoOpenPopup?"popup"==e.mode?(e.addHandler(c(document),"contextmenu."+e.element.id,function(b){return!1}),e.addHandler(c(document),"mousedown.menu"+e.element.id,function(b){e._openContextMenu(b)})):(e.removeHandler(c(document),"contextmenu."+e.element.id),e.removeHandler(c(document),"mousedown.menu"+e.element.id)):(e.removeHandler(c(document),"contextmenu."+e.element.id),e.removeHandler(c(document),"mousedown.menu"+e.element.id),e.addHandler(c(document),"contextmenu."+e.element.id,function(b){if(b.target&&
b.target.className.indexOf&&0<=b.target.className.indexOf("jqx-menu"))return!1}));e.rtl&&e.host.addClass(e.toThemeProperty("jqx-rtl"));switch(e.mode){case "horizontal":e.host.addClass(e.toThemeProperty("jqx-widget-header"));e.host.addClass(e.toThemeProperty("jqx-menu-horizontal"));c.each(e.items,function(){$element=c(this.element);var b=c(this.arrow);b.removeClass();this.hasItems&&0<this.level&&(b=c('<span style="border: none; background-color: transparent;" id="arrow'+$element[0].id+'"></span>'),
b.prependTo($element),b.css("float",e._getDir("right")),b.addClass(e.toThemeProperty("jqx-menu-item-arrow-"+e._getDir("right"))),b.addClass(e.toThemeProperty("jqx-icon-arrow-"+e._getDir("right"))),this.arrow=b[0]);if(0==this.level){c(this.element).css("float",e._getDir("left"));if(!this.ignoretheme&&this.hasItems&&e.showTopLevelArrows){var b=c('<span style="border: none; background-color: transparent;" id="arrow'+$element[0].id+'"></span>'),d=c.jqx.browser.msie&&8>c.jqx.browser.version;null==this.arrow?
d?b.appendTo($element):b.prependTo($element):b=c(this.arrow);"down"==this.openVerticalDirection?(b.addClass(e.toThemeProperty("jqx-menu-item-arrow-down")),b.addClass(e.toThemeProperty("jqx-icon-arrow-down"))):(b.addClass(e.toThemeProperty("jqx-menu-item-arrow-up")),b.addClass(e.toThemeProperty("jqx-icon-arrow-up")));b.css("visibility","inherit");d?b.css("display","inline-block"):(b.css("display","block"),b.css("float","right"));this.arrow=b[0]}else this.ignoretheme||!this.hasItems||e.showTopLevelArrows||
null==this.arrow||(b=c(this.arrow),b.remove(),this.arrow=null);g=Math.max(g,$element.height())}});break;case "vertical":case "popup":case "simple":e.host.addClass(e.toThemeProperty("jqx-menu-vertical")),c.each(e.items,function(){$element=c(this.element);if(this.hasItems&&!this.ignoretheme){this.arrow&&c(this.arrow).remove();if("simple"==e.mode)return!0;var b=c('<span style="border: none; background-color: transparent;" id="arrow'+$element[0].id+'"></span>');b.prependTo($element);b.css("float","right");
0==this.level?b.addClass(e.toThemeProperty("jqx-menu-item-arrow-top-"+e._getDir("right"))):b.addClass(e.toThemeProperty("jqx-menu-item-arrow-"+e._getDir("right")));b.addClass(e.toThemeProperty("jqx-icon-arrow-"+e._getDir("right")));this.arrow=b[0]}$element.css("float","none")}),"popup"==e.mode?(e.host.addClass(e.toThemeProperty("jqx-widget-content")),e.host.wrap('<div tabindex=0 class="jqx-menu-wrapper" style="z-index:'+e.popupZIndex+'; border: none; background-color: transparent; padding: 0px; margin: 0px; position: absolute; top: 0; left: 0; display: block; visibility: visible;"></div>'),
h=e.host.closest("div.jqx-menu-wrapper"),e.host.addClass(e.toThemeProperty("jqx-popup")),h[0].id="menuWrapper"+e.element.id,h.appendTo(c(document.body)),e.addHandler(h,"keydown",function(b){return e.handleKeyDown(b)})):e.host.addClass(e.toThemeProperty("jqx-widget-header")),"popup"==e.mode&&(f=e.host.height(),e.host.css("position","absolute"),e.host.css("top","0"),e.host.css("left","0"),"simple"!=e.mode&&(e.host.height(f),e.host.css("display","none")))}f=e.isTouchDevice();e.autoCloseOnClick&&(e.removeHandler(c(document),
"mousedown.menu"+e.element.id,e._closeAfterClick),e.addHandler(c(document),"mousedown.menu"+e.element.id,e._closeAfterClick,e),f&&(e.removeHandler(c(document),c.jqx.mobile.getTouchEventName("touchstart")+".menu"+e.element.id,e._closeAfterClick,e),e.addHandler(c(document),c.jqx.mobile.getTouchEventName("touchstart")+".menu"+e.element.id,e._closeAfterClick,e)))},_getBodyOffset:function(){var b=0,d=0;"0px"!=c("body").css("border-top-width")&&(b=parseInt(c("body").css("border-top-width")),isNaN(b)&&(b=
0));"0px"!=c("body").css("border-left-width")&&(d=parseInt(c("body").css("border-left-width")),isNaN(d)&&(d=0));return{left:d,top:b}},_getOffset:function(b){var d=c.jqx.mobile.isSafariMobileBrowser(),e=c(b).coord(!0),g=e.top,e=e.left;"0px"!=c("body").css("border-top-width")&&(g=parseInt(g)+this._getBodyOffset().top);"0px"!=c("body").css("border-left-width")&&(e=parseInt(e)+this._getBodyOffset().left);var f=c.jqx.mobile.isWindowsPhone(),h=c.jqx.mobile.isTouchDevice();return this.hasTransform||null!=
d&&d||f||h?{left:c.jqx.mobile.getLeftPos(b),top:c.jqx.mobile.getTopPos(b)}:{left:e,top:g}},_isRightClick:function(b){var d;b||(b=window.event);b.which?d=3==b.which:b.button&&(d=2==b.button);return d},_openContextMenu:function(b){this._isRightClick(b)&&this.open(parseInt(b.clientX)+5,parseInt(b.clientY)+5)},close:function(){var b=this;c.data(this.element,"contextMenuOpened"+this.element.id)&&(c.each(b.items,function(){this.hasItems&&b._closeItem(b,this)}),c.each(b.items,function(){1==this.isOpen&&
($submenu=c(this.subMenuElement),$submenu.closest("div.jqx-menu-popup").hide(this.animationHideDuration))}),this.host.hide(this.animationHideDuration),c.data(b.element,"contextMenuOpened"+this.element.id,!1),b._raiseEvent("1",b),b._raiseEvent("5"))},open:function(b,d){if("popup"==this.mode){var e=0;"block"==this.host.css("display")&&(this.close(),e=this.animationHideDuration);var g=this;if(void 0==b||null==b)b=0;if(void 0==d||null==d)d=0;setTimeout(function(){g.host.show(g.animationShowDuration);
g.host.css("visibility","visible");c.data(g.element,"contextMenuOpened"+g.element.id,!0);g._raiseEvent("0",g);g._raiseEvent("4",{left:b,top:d});g.host.css("z-index",g.popupZIndex);void 0!=b&&void 0!=d&&g.host.css({left:b,top:d});g.focus()},e)}},_renderHover:function(b,d,e){var c=this;d.ignoretheme||(this.addHandler(b,"mouseenter",function(){c.hoveredItem=d;d.disabled||d.separator||!c.enableHover||c.disabled||(0<d.level?(b.addClass(c.toThemeProperty("jqx-fill-state-hover")),b.addClass(c.toThemeProperty("jqx-menu-item-hover"))):
(b.addClass(c.toThemeProperty("jqx-fill-state-hover")),b.addClass(c.toThemeProperty("jqx-menu-item-top-hover"))))}),this.addHandler(b,"mouseleave",function(){d.disabled||d.separator||!c.enableHover||c.disabled||(0<d.level?(b.removeClass(c.toThemeProperty("jqx-fill-state-hover")),b.removeClass(c.toThemeProperty("jqx-menu-item-hover"))):(b.removeClass(c.toThemeProperty("jqx-fill-state-hover")),b.removeClass(c.toThemeProperty("jqx-menu-item-top-hover"))))}))},_closeAfterClick:function(b){var d=null!=
b?b.data:this,e=!1;d.autoCloseOnClick&&(c.each(c(b.target).parents(),function(){if(this.className.indexOf&&-1!=this.className.indexOf("jqx-menu"))return e=!0,!1}),e||(b.data=d,d._closeAll(b)))},_autoSizeHorizontalMenuItems:function(){var b=this;if(b.autoSizeMainItems&&"horizontal"==this.mode){var d=this.maxHeight;parseInt(d)>parseInt(this.host.height())&&(d=parseInt(this.host.height()));d=parseInt(this.host.height());c.each(this.items,function(){$element=c(this.element);if(0==this.level&&0<d){var e=
0<$element.children().length?parseInt($element.children().height()):$element.height(),g=b.host.find("ul:first"),f=parseInt(g.css("padding-top")),g=parseInt(g.css("margin-top")),f=d-2*(g+f),g=parseInt(f)/2-e/2,e=parseInt(g),g=parseInt(g);$element.css("padding-top",e);$element.css("padding-bottom",g);parseInt($element.outerHeight())>f&&$element.css("padding-top",e-1)}})}c.each(this.items,function(){$element=c(this.element);if(this.hasItems&&0<this.level&&this.arrow){var b=c(this.arrow),d=c(this.element).height();
15<d&&b.css("margin-top",(d-15)/2)}})},_nextVisibleItem:function(b,d){if(null==b||void 0==b)return null;for(var e=b;null!=e;)if(e=e.nextItem,this._isVisible(e)&&!e.disabled&&"separator"!==e.type&&(this.minimized||void 0==d||!e||e.level==d))return e;return null},_prevVisibleItem:function(b,d){if(null==b||void 0==b)return null;for(var e=b;null!=e;)if(e=e.prevItem,this._isVisible(e)&&!e.disabled&&"separator"!==e.type&&(this.minimized||void 0==d||!e||e.level==d))return e;return null},_parentItem:function(b){if(null==
b||void 0==b)return null;var d=b.parentElement;if(!d)return null;var e=null;c.each(this.items,function(){if(this.element==d)return e=this,!1});return e},_isElementVisible:function(b){return null==b?!1:"none"!=c(b).css("display")&&"hidden"!=c(b).css("visibility")?!0:!1},_isVisible:function(b){if(null==b||void 0==b||!this._isElementVisible(b.element))return!1;b=this._parentItem(b);if(null==b||this.minimized)return!0;if(null!=b)if(this._isElementVisible(b.element)&&(b.isOpen||this.minimized))for(;null!=
b;){if(b=this._parentItem(b),null!=b&&!this._isElementVisible(b.element)||null!=b&&!b.isOpen)return!1}else return!1;return!0},_render:function(b,d){this.disabled&&(this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")),this.host.addClass(this.toThemeProperty("jqx-menu-disabled")));void 0==this.host.attr("tabindex")&&this.host.attr("tabindex",0);var e=this.popupZIndex,g=[5,5],f=this;c.data(f.element,"animationHideDelay",f.animationHideDelay);var h=this.isTouchDevice(),l=h&&(c.jqx.mobile.isWindowsPhone()||
0<=navigator.userAgent.indexOf("Touch"));-1!=navigator.platform.toLowerCase().indexOf("win")&&(0<=navigator.userAgent.indexOf("Windows Phone")||0<=navigator.userAgent.indexOf("WPDesktop")||0<=navigator.userAgent.indexOf("IEMobile")||0<=navigator.userAgent.indexOf("ZuneWP7")?this.touchDevice=!0:0<=navigator.userAgent.indexOf("Touch")&&("MSPointerDown"in window||c.jqx.mobile.isWindowsPhone()||0<=navigator.userAgent.indexOf("ARM"))&&(l=!0,f.clickToOpen=!0,f.autoCloseOnClick=!1,f.enableHover=!1));c.data(document.body,
"menuel",this);this.hasTransform=c.jqx.utilities.hasTransform(this.host);this._applyOrientation(b,d);this.removeHandler(this.host,"blur");this.removeHandler(this.host,"focus");this.addHandler(this.host,"blur",function(b){!f.keyboardNavigation||!f.activeItem||"popup"===f.mode&&document.activeElement&&0<=document.activeElement.className.indexOf("jqx-menu-wrapper")||(c(f.activeItem.element).removeClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=null)});this.addHandler(this.host,"focus",
function(b){f.keyboardNavigation&&!f.activeItem&&(f.hoveredItem?(c(f.hoveredItem.element).addClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=f.hoveredItem):(b=function(){if(c.jqx.isHidden(c(f.items[0].element))){var b=f._nextVisibleItem(f.items[0],0);b&&(c(b.element).addClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=b)}else c(f.items[0].element).addClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=f.items[0]},f.activeItem?c.jqx.isHidden(c(f.activeItem.element))?
(c(f.activeItem.element).removeClass(f.toThemeProperty("jqx-fill-state-focus")),b()):c(f.activeItem.element).addClass(f.toThemeProperty("jqx-fill-state-focus")):b()))});this.removeHandler(this.host,"keydown.menu"+this.element.id);f.handleKeyDown=function(b){if(f.keyboardNavigation){if("input"===b.target.nodeName.toLowerCase())return!0;var e=null,d=null;c.each(f.items,function(){if(this.disabled)return!0;0<=this.element.className.indexOf("pressed")&&(d=this);if(0<=this.element.className.indexOf("focus"))return e=
this,!1});if(!e&&d)return e=d,!1;if(!e)return c(f.items[0].element).addClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=f.items[0],e=f.activeItem,!1;if(27==b.keyCode&&(b.data=f,f._closeAll(b),e))for(var g=e;null!=g;)g.parentItem||(c(f.activeItem.element).removeClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=g,c(f.activeItem.element).addClass(f.toThemeProperty("jqx-fill-state-focus"))),g=g.parentItem;if(13==b.keyCode&&e){f._raiseEvent("2",{item:e.element,event:b,type:"keyboard"});
var h=null!=e.anchor?c(e.anchor):null;null!=h&&0<h.length&&(g=h.attr("href"),h=h.attr("target"),null!=g&&(null!=h?window.open(g,h):window.location=g));b.preventDefault();b.stopPropagation();c(e.element).focus()}var h=function(b){if(null==b)return[];for(var e=[],d=0,c=0;c<f.items.length;c++)f.items[c].parentId==b.parentId&&(e[d++]=f.items[c]);return e},l="";switch(b.keyCode){case 40:l="down";break;case 38:l="up";break;case 39:l="right";break;case 37:l="left"}e&&"left"===e.openHorizontalDirection&&
"left"===l&&(l="right");e&&"left"===e.openHorizontalDirection&&"right"===l&&(l="left");e&&"top"===e.openVerticalDirection&&"top"===l&&(l="bottom");e&&"top"===e.openVerticalDirection&&"bottom"===l&&(l="top");f.rtl&&("right"===l?l="left":"left"===l&&(l="right"));if("right"===l&&!f.minimized){if(b.altKey&&(0!=e.level&&e.hasItems||"horizontal"!=f.mode))f._openItem(f,e);else{var v=f._nextVisibleItem(e,0),y=f._nextVisibleItem(e),g=h(y);v||(v=y);v&&(v.parentId===e.parentId&&0==v.level&&"horizontal"==f.mode||
y.id==g[0].id&&0!=y.level)&&(y.id==g[0].id&&(0!=e.level||0==e.level&&"horizontal"!=f.mode)&&(v=y),c(v.element).addClass(f.toThemeProperty("jqx-fill-state-focus")),c(e.element).removeClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=v)}b.preventDefault();b.stopPropagation()}"left"!==l||f.minimized||(b.altKey&&(0!=e.level&&"horizontal"!==f.mode||1<e.level&&"horizontal"===f.mode||1==e.level&&e.hasItems&&"horizontal"===f.mode)?e.hasItems?f._closeItem(f,e):e.parentItem&&(f._closeItem(f,e.parentItem),
c(e.parentItem.element).addClass(f.toThemeProperty("jqx-fill-state-focus")),c(e.element).removeClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=e.parentItem):(v=f._prevVisibleItem(e,0),g=e.parentItem,v&&v.parentId===e.parentId&&0==v.level&&"horizontal"==f.mode?(c(v.element).addClass(f.toThemeProperty("jqx-fill-state-focus")),c(e.element).removeClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=v):g&&0==g.level&&"horizontal"==f.mode||!g||g.level!=e.level-1||(c(g.element).addClass(f.toThemeProperty("jqx-fill-state-focus")),
c(e.element).removeClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=g)),b.preventDefault(),b.stopPropagation());if("down"===l)b.altKey?(0==e.level&&e.hasItems&&f._openItem(f,e),f.minimized&&f.minimizedHidden&&f.minimizedItem.trigger("click")):(v=f._nextVisibleItem(e,e.level),g=h(v),f.minimized&&v?(c(v.element).addClass(f.toThemeProperty("jqx-fill-state-focus")),c(e.element).removeClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=v):(!v||v.parentId!==e.parentId&&(v.id!=g[0].id||
"horizontal"!=f.mode)||0==v.level&&"horizontal"==f.mode||(c(v.element).addClass(f.toThemeProperty("jqx-fill-state-focus")),c(e.element).removeClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=v),"horizontal"===f.mode&&0===e.level&&e.isOpen&&e.hasItems&&(v=f._nextVisibleItem(e),c(v.element).addClass(f.toThemeProperty("jqx-fill-state-focus")),c(e.element).removeClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=v))),b.preventDefault(),b.stopPropagation();else if("up"===l){if(b.altKey)e.parentItem&&
0==e.parentItem.level?(f._closeItem(f,e.parentItem),c(e.parentItem.element).addClass(f.toThemeProperty("jqx-fill-state-focus")),c(e.element).removeClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=e.parentItem):null===e.parentItem&&0===e.level&&"horizontal"===f.mode&&f._closeItem(f,e),f.minimized&&(f.minimizedHidden||f.minimizedItem.trigger("click"));else if(v=f._prevVisibleItem(e,e.level),g=h(e),f.minimized&&v)c(v.element).addClass(f.toThemeProperty("jqx-fill-state-focus")),c(e.element).removeClass(f.toThemeProperty("jqx-fill-state-focus")),
f.activeItem=v;else if(v&&(v.parentId===e.parentId||v.id==e.parentId&&0==v.level&&"horizontal"==f.mode)){if(0!=v.level||"horizontal"!==f.mode||0!==e.level)c(v.element).addClass(f.toThemeProperty("jqx-fill-state-focus")),c(e.element).removeClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=v}else e&&e.id==g[0].id&&e.parentItem&&0===e.parentItem.level&&"horizontal"===f.mode&&(v=e.parentItem,c(v.element).addClass(f.toThemeProperty("jqx-fill-state-focus")),c(e.element).removeClass(f.toThemeProperty("jqx-fill-state-focus")),
f.activeItem=v);b.preventDefault();b.stopPropagation()}if(9==b.keyCode)if(v=b.shiftKey?f._prevVisibleItem(e):f._nextVisibleItem(e))c(v.element).addClass(f.toThemeProperty("jqx-fill-state-focus")),c(e.element).removeClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=v,b.preventDefault(),b.stopPropagation();else if(f.lockFocus){g=[];for(l=h=0;l<f.items.length;l++)f.items[l]!=e&&f.items[l].parentId==e.parentId&&(g[h++]=f.items[l]);0<g.length&&(b.shiftKey?(c(g[g.length-1].element).addClass(f.toThemeProperty("jqx-fill-state-focus")),
f.activeItem=g[g.length-1]):(c(g[0].element).addClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=g[0]),c(e.element).removeClass(f.toThemeProperty("jqx-fill-state-focus")));b.preventDefault();b.stopPropagation()}else e&&(c(e.element).removeClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=null)}else return!0};this.addHandler(this.host,"keydown.menu"+this.element.id,function(b){f.handleKeyDown(b)});f.enableRoundedCorners&&this.host.addClass(f.toThemeProperty("jqx-rc-all"));
c.each(this.items,function(){var b=this,d=c(b.element);d.attr("role","menuitem");f.enableRoundedCorners&&d.addClass(f.toThemeProperty("jqx-rc-all"));f.removeHandler(d,"click");f.addHandler(d,"click",function(e){if(!b.disabled&&!f.disabled&&(f.keyboardNavigation&&(f.activeItem&&c(f.activeItem.element).removeClass(f.toThemeProperty("jqx-fill-state-focus")),f.activeItem=b,c(b.element).addClass(f.toThemeProperty("jqx-fill-state-focus")),f.minimized&&e.stopPropagation()),f._raiseEvent("2",{type:"mouse",
item:b.element,event:e}),f.autoOpen?f.autoCloseOnClick&&!h&&!f.clickToOpen&&b.closeOnClick&&(e.data=f,f._closeAll(e)):0<b.level&&f.autoCloseOnClick&&!h&&!f.clickToOpen&&(e.data=f,f._closeAll(e)),h&&f.autoCloseOnClick&&(e.data=f,b.hasItems||f._closeAll(e)),"A"!=e.target.tagName&&"a"!=e.target.tagName)){var d=null!=b.anchor?c(b.anchor):null;null!=d&&0<d.length&&(e=d.attr("href"),d=d.attr("target"),null!=e&&(null!=d?window.open(e,d):window.location=e))}});f.removeHandler(d,"mouseenter");f.removeHandler(d,
"mouseleave");l||"simple"==f.mode||f._renderHover(d,b,h);if(null!=b.subMenuElement){var t=c(b.subMenuElement);if("simple"==f.mode)return t.show(),!0;t.wrap('<div class="jqx-menu-popup '+f.toThemeProperty("jqx-menu-popup")+'" style="border: none; background-color: transparent; z-index:'+e+'; padding: 0px; margin: 0px; position: absolute; top: 0; left: 0; display: block; visibility: hidden;"><div style="background-color: transparent; border: none; position:absolute; overflow:hidden; left: 0; top: 0; right: 0; width: 100%; height: 100%;"></div></div>');
t.css({overflow:"hidden",position:"absolute",left:0,display:"inherit",top:-t.outerHeight()});t.data("timer",{});0<b.level?t.css("left",-t.outerWidth()):"horizontal"==f.mode&&t.css("left",0);e++;var w=c(b.subMenuElement).closest("div.jqx-menu-popup").css({width:parseInt(c(b.subMenuElement).outerWidth())+parseInt(g[0])+"px",height:parseInt(c(b.subMenuElement).outerHeight())+parseInt(g[1])+"px"}),z=d.closest("div.jqx-menu-popup");if(0<z.length){var B=t.css("margin-left"),v=t.css("margin-right"),y=t.css("padding-left"),
C=t.css("padding-right");w.appendTo(z)}else B=t.css("margin-left"),v=t.css("margin-right"),y=t.css("padding-left"),C=t.css("padding-right"),w.appendTo(c(document.body));t.css("margin-left",B);t.css("margin-right",v);t.css("padding-left",y);t.css("padding-right",C);if(f.clickToOpen)f.removeHandler(d,"mousedown"),f.addHandler(d,"mousedown",function(e){clearTimeout(t.data("timer").hide);null!=t&&t.stop();0!=b.level||b.isOpen||(e.data=f,f._closeAll(e));b.isOpen?f._closeItem(f,b,!0):f._openItem(f,b)});
else{if(h||l)f.removeHandler(d,c.jqx.mobile.getTouchEventName("touchstart")),f.addHandler(d,c.jqx.mobile.getTouchEventName("touchstart"),function(e){clearTimeout(t.data("timer").hide);null!=t&&t.stop();0!=b.level||b.isOpen||"popup"==f.mode||(e.data=f,f._closeAll(e));b.isOpen?f._closeItem(f,b,!0):f._openItem(f,b);return!1});l||(f.addHandler(d,"mouseenter",function(){(f.autoOpen||0<b.level&&!f.autoOpen)&&clearTimeout(t.data("timer").hide);if(!b.parentId||0==b.parentId||!f.menuElements[b.parentId]||
f.menuElements[b.parentId].isOpen)return(f.autoOpen||0<b.level&&!f.autoOpen)&&f._openItem(f,b),!1}),f.addHandler(d,"mousedown",function(){f.autoOpen||0!=b.level||(clearTimeout(t.data("timer").hide),null!=t&&t.stop(),b.isOpen?f._closeItem(f,b,!0):f._openItem(f,b))}),f.addHandler(d,"mouseleave",function(e){if(f.autoCloseOnMouseLeave){clearTimeout(t.data("timer").hide);var d=c(b.subMenuElement),g=parseInt(e.pageX);e=parseInt(e.pageY);var h=parseInt(d.coord().left),l=parseInt(d.coord().top),v=parseInt(d.outerWidth()),
d=parseInt(d.outerHeight()),y=!0;h-5<=g&&g<=h+v+5&&l<=e&&e<=l+d&&(y=!1);y&&f._closeItem(f,b,!0)}}),f.removeHandler(w,"mouseenter"),f.addHandler(w,"mouseenter",function(){clearTimeout(t.data("timer").hide)}),f.removeHandler(w,"mouseleave"),f.addHandler(w,"mouseleave",function(e){f.autoCloseOnMouseLeave&&(clearTimeout(t.data("timer").hide),clearTimeout(t.data("timer").show),null!=t&&t.stop(),f._closeItem(f,b,!0))}))}}});"simple"==this.mode&&this._renderSimpleMode();this._autoSizeHorizontalMenuItems();
this._raiseEvent("3",this)},_renderSimpleMode:function(){this.host.show()},createID:function(){for(var b=Math.random()+"",b=b.replace(".",""),b=("99"+b)/1;this.items[b];)b=Math.random()+"",b=b.replace(".",""),b/=1;return"menuItem"+b},_createMenu:function(b,d){if(null!=b){void 0==d&&(d=!0);null==d&&(d=!0);c(b).addClass("jqx-menu-ul");var e=c(b).find("li"),g=0;this.itemMapping=[];for(var f=0;f<e.length;f++){var h=e[f],l=c(h);if(-1!=h.className.indexOf("jqx-menu")||0!=this.autoGenerate){var q=h.id;q||
(q=this.createID());d&&(h.id=q,this.items[g]=new c.jqx._jqxMenu.jqxMenuItem,this.menuElements[q]=this.items[g]);var g=g+1,r=0,t=this;l.children().each(function(){d||(this.className="",t.autoGenerate&&(c(t.items[g-1].subMenuElement)[0].className="",t.minimized||c(t.items[g-1].subMenuElement).addClass(t.toThemeProperty("jqx-widget-content")),c(t.items[g-1].subMenuElement).addClass(t.toThemeProperty("jqx-menu-dropdown")),c(t.items[g-1].subMenuElement).addClass(t.toThemeProperty("jqx-popup"))));if(-1!=
this.className.indexOf("jqx-menu-dropdown"))return d&&(t.items[g-1].subMenuElement=this),!1;if(t.autoGenerate&&("ul"==this.tagName||"UL"==this.tagName))return d&&(t.items[g-1].subMenuElement=this),this.className="",t.minimized||c(this).addClass(t.toThemeProperty("jqx-widget-content")),c(this).addClass(t.toThemeProperty("jqx-menu-dropdown")),c(this).addClass(t.toThemeProperty("jqx-popup")),c(this).attr("role","menu"),t.rtl?c(this).addClass(t.toThemeProperty("jqx-rc-l")):c(this).addClass(t.toThemeProperty("jqx-rc-r")),
c(this).addClass(t.toThemeProperty("jqx-rc-b")),!1});l.parents().each(function(){if(-1!=this.className.indexOf("jqx-menu-item")||t.autoGenerate&&("li"==this.tagName||"LI"==this.tagName))return r=this.id,!1});var w=!1,z=h.getAttribute("type"),B=h.getAttribute("ignoretheme")||h.getAttribute("data-ignoretheme");if(B){if("true"==B||1==B)B=!0}else B=!1;z?"separator"==z&&(w=!0):z=h.type;w||(z=r?"sub":"top");var v=this.items[g-1];d&&(v.id=q,v.parentId=r,v.type=z,v.separator=w,v.element=e[f],q=l.children("a"),
v.disabled="true"==h.getAttribute("item-disabled")?!0:!1,v.level=l.parents("li").length,v.anchor=0<q.length?q:null,v.anchor&&c(v.anchor).attr("tabindex",-1));v.ignoretheme=B;h=this.menuElements[r];null!=h&&(h.ignoretheme&&(B=v.ignoretheme=h.ignoretheme),v.parentItem=h,v.parentElement=h.element);this.autoGenerate&&("separator"==z?(l.removeClass(),l.addClass(this.toThemeProperty("jqx-menu-item-separator")),l.attr("role","separator")):B||(0<=l[0].className.indexOf("jqx-grid-menu-item-touch")?l[0].className=
this.toThemeProperty("jqx-grid-menu-item-touch"):l[0].className="",this.rtl&&l.addClass(this.toThemeProperty("jqx-rtl")),0<v.level&&!t.minimized?(l.addClass(this.toThemeProperty("jqx-item")),l.addClass(this.toThemeProperty("jqx-menu-item"))):(l.addClass(this.toThemeProperty("jqx-item")),l.addClass(this.toThemeProperty("jqx-menu-item-top")))));v.disabled&&(l.addClass(t.toThemeProperty("jqx-menu-item-disabled")),l.addClass(t.toThemeProperty("jqx-fill-state-disabled")));this.itemMapping[f]={element:e[f],
item:v};this.itemMapping["id"+e[f].id]=this.itemMapping[f];d&&!B&&(v.hasItems=0<l.find("li").length,v.hasItems&&v.element&&(c.jqx.aria(c(v.element),"aria-haspopup",!0),v.subMenuElement.id||(v.subMenuElement.id=c.jqx.utilities.createId()),c.jqx.aria(c(v.element),"aria-owns",v.subMenuElement.id)))}}for(f=0;f<e.length;f++)if(v=e[f],this.itemMapping["id"+v.id]&&(v=this.itemMapping["id"+v.id].item))v.prevItem=null,v.nextItem=null,0<f&&this.itemMapping["id"+e[f-1].id]&&(v.prevItem=this.itemMapping["id"+
e[f-1].id].item),f<e.length-1&&this.itemMapping["id"+e[f+1].id]&&(v.nextItem=this.itemMapping["id"+e[f+1].id].item)}},destroy:function(){var b=this;c.jqx.utilities.resize(b.host,null,!0);var d=b.host.closest("div.jqx-menu-wrapper");b.removeHandler(d,"keydown");d.remove();b.removeHandler(c("#menuWrapper"+b.element.id),"keydown");c("#menuWrapper"+b.element.id).remove();b.removeHandler(b.host,"keydown");b.removeHandler(b.host,"focus");b.removeHandler(b.host,"blur");b.removeHandler(c(document),"mousedown.menu"+
b.element.id,b._closeAfterClick);b.removeHandler(c(document),"mouseup.menu"+b.element.id,b._closeAfterClick);b.removeHandler(c(document),"contextmenu."+b.element.id);b.removeHandler(b.host,"contextmenu."+b.element.id);c.data(document.body,"jqxMenuOldHost"+b.element.id,null);b.isTouchDevice()&&b.removeHandler(c(document),c.jqx.mobile.getTouchEventName("touchstart")+".menu"+b.element.id,b._closeAfterClick,this);c(window).off&&c(window).off("resize.menu"+b.element.id);c.each(b.items,function(){var e=
c(this.element);b.removeHandler(e,"click");b.removeHandler(e,"selectstart");b.removeHandler(e,"mouseenter");b.removeHandler(e,"mouseleave");b.removeHandler(e,"mousedown");b.removeHandler(e,"mouseleave");c(this.subMenuElement).closest("div.jqx-menu-popup").remove();delete this.subMenuElement;delete this.element});c.data(document.body,"menuel",null);delete b.menuElements;b.items=[];delete b.items;(d=c.data(b.element,"jqxMenu"))&&delete d.instance;b.host.removeClass();b.host.remove();delete b.host;delete b.element},
_raiseEvent:function(b,d){void 0==d&&(d={owner:null});var e=this.events[b];args=d;args.owner=this;e=new c.Event(e);"2"==b&&(args=d.item,args.owner=this,args.clickType=d.type,c.extend(e,d.event),e.type="itemclick");e.owner=this;e.args=args;return this.host.trigger(e)},propertiesChangedHandler:function(b,d,e){e.width&&e.height&&2==Object.keys(e).length&&(b._setSize(),"popup"===b.mode&&(this.host.closest("div.jqx-menu-wrapper")[d](e),c("#"+this.host[0].id)[d](e)))},propertyChangedHandler:function(b,
d,e,g){if(void 0!=this.isInitialized&&0!=this.isInitialized&&!(b.batchUpdate&&b.batchUpdate.width&&b.batchUpdate.height&&2==Object.keys(b.batchUpdate).length)&&("disabled"==d&&(b.disabled?(b.host.addClass(b.toThemeProperty("jqx-fill-state-disabled")),b.host.addClass(b.toThemeProperty("jqx-menu-disabled"))):(b.host.removeClass(b.toThemeProperty("jqx-fill-state-disabled")),b.host.removeClass(b.toThemeProperty("jqx-menu-disabled")))),g!=e))if("touchMode"==d&&(this._isTouchDevice=null,b._render(g,e)),
"width"===d||"height"===d)b._setSize(),"popup"===b.mode&&(this.host.closest("div.jqx-menu-wrapper")[d](g),c("#"+this.host[0].id)[d](g));else{if("source"==d&&null!=b.source){var f=b.loadItems(b.source);b.element.innerHTML=f;f=b.host.find("ul:first");0<f.length&&(b.refresh(),b._createMenu(f[0]),b._render())}"autoCloseOnClick"==d?0==g?b.removeHandler(c(document),"mousedown.menu"+this.element.id,b._closeAll):b.addHandler(c(document),"mousedown.menu"+this.element.id,b,b._closeAll):"mode"==d||"width"==
d||"height"==d||"showTopLevelArrows"==d?(b.refresh(),"mode"==d?b._render(g,e):b._applyOrientation()):"theme"==d&&c.jqx.utilities.setTheme(e,g,b.host)}}})})(jqxBaseFramework);(function(c){c.jqx._jqxMenu.jqxMenuItem=function(b,d,e){return{id:b,parentId:d,parentItem:null,anchor:null,type:e,disabled:!1,level:0,isOpen:!1,hasItems:!1,element:null,subMenuElement:null,arrow:null,openHorizontalDirection:"right",openVerticalDirection:"down",closeOnClick:!0}}})(jqxBaseFramework);
(function(c){function b(b,d){this.owner=b;this.displayfield=this.datafield=null;this.text="";this.createfilterpanel=null;this.editable=this.hideable=this.sortable=!0;this.hidden=!1;this.groupable=!0;this.checkchange=this.cellsrenderer=this.renderer=null;this.threestatecheckbox=!1;this.columntype=this.buttonclick=null;this.cellsformat="";this.cellsalign=this.align="left";this.width="auto";this.minwidth=25;this.maxwidth="auto";this.pinned=!1;this.visibleindex=-1;this.filterable=!0;this.filter=null;
this.filteritems=[];this.resizable=!0;this.validation=this.geteditorvalue=this.destroyeditor=this.destroywidget=this.initwidget=this.createwidget=this.createeditor=this.initeditor=null;this.cellclassname=this.classname="";this.aggregatesrenderer=this.aggregates=this.cellvaluechanging=this.cellbeginedit=this.cellendedit=null;this.menu=!0;this.createfilterwidget=null;this.filtertype="default";this.rendered=this.filtercondition=null;this.exportable=!0;this.exporting=!1;this.enabletooltips=this.clipboard=
this.nullable=this.draggable=!0;this.columngroup=null;this.filterdelay=800;this.destroyeverpresentrowwidget=this.validateeverpresentrowwidgetvalue=this.initeverpresentrowwidget=this.createeverpresentrowwidget=this.geteverpresentrowwidgetvalue=this.reseteverpresentrowwidgetvalue=null;this.getcolumnproperties=function(){return{nullable:this.nullable,sortable:this.sortable,hideable:this.hideable,hidden:this.hidden,groupable:this.groupable,width:this.width,align:this.align,editable:this.editable,minwidth:this.minwidth,
maxwidth:this.maxwidth,resizable:this.resizable,datafield:this.datafield,text:this.text,exportable:this.exportable,cellsalign:this.cellsalign,pinned:this.pinned,cellsformat:this.cellsformat,columntype:this.columntype,classname:this.classname,cellclassname:this.cellclassname,menu:this.menu}};this.setproperty=function(b,e){if(this[b]){var d=this[b];this[b]=e;this.owner._columnPropertyChanged(this,b,e,d)}else this[b.toLowerCase()]&&(d=this[b.toLowerCase()],this[b.toLowerCase()]=e,this.owner._columnPropertyChanged(this,
b.toLowerCase(),e,d))};this._initfields=function(d){if(null!=d){var g=this.that;c.jqx.hasProperty(d,"dataField")&&(this.datafield=c.jqx.get(d,"dataField"));c.jqx.hasProperty(d,"displayField")?this.displayfield=c.jqx.get(d,"displayField"):this.displayfield=this.datafield;c.jqx.hasProperty(d,"enableTooltips")&&(this.enabletooltips=c.jqx.get(d,"enableTooltips"));c.jqx.hasProperty(d,"text")?this.text=c.jqx.get(d,"text"):this.text=this.displayfield;c.jqx.hasProperty(d,"createfilterpanel")&&(this.createfilterpanel=
c.jqx.get(d,"createfilterpanel"));c.jqx.hasProperty(d,"sortable")&&(this.sortable=c.jqx.get(d,"sortable"));c.jqx.hasProperty(d,"hideable")&&(this.hideable=c.jqx.get(d,"hideable"));c.jqx.hasProperty(d,"hidden")&&(this.hidden=c.jqx.get(d,"hidden"));c.jqx.hasProperty(d,"groupable")&&(this.groupable=c.jqx.get(d,"groupable"));c.jqx.hasProperty(d,"renderer")&&(this.renderer=c.jqx.get(d,"renderer"));c.jqx.hasProperty(d,"align")&&(this.align=c.jqx.get(d,"align"));c.jqx.hasProperty(d,"cellsAlign")&&(this.cellsalign=
c.jqx.get(d,"cellsAlign"));c.jqx.hasProperty(d,"clipboard")&&(this.clipboard=c.jqx.get(d,"clipboard"));c.jqx.hasProperty(d,"cellsFormat")&&(this.cellsformat=c.jqx.get(d,"cellsFormat"));c.jqx.hasProperty(d,"width")&&(this.width=c.jqx.get(d,"width"));c.jqx.hasProperty(d,"minWidth")&&(this.minwidth=parseInt(c.jqx.get(d,"minWidth")),isNaN(this.minwidth)&&(this.minwidth=25));c.jqx.hasProperty(d,"maxWidth")&&(this.maxwidth=parseInt(c.jqx.get(d,"maxWidth")),isNaN(this.maxwidth)&&(this.maxwidth="auto"));
c.jqx.hasProperty(d,"cellsRenderer")?this.cellsrenderer=c.jqx.get(d,"cellsRenderer"):d.cellsRenderer&&(this.cellsrenderer=d.cellsRenderer);c.jqx.hasProperty(d,"columnType")&&(this.columntype=c.jqx.get(d,"columnType"));c.jqx.hasProperty(d,"checkChange")&&(this.checkchange=c.jqx.get(d,"checkChange"));c.jqx.hasProperty(d,"buttonClick")?this.buttonclick=c.jqx.get(d,"buttonClick"):d.buttonClick&&(this.buttonclick=d.buttonClick);c.jqx.hasProperty(d,"pinned")&&(this.pinned=c.jqx.get(d,"pinned"));c.jqx.hasProperty(d,
"visibleIndex")&&(this.visibleindex=c.jqx.get(d,"visibleIndex"));c.jqx.hasProperty(d,"filterable")&&(this.filterable=c.jqx.get(d,"filterable"));c.jqx.hasProperty(d,"filter")&&(this.filter=c.jqx.get(d,"filter"));c.jqx.hasProperty(d,"resizable")&&(this.resizable=c.jqx.get(d,"resizable"));c.jqx.hasProperty(d,"editable")&&(this.editable=c.jqx.get(d,"editable"));c.jqx.hasProperty(d,"initEditor")?this.initeditor=c.jqx.get(d,"initEditor"):d.initEditor&&(this.initeditor=d.initEditor);c.jqx.hasProperty(d,
"createEditor")?this.createeditor=c.jqx.get(d,"createEditor"):d.createEditor&&(this.createeditor=d.createEditor);c.jqx.hasProperty(d,"initWidget")?this.initwidget=c.jqx.get(d,"initWidget"):d.initWidget&&(this.initwidget=d.initWidget);c.jqx.hasProperty(d,"createWidget")?this.createwidget=c.jqx.get(d,"createWidget"):d.createWidget&&(this.createwidget=d.createWidget);c.jqx.hasProperty(d,"destroyWidget")?this.destroywidget=c.jqx.get(d,"destroyWidget"):d.destroyWidget&&(this.destroywidget=d.destroyWidget);
c.jqx.hasProperty(d,"reseteverpresentrowwidgetvalue")||c.jqx.hasFunction(d,"reseteverpresentrowwidgetvalue")?this.reseteverpresentrowwidgetvalue=c.jqx.get(d,"reseteverpresentrowwidgetvalue"):d.resetEverPresentRowWidgetValue&&(this.reseteverpresentrowwidgetvalue=d.resetEverPresentRowWidgetValue);c.jqx.hasProperty(d,"geteverpresentrowwidgetvalue")||c.jqx.hasFunction(d,"geteverpresentrowwidgetvalue")?this.geteverpresentrowwidgetvalue=c.jqx.get(d,"geteverpresentrowwidgetvalue"):d.getEverPresentRowWidgetValue&&
(this.geteverpresentrowwidgetvalue=d.getEverPresentRowWidgetValue);c.jqx.hasProperty(d,"createeverpresentrowwidget")||c.jqx.hasFunction(d,"createeverpresentrowwidget")?this.createeverpresentrowwidget=c.jqx.get(d,"createeverpresentrowwidget"):d.createEverPresentRowWidget&&(this.createeverpresentrowwidget=d.createEverPresentRowWidget);c.jqx.hasProperty(d,"initeverpresentrowwidget")||c.jqx.hasFunction(d,"initeverpresentrowwidget")?this.initeverpresentrowwidget=c.jqx.get(d,"initeverpresentrowwidget"):
d.initEverPresentRowWidget&&(this.initeverpresentrowwidget=d.initEverPresentRowWidget);c.jqx.hasProperty(d,"validateeverpresentrowwidgetvalue")?this.validateeverpresentrowwidgetvalue=c.jqx.get(d,"validateeverpresentrowwidgetvalue"):d.validateEverPresentRowWidgetValue&&(this.validateeverpresentrowwidgetvalue=d.validateEverPresentRowWidgetValue);c.jqx.hasProperty(d,"destroyeverpresentrowwidget")||c.jqx.hasFunction(d,"destroyeverpresentrowwidget")?this.destroyeverpresentrowwidget=c.jqx.get(d,"destroyeverpresentrowwidget"):
d.destroyEverPresentRowWidget&&(this.destroyEverPresentRowWidget=d.destroyEverPresentRowWidget);c.jqx.hasProperty(d,"destroyEditor")?this.destroyeditor=c.jqx.get(d,"destroyEditor"):d.destroyEditor&&(this.destroyeditor=d.destroyEditor);c.jqx.hasProperty(d,"getEditorValue")?this.geteditorvalue=c.jqx.get(d,"getEditorValue"):d.getEditorValue&&(this.geteditorvalue=d.getEditorValue);c.jqx.hasProperty(d,"validation")?this.validation=c.jqx.get(d,"validation"):d.validation&&(this.validation=d.validation);
c.jqx.hasProperty(d,"cellBeginEdit")?this.cellbeginedit=c.jqx.get(d,"cellBeginEdit"):d.cellBeginEdit&&(this.cellbeginedit=d.cellBeginEdit);c.jqx.hasProperty(d,"cellEndEdit")?this.cellendedit=c.jqx.get(d,"cellEndEdit"):d.cellEndEdit&&(this.cellendedit=d.cellEndEdit);c.jqx.hasProperty(d,"className")&&(this.classname=c.jqx.get(d,"className"));c.jqx.hasProperty(d,"cellClassName")?this.cellclassname=c.jqx.get(d,"cellClassName"):d.cellClassName&&(this.cellclassname=d.cellClassName);c.jqx.hasProperty(d,
"menu")&&(this.menu=c.jqx.get(d,"menu"));c.jqx.hasProperty(d,"aggregates")&&(this.aggregates=c.jqx.get(d,"aggregates"));c.jqx.hasProperty(d,"aggregatesRenderer")&&(this.aggregatesrenderer=c.jqx.get(d,"aggregatesRenderer"));c.jqx.hasProperty(d,"createFilterWidget")&&(this.createfilterwidget=c.jqx.get(d,"createFilterWidget"));c.jqx.hasProperty(d,"filterType")&&(this.filtertype=c.jqx.get(d,"filterType"));c.jqx.hasProperty(d,"filterDelay")&&(this.filterdelay=c.jqx.get(d,"filterDelay"));c.jqx.hasProperty(d,
"rendered")&&(this.rendered=c.jqx.get(d,"rendered"));c.jqx.hasProperty(d,"exportable")&&(this.exportable=c.jqx.get(d,"exportable"));c.jqx.hasProperty(d,"filterItems")&&(this.filteritems=c.jqx.get(d,"filterItems"));c.jqx.hasProperty(d,"cellValueChanging")&&(this.cellvaluechanging=c.jqx.get(d,"cellValueChanging"));c.jqx.hasProperty(d,"draggable")&&(this.draggable=c.jqx.get(d,"draggable"));c.jqx.hasProperty(d,"filterCondition")&&(this.filtercondition=c.jqx.get(d,"filterCondition"));c.jqx.hasProperty(d,
"threeStateCheckbox")&&(this.threestatecheckbox=c.jqx.get(d,"threeStateCheckbox"));c.jqx.hasProperty(d,"nullable")&&(this.nullable=c.jqx.get(d,"nullable"));c.jqx.hasProperty(d,"columnGroup")&&(this.columngroup=c.jqx.get(d,"columnGroup"));if(!d instanceof String&&"string"!=typeof d)for(var l in d)if(!g.hasOwnProperty(l)&&!g.hasOwnProperty(l.toLowerCase()))throw b.host.remove(),Error("jqxGrid: Invalid property name - "+l+".");}};this._initfields(d);return this}function d(b,d){this.setdata=function(b){null!=
b&&(this.bounddata=b,this.boundindex=b.boundindex,this.visibleindex=b.visibleindex,this.group=b.group,this.parentbounddata=b.parentItem,this.uniqueid=b.uniqueid,this.level=b.level)};this.setdata(d);this.parentrow=null;this.subrows=[];this.owner=b;this.height=25;this.hidden=!1;this.rowdetails=null;this.rowdetailsheight=100;this.rowdetailshidden=!0;this.top=-1;this.setrowinfo=function(b){this.hidden=b.hidden;this.rowdetails=b.rowdetails;this.rowdetailsheight=b.rowdetailsheight;this.rowdetailshidden=
!b.showdetails;this.height=b.height};return this}c.jqx.jqxWidget("jqxGrid","",{});c.extend(c.jqx._jqxGrid.prototype,{defineInstance:function(){var b={disabled:!1,width:600,height:400,pagerheight:34,groupsheaderheight:34,pagesize:10,pagesizeoptions:["5","10","20"],rowsheight:28,columnsheight:30,filterrowheight:31,groupindentwidth:30,rowdetails:!1,enablerowdetailsindent:!0,enablemousewheel:!0,initrowdetails:null,layoutrowdetails:null,editable:!1,editmode:"selectedcell",pageable:!1,pagermode:"default",
pagerbuttonscount:5,groupable:!1,sortable:!1,filterable:!1,filtermode:"default",autoshowfiltericon:!0,showfiltercolumnbackground:!0,showpinnedcolumnbackground:!0,showsortcolumnbackground:!0,altrows:!1,altstart:1,altstep:1,showrowdetailscolumn:!0,showtoolbar:!1,toolbarheight:34,showstatusbar:!1,statusbarheight:34,enableellipsis:!0,groups:[],groupsrenderer:null,groupcolumnrenderer:null,groupsexpandedbydefault:!1,pagerrenderer:null,touchmode:"auto",columns:[],selectedrowindex:-1,selectedrowindexes:[],
selectedcells:[],autobind:!0,selectedcell:null,tableZIndex:79,headerZIndex:29,updatefilterconditions:null,showgroupaggregates:!1,showaggregates:!1,showfilterrow:!1,showeverpresentrow:!1,everpresentrowposition:"top",everpresentrowactions:"add reset",everpresentrowactionsmode:"buttons",everpresentrowheight:30,autorowheight:!1,autokoupdates:!0,handlekeyboardnavigation:null,showsortmenuitems:!0,showfiltermenuitems:!0,showgroupmenuitems:!0,enablebrowserselection:!1,enablekeyboarddelete:!0,clipboard:!0,
clipboardbegin:null,clipboardend:null,copytoclipboardwithheaders:!1,copytoclipboardhiddencolumns:!1,ready:null,updatefilterpanel:null,autogeneratecolumns:!1,rowdetailstemplate:null,scrollfeedback:null,rendertoolbar:null,renderstatusbar:null,rendered:null,multipleselectionbegins:null,columngroups:null,cellhover:null,source:{beforeprocessing:null,beforesend:null,loaderror:null,localdata:null,data:null,datatype:"array",datafields:[],url:"",root:"",record:"",id:"",totalrecords:0,recordstartindex:0,recordendindex:0,
loadallrecords:!0,sortcolumn:null,sortdirection:null,sort:null,filter:null,sortcomparer:null},filter:null,dataview:null,updatedelay:null,autoheight:!1,autowidth:!1,showheader:!0,showgroupsheader:!0,closeablegroups:!0,scrollbarsize:c.jqx.utilities.scrollBarSize,touchscrollbarsize:c.jqx.utilities.touchScrollBarSize,scrollbarautoshow:c.jqx.utilities.scrollBarAutoShow,virtualmode:!1,sort:null,columnsmenu:!0,columnsresize:!1,columnsautoresize:!0,columnsreorder:!1,columnsmenuwidth:15,autoshowcolumnsmenubutton:!0,
popupwidth:"auto",popupheight:"auto",columnmenuopening:null,columnmenuclosing:null,sorttogglestates:2,rendergridrows:null,enableanimations:!0,enablecolumnsvirtualization:!0,enabletooltips:!1,selectionmode:"singlerow",enablehover:!0,loadingerrormessage:"The data is still loading. When the data binding is completed, the Grid raises the 'bindingcomplete' event. Call this function in the 'bindingcomplete' event handler.",verticalscrollbarstep:30,verticalscrollbarlargestep:400,horizontalscrollbarstep:10,
horizontalscrollbarlargestep:50,keyboardnavigation:!0,keyboardmenunavigation:!0,touchModeStyle:"auto",autoshowloadelement:!0,showdefaultloadelement:!0,showemptyrow:!0,autosavestate:!1,autoloadstate:!1,_updating:!1,_pagescache:[],_pageviews:[],_cellscache:[],_rowdetailscache:[],_rowdetailselementscache:[],_requiresupdate:!1,_hasOpenedMenu:!1,scrollmode:"physical",deferreddatafields:null,localization:null,rtl:!1,menuitemsarray:[],events:"initialized rowClick rowSelect rowUnselect groupExpand groupCollapse sort columnClick cellClick pageChanged pageSizeChanged bindingComplete groupsChanged filter columnResized cellSelect cellUnselect cellBeginEdit cellEndEdit cellValueChanged rowExpand rowCollapse rowDoubleClick cellDoubleClick columnReordered pageChanging".split(" ")};
if(this===c.jqx._jqxGrid.prototype)return b;c.extend(!0,this,b);return b},createInstance:function(b){this.that=this;this.pagesize=parseInt(this.pagesize);this.toolbarheight=parseInt(this.toolbarheight);this.columnsheight=parseInt(this.columnsheight);this.filterrowheight=parseInt(this.filterrowheight);this.statusbarheight=parseInt(this.statusbarheight);this.groupsheaderheight=parseInt(this.groupsheaderheight);this.detailsVisibility=[];this.savedArgs=b&&0<b.length?b[0]:null;var d="<div class='jqx-clear jqx-border-reset jqx-overflow-hidden jqx-max-size jqx-position-relative'><div tabindex='1' class='jqx-clear jqx-max-size jqx-position-relative jqx-overflow-hidden jqx-background-reset' id='wrapper"+
this.element.id+"'><div class='jqx-clear jqx-position-absolute' id='toolbar' style='visibility: hidden;'></div><div class='jqx-clear jqx-position-absolute' id='groupsheader' style='visibility: hidden;'></div><div class='jqx-clear jqx-overflow-hidden jqx-position-absolute jqx-border-reset jqx-background-reset' id='content"+this.element.id+"'></div><div class='jqx-clear jqx-position-absolute' id='verticalScrollBar"+this.element.id+"'></div><div class='jqx-clear jqx-position-absolute' id='horizontalScrollBar"+
this.element.id+"'></div><div class='jqx-clear jqx-position-absolute jqx-border-reset' id='bottomRight'></div><div class='jqx-clear jqx-position-absolute' id='addrow'></div><div class='jqx-clear jqx-position-absolute' id='statusbar'></div><div class='jqx-clear jqx-position-absolute' id='pager' style='z-index: 20;'></div></div></div>";this.element.innerHTML="";15!=c.jqx.utilities.scrollBarSize&&(this.scrollbarsize=c.jqx.utilities.scrollBarSize);if(this.source){if(!this.source.dataBind){if(!c.jqx.dataAdapter)throw Error("jqxGrid: Missing reference to jqxdata.js");
this.source=new c.jqx.dataAdapter(this.source)}(b=this.source._source.datafields)&&0<b.length&&(this.editmode=this.editmode.toLowerCase(),this.selectionmode=this.selectionmode.toLowerCase())}this.host.attr("role","grid");this.host.attr("align","left");this.element.innerHTML=d;this.host.addClass(this.toTP("jqx-grid"));this.host.addClass(this.toTP("jqx-reset"));this.host.addClass(this.toTP("jqx-rc-all"));this.host.addClass(this.toTP("jqx-widget"));this.host.addClass(this.toTP("jqx-widget-content"));
this.wrapper=this.host.find("#wrapper"+this.element.id);this.content=this.host.find("#content"+this.element.id);this.content.addClass(this.toTP("jqx-reset"));b=this.host.find("#verticalScrollBar"+this.element.id);d=this.host.find("#horizontalScrollBar"+this.element.id);this.bottomRight=this.host.find("#bottomRight").addClass(this.toTP("jqx-grid-bottomright jqx-scrollbar-state-normal"));if(!b.jqxScrollBar)throw Error("jqxGrid: Missing reference to jqxscrollbar.js");this.editors=[];this.vScrollBar=
b.jqxScrollBar({vertical:!0,rtl:this.rtl,touchMode:this.touchmode,step:this.verticalscrollbarstep,largestep:this.verticalscrollbarlargestep,theme:this.theme,_triggervaluechanged:!1});this.hScrollBar=d.jqxScrollBar({vertical:!1,rtl:this.rtl,touchMode:this.touchmode,step:this.horizontalscrollbarstep,largestep:this.horizontalscrollbarlargestep,theme:this.theme,_triggervaluechanged:!1});this.addnewrow=this.host.find("#addrow");this.addnewrow[0].id="addrow"+this.element.id;this.addnewrow.addClass(this.toTP("jqx-widget-header"));
this.pager=this.host.find("#pager");this.pager[0].id="pager"+this.element.id;this.toolbar=this.host.find("#toolbar");this.toolbar[0].id="toolbar"+this.element.id;this.toolbar.addClass(this.toTP("jqx-grid-toolbar"));this.toolbar.addClass(this.toTP("jqx-widget-header"));this.statusbar=this.host.find("#statusbar");this.statusbar[0].id="statusbar"+this.element.id;this.statusbar.addClass(this.toTP("jqx-grid-statusbar"));this.statusbar.addClass(this.toTP("jqx-widget-header"));this.pager.addClass(this.toTP("jqx-grid-pager"));
this.pager.addClass(this.toTP("jqx-widget-header"));this.groupsheader=this.host.find("#groupsheader");this.groupsheader.addClass(this.toTP("jqx-grid-groups-header"));this.groupsheader.addClass(this.toTP("jqx-widget-header"));this.groupsheader[0].id="groupsheader"+this.element.id;this.vScrollBar.css("visibility","hidden");this.hScrollBar.css("visibility","hidden");this.vScrollInstance=c.data(this.vScrollBar[0],"jqxScrollBar").instance;this.hScrollInstance=c.data(this.hScrollBar[0],"jqxScrollBar").instance;
this.gridtable=null;this.isNestedGrid=this.host.parent()?299==this.host.parent().css("z-index"):!1;this.touchdevice=this.isTouchDevice();this.localizestrings&&(this.localizestrings(),null!=this.localization&&this.localizestrings(this.localization,!1));this.rowdetailstemplate&&(void 0==this.rowdetailstemplate.rowdetails&&(this.rowdetailstemplate.rowdetails="<div></div>"),void 0==this.rowdetailstemplate.rowdetailsheight&&(this.rowdetailstemplate.rowdetailsheight=200),void 0==this.rowdetailstemplate.rowdetailshidden&&
(this.rowdetailstemplate.rowdetailshidden=!0));if(this.showfilterrow&&!this.filterable)throw Error('jqxGrid: "showfilterrow" requires setting the "filterable" property to true!');if(this.autorowheight&&!this.autoheight&&!this.pageable)throw Error('jqxGrid: "autorowheight" requires setting the "autoheight" or "pageable" property to true!');if(this.virtualmode&&null==this.rendergridrows)throw Error('jqxGrid: "virtualmode" requires setting the "rendergridrows"!');if(this.virtualmode&&!this.pageable&&
this.groupable)throw Error('jqxGrid: "grouping" in "virtualmode" without paging is not supported!');if(!this._testmodules()){this._builddataloadelement();(this._cachedcolumns=this.columns)&&this.columns.length>this.headerZIndex&&(this.headerZIndex=this.columns.length+100);28!=this.rowsheight&&this._measureElement("cell");(30!=this.columnsheight||this.columngroups)&&this._measureElement("column");if(this.source&&(b=this.source.datafields,null==b&&this.source._source&&(b=this.source._source.datafields),
b))for(d=0;d<this.columns.length;d++){var f=this.columns[d];if(f&&f.cellsformat&&2<f.cellsformat.length)for(var h=0;h<b.length;h++)if(b[h].name==f.datafield&&!b[h].format){b[h].format=f.cellsformat;break}}this.databind(this.source);this.showtoolbar&&this.toolbar.css("visibility","inherit");this.showstatusbar&&this.statusbar.css("visibility","inherit");this._arrange();this.pageable&&this._initpager&&this._initpager();this.tableheight=null;var l=this.that,q=function(){l.content&&(l.content[0].scrollTop=
0,l.content[0].scrollLeft=0);l.gridcontent&&(l.gridcontent[0].scrollLeft=0,l.gridcontent[0].scrollTop=0)};this.addHandler(this.content,"mousedown",function(){q()});this.addHandler(this.content,"scroll",function(b){q();return!1});this.showfilterrow||(this.showstatusbar||this.showtoolbar||this.host.addClass("jqx-disableselect"),this.content.addClass("jqx-disableselect"));this.enablebrowserselection&&(this.content.removeClass("jqx-disableselect"),this.host.removeClass("jqx-disableselect"));this._resizeWindow();
this.disabled&&this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"));this.hasTransform=c.jqx.utilities.hasTransform(this.host);"logical"==this.scrollmode&&(this.vScrollInstance.thumbStep=this.rowsheight,this.vScrollInstance.step=this.rowsheight);c.jqx.isHidden(this.host)||(this.filterable||this.groupable||this.sortable)&&this._initmenu()}},_resizeWindow:function(){var b=this.that;if(null!=this.width&&-1!=this.width.toString().indexOf("%")||null!=this.height&&-1!=this.height.toString().indexOf("%")){this._updatesizeonwindowresize=
!0;c.jqx.utilities.resize(this.host,function(d){var g=c(window).width(),f=c(window).height(),r=b.host.width(),t=b.host.height();b.autoheight&&(b._lastHostWidth=f);if(b._lastHostWidth!=r||b._lastHostHeight!=t){if(b.touchdevice&&b.editcell&&"orientationchange"!==d)return;b._updatesize(b._lastHostWidth!=r,b._lastHostHeight!=t)}b._lastWidth=g;b._lastHeight=f;b._lastHostWidth=r;b._lastHostHeight=t});var d=b.host.width(),f=b.host.height();b._lastHostWidth=d;b._lastHostHeight=f}},_builddataloadelement:function(){this.dataloadelement&&
this.dataloadelement.remove();this.dataloadelement=c('<div style="overflow: hidden; position: absolute;"></div>');if(this.showdefaultloadelement){var b=c('<div style="z-index: 99; margin-left: -66px; left: 50%; top: 50%; margin-top: -24px; position: relative; width: 100px; height: 33px; padding: 5px; font-family: verdana; font-size: 12px; color: #767676; border-color: #898989; border-width: 1px; border-style: solid; background: #f6f6f6; border-collapse: collapse;"><div style="float: left;"><div style="float: left; overflow: hidden; width: 32px; height: 32px;" class="jqx-grid-load"/><span style="margin-top: 10px; float: left; display: block; margin-left: 5px;" >'+
this.gridlocalization.loadtext+"</span></div></div>");b.addClass(this.toTP("jqx-rc-all"));this.dataloadelement.addClass(this.toTP("jqx-rc-all"));b.addClass(this.toTP("jqx-fill-state-normal"));this.dataloadelement.append(b)}else this.dataloadelement.addClass(this.toTP("jqx-grid-load"));this.dataloadelement.width(this.host.width());this.dataloadelement.height(this.host.height());this.wrapper.prepend(this.dataloadelement)},_measureElement:function(b){var d=c("<span style='visibility: hidden; white-space: nowrap;'>measure Text</span>");
d.addClass(this.toTP("jqx-widget"));c(document.body).append(d);"cell"==b?this._cellheight=d.height():this._columnheight=d.height();d.remove()},_measureMenuElement:function(){var b=c("<span style='visibility: hidden; white-space: nowrap;'>measure Text</span>");b.addClass(this.toTP("jqx-widget"));b.addClass(this.toTP("jqx-menu"));b.addClass(this.toTP("jqx-menu-item-top"));b.addClass(this.toTP("jqx-fill-state-normal"));this.isTouchDevice()&&b.addClass(this.toTP("jqx-grid-menu-item-touch"));c(document.body).append(b);
var d=b.outerHeight();b.remove();return d},_measureElementWidth:function(b){b=c("<span style='visibility: hidden; white-space: nowrap;'>"+b+"</span>");b.addClass(this.toTP("jqx-widget"));b.addClass(this.toTP("jqx-grid"));b.addClass(this.toTP("jqx-grid-column-header"));b.addClass(this.toTP("jqx-widget-header"));c(document.body).append(b);var d=b.outerWidth()+20;b.remove();return d},_getBodyOffset:function(){var b=0,d=0;"0px"!=c("body").css("border-top-width")&&(b=parseInt(c("body").css("border-top-width")),
isNaN(b)&&(b=0));"0px"!=c("body").css("border-left-width")&&(d=parseInt(c("body").css("border-left-width")),isNaN(d)&&(d=0));return{left:d,top:b}},_testmodules:function(){var b="",d=this.that,f=function(){""!=b.length&&(b+=",")};this.columnsmenu&&!this.host.jqxMenu&&(this.sortable||this.groupable||this.filterable)&&(f(),b+=" jqxmenu.js");this.host.jqxScrollBar||(f(),b+=" jqxscrollbar.js");this.host.jqxButton||(f(),b+=" jqxbuttons.js");c.jqx.dataAdapter||(f(),b+=" jqxdata.js");this.pageable&&!this.gotopage&&
(f(),b+="jqxgrid.pager.js");this.filterable&&!this.applyfilters&&(f(),b+=" jqxgrid.filter.js");this.groupable&&!this._initgroupsheader&&(f(),b+=" jqxgrid.grouping.js");this.columnsresize&&!this.autoresizecolumns&&(f(),b+=" jqxgrid.columnsresize.js");this.columnsreorder&&!this.setcolumnindex&&(f(),b+=" jqxgrid.columnsreorder.js");this.sortable&&!this.sortby&&(f(),b+=" jqxgrid.sort.js");this.editable&&!this.begincelledit&&(f(),b+=" jqxgrid.edit.js");this.showaggregates&&!this.getcolumnaggregateddata&&
(f(),b+=" jqxgrid.aggregates.js");this.keyboardnavigation&&!this.selectrow&&(f(),b+=" jqxgrid.selection.js");if(""!=b||this.editable||this.filterable||this.pageable){var h=[],l=function(c){switch(c){case "checkbox":d.host.jqxCheckBox||h.checkbox||(h.checkbox=!0,f(),b+=" jqxcheckbox.js");break;case "numberinput":d.host.jqxNumberInput||h.numberinput||(h.numberinput=!0,f(),b+=" jqxnumberinput.js");break;case "datetimeinput":d.host.jqxDateTimeInput||h.datetimeinput?d.host.jqxCalendar||h.calendar||(f(),
b+=" jqxcalendar.js"):(f(),h.datetimeinput=!0,b+=" jqxdatetimeinput.js(requires: jqxcalendar.js)");break;case "combobox":d.host.jqxComboBox||h.combobox?d.host.jqxListBox||h.listbox||(f(),h.listbox=!0,b+=" jqxlistbox.js"):(f(),h.combobox=!0,b+=" jqxcombobox.js(requires: jqxlistbox.js)");break;case "dropdownlist":d.host.jqxDropDownList||h.dropdownlist?d.host.jqxListBox||h.listbox||(f(),h.listbox=!0,b+=" jqxlistbox.js"):(f(),h.dropdownlist=!0,b+=" jqxdropdownlist.js(requires: jqxlistbox.js)")}};(this.filterable||
this.pageable)&&l("dropdownlist");for(var q=0;q<this.columns.length;q++)if(void 0!=this.columns[q]){var r=this.columns[q].columntype;l(r);this.filterable&&this.showfilterrow&&(r=this.columns[q].filtertype,"checkedlist"!=r&&"bool"!=r||l("checkbox"),"date"==r&&l("datetimeinput"))}if(""!=b)throw Error("jqxGrid: Missing references to the following module(s): "+b);}return!1},focus:function(){try{this.wrapper.focus();var b=this.that;setTimeout(function(){b.wrapper.focus()},25);this.focused=!0}catch(d){}},
hiddenParent:function(){return c.jqx.isHidden(this.host)},resize:function(b,d){this.width=b;this.height=d;this._updatesize(!0,!0)},_updatesize:function(b,d){if(!this._loading){var f=this.that;f._newmax=null;var h=f.host.width(),l=f.host.height();f._oldWidth||(f._oldWidth=h);f._oldHeight||(f._oldHeight=l);f._resizeTimer&&clearTimeout(f._resizeTimer);f._resizeTimer=setTimeout(function(){f.resizingGrid=!0;if(!c.jqx.isHidden(f.host)){f.editcell&&(f.endcelledit(f.editcell.row,f.editcell.column,!0,!0),
f._oldselectedcell=null);if(w!=f._oldHeight||1==d){var l=f.groupable&&0<f.groups.length,r=f.vScrollBar.css("visibility");if(!f.autoheight){f.virtualmode&&(f._pageviews=[]);if(l||f.rowdetails||f.pageable){f._arrange();f.prerenderrequired=!0;w=Math.round(f.host.height())+2*f.rowsheight;realheight=f._gettableheight();var l=Math.round(w/f.rowsheight),t=Math.max(f.dataview.totalrows,f.dataview.totalrecords);f.pageable&&(t=f.pagesize,f.pagesize>Math.max(f.dataview.totalrows,f.dataview.totalrecords)&&f.autoheight?
t=Math.max(f.dataview.totalrows,f.dataview.totalrecords):f.autoheight||f.dataview.totalrows<f.pagesize&&(t=Math.max(f.dataview.totalrows,f.dataview.totalrecords)));f._getpagesize();!f.pageable&&f.autoheight&&(l=t);f.virtualsizeinfo&&(f.virtualsizeinfo.visiblerecords=l);f.rendergridcontent(!0,!1);f._renderrows(f.virtualsizeinfo)}else{f._arrange();f.virtualsizeinfo=f._calculatevirtualheight();var w=Math.round(f.host.height())+2*f.rowsheight;parseInt(w)>=parseInt(f._oldHeight)&&(f.prerenderrequired=
!0);f._renderrows(f.virtualsizeinfo);f.rtl&&(f._updatecolumnwidths(),f.table&&f.table.width(f.columnsheader.width()),f._updatecellwidths())}r!=f.vScrollBar.css("visibility")&&(f.vScrollInstance.setPosition(0),f._arrange(),f._updatecolumnwidths(),f.table&&f.table.width(f.columnsheader.width()),f._updatecellwidths())}}if(h!=f._oldWidth||1==b){r=!1;if(f.editcell&&f.editcell.editor)switch(f.editcell.columntype){case "dropdownlist":if(r=f.editcell.editor.jqxDropDownList("isOpened")||f.editcell.editor.jqxDropDownList("isanimating")&&
!f.editcell.editor.jqxDropDownList("ishiding")){f.editcell.editor.jqxDropDownList({openDelay:0});f.editcell.editor.jqxDropDownList("open");f.editcell.editor.jqxDropDownList({openDelay:250});return}break;case "combobox":if(r=f.editcell.editor.jqxComboBox("isOpened")||f.editcell.editor.jqxComboBox("isanimating")&&!f.editcell.editor.jqxComboBox("ishiding")){f.editcell.editor.jqxComboBox({openDelay:0});f.editcell.editor.jqxComboBox("open");f.editcell.editor.jqxComboBox({openDelay:250});return}break;case "datetimeinput":if(r){f.editcell.editor.jqxDateTimeInput("isOpened")||
f.editcell.editor.jqxDateTimeInput("isanimating")&&f.editcell.editor.jqxDateTimeInput("ishiding");f.editcell.editor.jqxDateTimeInput({openDelay:0});f.editcell.editor.jqxDateTimeInput("open");f.editcell.editor.jqxDateTimeInput({openDelay:250});return}}r=f.hScrollBar.css("visibility");f._arrange();f._updatecolumnwidths();f.table&&f.table.width(f.columnsheader.width());f._updatecellwidths();0==b&&f._oldWidth>h||d&&0!=f.dataview.rows.length||f._renderrows(f.virtualsizeinfo);r!=f.hScrollBar.css("visibility")&&
f.hScrollInstance.setPosition(0)}f._oldWidth=h;f._oldHeight=w;f.resizingGrid=!1}},5)}},getTouches:function(b){return c.jqx.mobile.getTouches(b)},_updateTouchScrolling:function(){var b=this.that;if(b.isTouchDevice()){b.scrollmode="logical";b.vScrollInstance.thumbStep=b.rowsheight;var d=c.jqx.mobile.getTouchEventName("touchstart"),f=c.jqx.mobile.getTouchEventName("touchend"),h=c.jqx.mobile.getTouchEventName("touchmove");b.enablehover=!1;b.gridcontent&&(b.removeHandler(b.gridcontent,d+".touchScroll"),
b.removeHandler(b.gridcontent,h+".touchScroll"),b.removeHandler(b.gridcontent,f+".touchScroll"),b.removeHandler(b.gridcontent,"touchcancel.touchScroll"),c.jqx.mobile.touchScroll(b.gridcontent[0],b.vScrollInstance.max,function(d,c){null!=c&&"visible"==b.vScrollBar.css("visibility")&&b.vScrollInstance.setPosition(c);null!=d&&"visible"==b.hScrollBar.css("visibility")&&b.hScrollInstance.setPosition(d);b.vScrollInstance.thumbCapture=!0;b._lastScroll=new Date},this.element.id,this.hScrollBar,this.vScrollBar),
b._overlayElement&&(b.removeHandler(b._overlayElement,d+".touchScroll"),b.removeHandler(b._overlayElement,h+".touchScroll"),b.removeHandler(b._overlayElement,f+".touchScroll"),b.removeHandler(b._overlayElement,"touchcancel.touchScroll"),c.jqx.mobile.touchScroll(b._overlayElement[0],b.vScrollInstance.max,function(d,c){null!=c&&"visible"==b.vScrollBar.css("visibility")&&b.vScrollInstance.setPosition(c);null!=d&&"visible"==b.hScrollBar.css("visibility")&&b.hScrollInstance.setPosition(d);b.vScrollInstance.thumbCapture=
!0;b._lastScroll=new Date},this.element.id,this.hScrollBar,this.vScrollBar),this.addHandler(this.host,d,function(){b.editcell?b._overlayElement.css("visibility","hidden"):b._overlayElement.css("visibility","visible")}),this.addHandler(this.host,f,function(){b.editcell?b._overlayElement.css("visibility","hidden"):b._overlayElement.css("visibility","visible")})))}},_rendercelltexts:function(){},isTouchDevice:function(){if(void 0!=this.touchDevice)return this.touchDevice;var b=c.jqx.mobile.isTouchDevice();
this.touchDevice=b;if(1==this.touchmode){if(c.jqx.browser.msie&&9>c.jqx.browser.version)return this.enablehover=!1;b=!0;c.jqx.mobile.setMobileSimulator(this.element);this.touchDevice=b}else 0==this.touchmode&&(b=!1);b&&0!=this.touchModeStyle&&(this.touchDevice=!0,this.host.addClass(this.toThemeProperty("jqx-touch")),this.host.find("jqx-widget-content").addClass(this.toThemeProperty("jqx-touch")),this.host.find("jqx-widget-header").addClass(this.toThemeProperty("jqx-touch")),this.scrollbarsize=this.touchscrollbarsize);
return b},toTP:function(b){return this.toThemeProperty(b)},localizestrings:function(b,d){this._cellscache=[];c.jqx.dataFormat&&c.jqx.dataFormat.cleardatescache();if(this._loading)throw Error("jqxGrid: "+this.loadingerrormessage);if(null!=b){for(var f in b)f.toLowerCase()!==f&&(b[f.toLowerCase()]=b[f]);b.pagergotopagestring&&(this.gridlocalization.pagergotopagestring=b.pagergotopagestring);b.pagershowrowsstring&&(this.gridlocalization.pagershowrowsstring=b.pagershowrowsstring);b.pagerrangestring&&
(this.gridlocalization.pagerrangestring=b.pagerrangestring);b.pagernextbuttonstring&&(this.gridlocalization.pagernextbuttonstring=b.pagernextbuttonstring);b.pagerpreviousbuttonstring&&(this.gridlocalization.pagerpreviousbuttonstring=b.pagerpreviousbuttonstring);b.pagerfirstbuttonstring&&(this.gridlocalization.pagerfirstbuttonstring=b.pagerfirstbuttonstring);b.pagerlastbuttonstring&&(this.gridlocalization.pagerlastbuttonstring=b.pagerlastbuttonstring);b.groupsheaderstring&&(this.gridlocalization.groupsheaderstring=
b.groupsheaderstring);b.sortascendingstring&&(this.gridlocalization.sortascendingstring=b.sortascendingstring);b.sortdescendingstring&&(this.gridlocalization.sortdescendingstring=b.sortdescendingstring);b.sortremovestring&&(this.gridlocalization.sortremovestring=b.sortremovestring);b.groupbystring&&(this.gridlocalization.groupbystring=b.groupbystring);b.groupremovestring&&(this.gridlocalization.groupremovestring=b.groupremovestring);b.firstDay&&(this.gridlocalization.firstDay=b.firstDay);b.days&&
(this.gridlocalization.days=b.days);b.months&&(this.gridlocalization.months=b.months);b.AM&&(this.gridlocalization.AM=b.AM);b.PM&&(this.gridlocalization.PM=b.PM);b.patterns&&(this.gridlocalization.patterns=b.patterns);b.percentsymbol&&(this.gridlocalization.percentsymbol=b.percentsymbol);b.currencysymbol&&(this.gridlocalization.currencysymbol=b.currencysymbol);b.currencysymbolposition&&(this.gridlocalization.currencysymbolposition=b.currencysymbolposition);void 0!=b.decimalseparator&&(this.gridlocalization.decimalseparator=
b.decimalseparator);void 0!=b.thousandsseparator&&(this.gridlocalization.thousandsseparator=b.thousandsseparator);b.filterclearstring&&(this.gridlocalization.filterclearstring=b.filterclearstring);b.filterstring&&(this.gridlocalization.filterstring=b.filterstring);b.filtershowrowstring&&(this.gridlocalization.filtershowrowstring=b.filtershowrowstring);b.filtershowrowdatestring&&(this.gridlocalization.filtershowrowdatestring=b.filtershowrowdatestring);b.filterselectallstring&&(this.gridlocalization.filterselectallstring=
b.filterselectallstring);b.filterchoosestring&&(this.gridlocalization.filterchoosestring=b.filterchoosestring);b.filterorconditionstring&&(this.gridlocalization.filterorconditionstring=b.filterorconditionstring);b.filterandconditionstring&&(this.gridlocalization.filterandconditionstring=b.filterandconditionstring);b.filterstringcomparisonoperators&&(this.gridlocalization.filterstringcomparisonoperators=b.filterstringcomparisonoperators);b.filternumericcomparisonoperators&&(this.gridlocalization.filternumericcomparisonoperators=
b.filternumericcomparisonoperators);b.filterdatecomparisonoperators&&(this.gridlocalization.filterdatecomparisonoperators=b.filterdatecomparisonoperators);b.filterbooleancomparisonoperators&&(this.gridlocalization.filterbooleancomparisonoperators=b.filterbooleancomparisonoperators);b.emptydatastring&&(this.gridlocalization.emptydatastring=b.emptydatastring);b.filterselectstring&&(this.gridlocalization.filterselectstring=b.filterselectstring);b.todaystring&&(this.gridlocalization.todaystring=b.todaystring);
b.clearstring&&(this.gridlocalization.clearstring=b.clearstring);b.validationstring&&(this.gridlocalization.validationstring=b.validationstring);b.loadtext&&(this.gridlocalization.loadtext=b.loadtext);b.addrowstring&&(this.gridlocalization.addrowstring=b.addrowstring);b.udpaterowstring&&(this.gridlocalization.udpaterowstring=b.udpaterowstring);b.deleterowstring&&(this.gridlocalization.deleterowstring=b.deleterowstring);b.resetrowstring&&(this.gridlocalization.resetrowstring=b.resetrowstring);b.everpresentrowplaceholder&&
(this.gridlocalization.everpresentrowplaceholder=b.everpresentrowplaceholder);if(!1!==d){this._initpager&&this._initpager();this._initgroupsheader&&this._initgroupsheader();this._initmenu&&this._initmenu();this._builddataloadelement();c(this.dataloadelement).css("visibility","hidden");c(this.dataloadelement).css("display","none");if(this.filterable&&this.showfilterrow&&this._updatefilterrow){for(f in this._filterrowcache)c(this._filterrowcache[f]).remove();this._filterrowcache=[];this._updatefilterrow()}this.showaggregates&&
this.refresheaggregates&&this.refresheaggregates();this._renderrows(this.virtualsizeinfo)}}else this.gridlocalization={"/":"/",":":":",firstDay:0,days:{names:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),namesAbbr:"Sun Mon Tue Wed Thu Fri Sat".split(" "),namesShort:"Su Mo Tu We Th Fr Sa".split(" ")},months:{names:"January February March April May June July August September October November December ".split(" "),namesAbbr:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec ".split(" ")},
AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",d3:"dd-MMMM-yyyy",d4:"dd-MM-yy",d5:"H:mm",d6:"HH:mm",d7:"HH:mm tt",d8:"dd/MMMM/yyyy",d9:"MMMM-dd",d10:"MM-dd",d11:"MM-dd-yyyy"},
percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:",",pagergotopagestring:"Go to page:",pagershowrowsstring:"Show rows:",pagerrangestring:" of ",pagerpreviousbuttonstring:"previous",pagernextbuttonstring:"next",pagerfirstbuttonstring:"first",pagerlastbuttonstring:"last",groupsheaderstring:"Drag a column and drop it here to group by that column",sortascendingstring:"Sort Ascending",sortdescendingstring:"Sort Descending",sortremovestring:"Remove Sort",
groupbystring:"Group By this column",groupremovestring:"Remove from groups",filterclearstring:"Clear",filterstring:"Filter",filtershowrowstring:"Show rows where:",filtershowrowdatestring:"Show rows where date:",filterorconditionstring:"Or",filterandconditionstring:"And",filterselectallstring:"(Select All)",filterchoosestring:"Please Choose:",filterstringcomparisonoperators:"empty;not empty;contains;contains(match case);does not contain;does not contain(match case);starts with;starts with(match case);ends with;ends with(match case);equal;equal(match case);null;not null".split(";"),
filternumericcomparisonoperators:"equal;not equal;less than;less than or equal;greater than;greater than or equal;null;not null".split(";"),filterdatecomparisonoperators:"equal;not equal;less than;less than or equal;greater than;greater than or equal;null;not null".split(";"),filterbooleancomparisonoperators:["equal","not equal"],validationstring:"Entered value is not valid",emptydatastring:"No data to display",filterselectstring:"Select Filter",loadtext:"Loading...",clearstring:"Clear",todaystring:"Today",
addrowstring:"Add",udpaterowstring:"Update",deleterowstring:"Delete",resetrowstring:"Reset",everpresentrowplaceholder:"Enter "}},_getmenudefaultheight:function(){var b=0;this.sortable&&this._togglesort&&this.showsortmenuitems&&(b=3);this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(b+=2);var d=this._measureMenuElement(),b=b*d+9;this.filterable&&!this.showfilterrow&&this.showfiltermenuitems&&(b+=190,c.jqx.browser.msie&&8>c.jqx.browser.version&&(b+=20));return b},_initmenu:function(){var b=
this.that;if(this.host.jqxMenu){if(this.gridmenu){if(this._hasOpenedMenu)return;this.filterable&&this._destroyfilterpanel&&this._destroyfilterpanel();this.removeHandler(this.gridmenu,"keydown");this.removeHandler(this.gridmenu,"closed");this.removeHandler(this.gridmenu,"itemclick");this.gridmenu.jqxMenu("destroy");this.gridmenu.removeData();this.gridmenu.remove()}this.menuitemsarray=[];var d="";this.isTouchDevice()&&(d="jqx-grid-menu-item-touch");this.gridmenu=c('<div tabindex=0 id="gridmenu'+this.element.id+
'" style="z-index: 99;"></div>');this.host.append(this.gridmenu);var f=c("<ul></ul>"),h=c('<li class="'+d+'"><div class="jqx-grid-sortasc-icon"></div>'+this.gridlocalization.sortascendingstring+"</li>"),l=c('<li class="'+d+'"><div class="jqx-grid-sortdesc-icon"></div>'+this.gridlocalization.sortdescendingstring+"</li>"),q=c('<li class="'+d+'"><div class="jqx-grid-sortremove-icon"></div>'+this.gridlocalization.sortremovestring+"</li>"),r=c('<li class="'+d+'"><div class="jqx-grid-groupby-icon"></div>'+
this.gridlocalization.groupbystring+"</li>"),t=c('<li class="'+d+'"><div class="jqx-grid-groupby-icon"></div>'+this.gridlocalization.groupremovestring+"</li>"),w=c('<li type="separator"></li>'),z=c('<li class="filter '+d+'" style="height: 190px;" ignoretheme="true"><div class="filter"></div></li>'),d=this.gridlocalization.sortascendingstring.length,B=this.gridlocalization.sortascendingstring;this.gridlocalization.sortdescendingstring.length>d&&(d=this.gridlocalization.sortdescendingstring.length,
B=this.gridlocalization.sortdescendingstring);this.gridlocalization.sortremovestring.length>d&&(d=this.gridlocalization.sortremovestring.length,B=this.gridlocalization.sortremovestring);this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(this.gridlocalization.groupbystring.length>d&&(d=this.gridlocalization.groupbystring.length,B=this.gridlocalization.groupbystring),this.gridlocalization.groupremovestring.length>d&&(d=this.gridlocalization.groupremovestring.length,B=this.gridlocalization.groupremovestring));
d=200;B=c.trim(B).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,"");B=c("<span>"+B+"</span>");B.addClass(this.toThemeProperty("jqx-menu-item"));this.host.append(B);d=B.outerWidth()+60;B.remove();B=0;this.sortable&&this._togglesort&&this.showsortmenuitems&&(f.append(h),this.menuitemsarray[0]=h[0],f.append(l),this.menuitemsarray[1]=l[0],f.append(q),this.menuitemsarray[2]=q[0],B=3);this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(f.append(r),this.menuitemsarray[3]=r[0],f.append(t),this.menuitemsarray[4]=
t[0],B+=2);var v=this._measureMenuElement(),B=B*v+9,v=!0;if(this.filterable&&!this.showfilterrow&&this.showfiltermenuitems)if(this._initfilterpanel)this.menuitemsarray[5]=z[0],this.menuitemsarray[6]=z[0],f.append(w),f.append(z),B+=190,c.jqx.browser.msie&&8>c.jqx.browser.version&&(B+=20),this.isTouchDevice()&&(B+=30),w=c(z).find("div:first"),this.excelfilterpanel=c("<div></div>"),this.filterpanel=w,this.filtermenu=c(z),d+=20,this._initfilterpanel(this,w,"",d),this._initfilterpanel(this,this.excelfilterpanel,
"",d,!0),v=!1,this.removeHandler(c(document),"click.menu"+b.element.id,b._closemenuafterclick,b),this.addHandler(c(document),"click.menu"+b.element.id,b._closemenuafterclick,b);else throw Error("jqxGrid: Missing reference to jqxgrid.filter.js.");this.gridmenu.append(f);c.jqx.browser.msie&&8>c.jqx.browser.version&&this.filterable&&(c("#listBoxfilter1"+this.element.id).css("z-index",49),c("#listBoxfilter2"+this.element.id).css("z-index",49),c("#listBoxfilter3"+this.element.id).css("z-index",49),c("#gridmenu"+
this.element.id).css("z-index",50),this.addHandler(c("#gridmenu"+this.element.id),"initialized",function(){c("#menuWrappergridmenu"+b.element.id).css("z-index",49)}));void 0==this.menuitemsarray[0]&&(B=65);this.removeHandler(c(window),"orientationchange.jqxgrid"+this.element.id);this.removeHandler(c(window),"orientationchanged.jqxgrid"+this.element.id);this.addHandler(c(window),"orientationchange.jqxgrid"+this.element.id,function(){b.gridmenu.jqxMenu("close")});this.addHandler(c(window),"orientationchanged.jqxgrid"+
this.element.id,function(){b.gridmenu.jqxMenu("close")});this.removeHandler(this.gridmenu,"keydown");this.addHandler(this.gridmenu,"keydown",function(d){var g=c(b.gridmenu.find(".jqx-item")).toArray(),f=function(b){for(var e=g.indexOf(b)-1;0<=e;e--)if(!(0<=g[e].className.indexOf("disabled")))return g[e];return b},h=function(b){for(var e=g.indexOf(b)+1;e<g.length;e++)if(!(0<=g[e].className.indexOf("disabled")))return g[e];return b},l=function(){var b=g[g.length-1];return 0<=b.className.indexOf("disabled")?
f(b):b},v=function(){for(var b=0;b<g.length;b++)if(g[b].active)return g[b];return null},q=function(b){c(g).removeClass("jqx-fill-state-focus");for(var e=0;e<g.length;e++)g[e].active=!1;b&&(c(b).addClass("jqx-fill-state-focus"),b.active=!0)};v()||b.filterable||(g[0].active=!0);if(b.keyboardmenunavigation&&b.keyboardnavigation&&(40===d.keyCode?(v=v(),q(h(v))):38===d.keyCode&&(v=v(),q(f(v))),9===d.keyCode)){if(!v()){if(d.shiftKey)if(document.activeElement===c.find("#filter1"+b.element.id)[0]){var y=
l();q(y);c(c.find("#filter1"+b.element.id)).removeClass("jqx-fill-state-focus");b.gridmenu.focus();d.stopPropagation();d.preventDefault()}else document.activeElement===c.find("#filter1"+b.element.id+"ex")[0]&&(y=l(),q(y),c(c.find("#filter1"+b.element.id)+"ex").removeClass("jqx-fill-state-focus"),b.gridmenu.focus(),d.stopPropagation(),d.preventDefault());return!0}d.shiftKey?(v=v(),q(f(v))):(v=v(),v===l()&&b.filterable&&!b.showfilterrow?(q(null),0<c(c.find("#filter1"+b.element.id)).length?c(c.find("#filter1"+
b.element.id)).jqxDropDownList("focus"):0<c(c.find("#filter1"+b.element.id+"ex")).length&&c(c.find("#filter1"+b.element.id+"ex")).jqxListBox("focus")):q(h(v)));d.stopPropagation();d.preventDefault()}if(27==d.keyCode)b.gridmenu.jqxMenu("close");else if(13==d.keyCode){g=b.gridmenu.find(".jqx-item");if(v=v())c(v).trigger("click"),q(null);else if(b._buildfilter&&b.filterable&&!b.showfilterrow){if(0<c.find("#filter1"+b.element.id).length)var y="block"==c(c.find("#filter1"+b.element.id)).jqxDropDownList("container").css("display"),
r="block"==c(c.find("#filter2"+b.element.id)).jqxDropDownList("container").css("display"),t="block"==c(c.find("#filter3"+b.element.id)).jqxDropDownList("container").css("display");d=c(c.find("#filterclearbutton"+b.element.id)).hasClass("jqx-fill-state-focus");q=c(c.find("#filterbutton"+b.element.id)).hasClass("jqx-fill-state-focus");d?(y=c.data(document.body,"contextmenu"+b.element.id).column,b._clearfilter(b,b.element,y),b.gridmenu.jqxMenu("close")):!q||y||r||t||(y=c.data(document.body,"contextmenu"+
b.element.id).column,b.gridmenu.jqxMenu("close"),b._buildfilter(b,z,y))}b.clearselection();y=b.getdisplayrows()[0];y=b.getboundindex(y);0<=b.selectionmode.indexOf("cell")?b.selectcell(y,b.columns.records[0].displayfield):b.selectrow(y)}});"auto"!=this.popupwidth&&(d=this.popupwidth);this.gridmenu.jqxMenu({popupZIndex:1E3,width:d,height:B,autoCloseOnClick:v,autoOpenPopup:!1,mode:"popup",theme:this.theme,animationShowDuration:0,animationHideDuration:0,animationShowDelay:0});this.filterable&&this.gridmenu.jqxMenu("_setItemProperty",
z[0].id,"closeOnClick",!1);if(this.rtl){var y=this.that;c.each(f.find("li"),function(){c(this).addClass(y.toTP("jqx-rtl"))});f=function(b){b=b.find("div");b.css("float","right");b.css("margin-left","4px");b.css("margin-right","-4px")};f(q);f(l);f(h);f(r);f(t)}this._handlemenueevents()}else this.columnsmenu=!1},_arrangemenu:function(){this.gridmenu||this._initmenu();var b=this.gridlocalization.sortascendingstring.length,d=this.gridlocalization.sortascendingstring;this.gridlocalization.sortdescendingstring.length>
b&&(b=this.gridlocalization.sortdescendingstring.length,d=this.gridlocalization.sortdescendingstring);this.gridlocalization.sortremovestring.length>b&&(b=this.gridlocalization.sortremovestring.length,d=this.gridlocalization.sortremovestring);this.groupable&&this._initgroupsheader&&(this.gridlocalization.groupbystring.length>b&&(b=this.gridlocalization.groupbystring.length,d=this.gridlocalization.groupbystring),this.gridlocalization.groupremovestring.length>b&&(d=this.gridlocalization.groupremovestring));
d=c.trim(d).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,"");d=c("<span>"+d+"</span>");d.addClass(this.toThemeProperty("jqx-menu-item"));this.host.append(d);b=d.outerWidth()+60;d.remove();d=0;this.sortable&&this._togglesort&&this.showsortmenuitems&&(d=3);this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(d+=2);var f=this._measureMenuElement(),d=d*f+9;this.filterable&&this.showfiltermenuitems&&this._initfilterpanel&&(d+=190,b+=20,c.jqx.browser.msie&&8>c.jqx.browser.version&&(d+=20),
this.isTouchDevice()&&(d+=30));void 0==this.menuitemsarray[0]&&(d=65);"auto"!=this.popupwidth&&(b=this.popupwidth);"auto"!=this.popupheight&&(d=this.popupheight);this.gridmenu.jqxMenu({width:b,height:d})},_closemenuafterclick:function(b){var d=null!=b?b.data:this,f=!1;if(void 0==b.target||void 0!=b.target&&void 0==b.target.className.indexOf)d.gridmenu.jqxMenu("close");else if(-1==b.target.className.indexOf("filter")||-1!=b.target.className.indexOf("jqx-grid-cell-filter"))if(-1!=b.target.className.indexOf("jqx-grid-cell"))d.gridmenu.jqxMenu("close");
else if(!d._hasOpenedMenu||!c(b.target).ischildof(d.gridmenu)){d.host.coord();var h=d.gridmenu.coord(),l=b.pageX,q=b.pageY;c.each(c(b.target).parents(),function(){if(null!=this.id&&this.id.indexOf&&-1!=this.id.indexOf("filter")||this.className.indexOf&&-1!=this.className.indexOf("filter")&&-1==this.className.indexOf("jqx-grid-cell-filter"))return f=!0,!1;if(this.className.indexOf&&-1!=this.className.indexOf("jqx-grid-cell")||this.className.indexOf&&-1!=this.className.indexOf("jqx-grid-column"))return d.gridmenu.jqxMenu("close"),
!1});if(!f){try{if("default"===d.filtermode){var r=c(c.find("#filter1"+d.element.id)).jqxDropDownList("listBox").vScrollInstance._mouseup,t=new Date;if(100>t-r)return;var w=c(c.find("#filter3"+d.element.id)).jqxDropDownList("listBox").vScrollInstance._mouseup;if(100>t-w||"block"==c(c.find("#filter3"+d.element.id)).jqxDropDownList("container").css("display")||"block"==c(c.find("#filter1"+d.element.id)).jqxDropDownList("container").css("display")||"block"==c(c.find("#filter2"+d.element.id)).jqxDropDownList("container").css("display")||
d._hasdatefilter&&"div"==c(".filtertext1"+d.element.id)[0].nodeName.toLowerCase()&&("block"==c(".filtertext1"+d.element.id).jqxDateTimeInput("container").css("display")||"block"==c(".filtertext2"+d.element.id).jqxDateTimeInput("container").css("display")))return}else{r=c(c.find("#filter1"+d.element.id)).data().jqxListBox.instance.vScrollInstance._mouseup;t=new Date;if(100>t-r)return;w=c(c.find("#filter1"+d.element.id)).data().jqxListBox.instance.hScrollInstance._mouseup;if(100>t-w)return}}catch(z){}if(!(l>=
h.left&&l<=h.left+d.gridmenu.width()&&q>=h.top&&q<=h.top+d.gridmenu.height())){b=!1;if(d.columnmenuclosing&&((b=c.data(document.body,"contextmenu"+d.element.id))||(b={column:{displayfield:null}}),b=d.columnmenuclosing(d.gridmenu,b.column.displayfield,c(d.gridmenu).height()),!1===b))return;d.gridmenu.jqxMenu("close")}}}},_handlemenueevents:function(){var b=this.that;this.removeHandler(this.gridmenu,"closed");this.addHandler(this.gridmenu,"closed",function(d){b._closemenu()});this.removeHandler(this.gridmenu,
"itemclick");this.addHandler(this.gridmenu,"itemclick",function(d){var f=d.args;for(d=0;d<b.menuitemsarray.length;d++)if(f==b.menuitemsarray[d]){if(void 0!=c(f).attr("ignoretheme"))break;var f=c.data(document.body,"contextmenu"+b.element.id),h=f.column;b.filterable&&b.gridmenu.jqxMenu("close");var l=h.displayfield;null==l&&(l=h.datafield);if(null!=f)switch(d){case 0:b.sortby(l,"ascending",null);break;case 1:b.sortby(l,"descending",null);break;case 2:b.sortby(l,null,null);break;case 3:b.addgroup(l);
break;case 4:b.removegroup(l);break;case 5:d=c(b.menuitemsarray[6]),c(d).css("display","block")}break}})},getdatainformation:function(){var b=this.dataview.totalrecords;this.summaryrows&&(b+=this.summaryrows.length);return{rowscount:b,sortinformation:this.getsortinformation(),paginginformation:this.getpaginginformation()}},getsortinformation:function(){return{sortcolumn:this.sortcolumn,sortdirection:this.sortdirection}},getpaginginformation:function(){return{pagenum:this.dataview.pagenum,pagesize:this.pagesize,
pagescount:Math.ceil(this.dataview.totalrecords/this.pagesize)}},_updaterowsproperties:function(){this._updatehiddenrows();this._updaterowheights();this._updaterowdetails()},_updatehiddenrows:function(){var b=this.that;this.hiddens=[];c.each(this.hiddenboundrows,function(d){void 0!=this.index&&(d=b.getrowvisibleindex(d),b.hiddens[d]=this.hidden)})},_updaterowheights:function(){var b=this.that;this.heights=[];c.each(this.heightboundrows,function(d){void 0!=this.index&&(d=b.getrowvisibleindex(d),b.heights[d]=
this.height)})},_updaterowdetails:function(){var b=this.that;this.details=[];c.each(this.detailboundrows,function(d){void 0!=this.index&&(d=b.getrowvisibleindex(d),b.details[d]=this.details)})},_getmenuitembyindex:function(b){return void 0==b?null:this.menuitemsarray[b]},openmenu:function(b){if(!this._openingmenu){this._openingmenu=!0;this.closemenu();var d=this.getcolumn(b);if(!d.menu)return!1;this.gridmenu||this._initmenu();var f=d.columnsmenu;c(d.element).trigger("mouseenter");this.menuOwner=d;
for(var h=this,d=0;d<h.columns.records.length;d++)h.columns.records[d].datafield!=b&&c(h.columns.records[d].element).trigger("mouseleave");setTimeout(function(){"block"==c(f)[0].style.display&&c(f).trigger("click");h._openingmenu=!1},200)}},closemenu:function(){this._closemenu()},_closemenu:function(){if(this._hasOpenedMenu){var b=!1;if(this.columnmenuclosing){var d=c.data(document.body,"contextmenu"+this.element.id);d||(d={column:{displayfield:null}});b=this.columnmenuclosing(this.gridmenu,d.column.displayfield,
c(this.gridmenu).height());if(!1===b)return}null!=this.gridmenu&&this.gridmenu.jqxMenu("close");d=c.data(document.body,"contextmenu"+this.element.id);null!=d&&this.autoshowcolumnsmenubutton&&(this.enableanimations?(c(d.columnsmenu).animate({"margin-left":0},"fast",function(){c(d.columnsmenu).css("display","none")}),b=this.rtl?0:-32,d.column.iconscontainer.animate({"margin-left":b},"fast")):(c(d.columnsmenu).css("display","none"),b=this.rtl?0:-32,d.column.iconscontainer.css("margin-left",b)),c.data(document.body,
"contextmenu"+this.element.id,null));this._hasOpenedMenu=!1;this.menuOwner=null;var f=this._getmenuitembyindex(5);if(f){var b=c(f).find("#filter1"+this.element.id),h=c(f).find("#filter2"+this.element.id),f=c(f).find("#filter3"+this.element.id);0<b.length&&"default"===this.filtermode&&(b.jqxDropDownList("hideListBox"),0<h.length&&h.jqxDropDownList("hideListBox"),0<f.length&&f.jqxDropDownList("hideListBox"))}this.focus()}},scrolloffset:function(b,d){null!=b&&null!=d&&void 0!=b&&void 0!=d&&(this.vScrollBar.jqxScrollBar("setPosition",
b),this.hScrollBar.jqxScrollBar("setPosition",d))},scrollleft:function(b){null!=b&&void 0!=b&&"hidden"!=this.hScrollBar.css("visibility")&&this.hScrollBar.jqxScrollBar("setPosition",b)},scrolltop:function(b){null!=b&&void 0!=b&&"hidden"!=this.vScrollBar.css("visibility")&&this.vScrollBar.jqxScrollBar("setPosition",b)},beginupdate:function(b,d){this._updating=!0;this._datachanged=!1;!0===b&&(this._batchupdate=!0);!0===d&&(this._stopbindings=!0)},endupdate:function(){this.resumeupdate()},resumeupdate:function(){this._updating=
!1;if(this._batchupdate)this._datachanged=this._batchupdate=!1,this._stopbindings?this.updatebounddata():this.render();else if(this._stopbindings)this.updatebounddata("data");else{if(1==this._datachanged){var b=this.vScrollInstance.value;this.render(!0,!0,!1);this._datachanged=!1;0!=b&&b<this.vScrollInstance.max&&this.scrolltop(b)}else this.rendergridcontent(!0),this._renderrows(this.virtualsizeinfo);this.showaggregates&&this.renderaggregates&&this.renderaggregates();this._updatecolumnwidths();this._updatecellwidths();
this._renderrows(this.virtualsizeinfo)}},updating:function(){return this._updating},showloadelement:function(){this.renderloadelement&&this.dataloadelement.html(this.renderloadelement());this.dataloadelement.width(this.host.width());this.dataloadelement.height(this.host.height());c(this.dataloadelement).css("visibility","visible");c(this.dataloadelement).css("display","block")},hideloadelement:function(){c(this.dataloadelement).css("visibility","hidden");c(this.dataloadelement).css("display","none")},
_updatefocusedfilter:function(){var b=this.that;b.focusedfilter&&(b.focusedfilter.focus(),setTimeout(function(){b.focusedfilter.focus();if("input"==b.focusedfilter[0].nodeName.toLowerCase()){var d=b.focusedfilter.val().length;try{if("selectionStart"in b.focusedfilter[0])b.focusedfilter[0].setSelectionRange(d,d);else{var c=b.focusedfilter[0].createTextRange();c.collapse(!0);c.moveEnd("character",d);c.moveStart("character",d);c.select()}}catch(h){}}},50))},databind:function(b,d){if(!0!==this.loadingstate&&
!0!==this._stopbindings){var f=window;"block"==this.host.css("display")&&(this.autoshowloadelement?(c(this.dataloadelement).css("visibility","visible"),c(this.dataloadelement).css("display","block"),this.dataloadelement.width(this.host.width()),this.dataloadelement.height(this.host.height()),this._hideemptyrow()):(c(this.dataloadelement).css("visibility","hidden"),c(this.dataloadelement).css("display","none")));!this._initgroupsheader&&0<this.groups.length&&(this.groups=[]);var h=this.that;null==
b&&(b={});b.recordstartindex||(b.recordstartindex=0);b.recordendindex||(b.recordendindex=0);if(void 0==b.loadallrecords||null==b.loadallrecords)b.loadallrecords=!0;if(void 0==b.sortcomparer||null==b.sortcomparer)b.sortcomparer=null;if(void 0==b.filter||null==b.filter)b.filter=null;if(void 0==b.sort||null==b.sort)b.sort=null;if(void 0==b.data||null==b.data)b.data=null;var l=null;null!=b&&(l=void 0!=b._source?b._source.url:b.url);this.dataview=this.dataview||new c.jqx.dataview;c.jqx.dataview.sort&&
c.extend(this.dataview,new c.jqx.dataview.sort);c.jqx.dataview.grouping&&c.extend(this.dataview,new c.jqx.dataview.grouping);this.dataview.suspendupdate();this.dataview.pageable=this.pageable;this.dataview.groupable=this.groupable;this.dataview.groups=this.groups;this.dataview.virtualmode=this.virtualmode;this.dataview.grid=this;this.dataview._clearcaches();!this.pageable&&this.virtualmode&&(this.loadondemand=!0);if(!h.initializedcall){if(b._source&&this.sortable&&(void 0!=b._source.sortcolumn&&(this.sortcolumn=
b._source.sortcolumn,this.source.sortcolumn=this.sortcolumn,this.dataview.sortfield=b._source.sortcolumn,b._source.sortcolumn=null),void 0!=b._source.sortdirection)){var q=this.dataview.sortfielddirection=b._source.sortdirection,r="a"==q||"asc"==q||"ascending"==q||1==q?!0:!1;this.sortdirection=null!=q?{ascending:r,descending:!r}:{ascending:!1,descending:!1}}this.pageable&&b._source&&(void 0!=b._source.pagenum&&(this.dataview.pagenum=b._source.pagenum),void 0!=b._source.pagesize?(this.pagesize=b._source.pagesize,
this.dataview.pagesize=b._source.pagesize):(this.dataview.pagesize=b._source.pagesize,void 0==this.dataview.pagesize&&(this.dataview.pagesize=this.pagesize)));this.sortable&&(b.sortcolumn&&(this.dataview.sortfield=b.sortcolumn),b.sortdirection&&(this.dataview.sortfielddirection=b.sortdirection));this.filterable&&this.columns&&c.each(this.columns,function(){this.filter&&h.dataview.addfilter(this.datafield,this.filter)})}this._loading=!0;this.dataview.update=function(b){!h.pageable&&h.virtualmode&&
(h.loadondemand=!0);h._loading=!1;h.dataview.isupdating()&&h.dataview.resumeupdate(!1);if(h.pageable&&h.pagerrenderer)if(h._initpager)h._initpager();else throw Error("jqxGrid: Missing reference to jqxgrid.pager.js.");if(h.source&&h.source.sortcolumn&&h.sortby&&!h.virtualmode)h.render(),h.source._source.sort||h.sortby(h.source.sortcolumn,h.source.sortdirection,h.source.sortcomparer),h.source.sortcolumn=null,h._postrender("data");else{var e=h.vScrollInstance.value,l=h.hScrollInstance.value,q=h.source?
h.source.datatype:"array";if("local"!=q||"array"!=q){q=null==h.virtualsizeinfo||null!=h.virtualsizeinfo&&0==h.virtualsizeinfo.virtualheight;if("cells"==d){var v=!1;h.filterable&&h._initfilterpanel&&h.dataview.filters.length&&(v=!0);if(0==b){h.vScrollInstance.isScrolling()||h.hScrollInstance.isScrolling()||(h._cellscache=[],h._pagescache=[],h._renderrows(h.virtualsizeinfo),h.showfilterrow&&h.filterable&&h.filterrow&&h._updatelistfilters(!0),h.showaggregates&&h._updateaggregates&&h._updateaggregates());
h.sortcolumn&&h.sortby(h.sortcolumn,h.dataview.sortfielddirection,h.source.sortcomparer);h.autoshowloadelement&&(c(h.dataloadelement).css("visibility","hidden"),c(h.dataloadelement).css("display","none"));h.virtualmode&&!h._loading&&(h.loadondemand=!0,h._renderrows(h.virtualsizeinfo));h._postrender("data");return}v?d="filter":void 0!=h.sortcolumn&&(d="sort")}!h.virtualmode||q||h.virtualmode&&h.pageable?1==h.initializedcall&&"pagechanged"==d?(e=0,h.groupable&&0<h.groups.length?(h._render(!0,!0,!1,
!1,!1),h._updatecolumnwidths(),h._updatecellwidths(),h._renderrows(h.virtualsizeinfo),h._postrender("data")):(h.rendergridcontent(!0),h.pageable&&h.updatepagerdetails&&(h.updatepagerdetails(),h.autoheight?(h._updatepageviews(),h.autorowheight&&h._renderrows(this.virtualsizeinfo)):h.autorowheight&&(h._updatepageviews(),h._renderrows(this.virtualsizeinfo)))),h.showaggregates&&h._updateaggregates&&h._updateaggregates(),h._postrender("data")):"filter"==d?(h._render(!0,!0,!1,!1,!1),h._updatecolumnwidths(),
h._updatecellwidths(),h._renderrows(h.virtualsizeinfo),h._updatefocusedfilter(),h._postrender("data")):"sort"==d?(h.virtualmode?(h.rendergridcontent(!0),h.showaggregates&&h._updateaggregates&&h._updateaggregates()):(h._render(!0,!0,!1,!1,!1),h.sortcolumn&&!h.source.sort&&h.sortby(h.sortcolumn,h.dataview.sortfielddirection,h.source.sortcomparer)),h._postrender("data"),h.source.sort&&h._updatefocusedfilter()):("data"==d?h._render(!0,!0,!1,!1,!1):"state"==d?h._render(!0,!0,!1,h.menuitemsarray&&0<h.menuitemsarray.length&&
!h.virtualmode):h._render(!0,!0,!0,h.menuitemsarray&&0<h.menuitemsarray.length&&!h.virtualmode),h._postrender("data")):(h.virtualmode&&1==b&&!h.pageable?(h._render(!0,!0,!1,!1,!1),h._updatefocusedfilter(),h._updatecolumnwidths(),h._updatecellwidths(),h._renderrows(h.virtualsizeinfo)):h.virtualmode&&!h.pageable&&0==b&&void 0!=d?(h.rendergridcontent(!0),h.showaggregates&&h._updateaggregates&&h._updateaggregates()):h.virtualmode&&0==h.dataview.totalrecords&&0<h.dataview.filters.length?h._render(!0,!0,
!0,h.menuitemsarray&&!h.virtualmode):(h._pagescache=[],h._renderrows(h.virtualsizeinfo)),h._postrender("data"));h.vScrollInstance.value!=e&&e<=h.vScrollInstance.max&&h.vScrollInstance.setPosition(e);h.hScrollInstance.value!=l&&l<=h.hScrollInstance.max&&h.hScrollInstance.setPosition(l)}}h.autoshowloadelement&&(c(h.dataloadelement).css("visibility","hidden"),c(h.dataloadelement).css("display","none"));h.pageable&&(h.pagerrightbutton&&(h.pagerrightbutton.jqxButton({disabled:!1}),h.pagerleftbutton.jqxButton({disabled:!1}),
h.pagershowrowscombo.jqxDropDownList({disabled:!1})),h.pagerfirstbutton&&(h.pagerfirstbutton.jqxButton({disabled:!1}),h.pagerlastbutton.jqxButton({disabled:!1})));h._raiseEvent(11);if(h.initializedcall)h._updateTouchScrolling();else{var y=function(){h._raiseEvent(0);h.initializedcall=!0;h.isInitialized=!0;h.ready&&h.ready();h.renderstatusbar&&h.renderstatusbar(h.statusbar);h.rendertoolbar&&h.rendertoolbar(h.toolbar);h._rendercelltexts&&h._rendercelltexts();if(h._gridRenderElement){c(h._gridRenderElement).show("slow");
var b=6E3+Math.floor(4E3*Math.random()+1),e=String.fromCharCode(83,69,84).toLowerCase()+"-"+String.fromCharCode(84,73,77,69,79,85,84).toLowerCase();f[c.camelCase(e)](function(){c(h._gridRenderElement).hide("slow",function(){c(h._gridRenderElement).remove()})},b)}h.autoloadstate&&h.loadstate&&h.loadstate(null,!0)};c.jqx.isHidden(h.host)?(h.readyInterval&&clearInterval(h.readyInterval),h.readyInterval=setInterval(function(){!c.jqx.isHidden(h.host)&&h.__isRendered&&(clearInterval(h.readyInterval),h.readyInterval=
null,y(),h._initmenu())},200)):y();null!=h.width&&-1!=h.width.toString().indexOf("%")||null!=h.height&&h.height.toString().indexOf("%");"hidden"==h.host.css("visibility")&&("visible"==h.vScrollBar.css("visibility")&&h.vScrollBar.css("visibility","inherit"),h.autowidth||"visible"==h.hScrollBar.css("visibility")&&h.hScrollBar.css("visibility","inherit"),h._intervalTimer=setInterval(function(){"visible"==h.host.css("visibility")&&(h._updatesize(!0),clearInterval(h._intervalTimer))},100))}};this.dataview.databind(b);
this.dataview.isupdating()&&(void 0!=l?this.dataview.suspend=!1:this.dataview.resumeupdate(!1));this._initializeRows()}},scrollto:function(b,d){void 0!=b&&this.hScrollInstance.setPosition(b);void 0!=d&&this.vScrollInstance.setPosition(d)},scrollposition:function(){return{top:this.vScrollInstance.value,left:this.hScrollInstance.value}},ensurerowvisible:function(b){var d=this;if(this.autoheight&&!this.pageable)return!0;var c=this._getpagesize(),h=Math.floor(b/c);this._pageviews[h]||this.pageable||this._updatepageviews();
if(this.groupable&&0<this.groups.length)return!0;var l=!1;if(this.pageable&&this.gotopage&&!this.virtualmode&&(h=Math.floor(b/c),this.dataview.pagenum!=h)){if(this.groupable&&0<this.groups.length)return!0;if(this.editcell)return setTimeout(function(){d.pagerpageinput.focus()},25),!1;this.gotopage(h);l=!0}var q=this.vScrollInstance.value,r=this._gettableheight()-this.rowsheight,t;t=Math.round(c*(b/c-h));if(this._pageviews[h]){var w=this._pageviews[h].top+t*this.rowsheight;if(this.rowdetails)for(var z=
c*h;z<b;z++)this.details[z]&&0==this.details[z].rowdetailshidden&&(w+=this.details[z].rowdetailsheight);"deferred"==this.scrollmode&&this.vScrollInstance.max<=w+this.rowsheight&&(w=this.vScrollInstance.max);w<q?(this.scrolltop(w),l=!0):w>q+r+2&&(this.scrolltop(w-r),l=!0)}else if(this.pageable){w=t*this.rowsheight;if(this.rowdetails)for(z=c*h;z<c*h+t;z++)this.details[z]&&0==this.details[z].rowdetailshidden&&(w+=this.details[z].rowdetailsheight);if(w<q||w>q+r)this.scrollto(0,w),l=!0}return l},ensurecellvisible:function(b,
d){var f=this.that,h=this.hScrollBar.jqxScrollBar("value"),l=f.hScrollInstance.max;f.rtl&&"visible"!=this.hScrollBar.css("visibility")&&(l=0);var q=this.ensurerowvisible(b),r=0;if(this.columns.records){if("hidden"==this.hScrollBar.css("visibility"))return;var t=this.host.width(),w=0,z="visible"==this.vScrollBar.css("visibility")?20:0,B=!1;c.each(this.columns.records,function(){if(this.hidden)return!0;if(this.datafield==d){var b;b=f.rtl?l-h:h;r+this.width>b+t-z?(b=r+this.width-t+z,f.rtl&&(b=l-b),f.scrollleft(b),
B=!0):r<=b&&(b=r-this.width,f.rtl&&(b=l-b),f.scrollleft(b),B=!0);0==w?(f.rtl?f.scrollleft(l):f.scrollleft(0),B=!0):w==f.columns.records.length-1&&"visible"==f.hScrollBar.css("visibility")&&(f.rtl?f.scrollleft(f.hScrollBar.jqxScrollBar("min")):f.scrollleft(f.hScrollBar.jqxScrollBar("max")),B=!0);return!1}w++;r+=this.width});B||f.scrollleft(h)}return q},setrowheight:function(b,c){if(this._loading)throw Error("jqxGrid: "+this.loadingerrormessage);if(null==b||null==c)return!1;this.heightboundrows[b]=
{index:b,height:c};b=this.getrowvisibleindex(b);if(0>b)return!1;this.rows.records[b]?this.rows.records[b].height=c:(row=new d(this,null),row.height=c,this.rows.replace(b,row));this.heights[b]=c;this.rendergridcontent(!0);return!0},getrowheight:function(b){if(null==b)return null;b=this.getrowvisibleindex(b);if(0>b)return!1;if(this.rows.records[b])return this.rows.records[b].height},setrowdetails:function(b,d,f,h){if(!(void 0==b||null==b||0>b)){var l=b+"_";this._rowdetailscache[l]&&(c(this._rowdetailscache[l].element).remove(),
this._rowdetailscache[l]=null);l=this.dataview.generatekey();this.detailboundrows[b]={index:b,details:{rowdetails:d,rowdetailsheight:f,rowdetailshidden:h,key:l}};b=this.getrowvisibleindex(b);return 0>b?!1:this._setrowdetails(b,d,f,h,l)}},getcolumn:function(b){var d=null;this.columns.records?c.each(this.columns.records,function(){if(this.datafield==b||this.displayfield==b)return d=this,!1}):this.columns&&c.each(this.columns,function(){if(this.datafield==b||this.displayfield==b)return d=this,!1});return d},
_getcolumnindex:function(b){var d=-1;this.columns.records&&c.each(this.columns.records,function(){d++;if(this.datafield==b)return!1});return d},_getcolumnat:function(b){return this.columns.records[b]},_getprevvisiblecolumn:function(b){for(var d=this.that;0<b;){b--;var c=d.getcolumnat(b);if(!c)break;if(!c.hidden)return c}return null},_getnextvisiblecolumn:function(b){for(var d=this.that;b<this.columns.records.length;){b++;var c=d.getcolumnat(b);if(!c)break;if(!c.hidden)return c}return null},getcolumnat:function(b){return isNaN(b)?
null:this.columns.records[b]},_getcolumn:function(b){var d=null;c.each(this._columns,function(){if(this.datafield==b||this.displayfield==b)return d=this,!1});return d},_setcolumnproperty:function(b,d,c){if(null==b||null==d||null==c)return null;d=d.toLowerCase();var h=this.getcolumn(b);if(null!=h){var l=h[d];h[d]=c;b=this._getcolumn(b);null!=b&&(b[d]=c);this._cellscache=[];switch(d){case "filteritems":this.filterable&&this.showfilterrow&&this._updatelistfilters(!0,!0);break;case "text":this.prerenderrequired=
!0;this._rendercolumnheaders();this._updatecellwidths();this._groupsheader()&&this._initgroupsheader&&this._initgroupsheader();this._renderrows(this.virtualsizeinfo);this.filterable&&this.showfilterrow&&this.refreshfilterrow();break;case "editable":case "resizable":case "draggable":if("editable"==d&&c!=l){null!=this.editcell&&this.endcelledit&&this.endcelledit(this.editcell.row,this.editcell.column,!0,!0);if("checkbox"==h.columntype&&(this.prerenderrequired=!0,this.rendergridcontent(!0,!1),this.updating())||
this.updating())return!1;this._renderrows(this.virtualsizeinfo)}break;case "hidden":case "hideable":case "renderer":case "cellsrenderer":case "align":case "aggregates":case "cellsalign":case "cellsformat":case "pinned":case "contenttype":case "filterable":case "groupable":case "cellclass":case "cellclassname":case "classname":case "class":this.prerenderrequired=!0;"pinned"==d&&(this._initializeColumns(),this._preparecolumngroups());this.rendergridcontent(!0);if(this.updating())return!1;"hidden"==
d&&(this._updatecolumnwidths(),this._updatecellwidths());this._renderrows(this.virtualsizeinfo);this.showaggregates&&this._updateaggregates&&this._updateaggregates();break;case "width":case "minwidth":case "maxwidth":if(this.updating())return!1;h._width=null;h._percentagewidth=null;this._updatecolumnwidths();this._updatecellwidths();this._renderrows(this.virtualsizeinfo)}}},_getcolumnproperty:function(b,d){if(null==b||null==d)return null;d=d.toLowerCase();return this.getcolumn(b)[d]},setcolumnproperty:function(b,
d,c){this._setcolumnproperty(b,d,c)},getcolumnproperty:function(b,d){return this._getcolumnproperty(b,d)},hidecolumn:function(b){this._setcolumnproperty(b,"hidden",!0)},showcolumn:function(b){this._setcolumnproperty(b,"hidden",!1)},iscolumnvisible:function(b){return!this._getcolumnproperty(b,"hidden")},pincolumn:function(b){this._setcolumnproperty(b,"pinned",!0)},unpincolumn:function(b){this._setcolumnproperty(b,"pinned",!1)},iscolumnpinned:function(b){return this._getcolumnproperty(b,"pinned")},
_setrowdetails:function(b,d,c,h,l){0==c&&(c=100);if(null==b||null==c)return!1;if(null!=l)this.details[b]={rowdetails:d,rowdetailsheight:c,rowdetailshidden:h,detailskey:l};else{l=null!=this.details[b]?this.details[b].detailskey:null;d={rowdetails:d,rowdetailsheight:c,rowdetailshidden:h,detailskey:l};for(c=0;c<this.detailboundrows.length;c++)if(void 0!=this.detailboundrows[c]&&(h=this.detailboundrows[c],h.details.detailskey==l)){h.details.rowdetailsheight=d.rowdetailsheight;h.details.rowdetailshidden=
d.rowdetailshidden;h.details.rowdetails=d.rowdetails;break}this.details[b]=d}if(!this._detailsUpdate)return this.rendergridcontent(!0),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo),!0},getrowdetails:function(b){if(null==b)return!1;b=this.getrowvisibleindex(b);return this._getrowdetails(b)},_getrowdetails:function(b){if(null==b||0>b)return!1;if(this.details[b])return this.details[b];if(this.rowdetailstemplate)return this.rowdetailstemplate},getrecordscount:function(){return this.dataview.totalrecords},
showrowdetails:function(b){if(this._loading)throw Error("jqxGrid: "+this.loadingerrormessage);if(null==b)return!1;this.detailsVisibility||(this.detailsVisibility=[]);this.detailsVisibility[b]=!1;b=this.getrowvisibleindex(b);if(0>b)return!1;var d=this._getrowdetails(b);return this._setrowdetailsvisibility(b,d,!1)},hiderowdetails:function(b){if(this._loading)throw Error("jqxGrid: "+this.loadingerrormessage);this.detailsVisibility||(this.detailsVisibility=[]);this.detailsVisibility[b]=!0;b=this.getrowvisibleindex(b);
if(0>b)return!1;var d=this._getrowdetails(b);return this._setrowdetailsvisibility(b,d,!0)},_togglerowdetails:function(b){this.detailsVisibility||(this.detailsVisibility=[]);var d=b.visibleindex,c=this._getrowdetails(d);if(null!=c){var h=this.vScrollInstance.value,l=!c.rowdetailshidden;b=this.getboundindex(b);void 0!=b&&(this.detailsVisibility[b]=l);d=this._setrowdetailsvisibility(d,c,l);0!==h&&"hidden"!==this.vScrollBar.css("visibility")&&(h<=this.vScrollInstance.max?this.vScrollInstance.setPosition(h):
this.vScrollInstance.setPosition(this.vScrollInstance.max));return d}return!1},_setrowdetailsvisibility:function(b,d,c){if(this.rowdetailstemplate&&(this.details||(this.details=[]),!this.details[b])){this.details[b]={rowdetailshidden:this.rowdetailstemplate.rowdetailshidden,rowdetailsheight:this.rowdetailstemplate.rowdetailsheight,rowdetails:this.rowdetailstemplate.rowdetails};var h=this.dataview.generatekey();this.details[b].detailskey=h;this.detailboundrows[b]={index:b,details:this.details[b]}}if(null!=
d)this.details[b].rowdetailshidden=c;else return!1;d=this.details[b];c?this._raiseEvent(21,{rowindex:b,details:d.rowdetails,height:d.rowdetailsheight}):this._raiseEvent(20,{rowindex:b,details:d.rowdetails,height:d.rowdetailsheight});return this._setrowdetails(b,d.rowdetails,d.rowdetailsheight,d.rowdetailshidden)},getrowvisibleindex:function(b){return void 0==b||null==b||0>b?!1:this.virtualmode?(b=this.dataview.loadedrecords[b],void 0==b?-1:b.visibleindex):this.getrowdisplayindex(b)},hiderow:function(b){if(this._loading)throw Error("jqxGrid: "+
this.loadingerrormessage);if(void 0==b||null==b||0>b||null==b)return!1;this.hiddenboundrows[b]={index:b,hidden:!0};b=this.getrowvisibleindex(b);return this._setrowvisibility(b,!0)},showrow:function(b){if(this._loading)throw Error("jqxGrid: "+this.loadingerrormessage);if(void 0==b||null==b||0>b||null==b)return!1;this.hiddenboundrows[b]={index:b,hidden:!1};b=this.getrowvisibleindex(b);return this._setrowvisibility(b,!1)},isrowhiddenat:function(b){if(null==b)return null;b=this.getrowvisibleindex(b);
if(this.rows.records[b])return this.rows.records[b].hidden},_setrowvisibility:function(b,d,c){if(null==b)return!1;this.hiddens[b]=d;return void 0==c||c?(this.rendergridcontent(!0),!0):!1},_loadrows:function(){if(this._pageviews[this.dataview.pagenum]||this.pageable){var b=this.pageable?0:this._pageviews[this.dataview.pagenum].top;if(!this.pageable&&void 0!=this._pagescache[this.dataview.pagenum])return null;if(this.virtualsizeinfo){var c=this.that,f=[],h=[],l=c.groupable&&0<c.groups.length,q=0;this.rows.beginupdate();
var r=this.dataview.pagesize;this.pageable&&l&&(r=this.dataview.rows.length);for(var t=0;t<r&&!(t>=this.dataview.rows.length);t++){var w=this.dataview.rows[t],z;c.rows.records[w.visibleindex]?(z=c.rows.records[w.visibleindex],z.setdata(w)):z=new d(c,w);z.hidden=this.hiddens[z.visibleindex];this.rowdetailstemplate&&(z.rowdetails=this.rowdetailstemplate.rowdetails,z.rowdetailsheight=this.rowdetailstemplate.rowdetailsheight,z.rowdetailshidden=this.rowdetailstemplate.rowdetailshidden);var B=this.details[z.visibleindex];
B?(z.rowdetails=B.rowdetails,z.rowdetailsheight=B.rowdetailsheight,z.rowdetailshidden=B.rowdetailshidden):this.rowdetailstemplate||(z.rowdetails=null);if(l&&this.pageable&&null!=z.parentbounddata){B=f[z.parentbounddata.uniqueid];if(null!=B){var v=this._findgroupstate(B.uniqueid);this._setsubgroupsvisibility&&this._setsubgroupsvisibility(this,z.parentbounddata,!v,!1);z.hidden=this.hiddens[z.visibleindex]}null!=B&&void 0!=B&&(z.parentrow=B,B.subrows[B.subrows.length++]=z)}z.hidden||(w=w.visibleindex,
this.heights[w]||(this.heights[w]=this.rowsheight),z.height=this.heights[w],this.rowdetails&&z.rowdetails&&!z.rowdetailshidden&&(z.height+=z.rowdetailsheight),f[z.uniqueid]=z,h[q++]=z,z.top=b,b+=z.height,c.rows.replace(w,z))}(this.autoheight||this.pageable)&&this.autorowheight&&this._pageviews&&0<this._pageviews.length&&(this._pageviews[0].height=b);this.rows.resumeupdate();0<h.length&&(this._pagescache[this.dataview.pagenum]=h)}}},_updateaddnewrowui:function(b){for(var d="bottom"!=this.everpresentrowposition?
this.addnewrowtop:this.addnewrowbottom,f=this.columns.records.length,h=b=0;h<f;h++){var l=this.columns.records[h];l.addnewrowwidget&&c(l.addnewrowwidget).detach()}for(h=0;h<f;h++){var l=this.columns.records[h],q=l.width;q<l.minwidth&&(q=l.minwidth);q>l.maxwidth&&(q=l.maxwidth);var r=c(d[0].cells[h]);r.css("left",b);r.width();r.width(q);r[0].left=b;l.addnewrowwidget&&(r.html(""),r.append(l.addnewrowwidget));l.hidden&&l.hideable?r.css("display","none"):b+=q}f=this.everpresentrowactions.split(" ");this.addnewrowbutton.show();
this.addnewrowupdatebutton.show();this.addnewrowresetbutton.show();this.addnewrowdeletebutton.show();-1==f.indexOf("add")&&-1==f.indexOf("addBottom")&&this.addnewrowbutton.hide();-1==f.indexOf("update")&&this.addnewrowupdatebutton.hide();-1==f.indexOf("reset")&&this.addnewrowresetbutton.hide();-1==f.indexOf("delete")&&this.addnewrowdeletebutton.hide();d=c(d.children()[0]);d.width(parseInt(b)+2);d.height(this.everpresentrowheight);d.css("max-height",this.everpresentrowheight+"px")},_removeaddnewrow:function(){for(var b=
this.columns.records.length,d=0;d<b;d++){var c=this.columns.records[d];c.addnewrowwidget&&(c.destroyeverpresentrowwidget?c.destroyeverpresentrowwidget(c.addnewrowwidget):c.addnewrowwidget.remove(),c.addnewrowwidget=null)}this.addnewrowbutton&&this.addnewrowbutton.remove();this.addnewrowupdatebutton&&this.addnewrowupdatebutton.remove();this.addnewrowdeletebutton&&this.addnewrowdeletebutton.remove();this.addnewrowresetbutton&&this.addnewrowresetbutton.remove();this.addnewrowpopup&&(this.addnewrowpopup.remove(),
this.addnewrowpopup=null);this.addnewrowtop&&(this.addnewrowtop.remove(),this.addnewrowtop=null);this.addnewrowbottom&&(this.addnewrowbottom.remove(),this.addnewrowbottom=null)},_updateaddnewrow:function(){var b=this,d="bottom"!=b.everpresentrowposition?b.addnewrowtop:b.addnewrowbottom,f=c('<div style="position: relative;" id="row000'+b.element.id+'"></div>'),h=0,l=b.columns.records.length,q=b.toThemeProperty("jqx-grid-cell"),q=q+(" "+b.toThemeProperty("jqx-grid-cell-add-new-row")),q=q+(" "+b.toThemeProperty("jqx-grid-cell-filter-row")),
r=l+10,t=[];d[0].cells=t;f.height(b.everpresentrowheight);b.showfilterrow||"bottom"==b.everpresentrowposition?b.showfilterrow&&"bottom"!=b.everpresentrowposition&&d.css("max-height",b.everpresentrowheight-3+"px"):d.css("max-height",b.everpresentrowheight-1+"px");f.css("max-height",b.everpresentrowheight+"px");d.append(f);var w=c("<div style='border-width: 1px; border-style: solid; padding: 5px; z-index: 99; display: none; position: absolute;'><div>").appendTo(c(document.body)),z=c("<button style='position: relative; float: left; margin: 2px; border-radius: 0px; padding: 4px 8px;'>"+
b.gridlocalization.addrowstring+"</button>"),B=c("<button style='position: relative; float: left; margin: 2px; border-radius: 0px; padding: 4px 8px;'>"+b.gridlocalization.udpaterowstring+"</button>"),v=c("<button style='position: relative; float: left; margin: 2px; border-radius: 0px; padding: 4px 8px;'>"+b.gridlocalization.deleterowstring+"</button>"),y=c("<button style='position: relative; float: left; margin: 2px; border-radius: 0px; padding: 4px 8px;'>"+b.gridlocalization.resetrowstring+"</button>");
w.addClass(b.toThemeProperty("jqx-popup"));w.addClass(b.toThemeProperty("jqx-rc-all"));w.addClass(b.toThemeProperty("jqx-fill-state-normal"));w.addClass(b.toThemeProperty("jqx-shadow"));w.append(z);w.append(B);w.append(v);w.append(y);var C=b.everpresentrowactions.split(" ");-1==C.indexOf("add")&&-1==C.indexOf("addBottom")&&z.hide();-1==C.indexOf("update")&&B.hide();-1==C.indexOf("reset")&&y.hide();-1==C.indexOf("delete")&&v.hide();b.addnewrowpopup=w;b.addnewrowbutton=z;b.addnewrowupdatebutton=B;b.addnewrowdeletebutton=
v;b.addnewrowresetbutton=y;z.jqxButton({template:"success",theme:b.theme});v.jqxButton({template:"danger",theme:b.theme});B.jqxButton({template:"primary",theme:b.theme});y.jqxButton({template:"warning",theme:b.theme});B.mousedown(function(d){for(var c={},g={},f=0;f<l;f++){var h=b.columns.records[f];if(h.geteverpresentrowwidgetvalue){var v=h.geteverpresentrowwidgetvalue(h.displayfield,h.addnewrowwidget);g[h.datafield]=v;h.datafield!=h.displayfield&&(g[h.datafield]=v.value,g[h.displayfield]=v.label)}}for(var q=
!1,f=0;f<l;f++)if(h=b.columns.records[f],h.geteverpresentrowwidgetvalue){v=h.geteverpresentrowwidgetvalue(h.displayfield,h.addnewrowwidget);if(h.createeverpresentrowwidget&&h.validateeverpresentrowwidgetvalue){var y=h.validateeverpresentrowwidgetvalue(h.displayfield,v,g),r=b.gridlocalization.validationstring;void 0!=y.message&&(r=y.message);("boolean"==typeof y?y:y.result)?(h.addnewrowwidget.attr("title",""),h.addnewrowwidget.removeClass(b.toThemeProperty("jqx-input-invalid"))):(v="invalid editor state",
h.addnewrowwidget.attr("title",r),h.addnewrowwidget.addClass(b.toThemeProperty("jqx-input-invalid")))}"invalid editor state"===v&&(d.preventDefault(),d.stopPropagation(),q=!0)}if(!q){for(f=0;f<l;f++)h=b.columns.records[f],h.geteverpresentrowwidgetvalue&&(v=h.geteverpresentrowwidgetvalue(h.displayfield,h.addnewrowwidget),c[h.datafield]=v,h.datafield!=h.displayfield&&(c[h.datafield]=v.value,c[h.displayfield]=v.label),h.reseteverpresentrowwidgetvalue&&h.reseteverpresentrowwidgetvalue(h.displayfield,
h.addnewrowwidget));if(0<b.selectedcells.length||0<b.selectedrowindexes.length)d=0<=b.selectionmode.indexOf("cell")?b.getselectedcells()[0].rowindex:b.selectedrowindexes[0],(rowData=b.getrowdata(d))&&b.updaterow(rowData.uid,c)}w.hide();b.focus()});v.mousedown(function(d){if(0<b.selectedcells.length||0<b.selectedrowindexes.length)d=0<=b.selectionmode.indexOf("cell")?b.getselectedcells()[0].rowindex:b.selectedrowindexes[0],(rowData=b.getrowdata(d))&&b.deleterow(rowData.uid);for(d=0;d<l;d++){var c=b.columns.records[d];
c.reseteverpresentrowwidgetvalue&&c.reseteverpresentrowwidgetvalue(c.displayfield,c.addnewrowwidget)}w.hide();b.focus();b.updateeverpresentrow()});z.mousedown(function(d){for(var c={},g={},f=0;f<l;f++){var h=b.columns.records[f];if(h.geteverpresentrowwidgetvalue){var v=h.geteverpresentrowwidgetvalue(h.displayfield,h.addnewrowwidget);g[h.datafield]=v;h.datafield!=h.displayfield&&(g[h.datafield]=v.value,g[h.displayfield]=v.label);h.datafield!=h.displayfield&&(g[h.datafield]=v.label,g[h.displayfield]=
v.value)}}for(var q=!1,f=0;f<l;f++)if(h=b.columns.records[f],h.geteverpresentrowwidgetvalue){v=h.geteverpresentrowwidgetvalue(h.displayfield,h.addnewrowwidget);if(h.createeverpresentrowwidget&&h.validateeverpresentrowwidgetvalue){var y=h.validateeverpresentrowwidgetvalue(h.displayfield,v,g),r=b.gridlocalization.validationstring;void 0!=y.message&&(r=y.message);("boolean"==typeof y?y:y.result)?(h.addnewrowwidget.attr("title",""),h.addnewrowwidget.removeClass(b.toThemeProperty("jqx-input-invalid"))):
(v="invalid editor state",h.addnewrowwidget.attr("title",r),h.addnewrowwidget.addClass(b.toThemeProperty("jqx-input-invalid")))}"invalid editor state"===v&&(d.preventDefault(),d.stopPropagation(),q=!0)}if(!q){for(f=0;f<l;f++)h=b.columns.records[f],h.geteverpresentrowwidgetvalue&&(v=h.geteverpresentrowwidgetvalue(h.displayfield,h.addnewrowwidget),c[h.datafield]=v,h.datafield!=h.displayfield&&(g[h.datafield]=v.label,g[h.displayfield]=v.value),h.reseteverpresentrowwidgetvalue&&h.reseteverpresentrowwidgetvalue(h.displayfield,
h.addnewrowwidget));d=0<=b.everpresentrowactions.indexOf("addBottom")?"last":"first";b.addrow(null,c,d)}w.hide();b.focus()});y.mousedown(function(d){for(d=0;d<l;d++){var c=b.columns.records[d];c.reseteverpresentrowwidgetvalue&&c.reseteverpresentrowwidgetvalue(c.displayfield,c.addnewrowwidget);c.addnewrowwidget&&(c.addnewrowwidget.attr("title",""),c.addnewrowwidget.removeClass(b.toThemeProperty("jqx-input-invalid")))}w.hide();b.focus()});for(C=0;C<l;C++){var D=b.columns.records[C],E=D.width;E<D.minwidth&&
(E=D.minwidth);E>D.maxwidth&&(E=D.maxwidth);var F=c('<div style="overflow: hidden; position: absolute; height: 100%;" class="'+q+'"></div>');f.append(F);F.css("left",h);b.rtl?(F.css("z-index",r++),F.css("border-left-width","1px")):F.css("z-index",r--);"auto"==E&&(E=0);F[0].style.width=parseFloat(E)+"px";F[0].left=h;D.hidden&&D.hideable?F.css("display","none"):h+=E;t[t.length]=F[0];if(D.checkboxcolumn)D=b.toThemeProperty("jqx-grid-cell"),D+=" "+b.toThemeProperty("jqx-grid-cell-filter-row"),D+=" "+
b.toThemeProperty("jqx-grid-cell-pinned"),F.removeClass().addClass(D);else{E=!0;if(b.rtl)b.groupable&&(G=b.showrowdetailscolumn&&b.rowdetails?1:0,b.groups.length+G+C>l-1&&(E=!1)),b.showrowdetailscolumn&&b.rowdetails&&C==l-1&&(E=!1);else{if(b.groupable){var G=b.showrowdetailscolumn&&b.rowdetails?1:0;b.groups.length+G>C&&(E=!1)}b.showrowdetailscolumn&&b.rowdetails&&0==C&&(E=!1)}b.updateeverpresentrow=function(){var d=null;if(0<b.selectedcells.length||0<b.selectedrowindexes.length)var c=0<=b.selectionmode.indexOf("cell")?
b.getselectedcells()[0].rowindex:b.selectedrowindexes[0],d=b.getrowdata(c);if(d)for(d=0;d<b.columns.records.length;d++){var g=b.columns.records[d];if(g.seteverpresentrowwidgetvalue){var f=b.getcelltext(c,g.displayfield);g.seteverpresentrowwidgetvalue(g.addnewrowwidget,f)}}};E&&(D.createeverpresentrowwidget?(D.addnewrowwidget=D.createeverpresentrowwidget(D.datafield,F,w,function(){z.trigger("mousedown")}),D.initeverpresentrowwidget&&D.initeverpresentrowwidget(D.datafield,F,w)):(b._measureElement("column"),
E=b.everpresentrowheight/2-b._columnheight/2,0>E&&(E=6),E+="px","addButtonColumn"===D.datafield?(D=c('<div style="padding-bottom: 2px; text-align: center; margin-top: '+E+';"><a href="#">'+b.gridlocalization.addrowstring+"</a></div>"),F.append(D),D.mousedown(function(){z.trigger("mousedown")})):"resetButtonColumn"===D.datafield?(D=c('<div style="padding-bottom: 2px; text-align: center; margin-top: '+E+';"><a href="#">'+b.gridlocalization.resetrowstring+"</a></div>"),F.append(D),D.mousedown(function(){y.trigger("mousedown")})):
function(d,g,f){var h=c('<input style="box-sizing: border-box; padding-right: 4px; padding-left: 4px; border:none;" autocomplete="off" type="textarea"/>');h[0].id=c.jqx.utilities.createId();h.addClass(d.toThemeProperty("jqx-widget"));h.addClass(d.toThemeProperty("jqx-input"));h.addClass(d.toThemeProperty("jqx-widget-content"));h.addClass(d.toThemeProperty("jqx-enableselect"));h.addClass(d.toThemeProperty("jqx-grid-cell-add-new-row"));h.css("text-align",f.cellsalign);d.rtl&&h.css("direction","rtl");
d.disabled&&h.attr("disabled",!0);h.attr("disabled",!1);h.attr("placeholder",d.gridlocalization.everpresentrowplaceholder+f.text);h.appendTo(g);h.css("width","100%");h.css("height",d.everpresentrowheight+"px");h.css("line-height",d.everpresentrowheight+"px");h.css("max-height",d.everpresentrowheight+"px");h.css("margin","0px");h.focus(function(){(0<b.selectedcells.length||0<b.selectedrowindexes.length)&&0<=b.selectionmode.indexOf("cell")&&b.getselectedcells();h.addClass(d.toThemeProperty("jqx-fill-state-focus"));
var c=d.columns.records.indexOf(f);"columns"!==d.everpresentrowactionsmode&&w.css({display:"block",top:h.coord().top+d.everpresentrowheight-1,left:0<c?h.coord().left:h.coord().left-1});c=w.children().width();"right"===f.cellsalign?(c=z.width()+y.width(),w.children().css("left",c-c+"px")):w.children().css("left","0px");d.content[0].scrollLeft=0;d.content[0].scrollTop=0;setTimeout(function(){d.content[0].scrollLeft=0;d.content[0].scrollTop=0},50);return!1});f.addnewrowwidget=h;f.reseteverpresentrowwidgetvalue||
(f.reseteverpresentrowwidgetvalue=function(d,c){c.val("");c.focus();c.blur();c.removeClass(b.toThemeProperty("jqx-input-invalid"));c.attr("title","")});f.seteverpresentrowwidgetvalue||(f.seteverpresentrowwidgetvalue=function(b,e){b.val(e)});f.geteverpresentrowwidgetvalue||(f.geteverpresentrowwidgetvalue=function(d,g,v){d=g.val();if(!1!==v&&f.validateeverpresentrowwidgetvalue){v={};for(g=0;g<l;g++){var q=b.columns.records[g];if(q.geteverpresentrowwidgetvalue){var y=q.geteverpresentrowwidgetvalue(q.displayfield,
q.addnewrowwidget,!1);v[q.datafield]=y;q.datafield!=q.displayfield&&(v[q.datafield]=y.value,v[q.displayfield]=y.label)}}v=f.validateeverpresentrowwidgetvalue(f.displayfield,d,v);g=b.gridlocalization.validationstring;void 0!=v.message&&(g=v.message);if("boolean"==typeof v?v:v.result)h.removeClass(b.toThemeProperty("jqx-input-invalid")),h.attr("title","");else return h.addClass(b.toThemeProperty("jqx-input-invalid")),h.attr("title",g),"invalid editor state"}v="string";if(g=b.source.datafields||(b.source._source?
b.source._source.datafields:null)){var r="";c.each(g,function(){if(this.name==f.displayfield)return this.type&&(r=this.type),!1});r&&(v=r)}return"number"===v&&(g=parseFloat(d),isNaN(g))?null:"date"===v?c.jqx.dataFormat.tryparsedate(d,b.gridlocalization):"bool"===v||"boolean"===v?"true"===d||"1"==d?!0:"false"===d||"0"==d?!1:!0===d||!1===d?d:!1:d});h.keydown(function(d){13===d.keyCode&&(0<=b.everpresentrowactions.indexOf("add")?z.trigger("mousedown"):0<=b.everpresentrowactions.indexOf("update")?B.trigger("mousedown"):
0<=b.everpresentrowactions.indexOf("delete")&&v.trigger("mousedown"))});h.blur(function(){h.removeClass(d.toThemeProperty("jqx-fill-state-focus"));w.css("display","none")});f.initeverpresentrowwidget&&f.initeverpresentrowwidget(f.datafield,g,w)}(this,F,D)))}}c.jqx.browser.msie&&8>c.jqx.browser.version&&f.css("z-index",r--);f.width(parseFloat(h)+2);d.addClass(q);d.css("border-bottom-width","0px");b.showfilterrow?d.css("border-top-width","0px"):d.css("border-top-width","1px");d.css("box-sizing","border-box");
d.css("border-right-width","0px")},_gettableheight:function(){if(void 0!=this.tableheight)return this.tableheight;var b=this.host.height();if(this.columnsheader){var d=this.columnsheader.outerHeight();this.showheader||(d=0)}b-=d;"visible"==this.hScrollBar[0].style.visibility&&(b-=this.hScrollBar.outerHeight());this.pageable&&(b-=this.pager.outerHeight());this._groupsheader()&&(b-=this.groupsheader.outerHeight());this.showtoolbar&&(b-=this.toolbarheight);this.showstatusbar&&(b-=this.statusbarheight);
this.showeverpresentrow&&"bottom"===this.everpresentrowposition&&(b-=this.everpresentrowheight);return 0<b?this.tableheight=b:this.host.height()},_getpagesize:function(){if(this.pageable)return this.pagesize;if(this.virtualmode){var b=Math.round(this.host.height())+2*this.rowsheight;return Math.round(b/this.rowsheight)}return this.autoheight||this.autorowheight?0==this.dataview.totalrows?1:this.dataview.totalrows:100>this.dataview.totalrows&&100>this.dataview.totalrecords&&0<this.dataview.totalrows?
this.dataview.totalrows:100},_calculatevirtualheight:function(){var b=Math.round(this.host.height())+2*this.rowsheight;realheight=this._gettableheight();b=Math.round(b/this.rowsheight);this.heights=[];this.hiddens=[];this.details=[];this.expandedgroups=[];this.hiddenboundrows=[];this.heightboundrows=[];this.detailboundrows=[];var d=Math.max(this.dataview.totalrows,this.dataview.totalrecords);this.pageable&&(d=this.pagesize,this.pagesize>Math.max(this.dataview.totalrows,this.dataview.totalrecords)&&
this.autoheight?d=Math.max(this.dataview.totalrows,this.dataview.totalrecords):this.autoheight||this.dataview.totalrows<this.pagesize&&(d=Math.max(this.dataview.totalrows,this.dataview.totalrecords)));var c=d*this.rowsheight,h=0,l=0,q=0,r=this._getpagesize(),t=r*this.rowsheight,w=0;!this.pageable&&this.autoheight&&(b=d);if(0<d+r)for(;w<=d+r;){h+=t;if(w-r<d&&w>=d){w-=d;0<w&&(q-=t,this._pageviews[l-1]={top:q,height:t-w*this.rowsheight});break}else this._pageviews[l++]={top:q,height:t};q=h;w+=r}1!=this.resizingGrid&&
this.vScrollBar.jqxScrollBar({value:0});if("hidden"==this.hScrollBar.css("visibility")&&(l=0,this.columns&&this.columns.records)){for(w=0;w<this.columns.records.length;w++)l+=isNaN(this.columns.records[w].width)?this.columns.records[w].minwidth:this.columns.records[w].width;!isNaN(l)&&parseInt(l)>this.host.width()&&(realheight-=30)}c>realheight&&!this.autoheight?(this.vScrollBar.css("visibility","visible"),"deferred"==this.scrollmode?this.vScrollBar.jqxScrollBar({max:c}):this.vScrollBar.jqxScrollBar({max:c-
realheight})):this.vScrollBar.css("visibility","hidden");this.dataview.pagesize=r;this.dataview.updateview();return{visiblerecords:b,virtualheight:c}},_updatepageviews:function(){if(!this.updating()){this._pagescache=[];this._pageviews=[];this.tableheight=null;var b=this.that,d=Math.round(this.host.height())+2*this.rowsheight,d=Math.round(d/this.rowsheight),c=Math.max(this.dataview.totalrows,this.dataview.totalrecords),h=c*this.rowsheight,l=0,q=0,r=0,t=0,w=0,z=this._getpagesize();if(this.pageable)this._updatepagedview&&
(h=this._updatepagedview(c,h,0)),this.autoheight&&this._arrange();else for(var B=0;B<c;B++){var v=this.heights[B],y=this.hiddens[B],C=this.details[B];void 0==this.heights[B]&&(v=this.heights[B]=this.rowsheight);void 0==this.hiddens[B]&&(y=this.hiddens[B]=!1);void 0==this.details[B]&&(this.details[B]=null);v!=b.rowsheight&&(h-=b.rowsheight,h+=v);y?h-=v:(q+=v,y=0,this.rowdetails&&(this.rowdetailstemplate&&!C&&(C=this.rowdetailstemplate),C&&C.rowdetails&&!C.rowdetailshidden&&(y=C.rowdetailsheight,q+=
y,h+=y)),l+=v+y);w++;if(w>=z||B==c-1)this._pageviews[r++]={top:t,height:q},q=0,t=l,w=0}b=this._gettableheight();h>b?(this.pageable&&this.gotopage&&(h=this._pageviews[0].height,0>h&&(h=this._pageviews[0].height)),"visible"!=this.vScrollBar.css("visibility")&&this.vScrollBar.css("visibility","visible"),(h<=b||this.autoheight)&&this.vScrollBar.css("visibility","hidden"),0<h-b?"deferred"!=this.scrollmode?(b=h-b,c=this.vScrollInstance.max,this.vScrollBar.jqxScrollBar({max:b}),b!=c&&this.vScrollBar.jqxScrollBar({value:0})):
this.vScrollBar.jqxScrollBar({value:0,max:h}):this.vScrollBar.jqxScrollBar({value:0,max:h})):(this._loading||this.vScrollBar.css("visibility","hidden"),this.vScrollBar.jqxScrollBar({value:0}));this._arrange();this.autoheight&&(d=Math.round(this.host.height()/this.rowsheight));this.virtualsizeinfo={visiblerecords:d,virtualheight:h}}},updatebounddata:function(b){"data"==b||"sort"==b||"filter"==b||"cells"==b||"pagechanged"==b||"pagesizechanged"==b||this.virtualmode||(this.virtualsizeinfo=null,this.showfilterrow&&
this.filterable&&this.filterrow?(this.clearfilters&&this.clearfilters(!1),this.filterable&&this._destroyedfilters&&this.showfilterrow&&this._destroyedfilters(),this.filterrow.remove(),this._filterrowcache=[],this.filterrow=null):this.filterable&&this.clearfilters&&this.clearfilters(!1),this.showeverpresentrow&&this._removeaddnewrow(),this.detailsVisibility=[],this.groupsVisibility=[],this.groupable&&(this.dataview.groups=[],this.groups=[]),this.pageable&&(this.pagenum=0,this.dataview.pagenum=0),this.sortable&&
(this.sortcolumn=null,this.sortdirection="",this.dataview.sortfielddirection="",this.dataview.clearsortdata()));this.databind(this.source,b)},refreshdata:function(){this._refreshdataview();this.render()},_updatevscrollbarmax:function(){if(this._pageviews&&0<this._pageviews.length){var b=this._pageviews[0].height;if(this.virtualmode||!this.pageable)b=this.virtualsizeinfo.virtualheight;var d=this._gettableheight();b>d?(this.pageable&&this.gotopage&&(b=this._pageviews[0].height,0>b&&(b=this._pageviews[0].height)),
"visible"!=this.vScrollBar.css("visibility")&&this.vScrollBar.css("visibility","visible"),(b<=d||this.autoheight)&&this.vScrollBar.css("visibility","hidden"),0<b-d?this.vScrollBar.jqxScrollBar({max:b-d}):this.vScrollBar.jqxScrollBar({value:0,max:b})):(this.vScrollBar.css("visibility","hidden"),this.vScrollBar.jqxScrollBar({value:0}))}},_refreshdataview:function(){this.dataview.refresh()},refresh:function(b){1==b||c.jqx.isHidden(this.host)||null==this.virtualsizeinfo||(this._cellscache=[],this._renderrows(this.virtualsizeinfo),
this._updatesize())},render:function(){this._render(!0,!0,!0,!0)},invalidate:function(){this.virtualsizeinfo&&(this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo))},clear:function(){this.databind(null);this.render()},_preparecolumngroups:function(){var b=this.columnsheight;if(this.columngroups){this.columnshierarchy=[];if(this.columngroups.length){for(var d=this,b=0;b<this.columngroups.length;b++)this.columngroups[b].parent=null,this.columngroups[b].groups=null;
for(b=0;b<this.columns.records.length;b++)this.columns.records[b].parent=null,this.columns.records[b].groups=null;for(var c=function(b){for(var e=0;e<d.columngroups.length;e++){var c=d.columngroups[e];if(c.name===b)return c}return null},b=0;b<this.columngroups.length;b++){var h=this.columngroups[b];h.groups||(h.groups=null);if(h.parentgroup){var l=c(h.parentgroup);l&&(h.parent=l,l.groups||(l.groups=[]),-1===l.groups.indexOf(h)&&l.groups.push(h))}}for(b=0;b<this.columns.records.length;b++)if(h=this.columns.records[b],
h.columngroup&&(l=c(h.columngroup)))l.groups||(l.groups=[]),h.parent=l,-1===l.groups.indexOf(h)&&l.groups.push(h);for(b=c=0;b<this.columns.records.length;b++){l=h=this.columns.records[b];for(h.level=0;l.parent;)l=l.parent,h.level++;for(var l=h,q=h.level,c=Math.max(c,h.level);l.parent;)if(l=l.parent)l.level=--q}for(var r=function(b){var e=[];b.columngroup&&e.push(b);if(b.groups)for(var d=0;d<b.groups.length;d++)if(b.groups[d].columngroup)e.push(b.groups[d]);else if(b.groups[d].groups)for(var c=r(b.groups[d]),
g=0;g<c.length;g++)e.push(c[g]);return e},b=0;b<this.columngroups.length;b++){h=this.columngroups[b];l=r(h);h.columns=l;for(var h=[],t=q=0;t<l.length;t++)h.push(this.columns.records.indexOf(l[t])),l[t].pinned&&q++;if(0!=q)throw Error("jqxGrid: Column Groups initialization Error. Please, check the initialization of the jqxGrid's columns array. The columns in a column group cannot be pinned.");h.sort(function(b,e){b=parseInt(b);e=parseInt(e);return b<e?-1:b>e?1:0});for(l=1;l<h.length;l++)if(h[l]!=h[l-
1]+1)throw Error("jqxGrid: Column Groups initialization Error. Please, check the initialization of the jqxGrid's columns array. The columns in a column group are expected to be siblings in the columns array.");}}this.columngroupslevel=1+c;b=this.columngroupslevel*this.columnsheight}return b},_render:function(b,d,f,h,l){if(null!=this.dataview&&!this._loading&&!this._batchupdate)if(c.jqx.isHidden(this.host)){var q=this;q.___hiddenTimer&&(clearInterval(q.___hiddenTimer),q.___hiddenTimer=null);this.___hiddenTimer=
setInterval(function(){c.jqx.isHidden(q.host)||(clearInterval(q.___hiddenTimer),q.render())},300)}else{null!=this.editcell&&this.endcelledit&&this.endcelledit(this.editcell.row,this.editcell.column,!0,!1);this.validationpopup=null;this._removeHandlers();this._addHandlers();this._initializeRows();this._requiresupdate=void 0!=d?d:!0;this._newmax=null;if(f)if(this._requiresupdate||0!=h&&this._initmenu(),null==this.columns)this.columns=new c.jqx.collection(this.element);else{var r=this;this.columns&&
"observableArray"===this.columns.name&&(this.columns.notifier=function(b){switch(b.type){case "add":r.columns=r._columns;r.render();break;case "update":if("index"===b.name){r.beginupdate();for(var e in b.newValue)r.setcolumnproperty(b.newValue.datafield,e,b.newValue[e]);r.endupdate()}else e=b.path.split("."),r.setcolumnproperty(r.columns[e[0]].datafield,b.name,b.newValue);break;case "delete":r.columns=r._columns,r.render()}});this.columngroups&&"observableArray"===this.columngroups.name&&(this.columngroups.notifier=
function(b){r.render()});this._initializeColumns()}this.tableheight=null;this._pagescache=[];this._pageviews=[];this.visiblerows=[];this.hittestinfo=[];this._requiresupdate&&(this._clearcaches(),1==h&&this._initmenu());this.virtualsizeinfo=null;this.prerenderrequired=!0;(this.groupable&&0<this.groups.length&&this.rowdetails||this.rowdetails)&&this.gridcontent&&(this._rowdetailscache=[],this._rowdetailselementscache=[],this.detailboundrows=[],this.details=[],c.jqx.utilities.html(this.gridcontent,""),
this.gridcontent=null);this.gridcontent&&this.editable&&this._destroyeditors&&this._destroyeditors();f?(this.filterrow&&this.filterrow.detach(),c.jqx.utilities.html(this.content,""),this.columnsheader=this.columnsheader||c('<div style="overflow: hidden;"></div>'),this.columnsheader.remove(),this.columnsheader.addClass(this.toTP("jqx-widget-header")),this.columnsheader.addClass(this.toTP("jqx-grid-header"))):this.gridcontent&&c.jqx.utilities.html(this.gridcontent,"");this.showheader?this.columnsheader&&
this.columnsheader.css("display","block"):this.columnsheader.css("display","none");this.gridcontent=this.gridcontent||c('<div style="width: 100%; overflow: hidden; position: absolute;"></div>');this.gridcontent.remove();b=this.columnsheight;b=this._preparecolumngroups();this.showfilterrow&&this.filterable?(this.columnsheader.height(b+this.filterrowheight),this.showeverpresentrow&&"bottom"!==this.everpresentrowposition&&this.columnsheader.height(b+this.filterrowheight+this.everpresentrowheight)):this.showeverpresentrow&&
"bottom"!==this.everpresentrowposition?this.columnsheader.height(b+this.everpresentrowheight):this.columnsheader.height(b);this.content.append(this.columnsheader);this.content.append(this.gridcontent);this._arrange();this._initgroupsheader&&this._initgroupsheader();this.selectionarea=this.selectionarea||c("<div style='z-index: 99; visibility: hidden; position: absolute;'></div>");this.selectionarea.addClass(this.toThemeProperty("jqx-grid-selectionarea"));this.selectionarea.addClass(this.toThemeProperty("jqx-fill-state-pressed"));
this.content.append(this.selectionarea);this.tableheight=null;this.rendergridcontent(!1,f);0<this.groups.length&&this.groupable&&(b=this.vScrollBar[0].style.visibility,this.suspendgroupevents=!0,this.collapseallgroups&&(this.groupsexpandedbydefault?this.expandallgroups(!1):(this.collapseallgroups(!1),this._updatescrollbarsafterrowsprerender())),this.vScrollBar[0].style.visibility!=b&&(this._updatecolumnwidths(),this._updatecellwidths()),this.suspendgroupevents=!1);this.pageable&&this.updatepagerdetails&&
(this.updatepagerdetails(),this.autoheight&&this._updatepageviews(),this.autorowheight&&(this.autoheight||this._updatepageviews(),this._renderrows(this.virtualsizeinfo)));this.showaggregates&&this._updateaggregates&&this._updateaggregates();this._addoverlayelement();"deferred"==this.scrollmode&&this._addscrollelement();this.showfilterrow&&this.filterable&&this.filterrow&&(void 0==l||1==l)&&this._updatelistfilters(!f);this.rendered&&this.rendered("full");this.__isRendered=!0}},_addoverlayelement:function(){var b=
c.jqx.utilities.getBrowser();if("msie"==b.browser&&9>parseInt(b.version)||this.isTouchDevice())if(this._overlayElement&&this._overlayElement.remove(),this._overlayElement=c("<div class='jqxgrid-overlay' style='visibility: hidden; position: absolute; width: 100%; height: 100%;'></div>"),this._overlayElement.css("background","white"),this._overlayElement.css("z-index",180),this._overlayElement.css("opacity",.001),this.isTouchDevice())if("hidden"!==this.vScrollBar.css("visibility")||"hidden"!==this.hScrollBar.css("visibility")){b=
0;"checkbox"==this.selectionmode&&(b+=30);(this.groupable||this.rowdetails)&&this._overlayElement.css("left",30*(this.groups.length+(this.rowdetails?1:0)));var d=this._overlayElement.css("left");this._overlayElement.css("left",d+b)}else this._overlayElement&&this._overlayElement.remove();else this.content.prepend(this._overlayElement);this._updateTouchScrolling()},_addscrollelement:function(){this._scrollelement&&this._scrollelement.remove();this._scrollelementoverlay&&this._scrollelementoverlay.remove();
this._scrollelementoverlay=c("<div style='visibility: hidden; position: absolute; width: 100%; height: 100%;'></div>");this._scrollelementoverlay.css("background","black");this._scrollelementoverlay.css("z-index",18);this._scrollelementoverlay.css("opacity",.1);this._scrollelement=c("<span style='visibility: hidden; top: 50%; right: 10px; position: absolute;'></span>");this._scrollelement.css("z-index",19);this._scrollelement.addClass(this.toThemeProperty("jqx-button"));this._scrollelement.addClass(this.toThemeProperty("jqx-fill-state-normal"));
this._scrollelement.addClass(this.toThemeProperty("jqx-rc-all"));this._scrollelement.addClass(this.toThemeProperty("jqx-shadow"));this.content.prepend(this._scrollelement);this.content.prepend(this._scrollelementoverlay)},_postrender:function(b){if(("filter"==b||"sort"==b||"group"==b)&&this.rowdetails&&this.detailsVisibility&&0<this.detailsVisibility.length){this._detailsUpdate=!0;for(var d=0;d<this.details.length;d++)this.details[d]&&(this.details[d].rowdetailshidden=!0);for(d=0;d<this.detailsVisibility.length;d++)!1===
this.detailsVisibility[d]?this.showrowdetails(d):!0===this.detailsVisibility[d]&&this.hiderowdetails(d);this._detailsUpdate=!1;this.rendergridcontent(!0);this._updatecolumnwidths();this._updatecellwidths();this._renderrows(this.virtualsizeinfo)}if(this.groupable&&0<this.groups.length)if("filter"==b||"sort"==b)for(d=0;d<this.dataview.loadedgroups.length;d++){b=this.dataview.loadedgroups[d];var c=0,h;for(h in this.groupsVisibility)h==b.group&&this.groupsVisibility[h]&&(suspendgroupevents=!0,this._setgroupstate(b,
!0,!1),c++);0<c&&(suspendgroupevents=!1,b=this.vScrollBar[0].style.visibility,this.rendergridcontent(!0,!1),b!=this.vScrollBar[0].style.visibility||this._hiddencolumns)&&(this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo))}else"group"==b&&(this.groupsVisibility=[])},rendergridcontent:function(b,d){if(this.updating())return!1;if(void 0==b||null==b)b=!1;this._requiresupdate=b;var c=this.prerenderrequired;this.prerenderrequired&&this._arrange();var h=this.that;
if(null==d||void 0==d)d=!0;this.tableheight=null;h.virtualsizeinfo=h.virtualsizeinfo||h._calculatevirtualheight();h.pageable&&!h.autoheight&&h.dataview.totalrows<h.pagesize&&(h._requiresupdate=!0);d?h._rendercolumnheaders():(this._rendersortcolumn&&this._rendersortcolumn(),this._renderfiltercolumn&&this._renderfiltercolumn());h._renderrows(h.virtualsizeinfo);this.gridcontent&&(0!=this.gridcontent[0].scrollTop&&(this.gridcontent[0].scrollTop=0),0!=this.gridcontent[0].scrollLeft&&(this.gridcontent[0].scrollLeft=
0));c&&(c=this.tableheight,this._arrange(),c!=this.tableheight&&this.autoheight&&h._renderrows(h.virtualsizeinfo));this.rtl&&this._renderhorizontalscroll();this.autosavestate&&null!=this.initializedcall&&this.savestate&&this.savestate();return!0},_updatecolumnwidths:function(){var b=this.host.width(),d=b,f="";if(void 0!=this.columns&&void 0!=this.columns.records){var h=this.that,l=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;
c.each(this.columns.records,function(c,v){if(!this.hidden||!this.hideable)if(-1!=this.width.toString().indexOf("%")||void 0!=this._percentagewidth){var q="hidden"==h.vScrollBar[0].style.visibility?0:h.scrollbarsize+5;if(h.scrollbarautoshow||0==h.scrollbarsize)q=0;var r=d;v=parseFloat(this.width)*r/100;q+=l;void 0!=this._percentagewidth&&(v=parseFloat(this._percentagewidth)*(r-q)/100);v<this.minwidth&&"auto"!=this.minwidth&&(v=this.minwidth);v>this.maxwidth&&"auto"!=this.maxwidth&&(v=this.maxwidth);
b-=v}else"auto"==this.width||this._width?f+=this.text:b-=this.width});var q=this._gettableheight();if(!this.autoheight&&this.virtualsizeinfo&&this.virtualsizeinfo.virtualheight>q)if(this.groupable&&0<this.groups.length)if(this.dataview&&this.dataview.loadedrootgroups&&!this.groupsexpandedbydefault){var r=this.dataview.loadedrootgroups.length*this.rowsheight;if(this.pageable)for(var t=0;t<this.dataview.rows.length;t++)this.dataview.rows[t].group&&0===this.dataview.rows[t].level&&(r+=this.rowsheight);
r>q?(b-=this.scrollbarsize+5,d-=this.scrollbarsize+5):"visible"==this.vScrollBar.css("visibility")&&(b-=this.scrollbarsize+5,d-=this.scrollbarsize+5)}else b-=this.scrollbarsize+5,d-=this.scrollbarsize+5;else"hidden"!=this.vScrollBar.css("visibility")&&0<this.scrollbarsize&&(b-=this.scrollbarsize+5,d-=this.scrollbarsize+5);l=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;d-=l;if(this.columnsheader&&(q=this.columnsheader.find("#columntable"+
this.element.id),0!=q.length)){var w=0,z=0;c.each(this.columns.records,function(l,v){var q=c(this.element);this.hidden||"none"!==this.element.style.display||(this.element.style.display="block");var r=!1,t=this.width;if(-1!=this.width.toString().indexOf("%")||void 0!=this._percentagewidth)t=void 0!=this._percentagewidth?parseFloat(this._percentagewidth)*d/100:parseFloat(this.width)*d/100,r=!0;"auto"==this.width||this._width||r?r?(t<this.minwidth&&"auto"!=this.minwidth&&(this.width=t=this.minwidth),
t>this.maxwidth&&"auto"!=this.maxwidth&&(this.width=t=this.maxwidth),parseInt(q[0].style.width)!=t&&(q.width(t),this.width=t)):(r=Math.floor(this.text.length/f.length*b),z+=r,3>b-z&&b!=z&&.01<b-z?1===b-z?r++:r+=2:l==h.columns.records.length-1&&z<b&&(r+=b-z),isNaN(r)&&(r=this.minwidth),isNaN(r)&&(r=this.minwidth),Infinity==r&&(r=0),0>r&&($element=c("<span>"+this.text+"</span>"),c(document.body).append($element),r=10+$element.width(),$element.remove()),r<this.minwidth&&(r=this.minwidth),r>this.maxwidth&&
(r=this.maxwidth),this._width="auto",this.width=r,q.width(this.width)):parseInt(q[0].style.width)!=this.width&&q.width(this.width);parseInt(q[0].style.left)!=w&&q.css("left",w);this.hidden&&this.hideable||(w+=this.width);this._requirewidthupdate=!0});this.columnsheader.width(2+w);q.width(this.columnsheader.width());this.columnsheader[0].style.visibility=0==w?"hidden":"inherit";this._resizecolumngroups();this.showfilterrow&&this.filterrow&&(this.filterrow.width(this.columnsheader.width()),this._updatefilterrowui());
this.showeverpresentrow&&("bottom"!==this.everpresentrowposition?this.addnewrowtop.width(this.columnsheader.width()):this.addnewrowbottom.width(this.columnsheader.width()),this._updateaddnewrowui());this.autowidth&&this._arrange()}}},_rendercolumnheaders:function(){var b=this.that;if(this.prerenderrequired){this._columnsbydatafield=[];this.columnsheader.find("#columntable"+this.element.id).remove();var d=c('<div id="columntable'+this.element.id+'" style="height: 100%; position: relative;"></div>');
d[0].cells=[];var f=0,h=0,l="",q=this.host.width(),r=q,t=[],w=[],z=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;c.each(this.columns.records,function(d,c){if(!this.hidden||!this.hideable)if("auto"==this.width||this._width)l+=this.text;else if(this.width<this.minwidth&&"auto"!=this.minwidth)q-=this.minwidth;else if(this.width>this.maxwidth&&"auto"!=this.maxwidth)q-=this.maxwidth;else if(-1!=this.width.toString().indexOf("%")){var g=
"hidden"==b.vScrollBar[0].style.visibility?0:b.scrollbarsize+5,g=g+z;c=parseFloat(this.width)*(r-g)/100;c<this.minwidth&&"auto"!=this.minwidth&&(c=this.minwidth);c>this.maxwidth&&"auto"!=this.maxwidth&&(c=this.maxwidth);q-=c}else"string"==typeof this.width&&(this.width=parseInt(this.width)),q-=this.width;this.pinned||this.grouped||this.checkboxcolumn?(b._haspinned&&(this.pinned=!0),t[t.length]=this):w[w.length]=this});if(this.rtl){var B=0;t.reverse();for(v=this.columns.records.length-1;v>=this.columns.records.length-
t.length;v--)this.columns.replace(v,t[B++]);for(B=0;B<w.length;B++)this.columns.replace(B,w[B])}else{for(var v=0;v<t.length;v++)this.columns.replace(v,t[v]);for(B=0;B<w.length;B++)this.columns.replace(t.length+B,w[B])}var y=this.headerZIndex,C=b.groupable?b.groups.length:0;this.rowdetails&&this.showrowdetailscolumn&&C++;var D=b.columnsheader.height();this.showfilterrow&&(D=this.columngroups?D-this.filterrowheight:this.columnsheight);this.showeverpresentrow&&"bottom"!==this.everpresentrowposition&&
(D-=this.everpresentrowheight);B=this._gettableheight();if(this.virtualsizeinfo&&this.virtualsizeinfo.virtualheight>B&&!this.scrollbarautoshow)if(this.groupable&&0<this.groups.length)if(this.dataview&&this.dataview.loadedrootgroups&&!this.groupsexpandedbydefault){v=0;if(!this.pageable)v=this.dataview.loadedrootgroups.length*this.rowsheight;else if(this.pageable)for(var E=0;E<this.dataview.rows.length;E++)this.dataview.rows[E].group&&0===this.dataview.rows[E].level&&(v+=this.rowsheight);v>B&&(q-=this.scrollbarsize+
5,r-=this.scrollbarsize+5)}else q-=this.scrollbarsize+5,r-=this.scrollbarsize+5;else!this.autoheight&&0<this.scrollbarsize&&(q-=this.scrollbarsize+5,r-=this.scrollbarsize+5);var r=r-z,F=function(d,c){var g=b.columngroupslevel*b.columnsheight;return g-=c.level*b.columnsheight},G=document.createDocumentFragment(),H=0;c.each(this.columns.records,function(v,t){this.height=b.columnsheight;b.columngroups&&b.columngroups.length&&(D=this.height=F(this.datafield,this));var w=b.toTP("jqx-grid-column-header")+
" "+b.toTP("jqx-widget-header");b.rtl&&(w+=" "+b.toTP("jqx-grid-column-header-rtl"));var z=b.rtl?150+y+1:150+y-1,B=b.rtl?y++:y--,E=c('<div role="columnheader" style="z-index: '+B+';position: absolute; height: 100%;" class="'+w+'"><div style="height: 100%; width: 100%;"></div></div>');b.columngroups&&(E[0].style.height=D+"px",E[0].style.bottom="0px",this.pinned&&(E[0].style.zIndex=z));this.uielement=E;""!=this.classname&&this.classname&&E.addClass(this.classname);w=this.width;z=!1;null===this.width&&
(this.width="auto");if(-1!=this.width.toString().indexOf("%")||void 0!=this._percentagewidth)w=void 0!=this._percentagewidth?parseFloat(this._percentagewidth)*r/100:parseFloat(this.width)*r/100,z=!0;if("auto"==this.width||this._width||z)if(z){w<this.minwidth&&"auto"!=this.minwidth&&(w=this.minwidth);w>this.maxwidth&&"auto"!=this.maxwidth&&(w=this.maxwidth);if(void 0==this._percentagewidth||-1!=this.width.toString().indexOf("%"))this._percentagewidth=this.width;E.width(w);this.width=w}else this.hidden||
(w=Math.floor(this.text.length/l.length*q),H+=w,3>q-H&&q!=H&&.01<q-H?1===q-H?w++:w+=2:v==b.columns.records.length-1&&H<q&&(w+=q-H),isNaN(w)&&(w=this.minwidth),0>w&&($element=c("<span>"+this.text+"</span>"),c(document.body).append($element),w=10+$element.width(),$element.remove()),w<this.minwidth&&(w=this.minwidth),w>this.maxwidth&&(w=this.maxwidth),this._width="auto",w=this.width=w,E.width(this.width));else w<this.minwidth&&"auto"!=this.minwidth&&(this.width=w=this.minwidth),w>this.maxwidth&&"auto"!=
this.maxwidth&&(this.width=w=this.maxwidth),E[0].style.width=parseInt(w)+"px";this.hidden&&this.hideable&&E.css("display","none");var N=c(E.children()[0]),z=b.rtl?b.toTP("jqx-grid-column-menubutton")+" "+b.toTP("jqx-grid-column-menubutton-rtl"):b.toTP("jqx-grid-column-menubutton"),z=z+(" "+b.toTP("jqx-icon-arrow-down")),z=c('<div style="height: '+D+'px; display: none; left: 100%; top: 0%; position: absolute;"><div class="'+z+'" style="width: 100%; height:100%;"></div></div>');b.enableanimations||
z.css("margin-left",-16);b.rtl&&z.css("left","0px");this.columnsmenu=z[0];d[0].cells[v]=E[0];z[0].style.width=parseInt(b.columnsmenuwidth)+"px";var B=b.columnsmenu,U=!1,T=!1,Q=b.groupable&&0<C&&f<C||b.rowdetails&&f<C;b.rtl&&(Q=b.groupable&&0<C&&f<C||b.rowdetails&&f<C,Q&=v>b.columns.records.length-1-C);if(Q)f++,B&=0,this.editable=this.sortable=!1,T=!0;else{var I=null!=this.renderer?this.renderer(this.text,this.align,D):b._rendercolumnheader(this.text,this.align,D,b);null==I&&(I=b._rendercolumnheader(this.text,
this.align,D,b));null!=this.renderer&&(I=c(I));B&=1;U=!0}b.WinJS?MSApp.execUnsafeLocalFunction(function(){N.append(c(I))}):this.renderer?N.append(c(I)):I&&(N[0].innerHTML=I);if(null!=I){var K=c('<div class="iconscontainer" style="height: '+D+'px; margin-left: -32px; display: block; position: absolute; left: 100%; top: 0%; width: 32px;"><div class="filtericon '+b.toTP("jqx-widget-header")+'" style="height: '+D+'px; float: right; display: none; width: 16px;"><div class="'+b.toTP("jqx-grid-column-filterbutton")+
'" style="width: 100%; height:100%;"></div></div><div class="sortasc '+b.toTP("jqx-widget-header")+'" style="height: '+D+'px; float: right; display: none; width: 16px;"><div class="'+b.toTP("jqx-grid-column-sortascbutton")+" "+b.toTP("jqx-icon-arrow-up")+'" style="width: 100%; height:100%;"></div></div><div class="sortdesc '+b.toTP("jqx-widget-header")+'" style="height: '+D+'px; float: right; display: none; width: 16px;"><div class="'+b.toTP("jqx-grid-column-sortdescbutton")+" "+b.toTP("jqx-icon-arrow-down")+
'" style="width: 100%; height:100%;"></div></div></div>');z.addClass(b.toTP("jqx-widget-header"));N.append(K);Q=K.children();this.sortasc=Q[1];this.sortdesc=Q[2];this.filtericon=Q[0];this.iconscontainer=K;b.rtl&&(K.css("margin-left","0px"),K.css("left","0px"),c(this.sortasc).css("float","left"),c(this.filtericon).css("float","left"),c(this.sortdesc).css("float","left"));!b.autoshowfiltericon&&this.filterable&&c(this.filtericon).css("display","block")}this.element=E[0];B&&(b._handlecolumnsmenu(b,N,
E,z,this),this.menu||z.hide());G.appendChild(E[0]);if(b.groupable&&U)if(E[0].id=b.dataview.generatekey(),b._handlecolumnstogroupsdragdrop)b._handlecolumnstogroupsdragdrop(this,E);else throw Error("jqxGrid: Missing reference to jqxgrid.grouping.js.");b.columnsreorder&&this.draggable&&b._handlecolumnsdragreorder&&b._handlecolumnsdragreorder(this,E);var S=this;b.addHandler(E,"click",function(d){if(S.checkboxcolumn)return!0;if(0<b.sorttogglestates&&b._togglesort&&!b._loading){if(b.suspendClick)return!0;
b._togglesort(S)}d.preventDefault();b._raiseEvent(7,{column:S.getcolumnproperties(),datafield:S.datafield,originalEvent:d})});if(S.resizable&&b.columnsresize&&!T){var L=!1,z="mousemove";b.isTouchDevice()&&!0!==b.touchmode&&(L=!0,z=c.jqx.mobile.getTouchEventName("touchstart"));b.addHandler(E,z,function(d){var g=parseInt(d.pageX),f=parseInt(E.coord().left);b.hasTransform&&(f=c.jqx.utilities.getOffset(E).left);if(b.resizing)return!0;if(b._handlecolumnsresize){if(L)return g=b.getTouches(d)[0].pageX,g>=
f+S.width-40?(b.resizablecolumn={columnelement:E,column:S},E.css("cursor","col-resize")):(E.css("cursor",""),b.resizablecolumn=null),!0;d=S.width;b.rtl&&(d=0);if(g>=f+d-5){if(g<=f+d+5)return b.resizablecolumn={columnelement:E,column:S},E.css("cursor","col-resize"),!1;E.css("cursor","")}else E.css("cursor",""),g<f+d-5&&(S._animating||S._menuvisible||E.mouseenter());b.resizablecolumn=null}})}E.css("left",h);this.hidden&&this.hideable||(h+=w);S.rendered&&S.rendered(c(N[0].firstChild),S.align,D)&&null!=
K&&K.hide();if(S.checkboxcolumn){K&&K.hide();if(!b.host.jqxCheckBox)throw Error("jqxGrid: Missing reference to jqxcheckbox.js");N.html('<div style="cursor: pointer; margin-left: 5px; top: 50%; margin-top: -8px; position: relative;"></div>');var V=N.find("div:first");V.jqxCheckBox({_canFocus:!1,disabled:b.disabled,disabledContainer:!0,theme:b.theme,enableContainerClick:!1,width:16,height:16,animationShowDelay:0,animationHideDelay:0});S.checkboxelement=V;K=V.data().jqxCheckBox.instance;b._checkboxcolumn=
S;K.updated=function(d,c,g){b._checkboxcolumnupdating=!0;b.disabled&&(V.jqxCheckBox({disabled:b.disabled}),c=g);c?b.selectallrows():b.unselectallrows();b._checkboxcolumnupdating=!1}}});0<h?this.columnsheader.width(2+h):this.columnsheader.width(h);d[0].appendChild(G);this.columnsrow=d;b.columnsheader.append(d);this.showfilterrow&&this._updatefilterrow&&(this.columngroups?d.height(this.columngroupslevel*this.columnsheight):d.height(this.columnsheight),this.filterrow||(B=c("<div style='position: relative !important; '></div>"),
B[0].id="filterrow."+this.element.id,B.height(this.filterrowheight),this.filterrow=B),this.filterrow.width(2+h),this.columnsheader.append(this.filterrow),this._updatefilterrow());this.showeverpresentrow&&"bottom"!==this.everpresentrowposition?(this.columngroups?d.height(this.columngroupslevel*this.columnsheight):d.height(this.columnsheight),this.addnewrowtop||(B=c("<div style='position: relative !important; z-index:"+this.headerZIndex+";'></div>"),B[0].id="addnewrowtop."+this.element.id,B.height(this.everpresentrowheight),
this.addnewrowtop=B),this.addnewrowtop.width(2+h),"topAboveFilterRow"==this.everpresentrowposition?this.filterrow?this.addnewrowtop.insertBefore(this.filterrow):this.columnsheader.append(this.addnewrowtop):this.columnsheader.append(this.addnewrowtop),this._updateaddnewrow()):this.showeverpresentrow&&"bottom"===this.everpresentrowposition&&(this.addnewrowbottom||(B=c("<div style='position: relative !important; z-index:"+this.headerZIndex+";'></div>"),B[0].id="addnewrowbottom."+this.element.id,B.height(this.everpresentrowheight),
this.addnewrowbottom=B),this.addnewrowbottom.width(2+h),this.addnewrow.append(this.addnewrowbottom),this._updateaddnewrow());d[0].style.visibility=0==h?"hidden":"inherit";d.width(h);this._handlecolumnsdragdrop&&this._handlecolumnsdragdrop();this._handlecolumnsreorder&&this._handlecolumnsreorder();this._rendersortcolumn&&this._rendersortcolumn();this._renderfiltercolumn&&this._renderfiltercolumn();this._handlecolumnsresize&&this._handlecolumnsresize();this.columngroups&&this._rendercolumngroups();
this._updatecheckboxselection&&this._updatecheckboxselection()}else this._rendersortcolumn&&this._rendersortcolumn(),this._renderfiltercolumn&&this._renderfiltercolumn(),this.showfilterrow&&this.filterrow&&(this.filterrow.width(this.columnsheader.width()),this._updatefilterrowui()),this.showeverpresentrow&&("bottom"!==this.everpresentrowposition?this.addnewrowtop.width(this.columnsheader.width()):this.addnewrowbottom.width(this.columnsheader.width()),this._updateaddnewrowui())},_rendercolumngroups:function(){if(this.columngroups){for(var b=
0,d=0;d<this.columns.records.length;d++)this.columns.records[d].pinned&&b++;var b=this.headerZIndex-b+this.columns.records.length,d=this.that,f=d.toTP("jqx-grid-column-header")+" "+d.toTP("jqx-grid-columngroup-header")+" "+d.toTP("jqx-widget-header");d.rtl&&(f+=" "+d.toTP("jqx-grid-columngroup-header-rtl"));var h=this.columnsheader.find("#columntable"+this.element.id);h.find("jqx-grid-columngroup-header").remove();for(var l=0;l<this.columngroupslevel-1;l++)for(d=0;d<this.columngroups.length;d++){var q=
this.columngroups[d],r=q.level;if(r===l){var r=r*this.columnsheight,t=99999;if(q.groups){var w=function(b){for(var e=0,d=0;d<b.groups.length;d++){var c=b.groups[d];c.groups?e+=w(c):c.hidden||(e+=c.width,t=Math.min(parseFloat(c.element.style.left),t))}return e};q.width=w(q);q.left=t;var z=this.columnsheight,B=b--,B=c('<div role="columnheader" style="z-index: '+B+';position: absolute;" class="'+f+'"></div>'),v=c(this._rendercolumnheader(q.text,q.align,this.columnsheight,this));if(q.renderer){var v=
c("<div style='height: 100%; width: 100%;'></div>"),y=q.renderer(q.text,q.align,z);v.html(y)}B.append(v);B[0].style.left=t+"px";0===t&&(B[0].style.borderLeftColor="transparent");B[0].style.top=r+"px";B[0].style.height=z+"px";B[0].style.width=-1+q.width+"px";h.append(B);q.element=B;q.rendered&&q.rendered(v,q.align,z)}}}}},_resizecolumngroups:function(){if(this.columngroups)for(var b=0;b<this.columngroups.length;b++){var d=this.columngroups[b],c=d.level*this.columnsheight,h=99999;if(d.groups){var l=
function(b){for(var e=0,d=0;d<b.groups.length;d++){var c=b.groups[d];c.groups?e+=l(c):c.hidden||(e+=c.width,h=Math.min(parseFloat(c.element.style.left),h))}return e};d.width=l(d);d.left=h;var q=this.columnsheight,r=d.element;r[0].style.left=h+"px";r[0].style.top=c+"px";r[0].style.height=q+"px";r[0].style.width=-1+d.width+"px"}}},_handlecolumnsmenu:function(b,d,f,h,l){b.dragmousedown=null;h[0].id=b.dataview.generatekey();d.append(h);f[0].columnsmenu=h[0];l.element=f[0];var q=this.columnsmenuwidth+
1,r=function(){if(!l.menu)return!1;if(!b.resizing){if(l._menuvisible&&b._hasOpenedMenu)return!1;l._animating=!0;if(b.menuitemsarray&&0<b.menuitemsarray.length)if(b.enableanimations)h.css("display","block"),h.stop(),l.iconscontainer.stop(),b.rtl?(h.css("margin-left",-q),h.animate({"margin-left":"0px"},"fast",function(){h.css("display","block");l._animating=!1;l._menuvisible=!0})):(h.css("margin-left","0px"),h.animate({"margin-left":-q},"fast",function(){h.css("display","block");l._animating=!1;l._menuvisible=
!0})),d=b.rtl?q:-(32+q),l.iconscontainer.animate({"margin-left":d},"fast");else{h.css("display","block");var d=b.rtl?16:-48;l.iconscontainer.css("margin-left",d+"px");l._animating=!1;l._menuvisible=!0}}};d="mouseenter";b.isTouchDevice()&&(d="touchstart");b.addHandler(f,d,function(d){d=parseInt(d.pageX);var g=b.columnsresize&&l.resizable?3:0,h=parseInt(f.coord().left);b.hasTransform&&(h=c.jqx.utilities.getOffset(f).left);var q=l.width;b.rtl&&(q=0);if(0!=g&&d>=h+q-g&&d<=h+q+g)return!1;d=b.vScrollInstance.isScrolling();
l.menu&&b.autoshowcolumnsmenubutton&&!d&&!b.disabled&&r()});b.autoshowcolumnsmenubutton||(h.css("display","block"),l.iconscontainer.css("margin-left",(b.rtl?16:-48)+"px"),b.rtl?h.css({"margin-left":"0px"}):h.css({"margin-left":-q}));b.addHandler(f,"mouseleave",function(d){b.menuitemsarray&&0<b.menuitemsarray.length&&l.menu&&(d=c.data(document.body,"contextmenu"+b.element.id),void 0!=d&&h[0].id==d.columnsmenu.id||!b.autoshowcolumnsmenubutton||(b.enableanimations?(b.rtl?h.css("margin-left","0px"):h.css("margin-left",
-q),h.stop(),l.iconscontainer.stop(),b.rtl?h.animate({"margin-left":-q},"fast",function(){h.css("display","none");l._menuvisible=!1}):h.animate({"margin-left":0},"fast",function(){h.css("display","none");l._menuvisible=!1}),d=b.rtl?0:-32,l.iconscontainer.animate({"margin-left":d},"fast")):(h.css("display","none"),d=b.rtl?0:-32,l.iconscontainer.css("margin-left",d+"px"),l._menuvisible=!1)))});var t=!0,w="";d=c(l.filtericon);b.addHandler(h,"mousedown",function(d){b.gridmenu||b._initmenu();t=!c.data(b.gridmenu[0],
"contextMenuOpened"+b.gridmenu[0].id);w=c.data(document.body,"contextmenu"+b.element.id);null!=w&&(w=w.column.datafield)});b.addHandler(d,"mousedown",function(d){b.gridmenu||b._initmenu();t=!c.data(b.gridmenu[0],"contextMenuOpened"+b.gridmenu[0].id);w=c.data(document.body,"contextmenu"+b.element.id);null!=w&&(w=w.column.datafield)});var z=function(){if(!l.menu)return!1;b.gridmenu||b._initmenu();if(b.disabled)return!1;for(var d=0;d<b.columns.records.length;d++)b.columns.records[d].datafield!=l.datafield&&
(b.columns.records[d]._menuvisible=!1);var d=h.coord(!0),g=h.height();if(!t&&(t=!0,w==l.datafield))return b._closemenu(),!1;var f=b.host.coord(!0);b.hasTransform&&(f=c.jqx.utilities.getOffset(b.host),d=c.jqx.utilities.getOffset(h));f.left+b.host.width()>parseInt(d.left)+b.gridmenu.width()?b.gridmenu.jqxMenu("open",d.left,d.top+g):b.gridmenu.jqxMenu("open",h.width()+d.left-b.gridmenu.width(),d.top+g);100>b.gridmenu.width()&&b._arrangemenu();(!b.filterable||b.filterable&&b.showfilterrow)&&setTimeout(function(){b.gridmenu.focus();
for(var d=b.gridmenu.find(".jqx-item"),g=0;g<d.length;g++)d[g].active&&(d[g].active=!1);g=d[0];0<=d[0].className.indexOf("disabled")&&(g=d[1]);c(d).removeClass("jqx-fill-state-focus");c(g).addClass("jqx-fill-state-focus");g.active=!0},225);b._hasOpenedMenu=!0;var g=b._getmenuitembyindex(0),f=b._getmenuitembyindex(1),q=b._getmenuitembyindex(2),r=b._getmenuitembyindex(3),z=b._getmenuitembyindex(4),d=b._getmenuitembyindex(5);if(null!=g&&null!=f&&null!=q){var F=l.sortable&&b.sortable;b.gridmenu.jqxMenu("disable",
g.id,!F);b.gridmenu.jqxMenu("disable",f.id,!F);b.gridmenu.jqxMenu("disable",q.id,!F);void 0!=l.displayfield&&(b.sortcolumn==l.displayfield?(q=b.getsortinformation(),F&&(q.sortdirection.ascending?b.gridmenu.jqxMenu("disable",g.id,!0):b.gridmenu.jqxMenu("disable",f.id,!0))):b.gridmenu.jqxMenu("disable",q.id,!0))}null!=r&&null!=z&&(b.groupable&&l.groupable?b.groups&&-1!=b.groups.indexOf(l.datafield)?(b.gridmenu.jqxMenu("disable",r.id,!0),b.gridmenu.jqxMenu("disable",z.id,!1)):(b.gridmenu.jqxMenu("disable",
r.id,!1),b.gridmenu.jqxMenu("disable",z.id,!0)):(b.gridmenu.jqxMenu("disable",z.id,!0),b.gridmenu.jqxMenu("disable",r.id,!0)));null!=d&&(b.menuOwner=l,b._updatefilterpanel(b,d,l),g=0,b.sortable&&b._togglesort&&b.showsortmenuitems&&(g+=3),b.groupable&&b.addgroup&&b.showgroupmenuitems&&(g+=2),f=33*g+6,f=b._measureMenuElement(),f=g*f+14,c.jqx.browser.msie&&8>c.jqx.browser.version&&(f+=20,c(d).height(190)),b.isTouchDevice()&&(f+=10),b.filterable&&b.showfiltermenuitems&&(l.filterable?(b.gridmenu.height(f+
190),c(d).css("display","block")):(b.gridmenu.height(f),c(d).css("display","none"))));b.columnmenuopening&&!1===b.columnmenuopening(b.gridmenu,l.displayfield,b.gridmenu.height())&&b._closemenu();c.data(document.body,"contextmenu"+b.element.id,{column:l,columnsmenu:h[0]})};b.addHandler(d,"click",function(d){if(!l.menu)return!1;b.showfilterrow||("block"!=h[0].style.display&&f.trigger("mouseenter"),setTimeout(function(){"block"!=h[0].style.display&&f.trigger("mouseenter");z()},200));return!1});b.addHandler(h,
"click",function(b){if(!l.menu)return!1;z();return!1});b.isTouchDevice()&&b.addHandler(h,c.jqx.mobile.getTouchEventName("touchstart"),function(d){if(!l.menu)return!1;b._hasOpenedMenu?b._closemenu():z();return!1})},_removecolumnhandlers:function(b){var d=this.that,f=c(b.element);0<f.length&&(d.removeHandler(f,"mouseenter"),d.removeHandler(f,"mouseleave"),b=c(b.filtericon),d.removeHandler(b,"mousedown"),d.removeHandler(b,"click"),d.removeHandler(f,"click"),d.removeHandler(f,"mousemove"),d.columnsreorder&&
(d.removeHandler(f,"mousedown.drag"),d.removeHandler(f,"mousemove.drag")),d.removeHandler(f,"dragstart"),f[0].columnsmenu&&(f=c(f[0].columnsmenu),d.removeHandler(f,"click"),d.removeHandler(f,"mousedown"),d.removeHandler(f,c.jqx.mobile.getTouchEventName("touchstart"))))},_rendercolumnheader:function(b,d,c,h){var l="7px";h.columngroups?(l=c/2-this._columnheight/2,0>l&&(l=6),l+="px"):30!=this.columnsheight&&(l=this.columnsheight/2-this._columnheight/2,0>l&&(l=6),l+="px");return this.enableellipsis?"left"==
d?'<div style="padding-bottom: 2px; overflow: hidden; text-overflow: ellipsis; text-align: '+d+"; margin-left: 4px; margin-right: 2px; margin-bottom: "+l+"; margin-top: "+l+';"><span style="text-overflow: ellipsis; cursor: default;">'+b+"</span></div>":'<div style="padding-bottom: 2px; overflow: hidden; text-overflow: ellipsis; text-align: '+d+"; margin-left: 2px; margin-right: 4px; margin-bottom: "+l+"; margin-top: "+l+';"><span style="text-overflow: ellipsis; cursor: default;">'+b+"</span></div>":
"center"==d||"middle"==d?'<div style="padding-bottom: 2px; text-align: center; margin-top: '+l+';"><a href="#">'+b+"</a></div>":'<a style="margin-top: '+l+"; float: "+d+';" href="#">'+b+"</a>"},_renderrows:function(b,d,f){var h=this.that;(this.pageable||this.groupable)&&(this.autoheight||this.autorowheight)&&null!=this.table&&null!=this.table[0].rows&&this.table[0].rows.length<this.dataview.rows.length&&(h.prerenderrequired=!0);this.pageable||!this.autoheight&&!this.autorowheight||!this.virtualmode&&
!this.unboundmode||(f=this.source.totalrecords,isNaN(f)||null==this.table||null==this.table[0].rows||this.table[0].rows.length==f||(h.prerenderrequired=!0));(this.autoheight||this.autorowheight)&&!h.prerenderrequired&&this.table&&this.table[0].rows&&(this.table[0].rows.length<this.dataview.records.length&&(this.pageable&&this.table[0].rows.length<this.dataview.pagesize?h.prerenderrequired=!0:this.pageable||(h.prerenderrequired=!0)),this.table[0].rows.length<this.dataview.cachedrecords.length&&(this.pageable&&
this.table[0].rows.length<this.dataview.pagesize?h.prerenderrequired=!0:this.pageable||(h.prerenderrequired=!0)));h._prerenderrows(b);h._requiresupdate&&(h._requiresupdate=!1,h._updatepageviews());var l=function(){h._loading||(h.WinJS?MSApp.execUnsafeLocalFunction(function(){h._rendervisualrows()}):h._rendervisualrows(),h.virtualmode&&h.showaggregates&&h._updateaggregates&&h.refreshaggregates())};b=c.jqx.browser.msie&&10>c.jqx.browser.version;if(this.virtualmode)f=function(){if(h.rendergridrows){var b=
h._startboundindex;void 0==b&&(b=0);var e=b+1+h.dataview.pagesize;if(null!=b&&null!=e){var c=h.source._source?!0:!1;if((c?h.source._source.recordstartindex:h.source.recordstartindex)!=b||1==d){if(c){if(e>=h.source._source.totalrecords&&(e=h.source._source.totalrecords,b=e-h.dataview.pagesize-1,0>b&&(b=0),h.source._source.recordendindex==e&&h.source._source.recordstartindex==b))return;h.source._source.recordstartindex=b;h.source._source.recordendindex=e}else h.source.recordstartindex=b,h.source.recordendindex=
e;h.updatebounddata("cells")}}}},this.loadondemand&&(l(),f(),this.loadondemand=!1),f=void 0==this._browser?this._isIE10():this._browser,this.editable&&this.editcell&&!this.vScrollInstance.isScrolling()&&!this.hScrollInstance.isScrolling()?l():this.autoheight?l():f||b||navigator&&-1!=navigator.userAgent.indexOf("Safari")?(null!=this._scrolltimer&&clearTimeout(this._scrolltimer),this._scrolltimer=setTimeout(function(){l()},5)):l();else{if("deferred"==this.scrollmode&&(this.hScrollInstance.isScrolling()||
this.vScrollInstance.isScrolling())){null!=this._scrolltimer&&clearInterval(this._scrolltimer);var q=this._getfirstvisualrow();null!=q&&(b=function(b){if(null==q)return"";b="<table>";var d=h.deferreddatafields;null==d&&0<h.columns.records.length&&(d=[],d.push(h.columns.records[0].displayfield));for(var e=0;e<d.length;e++){var g=h._getcolumnbydatafield(d[e]);if(g){var f=h._getcellvalue(g,q);""!=g.cellsformat&&c.jqx.dataFormat&&(c.jqx.dataFormat.isDate(f)?f=c.jqx.dataFormat.formatdate(f,g.cellsformat,
h.gridlocalization):c.jqx.dataFormat.isNumber(f)&&(f=c.jqx.dataFormat.formatnumber(f,g.cellsformat,h.gridlocalization)));b+="<tr><td>"+f+"</td></tr>"}}return b+"</table>"},b=this.scrollfeedback?this.scrollfeedback(q.bounddata):b(q.bounddata),b!=this._scrollelementcontent&&(this._scrollelementcontent=this._scrollelement[0].innerHTML=b));this._scrollelement.css("visibility","visible");this._scrollelementoverlay.css("visibility","visible");this._scrollelement.css("margin-top",-this._scrollelement.height()/
2);this._scrolltimer=setInterval(function(){h.hScrollInstance.isScrolling()||h.vScrollInstance.isScrolling()||(l(),h._scrollelement.css("visibility","hidden"),h._scrollelementoverlay.css("visibility","hidden"),clearInterval(h._scrolltimer),q&&h.ensurerowvisible(q.visibleindex))},100);return}navigator&&-1==navigator.userAgent.indexOf("Chrome")&&-1!=navigator.userAgent.indexOf("Safari")&&(this._updatedelay=1);void 0!=this.touchDevice&&1==this.touchDevice&&(this._updatedelay=5);if((f=void 0==this._browser?
this._isIE10():this._browser)||b)this._updatedelay=5;if(f&&this.hScrollInstance.isScrolling()){l();return}c.jqx.browser.mozilla&&0==this._updatedelay&&(this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling())&&(this._updatedelay=0);this.isTouchDevice()&&(this._updatedelay=0);null!=this.updatedelay&&(this._updatedelay=this.updatedelay);0==this._updatedelay?l():(b=this._jqxgridrendertimer,null!=b&&clearTimeout(b),this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling()?
(this._updatedelay?b=setTimeout(function(){l()},this._updatedelay):(b=null,l()),this._jqxgridrendertimer=b):(this._jqxgridrendertimer=b,l()))}if(h.autorowheight&&!h.autoheight&&0<this._pageviews.length){f=this._gettableheight();b=this._pageviews[0].height;if(b>f)if(this.pageable&&this.gotopage&&(b=this._pageviews[0].height,0>b&&(b=this._pageviews[0].height)),"visible"!=this.vScrollBar.css("visibility")&&this.vScrollBar.css("visibility","visible"),(b<=f||this.autoheight)&&this.vScrollBar.css("visibility",
"hidden"),0<b-f){if("deferred"!=this.scrollmode){f=b-f;var r=this.vScrollInstance.max;this.vScrollBar.jqxScrollBar({max:f});Math.round(f)!=Math.round(r)&&this.vScrollBar.jqxScrollBar("value")>f&&this.vScrollBar.jqxScrollBar({value:0})}}else this.vScrollBar.jqxScrollBar({value:0,max:b});else this._loading||this.vScrollBar.css("visibility","hidden"),this.vScrollBar.jqxScrollBar({value:0});this._arrange();this.virtualsizeinfo&&(this.virtualsizeinfo.virtualheight=b)}},scrolling:function(){var b=this.vScrollInstance.isScrolling(),
d=this.hScrollInstance.isScrolling();return{vertical:b,horizontal:d}},_renderhorizontalscroll:function(){var b=this.hScrollInstance,d=b.value;"hidden"===this.hScrollBar.css("visibility")&&(d=b.value=0);var c=parseInt(d);if(null!=this.table){var h=this.table[0].rows.length,l=this.columnsrow,q=this.groupable&&0<this.groups.length?this.groups.length:0,r=this.columns.records.length-q,t=this.columns.records,w=0==this.dataview.rows.length;this.rtl&&"hidden"!=this.hScrollBar.css("visibility")&&(c=b.max-
c);if(w&&!this._haspinned){for(b=0;b<h;b++)for(var w=this.table[0].rows[b],z=0;z<q+r;z++){var B=w.cells[z];if(void 0!=B){var v=t[z];v.pinned&&(B.style.marginLeft=c+"px",0==b&&(B=l[0].cells[z],B.style.marginLeft=c+"px"))}}this.table[0].style.marginLeft=-c+"px";l[0].style.marginLeft=-c+"px"}else if(this._haspinned||void 0==this._haspinned){for(b=0;b<h;b++)for(w=this.table[0].rows[b],z=0;z<q+r;z++)if(B=w.cells[z],void 0!=B&&(v=t[z],v.pinned&&(0!=c||""!=B.style.marginLeft))){var y=v=null,C=null;this.showeverpresentrow&&
this.addnewrowtop&&this.addnewrowtop[0].cells&&(C=this.addnewrowtop[0].cells[z]);this.showfilterrow&&this.filterrow&&this.filterrow[0].cells&&(y=this.filterrow[0].cells[z]);this.showaggregates&&this.statusbar[0].cells&&(v=this.statusbar[0].cells[z]);this.rtl?(B.style.marginLeft=-parseInt(d)+"px",0==b&&(B=l[0].cells[z],B.style.marginLeft=-parseInt(d)+"px",v&&(v.style.marginLeft=-parseInt(d)+"px"),y&&(y.style.marginLeft=-parseInt(d)+"px"),C&&(C.style.marginLeft=-parseInt(d)+"px"))):(B.style.marginLeft=
c+"px",0==b&&(B=l[0].cells[z],B.style.marginLeft=c+"px",v&&(v.style.marginLeft=c+"px"),y&&(y.style.marginLeft=c+"px"),C&&(C.style.marginLeft=c+"px")))}this.table[0].style.marginLeft=-c+"px";l[0].style.marginLeft=-c+"px"}else 0==this._haspinned&&(this.table[0].style.marginLeft=-c+"px",l[0].style.marginLeft=-c+"px");this.showaggregates&&this.statusbar[0].cells&&(d=0,this.rtl&&"hidden"!=this.vScrollBar.css("visibility")&&"hidden"!=this.hScrollBar.css("visibility")&&(d=2+parseInt(this.hScrollBar.css("left"))),
this.statusbar[0].style.marginLeft=-c+d+"px");this.showfilterrow&&this.filterrow&&this.filterrow[0].cells&&(this.filterrow[0].style.marginLeft=-c+"px");this.showeverpresentrow&&this.addnewrowtop&&this.addnewrowtop[0].cells&&(this.addnewrowtop[0].style.marginLeft=-c+"px")}},_updaterowdetailsvisibility:function(){if(this.rowdetails)for(var b=0;b<this._rowdetailselementscache.length;b++)c(this._rowdetailselementscache[b]).css("display","none")},_getvisualcolumnsindexes:function(b,d,c,h,l,q){if(this.rowdetails||
this.rtl||this.editcell||this.width&&0<=this.width.toString().indexOf("%")||this.exporting)return{start:0,end:c+h};var r=0,t=-1,w=c+h,z=!1;if(this.autorowheight)return{start:0,end:c+h};if(!l)for(l=0;l<c+h;l++)if(z||this.columns.records[l].pinned&&q&&(z=!0),this.columns.records[l].hidden||(r+=this.columns.records[l].width),r>=b&&-1==t&&(t=l),r>d+b){w=l;break}w++;w>c+h&&(w=c+h);if(-1==t||z)t=0;return{start:t,end:w}},_getvirtualcolumnsindexes:function(b,d,c,h,l){if(this.rtl||this.editcell||this.exporting)return{start:0,
end:c+h};var q=0,r=-1,t=c+h;if(this.autorowheight)return{start:0,end:c+h};if(!l)for(l=0;l<c+h;l++)if(this.columns.records[l].hidden||(q+=this.columns.records[l].width),q>=b&&-1==r&&(r=l),q>d+b){t=l;break}t++;t>c+h&&(t=c+h);-1==r&&(r=0);return{start:r,end:t}},_getfirstvisualrow:function(){var b=parseInt(this.vScrollInstance.value);0==this._pagescache.length&&(this.dataview.updateview(),this._loadrows());"visible"!=this.vScrollBar[0].style.visibility&&(b=0);if(!this.pageable){var d=this._findvisiblerow(b,
this._pageviews);if(-1==d)return null;d!=this.dataview.pagenum?(this.dataview.pagenum=d,this.dataview.updateview(),this._loadrows()):this._pagescache[this.dataview.pagenum]||this._loadrows()}b=this._findvisiblerow(b,this._pagescache[this.dataview.pagenum]);if((d=this._pagescache[this.dataview.pagenum])&&d[0])return d[b]},_rendervisualrows:function(){if(this.virtualsizeinfo){var b=this.vScrollInstance,d=this.hScrollInstance,f=d.value,h=parseInt(b.value),l=parseInt(f),q=this._gettableheight(),r=void 0!=
this._hostwidth?this._hostwidth:this.host.width();"visible"==this.hScrollBar[0].style.visibility&&(q+=29);"deferred"==this.scrollmode&&0!=this._newmax&&h>this._newmax&&null!=this._newmax&&(h=this._newmax);var t=b.isScrolling()||d.isScrolling()||this._keydown,w=this.groupable&&0<this.groups.length;this.visiblerows=[];this.hittestinfo=[];this.editcell&&void 0==this.editrow&&this._hidecelleditor(!1);void 0!=this.editrow&&this._hideeditors();this.virtualmode&&!this.pageable&&(this._pagescache=[]);0==
this._pagescache.length&&(this.dataview.updateview(),this._loadrows());"hidden"==this.vScrollBar[0].style.visibility&&(h=0);if(!this.pageable){d=this._findvisiblerow(h,this._pageviews);if(-1==d){this._clearvisualrows();this._renderemptyrow();this._updaterowdetailsvisibility();return}d!=this.dataview.pagenum?(this.dataview.pagenum=d,this.dataview.updateview(),this._loadrows()):this._pagescache[this.dataview.pagenum]||this._loadrows()}var z=this.groupable&&0<this.groups.length?this.groups.length:0;
if(this.columns.records){var B=this.columns.records.length-z,d=this._findvisiblerow(h,this._pagescache[this.dataview.pagenum]),v=this._pagescache[this.dataview.pagenum],y=d;0>y&&(y=0);var C=0,D=0,E=0,F=0,G=this.virtualsizeinfo.visiblerecords,H=this.groupable?this.groups.length:0,M=this.toTP("jqx-grid-cell")+" "+this.toTP("jqx-item");this.rtl&&(M+=" "+this.toTP("jqx-grid-cell-rtl"));(this.autoheight||this.autorowheight)&&this.pageable&&(!this.groupable||this.groupable&&0===this.groups.length)&&(G=
this.dataview.pagesize);w&&(M=" "+this.toTP("jqx-grid-group-cell"));this.isTouchDevice()&&(M+=" "+this.toTP("jqx-touch"));this.autorowheight&&(M+=" jqx-grid-cell-wrap");var P=this.rowsheight,J=this._rendercell,f=this._getvisualcolumnsindexes(l,r,z,B,w,!0),d=f.start,f=f.end,O=this._getvirtualcolumnsindexes(l,r,z,B,w),W=O.start,X=O.end;(this.autoheight||this.pageable)&&this.autorowheight&&this._pageviews[0]&&(this._oldpageviewheight=this._pageviews[0].height);this.autorowheight&&(y=0);if(0<=y){this._updaterowdetailsvisibility();
this._startboundindex=null!=v?v[y].bounddata.boundindex:0;this._startvisibleindex=null!=v?v[y].bounddata.visibleindex:0;var N=this.table[0].rows;if(10<this.columns.records.length&&this.enablecolumnsvirtualization)for(var U=function(b){return b.parentNode&&"#document-fragment"!=b.parentNode.nodeName?!0:!1},T=0;T<N.length;T++){for(var O=N[T],Q=0;Q<W;Q++){var I=Q;if(!this.columns.records[I].pinned&&null!=this.columns.records[I].datafield){var K=O.cells[I];U(K)&&K.parentNode.removeChild(K);K=this.columns.records[I].element;
this.columns.records[I]._rendered=!1;U(K)&&this.columnsrow[0].removeChild(K);this.filterrow&&U(this.filterrow[0].cells[I])&&this.columns.records[I].filterable&&this.filterrow[0].cells[I].parentNode.removeChild(this.filterrow[0].cells[I])}}for(Q=X;Q<this.columns.records.length;Q++)I=Q,this.columns.records[I].pinned||null==this.columns.records[I].datafield||(K=O.cells[I],U(K)&&K.parentNode.removeChild(K),K=this.columns.records[I].element,this.columns.records[I]._rendered=!1,U(K)&&this.columnsrow[0].removeChild(K),
this.filterrow&&U(this.filterrow[0].cells[I])&&this.columns.records[I].filterable&&this.filterrow[0].cells[I].parentNode.removeChild(this.filterrow[0].cells[I]));for(Q=W;Q<X;Q++)I=Q,K=O.cells[I],U(K)||O.appendChild(K),K=this.columns.records[I].element,this.columns.records[I]._rendered=!0,U(K)||this.columnsrow[0].appendChild(K),this.filterrow&&!U(this.filterrow[0].cells[I])&&this.columns.records[I].filterable&&this.filterrow[0].firstChild.appendChild(this.filterrow[0].cells[I])}for(T=0;T<G&&D<G;T++){N=
void 0!=v?v[y+T]:null;this.virtualmode&&T>=this.source.totalrecords&&(N=null);if(null==N){y=-T;if(this._pagescache[this.dataview.pagenum+1])v=this._pagescache[this.dataview.pagenum+1],this.dataview.pagenum++;else{O=this._pageviews.length;do if(this.dataview.pagenum<this._pageviews.length-1)this.dataview.pagenum++,v=void 0,0<this._pageviews[this.dataview.pagenum].height&&(this.dataview.updateview(),this._loadrows(),v=this._pagescache[this.dataview.pagenum]);else{v=void 0;break}while(void 0==v&&this.dataview.pagenum<
O)}void 0!=v&&(N=v[y+T])}if(null!=N){if(N.hidden)continue;this._endboundindex=this._startboundindex+T;this._endvisibleindex=this._startvisibleindex+T;0==T&&(O=Math.abs(h-N.top),this.table[0].style.top=-O+"px",F=-O);O=this.table[0].rows[D];if(!O)continue;parseInt(O.style.height)!=N.height&&(O.style.height=parseInt(N.height)+"px");E+=N.height;W=this.rowdetails&&N.rowdetails;X=!N.rowdetailshidden;W&&X&&(O.style.height=parseInt(N.height-N.rowdetailsheight)+"px",G++);U=this._isrowselected(!0,N);for(Q=
d;Q<f;Q++)I=Q,this._rendervisualcell(J,M,U,W,X,w,H,O,N,I,D,t);void 0!=N.group&&this._rendergroup&&this._rendergroup(H,O,N,z,B,D,r);if(this.autorowheight&&(this.autoheight||this.pageable)){P=this.rowsheight;for(Q=d;Q<f;Q++)this.editable&&this.editcell&&this.editcell.column==this.columns.records[Q].datafield&&this.editcell.row==this.getboundindex(N)&&this.editcell.editor?P=Math.max(P,this.editcell.editor.height()):O.cells[Q].firstChild&&(P=Math.max(P,8+parseInt(O.cells[Q].firstChild.offsetHeight)));
O.style.height=parseInt(P)+"px";this.heights[this._startboundindex+T]=P;W&&X&&(P+=N.rowdetailsheight);N.height=P}this.visiblerows[this.visiblerows.length]=N;this.hittestinfo[this.hittestinfo.length]={row:N,visualrow:O,details:!1};W&&X&&(D++,O=this.table[0].rows[D],this._renderrowdetails(M,O,N,z,B,D),this.visiblerows[this.visiblerows.length]=N,this.hittestinfo[this.hittestinfo.length]={row:N,visualrow:O,details:!0});if(!this.autorowheight&&E+F>=q)break}else cansetheight=!0,this._clearvisualrow(l,w,
D,z,B),E+C+F<=q&&(C+=P);D++}this._horizontalvalue=l;0<C&&"visible"==this.vScrollBar[0].style.visibility&&(parseInt(this.table.css("top")),l=this._pageviews[this._pageviews.length-1],h=b.max,q=l.top+l.height-q,"visible"==this.hScrollBar.css("visibility")&&(q+=this.scrollbarsize+20),h!=q&&!this.autorowheight&&0<=q&&("deferred"!=this.scrollmode?(b.max=q,b.setPosition(b.max)):this._newmax!=q&&(this._newmax=q,this._rendervisualrows())))}if((this.autoheight||this.pageable)&&this.autorowheight){this._pagescache=
[];for(T=q=b=0;T<this.visiblerows.length;T++)for(h=this.visiblerows[T],h.top=b,b+=h.height,q+=h.height,W=this.rowdetails&&h.rowdetails,X=!h.rowdetailshidden,O=this.table[0].rows[T],W&&X&&T++,Q=d;Q<f;Q++)l=this.columns.records[Q],l.hidden||l.cellsrenderer||(r=O.cells[Q],t=0,r.firstChild?(t=(h.height-parseInt(r.firstChild.offsetHeight)-8)/2,W&&X&&(t=(h.height-h.rowdetailsheight-c(r.firstChild).height()-8)/2)):t=(h.height-parseInt(c(r).height())-8)/2,0<=t&&(t=parseInt(t)+4,!r.firstChild||-1!=r.firstChild.className.indexOf("jqx-grid-groups-row")||
"checkbox"==l.columntype||"button"==l.columntype||this.editable&&this.editcell&&this.editcell.column==l.datafield&&this.editcell.row==this.getboundindex(h)||(r.firstChild.style.marginTop=t+"px")));this._pageviews[0]&&(this._pageviews[0].height=q);this._arrange()}this._renderemptyrow();this.toCompile&&0<this.toCompile.length&&c.each(this.toCompile,function(b,d){if(this.compiled)return!0;var e=this.cell;if(!e)return!0;c.jqx.angularCompile&&c.jqx.angularCompile(e,"<div>"+this.value+"</div>");this.compiled=
!0})}}},_hideemptyrow:function(){if(this.showemptyrow&&this.table&&this.table[0].rows){var b=this.table[0].rows[0];if(b)for(var d=!1,f=0;f<b.cells.length;f++){var h=c(b.cells[f]);"none"==h.css("display")||d||h.width()!=this.host.width()&&h.text()!=this.gridlocalization.emptydatastring||(h[0].checkbox=null,h[0].button=null,d=!0,h[0].innerHTML="")}}},_renderemptyrow:function(){if(!this._loading&&0==this.dataview.records.length&&this.showemptyrow){var b=!1,d=this.toTP("jqx-grid-cell");if(this.table&&
0<this.table.length&&this.table[0].rows&&0<this.table[0].rows.length){var f=this.table[0].rows[0];this.table[0].style.top="0px";for(var h=0;h<f.cells.length;h++){var l=c(f.cells[h]);if("none"!=l.css("display")&&!b){l[0].checkbox=null;l[0].button=null;l[0].className=d;b=!0;l[0].innerHTML="";var q=c("<span style='white-space: nowrap; float: left; margin-left: 50%; position: relative;'></span>");q.text(this.gridlocalization.emptydatastring);l.append(q);var r=0;this.oldhscroll||(r=parseInt(this.table[0].style.marginLeft),
this.rtl&&(l.css("z-index",999),l.css("overflow","visible")));q.css("left",-r-q.width()/2);q.css("top",this._gettableheight()/2-q.height()/2);c.jqx.browser.msie&&8>c.jqx.browser.version&&(q.css("margin-left","0px"),q.css("left",this.host.width()/2-q.width()/2));q=Math.abs(parseInt(this.table[0].style.top));isNaN(q)&&(q=0);c(f).height(this._gettableheight()+q);l.css("margin-left","0px");l.width(this.host.width());this.table.width()<this.host.width()&&this.table.width(this.host.width())}l.addClass(this.toThemeProperty("jqx-grid-empty-cell"))}}}},
_clearvisualrows:function(){var b=this.virtualsizeinfo.visiblerecords,d=parseInt(this.hScrollInstance.value),c=this.groupable&&0<this.groups.length;if(this.columns.records)for(var h=0;h<b;h++)this._clearvisualrow(d,c,h,0,this.columns.records.length)},_iscellselected:function(b,d,c){var h=!1,l=0;this.virtualmode&&this.pageable&&this.groupable&&0<this.groups.length&&(l=this.dataview.pagesize*this.dataview.pagenum);if(0<this.groups.length&&this.pageable&&this.groupable){b=this.getrowboundindexbyid(d.bounddata.uid);
if(-1!=b){for(var q in this.selectedcells)q==b+"_"+c&&(h=!0);return h}return!1}if(b&&null!=d.bounddata)if("singlerow"!=this.selectionmode)if(0<this.dataview.filters.length)if(this.virtualmode||void 0==d.bounddata.dataindex)for(q in this.selectedcells)q==l+d.bounddata.boundindex+"_"+c&&(h=!0);else for(q in this.selectedcells)q==l+d.bounddata.dataindex+"_"+c&&(h=!0);else for(q in this.selectedcells){if(q==l+d.bounddata.boundindex+"_"+c){h=!0;break}}else if(0<this.dataview.filters.length)if(!this.virtualmode&&
void 0!=d.bounddata.dataindex)for(q in this.selectedcells){if(q==l+d.bounddata.dataindex+"_"+c){h=!0;break}}else for(q in this.selectedcells){if(q==l+d.bounddata.boundindex+"_"+c){h=!0;break}}else for(q in this.selectedcells)if(q==l+d.bounddata.boundindex==this.selectedrowindex){h=!0;break}return h},_isrowselected:function(b,d){var c=!1,h=0;this.virtualmode&&this.pageable&&this.groupable&&0<this.groups.length&&(h=this.dataview.pagesize*this.dataview.pagenum);if(this.groupable&&0<this.groups.length&&
this.pageable){h=this.getrowboundindexbyid(d.bounddata.uid);if(void 0==h||-1==h)return!1;-1!=this.selectedrowindexes.indexOf(h)&&(c=!0);c||(c=h==this.selectedrowindex&&-1!=this.selectedrowindex);return c}b&&null!=d.bounddata&&("singlerow"!=this.selectionmode?0<this.dataview.filters.length?this.virtualmode||void 0==d.bounddata.dataindex?-1!=this.selectedrowindexes.indexOf(h+d.bounddata.boundindex)&&(c=!0):-1!=this.selectedrowindexes.indexOf(h+d.bounddata.dataindex)&&(c=!0):-1!=this.selectedrowindexes.indexOf(h+
d.bounddata.boundindex)&&(c=!0):0<this.dataview.filters.length?this.virtualmode||void 0==d.bounddata.dataindex?-1!=this.selectedrowindexes.indexOf(h+d.bounddata.boundindex)&&(c=!0):-1!=this.selectedrowindexes.indexOf(h+d.bounddata.dataindex)&&(c=!0):h+d.bounddata.boundindex==this.selectedrowindex&&(c=!0));return c},_rendervisualcell:function(b,d,f,h,l,q,r,t,w,z,B,v){var y=this.columns.records[z];if(y.hidden)B=t.cells[z],B.innerHTML="";else{cellvalue=this._getcellvalue(y,w);B=t.cells[z];-1!=this.selectionmode.indexOf("cell")&&
(f=0<this.dataview.filters.length?this.selectedcells[w.bounddata.dataindex+"_"+y.datafield]?!0:!1:this.selectedcells[w.boundindex+"_"+y.datafield]?!0:!1,this.editcell&&this.editcell.row===w.boundindex&&this.editcell.column===y.datafield&&"checkbox"!==y.columntype&&(f=!1),this.virtualmode||this.groupable&&0<this.groups.length&&this.pageable)&&(f=this._iscellselected(!0,w,y.datafield));if(""!=y.cellclassname&&y.cellclassname)if("string"==typeof y.cellclassname)d+=" "+y.cellclassname;else{var C=y.cellclassname(this.getboundindex(w),
y.datafield,cellvalue,w.bounddata);C&&(d+=" "+C)}(C=this.showsortcolumnbackground&&this.sortcolumn&&y.displayfield==this.sortcolumn)&&(d+=" "+this.toTP("jqx-grid-cell-sort"));y.filter&&this.showfiltercolumnbackground&&(d+=" "+this.toTP("jqx-grid-cell-filter"));w.bounddata.totalsrow&&(d+=" "+this.toTP("jqx-grid-cell-pinned"));if(y.pinned&&this.showpinnedcolumnbackground||y.grouped)q?w.bounddata.totalsrow||(d+=" "+this.toTP("jqx-grid-cell-pinned")):d+=" "+this.toTP("jqx-grid-cell-pinned");if(this.altrows&&
void 0==w.group){var D=w.visibleindex;D>=this.altstart&&0==(this.altstart+D)%(1+this.altstep)&&(d=C?d+(" "+this.toTP("jqx-grid-cell-sort-alt")):d+(" "+this.toTP("jqx-grid-cell-alt")),y.filter&&this.showfiltercolumnbackground&&(d+=" "+this.toTP("jqx-grid-cell-filter-alt")),y.pinned&&this.showpinnedcolumnbackground&&(d+=" "+this.toTP("jqx-grid-cell-pinned-alt")))}if(z<=r){if(q||this.rowdetails||this.pageable&&this.virtualmode)C=c(B),D=this.columns.records[z].width,B.style.width!=parseInt(D)+"px"&&C.width(D)}else(q||
this.rowdetails)&&this._hiddencolumns&&(C=c(B),D=this.columns.records[z].width,parseInt(B.style.width)!=D&&C.width(D));if(this.rowdetails&&h&&(l&&!q?d+=" "+this.toTP("jqx-grid-details-cell"):q&&(d+=" "+this.toTP("jqx-grid-group-details-cell")),this.showrowdetailscolumn))if(!this.rtl){if(void 0==w.group&&z==r&&!w.bounddata.totalsrow){b=this.toThemeProperty("jqx-icon-arrow-down");l?d+=" "+this.toTP("jqx-grid-group-expand"):(d+=" "+this.toTP("jqx-grid-group-collapse"),b=this.toThemeProperty("jqx-icon-arrow-right"));
d+=" "+b;B.title="";B.innerHTML="";B.className!=d&&(B.className=d);return}}else if(void 0==w.group&&z==t.cells.length-r-1){b=this.toThemeProperty("jqx-icon-arrow-down");l?d+=" "+this.toTP("jqx-grid-group-expand-rtl"):(d+=" "+this.toTP("jqx-grid-group-collapse-rtl"),b=this.toThemeProperty("jqx-icon-arrow-left"));d+=" "+b;B.title="";B.innerHTML="";B.className!=d&&(B.className=d);return}f&&z>=r&&(d+=" "+this.toTP("jqx-grid-cell-selected"),d+=" "+this.toTP("jqx-fill-state-pressed"));B.className!=d&&(B.className=
d);void 0!=w.group?(cellvalue="",B.title="",B.innerHTML=""):b(this,y,w,cellvalue,B,v)}},_rendercell:function(b,d,f,h,l,q){var r=h+"_"+d.visibleindex;if("number"==d.columntype||null!=d.cellsrenderer)r=f.uniqueid+"_"+d.visibleindex;"number"==d.columntype&&(h=f.visibleindex);if(b.editcell&&void 0==b.editrow)if("selectedrow"==b.editmode&&d.editable&&b.editable){if(b.editcell.row==b.getboundindex(f)&&b._showcelleditor){b.hScrollInstance.isScrolling()||b.vScrollInstance.isScrolling()?b._showcelleditor(b.editcell.row,
d,l,!1,!1):b._showcelleditor(b.editcell.row,d,l,b.editcell.init);return}}else if(b.editcell.row==b.getboundindex(f)&&b.editcell.column==d.datafield&&(b.editcell.element=l,b.editcell.editing&&b._showcelleditor)){b.hScrollInstance.isScrolling()||b.vScrollInstance.isScrolling()?b._showcelleditor(b.editcell.row,d,b.editcell.element,b.editcell.init,!1):b._showcelleditor(b.editcell.row,d,b.editcell.element,b.editcell.init);return}var t=b._defaultcellsrenderer(h,d),w=b._cellscache[r];if(w){if("checkbox"==
d.columntype){if(b.host.jqxCheckBox){""===h&&(h=null);r=0==l.innerHTML.toString().length;!l.checkbox||b.groupable||r?b._rendercheckboxcell(b,l,d,f,h):(l.checkboxrow=b.getboundindex(f),""==h&&(h=!1),"1"==h&&(h=!0),"0"==h&&(h=!1),1==h&&(h=!0),0==h&&(h=!1),"true"==h&&(h=!0),"false"==h&&(h=!1),null!=h||d.threestatecheckbox||(h=!1),d.checkboxcolumn&&(h=!1,0<b.dataview.filters.length&&!b.virtualmode&&void 0!=f.bounddata.dataindex?-1!=b.selectedrowindexes.indexOf(f.bounddata.dataindex)&&(h=!0):-1!=b.selectedrowindexes.indexOf(f.bounddata.boundindex)&&
(h=!0)),b.disabled||(l.checkboxinstance?l.checkboxinstance._setState(h):l.checkbox.jqxCheckBox("_setState",h)));null!=d.cellsrenderer&&(b=d.cellsrenderer(b.getboundindex(f),d.datafield,h,t,d.getcolumnproperties(),f.bounddata),void 0!=b&&(l.innerHTML=b));return}}else if("button"==d.columntype&&b.host.jqxButton){""==h&&(h=!1);null!=d.cellsrenderer&&(h=d.cellsrenderer(b.getboundindex(f),d.datafield,h,t,d.getcolumnproperties(),f.bounddata));""==l.innerHTML&&(l.buttonrow=b.getboundindex(f),l.button=null,
b._renderbuttoncell(b,l,d,f,h));l.button&&!b.groupable?(l.buttonrow=b.getboundindex(f),l.button.val(h)):b._renderbuttoncell(b,l,d,f,h);return}if(d.createwidget)if(""==l.innerHTML&&(l.widgetrow=b.getboundindex(f),l.widget=null,b._renderwidgetcell(b,l,d,f,h)),l.widget&&!b.groupable)if(l.widgetrow=b.getboundindex(f),d.initwidget)d.initwidget(b.getboundindex(f),d.datafield,h,l.firstChild);else throw Error("jqxGrid: 'initwidget' column function is not implemented. Please, implement 'initwidget'");else b._renderwidgetcell(b,
l,d,f,h);else{var z=w.element;null!=d.cellsrenderer||l.childNodes&&0==l.childNodes.length||b.groupable||b.rowdetails?l.innerHTML!=z&&(l.innerHTML=z):0<=l.innerHTML.indexOf("editor")?l.innerHTML=z:q?(h=z.indexOf(">"),t=z.indexOf("</"),t=z.substring(h+1,t),h=l.childNodes[0],0<=t.indexOf(">")?l.innerHTML=z:h.childNodes[0]?t!=h.childNodes[0].nodeValue&&(0<=t.indexOf("&")?l.innerHTML=z:h.childNodes[0].nodeValue=t):(z=document.createTextNode(t),h.appendChild(z))):l.innerHTML!=z&&(l.innerHTML=z);b.enabletooltips&&
d.enabletooltips&&(l.title=w.title)}}else if("checkbox"==d.columntype)b._rendercheckboxcell(b,l,d,f,h),b._cellscache[r]={element:"",title:h},b.enabletooltips&&d.enabletooltips&&(l.title=""+h);else if("button"==d.columntype)null!=d.cellsrenderer&&(h=d.cellsrenderer(b.getboundindex(f),d.datafield,h,t,d.getcolumnproperties(),f.bounddata)),b._renderbuttoncell(b,l,d,f,h),b._cellscache[r]={element:"",title:h},b.enabletooltips&&d.enabletooltips&&(l.title=""+h);else if("number"==d.columntype&&(h=f.visibleindex),
d.createwidget)null!=d.cellsrenderer&&(h=d.cellsrenderer(b.getboundindex(f),d.datafield,h,t,d.getcolumnproperties(),f.bounddata)),b._renderwidgetcell(b,l,d,f,h),b._cellscache[r]={element:"",title:h},b.enabletooltips&&d.enabletooltips&&(l.title=h);else{if(null!=d.cellsrenderer){if((z=d.cellsrenderer(b.getboundindex(f),d.datafield,h,t,d.getcolumnproperties(),f.bounddata))&&(0<=z.indexOf("<jqx-")||0<=z.indexOf(" ng-"))){b.toCompile&&b.toCompile.push({cell:l,value:z,row:b.getboundindex(f)});return}}else z=
t;null==z&&(z=t);w=h;b.enabletooltips&&d.enabletooltips&&(""!=d.cellsformat&&c.jqx.dataFormat&&(c.jqx.dataFormat.isDate(h)?w=c.jqx.dataFormat.formatdate(w,d.cellsformat,b.gridlocalization):c.jqx.dataFormat.isNumber(h)&&(w=c.jqx.dataFormat.formatnumber(w,d.cellsformat,b.gridlocalization))),l.title=w);b.WinJS?c(l).html(z):(f=l.innerHTML,0<=f.indexOf("editor")||null!=d.cellsrenderer||b.groupable||b.virtualmode?l.innerHTML=z:0<f.length?(h=z.indexOf(">"),t=z.indexOf("</"),t=z.substring(h+1,t),h=l.childNodes[0],
0<=t.indexOf(">")?l.innerHTML=z:h.childNodes[0]?t!=h.childNodes[0].nodeValue&&(0<=t.indexOf("&")||0<=f.indexOf("span")?l.innerHTML=z:h.childNodes[0].nodeValue=t):(z=document.createTextNode(t),h.appendChild(z))):f!=z&&(l.innerHTML=z));b._cellscache[r]={element:l.innerHTML,title:w};return!0}},_isIE10:function(){if(void 0==this._browser){var b=c.jqx.utilities.getBrowser();"msie"==b.browser&&9<parseInt(b.version)?this._browser=!0:(this._browser=!1,"msie"==b.browser&&(b="Browser CodeName: "+navigator.appCodeName+
"",b+="Browser Name: "+navigator.appName+"",b+="Browser Version: "+navigator.appVersion+"",b+="Platform: "+navigator.platform+"",b+="User-agent header: "+navigator.userAgent+"",-1!=b.indexOf("Zune 4.7")&&(this._browser=!0)))}return this._browser},_renderinlinecell:function(b,d,f,h,l){c(d);d.innerHTML='<div style="position: absolute;"></div>'},_rendercheckboxcell:function(b,d,f,h,l){if(b.host.jqxCheckBox){var q=c(d);""===l&&(l=f.threestatecheckbox?null:!1);null!==l||f.threestatecheckbox||(l=!1);"1"==
l&&(l=!0);"0"==l&&(l=!1);1==l&&(l=!0);0==l&&(l=!1);"true"==l&&(l=!0);"false"==l&&(l=!1);if(f.checkboxcolumn){l=!1;var r=this.getboundindex(h);-1!=this.selectedrowindexes.indexOf(r)&&(l=!0)}0==q.find(".jqx-checkbox").length?(d.innerHTML='<div style="position: absolute; top: 50%; left: 50%; margin-top: -7px; margin-left: -10px;"></div>',c(d.firstChild).jqxCheckBox({disabled:b.disabled,_canFocus:!1,hasInput:!1,hasThreeStates:f.threestatecheckbox,enableContainerClick:!1,animationShowDelay:0,animationHideDelay:0,
locked:!0,theme:b.theme,checked:l}),this.enabletooltips&&f.enabletooltips&&(d.title=""+l),this.editable&&f.editable&&c(d.firstChild).jqxCheckBox({locked:!1}),f.checkboxcolumn&&c(d.firstChild).jqxCheckBox({locked:!1}),d.checkbox=c(d.firstChild),d.checkboxinstance=d.checkbox.data().jqxCheckBox.instance,d.checkboxrow=this.getboundindex(h),c.data(d.firstChild,"jqxCheckBox").instance.updated=function(h,l,q){if(b.disabled){l=q;h=b.table[0].rows.length;for(var r=b._getcolumnindex(f.datafield),v=0;v<h;v++){var y=
b.table[0].rows[v].cells[r].firstChild;y&&c(y).jqxCheckBox({disabled:b.disabled})}}if(f.editable&&!b.disabled){if(h=b.table[0].rows.length,r=b._getcolumnindex(f.datafield),void 0==b.editrow)if(f.cellbeginedit&&0==f.cellbeginedit(d.checkboxrow,f.datafield,f.columntype,!l))b.setcellvalue(d.checkboxrow,f.datafield,!l,!0);else{f.cellvaluechanging&&(v=f.cellvaluechanging(d.checkboxrow,f.datafield,f.columntype,q,l),void 0!=v&&(l=v));if("selectedrow"!==b.editmode)for(v=0;v<h;v++)(y=b.table[0].rows[v].cells[r].firstChild)&&
c(y).jqxCheckBox("destroy");b.editcell&&0==b.editcell.validated?b.setcellvalue(d.checkboxrow,f.datafield,!l,!0):"selectedrow"!==b.editmode||null==b.editcell?(h=b.getrowdata(d.checkboxrow),b._raiseEvent(17,{rowindex:d.checkboxrow,row:h,datafield:f.datafield,value:q,columntype:f.columntype}),b.setcellvalue(d.checkboxrow,f.datafield,l,!0),b._raiseEvent(18,{rowindex:d.checkboxrow,row:h,datafield:f.datafield,oldvalue:q,value:l,columntype:f.columntype})):b.setcellvalue(d.checkboxrow,f.datafield,l,!1,!1);
f.cellendedit&&f.cellendedit(d.checkboxrow,f.datafield,f.columntype,l)}}else f.checkboxcolumn&&(b.editcell&&b.endcelledit(b.editcell.row,b.editcell.column,!1,!0),b.disabled||(l?b.selectrow(d.checkboxrow):b.unselectrow(d.checkboxrow),b.autosavestate&&b.savestate&&b.savestate()))}):(d.checkboxrow=this.getboundindex(h),c(d.firstChild).jqxCheckBox("_setState",l,!(this.editable&&f.editable)&&!f.checkboxcolumn))}},_renderwidgetcell:function(b,d,f,h,l){0==c(d).find(".jqx-grid-widget").length?(d.innerHTML=
'<div class="jqx-grid-widget" style="opacity: 0.99; position: absolute; width: 100%; height:100%; top: 0%; left: 0%; padding: 0px;"></div>',f.createwidget(h,f.datafield,l,d.firstChild),c(d.firstChild).attr("hideFocus","true"),c(d.firstChild).children().addClass("jqx-grid-widget"),d.widget=c(d.firstChild),d.widgetrow=b.getboundindex(h)):(f.initwidget(b.getboundindex(h),f.datafield,l,d.firstChild),d.widgetrow=b.getboundindex(h),c(d.firstChild).val(l))},_renderbuttoncell:function(b,d,f,h,l){if(b.host.jqxButton){var q=
c(d);""==l&&(l=!1);0==q.find(".jqx-button").length?(d.innerHTML='<input type="button" style="opacity: 0.99; position: absolute; top: 0%; left: 0%; padding: 0px; margin-top: 2px; margin-left: 2px;"/>',c(d.firstChild).val(l),c(d.firstChild).attr("hideFocus","true"),c(d.firstChild).jqxButton({disabled:b.disabled,theme:b.theme,height:b.rowsheight-4,width:f.width-4}),d.button=c(d.firstChild),d.buttonrow=b.getboundindex(h),this.isTouchDevice()?(h=c.jqx.mobile.getTouchEventName("touchend"),b.addHandler(c(d.firstChild),
h,function(b){f.buttonclick&&f.buttonclick(d.buttonrow,b)})):b.addHandler(c(d.firstChild),"click",function(b){f.buttonclick&&f.buttonclick(d.buttonrow,b)})):(d.buttonrow=b.getboundindex(h),c(d.firstChild).val(l))}},_clearvisualrow:function(b,d,f,h,l){var q=this.toTP("jqx-grid-cell");d&&(q=" "+this.toTP("jqx-grid-group-cell"));q+=" "+this.toTP("jqx-grid-cleared-cell");d=this.table[0].rows;for(var r=0;r<h+l;r++)if(d[f]){var t=d[f].cells[r];t.className!=q&&(t.className=q);var w=this.columns.records[r];
this._horizontalvalue==b||w.pinned||1!=this.oldhscroll||(t.style.marginLeft=-b+"px");var z=w.width;z<w.minwidth&&(z=w.minwidth);z>w.maxwidth&&(z=w.maxwidth);parseInt(t.style.width)!=z&&("auto"!=z?c(t)[0].style.width=z+"px":c(t)[0].style.width=z);""!=t.title&&(t.title="");""!=t.innerHTML&&(t.innerHTML="")}d[f]&&parseInt(d[f].style.height)!=this.rowsheight&&(d[f].style.height=parseInt(this.rowsheight)+"px")},_findgroupstate:function(b){b=this._findgroup(b);return null==b?!1:b.expanded},_findgroup:function(b){return this.expandedgroups[b]?
this.expandedgroups[b]:null},_clearcaches:function(){this._columnsbydatafield=[];this._pagescache=[];this._pageviews=[];this._cellscache=[];this.heights=[];this.hiddens=[];this.hiddenboundrows=[];this.heightboundrows=[];this.detailboundrows=[];this.details=[];this.expandedgroups=[];this._rowdetailscache=[];this._rowdetailselementscache=[];c.jqx.dataFormat&&c.jqx.dataFormat.cleardatescache();this.tableheight=null},_getColumnText:function(b){void 0==this._columnsbydatafield&&(this._columnsbydatafield=
[]);if(this._columnsbydatafield[b])return this._columnsbydatafield[b];var d=b,f=null;c.each(this.columns.records,function(){if(this.datafield==b||this.displayfield==b)return d=this.text,f=this,!1});this._columnsbydatafield[b]={label:d,column:f};return this._columnsbydatafield[b]},_getcolumnbydatafield:function(b){void 0==this.__columnsbydatafield&&(this.__columnsbydatafield=[]);if(this.__columnsbydatafield[b])return this.__columnsbydatafield[b];var d=null;c.each(this.columns.records,function(){if(this.datafield==
b||this.displayfield==b)return d=this,!1});this.__columnsbydatafield[b]=d;return this.__columnsbydatafield[b]},isscrollingvertically:function(){return this.vScrollBar.jqxScrollBar("isScrolling")},_renderrowdetails:function(b,d,f,h,l,q){if(void 0!=d){var r=c(d);q=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;if(this.groupable&&0<this.groups.length)for(var t=0;t<=l;t++){var w=c(d.cells[t]);w[0].innerHTML="";w[0].className=
"jqx-grid-details-cell"}w=c(d.cells[0]);if("none"==w[0].style.display){w=d.cells[0];for(t=2;void 0!=w&&"none"==w.style.display&&10>t;)w=d.cells[0+t-1],t++;w=c(w)}if(this.rtl)for(;h<l;h++)d.cells[h].innerHTML="",d.cells[h].className="jqx-grid-details-cell";w.css("width","100%");r.height(f.rowdetailsheight);w[0].className=b;b=this.getboundindex(f);l=b+"_";this._rowdetailscache[l]?(d=this._rowdetailscache[l].html,this.initrowdetails?this._rowdetailscache[l].element&&(d=this._rowdetailscache[l].element,
w=w.coord(),h=this.gridcontent.coord(),f=parseInt(w.top)-parseInt(h.top),w=parseInt(w.left)-parseInt(h.left),this.rtl&&(w=0),c(d).css("top",f),c(d).css("left",w),c(d).css("display","block"),c(d).width(this.host.width()-q),this.layoutrowdetails&&this.layoutrowdetails(b,d,this.element,this.getrowdata(b))):w[0].innerHTML=d):(w[0].innerHTML="",this.enablerowdetailsindent||(q=0),h='<div class="jqx-enableselect" role="rowgroup" style="border: none; overflow: hidden; width: 100%; height: 100%; margin-left: '+
q+'px;">'+f.rowdetails+"</div>",this.rtl&&(h='<div class="jqx-enableselect" role="rowgroup" style="border: none; overflow: hidden; width: 100%; height: 100%; margin-left: 0px; margin-right: '+q+'px;">'+f.rowdetails+"</div>"),this._rowdetailscache[l]={id:d.id,html:h},this.initrowdetails?(d=c(h)[0],c(this.gridcontent).prepend(c(d)),c(d).css("position","absolute"),c(d).width(this.host.width()-q),c(d).height(w.height()),w.coord(),c(d).css("z-index",299),this.isTouchDevice()&&c(d).css("z-index",999),c(d).addClass(this.toThemeProperty("jqx-widget-content")),
w=w.coord(),h=this.gridcontent.coord(),f=parseInt(w.top)-parseInt(h.top),w=parseInt(w.left)-parseInt(h.left),c(d).css("top",f),c(d).css("left",w),this.content[0].scrollTop=0,this.content[0].scrollLeft=0,q=c(c(d).children()[0]),""!=q[0].id&&(q[0].id+=b),this.initrowdetails(b,d,this.element,this.getrowdata(b)),this._rowdetailscache[l].element=d,this._rowdetailselementscache[b]=d):w[0].innerHTML=h)}},_defaultcellsrenderer:function(b,d){""!=d.cellsformat&&c.jqx.dataFormat&&(c.jqx.dataFormat.isDate(b)?
b=c.jqx.dataFormat.formatdate(b,d.cellsformat,this.gridlocalization):c.jqx.dataFormat.isNumber(b)&&(b=c.jqx.dataFormat.formatnumber(b,d.cellsformat,this.gridlocalization)));var f="6px";28!=this.rowsheight&&(f=this.rowsheight/2-this._cellheight/2,0>f&&(f=4),f+="px");if(this.enableellipsis){if("center"==d.cellsalign||"middle"==d.cellsalign)return'<div class="jqx-grid-cell-middle-align" style="margin-top: '+f+';">'+b+"</div>";if("left"==d.cellsalign)return'<div class="jqx-grid-cell-left-align" style="margin-top: '+
f+';">'+b+"</div>";if("right"==d.cellsalign)return'<div class="jqx-grid-cell-right-align" style="margin-top: '+f+';">'+b+"</div>"}return"center"==d.cellsalign||"middle"==d.cellsalign?'<div style="text-align: center; margin-top: '+f+';">'+b+"</div>":'<span style="margin-left: 4px; margin-right: 2px; margin-top: '+f+"; float: "+d.cellsalign+';">'+b+"</span>"},getcelltext:function(b,d){if(null==b||null==d)return null;var f=this.getcellvalue(b,d),h=this.getcolumn(d);h&&""!=h.cellsformat&&c.jqx.dataFormat&&
(c.jqx.dataFormat.isDate(f)?f=c.jqx.dataFormat.formatdate(f,h.cellsformat,this.gridlocalization):c.jqx.dataFormat.isNumber(f)&&(f=c.jqx.dataFormat.formatnumber(f,h.cellsformat,this.gridlocalization)));return f},getcelltextbyid:function(b,d){if(null==b||null==d)return null;var f=this.getcellvaluebyid(b,d),h=this.getcolumn(d);h&&""!=h.cellsformat&&c.jqx.dataFormat&&(c.jqx.dataFormat.isDate(f)?f=c.jqx.dataFormat.formatdate(f,h.cellsformat,this.gridlocalization):c.jqx.dataFormat.isNumber(f)&&(f=c.jqx.dataFormat.formatnumber(f,
h.cellsformat,this.gridlocalization)));return f},_getcellvalue:function(b,d){var c;c=d.bounddata[b.datafield];null!=b.displayfield&&(c=d.bounddata[b.displayfield]);null==c&&(c="");return c},getcell:function(b,d){if(null==b||null==d)return null;var c=parseInt(b),h=b,l="";isNaN(c)||(h=this.getrowdata(c));null!=h&&(l=h[d]);return this._getcellresult(l,b,d)},getrenderedcell:function(b,d){if(null==b||null==d)return null;var c=parseInt(b),h=b,l="";isNaN(c)||(h=this.getrenderedrowdata(c));null!=h&&(l=h[d]);
return this._getcellresult(l,b,d)},_getcellresult:function(b,d,c){var h=this.getcolumn(c);if(null==h||void 0==h)return null;var l=h.getcolumnproperties(),h=l.hidden,q=l.width,r=l.pinned,t=l.cellsalign,l=l.cellsformat,w=this.getrowheight(d);return 0==w?null:{value:b,row:d,column:c,datafield:c,width:q,height:w,hidden:h,pinned:r,align:t,format:l}},setcellvaluebyid:function(b,d,c,h,l){b=this.getrowboundindexbyid(b);return this.setcellvalue(b,d,c,h,l)},getcellvaluebyid:function(b,d){var c=this.getrowboundindexbyid(b);
return this.getcellvalue(c,d)},setcellvalue:function(b,d,f,h,l){if(null==b||null==d)return!1;var q=parseInt(b),r=b;isNaN(q)||(r=this.getrowdata(q));var t=!1;this.filterable&&this._initfilterpanel&&this.dataview.filters.length&&(t=!0);this.virtualmode&&(this._pagescache=[]);this.sortcache&&(this.sortcache={});var w="",z="";if(null!=r&&r[d]!==f){if(null===r[d]&&""===f)return;var B=this._getcolumnbydatafield(d),v="string",y=this.source.datafields||(this.source._source?this.source._source.datafields:
null);if(y){var C="";c.each(y,function(){if(this.name==B.displayfield)return this.type&&(C=this.type),!1});C&&(v=C);z=r[B.displayfield]}w=r[d];if(!B.nullable||null!=f&&""!==f&&B.nullable&&void 0===f.label)if(c.jqx.dataFormat.isNumber(w)||"number"==v||"float"==v||"int"==v||"decimal"==v&&"date"!=v?(this.gridlocalization&&","==this.gridlocalization.decimalseparator&&f&&f.indexOf&&0<=f.indexOf(",")&&(f=f.replace(",",".")),f=new Number(f),f=parseFloat(f),isNaN(f)&&(f=0)):!c.jqx.dataFormat.isDate(w)&&"date"!=
v||""==f||(y=new Date(f),"Invalid Date"!=y&&null!=y?f=y:"Invalid Date"==y&&(f=y=new Date)),r[d]===f){this._updating||0==h||this._renderrows(this.virtualsizeinfo);return}y=this.source&&this.source._source.localdata&&"observableArray"===this.source._source.localdata.name;r[d]=f;if(y){var D=this.source._source.localdata;D._updating||(D._updating=!0,D[b][d]=f,D._updating=!1)}v=this.getrenderedrowdata(q,!0);if(!v)return;v[d]=f;null!=f&&null!=f.label&&(B=this._getcolumnbydatafield(d),r[B.displayfield]=
f.label,v[B.displayfield]=f.label,r[d]=f.value,v[d]=f.value,y&&!D._updating&&(D._updating=!0,D[b][d]=f.value,D[b][B.displayfield]=f.label,D._updating=!1));t&&void 0!=r.dataindex&&(this.dataview.cachedrecords[r.dataindex][d]=f,null!=f&&void 0!=f.label&&(this.dataview.cachedrecords[r.dataindex][d]=f.value,this.dataview.cachedrecords[r.dataindex][B.displayfield]=f.label))}else return this._updating||0==h||this._renderrows(this.virtualsizeinfo),!1;if(this.source&&this.source._knockoutdatasource&&!this._updateFromAdapter&&
this.autokoupdates&&this.source._source._localdata){D=q;t&&void 0!=r.dataindex&&(D=r.dataindex);D=this.source._source._localdata()[D];this.source.suspendKO=!0;if(D[d]&&D[d].subscribe)if(null!=f&&null!=f.label)D[B.displayfield](f.label),D[d](f.value);else D[d](f);else{var y=this.source._source.datafields,E=null;y&&c.each(y,function(){if(this.name==d)return E=this.map,!1});if(null==E)null!=f&&null!=f.label?(D[d]=f.value,D[B.displayfield]=f.label):D[d]=f;else if(y=E.split(this.source.mapChar),0<y.length){for(var v=
D,F=0;F<y.length-1;F++)v=v[y[F]];v[y[y.length-1]]=f}this.source._source._localdata.replace(D,c.extend({},D))}this.source.suspendKO=!1}this.sortcolumn&&this.dataview.sortby&&!this._updating?(D=this.getsortinformation(),this.sortcolumn==d&&(this.dataview.clearsortdata(),this.dataview.sortby(D.sortcolumn,D.sortdirection.ascending))):this._updating||this.dataview.sortby&&this.dataview.sortcache[d]&&(this.dataview.sortcache[d]=null);this._cellscache=[];this._pagescache=[];if(this.source.updaterow&&(void 0==
l||1==l)){l=!1;var G=this.that,D=function(c){0==c&&(G.setcellvalue(b,d,w,!0,!1),w!=z&&G.setcellvalue(b,G.getcolumn(d).displayfield,z,!0,!1))};try{var H=this.getrowid(q);l=this.source.updaterow(H,r,D);void 0==l&&(l=!0)}catch(M){l=!1;G.setcellvalue(b,d,w,!0,!1);w!=z&&G.setcellvalue(b,G.getcolumn(d).displayfield,z,!0,!1);return}}q=this.vScrollInstance.value;this._updating&&1!=h&&(h=!1);if(1==h||void 0==h)if(G=this.that,h=function(){G.pageable&&G.updatepagerdetails&&(G.updatepagerdetails(),(G.autoheight||
G.autorowheight)&&G._updatepageviews())},r=this.groupable&&0<this.groups.length,t&&!r){if(this.autoheight||this.autorowheight)this.prerenderrequired=!0;this.dataview.refresh();this.rendergridcontent(!0,!1);h();this._renderrows(this.virtualsizeinfo)}else if(this.sortcolumn&&!r){if(this.autoheight||this.autorowheight)this.prerenderrequired=!0;this.dataview.reloaddata();this.rendergridcontent(!0,!1);h();this._renderrows(this.virtualsizeinfo)}else if(this.groupable&&0<this.groups.length){if(this.autoheight||
this.autorowheight)this.prerenderrequired=!0;this.pageable?-1!=this.groups.indexOf(d)?(this._pagescache=[],this._cellscache=[],this.dataview.refresh(),this._render(!0,!0,!1,!1)):(this._pagescache=[],this._cellscache=[],this.dataview.updateview(),this._renderrows(this.virtualsizeinfo)):(this._pagescache=[],this._cellscache=[],this.dataview.updateview(),this._renderrows(this.virtualsizeinfo))}else this.dataview.updateview(),this._renderrows(this.virtualsizeinfo);this.vScrollInstance.setPosition(q);
this.showaggregates&&this._updatecolumnsaggregates&&this._updatecolumnsaggregates();this.showfilterrow&&this.filterable&&this.filterrow&&(t=this.getcolumn(d).filtertype,"list"!=t&&"checkedlist"!=t||this._updatelistfilters(!0));this._raiseEvent(19,{rowindex:b,datafield:d,newvalue:f,value:f,oldvalue:w});return!0},getcellvalue:function(b,d){if(null==b||null==d)return null;var c=parseInt(b),h=b;isNaN(c)||(h=this.getrowdata(c));return null!=h?h[d]:null},getrows:function(){var b=this.dataview.records.length;
if(this.virtualmode){for(var d=[],f=0;f<this.dataview.records.length;f++)(b=this.dataview.records[f])&&d.push(b);void 0===this.dataview.records.length&&c.each(this.dataview.records,function(){this&&d.push(this)});f=0;this.pageable&&(f=this.dataview.pagenum*this.dataview.pagesize);return d.length>this.source._source.totalrecords-f?d.slice(0,this.source._source.totalrecords-f):d}if(this.dataview.sortdata){d=[];for(f=0;f<b;f++){var h={},h=c.extend({},this.dataview.sortdata[f].value);d[f]=h}return d}return this.dataview.records},
getrowboundindexbyid:function(b){var d=this.dataview.recordsbyid["id"+b];if(d&&d.boundindex)return this.getboundindex(d);for(var d=this.getboundrows(),c=0;c<d.length;c++)if(d[c]&&d[c].uid==b)return c;return-1},getrowdatabyid:function(b){var d=this.dataview.recordsbyid["id"+b];if(d)return d;b=this.getrowboundindexbyid(b);return this.getboundrows()[b]},getrowdata:function(b){void 0==b&&(b=0);return this.virtualmode?this.dataview.records[b]:this.getboundrows()[b]},getrenderedrowdata:function(b,d){void 0==
b&&(b=0);if(this.virtualmode){var c=this.getrowvisibleindex(b);return c=this.dataview.loadedrecords[c]}c=this.getrowvisibleindex(b);return 0<=c?(this.groupable&&0<this.groups.length?c=this.dataview.loadedrecords[c]:(c=this.dataview.loadedrecords[c],!this.pageable||void 0!=d&&0!=d||(c=this.dataview.loadedrecords[this.dataview.pagesize*this.dataview.pagenum+b])),c):null},getboundrows:function(){return this.dataview.cachedrecords},getrowdisplayindex:function(b){for(var d=this.getdisplayrows(),c=0;c<
d.length;c++)if(d[c])if(void 0!==d[c].dataindex){if(d[c].dataindex==b)return d[c].visibleindex}else if(d[c].boundindex==b)return d[c].visibleindex;return-1},getboundindex:function(b){var d=b.boundindex;this.groupable&&0<this.groups.length&&this.pageable&&b.bounddata&&(d=this.getrowboundindexbyid(b.bounddata.uid));0<this.dataview.filters.length&&(b.bounddata?void 0!==b.bounddata.dataindex&&(d=b.bounddata.dataindex):void 0!==b.dataindex&&(d=b.dataindex));return d},getrowboundindex:function(b){return(b=
this.getdisplayrows()[b])?void 0!==b.dataindex?b.dataindex:b.boundindex:-1},getdisplayrows:function(){return this.dataview.loadedrecords},getloadedrows:function(){return this.getdisplayrows()},getvisiblerowdata:function(b){var d=this.getvisiblerows();return d?d[b]:null},getloadedrowdata:function(b){var d=this.getloadedrows();return d?d[b]:null},getvisiblerows:function(){if(this.virtualmode)return this.dataview.loadedrecords;if(this.pageable){for(var b=[],d=0;d<this.dataview.pagesize;d++){var c=this.dataview.loadedrecords[d+
this.dataview.pagesize*this.dataview.pagenum];if(void 0==c)break;b.push(c)}return b}if(void 0!=this._startboundindex&&void 0!=this._endboundindex){b=[];for(d=this._startvisibleindex;d<=this._endvisibleindex;d++){c=this.dataview.loadedrecords[d];if(void 0==c)break;b.push(c)}return b}return this.dataview.loadedrecords},getrowid:function(b){void 0==b&&(b=0);if(this.virtualmode){var d=this.getrowvisibleindex(b);if(d=this.dataview.loadedrecords[d])return d.uid}else if(d=0<this.dataview.filters.length,
0<=b&&b<this.dataview.bounditems.length&&!d&&(d=this.getrowvisibleindex(b),d=this.dataview.loadedrecords[d])||0<this.dataview.filters.length&&(d=this.getboundrows()[b])&&null!=d.uid)return d.uid;return null},_updateGridData:function(b){var d=!1;this.filterable&&this._initfilterpanel&&this.dataview.filters.length&&(d=!0);d?(this.dataview.refresh(),"updaterow"==b?(this._render(!0,!0,!1,!1,!1),this.invalidate()):this.render()):this.sortcolumn||this.groupable&&0<this.groups.length?(this.dataview.reloaddata(),
this.render()):("updaterow"===b&&(this.dataview.refresh(),this._render(!0,!0,!1,!1,!1)),this._cellscache=[],this._pagescache=[],this._renderrows(this.virtualsizeinfo));this.showfilterrow&&this.filterable&&this.filterrow&&this._updatelistfilters(!0)},updaterow:function(b,d,f){if(void 0!=b&&void 0!=d){var h=this.that,l=!1;h._datachanged=!0;var q=function(b,d,e){if(b._loading)throw Error("jqxGrid: "+b.loadingerrormessage);var g=!1;c.isArray(d)?(c.each(d,function(d,c){g=b.dataview.updaterow(this,e[d],
!1)}),b._cellscache=[],b._pagescache=[],b.dataview.refresh()):g=b.dataview.updaterow(d,e);var h=b.vScrollInstance.value;if(void 0==f||1==f)void 0!=b._updating&&0!=b._updating||b._updateGridData("updaterow");b.showaggregates&&b._updatecolumnsaggregates&&b._updatecolumnsaggregates();if(b.source&&b.source._knockoutdatasource&&!b._updateFromAdapter&&b.autokoupdates&&b.source._source._localdata){var l=b.dataview.recordsbyid["id"+d],q=b.dataview.records.indexOf(l),q=b.source._source._localdata()[q];b.source.suspendKO=
!0;b.source._source._localdata.replace(q,c.extend({},l));b.source.suspendKO=!1}b.source&&b.source._source.localdata&&"observableArray"===b.source._source.localdata.name&&!b.source._source.localdata._updating&&(b.source._source.localdata._updating=!0,d=b.getrowboundindexbyid(d),b.source._source.localdata.set(d,e),b.source._source.localdata._updating=!1);b.vScrollInstance.setPosition(h);return g};if(this.source.updaterow){var r=function(c){1==c||void 0==c?q(h,b,d):l=!1};try{l=this.source.updaterow(b,
d,r),void 0==l&&(l=!0)}catch(t){l=!1}}else l=q(h,b,d);return l}return!1},deleterow:function(b,d){if(void 0!=b){this._datachanged=!0;var f=!1,h=this.that,l=this.getrowboundindexbyid(b),q=[];if(void 0!=l&&(0<=this.selectedrowindexes.indexOf(l)&&this.selectedrowindexes.splice(this.selectedrowindexes.indexOf(l),1),this.selectedrowindex==l&&(this.selectedrowindex=-1),!this.virtualmode))if(0<=h.selectionmode.indexOf("row"))c.each(this.selectedrowindexes,function(){var b=h.getrowid(this);q.push(b)}),this.selectedrowindexes=
[],this.selectedrowindex=-1;else if(0<=h.selectionmode.indexOf("cell"))for(var r in h.selectedcells){var t=h.selectedcells[r],w=h.getrowid(t.rowindex);t.rowid=w}var z=function(b,e){if(b._loading)throw Error("jqxGrid: "+b.loadingerrormessage);var f=!1,h=b.vScrollInstance.value;c.isArray(e)?(c.each(e,function(){f=b.dataview.deleterow(this,!1)}),b._cellscache=[],b._pagescache=[],b.dataview.refresh()):f=b.dataview.deleterow(e);if(!b.virtualmode)if(0<=b.selectionmode.indexOf("row"))c.each(q,function(){var d=
b.getrowboundindexbyid(this);-1!=d&&b.selectrow(d,!1)});else{var r=[],t;for(t in b.selectedcells){var w=b.selectedcells[t],z=b.getrowboundindexbyid(w.rowid);-1!=z&&(w.rowindex=z,r[z+"_"+w.datafield]=w)}b.selectedcells=r}if(void 0==b._updating||0==b._updating)void 0!=d&&1!=d||setTimeout(function(){b._render(!0,!0,!1,!1);"visible"!=b.vScrollBar.css("visibility")&&(b._arrange(),b._updatecolumnwidths(),b._updatecellwidths(),b._renderrows(b.virtualsizeinfo))});b.source&&b.source._knockoutdatasource&&!b._updateFromAdapter&&
b.autokoupdates&&b.source._source._localdata&&(b.source.suspendKO=!0,b.source._source._localdata.pop(rowdata),b.source.suspendKO=!1);b.source&&b.source._source.localdata&&"observableArray"===b.source._source.localdata.name&&!b.source._source.localdata._updating&&(b.source._source.localdata._updating=!0,b.source._source.localdata.splice(l,1),b.source._source.localdata._updating=!1);b.dataview.sortby&&(r=b.getsortinformation(),r.sortcolumn&&(b.dataview.clearsortdata(),b.dataview.sortby(r.sortcolumn,
r.sortdirection?r.sortdirection.ascending:null)));b.vScrollInstance.setPosition(h);return f};if(this.source.deleterow){r=function(d){1!=d&&void 0!=d||z(h,b)};try{this.source.deleterow(b,r),void 0==f&&(f=!0)}catch(B){f=!1}}else f=z(h,b);return f}return!1},addrow:function(b,d,f){if(void 0!=d){this._datachanged=!0;void 0==f&&(f="last");var h=!1,l=this.that;if(null==b){var q=this.dataview.filters&&0<this.dataview.filters.length?this.dataview.cachedrecords.length:this.dataview.totalrecords;if(c.isArray(d)){var r=
[];c.each(d,function(b,e){var c=l.dataview.getid(l.dataview.source.id,d[b],q+b);r.push(c)});b=r}else for(b=this.dataview.getid(this.dataview.source.id,d,q);null!=this.dataview.recordsbyid["id"+b];)b++}var t=function(b,d,e,g){if(b._loading)throw Error("jqxGrid: "+b.loadingerrormessage);var f=b.vScrollInstance.value,h=!1;c.isArray(e)?(c.each(e,function(e,c){void 0!=this.dataindex&&delete this.dataindex;var f=null;null!=d&&null!=d[e]&&(f=d[e]);h=b.dataview.addrow(f,this,g,!1)}),b._cellscache=[],b._pagescache=
[],b.dataview.refresh()):(void 0!=e&&void 0!=e.dataindex&&delete e.dataindex,h=b.dataview.addrow(d,e,g));if(void 0==b._updating||0==b._updating)b._render(!0,!0,!1,!1),b.invalidate();b.source&&b.source._knockoutdatasource&&!b._updateFromAdapter&&b.autokoupdates&&b.source._source._localdata&&(b.source.suspendKO=!0,b.source._source._localdata.push(e),b.source.suspendKO=!1);if(b.source&&b.source._source.localdata&&"observableArray"===b.source._source.localdata.name&&!b.source._source.localdata._updating){b.source._source.localdata._updating=
!0;var l=b.getrowboundindexbyid(d);b.source._source.localdata.set(l,e);b.source._source.localdata._updating=!1}"deferred"!=b.scrollmode?b.vScrollInstance.setPosition(f):b.vScrollInstance.setPosition(0);return h};if(this.source.addrow){var w=function(c,h){if(1==c||void 0==c)void 0!=h&&(b=h),t(l,b,d,f)};try{h=this.source.addrow(b,d,f,w),void 0==h&&(h=!0)}catch(z){h=!1}if(0==h)return!1}else t(this,b,d,f);return h}return!1},_findvisiblerow:function(b,d){void 0==b&&(b=parseInt(this.vScrollInstance.value));
var c=0;if(void 0==d||null==d)d=this.rows.records;for(var h=d.length;c<=h;){mid=parseInt((c+h)/2);var l=d[mid];if(void 0==l)break;if(l.top>b&&l.top+l.height>b)h=mid-1;else if(l.top<b&&l.top+l.height<b)c=mid+1;else return mid}return-1},_updatecellwidths:function(){var b=this.virtualsizeinfo;if(b){var d=this.that;if(void 0!=d.gridcontent){void 0==d.table&&(d.table=d.gridcontent.find("#contenttable"+d.element.id));var c=d.groupable&&0<d.groups.length,h=0,b=b.visiblerecords;d.pageable&&(d.autoheight||
d.autorowheight)&&(b=d.dataview.pagesize,d.groupable&&(d.dataview.updateview(),b=d.dataview.rows.length));d.groupable||d.pageable||!d.autoheight&&!d.autorowheight||(b=d.dataview.totalrecords);d.rowdetails&&(b+=d.dataview.pagesize);if(d.columns.records){for(var l=d.columns.records.length,q=d.table[0].rows,r=0;r<b;r++){var t=q[r];if(!t)break;for(var t=t.cells,w=0,z=0;z<l;z++){var B=d.columns.records[z],v=B.width,y=t[z];parseInt(y.style.left)!=w&&(y.style.left=w+"px");parseInt(y.style.width)!=v&&(y.style.width=
v+"px");B.hidden&&B.hideable?y.style.display="none":w+=parseFloat(v)}0==h&&(d.table.width(parseFloat(w)+2),h=w)}d.showaggregates&&d._updateaggregates&&d._updateaggregates();d.showfilterrow&&d.filterable&&d._updatefilterrowui&&d._updatefilterrowui();d.showeverpresentrow&&d._updateaddnewrowui();d._updatescrollbarsafterrowsprerender();c&&d._renderrows(d.virtualsizeinfo)}}}},_updatescrollbarsafterrowsprerender:function(){var b=this.that,d=b.hScrollBar[0].style.visibility,c=0,h=b.vScrollBar[0].style.visibility;
"visible"==h&&(c=b.scrollbarsize+3);0==b.scrollbarsize&&(c=0);b.scrollbarautoshow&&(c=0);var l=b.element.style.width,l=0<=l.toString().indexOf("%")?b.host.width():parseInt(l);parseInt(b.table[0].style.width)-2>l-c?("visible"!=d&&(b.autowidth||(b.hScrollBar[0].style.visibility="visible"),b._arrange()),"visible"==h?"deferred"==b.scrollmode||b.virtualmode?b._updatevscrollbarmax():b.virtualsizeinfo&&(h=b.virtualsizeinfo.virtualheight-b._gettableheight(),!isNaN(h)&&0<h&&("hidden"!=d?b.vScrollBar.jqxScrollBar("max",
h+b.scrollbarsize+4):b.vScrollBar.jqxScrollBar("max",h))):c=-2,b.hScrollBar.jqxScrollBar("max",c+b.table.width()-b.host.width())):"hidden"!=d&&(b.hScrollBar.css("visibility","hidden"),b._arrange());b._renderhorizontalscroll()},_prerenderrows:function(b){var d=this.that;if(1==d.prerenderrequired&&(d.prerenderrequired=!1,d.editable&&d._destroyeditors&&d._destroyeditors(),void 0!=d.gridcontent)){d.gridcontent.find("#contenttable"+d.element.id).remove();null!=d.table&&(d.table.remove(),d.table=null);
d.table=c('<div id="contenttable'+d.element.id+'" style="overflow: hidden; position: relative;"></div>');d.gridcontent.addClass(d.toTP("jqx-grid-content"));d.gridcontent.addClass(d.toTP("jqx-widget-content"));d.gridcontent.append(d.table);var f=d.groupable&&0<d.groups.length,h=0;d.table[0].rows=[];var l=d.toTP("jqx-grid-cell");f&&(l=" "+d.toTP("jqx-grid-group-cell"));b=b.visiblerecords;d.pageable&&(d.autoheight||d.autorowheight)&&(b=d.dataview.pagesize,d.groupable&&(d.dataview.updateview(),b=d.dataview.rows.length,
b<d.dataview.pagesize&&(b=d.dataview.pagesize)));d.pageable||!d.autoheight&&!d.autorowheight||(b=d.dataview.totalrecords);d.groupable&&0<d.groups.length&&(d.autoheight||d.autorowheight)&&!d.pageable&&(b=d.dataview.rows.length);d.rowdetails&&(b=d.autoheight||d.autorowheight?b+d.dataview.pagesize:b+b);if(d.columns.records){f=d.columns.records.length;c.jqx.browser.msie&&8<c.jqx.browser.version&&d.table.css("opacity","0.99");-1!=navigator.userAgent.indexOf("Safari")&&d.table.css("opacity","0.99");var q=
c.jqx.browser.msie&&8>c.jqx.browser.version;q&&d.host.attr("hideFocus","true");var r=d.tableZIndex;b*f>r&&(r=b*f);d.isTouchDevice();var t="";d._hiddencolumns=!1;for(var w=5+d.columns.records.length,z=0;z<b;z++){var B='<div role="row" style="position: relative; height:'+d.rowsheight+'px;" id="row'+z+d.element.id+'">';q&&(B='<div role="row" style="position: relative; z-index: '+r+"; height:"+d.rowsheight+'px;" id="row'+z+d.element.id+'">',r--);for(var v=0,y=0;y<f;y++){var C=d.columns.records[y],D=C.width;
D<C.minwidth&&(D=C.minwidth);D>C.maxwidth&&(D=C.maxwidth);if(d.rtl){var E='<div role="gridcell" style="left: '+v+"px; z-index: "+(r-f+2*y)+"; width:"+D+"px;";r--}else E='<div role="gridcell" style="left: '+v+"px; z-index: "+r--+"; width:"+D+"px;";C.hidden&&C.hideable?(E+="display: none;",d._hiddencolumns=!0,r++):v+=D;0===z&&0===y&&(E+='" tabindex="'+w+'"');E+='" class="'+l+'">';C=this._defaultcellsrenderer("",C);E+=C;E+="</div>";B+=E}0==h&&(d.table.width(parseInt(v)+2),h=v);B+="</div>";t+=B}d.WinJS?
MSApp.execUnsafeLocalFunction(function(){d.table.html(t)}):d.table[0].innerHTML=t;d.table[0].rows=[];h=d.table.children();for(z=0;z<b;z++)for(q=h[z],d.table[0].rows.push(q),q.cells=[],w=c(q).children(),y=0;y<f;y++)q.cells.push(w[y]);if(0==b){v=0;d.showemptyrow&&(B=c('<div style="position: relative;" id="row0'+d.element.id+'"></div>'),d.table.append(B),B.height(d.rowsheight),d.table[0].rows[0]=B[0],d.table[0].rows[0].cells=[]);for(y=0;y<f;y++)C=d.columns.records[y],D=C.width,d.showemptyrow&&(E=c('<div style="position: absolute; height: 100%; left: '+
v+"px; z-index: "+r--+"; width:"+D+'px;" class="'+l+'"></div>'),E.height(d.rowsheight),B.append(E),d.table[0].rows[0].cells[y]=E[0]),D<C.minwidth&&(D=C.minwidth),D>C.maxwidth&&(D=C.maxwidth),C.hidden&&C.hideable||(v+=D);d.table.width(parseInt(v)+2);h=v}d._updatescrollbarsafterrowsprerender();d.rendered&&d.rendered("rows");d.toCompile=[];d._addoverlayelement()}}},_groupsheader:function(){return this.groupable&&this.showgroupsheader},_arrange:function(){var b=null,d=null;this.tableheight=null;var c=
this.that,h=!1,l=!1;null!=c.width&&-1!=c.width.toString().indexOf("px")?b=c.width:void 0==c.width||isNaN(c.width)||(b=c.width);null!=c.width&&-1!=c.width.toString().indexOf("%")&&(b=c.width,h=!0);c.scrollbarautoshow&&(c.vScrollBar[0].style.display="none",c.hScrollBar[0].style.display="none",c.vScrollBar[0].style.zIndex=c.tableZIndex+c.headerZIndex,c.hScrollBar[0].style.zIndex=c.tableZIndex+c.headerZIndex);if(c.autowidth){for(var q=b=0;q<c.columns.records.length;q++){var r=c.columns.records[q].width;
"auto"==r&&(r=c._measureElementWidth(c.columns.records[q].text));b+=r}"hidden"!=c.vScrollBar.css("visibility")&&(b+=c.scrollbarsize+4);c.width=b}null!=c.height&&-1!=c.height.toString().indexOf("px")?d=c.height:void 0==c.height||isNaN(c.height)||(d=c.height);null!=c.height&&-1!=c.height.toString().indexOf("%")&&(d=c.height,l=!0);q=function(){var b=0,d=c.showheader?null!=c.columnsheader?c.columnsheader.height()+2:0:0,b=b+d;c.pageable&&(b+=c.pagerheight);c._groupsheader()&&(b+=c.groupsheaderheight);
c.showtoolbar&&(b+=c.toolbarheight);c.showstatusbar&&(b+=c.statusbarheight);c.showeverpresentrow&&"bottom"===c.everpresentrowposition&&(b+=c.everpresentrowheight);"visible"==c.hScrollBar[0].style.visibility&&(b+=15);return b};c.autoheight&&c.virtualsizeinfo?c.pageable&&c.gotopage?(d=0+(c._pageviews[0]?c._pageviews[0].height:0),d+=q(),c.showemptyrow&&0==c.dataview.totalrecords&&(d+=c.rowsheight)):(d=c.host.height()-c._gettableheight(),0<c._pageviews.length?(d=d+c._pageviews[c._pageviews.length-1].height+
c._pageviews[c._pageviews.length-1].top,c.vScrollBar[0].style.visibility="hidden"):(d=q(),c.showemptyrow&&(d+=c.rowsheight))):c.autoheight&&(d=c.dataview.totalrecords*c.rowsheight,c.pageable&&c.gotopage&&(d=c.pagesize*c.rowsheight),c._loading&&(d=250,c.dataloadelement.height(d)),d+=q(),1E4<d&&(d=1E4));null!=b?(b=parseInt(b),h?c.element.style.width=c.width:c.element.style.width!=parseInt(c.width)+"px"&&(c.element.style.width=parseInt(c.width)+"px"),h&&(b=c.host.width(),2>=b&&(b=600,c.host.width(b)),
c._oldWidth||(c._oldWidth=b))):c.host.width(250);null!=d?(l||(d=parseInt(d)),l?c.element.style.height=c.height:c.element.style.height!=parseInt(d)+"px"&&(c.element.style.height=parseInt(d)+"px"),l&&!c.autoheight&&(d=c.host.height(),0==d&&(d=400,c.host.height(d)),c._oldHeight||(c._oldHeight=d))):c.host.height(250);c.autoheight&&(c.tableheight=null,c._gettableheight());h=0;c.showtoolbar?(c.toolbar.width(b),c.toolbar.height(c.toolbarheight-1),c.toolbar.css("top",0),h+=c.toolbarheight,d-=parseInt(c.toolbarheight)):
c.toolbar[0].style.height="0px";c.showstatusbar?(c.showaggregates?c.statusbar.width(c.table?Math.max(b,c.table.width()):b):c.statusbar.width(b),c.statusbar.height(c.statusbarheight)):c.statusbar[0].style.height="0px";c.showeverpresentrow&&"bottom"===c.everpresentrowposition?(c.addnewrow.width(b),c.addnewrow.height(c.everpresentrowheight)):c.addnewrow[0].style.height="0px";c._groupsheader()?(c.groupsheader.width(b),c.groupsheader.height(c.groupsheaderheight),c.groupsheader.css("top",h),l=c.groupsheader.height()+
1,h+=l,d>l&&(d-=parseInt(l))):(c.groupsheader[0].style.width!=b+"px"&&(c.groupsheader[0].style.width=parseInt(b)+"px"),c.groupsheader[0].style.height="0px",c.groupsheader[0].style.top!=h+"px"&&c.groupsheader.css("top",h),l=c.showgroupsheader&&c.groupable?c.groupsheaderheight:0,c.content[0].style.top!=h+l+"px"&&c.content.css("top",h+c.groupsheaderheight));var t=c.scrollbarsize;isNaN(t)&&(t=parseInt(t),t=isNaN(t)?"17px":t+"px");t=parseInt(t);r=2;l=0;"visible"==c.vScrollBar[0].style.visibility&&(l=t+
4);"visible"==c.hScrollBar[0].style.visibility&&(r=t+4+2);0==t&&(r=l=0);q=0;c.pageable&&(q=c.pagerheight,r+=c.pagerheight);c.showstatusbar&&(r+=c.statusbarheight,q+=c.statusbarheight);c.showeverpresentrow&&"bottom"===c.everpresentrowposition&&(r+=c.everpresentrowheight,q+=c.everpresentrowheight);c.hScrollBar[0].style.height!=t+"px"&&(c.hScrollBar[0].style.height=parseInt(t)+"px");c.hScrollBar[0].style.top==h+d-4-t-q+"px"&&"0px"==c.hScrollBar[0].style.left||c.hScrollBar.css({top:h+d-4-t-q+"px",left:"0px"});
var w=c.hScrollBar[0].style.width,z=!1,B=!1;0==l?w!=b-2+"px"&&(c.hScrollBar.width(b-2),z=!0):w!=b-t-4+"px"&&(c.hScrollBar.width(b-t-4+"px"),z=!0);c.autoheight||(c.vScrollBar[0].style.width!=t+"px"&&(c.vScrollBar.width(t),B=!0),c.vScrollBar[0].style.height!=parseInt(d)-r+"px"&&(c.vScrollBar.height(parseInt(d)-r+"px"),B=!0),c.vScrollBar[0].style.left==parseInt(b)-parseInt(t)-4+"px"&&c.vScrollBar[0].style.top==h+"px"||c.vScrollBar.css({left:parseInt(b)-parseInt(t)-4+"px",top:h}));c.rtl&&(c.vScrollBar.css({left:"0px",
top:h}),"hidden"!=c.vScrollBar.css("visibility")&&c.hScrollBar.css({left:t+2}));w=c.vScrollInstance;w.disabled=c.disabled;c.autoheight||B&&w.refresh();B=c.hScrollInstance;B.disabled=c.disabled;z&&B.refresh();c.autowidth&&(c.hScrollBar[0].style.visibility="hidden");c.statusbarheight=parseInt(c.statusbarheight);c.toolbarheight=parseInt(c.toolbarheight);z=function(b){if("visible"==b.vScrollBar[0].style.visibility&&"visible"==b.hScrollBar[0].style.visibility){b.bottomRight[0].style.visibility="visible";
b.bottomRight.css({left:1+parseInt(b.vScrollBar.css("left")),top:parseInt(b.hScrollBar.css("top"))});b.rtl&&b.bottomRight.css("left","0px");b.bottomRight.width(parseInt(t)+3);b.bottomRight.height(parseInt(t)+4);var d=b.showeverpresentrow&&"bottom"==b.everpresentrowposition?b.everpresentrowheight:0;0<d&&!b.showaggregates&&(b.bottomRight.css("z-index",99),b.bottomRight.height(parseInt(t)+4+d),b.bottomRight.css({top:parseInt(b.hScrollBar.css("top"))-d}));b.showaggregates&&(b.bottomRight.css("z-index",
99),b.bottomRight.height(parseInt(t)+4+b.statusbarheight+d),b.bottomRight.css({top:parseInt(b.hScrollBar.css("top"))-b.statusbarheight-d}))}else b.bottomRight[0].style.visibility="hidden"};z(this);c.content[0].style.width!=b-l+"px"&&c.content.width(b-l);c.content[0].style.height!=d-r+3+"px"&&c.content.height(d-r+3);c.scrollbarautoshow&&(c.content[0].style.width!=b+"px"&&c.content.width(b),c.content[0].style.height!=d+"px"&&c.content.height(d));c.content[0].style.top!=h+"px"&&c.content.css("top",h);
c.rtl&&(c.content.css("left",l),c.scrollbarautoshow&&c.content.css("left","0px"),c.table&&(r=c.table.width(),r<b-l&&c.content.css("left",b-r)));c.showstatusbar&&(c.statusbar.css("top",h+d-c.statusbarheight-(c.pageable?c.pagerheight:0)),c.showaggregates&&("visible"==c.hScrollBar.css("visibility")&&(c.hScrollBar.css({top:h+d-4-t-q+c.statusbarheight+"px"}),c.statusbar.css("top",1+h+d-t-5-c.statusbarheight-(c.pageable?c.pagerheight:0))),z(this)),c.rtl&&("visible"!=c.hScrollBar.css("visibility")?c.statusbar.css("left",
c.content.css("left")):c.statusbar.css("left","0px")));c.showeverpresentrow&&"bottom"===c.everpresentrowposition&&(c.addnewrow.css("top",h+d-(c.showstatusbar?c.statusbarheight:0)-(c.pageable?c.pagerheight:0)-c.everpresentrowheight),c.rtl&&("visible"!=c.hScrollBar.css("visibility")?c.addnewrow.css("left",c.content.css("left")):c.addnewrow.css("left","0px")));c.pageable?(c.pager.width(b),c.pager.height(c.pagerheight),c.pager.css("top",h+d-c.pagerheight-1)):c.pager[0].style.height="0px";null!=c.table&&
(h=-2,"visible"==c.vScrollBar[0].style.visibility&&(h=c.scrollbarsize+3),"visible"==c.hScrollBar[0].style.visibility&&(h=h+c.table.width()-c.host.width(),0<=h&&c.hScrollBar.jqxScrollBar("max",h),"visible"==c.hScrollBar[0].style.visibility&&0==h&&(c.hScrollBar[0].style.visibility="hidden",c._arrange())));b!=parseInt(c.dataloadelement[0].style.width)&&(c.dataloadelement[0].style.width=c.element.style.width);d!=parseInt(c.dataloadelement[0].style.height)&&(c.dataloadelement[0].style.height=c.element.style.height);
this.pagergotoinput&&(this.pagergotoinput.offset().top!==this.pagergoto.offset().top?(this.pagergotoinput.css("visibility","hidden"),this.pagergoto.css("visibility","hidden")):(this.pagergotoinput.css("visibility","inherit"),this.pagergoto.css("visibility","inherit")));c._hostwidth=b},destroy:function(){delete c.jqx.dataFormat.datescache;delete this.gridlocalization;c.jqx.utilities.resize(this.host,null,!0);(""!=document.referrer||window.frameElement)&&null!=window.top&&window.top!=window.self&&this.removeHandler(c(window.top.document),
"mouseup.grid"+this.element.id);if(this.table&&this.table[0]){for(var b=this.table[0].rows.length,d=0;d<b;d++){for(var f=this.table[0].rows[d],h=f.cells.length,l=0;l<h;l++)c(f.cells[l]).remove(),f.cells[l]=null,delete f.cells[l];f.cells=null;f.cells&&delete f.cells;c(this.table[0].rows[d]).remove();this.table[0].rows[d]=null}try{delete this.table[0].rows}catch(q){}this.table.remove();delete this.table}if(this.columns&&this.columns.records){for(d=0;d<this.columns.records.length;d++)b=this.columns.records[d],
b.addnewrowwidget&&b.destroyeverpresentrowwidget&&b.destroyeverpresentrowwidget(b.addnewrowwidget),this._removecolumnhandlers(this.columns.records[d]),b.element&&(c(b.element).remove(),c(b.sortasc).remove(),c(b.sortdesc).remove(),c(b.filtericon).remove(),c(b.menu).remove(),b.element=null,b.uielement=null,b.sortasc=null,b.sortdesc=null,b.filtericon=null,b.menu=null,delete b.element,delete b.uielement,delete b.sortasc,delete b.sortdesc,delete b.filtericon,delete b.menu,delete this.columnsrow[0].cells[d]);
try{delete this.columnsrow[0].cells}catch(q){}delete this.columnsrow}c.removeData(document.body,"contextmenu"+this.element.id);this.host.jqxDropDownList&&this._destroyfilterpanel&&this._destroyfilterpanel();this.editable&&this._destroyeditors&&this._destroyeditors();this.filterable&&this._destroyedfilters&&this.showfilterrow&&this._destroyedfilters();this.host.jqxMenu&&this.gridmenu&&(this.removeHandler(c(document),"click.menu"+this.element.id),this.removeHandler(this.gridmenu,"keydown"),this.removeHandler(this.gridmenu,
"closed"),this.removeHandler(this.gridmenu,"itemclick"),this.gridmenu.jqxMenu("destroy"),this.gridmenu=null);this.pagershowrowscombo&&(this.pagershowrowscombo.jqxDropDownList("destroy"),this.pagershowrowscombo=null);this.pagerrightbutton&&(this.removeHandler(this.pagerrightbutton,"mousedown"),this.removeHandler(this.pagerrightbutton,"mouseup"),this.removeHandler(this.pagerrightbutton,"click"),this.pagerrightbutton.jqxButton("destroy"),this.pagerrightbutton=null);this.pagerleftbutton&&(this.removeHandler(this.pagerleftbutton,
"mousedown"),this.removeHandler(this.pagerleftbutton,"mouseup"),this.removeHandler(this.pagerleftbutton,"click"),this.pagerleftbutton.jqxButton("destroy"),this.removeHandler(c(document),"mouseup.pagerbuttons"+this.element.id),this.pagerleftbutton=null);this.removeHandler(c(document),"selectstart."+this.element.id);this.removeHandler(c(document),"mousedown.resize"+this.element.id);this.removeHandler(c(document),"mouseup.resize"+this.element.id);this.removeHandler(c(document),"mousemove.resize"+this.element.id);
this.isTouchDevice()&&(d=c.jqx.mobile.getTouchEventName("touchmove")+".resize"+this.element.id,b=c.jqx.mobile.getTouchEventName("touchstart")+".resize"+this.element.id,f=c.jqx.mobile.getTouchEventName("touchend")+".resize"+this.element.id,this.removeHandler(c(document),d),this.removeHandler(c(document),b),this.removeHandler(c(document),f));this.removeHandler(c(document),"mousedown.reorder"+this.element.id);this.removeHandler(c(document),"mouseup.reorder"+this.element.id);this.removeHandler(c(document),
"mousemove.reorder"+this.element.id);this.isTouchDevice()&&(d=c.jqx.mobile.getTouchEventName("touchmove")+".reorder"+this.element.id,b=c.jqx.mobile.getTouchEventName("touchstart")+".reorder"+this.element.id,f=c.jqx.mobile.getTouchEventName("touchend")+".reorder"+this.element.id,this.removeHandler(c(document),d),this.removeHandler(c(document),b),this.removeHandler(c(document),f));this.removeHandler(c(window),"resize."+this.element.id);this.resizeline&&this.resizeline.remove();this.resizestartline&&
this.resizestartline.remove();this.groupable&&(d="mousemove.grouping"+this.element.id,b="mousedown.grouping"+this.element.id,f="mouseup.grouping"+this.element.id,this.removeHandler(c(document),d),this.removeHandler(c(document),b),this.removeHandler(c(document),f));this.columnsreorder&&(d="mousemove.reorder"+this.element.id,b="mousedown.reorder"+this.element.id,f="mouseup.reorder"+this.element.id,this.removeHandler(c(document),d),this.removeHandler(c(document),b),this.removeHandler(c(document),f),
delete this.columnsbounds);this.content&&(this.removeHandler(this.content,"mousedown"),this.removeHandler(this.content,"scroll"));this._removeHandlers();this.hScrollInstance.destroy();this.vScrollInstance.destroy();this.hScrollBar.remove();this.vScrollBar.remove();this._clearcaches();delete this.hScrollInstance;delete this.vScrollInstance;delete this.visiblerows;delete this.hittestinfo;delete this.rows;delete this.columns;delete this.columnsbydatafield;delete this.pagescache;delete this.pageviews;
delete this.cellscache;delete this.heights;delete this.hiddens;delete this.hiddenboundrows;delete this.heightboundrows;delete this.detailboundrows;delete this.details;delete this.expandedgroups;delete this._rowdetailscache;delete this._rowdetailselementscache;delete this.columnsmenu;this.columnsheader&&(this.columnsheader.remove(),delete this.columnsheader);this.selectionarea&&(this.selectionarea.remove(),delete this.selectionarea);if(this.menuitemsarray&&this.menuitemsarray.length)for(b=this.menuitemsarray.length,
d=0;d<b;d++)c(this.menuitemsarray[d]).remove();delete this.menuitemsarray;this.dataview._clearcaches();this.content.removeClass();this.content.remove();this.content=null;delete this.content;this.hScrollBar=this.vScrollBar=null;delete this.hScrollBar;delete this.hScrollBar;this.gridcontent&&(this.gridcontent.remove(),delete this.gridcontent);this.gridmenu&&(this.gridmenu=null,delete this.gridmenu);delete this._mousemovefunc;delete this._mousewheelfunc;this.dataview.destroy();delete this.dataview;this.bottomRight.remove();
delete this.bottomRight;this.wrapper.remove();delete this.wrapper;this.pagerdiv&&(this.pagerdiv.remove(),delete this.pagerdiv);this.pagerpageinput&&(this.pagerpageinput.remove(),delete this.pagerpageinput);this.pagergoto&&(this.pagergoto.remove(),delete this.pagergoto);this.pagershowrows&&(this.pagershowrows.remove(),delete this.pagershowrows);this.pagerfirstbutton&&(this.pagerfirstbutton.remove(),delete this.pagerfirstbutton);this.pagerlastbutton&&(this.pagerlastbutton.remove(),delete this.pagerlastbutton);
this.pagerbuttons&&(this.pagerbuttons.remove(),delete this.pagerbuttons);this.pagerdetails&&(this.pagerdetails.remove(),delete this.pagerdetails);this.pagergotoinput&&(this.pagergotoinput.remove(),delete this.pagergotoinput);this.pager.remove();delete this.pager;this.groupsheader.remove();delete this.groupsheader;this.dataloadelement.remove();delete this.dataloadelement;this.toolbar.remove();delete this.toolbar;this.statusbar.remove();delete this.statusbar;this.host.removeData();this.host.removeClass();
this.host.remove();this.host=null;delete this.host;delete this.element;delete this.set;delete this.get;delete this.that;delete this.call},_initializeColumns:function(){var d=this.source?this.source.datafields:null;null==d&&this.source&&this.source._source&&(d=this.source._source.datafields);var g=d?0<d.length:!1;if(this.autogeneratecolumns){var f=[];if(d)c.each(d,function(){f.push({datafield:this.name,text:this.text||this.name,cellsformat:this.format||""})});else if(0<this.source.records.length)for(obj in d=
this.source.records[0],d)"uid"!=obj&&(d={width:100,datafield:obj,text:obj},f.push(d));this.columns=f}if(this.columns&&this.columns.records)for(d=0;d<this.columns.records.length;d++)this._removecolumnhandlers(this.columns.records[d]);var h=this.that,l=new c.jqx.collection(this.element),q=0;this._haspinned=!1;this._columns?this.columns=this._columns:this._columns=this.columns;this.groupable&&c.each(this.groups,function(d){d=new b(h,this);d.visibleindex=q++;d.width=h.groupindentwidth;l.add(d);d.grouped=
!0;d.filterable=!1;d.sortable=!1;d.editable=!1;d.resizable=!1;d.draggable=!1});this.rowdetails&&this.showrowdetailscolumn&&(d=new b(h,this),d.visibleindex=q++,d.width=h.groupindentwidth,d.pinned=!0,d.editable=!1,d.filterable=!1,d.draggable=!1,d.groupable=!1,d.resizable=!1,l.add(d),h._haspinned=!0);"checkbox"==this.selectionmode&&(d=new b(h,null),d.visibleindex=q++,d.width=h.groupindentwidth,d.checkboxcolumn=!0,d.editable=!1,d.columntype="checkbox",d.groupable=!1,d.draggable=!1,d.filterable=!1,d.resizable=
!1,d.datafield="_checkboxcolumn",l.add(d));var r=[];c.each(this.columns,function(d){if(void 0!=h.columns[d]){var e=new b(h,this);e.visibleindex=q++;void 0!=this.dataField&&(this.datafield=this.dataField);this.pinned&&(h._haspinned=!0);!h.showeverpresentrow||"addButtonColumn"!==this.datafield&&"resetButtonColumn"!==this.datafield&&"updateButtonColumn"!==this.datafield&&"deleteButtonColumn"!==this.datafield||(e.editable=!1,e.groupable=!1,e.draggable=!1,e.filterable=!1,e.resizable=!1,e.menu=!1);if(null==
this.datafield)h.source&&h.source._source&&"array"==h.source._source.datatype&&(g||(h.source._source.datafields||(h.source._source.datafields=[]),h.source._source.datafields.push({name:d.toString()})),this.datafield=d.toString(),this.displayfield=d.toString(),e.datafield=this.datafield,e.displayfield=this.displayfield);else{if(r[this.datafield])throw Error("jqxGrid: Invalid column 'datafield' setting. jqxGrid's columns should be initialized with unique data fields.");r[this.datafield]=!0}l.add(e)}});
this.rtl&&l.records.reverse();this.columns=l},_initializeRows:function(){var b=new c.jqx.collection(this.element);this.rows&&this.rows.clear();this.rows=b},_raiseEvent:function(b,d){void 0==d&&(d={owner:null});if(!1!==this._trigger){var f=this.events[b];this._camelCase||(f=f.toLowerCase());if((2==b||15==b)&&this.showeverpresentrow&&(0<=this.everpresentrowactions.indexOf("delete")||0<=this.everpresentrowactions.indexOf("update"))){if(this.updateeverpresentrow)var h=this;setTimeout(function(){h.updateeverpresentrow()},
50)}args=d;args.owner=this;f=new c.Event(f);f.owner=this;f.args=args;var l=this.host.trigger(f);d=f.args;return l}},wheel:function(b,d){if(d.autoheight&&"visible"!=d.hScrollBar.css("visibility"))return b.returnValue=!0;var c=0;b||(b=window.event);b.originalEvent&&b.originalEvent.wheelDelta&&(b.wheelDelta=b.originalEvent.wheelDelta);b.wheelDelta?c=b.wheelDelta/120:b.detail&&(c=-b.detail/3);if(c){if(c=d._handleDelta(c))b.preventDefault&&b.preventDefault(),null!=b.originalEvent&&(b.originalEvent.mouseHandled=
!0),void 0!=b.stopPropagation&&b.stopPropagation();return c?(c=!1,b.returnValue=c):!1}b.preventDefault&&b.preventDefault();b.returnValue=!1},_handleDelta:function(b){if("hidden"!=this.vScrollBar.css("visibility")){var d=this.vScrollInstance.value;0>b?this.scrollDown():this.scrollUp();b=this.vScrollInstance.value;if(d!=b)return!0}else if("hidden"!=this.hScrollBar.css("visibility")&&(d=this.hScrollInstance.value,0<b?this.hScrollInstance.value>2*this.horizontalscrollbarstep?this.hScrollInstance.setPosition(this.hScrollInstance.value-
2*this.horizontalscrollbarstep):this.hScrollInstance.setPosition(0):this.hScrollInstance.value<this.hScrollInstance.max?this.hScrollInstance.setPosition(this.hScrollInstance.value+2*this.horizontalscrollbarstep):this.hScrollInstance.setPosition(this.hScrollInstance.max),b=this.hScrollInstance.value,d!=b))return!0;return!1},scrollDown:function(){if("hidden"!=this.vScrollBar.css("visibility")){var b=this.vScrollInstance;b.value+this.rowsheight<=b.max?b.setPosition(parseInt(b.value)+this.rowsheight):
b.setPosition(b.max)}},scrollUp:function(){if("hidden"!=this.vScrollBar.css("visibility")){var b=this.vScrollInstance;b.value-this.rowsheight>=b.min?b.setPosition(parseInt(b.value)-this.rowsheight):b.setPosition(b.min)}},_removeHandlers:function(){var b=this.that;b.removeHandler(c(window),"orientationchange.jqxgrid"+b.element.id);b.removeHandler(c(window),"orientationchanged.jqxgrid"+b.element.id);b.removeHandler(b.vScrollBar,"valueChanged");b.removeHandler(b.hScrollBar,"valueChanged");b.vScrollInstance.valueChanged=
null;b.hScrollInstance.valueChanged=null;var d="mousedown.jqxgrid";b.isTouchDevice()&&(d=c.jqx.mobile.getTouchEventName("touchend"));b.removeHandler(b.host,"dblclick.jqxgrid");b.removeHandler(b.host,d);b.removeHandler(b.content,"mousemove",b._mousemovefunc);b.removeHandler(b.host,"mouseleave.jqxgrid");b.removeHandler(b.content,"mouseenter");b.removeHandler(b.content,"mouseleave");b.removeHandler(b.content,"mousedown");b.removeHandler(b.content,"scroll");b.removeHandler(b.content,"selectstart."+b.element.id);
b.removeHandler(b.host,"dragstart."+b.element.id);b.removeHandler(b.host,"keydown.edit"+b.element.id);b.removeHandler(c(document),"keydown.edit"+b.element.id);b.removeHandler(c(document),"keyup.edit"+b.element.id);b._mousemovedocumentfunc&&b.removeHandler(c(document),"mousemove.selection"+b.element.id,b._mousemovedocumentfunc);b.removeHandler(c(document),"mouseup.selection"+b.element.id);b._mousewheelfunc&&b.removeHandler(b.host,"mousewheel",b._mousewheelfunc);b.editable&&b.removeHandler(c(document),
"mousedown.gridedit"+b.element.id);b.host.off&&(b.content.off("mousemove"),b.host.off("mousewheel"))},_addHandlers:function(){var b=this.that,d=b.isTouchDevice();d||b.addHandler(b.host,"dragstart."+b.element.id,function(b){return!1});b.scrollbarautoshow&&(b.addHandler(b.host,"mouseenter.gridscroll"+b.element.id,function(d){b.vScrollBar.fadeIn("fast");b.hScrollBar.fadeIn("fast")}),b.addHandler(b.host,"mouseleave.gridscroll"+b.element.id,function(d){b.vScrollInstance.isScrolling()||b.hScrollInstance.isScrolling()||
(b.vScrollBar.fadeOut("fast"),b.hScrollBar.fadeOut("fast"))}));b.editable&&b.addHandler(c(document),"mousedown.gridedit"+b.element.id,function(d){if(b.editable&&b.begincelledit&&b.editcell&&!b.vScrollInstance.isScrolling()&&!b.vScrollInstance.isScrolling()){var c=b.host.coord(),g=b.host.width(),f=b.host.height(),t=!1,w=!1;if(d.pageY<c.top||d.pageY>c.top+f)w=t=!0;if(d.pageX<c.left||d.pageX>c.left+g)t=!0;if(t){if(b.editcell&&b.editcell.editor)switch(b.editcell.columntype){case "datetimeinput":if(b.editcell.editor.jqxDateTimeInput&&
b.editcell.editor.jqxDateTimeInput("container")&&"block"==b.editcell.editor.jqxDateTimeInput("container")[0].style.display)if(c=b.editcell.editor.jqxDateTimeInput("container").coord().top,g=b.editcell.editor.jqxDateTimeInput("container").coord().top+b.editcell.editor.jqxDateTimeInput("container").height(),w&&(d.pageY<c||d.pageY>g))b.editcell.editor.jqxDateTimeInput("close");else return;break;case "combobox":if(b.editcell.editor.jqxComboBox&&b.editcell.editor.jqxComboBox("container")&&"block"==b.editcell.editor.jqxComboBox("container")[0].style.display)if(c=
b.editcell.editor.jqxComboBox("container").coord().top,g=b.editcell.editor.jqxComboBox("container").coord().top+b.editcell.editor.jqxComboBox("container").height(),w&&(d.pageY<c||d.pageY>g))b.editcell.editor.jqxComboBox("close");else return;break;case "dropdownlist":if(b.editcell.editor.jqxDropDownList&&b.editcell.editor.jqxDropDownList("container")&&"block"==b.editcell.editor.jqxDropDownList("container")[0].style.display)if(c=b.editcell.editor.jqxDropDownList("container").coord().top,g=b.editcell.editor.jqxDropDownList("container").coord().top+
b.editcell.editor.jqxDropDownList("container").height(),w&&(d.pageY<c||d.pageY>g))b.editcell.editor.jqxDropDownList("close");else return;break;case "template":case "custom":for(c=["jqxDropDownList","jqxComboBox","jqxDropDownButton","jqxDateTimeInput"],g=0;g<c.length;g++){f=c[g];t=b.editcell.editor.data();if(t[f]&&t[f].instance.container&&"block"==t[f].instance.container[0].style.display){var f=t[f].instance,t=f.container.coord().top,z=f.container.coord().top+f.container.height();w&&(d.pageY<t||d.pageY>
z)?(f.close(),f=!0):f=!1}else f=void 0;if(0==f)return}}b.endcelledit(b.editcell.row,b.editcell.column,!1,!0);b._oldselectedcell=null}}});b.vScrollInstance.valueChanged=function(c){b.virtualsizeinfo&&(b._closemenu(),b._renderrows(b.virtualsizeinfo),b.currentScrollValue=c.currentValue,b.pageable||b.groupable||!b.dataview.virtualmode||(b.loadondemandupdate&&clearTimeout(b.loadondemandupdate),b.loadondemandupdate=setTimeout(function(){b.loadondemand=!0;b._renderrows(b.virtualsizeinfo)},100)),d&&(b._lastScroll=
new Date))};b.hScrollInstance.valueChanged=function(f){if(b.virtualsizeinfo){b._closemenu();var l=function(){b._renderhorizontalscroll();b._renderrows(b.virtualsizeinfo);b.editcell&&!b.editrow&&b._showcelleditor&&b.editcell.editing&&(b.hScrollInstance.isScrolling()||b._showcelleditor(b.editcell.row,b.getcolumn(b.editcell.column),b.editcell.element,b.editcell.init))};d?l():(void 0==b._browser&&b._isIE10(),navigator&&-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")?
(b._hScrollTimer&&clearTimeout(b._hScrollTimer),b._hScrollTimer=setTimeout(function(){l()},1)):c.jqx.browser.msie?(b._hScrollTimer&&clearTimeout(b._hScrollTimer),b._hScrollTimer=setTimeout(function(){l()},.01)):l());d&&(b._lastScroll=new Date)}};b._mousewheelfunc=b._mousewheelfunc||function(d){if(!b.editcell&&b.enablemousewheel)return b.wheel(d,b),!1};b.removeHandler(b.host,"mousewheel",b._mousewheelfunc);b.addHandler(b.host,"mousewheel",b._mousewheelfunc);var f="mousedown.jqxgrid";d&&(f=c.jqx.mobile.getTouchEventName("touchend"));
b.addHandler(b.host,f,function(d){if(b.isTouchDevice()&&(b._newScroll=new Date,500>b._newScroll-b._lastScroll||c(d.target).ischildof(b.vScrollBar)||c(d.target).ischildof(b.hScrollBar)))return!1;b._mousedown=new Date;var g=b._handlemousedown(d,b);b.isNestedGrid&&(b.resizablecolumn||b.columnsreorder||d.stopPropagation());b._lastmousedown=new Date;return g});d||(b.addHandler(b.host,"dblclick.jqxgrid",function(d){b.editable&&b.begincelledit&&"dblclick"==b.editmode?b._handledblclick(d,b):c.jqx.browser.msie&&
9>c.jqx.browser.version&&b._handlemousedown(d,b);b.mousecaptured=!1;b._lastmousedown=new Date;return!0}),b._mousemovefunc=function(d){if(b._handlemousemove)return b._handlemousemove(d,b)},b.addHandler(b.content,"mousemove",b._mousemovefunc),b._handlemousemoveselection&&(b._mousemovedocumentfunc=function(d){if(b._handlemousemoveselection)return b._handlemousemoveselection(d,b)},b.addHandler(c(document),"mousemove.selection"+b.element.id,b._mousemovedocumentfunc)),b.addHandler(c(document),"mouseup.selection"+
b.element.id,function(d){b._handlemouseupselection&&b._handlemouseupselection(d,b)}));try{""==document.referrer&&!window.frameElement||null==window.top||window.top==window.self||(f=null,window.parent&&document.referrer&&(f=document.referrer),f&&-1!=f.indexOf(document.location.host)&&b.addHandler(c(window.top.document),"mouseup.grid"+b.element.id,function(d){if(b._handlemouseupselection)try{b._handlemouseupselection(d,b)}catch(c){}}))}catch(h){}b.focused=!1;d||(b.addHandler(b.content,"mouseenter",
function(d){b.focused=!0;b.wrapper&&(b.wrapper.attr("tabindex",1),b.content.attr("tabindex",2));b._overlayElement&&(b.vScrollInstance.isScrolling()||b.hScrollInstance.isScrolling()?b._overlayElement[0].style.visibility="visible":b._overlayElement[0].style.visibility="hidden")}),b.addHandler(b.content,"mouseleave",function(d){b._handlemousemove&&b.enablehover&&b._clearhoverstyle();b._overlayElement&&(b._overlayElement[0].style.visibility="hidden");b.focused=!1}),(b.groupable||b.columnsreorder)&&b.addHandler(c(document),
"selectstart."+b.element.id,function(d){if(!0===b.__drag)return!1}),b.addHandler(b.content,"selectstart."+b.element.id,function(d){if(b.enablebrowserselection||b.showfilterrow&&c(d.target).ischildof(b.filterrow)||b.showeverpresentrow&&(c(d.target).ischildof(b.addnewrow)||b.addnewrowtop&&c(d.target).ischildof(b.addnewrowtop))||d.target.className&&0<=d.target.className.indexOf("jqx-grid-widget"))return!0;if(!b.editcell)return!1;d.stopPropagation&&d.stopPropagation()}),b.addHandler(c(document),"keyup.edit"+
b.element.id,function(d){b._keydown=!1}),b.addHandler(c(document),"keydown.edit"+b.element.id,function(d){b._keydown=!b.editcell;var g=d.charCode?d.charCode:d.keyCode?d.keyCode:0;20===g&&(b._capsLock=b._capsLock?!1:!0);if(b.handlekeyboardnavigation&&(b.focused||d.target===b.element||c(d.target).ischildof(b.host))&&1==b.handlekeyboardnavigation(d))return!1;b.editable&&b.editcell&&(13==g||27==g||9==g||32==g)&&b._handleeditkeydown&&(f=b._handleeditkeydown(d,b));27==g&&(b.mousecaptured=!1,"visible"==
b.selectionarea.css("visibility")&&b.selectionarea.css("visibility","hidden"));if(c.jqx.browser.msie&&12>c.jqx.browser.version&&b.focused&&!b.isNestedGrid){if(13==g&&0==f)return f;var f=!0;!b.editcell&&b.editable&&"programmatic"!=b.editmode&&b._handleeditkeydown&&(f=b._handleeditkeydown(d,b));if(f&&b.keyboardnavigation&&b._handlekeydown)return f=b._handlekeydown(d,b),f||(d.preventDefault&&d.preventDefault(),void 0!=d.stopPropagation&&d.stopPropagation()),f}return!0}),b.addHandler(b.host,"keyup.edit"+
b.element.id,function(d){if(9===d.keyCode&&!c(document.activeElement).ischildof(b.filterrow)&&!c(document.activeElement).ischildof(b.pager))switch(b.selectionmode){case "singlecell":case "multiplecells":case "multiplecellsextended":case "multiplecellsadvanced":null===b.getselectedcell()&&b.selectcell(0,b.columns.records[0].displayfield);break;default:-1===b.getselectedrowindex()&&b.selectrow(0)}}),b.addHandler(b.host,"keydown.edit"+b.element.id,function(d){var g=!0;if(b.handlekeyboardnavigation&&
1==b.handlekeyboardnavigation(d))return!1;b.editable&&"programmatic"!=b.editmode&&b._handleeditkeydown&&(g=b._handleeditkeydown(d,b),b.isNestedGrid&&d.stopPropagation());if(!b.editcell&&d.altKey&&!c(document.activeElement).ischildof(b.filterrow)&&!c(document.activeElement).ischildof(b.pager))if(40===d.keyCode){var f=b.getselectedcell();f&&b.openmenu(f.column)}else 38===d.keyCode&&b._closemenu();c.jqx.browser.msie&&8>c.jqx.browser.version?b.isNestedGrid&&g&&b.keyboardnavigation&&b._handlekeydown&&
(g=b._handlekeydown(d,b),d.stopPropagation()):g&&b.keyboardnavigation&&b._handlekeydown&&(g=b._handlekeydown(d,b),b.isNestedGrid&&d.stopPropagation());g||(d.preventDefault&&d.preventDefault(),void 0!=d.stopPropagation&&d.stopPropagation());g&&b.selectedcells&&0<b.selectedcells.length&&9===d.keyCode&&d.shiftKey&&b.table&&b.table[0].rows&&0<b.table[0].rows.length&&(c(document.activeElement).ischildof(b.filterrow)||c(document.activeElement).ischildof(b.pager)||b.table[0].rows[0].cells[0].focus());return g}))},
_hittestrow:function(b,d){if(null!=this.vScrollInstance&&null!=this.hScrollInstance){void 0==d&&0==d;var f=this.hScrollInstance,h=this.vScrollInstance.value;"visible"!=this.vScrollBar.css("visibility")&&(h=0);f=f.value;"visible"!=this.hScrollBar.css("visibility")&&(f=0);"deferred"==this.scrollmode&&null!=this._newmax&&h>this._newmax&&(h=this._newmax);var l=parseInt(h)+d;parseInt(f);if(null!=this.visiblerows&&0!=this.visiblerows.length){h=!1;f=this._findvisiblerow(l,this.visiblerows);if(0<=f){var q=
this.visiblerows[f],l=!q.rowdetailshidden;if(this.rowdetails&&q.rowdetails){var r=this.visiblerows[f-1];r==q&&(q=r,f--);l&&(l=c(this.hittestinfo[f].visualrow).position().top+parseInt(this.table.css("top")),r=c(this.hittestinfo[f].visualrow).height(),d>=l&&d<=l+r||(f++,q=this.visiblerows[f],h=!0))}}return{index:f,row:q,details:h}}}},getcellatposition:function(b,d){var f=this.that,h=this.showheader?this.columnsheader.height()+2:0,l=this._groupsheader()?this.groupsheader.height():0,l=l+(this.showtoolbar?
this.toolbarheight:0),q=this.host.coord();this.hasTransform&&(q=c.jqx.utilities.getOffset(this.host));var r=b-q.left,t=d-h-q.top-l,l=this._hittestrow(r,t),h=l.row,l=this.table[0].rows[l.index];if(this.dataview&&0==this.dataview.records.length){for(var h=this.table[0].rows,w=0,q=0;q<h.length;q++){if(t>=w&&t<w+this.rowsheight){l=h[q];break}w+=this.rowsheight}h={boundindex:q}}if(null==l)return!0;t=this.hScrollInstance.value;for(q=w=0;q<l.cells.length;q++){var z=parseInt(c(this.columnsrow[0].cells[q]).css("left"));
b=z-t;f.columns.records[q].pinned&&(b=z);if(!f.columns.records[q].hidden&&b+c(this.columnsrow[0].cells[q]).width()>=r&&r>=b){w=q;break}}return null!=h?(f=this._getcolumnat(w),{row:this.getboundindex(h),column:f.datafield,value:this.getcellvalue(this.getboundindex(h),f.datafield)}):null},_handlemousedown:function(b,d){if(null==b.target||d.disabled||c(b.target).ischildof(this.columnsheader)||c(b.target).ischildof(this.hScrollBar)||c(b.target).ischildof(this.vScrollBar)||b.target===d.bottomRight[0])return!0;
var f;b.which?f=3==b.which:b.button&&(f=2==b.button);var h;b.which?h=2==b.which:b.button&&(h=1==b.button);if(h||this.showstatusbar&&(c(b.target).ischildof(this.statusbar)||b.target==this.statusbar[0])||this.showtoolbar&&(c(b.target).ischildof(this.toolbar)||b.target==this.toolbar[0])||this.pageable&&(c(b.target).ischildof(this.pager)||b.target==this.pager[0])||!this.columnsheader||!this.editcell&&this.pageable&&c(b.target).ischildof(this.pager))return!0;h=this.showheader?this.columnsheader.height()+
2:0;var l=this._groupsheader()?this.groupsheader.height():0,l=l+(this.showtoolbar?this.toolbarheight:0),q=this.host.coord();if(this.hasTransform){var q=c.jqx.utilities.getOffset(this.host),r=this._getBodyOffset();q.left-=r.left;q.top-=r.top}var t=parseInt(b.pageX),w=parseInt(b.pageY);this.isTouchDevice()&&(r=d.getTouches(b)[0],t=parseInt(r.pageX),w=parseInt(r.pageY),1==d.touchmode&&void 0!=r._pageX&&(t=parseInt(r._pageX),w=parseInt(r._pageY)));r=t-q.left;t=w-h-q.top-l;if(this.pageable&&!this.autoheight&&
this.gotopage&&(h=this.pager.coord().top-q.top-l-h,t>h))return;if((q=this._hittestrow(r,t))&&!q.details){h=q.row;var z=q.index,w=b.target.className,B=this.table[0].rows[z];if(null==B)return d.editable&&d.begincelledit&&d.editcell&&d.endcelledit(d.editcell.row,d.editcell.column,!1,!0),!0;d.mousecaptured=!0;d.mousecaptureposition={left:b.pageX,top:b.pageY-l,clickedrow:B};var l=this.hScrollInstance,v=l.value;this.rtl&&"hidden"!=this.hScrollBar.css("visibility")&&(v=l.max-l.value);var l=-1,y=this.groupable?
this.groups.length:0;this.rtl&&("hidden"!=this.vScrollBar[0].style.visibility&&(v-=this.scrollbarsize+4),"hidden"==this.hScrollBar[0].style.visibility&&(v=-parseInt(this.content.css("left"))));for(var C=0;C<B.cells.length;C++){var D=parseInt(c(this.columnsrow[0].cells[C]).css("left")),t=D-v;d.columns.records[C].pinned&&!d.rtl&&(t=D);D=this._getcolumnat(C);if(null==D||!D.hidden)if(D=t+c(this.columnsrow[0].cells[C]).width(),D>=r&&r>=t){l=C;d.mousecaptureposition.clickedcell=C;break}}if(this.rtl&&this._haspinned)for(C=
B.cells.length-1;0<=C&&d.columns.records[C].pinned;C--)if(t=D=c(this.columnsrow[0].cells[C]).coord().left-this.host.coord().left,D=this._getcolumnat(C),null==D||!D.hidden)if(D=t+c(this.columnsrow[0].cells[C]).width(),D>=r&&r>=t){l=C;d.mousecaptureposition.clickedcell=C;break}if(null!=h&&0<=l){this._raiseEvent(1,{rowindex:this.getboundindex(h),visibleindex:h.visibleindex,row:h,group:h.group,rightclick:f,originalEvent:b});D=this._getcolumnat(l);r=this.getcellvalue(this.getboundindex(h),D.datafield);
this.editable&&this.editcell&&(this._currentEditableColumn=l,D.datafield==this.editcell.column&&this.getboundindex(h)==this.editcell.row&&(this.mousecaptured=!1));this._raiseEvent(8,{rowindex:this.getboundindex(h),column:D?D.getcolumnproperties():null,row:h,visibleindex:h.visibleindex,datafield:D?D.datafield:null,columnindex:l,value:r,rightclick:f,originalEvent:b});if(D.createwidget)return!0;if(this.isTouchDevice())if("checkbox"==D.columntype&&this.editable&&this._overlayElement){if(!this.editcell)return this._overlayElement.css("visibility",
"hidden"),this.editcell=this.getcell(z,D.datafield),!0}else if("button"==D.columntype&&this._overlayElement)return D.buttonclick&&D.buttonclick(B.cells[l].buttonrow,b),!0;t=!1;if(null!=this._lastmousedown&&300>this._mousedown-this._lastmousedown&&this._clickedrowindex==this.getboundindex(h)&&(this._raiseEvent(22,{rowindex:this.getboundindex(h),row:h,visibleindex:h.visibleindex,group:h.group,rightclick:f,originalEvent:b}),this._clickedcolumn==D.datafield&&this._raiseEvent(23,{rowindex:this.getboundindex(h),
row:h,visibleindex:h.visibleindex,column:D?D.getcolumnproperties():null,datafield:D?D.datafield:null,columnindex:l,value:r,rightclick:f,originalEvent:b}),t=!0,this._clickedrowindex=-1,this._clickedcolumn=null,b.isPropagationStopped&&b.isPropagationStopped()))return!1;if(f)return!0;t||(this._clickedrowindex=this.getboundindex(h),this._clickedcolumn=D.datafield);f=c.jqx.utilities.getBrowser();"msie"==f.browser&&7>=parseInt(f.version)&&(0==l&&this.rowdetails&&(w="jqx-grid-group-collapse"),0<y&&l<=y&&
(w="jqx-grid-group-collapse"));if(-1!=w.indexOf("jqx-grid-group-expand")||-1!=w.indexOf("jqx-grid-group-collapse"))this.rtl?0<y&&l>B.cells.length-y-1&&this._togglegroupstate?this._togglegroupstate(h.bounddata,!0):l==B.cells.length-1-y&&this.rowdetails&&this.showrowdetailscolumn&&(this._togglerowdetails(h.bounddata,!0),this.gridcontent[0].scrollTop=0,this.gridcontent[0].scrollLeft=0):0<y&&l<y&&this._togglegroupstate?this._togglegroupstate(h.bounddata,!0):l==y&&this.rowdetails&&this.showrowdetailscolumn&&
(this._togglerowdetails(h.bounddata,!0),this.gridcontent[0].scrollTop=0,this.gridcontent[0].scrollLeft=0);else if(-1!=h.boundindex){t=this.selectedrowindexes.slice(0);f=!1;if("none"!=d.selectionmode&&"checkbox"!=d.selectionmode&&this._selectrowwithmouse){"multiplecellsadvanced"!=d.selectionmode&&"multiplecellsextended"!=d.selectionmode&&"multiplerowsextended"!=d.selectionmode&&"multiplerowsadvanced"!=d.selectionmode||b.ctrlKey||b.shiftKey||b.metaKey||(d.selectedrowindexes=[],d.selectedcells=[]);var E=
!1,r=this.getboundindex(h);if(d._oldselectedrow===r||"none"===d.selectionmode)E=!0;if(-1==d.selectionmode.indexOf("cell")){if("singlerow"!=d.selectionmode||d.selectedrowindex!=r&&"singlerow"==d.selectionmode)this._applyrowselection(r,!0,!1,null,D.datafield),this._selectrowwithmouse(d,q,t,D.datafield,b.ctrlKey||b.metaKey,b.shiftKey)}else null!=D.datafield&&(this._selectrowwithmouse(d,q,t,D.datafield,b.ctrlKey||b.metaKey,b.shiftKey),b.shiftKey||this._applycellselection(r,D.datafield,!0,!1));d._oldselectedcell&&
d._oldselectedcell.datafield==d.selectedcell.datafield&&d._oldselectedcell.rowindex==d.selectedcell.rowindex&&(f=!0);d._oldselectedcell=d.selectedcell;d._oldselectedrow=r}d.autosavestate&&d.savestate&&d.savestate();if(d.editable&&d.begincelledit&&"programmatic"!=d.editmode){if(b.isPropagationStopped&&b.isPropagationStopped())return!1;"selectedrow"==d.editmode?E&&!d.editcell?"checkbox"!==D.columntype&&(this._currentEditableColumn=l,d.beginrowedit(this.getboundindex(h))):d.editcell&&!E&&"none"!=d.selectionmode&&
d.endrowedit(d.editcell.row):(r=this.getboundindex(h),E="click"==d.editmode||f&&"selectedcell"==d.editmode,-1==d.selectionmode.indexOf("cell")&&"dblclick"!=d.editmode&&(E=!0),E&&void 0!=h.boundindex&&D.editable&&(d.begincelledit(this.getboundindex(h),D.datafield,D.defaulteditorvalue),-1!=d.selectionmode.indexOf("cell")&&d._applycellselection(r,D.datafield,!1,!1)),-1!=d.selectionmode.indexOf("cell")&&"selectedcell"==d.editmode&&!f&&d.editcell&&d.endcelledit(d.editcell.row,d.editcell.column,!1,!0),
"dblclick"!=d.editmode||f||!d.editcell||d.editcell.row==r&&D.datafield==d.editcell.column||d.endcelledit(d.editcell.row,d.editcell.column,!1,!0))}}}return!0}},_columnPropertyChanged:function(b,d,c,h){},_rowPropertyChanged:function(b,d,c,h){},_serializeObject:function(b){if(null==b)return"";var d="";c.each(b,function(b){0<b&&(d+=", ");d+="[";b=0;for(obj in this)0<b&&(d+=", "),d+="{"+obj+":"+this[obj]+"}",b++;d+="]"});return d},isbindingcompleted:function(){return!this._loading},propertiesChangedHandler:function(b,
d,c){c.width&&c.height&&2==Object.keys(c).length&&(b._updatesize(!0,!0),b._resizeWindow(),b.virtualmode&&!b._loading?b.vScrollInstance.setPosition(0):setTimeout(function(){b._renderrows(b.virtualsizeinfo)},100))},propertyChangedHandler:function(b,d,f,h){if(void 0!=this.isInitialized&&0!=this.isInitialized&&!(b.batchUpdate&&b.batchUpdate.width&&b.batchUpdate.height&&2==Object.keys(b.batchUpdate).length))switch(d=d.toLowerCase(),d){case "editable":b.refresh();break;case "everpresentrowactionsmode":f!=
h&&(b._removeaddnewrow(),b.render());break;case "everpresentrowactions":b._updateaddnewrowui();break;case "showeverpresentrow":case "everpresentrowposition":case "everpresentrowheight":f!=h&&(b._removeaddnewrow(),b.render());break;case "rtl":b.content.css("left","");b.columns=b._columns;b._filterrowcache=[];b.vScrollBar.jqxScrollBar({rtl:h});b.hScrollBar.jqxScrollBar({rtl:h});b._initpager&&b._initpager();b._initgroupsheader&&b._initgroupsheader();b.render();break;case "enablebrowserselection":b.showfilterrow||
(b.showstatusbar||b.showtoolbar||b.host.addClass("jqx-disableselect"),b.content.addClass("jqx-disableselect"));b.enablebrowserselection&&(b.content.removeClass("jqx-disableselect"),b.host.removeClass("jqx-disableselect"));break;case "columnsheight":(30!=b.columnsheight||b.columngroups)&&b._measureElement("column");b._render(!0,!0,!0,!1,!1);break;case "rowsheight":h!=f&&(30!=b.rowsheight&&b._measureElement("cell"),b.virtualsizeinfo=null,b.rendergridcontent(!0,!1),b.refresh());break;case "scrollMode":b.vScrollInstance.thumbStep=
b.rowsheight;break;case "showdefaultloadelement":b._builddataloadelement();break;case "showfiltermenuitems":case "showsortmenuitems":case "showgroupmenuitems":case "filtermode":b._initmenu();break;case "touchmode":f!=h&&(b._removeHandlers(),b.touchDevice=null,b.vScrollBar.jqxScrollBar({touchMode:h}),b.hScrollBar.jqxScrollBar({touchMode:h}),b._updateTouchScrolling(),b._arrange(),b._updatecolumnwidths(),b._updatecellwidths(),b._addHandlers());break;case "autoshowcolumnsmenubutton":f!=h&&b._rendercolumnheaders();
break;case "rendergridrows":f!=h&&b.updatebounddata();break;case "editmode":f!=h&&(b._removeHandlers(),b._addHandlers());break;case "source":b.updatebounddata();b.virtualmode&&!b._loading&&(b.loadondemand=!0,b._renderrows(b.virtualsizeinfo));break;case "horizontalscrollbarstep":case "verticalscrollbarstep":case "horizontalscrollbarlargestep":case "verticalscrollbarlargestep":this.vScrollBar.jqxScrollBar({step:this.verticalscrollbarstep,largestep:this.verticalscrollbarlargestep});this.hScrollBar.jqxScrollBar({step:this.horizontalscrollbarstep,
largestep:this.horizontalscrollbarlargestep});break;case "closeablegroups":b._initgroupsheader&&b._initgroupsheader();break;case "showgroupsheader":f!=h&&(b._arrange(),b._initgroupsheader&&b._initgroupsheader(),b._renderrows(b.virtualsizeinfo));break;case "theme":h!=f&&(c.jqx.utilities.setTheme(f,h,b.host),b.gridmenu&&b.gridmenu.jqxMenu({theme:h}),b.pageable&&b._updatepagertheme(),b.filterable&&b._updatefilterrowui(!0),b.showeverpresentrow&&b._updateaddnewrowui(!0));break;case "showtoolbar":case "toolbarheight":f!=
h&&(b._arrange(),b.refresh());break;case "showstatusbar":f!=h&&(b.statusbar&&(h?b.statusbar.show():b.statusbar.hide()),b._arrange(),b.refresh());break;case "statusbarheight":f!=h&&(b._arrange(),b.refresh());break;case "filterable":case "showfilterrow":f!=h&&b.render();break;case "autoshowfiltericon":case "showfiltercolumnbackground":case "showpinnedcolumnbackground":case "showsortcolumnbackground":f!=h&&b.rendergridcontent();break;case "showrowdetailscolumn":f!=h&&b.render();break;case "scrollbarsize":f!=
h&&b._arrange();break;case "width":case "height":f!=h&&(b._updatesize(!0,!0),b._resizeWindow(),b.virtualmode&&!b._loading?b.vScrollInstance.setPosition(0):setTimeout(function(){b._renderrows(b.virtualsizeinfo)},100));break;case "altrows":case "altstart":case "altstep":f!=h&&b._renderrows(b.virtualsizeinfo);break;case "groupsheaderheight":f!=h&&(b._arrange(),b._initgroupsheader&&b._initgroupsheader());break;case "pagerheight":f!=h&&b._initpager();break;case "selectedrowindex":b.selectrow(h);break;
case "selectionmode":f!=h&&("none"==h&&(b.selectedrowindexes=[],b.selectedcells=[],b.selectedrowindex=-1),b._renderrows(b.virtualsizeinfo),"checkbox"==h&&b._render(!1,!1,!0,!1,!1));break;case "showheader":h?b.columnsheader.css("display","block"):b.columnsheader.css("display","none");break;case "virtualmode":f!=h&&(b.dataview.virtualmode=b.virtualmode,b.dataview.refresh(!1),b._render(!1,!1,!1));break;case "columnsmenu":f!=h&&b.render();break;case "columngroups":b._render(!0,!0,!0,!1,!1);break;case "columns":if(b._serializeObject(b._cachedcolumns)!==
b._serializeObject(h)){var l=!1;b.filterable&&f&&f.records&&c.each(f.records,function(){this.filter&&(l=!0);b.dataview.removefilter(this.displayfield,this.filter)});b._columns=null;b._filterrowcache=[];b.render();l&&b.applyfilters();b._cachedcolumns=b.columns;b.removesort&&b.removesort()}else b[d]=f;break;case "autoheight":f!=h&&b._render(!1,!1,!0);break;case "pagermode":case "pagerbuttonscount":f!=h&&b._initpager&&(b.pagershowrowscombo&&(b.pagershowrowscombo.jqxDropDownList("destroy"),b.pagershowrowscombo=
null),b.pagerrightbutton&&(b.removeHandler(b.pagerrightbutton,"mousedown"),b.removeHandler(b.pagerrightbutton,"mouseup"),b.removeHandler(b.pagerrightbutton,"click"),b.pagerrightbutton.jqxButton("destroy"),b.pagerrightbutton=null),b.pagerleftbutton&&(b.removeHandler(b.pagerleftbutton,"mousedown"),b.removeHandler(b.pagerleftbutton,"mouseup"),b.removeHandler(b.pagerleftbutton,"click"),b.pagerleftbutton.jqxButton("destroy"),b.removeHandler(c(document),"mouseup.pagerbuttons"+b.element.id),b.pagerleftbutton=
null),b.pagerdiv.remove(),b._initpager());break;case "pagesizeoptions":case "pageable":case "pagesize":if(f!=h){if(b._loading)throw Error("jqxGrid: "+b.loadingerrormessage);if(b.host.jqxDropDownList&&b.host.jqxListBox){if(b._initpager){if("pageable"!=d&&"pagermode"!=d&&"string"==typeof h)throw f="The expected value type is: Int.","pagesize"!=d&&(f="The expected value type is: Array of Int values."),Error("Invalid Value for: "+d+". "+f);b.dataview.pageable=b.pageable;b.dataview.pagenum=0;b.dataview.pagesize=
b._getpagesize();b.virtualmode&&b.updatebounddata();b.dataview.refresh(!0);b._initpager();"pagesizeoptions"==d&&null!=h&&0<h.length&&(b.pagesize=parseInt(h[0]),b.dataview.pagesize=parseInt(h[0]),b.prerenderrequired=!0,b._requiresupdate=!0,b.dataview.pagenum=-1,b.gotopage(0))}b._render(!1,!1,!1)}else b._testmodules()}break;case "groups":b._serializeObject(f)!==b._serializeObject(h)&&(b.dataview.groups=h,b._refreshdataview(),b._render(!0,!0,!0,!1));break;case "groupable":f!=h&&(b.dataview.groupable=
b.groupable,b.dataview.pagenum=0,b.dataview.refresh(!1),b._render(!1,!1,!0));break;case "renderstatusbar":null!=h&&b.renderstatusbar(b.statusbar);break;case "rendertoolbar":null!=h&&b.rendertoolbar(b.toolbar);break;case "disabled":h?b.host.addClass(b.toThemeProperty("jqx-fill-state-disabled")):b.host.removeClass(b.toThemeProperty("jqx-fill-state-disabled")),c.jqx.aria(b,"aria-disabled",b.disabled),b.pageable&&(b.pagerrightbutton&&(b.pagerrightbutton.jqxButton({disabled:h}),b.pagerleftbutton.jqxButton({disabled:h}),
b.pagershowrowscombo.jqxDropDownList({disabled:h}),b.pagergotoinput.attr("disabled",h)),b.pagerfirstbutton&&(b.pagerfirstbutton.jqxButton({disabled:h}),b.pagerlastbutton.jqxButton({disabled:h}))),b.vScrollBar.jqxScrollBar({disabled:h}),b.hScrollBar.jqxScrollBar({disabled:h}),b.filterable&&b.showfilterrow&&b._updatefilterrowui(!0),b.showeverpresentrow&&b._updateaddnewrowui(!0)}}});c.jqx.collection=function(b){this.records=[];this.owner=b;this.updating=!1;this.beginupdate=function(){this.updating=!0};
this.resumeupdate=function(){this.updating=!1};this._raiseEvent=function(b){};this.clear=function(){this.records=[]};this.replace=function(b,d){this.records[b]=d;this.updating||this._raiseEvent({type:"replace",element:d})};this.isempty=function(b){return void 0==this.records[b]?!0:!1};this.initialize=function(b){1>b&&(b=1);this.records[b-1]=-1};this.length=function(){return this.records.length};this.indexOf=function(b){return this.records.indexOf(b)};this.add=function(b){if(null==b)return!1;this.records[this.records.length]=
b;this.updating||this._raiseEvent({type:"add",element:b});return!0};this.insertAt=function(b,d){return null==b||void 0==b||null==d?!1:0<=b?b<this.records.length?(this.records.splice(b,0,d),this.updating||this._raiseEvent({type:"insert",index:b,element:d}),!0):this.add(d):!1};this.remove=function(b){if(null==b||void 0==b)return!1;var d=this.records.indexOf(b);return-1!=d?(this.records.splice(d,1),this.updating||this._raiseEvent({type:"remove",element:b}),!0):!1};this.removeAt=function(b){if(null==
b||void 0==b||0>b)return!1;if(b<this.records.length){var d=this.records[b];this.records.splice(b,1);this.updating||this._raiseEvent({type:"removeAt",index:b,element:d});return!0}return!1};return this};c.jqx.dataview=function(){this.self=this;this.aggregates=!1;this.grid=null;this.uniqueId="id";this.records=[];this.rows=[];this.columns=[];this.groups=[];this.filters=[];this.update=this.updated=null;this.suspend=!1;this.totalrecords=this.totalrows=this.pagenum=this.pagesize=0;this.groupable=!0;this.loadedrecords=
[];this.loadedrootgroups=[];this.loadedgroups=[];this.loadedgroupsByKey=[];this.virtualmode=!0;this._cachegrouppages=[];this.source=null;this.changedrecords=[];this.rowschangecallback=null;this.that=this;this.destroy=function(){delete this.self;delete this.grid;delete this.uniqueId;delete this.records;delete this.rows;delete this.columns;delete this.groups;delete this.filters;delete this.updated;delete this.update;delete this.suspend;delete this.pagesize;delete this.pagenum;delete this.totalrows;
delete this.totalrecords;delete this.groupable;delete this.loadedrecords;delete this.loadedrootgroups;delete this.loadedgroups;delete this.loadedgroupsByKey;delete this.virtualmode;delete this._cachegrouppages;delete this.source;delete this.changedrecords;delete this.rowschangecallback;delete this.that};this.suspendupdate=function(){this.suspend=!0};this.isupdating=function(){return this.suspend};this.resumeupdate=function(b){this.suspend=!1;void 0==b&&(b=!0);this.refresh(b)};this.getrecords=function(){return this.records};
this.clearrecords=function(){this.recordids=[]};this.databind=function(b,d){var f=b._source?!0:!1,h=null;this.grid&&(this.aggregates=this.grid.showgroupaggregates);f?(h=b,b=b._source):h=new c.jqx.dataAdapter(b,{autoBind:!1});var l=function(d){d.totalrecords=h.totalrecords;if(d.virtualmode){var g={startindex:d.pagenum*d.pagesize,endindex:d.pagenum*d.pagesize+d.pagesize};void 0!=b.recordstartindex&&(g.startindex=parseInt(b.recordstartindex));void 0!=b.recordendindex?g.endindex=parseInt(b.recordendindex):
d.grid.pageable||(g.endindex=g.startindex+100,d.grid.autoheight&&(g.endindex=g.startindex+d.totalrecords));b.recordendindex||(d.grid.pageable?g={startindex:d.pagenum*d.pagesize,endindex:d.pagenum*d.pagesize+d.pagesize}:(g.endindex=g.startindex+100,d.grid.autoheight&&(g.endindex=g.startindex+d.totalrecords)));g.data=h.records;if(d.grid.rendergridrows&&0<d.totalrecords){var f=0;b.records=d.grid.rendergridrows(g);b.records.length&&(f=b.records.length);if(b.records&&!b.records[g.startindex]){var l=[],
v=g.startindex;c.each(b.records,function(){l[v]=this;v++;f++});b.records=l}0==f&&b.records&&c.each(b.records,function(){f++});if(0<f&&f<g.endindex-g.startindex&&!d.grid.groupable)for(var q=b.records[0],y=0;y<g.endindex-g.startindex-f;y++){var r={};for(obj in q)r[obj]="";b.records.push&&b.records.push(r)}}b.records&&0!=d.totalrecords||(b.records=[]);d.originaldata=b.records;d.records=b.records;d.cachedrecords=b.records}else d.originaldata=h.originaldata,d.records=h.records,d.recordids=h.recordids,
d.cachedrecords=h.cachedrecords};h.recordids=[];h.records=[];h.cachedrecords=[];h.originaldata=[];h._options.virtualmode=this.virtualmode;h._options.totalrecords=this.totalrecords;h._options.originaldata=this.originaldata;h._options.recordids=this.recordids;h._options.cachedrecords=[];h._options.pagenum=this.pagenum;h._options.pageable=this.pageable;void 0!=b.type&&(h._options.type=b.type);void 0!=b.formatdata&&(h._options.formatData=b.formatdata);void 0!=b.contenttype&&(h._options.contentType=b.contenttype);
void 0!=b.async&&(h._options.async=b.async);void 0!=b.updaterow&&(h._options.updaterow=b.updaterow);void 0!=b.addrow&&(h._options.addrow=b.addrow);void 0!=b.deleterow&&(h._options.deleterow=b.deleterow);0==this.pagesize&&(this.pagesize=10);h._options.pagesize=this.pagesize;this.source=b;void 0!==d&&(uniqueId=d);var q=this.that;switch(b.datatype){default:null==b.localdata&&(b.localdata=[]);null!=b.localdata&&(h.unbindBindingUpdate(q.grid.element.id),(!q.grid.autobind&&q.grid.isInitialized||q.grid.autobind)&&
h.dataBind(),f=function(d){if(void 0!=d&&""!=d){if(h._changedrecords[0]){var g=[];c.each(h._changedrecords,function(b){var e=this.index,c=this.record;q.grid._updateFromAdapter=!0;switch(d){case "update":e=q.grid.getrowid(e);b==h._changedrecords.length-1?q.grid.updaterow(e,c):q.grid.updaterow(e,c,!1);q.grid._updateFromAdapter=!1;break;case "add":q.grid.addrow(null,c);q.grid._updateFromAdapter=!1;break;case "remove":e=q.grid.getrowid(e),g.push(e)}});0<g.length&&(q.grid.deleterow(g,!1),q.grid._updateFromAdapter=
!1)}if("update"==d)return}var f=q.totalrecords;l(q,d);null===b.localdata.notifier&&"observableArray"==b.localdata.name&&(b.localdata.notifier=function(d){if(!this._updating){this._updating=!0;var g=q.grid.getrowid(d.index);switch(d.type){case "add":var f=c.extend({},d.object[d.index]),g=h.getid(b.id,f,d.index);0===d.index?q.grid.addrow(g,f,"first"):q.grid.addrow(g,f);break;case "delete":q.grid.deleterow(g);break;case "update":d.path&&1<d.path.split(".").length?(f=d.path.split("."),q.grid.setcellvalue(d.index,
f[f.length-1],d.newValue)):(f=c.extend({},d.object[d.index]),q.grid.updaterow(g,f))}this._updating=!1}});"updateData"==d?(q.refresh(),q.grid._updateGridData()):(b.recordstartindex&&this.virtualmode?q.updateview(b.recordstartindex,b.recordstartindex+q.pagesize):q.refresh(),q.update(f!=q.totalrecords))},f(),h.bindBindingUpdate(q.grid.element.id,f));break;case "json":case "jsonp":case "xml":case "xhtml":case "script":case "text":case "csv":case "tab":if(null!=b.localdata)h.unbindBindingUpdate(q.grid.element.id),
(!q.grid.autobind&&q.grid.isInitialized||q.grid.autobind)&&h.dataBind(),f=function(d){var c=q.totalrecords;l(q);"updateData"==d?(q.refresh(),q.grid._updateGridData()):(b.recordstartindex&&q.virtualmode?q.updateview(b.recordstartindex,b.recordstartindex+q.pagesize):q.refresh(),q.update(c!=q.totalrecords))},f(),h.bindBindingUpdate(q.grid.element.id,f);else{for(var r=[],t=0,f={},w=0;w<this.filters.length;w++){var z=this.filters[w].datafield,B=this.filters[w].filter;if(B.getfilters){var v=B.getfilters();
f[z+"operator"]=B.operator;for(B=0;B<v.length;B++){v[B].datafield=z;var y=v[B].value;if("datefilter"==v[B].type)if(v[B].value&&v[B].value.toLocaleString){var C=this.grid.getcolumn(v[B].datafield);C&&C.cellsformat?(C=this.grid.source.formatDate(v[B].value,C.cellsformat,this.grid.gridlocalization),f["filtervalue"+t]=C?C:v[B].value.toLocaleString()):f["filtervalue"+t]=y.toString()}else f["filtervalue"+t]=y.toString();else f["filtervalue"+t]=y.toString(),v[B].data&&(f["filterid"+t]=v[B].data.toString()),
v[B].id&&(f["filterid"+t]=v[B].id.toString());f["filtercondition"+t]=v[B].condition;f["filteroperator"+t]=v[B].operator;f["filterdatafield"+t]=z;C={label:y.toString()};v[B].data&&(C.value=v[B].data.toString());C.value=v[B].id?v[B].id.toString():y.toString();C.condition=v[B].condition;C.operator=0==v[B].operator?"and":"or";C.field=z;C.type=v[B].type;y=!1;if(0<r.length)for(var D=0;D<r.length;D++){var E=r[D];if(E.field==z){E.filters.push(C);y=!0;break}}y||(r.push({field:z,filters:[]}),r[r.length-1].filters.push(C));
t++}}}f.filterGroups=r;f.filterscount=t;f.groupscount=q.groups.length;for(w=0;w<q.groups.length;w++)f["group"+w]=q.groups[w];void 0==b.recordstartindex&&(b.recordstartindex=0);if(void 0==b.recordendindex||0==b.recordendindex)q.grid.height&&-1==q.grid.height.toString().indexOf("%")?(b.recordendindex=parseInt(q.grid.height)/q.grid.rowsheight,b.recordendindex+=2):b.recordendindex=c(window).height()/q.grid.rowsheight,b.recordendindex=parseInt(b.recordendindex),this.pageable&&(b.recordendindex=this.pagesize);
this.pageable&&(b.recordstartindex=this.pagenum*this.pagesize,b.recordendindex=(this.pagenum+1)*this.pagesize);c.extend(f,{sortdatafield:q.sortfield,sortorder:q.sortfielddirection,pagenum:q.pagenum,pagesize:q.grid.pagesize,recordstartindex:b.recordstartindex,recordendindex:b.recordendindex});(r=h._options.data)?c.extend(h._options.data,f):(b.data&&c.extend(f,b.data),h._options.data=f);f=function(){var d=function(){var d=q.totalrecords;l(q);b.recordstartindex&&q.virtualmode?q.updateview(b.recordstartindex,
b.recordstartindex+q.pagesize):q.refresh();q.update(d!=q.totalrecords)};if(c.jqx.browser.msie&&9>c.jqx.browser.version)try{d()}catch(g){}else d()};h.unbindDownloadComplete(q.grid.element.id);h.bindDownloadComplete(q.grid.element.id,f);!q.grid.autobind&&q.grid.isInitialized||q.grid.autobind?h.dataBind():q.grid.isInitialized||q.grid.autobind||f();h._options.data=r}}};this.getid=function(b,d,f){return 0<c(b,d).length?c(b,d).text():b&&0<b.toString().length&&(b=c(d).attr(b),null!=b&&0<b.toString().length)?
b:f};this.getvaluebytype=function(b,d){var f=b;if("date"==d.type){var h=new Date(b);b="NaN"==h.toString()||"Invalid Date"==h.toString()?c.jqx.dataFormat?c.jqx.dataFormat.tryparsedate(b):h:h;null==b&&(b=f)}else"float"==d.type?(b=parseFloat(b),isNaN(b)&&(b=f)):"int"==d.type?(b=parseInt(b),isNaN(b)&&(b=f)):"bool"==d.type&&(null!=b&&("false"==b.toLowerCase()?b=!1:"true"==b.toLowerCase()&&(b=!0)),b=1==b?!0:0==b?!1:"");return b};this.setpaging=function(b){void 0!=b.pageSize&&(this.pagesize=b.pageSize);
void 0!=b.pageNum&&(this.pagenum=Math.min(b.pageNum,Math.ceil(this.totalrows/this.pagesize)));this.refresh()};this.getpagingdetails=function(){return{pageSize:this.pagesize,pageNum:this.pagenum,totalrows:this.totalrows}};this._clearcaches=function(){this.sortcache={};this.sortdata=null;this.changedrecords=[];this.records=[];this.rows=[];this.cacheddata=[];this.originaldata=[];this.bounditems=[];this.loadedrecords=[];this.loadedrootgroups=[];this.loadedgroups=[];this.loadedgroupsByKey=[];this._cachegrouppages=
[];this.recordsbyid=[];this.cachedrecords=[];this.recordids=[]};this.addfilter=function(b,d){for(var c=-1,h=0;h<this.filters.length;h++)if(this.filters[h].datafield==b){c=h;break}-1==c?this.filters[this.filters.length]={filter:d,datafield:b}:this.filters[c]={filter:d,datafield:b}};this.removefilter=function(b){for(var d=0;d<this.filters.length;d++)if(this.filters[d].datafield==b){this.filters.splice(d,1);break}};this.getItemFromIndex=function(b){return this.records[b]};this.updaterow=function(b,d,
c){if(!(this.filters&&0<this.filters.length&&!this.virtualmode||void 0==d)&&void 0!=b){d.uid=b;d[this.source.id]||(d[this.source.id]=d.uid);var h=this.recordsbyid["id"+b],l=this.records.indexOf(h);if(-1==l)return!1;this.records[l]=d;this.cachedrecords&&(this.cachedrecords[l]=d);1!=c&&void 0!=c||this.refresh();this.changedrecords[d.uid]={Type:"Update",OldData:h,Data:d};return!0}if(this.filters&&0<this.filters.length){for(var q=this.cachedrecords,h=null,l=-1,r=0;r<q.length;r++)if(q[r].uid==b){h=q[r];
l=r;break}if(h){b=this.that;for(var t in d)b.cachedrecords[l][t]=d[t];1!=c&&void 0!=c||this.refresh();return!0}}return!1};this.addrow=function(b,d,f,h){if(void 0!=d){c.isEmptyObject(d)&&this.source&&this.source.datafields&&c.each(this.source.datafields,function(){var b="";"number"==this.type&&(b=null);"date"==this.type&&(b=null);if("bool"==this.type||"boolean"==this.type)b=!1;d[this.name]=b});if(!b||this.recordsbyid["id"+b])for(d.uid=this.getid(this.source.id,d,this.totalrecords),b=this.recordsbyid["id"+
d.uid];null!=b;)b=Math.floor(1E4*Math.random()).toString(),d.uid=b,b=this.recordsbyid["id"+b];else d.uid=b;d[this.source.id]||void 0==this.source.id||(d[this.source.id]=d.uid);"last"==f?this.records.push(d):"number"===typeof f&&isFinite(f)?this.records.splice(f,0,d):this.records.splice(0,0,d);this.filters&&0<this.filters.length&&("last"==f?this.cachedrecords.push(d):"number"===typeof f&&isFinite(f)?this.cachedrecords.splice(f,0,d):this.cachedrecords.splice(0,0,d));this.totalrecords++;this.virtualmode&&
(this.source.totalrecords=this.totalrecords);1!=h&&void 0!=h||this.refresh();this.changedrecords[d.uid]={Type:"New",Data:d};return!0}return!1};this.deleterow=function(b,d){if(void 0!=b){var c=this.filters&&0<this.filters.length;if(this.recordsbyid["id"+b]&&!c){var c=this.recordsbyid["id"+b],h=this.records.indexOf(c);this.changedrecords[b]={Type:"Delete",Data:this.records[h]};this.records.splice(h,1);this.totalrecords--;this.virtualmode&&(this.source.totalrecords=this.totalrecords);1!=d&&void 0!=d||
this.refresh();return!0}if(this.filters&&0<this.filters.length){for(var l=this.cachedrecords,c=null,h=-1,q=0;q<l.length;q++)if(l[q].uid==b){c=l[q];h=q;break}if(c){this.cachedrecords.splice(h,1);if(1==d||void 0==d)this.totalrecords=0,this.records=this.cachedrecords,this.refresh();return!0}}}return!1};this.reload=function(b,d,f,h,l,q,r){var t=this.that;l=[];var w=d.length,z=0;this.columns=[];this.bounditems=[];this.loadedrecords=[];this.loadedrootgroups=[];this.loadedgroups=[];this.loadedgroupsByKey=
[];this._cachegrouppages=[];this.recordsbyid={};0==this.totalrecords&&(Object.size=function(b){var d=0,e;for(e in b)b.hasOwnProperty(e)&&d++;return d},this.totalrecords=Object.size(b),c.each(this.records,function(b){var d=0;c.each(this,function(b,e){t.columns[d++]=b});return!1}));if(this.virtualmode){if(this.pageable){this.updateview();return}q=0;if(this.groupable)r=this.totalrecords;else{this.updateview();return}}else q=0,r=this.totalrecords;if(this.groupable&&0<this.groups.length&&this.loadgrouprecords)var B=
q,B=this.loadgrouprecords(0,q,r,f,0,h,d,w,l);else z=this.loadflatrecords(q,r,f,0,h,d,w,l);0<w&&d.splice(0,w-0);this.totalrows=0<this.groups.length&&this.groupable?B:z;return l};this.loadflatrecords=function(b,d,f,h,l,q,r,t){var w=this.that,z=f=b;d=Math.min(d,this.totalrecords);for(var B=null!=this.sortdata,v=B?this.sortdata:this.records;b<d;b++){var y={};B?(y=c.extend({},v[b].value),id=y[w.uniqueId],y.boundindex=v[b].index,void 0==y.uid&&(y.uid=w.getid(w.source.id,y,y.boundindex)),w.recordsbyid["id"+
y.uid]=v[b].value,w.loadedrecords[f]=y,y.uniqueid=w.generatekey(),w.bounditems[y.boundindex]=y):(y=Object(v[b]),id=y[w.uniqueId],y.boundindex=f,w.loadedrecords[f]=y,void 0==y.uid&&(y.uid=w.getid(w.source.id,y,f)),w.recordsbyid["id"+y.uid]=v[b],y.uniqueid=w.generatekey(),w.bounditems[this.bounditems.length]=y);if(h>=r||id!=q[h][w.uniqueId]||l&&l[id])t[t.length]=h;q[h]=y;h++;y.visibleindex=z;z++;f++}if(w.grid.summaryrows){var C=f;c.each(w.grid.summaryrows,function(){var b=c.extend({},this);b.boundindex=
d++;w.loadedrecords[C]=b;b.uniqueid=w.generatekey();w.bounditems[w.bounditems.length]=b;q[h]=b;h++;b.visibleindex=z;z++;C++})}return z};this.updateview=function(b,d){var c=this.that,h=this.pagesize*this.pagenum,l=0,q=[],r=this.filters,t=this.updated,w=q.length;if(this.pageable){if(this.virtualmode)if(!this.groupable||0==this.groups.length)this.loadflatrecords(this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum),r,l,t,q,w,[]),this.totalrows=q.length;else if(this.groupable&&0<this.groups.length&&
this.loadgrouprecords){if(void 0!=this._cachegrouppages[this.pagenum+"_"+this.pagesize]){this.rows=this._cachegrouppages[this.pagenum+"_"+this.pagesize];this.totalrows=this.rows.length;return}c=this.pagesize*(1+this.pagenum);c>this.totalrecords&&(c=this.totalrecords);this.loadgrouprecords(0,this.pagesize*this.pagenum,c,r,l,t,q,w,[]);this._cachegrouppages[this.pagenum+"_"+this.pagesize]=this.rows;this.totalrows=this.rows.length;return}}else if(this.virtualmode&&(!this.groupable||0==this.groups.length)){var z=
this.pagesize;0==z&&(z=Math.min(100,this.totalrecords));null!=b&&null!=d?this.loadflatrecords(b,d,r,l,t,q,w,[]):this.loadflatrecords(this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum),r,l,t,q,w,[]);this.totalrows=this.loadedrecords.length;this.rows=q;if(q.length>=z)return}if(this.groupable&&this.pageable&&0<this.groups.length&&this._updategroupsinpage)q=this._updategroupsinpage(c,r,h,l,w,this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum));else for(r=this.pagesize*this.pagenum;r<this.pagesize*
(1+this.pagenum);r++)if(t=r<this.loadedrecords.length?this.loadedrecords[r]:null,null!=t){if(!this.pagesize||h>=this.pagesize*this.pagenum&&h<=this.pagesize*(this.pagenum+1))q[l]=t,l++;h++}if((0==q.length||q.length<this.pagesize)&&!this.pageable&&this.virtualmode)for(h=l=q.length,r=this.pagesize*this.pagenum;r<this.pagesize*(1+this.pagenum)-h;r++)t={},t.boundindex=r+h,t.visibleindex=r+h,t.uniqueid=c.generatekey(),t.empty=!0,c.bounditems[r+h]=t,q[l]=t,l++;this.rows=q};this.generatekey=function(){var b=
function(){return 16*(1+Math.random())|0};return""+b()+b()+"-"+b()+"-"+b()+"-"+b()+"-"+b()+b()+b()};this.reloaddata=function(){this.reload(this.records,this.rows,this.filter,this.updated,!0)};this.refresh=function(b){if(!this.suspend){void 0==b&&(b=!0);var d=this.rows.length,f=this.totalrows;if(0<this.filters.length&&!this.virtualmode){var h,l=this.cachedrecords.length,q=[];this.totalrecords=0;var r=this.cachedrecords;this._dataIndexToBoundIndex=[];var t=this.filters.length;if(null!=this.source&&
void 0!=this.source.filter&&void 0!=this.source.localdata)q=this.source.filter(this.filters,r,l),void 0==q&&(q=[]),this.records=q;else if(null==this.source.filter||void 0==this.source.filter){for(var w=0;w<l;w++){for(var z=r[w],B=void 0,v=0;v<t;v++){h=this.filters[v].filter;var y=z[this.filters[v].datafield],C=h.evaluate(y);this.grid.filter&&(y=this.grid.filter(y,z,this.filters[v].datafield,h,C),void 0!==y&&(C=y));B=void 0==B?C:"or"==h.operator?B||C:B&&C}B?(q[q.length]=c.extend({dataindex:w},z),this._dataIndexToBoundIndex[w]=
{boundindex:q.length-1}):this._dataIndexToBoundIndex[w]=null}this.records=q}if(this.sortdata&&(h=this.sortfield,this.sortcache[h])){this.sortdata=null;d=this.sortcache[h].direction;this.sortcache[h]=null;this.sortby(this.sortfield,d);return}}else if(0==this.filters.length&&!this.virtualmode&&this.cachedrecords&&(this.totalrecords=0,this.records=r=this.cachedrecords,this.sortdata&&(h=this.sortfield,this.sortcache[h]))){this.sortdata=null;d=this.sortcache[h].direction;this.sortcache[h]=null;this.sortby(this.sortfield,
d);return}b=this.reload(this.records,this.rows,this.filter,this.updated,b);this.updated=null;null!=this.rowschangecallback&&(f!=totalrows&&this.rowschangecallback({type:"PagingChanged",data:getpagingdetails()}),d!=rows.length&&this.rowschangecallback({type:"RowsCountChanged",data:{previous:d,current:rows.length}}),(0<b.length||d!=rows.length)&&this.rowschangecallback({type:"RowsChanged",data:{previous:d,current:rows.length,diff:b}}))}};return this}})(jqxBaseFramework);
(function(c){c.extend(c.jqx._jqxGrid.prototype,{selectallrows:function(){this._trigger=!1;var b=this.virtualmode?this.dataview.totalrecords:this.dataview.loadedrecords.length;this.selectedrowindexes=[];for(var d=this.dataview.loadedrecords,e=0;e<b;e++){var c=d[e];c?(c=this.getboundindex(c),void 0!=c&&(this.selectedrowindexes[e]=c)):this.selectedrowindexes[e]=e}"checkbox"!=this.selectionmode||this._checkboxcolumnupdating||this._checkboxcolumn&&this._checkboxcolumn.checkboxelement.jqxCheckBox({checked:!0});
this._renderrows(this.virtualsizeinfo);this._trigger=!0;"checkbox"==this.selectionmode&&this._raiseEvent(2,{rowindex:this.selectedrowindexes})},unselectallrows:function(){this._trigger=!1;this.selectedrowindexes=[];"checkbox"!=this.selectionmode||this._checkboxcolumnupdating||this._checkboxcolumn&&this._checkboxcolumn.checkboxelement.jqxCheckBox({checked:!1});this._renderrows(this.virtualsizeinfo);this._trigger=!0;"checkbox"==this.selectionmode&&this._raiseEvent(2,{rowindex:this.selectedrowindexes})},
selectrow:function(b,d){this._applyrowselection(b,!0,d);!1!==d&&this._updatecheckboxselection()},_updatecheckboxselection:function(){if("checkbox"==this.selectionmode){var b=this.getrows();if(b&&this._checkboxcolumn)if(0===b.length)this._checkboxcolumn.checkboxelement.jqxCheckBox({checked:!1});else{b=b.length;this.groupable&&(b=this.dataview.loadedrecords.length);this.virtualmode&&(b=this.source._source.totalrecords);var d=this.selectedrowindexes.length;d===b?this._checkboxcolumn.checkboxelement.jqxCheckBox({checked:!0}):
0===d?this._checkboxcolumn.checkboxelement.jqxCheckBox({checked:!1}):this._checkboxcolumn.checkboxelement.jqxCheckBox({checked:null})}}},unselectrow:function(b,d){this._applyrowselection(b,!1,d);!1!==d&&this._updatecheckboxselection()},selectcell:function(b,d){this._applycellselection(b,d,!0)},unselectcell:function(b,d){this._applycellselection(b,d,!1)},clearselection:function(b,d){this._trigger=!1;this.selectedrowindex=-1;this._oldselectedcell=null;if(!1!==d)for(var e=0;e<this.selectedrowindexes.length;e++)this._raiseEvent(3,
{rowindex:this.selectedrowindexes[e]});this.selectedrowindexes=[];this.selectedcells=[];this.selectedcell=null;"checkbox"!=this.selectionmode||this._checkboxcolumnupdating||this._checkboxcolumn.checkboxelement.jqxCheckBox({checked:!1});!1===b?this._trigger=!0:(this._renderrows(this.virtualsizeinfo),this._trigger=!0,"checkbox"==this.selectionmode&&this._raiseEvent(3,{rowindex:this.selectedrowindexes}))},getselectedrowindex:function(){if(-1==this.selectedrowindex||void 0==this.selectedrowindex)for(;0<
this.selectedrowindexes.length;)return this.selectedrowindexes[0];return this.selectedrowindex},getselectedrowindexes:function(){return this.selectedrowindexes},getselectedcell:function(){if(!this.selectedcell)return null;var b=this.selectedcell;b.row=this.selectedcell.rowindex;b.column=this.selectedcell.datafield;b.value=this.getcellvalue(b.row,b.column);return b},getselectedcells:function(){var b=[];for(obj in this.selectedcells)b[b.length]=this.selectedcells[obj];return b},_getcellsforcopypaste:function(){var b=
[];if(-1==this.selectionmode.indexOf("cell"))for(var d=this.selectedrowindexes,e=0;e<d.length;e++)for(var c=d[e],f=0;f<this.columns.records.length;f++)"_checkboxcolumn"!==this.columns.records[f].datafield&&b.push({rowindex:c,datafield:this.columns.records[f].datafield});return b},deleteselection:function(){var b=this.getselectedcells();-1==this.selectionmode.indexOf("cell")&&(b=this._getcellsforcopypaste());if(null!=b&&0<b.length){for(var d=0;d<b.length;d++){var e=b[d],c=this.getcolumn(e.datafield),
f=this.getcellvalue(e.rowindex,e.datafield);if(c&&""!==f){var h=null;"checkbox"==c.columntype&&(c.threestatecheckbox||(h=!1));this._raiseEvent(17,{rowindex:e.rowindex,datafield:e.datafield,value:f});d==b.length-1?this.setcellvalue(e.rowindex,e.datafield,h,!0):this.setcellvalue(e.rowindex,e.datafield,h,!1);c.displayfield!=c.datafield&&this.setcellvalue(e.rowindex,c.displayfield,h,!0);this._raiseEvent(18,{rowindex:e.rowindex,datafield:e.datafield,oldvalue:f,value:h})}}this.dataview.updateview();this._renderrows(this.virtualsizeinfo)}},
copyselection:function(){var b="",d=this;this.clipboardselection={};this.logicalclipboardselection={};this._clipboardselection=[];var e=d.getselectedcells();-1==this.selectionmode.indexOf("cell")&&(e=this._getcellsforcopypaste());var g=[];if(null!=e&&0<e.length){for(var f=999999999999999,h=-1,l=0;l<e.length;l++){var q=e[l],r=d.getcolumn(q.datafield);if(null!=r&&r.clipboard&&(!r.hidden||this.copytoclipboardhiddencolumns)){-1==g.indexOf(r.text)&&g.push(r.text);var t=d.getcelltext(q.rowindex,r.displayfield),
w=this.getrowdisplayindex(q.rowindex);this.clipboardselection[w]||(this.clipboardselection[w]={});this.clipboardselection[w][r.displayfield]=t;this.logicalclipboardselection[w]||(this.logicalclipboardselection[w]={});this.logicalclipboardselection[w][r.displayfield]=t;r.displayfield!=r.datafield&&(this.logicalclipboardselection[w][r.datafield]=d.getcellvalue(q.rowindex,r.datafield));f=Math.min(f,w);h=Math.max(h,w)}}e=[];for(l=f;l<=h;l++)this.logicalclipboardselection[l]&&(q=c.extend({},this.logicalclipboardselection[l]),
e.push(q));this.logicalclipboardselection=e;if(this.copytoclipboardwithheaders){for(e=0;e<g.length;e++)0<e&&(b+="\t"),b+=g[e];b+="\r\n"}for(l=f;l<=h;l++){var z=0;this._clipboardselection[this._clipboardselection.length]=[];void 0!=this.clipboardselection[l]&&(c.each(this.clipboardselection[l],function(e,c){0<z&&(b+="\t");var g=c;null==c&&(g="");d._clipboardselection[d._clipboardselection.length-1][z]=g;z++;b+=g}),l<h&&(b+="\r\n"))}}return this.clipboardselectedtext=b},pasteselection:function(){var b=
this.getselectedcells();this._oldselectedcell=null;-1==this.selectionmode.indexOf("cell")&&(b=this._getcellsforcopypaste());if(null!=b&&0<b.length){var d=this.getrowdisplayindex(b[0].rowindex),e=this._getcolumnindex(b[0].datafield);this.selectedrowindexes=[];this.selectedcells=[];var c=0,f=[];this.copytoclipboardwithheaders&&this._clipboardselection.splice(0,1);for(var h=0;h<this._clipboardselection.length;h++){c+=this._clipboardselection[h].length;f[h]=[];for(var l=0;l<this._clipboardselection[h].length;l++){var q=
this._clipboardselection[h][l];f[h].push(q)}}if(c<b.length){d=[];for(h=0;h<b.length;h++)c=b[h],d[c.rowindex]||(d[c.rowindex]=[]),d[c.rowindex].push(c);for(var r=e=0,h=0;h<d.length;h++)if(d[h]){for(l=0;l<d[h].length;l++){var c=d[h][l],b=c.rowindex,t=this.getcolumn(c.datafield);if("_checkboxcolumn"!==t.datafield&&!t.hidden){q="";void 0==f[e][r]&&(r=0);q=f[e][r];r++;if(t.cellsformat&&(-1!=t.cellsformat.indexOf("p")||-1!=t.cellsformat.indexOf("c")||-1!=t.cellsformat.indexOf("n")||-1!=t.cellsformat.indexOf("f"))){-1<
q.indexOf(this.gridlocalization.currencysymbol)&&(q=q.replace(this.gridlocalization.currencysymbol,""));var w=function(b,d,e){var c=b;if(d==e)return b;for(b=c.indexOf(d);-1!=b;)c=c.replace(d,e),b=c.indexOf(d);return c},q=w(q,this.gridlocalization.thousandsseparator,""),q=q.replace(this.gridlocalization.decimalseparator,".");-1<q.indexOf(this.gridlocalization.percentsymbol)&&(q=q.replace(this.gridlocalization.percentsymbol,""));for(var w="",z=0;z<q.length;z++){var B=q.substring(z,z+1);"-"===B&&(w+=
"-");"."===B&&(w+=".");null!=B.match(/^[0-9]+$/)&&(w+=B)}q=w;q=q.replace(/ /g,"");q=new Number(q);isNaN(q)&&(q="")}this._raiseEvent(17,{rowindex:b,datafield:c.datafield,value:q});this.setcellvalue(b,t.displayfield,q,!1);t.displayfield!=t.datafield&&this.logicalclipboardselection&&this.logicalclipboardselection[b]&&(w=this.logicalclipboardselection[b][t.datafield],void 0!=w&&this.setcellvalue(b,t.datafield,w,!1));this._raiseEvent(18,{rowindex:b,datafield:c.datafield,oldvalue:this.getcellvalue(c.rowindex,
c.datafield),value:q});this._applycellselection(b,c.datafield,!0,!1)}}e++;r=0;f[e]||(e=0)}}else{if(!this._clipboardselection)return;for(f=0;f<this._clipboardselection.length;f++)for(h=0;h<this._clipboardselection[f].length;h++)if((t=this.getcolumnat(e+h))&&"_checkboxcolumn"!==t.datafield&&!t.hidden&&(b=this.getrowboundindex(d+f),c=this.getcell(b,t.datafield),q=null,q=this._clipboardselection[f][h],null!=q)){if(t.cellsformat&&(-1!=t.cellsformat.indexOf("p")||-1!=t.cellsformat.indexOf("c")||-1!=t.cellsformat.indexOf("n")||
-1!=t.cellsformat.indexOf("f"))){-1<q.indexOf(this.gridlocalization.currencysymbol)&&(q=q.replace(this.gridlocalization.currencysymbol,""));w=function(b,d,e){var c=b;if(d==e)return b;for(b=c.indexOf(d);-1!=b;)c=c.replace(d,e),b=c.indexOf(d);return c};q=w(q,this.gridlocalization.thousandsseparator,"");q=q.replace(this.gridlocalization.decimalseparator,".");-1<q.indexOf(this.gridlocalization.percentsymbol)&&(q=q.replace(this.gridlocalization.percentsymbol,""));w="";for(z=0;z<q.length;z++)B=q.substring(z,
z+1),"-"===B&&(w+="-"),"."===B&&(w+="."),null!=B.match(/^[0-9]+$/)&&(w+=B);q=w;q=q.replace(/ /g,"");q=new Number(q);isNaN(q)&&(q="")}this._raiseEvent(17,{rowindex:b,datafield:c.datafield,value:q});this.setcellvalue(b,t.displayfield,q,!1);t.displayfield!=t.datafield&&this.logicalclipboardselection&&(w=this.logicalclipboardselection[f][t.datafield],void 0!=w&&this.setcellvalue(b,t.datafield,w,!1));this._raiseEvent(18,{rowindex:b,datafield:c.datafield,oldvalue:this.getcellvalue(c.rowindex,c.datafield),
value:q});this._applycellselection(b,c.datafield,!0,!1)}}"checkbox"==this.selectionmode&&this._updatecheckboxselection();this.dataview.updateview();this._renderrows(this.virtualsizeinfo)}this.clipboardend&&this.clipboardend("paste")},_applyrowselection:function(b,d,e,c,f){if(null==b)return!1;f=this.selectedrowindex;"singlerow"==this.selectionmode&&(d?this._raiseEvent(2,{rowindex:b,row:this.getrowdata(b)}):this._raiseEvent(3,{rowindex:b,row:this.getrowdata(b)}),this._raiseEvent(3,{rowindex:f}),this.selectedrowindexes=
[],this.selectedcells=[]);1==c&&(this.selectedrowindexes=[]);0<this.dataview.filters.length&&((c=this.getrowdata(b))&&void 0!==c.dataindex?b=c.dataindex:c&&void 0===c.dataindex&&void 0!=c.uid&&(b=this.getrowboundindexbyid(c.uid)));c=this.selectedrowindexes.indexOf(b);if(d)this.selectedrowindex=b,-1==c?(this.selectedrowindexes.push(b),"singlerow"!=this.selectionmode&&this._raiseEvent(2,{rowindex:b,row:this.getrowdata(b)})):"multiplerows"==this.selectionmode&&(this.selectedrowindexes.splice(c,1),this._raiseEvent(3,
{rowindex:this.selectedrowindex,row:this.getrowdata(b)}),this.selectedrowindex=0<this.selectedrowindexes.length?this.selectedrowindexes[this.selectedrowindexes.length-1]:-1);else if(0<=c||"singlerow"==this.selectionmode||"multiplerowsextended"==this.selectionmode||"multiplerowsadvanced"==this.selectionmode)d=this.selectedrowindexes[c],this.selectedrowindexes.splice(c,1),this._raiseEvent(3,{rowindex:d,row:this.getrowdata(b)}),this.selectedrowindex=-1;(void 0==e||e)&&this._rendervisualrows();return!0},
_applycellselection:function(b,d,e,c){if(null==b||null==d)return!1;if("singlecell"==this.selectionmode){var f=this.selectedcell;null!=f&&this._raiseEvent(16,{rowindex:f.rowindex,datafield:f.datafield});this.selectedcells=[]}if("multiplecellsextended"==this.selectionmode||"multiplecellsadvanced"==this.selectionmode)f=this.selectedcell,null!=f&&this._raiseEvent(16,{rowindex:f.rowindex,datafield:f.datafield});f=b+"_"+d;if(0<this.dataview.filters.length){var h=this.getrowdata(b);h&&void 0!==h.dataindex?
(b=h.dataindex,f=b+"_"+d):h&&void 0===h.dataindex&&h.uid&&(b=this.getrowboundindexbyid(h.uid),f=b+"_"+d)}b={rowindex:b,datafield:d};if(e)if(this.selectedcell=b,!this.selectedcells[f])this.selectedcells[f]=b,this.selectedcells.length++,this._raiseEvent(15,b);else{if("multiplecells"==this.selectionmode||"multiplecellsextended"==this.selectionmode||"multiplecellsadvanced"==this.selectionmode)delete this.selectedcells[f],0<this.selectedcells.length&&this.selectedcells.length--,this._raiseEvent(16,b)}else delete this.selectedcells[f],
0<this.selectedcells.length&&this.selectedcells.length--,this._raiseEvent(16,b);(void 0==c||c)&&this._rendervisualrows();return!0},_getcellindex:function(b){var d=-1;c.each(this.selectedcells,function(){d++;if(this[b])return!1});return d},_clearhoverstyle:function(){if(void 0!=this.hoveredrow&&-1!=this.hoveredrow&&!this.vScrollInstance.isScrolling()&&!this.hScrollInstance.isScrolling()){var b=this.table.find(".jqx-grid-cell-hover");0<b.length&&(b.removeClass(this.toTP("jqx-grid-cell-hover")),b.removeClass(this.toTP("jqx-fill-state-hover")));
this.hoveredrow=-1}},_clearselectstyle:function(){for(var b=this.table[0].rows.length,d=this.table[0].rows,e=this.toTP("jqx-grid-cell-selected"),g=this.toTP("jqx-fill-state-pressed"),f=this.toTP("jqx-grid-cell-hover"),h=this.toTP("jqx-fill-state-hover"),l=0;l<b;l++)for(var q=d[l],r=q.cells.length,q=q.cells,t=0;t<r;t++){var w=q[t],z=c(w);-1!=w.className.indexOf("jqx-grid-cell-selected")&&(z.removeClass(e),z.removeClass(g));-1!=w.className.indexOf("jqx-grid-cell-hover")&&(z.removeClass(f),z.removeClass(h))}},
_selectpath:function(b,d){var e=this._lastClickedCell?Math.min(this._lastClickedCell.row,b):0,c=this._lastClickedCell?Math.max(this._lastClickedCell.row,b):0;if(e<=c){var f=this._getcolumnindex(this._lastClickedCell.column),h=this._getcolumnindex(d),l=Math.min(f,h),f=Math.max(f,h);this.selectedcells=[];for(h=this.dataview.loadedrecords;e<=c;e++)for(var q=l;q<=f;q++)b=h[e],this._applycellselection(this.getboundindex(b),this._getcolumnat(q).datafield,!0,!1);this._rendervisualrows()}},_selectrowpath:function(b){if("multiplerowsextended"==
this.selectionmode){var d=this._lastClickedCell?Math.min(this._lastClickedCell.row,b):0;b=this._lastClickedCell?Math.max(this._lastClickedCell.row,b):0;if(d<=b){for(this.selectedrowindexes=[];d<=b;d++){var e=this.getrowboundindex(d);this._applyrowselection(e,!0,!1)}this._rendervisualrows()}}},_selectrowwithmouse:function(b,d,e,c,f,h){var l=d.row;if(void 0!=l&&(d=d.index,void 0!=this.hittestinfo[d])){var q=this.hittestinfo[d].visualrow;if(!this.hittestinfo[d].details&&!l.group){if("multiplerows"==
this.selectionmode||"multiplecells"==this.selectionmode||"checkbox"==this.selectionmode||-1!=this.selectionmode.indexOf("multiple")&&(1==h||1==f)){var r=this.getboundindex(l);if(0<this.dataview.filters.length){var t=this.getrowdata(r);t&&(r=t.dataindex,void 0==r&&(r=this.getboundindex(l)))}r=-1!=e.indexOf(r);e=this.getboundindex(l)+"_"+c;if(-1!=this.selectionmode.indexOf("cell"))f=void 0!=this.selectedcells[e],void 0!=this.selectedcells[e]&&f?this._selectcellwithstyle(b,!1,d,c,q):this._selectcellwithstyle(b,
!0,d,c,q),h&&void 0==this._lastClickedCell&&(b=this.getselectedcells())&&0<b.length&&(this._lastClickedCell={row:b[0].rowindex,column:b[0].datafield}),h&&this._lastClickedCell&&(this._selectpath(l.visibleindex,c),this.mousecaptured=!1,"visible"==this.selectionarea.css("visibility")&&this.selectionarea.css("visibility","hidden"));else if(r?f?this._applyrowselection(this.getboundindex(l),!1):this._selectrowwithstyle(b,q,!1,c):this._selectrowwithstyle(b,q,!0,c),h&&void 0==this._lastClickedCell&&(b=this.getselectedrowindexes())&&
0<b.length&&(this._lastClickedCell={row:b[0],column:c}),h&&this._lastClickedCell){this.selectedrowindexes=[];b=this._lastClickedCell?Math.max(this._lastClickedCell.row,l.visibleindex):0;f=this.dataview.loadedrecords;for(d=this._lastClickedCell?Math.min(this._lastClickedCell.row,l.visibleindex):0;d<=b;d++)(l=f[d])&&this._applyrowselection(this.getboundindex(l),!0,!1,!1);this._rendervisualrows()}}else this._clearselectstyle(),this._selectrowwithstyle(b,q,!0,c),-1!=this.selectionmode.indexOf("cell")&&
this._selectcellwithstyle(b,!0,d,c,q);h||(this._lastClickedCell={row:l.visibleindex,column:c})}}},_selectcellwithstyle:function(b,d,e,g,f){b=c(f.cells[b._getcolumnindex(g)]);b.removeClass(this.toTP("jqx-grid-cell-hover"));b.removeClass(this.toTP("jqx-fill-state-hover"));d?(b.addClass(this.toTP("jqx-grid-cell-selected")),b.addClass(this.toTP("jqx-fill-state-pressed"))):(b.removeClass(this.toTP("jqx-grid-cell-selected")),b.removeClass(this.toTP("jqx-fill-state-pressed")))},_selectrowwithstyle:function(b,
d,e,g){g=d.cells.length;var f=0;b.rowdetails&&b.showrowdetailscolumn?this.rtl?g=g-1-this.groups.length:f=1+this.groups.length:this.groupable&&(this.rtl?g-=this.groups.length:f=this.groups.length);for(;f<g;f++){var h=d.cells[f];e?(c(h).removeClass(this.toTP("jqx-grid-cell-hover")),c(h).removeClass(this.toTP("jqx-fill-state-hover")),-1==b.selectionmode.indexOf("cell")&&(c(h).addClass(this.toTP("jqx-grid-cell-selected")),c(h).addClass(this.toTP("jqx-fill-state-pressed")))):(c(h).removeClass(this.toTP("jqx-grid-cell-hover")),
c(h).removeClass(this.toTP("jqx-grid-cell-selected")),c(h).removeClass(this.toTP("jqx-fill-state-hover")),c(h).removeClass(this.toTP("jqx-fill-state-pressed")))}},_handlemousemoveselection:function(b,d){if(d.hScrollInstance.isScrolling()||d.vScrollInstance.isScrolling())return!1;if(("multiplerowsextended"==d.selectionmode||"multiplecellsextended"==d.selectionmode||"multiplecellsadvanced"==d.selectionmode)&&d.mousecaptured){if(d.multipleselectionbegins&&!1===d.multipleselectionbegins(b))return!0;var e=
this.showheader?this.columnsheader.height()+2:0,g=this._groupsheader()?this.groupsheader.height():0,f=this.showtoolbar?this.toolbar.height():0,g=g+f,f=this.host.coord();if(this.hasTransform){var f=c.jqx.utilities.getOffset(this.host),h=this._getBodyOffset();f.left-=h.left;f.top-=h.top}"0px"===this.host.css("border-top-width")&&(g-=2);var l=b.pageX,h=b.pageY-g;if(3<Math.abs(this.mousecaptureposition.left-l)||3<Math.abs(this.mousecaptureposition.top-h)){parseInt(this.columnsheader.coord().top);this.hasTransform&&
c.jqx.utilities.getOffset(this.columnsheader);l<f.left&&(l=f.left);l>f.left+this.host.width()&&(l=f.left+this.host.width());e=f.top+e;h<e&&(h=e+5);var q=parseInt(Math.min(d.mousecaptureposition.left,l)),e=-5+parseInt(Math.min(d.mousecaptureposition.top,h)),r=parseFloat(Math.abs(d.mousecaptureposition.left-l)),t=parseInt(Math.abs(d.mousecaptureposition.top-h)),q=q-f.left,e=e-f.top;this.selectionarea.css("visibility","visible");if("multiplecellsadvanced"==d.selectionmode){var l=q,w=l+r,z=d.hScrollInstance,
h=z.value;this.rtl&&"hidden"!=this.hScrollBar.css("visibility")&&(h=z.max-z.value);var B=d.table[0].rows[0],v=0,y=z=d.mousecaptureposition.clickedcell,v=!1,C=0,D=B.cells.length;d.mousecaptureposition.left<=b.pageX&&(C=z);for(var E=!1;C<D;C++){var F=parseFloat(c(this.columnsrow[0].cells[C]).css("left")),G=F-h;if(d.columns.records[C].pinned&&!d.columns.records[C].hidden)if(C==z&&(E=!0),F+=c(this.columnsrow[0].cells[C]).width(),d.mousecaptureposition.left>b.pageX){if(F>=l&&l>=G){y=C;v=!0;break}}else{if(F>=
w&&w>=G){y=C;v=!0;break}}else{if(E){v=!0;y--;break}F=this._getcolumnat(C);if(!(null!=F&&F.hidden||d.groupable&&0<d.groups.length&&C<d.groups.length))if(F=G+c(this.columnsrow[0].cells[C]).width(),d.mousecaptureposition.left>b.pageX){if(F>=l&&l>=G){y=C;v=!0;break}}else if(F>=w&&w>=G){y=C;v=!0;break}}}if(!v)if(d.mousecaptureposition.left>b.pageX)c.each(this.columns.records,function(b,e){if(d.groupable&&0<d.groups.length&&b<d.groups.length)return!0;if(!this.pinned&&!this.hidden)return y=b,!1});else if(!d.groupable||
d.groupable&&0< !d.groups.length)y=B.cells.length-1;C=z;z=Math.min(z,y);y=Math.max(C,y);e=e+5+g;d.table[0].rows.indexOf(d.mousecaptureposition.clickedrow);B=0;w=l=-1;for(C=D=0;C<d.table[0].rows.length;C++){G=c(d.table[0].rows[C]);0==C&&(D=G.coord().top);var F=G.height(),H=D-f.top;if(-1==l&&H+F>=e){for(var v=!1,M=0;M<d.groups.length;M++){var P=G[0].cells[M].className;if(-1!=P.indexOf("jqx-grid-group-collapse")||-1!=P.indexOf("jqx-grid-group-expand")){v=!0;break}}if(v)continue;l=C}D+=F;if(d.groupable&&
0<d.groups.length){v=!1;for(M=0;M<d.groups.length;M++)if(P=G[0].cells[M].className,-1!=P.indexOf("jqx-grid-group-collapse")||-1!=P.indexOf("jqx-grid-group-expand")){v=!0;break}if(v)continue;v=0;for(M=d.groups.length;M<G[0].cells.length;M++)""==c(G[0].cells[M]).html()&&v++;if(v==G[0].cells.length-d.groups.length)continue}-1!=l&&(B+=F);if(H+F>e+t){w=C;break}}if(-1!=l&&(e=c(d.table[0].rows[l]).coord().top-f.top-g-2,g=0,this.filterable&&this.showfilterrow&&(g=this.filterrowheight),0>parseFloat(d.table[0].style.top)&&
e<this.rowsheight+g&&(e-=parseFloat(d.table[0].style.top),B+=parseFloat(d.table[0].style.top)),t=B,f=c(this.columnsrow[0].cells[z]),g=c(this.columnsrow[0].cells[y]),q=parseFloat(f.css("left")),r=parseFloat(g.css("left"))-parseFloat(q)+g.width()-2,q-=h,E&&(q+=h),d.editcell&&d.editable&&d.endcelledit&&(z!=y||l!=w))){if(0==d.editcell.validated)return;d.endcelledit(d.editcell.row,d.editcell.column,!0,!0)}}this.selectionarea.width(r);this.selectionarea.height(t);this.selectionarea.css("left",q);this.selectionarea.css("top",
e)}}},_handlemouseupselection:function(b,d){if(this.selectionarea){if("visible"!=this.selectionarea[0].style.visibility)return d.mousecaptured=!1,!0;if(d.mousecaptured&&("multiplerowsextended"==d.selectionmode||"multiplerowsadvanced"==d.selectionmode||"multiplecellsextended"==d.selectionmode||"multiplecellsadvanced"==d.selectionmode)&&(d.mousecaptured=!1,"visible"==this.selectionarea.css("visibility"))){this.selectionarea.css("visibility","hidden");var e=this.showheader?this.columnsheader.height()+
2:0,g=this._groupsheader()?this.groupsheader.height():0;"0px"===this.host.css("border-top-width")&&(g-=2);var f=this.showtoolbar?this.toolbar.height():0,g=g+f,h=this.selectionarea.coord(),l=this.host.coord();this.hasTransform&&(l=c.jqx.utilities.getOffset(this.host),h=c.jqx.utilities.getOffset(this.selectionarea));"0px"===this.host.css("border-top-width")&&(g-=2);var f=h.left-l.left,q=e=h.top-e-l.top-g,g=f+this.selectionarea.width(),r=[],h=[];if("multiplerowsextended"==d.selectionmode){for(;e<q+this.selectionarea.height();){var t=
this._hittestrow(f,e),l=t.row,w=t.index;-1==w||h[w]||(h[w]=!0,r[r.length]=t);e+=20}q=0;c.each(r,function(){var e=this.row;"none"!=d.selectionmode&&d._selectrowwithmouse&&(b.ctrlKey||b.metaKey?d._applyrowselection(d.getboundindex(e),!0,!1,!1):0==q?d._applyrowselection(d.getboundindex(e),!0,!1,!0):d._applyrowselection(d.getboundindex(e),!0,!1,!1),q++)})}else{"multiplecellsadvanced"==d.selectionmode&&(e+=2);l=d.hScrollInstance;r=l.value;this.rtl&&("hidden"!=this.hScrollBar.css("visibility")&&(r=l.max-
l.value),"hidden"!=this.vScrollBar[0].style.visibility&&(r-=this.scrollbarsize+4));var z=d.table[0].rows[0],B=d.selectionarea.height();!b.ctrlKey&&!b.metaKey&&0<B&&(d.selectedcells=[]);for(;e<q+B;){if(t=d._hittestrow(f,e))if(l=t.row,w=t.index,-1!=w&&!h[w])for(h[w]=!0,t=0;t<z.cells.length;t++){var w=parseFloat(c(d.columnsrow[0].cells[t]).css("left"))-r,v=w+c(d.columnsrow[0].cells[t]).width();(f>=w&&f<=v||g>=w&&g<=v||w>=f&&w<=g)&&d._applycellselection(d.getboundindex(l),d._getcolumnat(t).datafield,
!0,!1)}e+=5}}d.autosavestate&&d.savestate&&d.savestate();d._renderrows(d.virtualsizeinfo)}}},selectprevcell:function(b,d){var e=this._getcolumnindex(d),e=this._getprevvisiblecolumn(e);null!=e&&(this.clearselection(),this.selectcell(b,e.datafield))},selectnextcell:function(b,d){var e=this._getcolumnindex(d),e=this._getnextvisiblecolumn(e);null!=e&&(this.clearselection(),this.selectcell(b,e.datafield))},_getfirstvisiblecolumn:function(){for(var b=this.columns.records.length,d=0;d<b;d++){var e=this.columns.records[d];
if(!e.hidden&&null!=e.datafield)return e}return null},_getlastvisiblecolumn:function(){for(var b=this.columns.records.length-1;0<=b;b--){var d=this.columns.records[b];if(!d.hidden&&null!=d.datafield)return d}return null},_handlekeydown:function(b,d){if(d.disabled)return!1;var e=b.charCode?b.charCode:b.keyCode?b.keyCode:0;if(d.editcell&&"multiplecellsadvanced"!=d.selectionmode)return!0;if(d.editcell&&"multiplecellsadvanced"==d.selectionmode)if(33<=e&&40>=e){if(b.altKey||void 0!=d._cancelkeydown&&0!=
d._cancelkeydown)return d._cancelkeydown=!1,!0;if("selectedrow"!==d.editmode){if(d.endcelledit(d.editcell.row,d.editcell.column,!1,!0),d._cancelkeydown=!1,d.editcell&&!d.editcell.validated)return d._rendervisualrows(),d.endcelledit(d.editcell.row,d.editcell.column,!1,!0),!1}else return!0}else return!0;if("none"==d.selectionmode||d.showfilterrow&&d.filterable&&this.filterrow&&c(b.target).ischildof(d.filterrow)||d.showeverpresentrow&&(d.addnewrowtop&&c(b.target).ischildof(d.addnewrowtop)||d.addnewrowbottom&&
c(b.target).ischildof(d.addnewrowbottom))||b.target.className&&0<=b.target.className.indexOf("jqx-grid-widget")||d.pageable&&c(b.target).ischildof(this.pager)||this.showtoolbar&&c(b.target).ischildof(this.toolbar)||this.showstatusbar&&c(b.target).ischildof(this.statusbar))return!0;var g=!1;if(b.altKey)return!0;if((b.ctrlKey||b.metaKey)&&this.clipboard){var f=String.fromCharCode(e).toLowerCase();if(this.clipboardbegin){var h=null;"c"==f?h=this.clipboardbegin("copy",this.copyselection()):"x"==f?h=this.clipboardbegin("cut",
this.copyselection()):"v"==f&&(h=this.clipboardbegin("paste"));if(!1===h)return!1}if("c"==f||"x"==f){h=this.copyselection();"c"==f&&this.clipboardend&&this.clipboardend("copy");"x"==f&&this.clipboardend&&this.clipboardend("cut");if(window.clipboardData)window.clipboardData.setData("Text",h);else{var l=c('<textarea style="position: absolute; left: -1000px; top: -1000px;"/>');l.val(h);c("body").append(l);l.select();setTimeout(function(){document.designMode="off";l.select();l.remove();d.focus()},100)}if("c"==
f&&c.jqx.browser.msie)return!1;if("c"==f)return!0}else if("v"==f){var q=c('<textarea style="position: absolute; left: -1000px; top: -1000px;"/>');c("body").append(q);q.select();var r=this;setTimeout(function(){r._clipboardselection=[];var b=q.val();0==b.length&&window.clipboardData&&(q.val(window.clipboardData.getData("Text")),b=q.val());for(var b=b.split("\n"),d=0;d<b.length;d++)if(0<b[d].split("\t").length){var e=b[d].split("\t");(1!=e.length||d!=b.length-1||""!=e[0])&&0<e.length&&r._clipboardselection.push(e)}r.pasteselection();
q.remove();r.focus()},100);return!0}if("x"==f)return this.deleteselection(),this.host.focus(),!1}var f=Math.round(d._gettableheight()),t=Math.round(f/d.rowsheight),w=d.getdatainformation();switch(d.selectionmode){case "singlecell":case "multiplecells":case "multiplecellsextended":case "multiplecellsadvanced":h=d.getselectedcell();null===h&&d.selectcell(0,d.columns.records[0].displayfield);if(null!=h){var f=this.getrowvisibleindex(h.rowindex),z=h.datafield,B=d._getcolumnindex(z),v=function(e,c,f,h){var l=
function(e,c){var l=d.dataview.loadedrecords[e];if(d.groupable&&0<d.groups.length){var v=e;"up"==h&&v++;"down"==h&&v--;for(var l=d.getdisplayrows()[v],q=1,y=!0;y&&300>q;){y=!1;"down"==h?l=d.getdisplayrows()[v+q]:"up"==h&&(l=d.getdisplayrows()[v-q]);if(!l)break;l&&l.group&&(y=!0);for(var r=l.parentItem;r;){var t;if(t=r)t=r.group?d.expandedgroups[r.uniqueid]?d.expandedgroups[r.uniqueid].expanded:void 0:!1,t=!t;t&&(y=!0);r=r.parentItem}if(!y)break;q++}300==q&&(l=null);if(d.pageable&&(v=!1,l)){for(q=
0;q<d.dataview.rows.length;q++)d.dataview.rows[q].boundindex==l.boundindex&&(v=!0);v||(l=null)}}else if(d.pageable&&(v=!1,l)){for(q=0;q<d.dataview.rows.length;q++)d.dataview.rows[q].boundindex==l.boundindex&&(v=!0);if(!v)return d.pagerpageinput&&9===b.keyCode&&l.boundindex>d.dataview.rows[d.dataview.rows.length-1].boundindex&&(d.pagerpageinput.focus(),b.preventDefault()),!0}return void 0!=l&&null!=c?((f||void 0==f)&&d.clearselection(),l=d.getboundindex(l),d.selectcell(l,c),d._oldselectedcell=d.selectedcell,
g=!0,d.ensurecellvisible(e,c),!0):!1};l(e,c)||(d.ensurecellvisible(e,c),l(e,c),d.virtualmode&&d.host.focus());d.groupable&&0<d.groups.length||(b.shiftKey&&9!=b.keyCode?"multiplecellsextended"!=d.selectionmode&&"multiplecellsadvanced"!=d.selectionmode||!d._lastClickedCell||(d._selectpath(e,c),e=d.getboundindex(d.dataview.loadedrecords[e]),d.selectedcell={rowindex:e,datafield:c}):b.shiftKey||(d._lastClickedCell={row:e,column:c}))},y=b.shiftKey&&"singlecell"!=d.selectionmode&&"multiplecells"!=d.selectionmode,
h=function(){v(0,z,!y)},C=function(){v(w.rowscount-1,z,!y)},D=9==e&&!b.shiftKey,E=9==e&&b.shiftKey;if(d.rtl)var F=D,D=E,E=F;if(D||E)y=!1;if((D||E)&&document.activeElement&&document.activeElement.className&&0<=document.activeElement.className.indexOf("jqx-grid-cell-add-new-row"))return!0;(F=b.ctrlKey||b.metaKey)&&37==e?(t=d._getfirstvisiblecolumn(B),null!=t&&v(f,t.datafield)):F&&39==e?(t=d._getlastvisiblecolumn(B),null!=t&&v(f,t.datafield)):39==e||D?(t=d._getnextvisiblecolumn(B),null!=t?v(f,t.datafield,
!y):D?(t=d._getfirstvisiblecolumn(),e=40,z=t.displayfield):g=!0):37==e||E?(t=d._getprevvisiblecolumn(B),null!=t?v(f,t.datafield,!y):E?(t=d._getlastvisiblecolumn(),e=38,z=t.displayfield):g=!0):36==e?h():35==e?C():33==e?0<=f-t?v(f-t,z,!y):h():34==e&&(w.rowscount>f+t?v(f+t,z,!y):C());38==e&&(F?h():0<f?v(f-1,z,!y,"up"):g=!1);40==e&&(F?C():w.rowscount>f+1||d.groupable&&0<d.groups.length?v(f+1,z,!y,"down"):g=!0)}break;case "singlerow":case "multiplerows":case "multiplerowsextended":case "multiplerowsadvanced":f=
d.getselectedrowindex();if(null==f||-1==f)return!0;var f=this.getrowvisibleindex(f),G=function(c,f,h){var l=function(b){var e=d.dataview.loadedrecords[b];if(d.groupable&&0<d.groups.length){"up"==h&&b++;"down"==h&&b--;for(var e=d.getdisplayrows()[b],c=1,l=!0;l&&300>c;){l=!1;"down"==h?e=d.getdisplayrows()[b+c]:"up"==h&&(e=d.getdisplayrows()[b-c]);if(!e)break;e&&e.group&&(l=!0);for(var v=e.parentItem;v;){var q;if(q=v)q=v.group?d.expandedgroups[v.uniqueid]?d.expandedgroups[v.uniqueid].expanded:void 0:
!1,q=!q;q&&(l=!0);v=v.parentItem}if(!l)break;c++}300==c&&(e=null);if(d.pageable&&(c=!1,e)){for(l=0;l<d.dataview.rows.length;l++)d.dataview.rows[l].boundindex==e.boundindex&&(c=!0);c||(e=null)}}return void 0!=e?(e=d.getboundindex(e),c=d.selectedrowindex,(f||void 0==f)&&d.clearselection(),d.selectedrowindex=c,d.selectrow(e,!1),(!d.ensurerowvisible(b)||d.autoheight||d.groupable)&&d._rendervisualrows(),g=!0):!1};l(c)||(d.ensurerowvisible(c),l(c,f),d.virtualmode&&setTimeout(function(){l(c,f)},25),d.virtualmode&&
d.host.focus());d.groupable&&0<d.groups.length||(b.shiftKey&&9!=e?"multiplerowsextended"==d.selectionmode&&d._lastClickedCell&&(d._selectrowpath(c),d.selectedrowindex=d.getrowboundindex(c)):b.shiftKey||(d._lastClickedCell={row:c},d.selectedrowindex=d.getrowboundindex(c)))},y=b.shiftKey&&"singlerow"!=d.selectionmode&&"multiplerows"!=d.selectionmode,h=function(){G(0,!y)},C=function(){G(w.rowscount-1,!y)},F=b.ctrlKey||b.metaKey;36==e||F&&38==e?h():35==e||F&&40==e?C():33==e?0<=f-t?G(f-t,!y):h():34==e?
w.rowscount>f+t?G(f+t,!y):C():38==e?0<f?G(f-1,!y,"up"):g=!0:40==e&&(w.rowscount>f+1||d.groupable&&0<d.groups.length?G(f+1,!y,"down"):g=!0)}return g?(d.autosavestate&&d.savestate&&d.savestate(),!1):!0},_handlemousemove:function(b,d){if(!d.vScrollInstance.isScrolling()&&!d.hScrollInstance.isScrolling()){var e,g,f,h;if(d.enablehover||"multiplerows"==d.selectionmode)e=this.showheader?this.columnsheader.height()+2:0,g=this._groupsheader()?this.groupsheader.height():0,g+=this.showtoolbar?this.toolbarheight:
0,f=this.host.coord(),this.hasTransform&&(f=c.jqx.utilities.getOffset(this.host),h=this._getBodyOffset(),f.left-=h.left,f.top-=h.top),h=b.pageX-f.left,e=b.pageY-e-f.top-g;if("multiplerowsextended"!=d.selectionmode&&"multiplecellsextended"!=d.selectionmode&&"multiplecellsadvanced"!=d.selectionmode||1!=d.mousecaptured)if(d.enablehover){if(!d.disabled&&!this.vScrollInstance.isScrolling()&&!this.hScrollInstance.isScrolling()&&(e=this._hittestrow(h,e))){var l=e.row;e=e.index;if(-1==this.hoveredrow||-1==
e||this.hoveredrow!=e||-1!=this.selectionmode.indexOf("cell")||"checkbox"==this.selectionmode)if(this._clearhoverstyle(),-1!=e&&void 0!=l&&(g=this.hittestinfo[e].visualrow,null!=g&&!(this.hittestinfo[e].details||b.clientX>c(g).width()+c(g).coord().left))){var q=0;f=g.cells.length;d.rowdetails&&d.showrowdetailscolumn?this.rtl?f=f-1-this.groups.length:q=1+this.groups.length:this.groupable&&(this.rtl?f-=this.groups.length:q=this.groups.length);if(0!=g.cells.length){var r=g.cells[q].className;if(!(l.group||
0<=this.selectionmode.indexOf("row")&&-1!=r.indexOf("jqx-grid-cell-selected")))if(this.hoveredrow=e,-1!=this.selectionmode.indexOf("cell")||"checkbox"==this.selectionmode){var l=-1,t=this.hScrollInstance,r=t.value;for(this.rtl&&"hidden"!=this.hScrollBar.css("visibility")&&(r=t.max-t.value);q<f;q++)if(t=parseInt(c(this.columnsrow[0].cells[q]).css("left"))-r,this.columns.records[q].pinned&&!this.rtl&&(t=parseInt(c(this.columnsrow[0].cells[q]).css("left"))),t+c(this.columnsrow[0].cells[q]).width()>=
h&&h>=t){l=q;break}if(-1!=l&&(h=g.cells[l],this.cellhover&&this.cellhover(h,b.pageX,b.pageY),-1==h.className.indexOf("jqx-grid-cell-selected"))){if(this.editcell&&(g=this._getcolumnat(l))&&this.editcell.row==e&&this.editcell.column==g.datafield)return;c(h).addClass(this.toTP("jqx-grid-cell-hover"));c(h).addClass(this.toTP("jqx-fill-state-hover"))}}else for(;q<f;q++)h=g.cells[q],c(h).addClass(this.toTP("jqx-grid-cell-hover")),c(h).addClass(this.toTP("jqx-fill-state-hover")),this.cellhover&&this.cellhover(h,
b.pageX,b.pageY)}}}}else return!0}}})})(jqxBaseFramework);
(function(c){c.jqx.dataview.grouping=function(){this.loadgrouprecords=function(b,d,e,g,f,h,l,q,r){for(var t=b,t=[],w=0;w<this.groups.length;w++)t[w]=this.generatekey();g=[];var z=0,B=[],v=d,y=d,C=this.groups.length;this.loadedrecords=[];this.bounditems=[];this.loadedrecords=[];this.loadedrootgroups=[];this.loadedgroups=[];this.loadedgroupsByKey=[];this.sortedgroups=[];var D=null!=this.sortdata,E=D?this.sortdata:this.records;if(this.pageable){var F=[],G=0;E[d]||(c.each(E,function(b,e){F[d+b++]=this}),
E=F)}if(this.virtualmode){F=[];for(v=G=0;v<e-d;v++)E[v]?F[d+G++]=E[v]:E[d+G]&&(F[d+G]=E[d+G],G++);v=0;E=F}for(G=d;G<e;G++){var H={},H=D?c.extend({},E[G].value):c.extend({},E[G]);id=H[this.uniqueId];if(f>=q||id!=l[f][this.uniqueId]||h&&h[id])r[r.length]=f;for(var M=[],P=0,w=0;w<C;w++){var J=this.groups[w],J=H[J];null==J&&(J="");M[P++]={value:J,hash:t[w]}}if(M.length!=C)break;for(var J=null,w="",P=-1,O=0;O<M.length;O++){P++;var W=M[O].value,w=w+"_"+M[O].hash+"_"+W;if(void 0!=B[w]&&null!=B[w])J=B[w];
else{if(null==J)J={group:W,subItems:[],subGroups:[],level:0},g[z++]=J,J.uniqueid=this.generatekey(),this.loadedgroupsByKey[W]=J;else{var X={group:W,subItems:[],subGroups:[],parentItem:J,level:J.level+1};this.loadedgroupsByKey[J.uniqueid+"_"+W]=X;X.uniqueid=this.generatekey();J=J.subGroups[J.subGroups.length++]=X}B[w]=J}}null!=J?(void 0==H.uid&&(H.uid=this.getid(this.source.id,H,v)),D?(H.boundindex=E[G].index,this.recordsbyid["id"+H.uid]=E[G].value):(H.boundindex=v,this.recordsbyid["id"+H.uid]=E[G]),
this.bounditems[H.boundindex]=H,this.sortedgroups[v]=H,H.uniqueid=this.generatekey(),H.parentItem=J,H.level=J.level+1,J.subItems[J.subItems.length++]=H):(void 0==H.uid&&(H.uid=this.getid(this.source.id,H,v)),D?(H.boundindex=E[G].index,this.recordsbyid["id"+H.uid]=E[G].value):(H.boundindex=v,this.recordsbyid["id"+H.uid]=E[G]),this.sortedgroups[v]=H,this.bounditems[H.boundindex]=H,H.uniqueid=this.generatekey());f++;v++;y++}var N=function(d,e,c){for(var g=0;g<e.subItems.length;g++)e.subItems[g].visibleindex=
b+c,d.rows[c]=e.subItems[g],d.loadedrecords[c]=e.subItems[g],c++;return c},U=function(d,e,c){var g=1,f=d.grid.columns.records?d.grid.columns.records:d.grid.columns;if(1==d.aggregates)for(var h=0;h<f.length;h++)f[h].aggregates&&(g=Math.max(g,f[h].aggregates.length));for(subGroup in e.subGroups)h=e.subGroups[subGroup],h.subGroups&&(d.loadedgroups[d.loadedgroups.length]=h,h.visibleindex=b+c,d.rows[c]=h,d.loadedrecords[c]=h,c++,0<h.subGroups.length?c=U(d,h,c):0<h.subItems.length&&(c=N(d,h,c)));0<e.subItems.length&&
(c=N(d,e,c));(function(e){if(1==d.aggregates)for(var h=function(g){var h=e,l={},v=function(b){for(var e=0;e<f.length;e++)if(f[e].aggregates)for(var c=d.grid.getcolumnaggregateddata(f[e].datafield,f[e].aggregates,!0,b),h=0;h<f[e].aggregates.length;h++)if(f[e].aggregates[g]){var v=f[e],q=f[e].aggregates[g],y=q,y=d.grid._getaggregatename(y),r=y+":"+c[q];l[v.datafield]=c[q]?r:y+":"+c[y]}};if(null!=h)if(l.level=h.level,l.visibleindex=b+c,l.uniqueid=d.generatekey(),d.rows[c]=l,d.loadedrecords[c++]=l,l.totalsrow=
!0,0<e.subItems.length){h=e.subItems[e.subItems.length-1];l.parentItem=h.parentItem;l.parentItem.subItems&&(l.parentItem.subItems[l.parentItem.subItems.length]=l);var q=[],y=function(){for(var b=0;b<e.subItems.length;b++)e.subItems[b].totalsrow||(q[q.length]=e.subItems[b])};y(e);v(q)}else 0<e.subGroups.length&&(h=e.subGroups[e.subGroups.length-1],l.level=h.level,l.parentItem=e,e.subGroups[e.subGroups.length]=l,q=[],y=function(b){if(!b.totalsrow){for(var d=0;d<b.subItems.length;d++)b.subItems[d].totalsrow||
(q[q.length]=b.subItems[d]);for(d=0;d<b.subGroups.length;d++)y(b.subGroups[d])}},y(e),v(q))},l=0;l<g;l++)h(l)})(e);return c};e=g.length;this.loadedgroups=[];this.rows=[];for(v=t=0;v<e;v++)J=g[v],this.loadedrootgroups[v]=J,this.loadedgroups[this.loadedgroups.length]=J,J.visibleindex=b+t,this.rows[t]=J,this.loadedrecords[t]=J,t++,t=U(this,J,t);return t};this._updategroupsinpage=function(b,d,e,g,f,h,l){var q=[];if(this.groupable&&0<this.groups.length){d=0;f=[];for(var r=[],t=0;t<b.groups.length;t++)r[t]=
b.generatekey();var w=0,z=[],B=0;l>this.totalrecords&&(l=this.totalrecords);for(;h<l;h++){var v=c.extend({},b.sortedgroups[h]);id=v[b.uniqueId];if(!b.pagesize||e>=b.pagesize*b.pagenum&&e<b.pagesize*(b.pagenum+1)){for(var y=[],C=0,t=0;t<b.groups.length;t++){var D=b.groups[t],D=v[D];null==D&&(D="");y[C++]={value:D,hash:r[t]}}if(y.length!=b.groups.length)break;for(var t=null,C="",D=-1,E=0;E<y.length;E++){D++;var F=y[E].value,C=C+"_"+y[E].hash+"_"+F;if(void 0!=f[C]&&null!=f[C])t=f[C];else{if(null==t)t=
{group:F,subItems:[],subGroups:[],level:0},z[B++]=t,F=b.loadedgroupsByKey[F],void 0!=F&&(t.visibleindex=F.visibleindex,t.uniqueid=F.uniqueid);else{var G={group:F,subItems:[],subGroups:[],parentItem:t,level:t.level+1},F=b.loadedgroupsByKey[t.uniqueid+"_"+F];G.visibleindex=F.visibleindex;G.uniqueid=F.uniqueid;t=t.subGroups[t.subGroups.length++]=G}f[C]=t}}null!=t&&(v.parentItem=t,v.level=t.level+1,t.subItems[t.subItems.length++]=v);g++}w++;e++}for(var H=function(b,d,e){for(b=0;b<d.subItems.length;b++)q[e]=
c.extend({},d.subItems[b]),e++;return e},M=function(b){for(subGroup in b.subGroups){var d=b.subGroups[subGroup];if(d.subGroups&&(0<d.subGroups.length&&M(d)||0<d.subItems.length))return!0}return 0<b.subItems.length?!0:!1},P=function(b,d,e){var c=1,g=b.grid.columns.records?b.grid.columns.records:b.grid.columns;if(1==b.aggregates)for(var f=0;f<g.length;f++)g[f].aggregates&&(c=Math.max(c,g[f].aggregates.length));f=function(d){if(1==b.aggregates)for(var f=function(c){var f=d,h={},l=function(d){for(var e=
0;e<g.length;e++)if(g[e].aggregates)for(var f=b.grid.getcolumnaggregateddata(g[e].datafield,g[e].aggregates,!0,d),l=0;l<g[e].aggregates.length;l++)if(g[e].aggregates[c]){var v=g[e],q=g[e].aggregates[c],y=q,y=b.grid._getaggregatename(y);h[v.datafield]=y+":"+f[q]}};if(null!=f)if(h.level=f.level,h.visibleindex=e,h.uniqueid=b.generatekey(),q[e]=h,b.loadedrecords[e++]=h,h.totalsrow=!0,0<d.subItems.length){f=d.subItems[d.subItems.length-1];h.parentItem=f.parentItem;h.parentItem.subItems&&(h.parentItem.subItems[h.parentItem.subItems.length]=
h);var v=[],y=function(){for(var b=0;b<d.subItems.length;b++)d.subItems[b].totalsrow||(v[v.length]=d.subItems[b])};y(d);l(v)}else 0<d.subGroups.length&&(f=d.subGroups[d.subGroups.length-1],h.level=f.level,h.parentItem=d,d.subGroups[d.subGroups.length]=h,v=[],y=function(b){if(!b.totalsrow){for(var d=0;d<b.subItems.length;d++)b.subItems[d].totalsrow||(v[v.length]=b.subItems[d]);for(d=0;d<b.subGroups.length;d++)y(b.subGroups[d])}},y(d),l(v))},h=0;h<c;h++)f(h)};for(subGroup in d.subGroups){var h=d.subGroups[subGroup];
h.subGroups&&M(h)&&(q[e]=h,e++,0<h.subGroups.length?e=P(b,h,e):0<h.subItems.length&&(e=H(b,h,e)),f(h))}0<d.subItems.length&&(e=H(b,d,e));f(d);return e},w=0;w<z.length;w++)D=z[w],M(D)&&(q[d]=D,d++,d=P(this,D,d))}return q}};c.extend(c.jqx._jqxGrid.prototype,{_initgroupsheader:function(){this.groupsheader.css("visibility","hidden");if(this._groupsheader()){this.groupsheader.css("visibility","inherit");var b=this,d=this.gridlocalization.groupsheaderstring;this.groupsheaderdiv=this.groupsheaderdiv||c('<div style="width: 100%; position: relative;"></div>');
this.groupsheaderdiv.height(this.groupsheaderheight);this.groupsheaderdiv.css("top",0);this.groupsheader.append(this.groupsheaderdiv);this.groupheadersbounds=[];var e=this.groups.length;this.groupsheaderdiv.children().remove();this.groupsheaderdiv[0].innerHTML="";var g=[];0<e?c.each(this.groups,function(d){var h=this,l=b._getColumnText(this).label,l=b._rendergroupcolumn(l,h);l.addClass(b.toThemeProperty("jqx-grid-group-column"));b.groupsheaderdiv.append(l);if(b.closeablegroups){var q=c(l.find(".jqx-icon-close"));
b.isTouchDevice()&&!0!==b.touchmode?b.addHandler(q,"touchstart",function(){b.removegroupat(d);return!1}):b.addHandler(q,"click",function(){b.removegroupat(d);return!1})}b.sortable&&b.addHandler(l,"click",function(){var d=b.getcolumn(h);null!=d&&b._togglesort(d);return!1});g[g.length]=l;b._handlegroupstocolumnsdragdrop(this,l);d<e-1&&(l=l.height(),q=c('<div style="float: left; position: relative;"></div>'),b.rtl&&q.css("float","right"),q.width(b.groupindentwidth/3),q.height(1),q.css("top",l/2),q.addClass(b.toThemeProperty("jqx-grid-group-column-line")),
b.groupsheaderdiv.append(q))}):(d=c('<div style="position: relative;">'+d+"</div>"),this.groupsheaderdiv.append(d),this.rtl&&d.addClass(this.toThemeProperty("jqx-rtl")));this._groupheaders=g;this._updategroupheadersbounds()}},_updategroupheadersbounds:function(){var b=this,d=this.groupsheaderdiv.children().outerHeight(),d=(this.groupsheader.height()-d)/2;this.groupsheaderdiv.css("top",d);this.rtl?(this.groupsheaderdiv.css("left",""),this.groupsheaderdiv.css("right",d)):(this.groupsheaderdiv.css("left",
d),this.groupsheaderdiv.css("right",""));this.rtl&&this._groupheaders.reverse();c.each(this._groupheaders,function(d){var c=this.coord();b.groupheadersbounds[d]={left:c.left,top:c.top,width:this.outerWidth(),height:this.outerHeight(),index:d}})},addgroup:function(b){b&&(this.groups!==this.dataview.groups&&(this.dataview.groups=this.groups),this.groups[this.groups.length]=b,this.refreshgroups(),this._raiseEvent(12,{type:"Add",index:this.groups[this.groups.length],groups:this.groups}))},insertgroup:function(b,
d){void 0!=b&&null!=b&&0<=b&&b<=this.groups.length&&d&&(this.groups!==this.dataview.groups&&(this.dataview.groups=this.groups),this.groups.splice(b,0,d.toString()),this.refreshgroups(),this._raiseEvent(12,{type:"Insert",index:b,groups:this.groups}))},refreshgroups:function(){this._refreshdataview();this._render(!0,!0,!0,!1);this._postrender("group")},_insertaftergroup:function(b,d){var e=this._getGroupIndexByDataField(b);this.insertgroup(e+1,d)},_insertbeforegroup:function(b,d){var e=this._getGroupIndexByDataField(b);
this.insertgroup(e,d)},removegroupat:function(b){return 0<=b&&null!=b&&void 0!=b?(this.groups!==this.dataview.groups&&(this.dataview.groups=this.groups),this.groups.splice(b,1),this.refreshgroups(),this.virtualmode&&this.updatebounddata(),this._raiseEvent(12,{type:"Remove",index:b,groups:this.groups}),!0):!1},cleargroups:function(){this.groups=[];this.dataview.groups=this.groups;this.refreshgroups();this._raiseEvent(12,{type:"Clear",index:-1,groups:this.groups});return!0},removegroup:function(b){if(null==
b)return!1;b=this.groups.indexOf(b.toString());return this.removegroupat(b)},getrootgroupscount:function(){return this.dataview.loadedrootgroups.length},collapsegroup:function(b){if(0<=b&&-1===b.toString().indexOf("."))return this._setrootgroupstate(b,!1);var d=b.toString().split("."),e=null;this.groupsVisibility||(this.groupsVisibility=[]);for(var c=0;c<d.length;c++)if(b=parseInt(d[c]),0==c)e=this.dataview.loadedrootgroups[b],this.groupsVisibility[e.group]=null;else if(b=e.subGroups[b])e=b,c==d.length-
1&&(this._setgroupstate(e,!1,!0),this.groupsVisibility[e.group]=null)},expandgroup:function(b){if(0<=b&&-1===b.toString().indexOf("."))return this._setrootgroupstate(b,!0);for(var d=b.toString().split("."),e=null,c=0;c<d.length;c++)if(b=parseInt(d[c]),0==c)e=this.dataview.loadedrootgroups[b],this._setrootgroupstate(b,!0),this.groupsVisibility||(this.groupsVisibility=[]),this.groupsVisibility[e.group]=e;else if(b=e.subGroups[b])e=b,this._setgroupstate(e,!0,!0),this.groupsVisibility||(this.groupsVisibility=
[]),this.groupsVisibility[e.group]=e},collapseallgroups:function(b){this._setbatchgroupstate(!1,b)},expandallgroups:function(b){this._setbatchgroupstate(!0,b)},isgroupexpanded:function(b){b=this.dataview.loadedrootgroups[b];return null==b?null:this.expandedgroups[b.uniqueid].expanded},getgroup:function(b){b=this.dataview.loadedrootgroups[b];if(null==b)return null;var d=this.expandedgroups[b.uniqueid].expanded,e=b.group,g=b.level,f=[];this._getsubgroups(f,b);var h=this,d={group:e,level:g,expanded:d,
subgroups:f};if(b.subItems){var l=[];c.each(b.subItems,function(){l[l.length]=h.getrowdata(this.boundindex)});0<l.length&&(d.subrows=l)}return d},getrootgroups:function(){for(var b=this.dataview.loadedrootgroups.length,d=[],e=0;e<b;e++)d[e]=this.getgroup(e);return d},_getsubgroups:function(b,d){var e=this;for(obj in d.subGroups){var g=d.subGroups[obj];b[b.length]={group:g.group,level:g.level,expanded:e.expandedgroups[g.uniqueid].expanded};if(g.subItems){var f=[];c.each(g.subItems,function(){f[f.length]=
e.getrowdata(this.boundindex)});b[b.length-1].subrows=f}g.subGroups&&e._getsubgroups([],g)}return b},_setbatchgroupstate:function(b,d){for(obj in this.dataview.loadedrootgroups)this._setrootgroupstate(obj,b,!1,!0);if(0==d)return this._requiresupdate=!0,this._renderrows(this.virtualsizeinfo),!0;var e=this.vScrollBar[0].style.visibility;this.rendergridcontent(!0,!1);if(e!=this.vScrollBar[0].style.visibility||this._hiddencolumns)this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo);
return!0},_setrootgroupstate:function(b,d,e,c){if(void 0==b||null==b||0>b||!this.groupable||0==this.groups.length)return!1;e=void 0!=e?e:!0;if(0<=b&&b<this.dataview.loadedrootgroups.length){var f=this.dataview.loadedrootgroups[b];if(this.pageable){for(var f=[],h=0;h<this.dataview.rows.length;h++)null!=this.dataview.rows[h].group&&0===this.dataview.rows[h].level&&f.push(this.dataview.rows[h]);f=f[b];if(!f)return}return this._setgroupstate(f,d,e,c)}return!1},_togglegroupstate:function(b,d){if(null==
b||void 0==b)return!1;var e=this.vScrollInstance.value,c=this.expandedgroups[b.uniqueid],c=void 0==c?!1:c.expanded,c=!c;this.groupsVisibility||(this.groupsVisibility=[]);this.groupsVisibility[b.group]=c?b:null;c=this._setgroupstate(b,c,d);this._newmax=null;0!==e&&"hidden"!==this.vScrollBar.css("visibility")&&(e<=this.vScrollInstance.max?this.vScrollInstance.setPosition(e):this.vScrollInstance.setPosition(this.vScrollInstance.max));return c},_setgroupstate:function(b,d,e,c){if(null==b||void 0==b)return!1;
var f=!1;this.editable&&this.editcell&&this.endcelledit(this.editcell.row,this.editcell.column,!1,!1);var h=this.expandedgroups[b.uniqueid];void 0==h&&(h={expanded:!1},f=!0);h.expanded!=d&&(f=!0);if(f){this.expandedgroups[b.uniqueid]={expanded:d,group:b};this._setsubgroupsvisibility(this,b,!d,c);e&&(e=this.vScrollBar[0].style.visibility,this.rendergridcontent(!0,!1),e!=this.vScrollBar[0].style.visibility||this._hiddencolumns)&&(this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo));
if(void 0==this.suspendgroupevents||0==this.suspendgroupevents)d?this._raiseEvent(4,{group:b.group,parentgroup:b.parentItem?b.parentItem.group:null,level:b.level,visibleindex:b.visibleindex}):this._raiseEvent(5,{group:b.group,parentgroup:b.parentItem?b.parentItem.group:null,level:b.level,visibleindex:b.visibleindex});return!0}return!1},_setgroupitemsvisibility:function(b,d,e){for(var c=0;c<d.subItems.length;c++)b._setrowvisibility(d.subItems[c].visibleindex,e,!1)},_setsubgroupsvisibility:function(b,
d,e,c){if(null!=d.parentItem){if(this.hiddens[d.parentItem.visibleindex])return}else if(null==d.parentItem&&this.hiddens[d.visibleindex])return;for(subGroup in d.subGroups){var f=d.subGroups[subGroup];e||b._setrowvisibility(f.visibleindex,e,!1);var h=!e;c?this.expandedgroups[f.uniqueid]={expanded:h,group:f}:h=void 0==b.expandedgroups[f.uniqueid]?!1:b.expandedgroups[f.uniqueid].expanded;f.subGroups&&(0<f.subGroups.length?b._setsubgroupsvisibility(b,f,!h||e,c):0<f.subItems.length&&b._setgroupitemsvisibility(b,
f,!h||e));e&&b._setrowvisibility(f.visibleindex,e,!1)}d.subItems&&0<d.subItems.length&&b._setgroupitemsvisibility(b,d,e)},_handlecolumnsdragdrop:function(){var b=this,d=-1,e=!1;if(b.groupable){var g="mousemove.grouping"+this.element.id,f="mouseup.grouping"+this.element.id,h=!1;this.isTouchDevice()&&!0!==this.touchmode&&(h=!0,g=c.jqx.mobile.getTouchEventName("touchmove")+".grouping"+this.element.id,c.jqx.mobile.getTouchEventName("touchstart"),f=c.jqx.mobile.getTouchEventName("touchend")+".grouping"+
this.element.id);this.removeHandler(c(document),g);this.addHandler(c(document),g,function(g){if(!b.showgroupsheader)return!0;if(null!=b.dragcolumn){var f=parseInt(g.pageX),r=parseInt(g.pageY);h&&(r=b.getTouches(g)[0],f=parseInt(r.pageX),r=parseInt(r.pageY));var t=b.host.coord(),w=parseInt(t.left),t=parseInt(t.top);if(void 0==b.dragmousedownoffset||null==b.dragmousedownoffset)b.dragmousedownoffset={left:0,top:0};var z=parseInt(f)-parseInt(b.dragmousedownoffset.left),B=parseInt(r)-parseInt(b.dragmousedownoffset.top);
b.dragcolumn.css({left:z+"px",top:B+"px"});e=!1;f>=w&&f<=w+b.host.width()&&r>=t&&r<=t+b.host.height()&&(e=!0);d=-1;e?(b.dragcolumnicon.removeClass(b.toThemeProperty("jqx-grid-dragcancel-icon")),b.dragcolumnicon.addClass(b.toThemeProperty("jqx-grid-drag-icon")),w=b.groupsheader.coord(),t=w.top+b.groupsheader.height(),z=(z=c.data(b.dragcolumn[0],"datarecord"))?b.groups.indexOf(z.toString()):-1,z=-1==z||1<b.groups.length&&-1<z,null!=b.dropline&&(r>=w.top&&r<=t?z&&(d=b._handlegroupdroplines(f)):b.dropline.fadeOut("slow"))):
(null!=b.dropline&&b.dropline.fadeOut("slow"),b.dragcolumnicon.removeClass(b.toThemeProperty("jqx-grid-drag-icon")),b.dragcolumnicon.addClass(b.toThemeProperty("jqx-grid-dragcancel-icon")));if(h)return g.preventDefault(),g.stopPropagation(),!1}});this.removeHandler(c(document),f);this.addHandler(c(document),f,function(g){if(!b.showgroupsheader)return!0;b.__drag=!1;c(document.body).removeClass("jqx-disableselect");parseInt(g.pageX);var f=parseInt(g.pageY);h&&(g=b.getTouches(g)[0],parseInt(g.pageX),
f=parseInt(g.pageY));g=b.host.coord();parseInt(g.left);var r=parseInt(g.top),t=b.groupsheader.height();b.showtoolbar&&(r+=b.toolbarheight);b.dragstarted=!1;b.dragmousedown=null;null!=b.dragcolumn&&(g=c.data(b.dragcolumn[0],"datarecord"),b.dragcolumn.remove(),b.dragcolumn=null,null!=g&&(b.getcolumn(g).groupable&&e&&(-1!=d?(f=d.index,r=b.groups[f],t=b._getGroupIndexByDataField(g),t!=f&&(void 0!=t&&0<=t&&b.groups.splice(t,1),"before"==d.position?b.rtl?b._insertaftergroup(r,g):b._insertbeforegroup(r,
g):b.rtl?b._insertbeforegroup(r,g):b._insertaftergroup(r,g))):0==b.groups.length?f>r&&f<=r+t&&b.addgroup(g):f>r+t&&(t=b._getGroupIndexByDataField(g),b.removegroupat(t))),null!=b.dropline&&(b.dropline.remove(),b.dropline=null)))})}},_getGroupIndexByDataField:function(b){for(var d=0;d<this.groups.length;d++)if(this.groups[d]==b)return d;return-1},_isColumnInGroups:function(b){for(var d=0;d<this.groups.length;d++)if(this.groups[d]==b)return!0;return!1},_handlegroupdroplines:function(b){var d=this,e=
-1;c.each(d.groupheadersbounds,function(c){if(b<=this.left+this.width/2){var f=this.left-3;0<c&&(f=this.left-1-d.groupindentwidth/6);d.dropline.css("left",f);d.dropline.css("top",this.top);d.dropline.height(this.height);d.dropline.fadeIn("slow");e={index:c,position:"before"};d.rtl&&(e={index:d.groupheadersbounds.length-1-c,position:"before"});return!1}b>=this.left+this.width/2&&(d.dropline.css("left",1+this.left+this.width),d.dropline.css("top",this.top),d.dropline.height(this.height),d.dropline.fadeIn("slow"),
e={index:c,position:"after"},d.rtl&&(e={index:d.groupheadersbounds.length-1-c,position:"after"}))});return e},_handlegroupstocolumnsdragdrop:function(b,d){this.dragmousedownoffset=this.dragmousedown=null;this.dragstarted=!1;this.dragcolumn=null;var e=this,g,f="mousedown",h="mousemove",l=!1;this.isTouchDevice()&&!0!==this.touchmode&&(l=!0,f=c.jqx.mobile.getTouchEventName("touchstart"),h=c.jqx.mobile.getTouchEventName("touchmove"));this.addHandler(d,"dragstart",function(b){return!1});this.addHandler(d,
f,function(b){if(!e.showgroupsheader)return!0;var d=b.pageX,g=b.pageY;e.__drag=!0;e.dragmousedown={left:d,top:g};l&&(g=e.getTouches(b)[0],d=g.pageX,g=g.pageY,e.dragmousedown={left:d,top:g},b.preventDefault&&b.preventDefault());b=c(b.target).coord();e.dragmousedownoffset={left:parseInt(d)-parseInt(b.left),top:parseInt(g-b.top)}});this.addHandler(d,h,function(f){if(!e.showgroupsheader)return!0;if(e.dragmousedown){g={left:f.pageX,top:f.pageY};if(l){var h=e.getTouches(f)[0];g={left:h.pageX,top:h.pageY}}!e.dragstarted&&
null==e.dragcolumn&&(h=Math.abs(g.top-e.dragmousedown.top),3<Math.abs(g.left-e.dragmousedown.left)||3<h)&&(e._createdragcolumn(d,g,!0),c(document.body).addClass("jqx-disableselect"),c.data(e.dragcolumn[0],"datarecord",b),f.preventDefault&&f.preventDefault())}})},_createdragcolumn:function(b,d,e){this.dragcolumn=c("<div></div>");var g=b.clone();this.dragcolumn.css("z-index",999999);g.css("border-width","1px");g.css("opacity","0.4");var f=c(g.find("."+this.toThemeProperty("jqx-grid-column-menubutton")));
0<f.length&&f.css("display","none");f=c(g.find(".jqx-icon-close"));0<f.length&&f.css("display","none");this.dragcolumnicon=c('<div style="z-index: 9999; position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -7px;"></div>');this.dragcolumnicon.addClass(this.toThemeProperty("jqx-grid-drag-icon"));this.dragcolumn.css("float","left");this.dragcolumn.css("position","absolute");this.host.coord();g.width(b.width()+16);this.dragcolumn.append(g);this.dragcolumn.height(b.height());this.dragcolumn.width(g.width());
this.dragcolumn.append(this.dragcolumnicon);c(document.body).append(this.dragcolumn);g.css("margin-left",0);g.css("left",0);g.css("top",0);this.dragcolumn.css("left",d.left+this.dragmousedown.left);this.dragcolumn.css("top",d.top+this.dragmousedown.top);void 0!=e&&e&&(this.dropline=c('<div style="display: none; position: absolute;"></div>'),this.dropline.width(2),this.dropline.addClass(this.toThemeProperty("jqx-grid-group-drag-line")),c(document.body).append(this.dropline))},iscolumngroupable:function(b){return this._getcolumnproperty(b,
"groupable")},_handlecolumnstogroupsdragdrop:function(b,d){this.dragmousedownoffset=this.dragmousedown=null;this.dragstarted=!1;this.dragcolumn=null;var e=this,g,f=!1;this.isTouchDevice()&&!0!==this.touchmode&&(f=!0);var h="mousedown.drag";g="mousemove.drag";f?(h=c.jqx.mobile.getTouchEventName("touchstart")+".drag",g=c.jqx.mobile.getTouchEventName("touchmove")+".drag"):this.addHandler(d,"dragstart",function(b){return!1});this.addHandler(d,h,function(g){if(!e.showgroupsheader)return!0;e.__drag=!0;
if(e._isColumnInGroups(b.displayfield))return d.css("cursor"),!0;if(0==b.groupable)return!0;var h=g.pageX,r=g.pageY;f&&(r=e.getTouches(g)[0],h=r.pageX,r=r.pageY);e.dragmousedown={left:h,top:r};f&&g.preventDefault&&g.preventDefault();g=c(g.target).coord();e.dragmousedownoffset={left:parseInt(h)-parseInt(g.left),top:parseInt(r-g.top)}});this.addHandler(d,g,function(h){if(!e.showgroupsheader)return!0;if(e._isColumnInGroups(b.displayfield))return d.css("cursor"),!0;if(e.dragmousedown){var q=h.pageX,r=
h.pageY;f&&(r=e.getTouches(h)[0],q=r.pageX,r=r.pageY);g={left:q,top:r};!e.dragstarted&&null==e.dragcolumn&&(q=Math.abs(g.top-e.dragmousedown.top),3<Math.abs(g.left-e.dragmousedown.left)||3<q)&&(e._createdragcolumn(d,g,!0),c.data(e.dragcolumn[0],"datarecord",b.displayfield),h.preventDefault&&h.preventDefault())}})},_rendergroupcolumn:function(b,d){var e=c('<div style="float: left; position: relative;"></div>');this.rtl&&e.css("float","right");null!=this.groupcolumnrenderer&&(e[0].innerHTML=this.groupcolumnrenderer(b),
e.addClass(this.toThemeProperty("jqx-grid-group-column")),e.addClass(this.toThemeProperty("jqx-fill-state-normal")));if(this.closeablegroups){""==e[0].innerHTML&&(e[0].innerHTML='<a style="float: left;" href="#">'+b+"</a>");this.rtl&&(e[0].innerHTML='<a style="float: right;" href="#">'+b+"</a>");var g=this.rtl?"left":"right",f='<div style="float: '+g+'; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+
this.toThemeProperty("jqx-icon-close")+'"></div></div>';c.jqx.browser.msie&&8>c.jqx.browser.version&&(f='<div style="float: left; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-icon-close")+'"></div></div>');this.rtl&&(f='<div style="float: '+g+'; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+
this.toThemeProperty("jqx-icon-close")+'"></div></div>',c.jqx.browser.msie&&8>c.jqx.browser.version&&(f='<div style="float: left; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-icon-close")+'"></div></div>'));e[0].innerHTML+=f}else""==e[0].innerHTML&&(e[0].innerHTML='<a href="#">'+b+"</a>");this.sortable&&(g=c('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -16px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+
this.toThemeProperty("jqx-grid-column-sortascbutton")+'"></div></div>'),f=c('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -16px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-grid-column-sortdescbutton")+'"></div></div>'),this.closeablegroups&&(g=c('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -32px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+
this.toThemeProperty("jqx-grid-column-sortascbutton")+'"></div></div>'),f=c('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -32px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-grid-column-sortdescbutton")+'"></div></div>')),this.rtl&&(g=c('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-left: 0px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+
this.toThemeProperty("jqx-grid-column-sortascbutton")+'"></div></div>'),f=c('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-left: 0px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-grid-column-sortdescbutton")+'"></div></div>'),this.closeablegroups&&(g=c('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-left: 16px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+
this.toThemeProperty("jqx-grid-column-sortascbutton")+'"></div></div>'),f=c('<div style="float: right; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-left: 16px; margin-top: -8px; float: none; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-grid-column-sortdescbutton")+'"></div></div>'))),g.css("display","none"),f.css("display","none"),c.jqx.browser.msie&&8>c.jqx.browser.version&&(g.css("float","left"),f.css("float","left")),e.append(g),
e.append(f),c.data(document.body,"groupsortelements"+d,{sortasc:g,sortdesc:f}));e.addClass(this.toThemeProperty("jqx-fill-state-normal"));e.addClass(this.toThemeProperty("jqx-grid-group-column"));return e},_rendergroup:function(b,d,e,g,f,h,l){g=d.cells[e.level];this.rtl&&(g=d.cells[d.cells.length-1-e.level]);var q=this._findgroupstate(e.uniqueid);if(0<e.bounddata.subGroups.length||0<e.bounddata.subItems.length)f=this.rtl?"-rtl":"",h=this.toThemeProperty("jqx-icon-arrow-right"),f&&(h=this.toThemeProperty("jqx-icon-arrow-left")),
g.className=q?g.className+(" "+this.toThemeProperty("jqx-grid-group-expand"+f)+" "+this.toThemeProperty("jqx-icon-arrow-down")):g.className+(" "+this.toThemeProperty("jqx-grid-group-collapse"+f)+" "+h);f=this._getColumnText(this.groups[e.level]).label;g=this.groupindentwidth;var r=this.rowdetails&&this.showrowdetailscolumn?(1+b)*g:b*g,t=l-r;h=e.level+1;this.rtl&&(h=0);b=d.cells[h];for(r=2;void 0!=b&&"none"==b.style.display&&r<d.cells.length-1;)b=d.cells[h+r-1],r++;h=c(b);if(b){b.style.width=parseInt(t)+
"px";-1!=b.className.indexOf("jqx-grid-cell-filter")&&h.removeClass(this.toThemeProperty("jqx-grid-cell-filter"));-1!=b.className.indexOf("jqx-grid-cell-sort")&&h.removeClass(this.toThemeProperty("jqx-grid-cell-sort"));-1!=b.className.indexOf("jqx-grid-cell-pinned")&&h.removeClass(this.toThemeProperty("jqx-grid-cell-pinned"));if(null!=this.groupsrenderer)if(t={group:e.group,level:e.level,parent:e.bounddata.parentItem,subGroups:e.bounddata.subGroups,subItems:e.bounddata.subItems,groupcolumn:this._getColumnText(this.groups[e.level]).column},
q=this.groupsrenderer(f+": "+e.group,e.group,q,t))b.innerHTML=q;else{q=0<e.bounddata.subItems.length?e.bounddata.subItems.length:e.bounddata.subGroups.length;if(this.showgroupaggregates)for(t=0<e.bounddata.subItems.length?e.bounddata.subItems:e.bounddata.subGroups,r=q=0;r<t.length;r++)t[r].totalsrow||q++;b.innerHTML='<div class="'+this.toThemeProperty("jqx-grid-groups-row")+'" style="position: absolute;"><span>'+f+': </span><span class="'+this.toThemeProperty("jqx-grid-groups-row-details")+'">'+e.group+
" ("+q+")</span></div>"}else{var w=this._getcolumnbydatafield(this.groups[e.level]),z=e.group;if(null!=w){w.cellsformat&&c.jqx.dataFormat&&(c.jqx.dataFormat.isDate(z)?z=c.jqx.dataFormat.formatdate(z,w.cellsformat,this.gridlocalization):c.jqx.dataFormat.isNumber(z)&&(z=c.jqx.dataFormat.formatnumber(z,w.cellsformat,this.gridlocalization)));q=0<e.bounddata.subItems.length?e.bounddata.subItems.length:e.bounddata.subGroups.length;if(this.showgroupaggregates)for(t=0<e.bounddata.subItems.length?e.bounddata.subItems:
e.bounddata.subGroups,r=q=0;r<t.length;r++)t[r].totalsrow||q++;b.innerHTML='<div class="'+this.toThemeProperty("jqx-grid-groups-row")+'" style="position: absolute;"><span>'+f+': </span><span class="'+this.toThemeProperty("jqx-grid-groups-row-details")+'">'+z+" ("+q+")</span></div>"}else throw Error("jqxGrid: Unable to find '"+this.groups[e.level]+"' group in the Grid's columns collection.");}this.rtl&&(w||(w=this._getcolumnbydatafield(this.groups[e.level])),f="hidden"==this.hScrollBar.css("visibility")?
0:this.hScrollInstance.max-this.hScrollInstance.value,q="hidden"==this.vScrollBar.css("visibility")?0:this.scrollbarsize+6,r=this.rowdetails&&this.showrowdetailscolumn?(2+e.level)*g:(1+e.level)*g,b.style.width=l+parseInt(f)-r-q+"px",h.addClass(this.toThemeProperty("jqx-rtl")),g=c(d.cells[d.cells.length-1]).css("z-index"),h.css("z-index",g),g=h.find("div"),t=g.width(),g.css("left","100%"),d=null!=this.columns.records[d.cells.length-2-e.level]?this.columns.records[d.cells.length-2-e.level].pinned:!1,
this.table.width()<l&&(l=this.table.width(),"hidden"!=this.vScrollBar.css("visibility")&&(l+=this.vScrollBar.outerWidth())),w.pinned||d?(this.rowdetails&&this.showrowdetailscolumn&&(l+=30),g.css("margin-left",-t),b.style.width=l+f-r-q+"px"):(f="hidden"==this.hScrollBar.css("visibility")?0:this.hScrollInstance.max,b.style.width=l+f-r-q+"px",t=g.width(),g.css("margin-left",-t)))}}})})(jqxBaseFramework);
(function(c){c.extend(c.jqx._jqxGrid.prototype,{autoresizecolumns:function(b,d){"cells"!=b&&"all"!=b&&"column"!=b&&(b="all");var e=this.that,g=this.getrows();this.pageable&&(g=this.dataview.rows,this.groupable&&(g=this.dataview.records));d=void 0==d?0:parseInt(d);var f=g.length;if(void 0==f&&void 0!=g){var h=[];c.each(g,function(b){h.push(this)});g=h;f=g.length}var l=c("<span></span>");l.addClass(this.toThemeProperty("jqx-widget"));l.addClass(this.toThemeProperty("jqx-grid-cell"));c(document.body).append(l);
var q=[],r=[],t=[],w=[],z=e.host.width();"hidden"!=e.vScrollBar[0].style.visibility&&(z-=this.scrollbarsize+5);0>z&&(z=0);for(var B=0;B<f;B++)for(var v=g[B],z=0;z<this.columns.records.length;z++){var y=this.columns.records[z];if(!(y.hidden||0<this.groups.length&&z<=this.groups.length-1)){void 0==r[y.displayfield]&&(r[y.displayfield]=0);void 0==t[y.displayfield]&&(t[y.displayfield]="");var C=v[y.displayfield];""!=y.cellsformat?c.jqx.dataFormat&&(c.jqx.dataFormat.isDate(C)?C=c.jqx.dataFormat.formatdate(C,
y.cellsformat,this.gridlocalization):c.jqx.dataFormat.isNumber(C)&&(C=c.jqx.dataFormat.formatnumber(C,y.cellsformat,this.gridlocalization))):y.cellsrenderer&&(q=e._defaultcellsrenderer(C,y),q=y.cellsrenderer(B,y.datafield,C,q,y.getcolumnproperties(),v),void 0!=q&&(C=c(q).text()));if((void 0==b||"cells"==b||"all"==b)&&null!=C){var q=C.toString().length,D=C.toString(),D=D.replace(/[^A-Z]/g,"").length;q>r[y.displayfield]&&(r[y.displayfield]=q,t[y.displayfield]=C,w[y.displayfield]=D);if(0<q&&q>=D){var E=
20*D+15*(q-D),F=20*w[y.displayfield]+15*(r[y.displayfield]-w[y.displayfield]);E>F&&0<E&&0<F&&(r[y.displayfield]=q,t[y.displayfield]=C,w[y.displayfield]=D)}}if("column"==b||"all"==b)y.text.toString().length>r[y.displayfield]&&(t[y.displayfield]=y.text,r[y.displayfield]=y.text.length,D=y.text.toString(),D=D.replace(/[^A-Z]/g,"").length,w[y.displayfield]=D),C=y.text,q=C.toString().length,D=C.toString(),D=D.replace(/[^A-Z]/g,"").length,0<q&&q>=D&&(E=20*D+15*(q-D),F=20*w[y.displayfield]+15*(r[y.displayfield]-
w[y.displayfield]),E>F&&0<E&&0<F&&(r[y.displayfield]=q,t[y.displayfield]=C,w[y.displayfield]=D))}}if(this.columns.records){for(z=0;z<this.columns.records.length;z++)if(y=this.columns.records[z],y.displayfield&&(void 0==t[y.displayfield]&&(t[y.displayfield]=y.text),0<=l[0].className.indexOf("jqx-grid-column-header")&&l.removeClass(this.toThemeProperty("jqx-grid-column-header")),t[y.displayfield]==y.text&&l.addClass(this.toThemeProperty("jqx-grid-column-header")),l[0].innerHTML=t[y.displayfield].toString(),
e=l.outerWidth()+10,0<l.children().length&&(e=l.children().outerWidth()+10),c.jqx.browser.msie&&8>c.jqx.browser.version&&(e+=10),this.filterable&&this.showfilterrow&&(e+=5),e+=d,e>y.maxwidth&&(e=y.maxwidth),void 0!=y._width&&(y.__width=y._width),y._width=null,"auto"==y.maxwidth||e<=y.maxwidth))g=y.width,e<y.minwidth&&(e=y.minwidth),y.width=e,void 0!=y._percentagewidth&&(y._percentagewidth=null),this._raiseEvent(14,{columntext:y.text,column:y.getcolumnproperties(),datafield:y.datafield,displayfield:y.displayfield,
oldwidth:g,newwidth:e});l.remove();this._updatecolumnwidths();this._updatecellwidths();this._renderrows(this.virtualsizeinfo);for(z=0;z<this.columns.records.length;z++)y=this.columns.records[z],void 0!=y.__width&&(y._width=y.__width)}},autoresizecolumn:function(b,d,e){"cells"!=d&&"all"!=d&&"column"!=d&&(d="all");if(void 0==b)return!1;var g=this.getrows();this.pageable&&(g=this.dataview.rows,this.groupable&&(g=this.dataview.records));var f=this.getcolumn(b);if(void 0==f)return!1;e=void 0==e?0:parseInt(e);
var h=g.length,l=c("<span></span>");l.addClass(this.toThemeProperty("jqx-widget"));l.addClass(this.toThemeProperty("jqx-grid-cell"));c(document.body).append(l);var q=0,r="",t=0;this.that.host.width();if(void 0==d||"cells"==d||"all"==d)for(var w=0;w<h;w++){var z=g[w][f.displayfield];if(""!=f.cellsformat)c.jqx.dataFormat&&(c.jqx.dataFormat.isDate(z)?z=c.jqx.dataFormat.formatdate(z,f.cellsformat,this.gridlocalization):c.jqx.dataFormat.isNumber(z)&&(z=c.jqx.dataFormat.formatnumber(z,f.cellsformat,this.gridlocalization)));
else if(f.cellsrenderer){var B=f.cellsrenderer(w,f,z);void 0!=B&&(z=c(B).text())}if(null!=z){var B=z.toString().length,v=z.toString(),v=v.replace(/[^A-Z]/g,"").length;B>q&&(q=B,r=z,t=v);if(0<B&&B>=v){var y=20*v+15*(B-v),C=20*t+15*(q-t);y>C&&0<y&&0<C&&(q=B,r=z,t=v)}}}if("column"==d||"all"==d)f.text.toString().length>q&&(r=f.text),z=f.text.toString(),B=z.toString().length,v=z.toString(),v=v.replace(/[^A-Z]/g,"").length,0<B&&B>=v&&(y=20*v+15*(B-v),C=20*t+15*(q-t),y>C&&0<y&&0<C&&(r=z));void 0==r&&(r=
f.text);l[0].innerHTML=r;r==f.text&&l.addClass(this.toThemeProperty("jqx-grid-column-header"));d=l.outerWidth()+10;c.jqx.browser.msie&&8>c.jqx.browser.version&&(d+=5);this.filterable&&this.showfilterrow&&(d+=5);d+=e;l.remove();d>f.maxwidth&&(d=f.maxwidth);if("auto"==f.maxwidth||d<=f.maxwidth)e=f.width,d<f.minwidth&&(d=f.minwidth),f.width=d,void 0!=f._width&&(f.__width=f._width),f._width=null,void 0!=f._percentagewidth&&(f._percentagewidth=null),this._updatecolumnwidths(),this._updatecellwidths(),
this._raiseEvent(14,{columntext:f.text,column:f.getcolumnproperties(),datafield:b,displayfield:f.displayfield,oldwidth:e,newwidth:d}),this._renderrows(this.virtualsizeinfo),void 0!=f._width&&(f._width=f.__width)},_handlecolumnsresize:function(){var b=this.that;if(this.columnsresize){var d=!1;b.isTouchDevice()&&!0!==b.touchmode&&(d=!0);var e="mousemove.resize"+this.element.id,g="mousedown.resize"+this.element.id,f="mouseup.resize"+this.element.id;d&&(e=c.jqx.mobile.getTouchEventName("touchmove")+".resize"+
this.element.id,g=c.jqx.mobile.getTouchEventName("touchstart")+".resize"+this.element.id,f=c.jqx.mobile.getTouchEventName("touchend")+".resize"+this.element.id);this.removeHandler(c(document),e);this.addHandler(c(document),e,function(e){if(null!=c.data(document.body,"contextmenu"+b.element.id)&&b.autoshowcolumnsmenubutton)return!0;if(null!=b.resizablecolumn&&!b.disabled&&b.resizing&&null!=b.resizeline){var g=b.host.coord(),f=parseInt(b.resizestartline.coord().left),h=f-b._startcolumnwidth,w=b.resizablecolumn.column.minwidth,
w="auto"==w?0:parseInt(w),z=b.resizablecolumn.column.maxwidth,z="auto"==z?0:parseInt(z),B=e.pageX;d&&(B=b.getTouches(e)[0].pageX);h+=w;w=0<z?f+z:0;f=0==z?!0:b._startcolumnwidth+B-f<z?!0:!1;b.rtl&&(f=!0);if(f)if(!b.rtl){if(B>=g.left&&B>=h&&(0!=w&&e.pageX<w?b.resizeline.css("left",B):0==w&&b.resizeline.css("left",B),d))return!1}else if(B>=g.left&&B<=g.left+b.host.width()&&(b.resizeline.css("left",B),d))return!1}if(!d&&null!=b.resizablecolumn)return!1});this.removeHandler(c(document),g);this.addHandler(c(document),
g,function(d){if(null!=c.data(document.body,"contextmenu"+b.element.id)&&b.autoshowcolumnsmenubutton)return!0;if(null!=b.resizablecolumn&&!b.disabled){var e=b.resizablecolumn.columnelement;if(e.coord().top+e.height()+5<d.pageY)b.resizablecolumn=null;else if(e.coord().top-5>d.pageY)b.resizablecolumn=null;else{b._startcolumnwidth=b.resizablecolumn.column.width;b.resizablecolumn.column._width=null;c(document.body).addClass("jqx-disableselect");c(document.body).addClass("jqx-position-reset");b.host.addClass("jqx-disableselect");
b.content.addClass("jqx-disableselect");b._mouseDownResize=new Date;b.resizing=!0;if(b._lastmouseDownResize&&b.columnsautoresize&&300>b._lastmouseDownResize-b._mouseDownResize&&-500<b._lastmouseDownResize-b._mouseDownResize&&(e=b.resizablecolumn.column,e.resizable)){var g=b.hScrollBar[0].style.visibility;b._resizecolumn=null;b.resizeline.hide();b.resizestartline.hide();b.resizebackground.remove();b.resizablecolumn=null;b.columndragstarted=!1;b.dragmousedown=null;b.__drag=!1;b.autoresizecolumn(e.displayfield,
"all");g!=b.hScrollBar[0].style.visibility&&b.hScrollInstance.setPosition(0);b.rtl&&b._arrange();b.autosavestate&&b.savestate&&b.savestate();d.stopPropagation();b.suspendClick=!0;setTimeout(function(){b.suspendClick=!1},100);return!1}b._lastmouseDownResize=new Date;b._resizecolumn=b.resizablecolumn.column;b.resizeline=b.resizeline||c('<div style="position: absolute;"></div>');b.resizestartline=b.resizestartline||c('<div style="position: absolute;"></div>');b.resizebackground=b.resizebackground||c('<div style="position: absolute; left: 0; top: 0; background: #000;"></div>');
b.resizebackground.css("opacity",.01);b.resizebackground.css("cursor","col-resize");b.resizeline.css("cursor","col-resize");b.resizestartline.css("cursor","col-resize");b.resizeline.addClass(b.toThemeProperty("jqx-grid-column-resizeline"));b.resizestartline.addClass(b.toThemeProperty("jqx-grid-column-resizestartline"));c(document.body).append(b.resizeline);c(document.body).append(b.resizestartline);c(document.body).append(b.resizebackground);var f=b.resizablecolumn.columnelement.coord();b.resizebackground.css("left",
b.host.coord().left);b.resizebackground.css("top",b.host.coord().top);b.resizebackground.width(b.host.width());b.resizebackground.height(b.host.height());b.resizebackground.css("z-index",9999);d=function(d){b.rtl?d.css("left",parseInt(f.left)):d.css("left",parseInt(f.left)+b._startcolumnwidth);var e=b._groupsheader()?b.groupsheader.height():0,e=e+(b.showtoolbar?b.toolbarheight:0)+(b.showstatusbar?b.statusbarheight:0),c=0;b.pageable&&(c=b.pagerheight);var g="visible"==b.hScrollBar.css("visibility")?
17:0;d.css("top",parseInt(f.top));d.css("z-index",99999);b.columngroups?d.height(b.host.height()+b.resizablecolumn.columnelement.height()-c-e-g-b.columngroupslevel*b.columnsheight):d.height(b.host.height()-c-e-g);b.enableanimations?d.show("fast"):d.show()};d(b.resizeline);d(b.resizestartline);b.dragmousedown=null}}});var h=function(){c(document.body).removeClass("jqx-disableselect");c(document.body).removeClass("jqx-position-reset");if(b.showfilterrow||b.showstatusbar||b.showtoolbar||b.enablebrowserselection)b.host.removeClass("jqx-disableselect"),
b.content.removeClass("jqx-disableselect");if(b.resizing)if(b._mouseUpResize=new Date,200>b._mouseUpResize-b._mouseDownResize)b.resizing=!1,null!=b._resizecolumn&&null!=b.resizeline&&"block"==b.resizeline.css("display")&&(b._resizecolumn=null,b.resizeline.hide(),b.resizestartline.hide(),b.resizebackground.remove());else if(b.resizing=!1,!b.disabled){var d=b.host.width();"hidden"!=b.vScrollBar[0].style.visibility&&(d-=20);0>d&&(d=0);if(null!=b._resizecolumn&&null!=b.resizeline&&"block"==b.resizeline.css("display")){var e=
parseInt(b.resizeline.css("left")),g=parseInt(b.resizestartline.css("left")),f=b._startcolumnwidth+e-g;b.rtl&&(f=b._startcolumnwidth-e+g);e=b._resizecolumn.width;b._closemenu();f<b._resizecolumn.minwidth&&(f=b._resizecolumn.minwidth);b._resizecolumn.width=f;void 0!=b._resizecolumn._percentagewidth&&(b._resizecolumn._percentagewidth=f/d*100);for(d=0;d<b._columns.length;d++)if(b._columns[d].datafield===b._resizecolumn.datafield){b._columns[d].width=b._resizecolumn.width;b._columns[d].width<b._resizecolumn.minwidth&&
(b._columns[d].width=b._resizecolumn.minwidth);break}d=b.hScrollBar[0].style.visibility;b._updatecolumnwidths();b._updatecellwidths();b._raiseEvent(14,{columntext:b._resizecolumn.text,column:b._resizecolumn.getcolumnproperties(),datafield:b._resizecolumn.datafield,oldwidth:e,newwidth:f});b._renderrows(b.virtualsizeinfo);b.autosavestate&&b.savestate&&b.savestate();d!=b.hScrollBar[0].style.visibility&&b.hScrollInstance.setPosition(0);b.rtl&&b._arrange();b._resizecolumn=null;b.resizeline.hide();b.resizestartline.hide();
b.resizebackground.remove()}b.resizablecolumn=null}};try{if(""!=document.referrer||window.frameElement)e=null,null!=window.top&&window.top!=window.self&&window.parent&&document.referrer&&(e=document.referrer),e&&-1!=e.indexOf(document.location.host)&&(e=function(b){h()},window.top.document.addEventListener?window.top.document.addEventListener("mouseup",e,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",e))}catch(l){}this.removeHandler(c(document),f);this.addHandler(c(document),
f,function(d){if(null!=c.data(document.body,"contextmenu"+b.element.id)&&b.autoshowcolumnsmenubutton)return!0;h()})}}})})(jqxBaseFramework);
(function(c){c.jqx.dataview.sort=function(){this.sortby=function(b,d,e){var g=Object.prototype.toString;if(null==d)this.sortdata=null,this.sortcache={},this.grid._pagescache=[],this.grid._cellscache=[],this.refresh();else{void 0==d&&(d=!0);d="a"==d||"asc"==d||"ascending"==d||1==d?!0:!1;var f=b;this.sortfield=b;this.sortfielddirection=d?"asc":"desc";void 0==this.sortcache&&(this.sortcache={});this.sortdata=[];var h=[],l=!1;"constructor"==f&&(f="");if(!this.virtualmode&&null!=this.sortcache[f]){var q=
this.sortcache[f],h=q._sortdata;q.direction==d?h.reverse():(!q.direction&&d&&h.reverse(),l=!0);h.length<this.totalrecords&&(this.sortcache={},l=!1,h=[])}Object.prototype.toString="function"==typeof b?b:function(){return this[b]};var q=this.records,r="";this.source.datafields&&c.each(this.source.datafields,function(){if(this.name==b)return this.type&&(r=this.type),!1});if(0==h.length)if(q.length)for(var t=q.length,w=0;w<t;w++){var z=q[w];null!=z&&h.push({sortkey:z.toString(),value:z,index:w})}else{t=
!1;for(obj in q){z=q[obj];if(void 0==z){t=!0;break}h.push({sortkey:z.toString(),value:z,index:obj})}t&&c.each(q,function(b,d){h.push({sortkey:d.toString(),value:d,index:b})})}if(!l)if(null==e){this._sortcolumntype=r;var B=this;h.sort(function(b,d){return B._compare(b,d,r)})}else h.sort(e);d||h.reverse();Object.prototype.toString=g;this.sortdata=h;this.sortcache[f]={_sortdata:h,direction:d};this.reload(this.records,this.rows,this.filters,this.updated,!0)}};this.clearsortdata=function(){this.sortcache=
{};this.sortdata=null};this._compare=function(b,d,e){b=b.sortkey;d=d.sortkey;void 0===b&&(b=null);void 0===d&&(d=null);if(null===b&&null===d)return 0;if(null===b&&null!==d)return-1;if(null!==b&&null===d)return 1;if(c.jqx.dataFormat)if(e&&""!=e)switch(e){case "string":case "text":b=String(b).toLowerCase(),d=String(d).toLowerCase()}else{if(c.jqx.dataFormat.isNumber(b)&&c.jqx.dataFormat.isNumber(d)||c.jqx.dataFormat.isDate(b)&&c.jqx.dataFormat.isDate(d))return b<d?-1:b>d?1:0;c.jqx.dataFormat.isNumber(b)||
c.jqx.dataFormat.isNumber(d)||(b=String(b).toLowerCase(),d=String(d).toLowerCase())}return b<d?-1:b>d?1:0};this._equals=function(b,d){return 0===this._compare(b,d)}};c.extend(c.jqx._jqxGrid.prototype,{_rendersortcolumn:function(){var b=this.that,d=this.getsortcolumn();if(this.sortdirection){var e=function(d,e){var h=b.getcolumn(d);h&&(e.ascending?c.jqx.aria(h.element,"aria-sort","ascending"):e.descending?c.jqx.aria(h.element,"aria-sort","descending"):c.jqx.aria(h.element,"aria-sort","none"))};this._oldsortinfo&&
this._oldsortinfo.column&&e(this._oldsortinfo.column,{ascending:!1,descending:!1});e(d,this.sortdirection)}this._oldsortinfo={column:d,direction:this.sortdirection};this.sortdirection&&c.each(this.columns.records,function(e,f){var h=c.data(document.body,"groupsortelements"+this.displayfield);null==d||this.displayfield!=d?(c(this.sortasc).hide(),c(this.sortdesc).hide(),null!=h&&(h.sortasc.hide(),h.sortdesc.hide())):b.sortdirection.ascending?(c(this.sortasc).show(),c(this.sortdesc).hide(),null!=h&&
(h.sortasc.show(),h.sortdesc.hide())):(c(this.sortasc).hide(),c(this.sortdesc).show(),null!=h&&(h.sortasc.hide(),h.sortdesc.show()))})},getsortcolumn:function(){return void 0!=this.sortcolumn?this.sortcolumn:null},removesort:function(){this.sortby(null)},sortby:function(b,d,e,c,f){if(this._loading&&!1!==f)throw Error("jqxGrid: "+this.loadingerrormessage);null==b&&(d=null,b=this.sortcolumn);if(void 0!=b){f=this.that;void 0==e&&null!=f.source.sortcomparer&&(e=f.source.sortcomparer);ascending="a"==d||
"asc"==d||"ascending"==d||1==d?!0:!1;f.sortdirection=null!=d?{ascending:ascending,descending:!ascending}:{ascending:!1,descending:!1};f.sortcolumn=null!=d?b:null;if(f.source.sort||f.virtualmode){if(f.dataview.sortfield=b,f.dataview.sortfielddirection=null==d?"":ascending?"asc":"desc",f.source.sort&&!this._loading){f.source.sort(b,d);f._raiseEvent(6,{sortinformation:f.getsortinformation()});return}}else f.dataview.sortby(b,d,e);!1!==c&&(f.groupable&&0<f.groups.length?(f._render(!0,!1,!1),f._updategroupheadersbounds&&
f.showgroupsheader&&f._updategroupheadersbounds()):(f.pageable&&f.dataview.updateview(),f._updaterowsproperties(),f.rendergridcontent(!0)),f._postrender("sort"),f._raiseEvent(6,{sortinformation:f.getsortinformation()}))}},_togglesort:function(b){var d=this.that;if(!this.disabled&&b.sortable&&d.sortable){var e=d.getsortinformation();null!=e.sortcolumn&&e.sortcolumn==b.displayfield?(e=e.sortdirection.ascending,e=1<d.sorttogglestates?1==e?!1:null:!e):e=!0;d.sortby(b.displayfield,e,null)}}})})(jqxBaseFramework);
(function(c){c.jqx.jqxWidget("jqxToolBar","",{});c.extend(c.jqx._jqxToolBar.prototype,{defineInstance:function(){var b={width:"100%",minWidth:null,maxWidth:null,height:35,tools:"",initTools:null,minimizeWidth:200,disabled:!1,rtl:!1,events:["open","close"]};if(this===c.jqx._jqxToolBar.prototype)return b;c.extend(!0,this,b);return b},createInstance:function(){if("none"===this.host.css("display")||!1===document.body.contains(this.element))this._initiallyHidden=!0;this._toolToWidgetMapping={button:"jqxButton",
toggleButton:"jqxToggleButton",dropdownlist:"jqxDropDownList",combobox:"jqxComboBox",input:"jqxInput"};this._toolChanges=[];this.render()},render:function(){var b=!0;this.element.innerHTML="";0<this.element.className.length&&this._removeClass(this.element,this.toThemeProperty("jqx-widget jqx-fill-state-normal jqx-rc-all jqx-toolbar jqx-fill-state-disabled"));this._setSize();this._destroyTools(!1);this._toolWidgets&&(b=!1,c(this._minimizeButton).remove(),c(this._minimizePopup).remove());this._appendMinimizeButton();
this._addClasses();this._initiallyHidden||this._createTools();!0===this.disabled&&(this.element.className+=" "+this.toThemeProperty("jqx-fill-state-disabled"),this._disableTools(!0));this._initiallyHidden||this._minimize();this._removeHandlers();this._addHandlers();!1===b&&0<this._toolChanges.length&&this._restoreChanges()},refresh:function(b){!0!==b&&this.render()},getTools:function(){return this._toolWidgets},destroy:function(){this._removeHandlers();this._destroyTools();this.host.remove()},_destroyTools:function(b){!1!==
b&&(b=!0);if(this._toolWidgets)for(var d=this._toolWidgets.length-1;0<=d;d--)this._destroyTool(d,b,!0)},_destroyTool:function(b,d,e){b=parseInt(b,10);var g=this._toolWidgets[b];if(g){var f=g.type,h=g.tool,l=g.menuTool;if("custom"!==f){if(h[this._toolToWidgetMapping[f]]("destroy"),l)l[this._toolToWidgetMapping[f]]("destroy")}else h.remove(),l&&l.remove();g.menuSeparator&&c(g.menuSeparator).remove();this._toolWidgets.splice(b,1);this._checkType(f)&&this._refreshButtonGroups();!0!==e&&this._minimize();
!1!==d&&this._toolChanges.push({action:"destroyTool",index:b})}},destroyTool:function(b){this._destroyTool(b,!0)},addTool:function(b,d,e,c){var f,h,l,q;f="first"===d?0:this._toolWidgets.length;this._toolWidgets[f-1]&&(h=this._toolWidgets[f-1].tool,l=this._toolWidgets[f-1].separatorAfterWidget?"|":this._toolWidgets[f-1].type);!0===e?q="|":this._toolWidgets[f+1]&&(q=this._toolWidgets[f+1].type);f=this._initializeTool(f,b,h,l,q,c,!1);"first"===d?this._toolWidgets.splice(0,0,f):this._toolWidgets.push(f);
this._removeHandlers();this._addHandlers();this._checkType(b)&&this._refreshButtonGroups();"first"!==d&&0<this._minimizedTools?this._minimizeTool(!0):this._minimize();this._toolChanges.push({action:"addTool",type:b,position:d,separator:e,initCallback:c})},_disableTools:function(b){for(var d=0;d<this._toolWidgets.length;d++)this.disableTool(d,b)},disableTool:function(b,d){b=parseInt(b,10);var e=this._toolWidgets[b];if(e){var c=e.type;"custom"!==c&&(e.tool[this._toolToWidgetMapping[c]]({disabled:d}),
e.menuTool[this._toolToWidgetMapping[c]]({disabled:d}));this._toolChanges.push({action:"disableTool",index:b,disable:d})}},propertyChangedHandler:function(b,d,e,g){if("initTools"!==d&&g!==e)switch(d){case "theme":""!==e&&(b._removeClass(b.element,b.toThemeProperty("jqx-widget-"+e+" jqx-fill-state-normal-"+e+" jqx-rc-all-"+e+" jqx-toolbar-"+e)),b._removeClass(b._minimizePopup,"jqx-popup-"+e+" jqx-fill-state-normal-"+e+" jqx-rc-b-"+e+" jqx-toolbar-minimized-popup-"+e));b._addClasses();b._minimizePopup.className+=
" "+b.toThemeProperty("jqx-popup jqx-fill-state-normal jqx-rc-b jqx-toolbar-minimized-popup");for(var f=0;f<b._toolWidgets.length;f++)d=b._toolWidgets[f],"custom"!==d.type&&(d.menuTool&&(d.menuSeparator&&(""!==e&&b._removeClass(d.menuSeparator,"jqx-fill-state-pressed-"+e+" jqx-toolbar-minimized-popup-separator-"+e),d.menuSeparator.className+=" jqx-fill-state-pressed-"+g+" jqx-toolbar-minimized-popup-separator-"+g),d.menuTool[b._toolToWidgetMapping[b._toolWidgets[f].type]]({theme:g})),d.tool[b._toolToWidgetMapping[b._toolWidgets[f].type]]({theme:g}));
c.jqx.utilities.setTheme(e,g,b.host);break;case "width":b.element.style.width=b._toPx(g);b._minimize();break;case "minWidth":b.element.style.minWidth=b._toPx(g);b._minimize();break;case "maxWidth":b.element.style.maxWidth=b._toPx(g);b._minimize();break;case "height":d=!1;b.element.style.height=b._toPx(g);if("string"===typeof g&&-1!==g.indexOf("%")){if("string"===typeof e&&-1!==e.indexOf("%")){b.host.trigger("resize");break}d=!0}else f=parseInt(g,10),f-=b._getComputedStyle(b.element,"paddingTop")+
b._getComputedStyle(b.element,"paddingBottom")+b._getComputedStyle(b.element,"borderTopWidth")+b._getComputedStyle(b.element,"borderBottomWidth");for(g=0;g<b._toolWidgets.length;g++){e=b._toolWidgets[g];var h=e.type;if("button"===h||"toggleButton"===h||"repeatButton"===h||"linkButton"===h)e.tool[0].style.height=d?"100%":b._toPx(f),e.menuTool&&(e.menuTool[0].style.height=d?"100%":b._toPx(f));else if("dropdownlist"===h||"combobox"===h||"input"===h)if(e.tool[b._toolToWidgetMapping[h]]({height:d?"100%":
f-2}),e.menuTool)e.menuTool[b._toolToWidgetMapping[h]]({height:d?"100%":f-2})}break;case "tools":b._removeHandlers();b._destroyTools();b._createTools();b._addHandlers();b._minimize();break;case "minimizeWidth":!0===b._isOpen?(f=b._getComputedStyle(b._minimizePopup,"left")-(g-e),b._minimizePopup.style.width=b._toPx(g),b._minimizePopup.style.left=b._toPx(f)):b._minimizePopup.style.width=b._toPx(g);break;case "rtl":b.render();break;case "disabled":!0===g?(b.element.className+=" "+b.toThemeProperty("jqx-fill-state-disabled"),
b._disableTools(!0)):(b._removeClass(b.element,b.toThemeProperty("jqx-fill-state-disabled")),b._disableTools(!1))}},_raiseEvent:function(b,d){void 0===d&&(d={owner:null});var e=this.events[b];d.owner=this;e=new c.Event(e);e.owner=this;e.args=d;e.preventDefault&&e.preventDefault();return this.host.trigger(e)},_addClasses:function(){var b="jqx-widget jqx-fill-state-normal jqx-rc-all jqx-toolbar";!0===this.rtl&&(b+=" jqx-toolbar-rtl");this.element.className+=" "+this.toThemeProperty(b)},_checkType:function(b){return"button"===
b||"toggleButton"===b||"repeatButton"===b||"linkButton"===b?!0:!1},_refreshButtonGroups:function(){function b(b,e,g,f,h,l){var q=b.tool[0];b=b.menuTool[0];var r={add:"",remove:""};r[e]+=" jqx-toolbar-tool-inner-button";r[g]+=" jqx-rc-all";r[f]+=" jqx-rc-l";r[h]+=" jqx-rc-r";""!==r.add&&(q.className+=" "+d.toThemeProperty(c.trim(r.add)),b&&(b.className+=" "+d.toThemeProperty(c.trim(r.add))));""!==r.remove&&(d._removeClass(q,d.toThemeProperty(c.trim(r.remove))),b&&d._removeClass(b,d.toThemeProperty(c.trim(r.remove))));
q.style.borderLeftWidth=l+"px";b&&(b.style.borderLeftWidth=l+"px")}for(var d=this,e=0;e<d._toolWidgets.length;e++){var g=d._toolWidgets[e];if(d._checkType(g.type)){var f,h,l=g.tool,q=g.menuTool;0<e&&(f=d._toolWidgets[e-1].separatorAfterWidget?"|":d._toolWidgets[e-1]);g.separatorAfterWidget?h="|":e<d._toolWidgets.length-1&&(h=d._toolWidgets[e+1]);var r=f&&d._checkType(f.type),t=!1===g.separatorAfterWidget&&h&&d._checkType(h.type);r||t?!r&&t?b(g,"remove","remove","add","remove",1):r&&t?b(g,"add","remove",
"remove","remove",0):r&&!t&&b(g,"remove","remove","remove","add",0):b(g,"remove","add","remove","remove",1);r=d.rtl?"rtl":"ltr";t?(d._removeClass(l[0],d.toThemeProperty("jqx-toolbar-tool-separator-"+r)),d._removeClass(l[0],d.toThemeProperty("jqx-toolbar-tool-no-separator-"+r)),q&&(d._removeClass(q[0],d.toThemeProperty("jqx-toolbar-tool-separator-"+r)),d._removeClass(q[0],d.toThemeProperty("jqx-toolbar-tool-no-separator-"+r)))):g.separatorAfterWidget?(d._removeClass(l[0],d.toThemeProperty("jqx-toolbar-tool-no-separator-"+
r)),l[0].className+=" "+d.toThemeProperty("jqx-toolbar-tool-separator-"+r),q&&(d._removeClass(q[0],d.toThemeProperty("jqx-toolbar-tool-no-separator-"+r)),q[0].className+=" "+d.toThemeProperty("jqx-toolbar-tool-separator-"+r))):(d._removeClass(l[0],d.toThemeProperty("jqx-toolbar-tool-separator-"+r)),l[0].className+=" "+d.toThemeProperty("jqx-toolbar-tool-no-separator-"+r),q&&(d._removeClass(q[0],d.toThemeProperty("jqx-toolbar-tool-separator-"+r)),q[0].className+=" "+d.toThemeProperty("jqx-toolbar-tool-no-separator-"+
r)))}}},_addHandlers:function(){var b=this,d=b.element.id;c.jqx.utilities.resize(b.host,function(){b._initiallyHidden?(b._createTools(),b._minimize(),b._initiallyHidden=!1):(!0===b._isOpen&&(b._minimizePopup.style.display="none",b._isOpen=!1,b._raiseEvent("1")),b._minimize())});b.addHandler(document,"click.jqxToolbar"+d,function(){!0===b._isOpen&&b._openMinimizePopup()});b.addHandler(b._minimizeButton,"click.jqxToolbar"+d,function(d){d.stopPropagation();b._openMinimizePopup()});b.addHandler(c(".jqx-popup"),
"click.jqxToolbar"+d,function(b){-1===b.target.className.indexOf("jqx-window-content")&&b.stopPropagation()})},_removeHandlers:function(){var b=this.element.id;this.removeHandler(document,"click.jqxToolbar"+b);this.removeHandler(this._minimizeButton,"click.jqxToolbar"+b);this.removeHandler(c(".jqx-popup"),"click.jqxToolbar"+b)},_setSize:function(){var b=this.element.style;b.width=this._toPx(this.width);b.height=this._toPx(this.height);this.minWidth&&(b.minWidth=this._toPx(this.minWidth));this.maxWidth&&
(b.maxWidth=this._toPx(this.maxWidth))},_createTools:function(){var b=this.tools.split(" "),d=c.trim(this.tools.replace(/\|/g,"")),d=d.replace(/\s+/g," "),d=d.split(" ");this._toolWidgets=[];for(var e=0,g=0;g<d.length;g++){d[g]!==b[g+e]&&e++;var f=g+e,h;this._toolWidgets[g-1]&&(h=this._toolWidgets[g-1].tool);var l=b[f];if(""===l)return!0;f=this._initializeTool(g,l,h,b[f-1],b[f+1],this.initTools,!0);this._toolWidgets.push(f)}this._minimizePopup.style.display="none";this._minimizePopup.style.visibility=
"visible"},_initializeTool:function(b,d,e,c,f,h,l){var q,r;r=this._initializeWidget(d,q,r,e);q=r.tool;r=r.menuTool;e=q[0];var t="jqx-toolbar-tool",w=r[0],z,B=!0;!0===this.rtl&&(t+=" jqx-toolbar-tool-rtl");if(this.initTools){var v;v=!0===l?this.initTools(d,b,q,!1):h(d,q,!1);if(!v||!1!==v.minimizable&&!1!==v.menuTool)!0===l?this.initTools(d,b,r,!0):h(d,r,!0),r&&(z="jqx-toolbar-tool-minimized");else{if("custom"!==d)r[this._toolToWidgetMapping[d]]("destroy");else r.remove();!1===v.minimizable&&(B=!1);
r=!1}}b=!1;r&&(w.style.display="none");var y;h=this.rtl?"rtl":"ltr";l=["button","toggleButton","repeatButton","linkButton"];v={button:"jqxButton",toggleButton:"jqxToggleButton",repeatButton:"jqxRepeatButton",linkButton:"jqxRepeatButton"};if("|"===f)b=!0,t+=" jqx-toolbar-tool-separator-"+h,r&&(z+=" jqx-toolbar-tool-separator-"+h),r&&(y=document.createElement("div"),y.className=this.toThemeProperty("jqx-fill-state-pressed jqx-toolbar-minimized-popup-separator"),this._minimizePopup.appendChild(y));else if(-1===
l.indexOf(d)||-1!==l.indexOf(d)&&-1===l.indexOf(f))t+=" jqx-toolbar-tool-no-separator-"+h,r&&(z+=" jqx-toolbar-tool-no-separator-"+h);if(-1===l.indexOf(c)&&-1!==l.indexOf(d)&&-1!==l.indexOf(f))if(!1===this.rtl){if(q[v[d]]({roundedCorners:"left"}),r)r[v[d]]({roundedCorners:"left"})}else q[v[d]]({roundedCorners:"left"}),e.style.borderLeftWidth="0px",r&&(r[v[d]]({roundedCorners:"left"}),w.style.borderLeftWidth="0px");else if(-1!==l.indexOf(c)&&-1!==l.indexOf(d)&&-1!==l.indexOf(f))t+=" jqx-toolbar-tool-inner-button",
e.style.borderLeftWidth="0px",r&&(z+=" jqx-toolbar-tool-inner-button",w.style.borderLeftWidth="0px");else if(-1!==l.indexOf(c)&&-1!==l.indexOf(d)&&-1===l.indexOf(f))if(!1===this.rtl)q[v[d]]({roundedCorners:"right"}),e.style.borderLeftWidth="0px",r&&(r[v[d]]({roundedCorners:"right"}),w.style.borderLeftWidth="0px");else if(q[v[d]]({roundedCorners:"left"}),r)r[v[d]]({roundedCorners:"left"});e.className+=" "+this.toThemeProperty(t);r&&(w.className+=" "+this.toThemeProperty(z));return{type:d,tool:q,separatorAfterWidget:b,
minimizable:B,minimized:!1,menuTool:r,menuSeparator:y}},_initializeWidget:function(b,d,e,g){var f,h=this._toolToWidgetMapping[b],l,q=!1;"string"===typeof this.height&&-1!==this.height.indexOf("%")?q=!0:(l=window.getComputedStyle?window.getComputedStyle(this.element):this.element.currentStyle,l=this.element.offsetHeight-(parseInt(l.paddingTop,10)+parseInt(l.paddingBottom,10)+parseInt(l.borderTopWidth,10)+parseInt(l.borderBottomWidth,10)));if("custom"!==b&&void 0===this.host[h])throw b=this._toolToWidgetMapping[b].toLowerCase(),
Error("jqxToolBar: Missing reference to "+b+".js");switch(b){case "button":case "toggleButton":d=document.createElement("button");e=document.createElement("button");f={theme:this.theme,height:q?"100%":l,disabled:this.disabled,rtl:this.rtl};break;case "dropdownlist":case "combobox":d=document.createElement("div");e=document.createElement("div");f={theme:this.theme,autoDropDownHeight:!0,height:q?"100%":l-2,disabled:this.disabled,rtl:this.rtl};break;case "input":d=document.createElement("input");d.setAttribute("type",
"text");e=document.createElement("input");e.setAttribute("type","text");f={theme:this.theme,height:q?"100%":l-2,disabled:this.disabled,rtl:this.rtl};break;case "custom":d=document.createElement("div"),e=document.createElement("div")}q=this.host.children();l=c(this._minimizePopup).children();g||1===q.length&&0===l.length?(this.element.appendChild(d),this._minimizePopup.appendChild(e)):(this.element.insertBefore(d,q[1]),this._minimizePopup.insertBefore(e,l[0]));d=c(d);e=c(e);"custom"!==b&&(d[h](f),
e[h](f));return{tool:d,menuTool:e}},_appendMinimizeButton:function(){this._minimizedTools=0;var b=document.createElement("div"),d="jqx-menu-minimized-button jqx-toolbar-minimized-button",e=document.createElement("div"),c="jqx-popup jqx-fill-state-normal jqx-rc-b jqx-toolbar-minimized-popup";e.setAttribute("id",this.element.id+"Popup");!0===this.rtl&&(d+=" jqx-toolbar-minimized-button-rtl",c+=" jqx-toolbar-minimized-popup-rtl");b.className=this.toThemeProperty(d);e.className=this.toThemeProperty(c);
this.element.appendChild(b);document.body.appendChild(e);this._isOpen=!1;e.style.width=this._toPx(this.minimizeWidth);this._minimizeButton=b;this._minimizePopup=e},_openMinimizePopup:function(){var b=this;if(!1===b._isOpen){var d=b.host.offset(),e=d.left;!1===b.rtl&&(e+=b.element.offsetWidth-parseInt(b.minimizeWidth,10)-(b._getComputedStyle(b._minimizePopup,"paddingLeft")+b._getComputedStyle(b._minimizePopup,"paddingRight")+b._getComputedStyle(b._minimizePopup,"borderLeftWidth")+b._getComputedStyle(b._minimizePopup,
"borderRightWidth")));d=d.top+b.element.offsetHeight-1;b._minimizePopup.style.left=e+"px";b._minimizePopup.style.top=d+"px";c(b._minimizePopup).slideDown("fast",function(){b._isOpen=!0;b._raiseEvent("0")})}else c(b._minimizePopup).slideUp("fast"),b._isOpen=!1,b._raiseEvent("1")},_minimize:function(){var b=0;0<this._minimizedTools&&(b=this._minimizeButton.offsetWidth+this._getComputedStyle(this._minimizeButton,"marginLeft"));b=this.element.offsetWidth-this._getComputedStyle(this.element,"paddingLeft")-
this._getComputedStyle(this.element,"paddingRight")-b-10;if(!(0>b)){for(var d=0,e,g=0;g<this._toolWidgets.length;g++){var f=this._toolWidgets[g].tool;!1===this._toolWidgets[g].minimized?(f=f[0].offsetWidth+this._getComputedStyle(f[0],"marginLeft")+this._getComputedStyle(f[0],"marginRight"),d+=f):void 0===e&&(e=f[0].cloneNode(!0),e.style.visibility="hidden",e.style.display="block",e.style.position="absolute",document.body.appendChild(e),f=e.offsetWidth+this._getComputedStyle(e,"marginLeft")+this._getComputedStyle(e,
"marginRight"),c(e).remove(),e=f)}d>b?(this._minimizeTool(!0),this._minimize()):void 0!==e&&d+e<b&&(this._minimizeTool(!1),this._minimize())}},_minimizeTool:function(b){var d;if(!0===b)for(var e=this._toolWidgets.length-1;0<=e;e--){if(b=this._toolWidgets[e],!1!==b.minimizable&&!1===b.minimized){d=this._getToolValue(b.tool,b.type);b.tool[0].style.display="none";b.menuTool&&(b.menuTool[0].style.display="block",this._setToolValue(d,b.menuTool,b.type));b.menuSeparator&&(b.menuSeparator.style.display=
"block");this._toolWidgets[e].minimized=!0;this._minimizedTools++;1===this._minimizedTools&&(this._minimizeButton.style.display="block");break}}else for(e=0;e<this._toolWidgets.length;e++)if(b=this._toolWidgets[e],!0===b.minimized){b.menuTool&&(d=this._getToolValue(b.menuTool,b.type),b.menuTool[0].style.display="none");b.menuSeparator&&(b.menuSeparator.style.display="none");b.tool.show();b.menuTool&&this._setToolValue(d,b.tool,b.type);this._toolWidgets[e].minimized=!1;this._minimizedTools--;0===this._minimizedTools&&
(this._minimizeButton.style.display="none");break}},_getToolValue:function(b,d){var e;switch(d){case "button":case "custom":e=void 0;break;case "toggleButton":e=-1!==b[0].className.indexOf("jqx-fill-state-pressed");e={text:b[0].innerHTML,toggled:e};break;case "dropdownlist":case "combobox":e=this._toolToWidgetMapping[d];e=b[e]("checkboxes")?b[e]("val"):b[e]("getSelectedIndex");break;case "input":e=b.val()}return e},_setToolValue:function(b,d,e){if(void 0!==b)switch(e){case "toggleButton":d[0].innerHTML=
b.text;-1!==d[0].className.indexOf("jqx-fill-state-pressed")!==b.toggled&&d.jqxToggleButton("toggle");break;case "dropdownlist":case "combobox":e=this._toolToWidgetMapping[e];if(d[e]("checkboxes")){if(d[e]("uncheckAll"),""!==b){b=b.split(",");for(var c=0;c<b.length;c++)d[e]("checkItem",b[c])}}else d[e]("selectIndex",b);break;case "input":d.val(b)}},_restoreChanges:function(){var b=this;c.each(b._toolChanges,function(d,e){"addTool"===e.action?b.addTool(e.type,e.position,e.separator,e.initCallback):
"destroyTool"===e.action?b._destroyTool(e.index):"disableTool"===e.action&&b.disableTool(e.index,e.disable)})},_removeClass:function(b,d){c(b).removeClass(d)},_toPx:function(b){return"number"===typeof b?b+"px":b},_getComputedStyle:function(b,d){var e;window.getComputedStyle?e=window.getComputedStyle(b):b.currentStyle&&(e=b.currentStyle);return"string"===typeof e[d]&&-1===e[d].indexOf("px")?0:parseInt(e[d],10)}})})(jqxBaseFramework);
(function(c){c.jqx.jqxWidget("jqxTooltip","",{});c.extend(c.jqx._jqxTooltip.prototype,{defineInstance:function(){var b={width:"auto",height:"auto",position:"default",enableBrowserBoundsDetection:!0,content:"",left:0,top:0,absolutePositionX:0,absolutePositionY:0,trigger:"hover",showDelay:100,autoHide:!0,autoHideDelay:3E3,closeOnClick:!0,disabled:!1,animationShowDelay:200,animationHideDelay:"fast",showArrow:!0,name:"",opacity:.9,rtl:!1,_isOpen:!1,selector:null,opening:null,value:null,_eventsMap:{mousedown:c.jqx.mobile.getTouchEventName("touchstart"),
mouseup:c.jqx.mobile.getTouchEventName("touchend")},events:["open","close","opening","closing"]};if(this===c.jqx._jqxTooltip.prototype)return b;c.extend(!0,this,b);return b},createInstance:function(){this._isTouchDevice=c.jqx.mobile.isTouchDevice();var b=c.data(document.body,"_tooltipIDArray"+this.name);b?this.IDArray=b:(this.IDArray=[],c.data(document.body,"_tooltipIDArray"+this.name,this.IDArray));b="jqxtooltip"+this._generatekey();this.IDArray.push({tooltipID:b,tooltipHost:this.host});var d=document.createElement("div");
d.setAttribute("id",b);d.innerHTML='<div id="'+b+'Main"><div id="'+b+'Text"></div></div><div id="'+b+'Arrow"></div>';c.jqx.browser.msie&&(d.className=this.toThemeProperty("jqx-noshadow"));document.body.appendChild(d);this._tooltip=d;this._tooltipHelper=c(d);this._tooltipHelper.initAnimate&&this._tooltipHelper.initAnimate();d.style.visibility="hidden";d.style.display="none";d.style.opacity=0;d.style.zIndex=99999;this._arrow=d=document.getElementById(b+"Arrow");!1===this.showArrow&&(d.style.visibility=
"hidden",d.style.display="none");this._main=document.getElementById(b+"Main");this._text=document.getElementById(b+"Text");this._setTheme();this._setSize();this._setContent();!1===this.disabled&&(this._trigger(),!0===this.closeOnClick&&this._clickHide())},open:function(){arguments&&arguments.length&&2===arguments.length&&(this.position="absolute",this.left=arguments[0],this.top=arguments[1],this.absolutePositionX=arguments[0],this.absolutePositionY=arguments[1]);if(!1===this.disabled&&"removed"!==
this._id())if("mouse"===this.position||"mouseenter"===this.position){var b=this.position;this.position="default";this._raiseEvent("2");this._setPosition();this._animateShow();this.position=b}else this._raiseEvent("2"),this._setPosition(),this._animateShow()},close:function(b){var d=this,e=c.jqx.browser.msie&&9>c.jqx.browser.version;"object"===typeof b&&c.isEmptyObject(b)&&(b=this.animationHideDelay);var g=parseFloat(d._tooltip.style.opacity),f=function(){clearTimeout(d.autoHideTimeout);d._raiseEvent("3");
d._tooltipHelper.animate({opacity:0},b,function(){d._tooltip.style.visibility="hidden";d._tooltip.style.display="none";d._raiseEvent("1");d._isOpen=!1})};!1===this._isOpen&&0!==g?f():!0===this._isOpen&&(!e&&g===this.opacity||e)&&f()},destroy:function(){var b=this.IDArray.length;this._removeHandlers();this._tooltipHelper.remove();for(var d=0;d<b;d++)if(this.IDArray[d].tooltipHost===this.host){this.IDArray.splice(d,1);break}this.host.removeData("jqxTooltip")},refresh:function(b){if(!0!==b){var d=this;
this.rtl&&(d._text.className+=" "+d.toThemeProperty("jqx-rtl"),d._text.style.direction="rtl");b=parseFloat(d._tooltip.style.opacity);"removed"!==this._id()&&(!0===this.disabled&&!0===this._isOpen&&b===this.opacity&&(clearTimeout(this.autoHideTimeout),this._tooltipHelper.animate({opacity:0},this.animationHideDelay,function(){d._tooltip.style.visibility="hidden";d._tooltip.style.display="none";d._isOpen=!1})),this._setTheme(),this._setContent(),this._setSize(),"mouse"!==this.position&&"mouseenter"!==
this.position&&this._setPosition(),this._removeHandlers(),!1===this.disabled&&(this._trigger(),!0===this.closeOnClick&&this._clickHide()))}},propertyChangedHandler:function(b,d,e,c){"content"===d&&(this.changeContentFlag=!0);b.refresh()},_raiseEvent:function(b,d){var e=new c.Event(this.events[b]);e.owner=this;e.args=d;var g;try{g=this.host.trigger(e)}catch(f){}return g},_generatekey:function(){return(65536*(1+Math.random())|0).toString(16).substring(1)+(65536*(1+Math.random())|0).toString(16).substring(1)},
_id:function(){for(var b,d=this.IDArray.length,e=0;e<d;e++)if(this.IDArray[e].tooltipHost===this.host){b=this.IDArray[e].tooltipID;b="#"+b;break}void 0===b&&(b="removed");return b},_setPosition:function(b){var d=this,e=d._tooltip;if(!1===this._isOpen&&0===parseFloat(e.style.opacity)||!0===this.changeContentFlag)if(b||"mouse"!==this.position&&"mouseenter"!==this.position){e.style.display="block";this.changeContentFlag=!1;this.documentTop=document.documentElement.scrollTop;this.documentLeft=document.documentElement.scrollLeft;
this.windowWidth=window.innerWidth;this.windowHeight=window.innerHeight;this.hostWidth=d.element.offsetWidth;this.hostHeight=d.element.offsetHeight;this.tooltipWidth=e.offsetWidth;this.tooltipHeight=e.offsetHeight;this.hostOffset=this.host.offset();this.tooltipOffset=d._tooltipHelper.offset();this.defaultOffset=30;this.offsetHorizontal=parseInt(this.left,10);this.offsetVertical=parseInt(this.top,10);var e=d._arrow,g=c(e),f=d._main,h=c(f),l=f.offsetWidth,q=f.offsetHeight;this.arrowSize=5;this.tooltipMainOffset=
h.offset();this.tooltipArrowOffset={};switch(this.position){case "top":this.tooltipOffset.left=this.hostOffset.left+this.hostWidth/2-this.tooltipWidth/2+this.offsetHorizontal;this.tooltipOffset.top=this.hostOffset.top-this.tooltipHeight-this.arrowSize+this.offsetVertical;this._detectBrowserBounds();this.tooltipMainOffset=h.offset();d._removeClass(e,d.toThemeProperty("jqx-tooltip-arrow-l-r"));e.className+=" "+d.toThemeProperty("jqx-tooltip-arrow-t-b");e.style.borderWidth=this.arrowSize+"px "+this.arrowSize+
"px 0px";this.tooltipArrowOffset.left=this.tooltipMainOffset.left+(l/2-this.arrowSize);this.tooltipArrowOffset.top=this.tooltipMainOffset.top+q;g.offset({top:this.tooltipArrowOffset.top,left:this.tooltipArrowOffset.left});break;case "bottom":this.tooltipOffset.left=this.hostOffset.left+this.hostWidth/2-this.tooltipWidth/2+this.offsetHorizontal;this.tooltipOffset.top=this.hostOffset.top+this.hostHeight+this.arrowSize+this.offsetVertical;this._detectBrowserBounds();this.tooltipMainOffset=h.offset();
d._removeClass(e,d.toThemeProperty("jqx-tooltip-arrow-l-r"));e.className+=" "+d.toThemeProperty("jqx-tooltip-arrow-t-b");e.style.borderWidth="0 "+this.arrowSize+"px "+this.arrowSize+"px";this.tooltipArrowOffset.left=this.tooltipMainOffset.left+(l/2-this.arrowSize);this.tooltipArrowOffset.top=this.tooltipMainOffset.top-this.arrowSize;g.offset({top:this.tooltipArrowOffset.top,left:this.tooltipArrowOffset.left});break;case "left":f=window.getComputedStyle?window.getComputedStyle(f):f.currentStyle;this.tooltipOffset.left=
this.hostOffset.left-this.tooltipWidth-this.arrowSize+this.offsetHorizontal-(parseInt(f.borderLeftWidth,10)+parseInt(f.borderRightWidth,10));this.tooltipOffset.top=this.hostOffset.top+this.hostHeight/2-this.tooltipHeight/2+this.offsetVertical;this._detectBrowserBounds();d._removeClass(e,d.toThemeProperty("jqx-tooltip-arrow-t-b"));e.className+=" "+d.toThemeProperty("jqx-tooltip-arrow-l-r");e.style.borderWidth=this.arrowSize+"px 0px "+this.arrowSize+"px "+this.arrowSize+"px";this.tooltipMainOffset=
h.offset();this.tooltipArrowOffset.left=this.tooltipMainOffset.left+l;this.tooltipArrowOffset.top=this.tooltipMainOffset.top+q/2-this.arrowSize;g.offset({top:this.tooltipArrowOffset.top,left:this.tooltipArrowOffset.left});break;case "right":this.tooltipOffset.left=this.hostOffset.left+this.hostWidth+this.arrowSize+this.offsetHorizontal;this.tooltipOffset.top=this.hostOffset.top+this.hostHeight/2-this.tooltipHeight/2+this.offsetVertical;this.tooltipOffset.top=parseInt(this.tooltipOffset.top,10);this._detectBrowserBounds();
this.tooltipMainOffset=h.offset();d._removeClass(e,d.toThemeProperty("jqx-tooltip-arrow-t-b"));e.className+=" "+d.toThemeProperty("jqx-tooltip-arrow-l-r");e.style.borderWidth=this.arrowSize+"px "+this.arrowSize+"px "+this.arrowSize+"px 0px";this.tooltipArrowOffset.left=this.tooltipMainOffset.left-this.arrowSize;this.tooltipArrowOffset.top=this.tooltipMainOffset.top+f.offsetHeight/2-this.arrowSize;g.offset({top:this.tooltipArrowOffset.top,left:this.tooltipArrowOffset.left});break;case "top-left":this.tooltipOffset.left=
this.hostOffset.left+this.defaultOffset-this.tooltipWidth+this.offsetHorizontal;this.tooltipOffset.top=this.hostOffset.top-this.tooltipHeight-this.arrowSize+this.offsetVertical;this._detectBrowserBounds();this.tooltipMainOffset=h.offset();d._removeClass(e,d.toThemeProperty("jqx-tooltip-arrow-l-r"));e.className+=" "+d.toThemeProperty("jqx-tooltip-arrow-t-b");e.style.borderWidth=this.arrowSize+"px "+this.arrowSize+"px  0px";this.tooltipArrowOffset.left=this.tooltipMainOffset.left+l-6*this.arrowSize;
this.tooltipArrowOffset.top=this.tooltipMainOffset.top+q;g.offset({top:this.tooltipArrowOffset.top,left:this.tooltipArrowOffset.left});break;case "bottom-left":this.tooltipOffset.left=this.hostOffset.left+this.defaultOffset-this.tooltipWidth+this.offsetHorizontal;this.tooltipOffset.top=this.hostOffset.top+this.hostHeight+this.arrowSize+this.offsetVertical;this._detectBrowserBounds();this.tooltipMainOffset=h.offset();d._removeClass(e,d.toThemeProperty("jqx-tooltip-arrow-l-r"));e.className+=" "+d.toThemeProperty("jqx-tooltip-arrow-t-b");
e.style.borderWidth="0 "+this.arrowSize+"px "+this.arrowSize+"px";this.tooltipArrowOffset.left=this.tooltipMainOffset.left+l-6*this.arrowSize;this.tooltipArrowOffset.top=this.tooltipMainOffset.top-this.arrowSize;g.offset({top:this.tooltipArrowOffset.top,left:this.tooltipArrowOffset.left});break;case "top-right":this.tooltipOffset.left=this.hostOffset.left+this.hostWidth-this.defaultOffset+this.offsetHorizontal;this.tooltipOffset.top=this.hostOffset.top-this.tooltipHeight-this.arrowSize+this.offsetVertical;
this._detectBrowserBounds();this.tooltipMainOffset=h.offset();d._removeClass(e,d.toThemeProperty("jqx-tooltip-arrow-l-r"));e.className+=" "+d.toThemeProperty("jqx-tooltip-arrow-t-b");e.style.borderWidth=this.arrowSize+"px "+this.arrowSize+"px  0px";this.tooltipArrowOffset.left=this.tooltipMainOffset.left+4*this.arrowSize;this.tooltipArrowOffset.top=this.tooltipMainOffset.top+q;g.offset({top:this.tooltipArrowOffset.top,left:this.tooltipArrowOffset.left});break;case "bottom-right":this.tooltipOffset.left=
this.hostOffset.left+this.hostWidth-this.defaultOffset+this.offsetHorizontal;this.tooltipOffset.top=this.hostOffset.top+this.hostHeight+this.arrowSize+this.offsetVertical;this._detectBrowserBounds();this.tooltipMainOffset=h.offset();d._removeClass(e,d.toThemeProperty("jqx-tooltip-arrow-l-r"));e.className+=" "+d.toThemeProperty("jqx-tooltip-arrow-t-b");e.style.borderWidth="0 "+this.arrowSize+"px "+this.arrowSize+"px";this.tooltipArrowOffset.left=this.tooltipMainOffset.left+4*this.arrowSize;this.tooltipArrowOffset.top=
this.tooltipMainOffset.top-this.arrowSize;g.offset({top:this.tooltipArrowOffset.top,left:this.tooltipArrowOffset.left});break;case "absolute":d._tooltipHelper.offset({top:this.absolutePositionY,left:this.absolutePositionX});e.style.borderWidth="0px";break;case "mouse":if(!1===this._isTouchDevice)switch(this.trigger){case "hover":this.mouseHoverTimeout&&clearTimeout(this.mouseHoverTimeout);this.mouseHoverTimeout=setTimeout(function(){d.tooltipOffset.left=b.pageX+10;d.tooltipOffset.top=b.pageY+10;d._detectBrowserBounds()},
this.showDelay);break;case "click":this.tooltipOffset.left=b.pageX+10,this.tooltipOffset.top=b.pageY+10,this._detectBrowserBounds()}else{g=b.pageX;h=b.pageY;if(b.originalEvent){var r;b.originalEvent.touches&&b.originalEvent.touches.length?r=b.originalEvent.touches[0]:b.originalEvent.changedTouches&&b.originalEvent.changedTouches.length&&(r=b.originalEvent.changedTouches[0]);void 0!==r&&(g=r.pageX,h=r.pageY)}this.tooltipOffset.left=g+10;this.tooltipOffset.top=h+10;this._detectBrowserBounds()}e.style.borderWidth=
"0px";break;case "mouseenter":r=b.pageY;var t=b.pageX;r<this.hostOffset.top+10&&r>this.hostOffset.top-10?(this.tooltipOffset.left=t-this.tooltipWidth/2,this.tooltipOffset.top=this.hostOffset.top-this.tooltipHeight-this.arrowSize,this._detectBrowserBounds(),this.tooltipMainOffset=h.offset(),d._removeClass(e,d.toThemeProperty("jqx-tooltip-arrow-l-r")),e.className+=" "+d.toThemeProperty("jqx-tooltip-arrow-t-b"),e.style.borderWidth=this.arrowSize+"px "+this.arrowSize+"px  0px",this.tooltipArrowOffset.left=
this.tooltipMainOffset.left+(l/2-this.arrowSize),this.tooltipArrowOffset.top=this.tooltipMainOffset.top+q,g.offset({top:this.tooltipArrowOffset.top,left:this.tooltipArrowOffset.left})):r<this.hostOffset.top+this.hostHeight+10&&r>this.hostOffset.top+this.hostHeight-10?(this.tooltipOffset.left=t-this.tooltipWidth/2,this.tooltipOffset.top=this.hostOffset.top+this.hostHeight+this.arrowSize,this._detectBrowserBounds(),this.tooltipMainOffset=h.offset(),d._removeClass(e,d.toThemeProperty("jqx-tooltip-arrow-l-r")),
e.className+=" "+d.toThemeProperty("jqx-tooltip-arrow-t-b"),e.style.borderWidth="0 "+this.arrowSize+"px "+this.arrowSize+"px",this.tooltipArrowOffset.left=this.tooltipMainOffset.left+(l/2-this.arrowSize),this.tooltipArrowOffset.top=this.tooltipMainOffset.top-this.arrowSize,g.offset({top:this.tooltipArrowOffset.top,left:this.tooltipArrowOffset.left})):t<this.hostOffset.left+10&&t>this.hostOffset.left-10?(f=window.getComputedStyle?window.getComputedStyle(f):f.currentStyle,this.tooltipOffset.left=this.hostOffset.left-
this.tooltipWidth-this.arrowSize-(parseInt(f.borderLeftWidth,10)+parseInt(f.borderRightWidth,10)),this.tooltipOffset.top=r-this.tooltipHeight/2,this._detectBrowserBounds(),this.tooltipMainOffset=h.offset(),d._removeClass(e,d.toThemeProperty("jqx-tooltip-arrow-t-b")),e.className+=" "+d.toThemeProperty("jqx-tooltip-arrow-l-r"),e.style.borderWidth=this.arrowSize+"px 0px "+this.arrowSize+"px "+this.arrowSize+"px",this.tooltipMainOffset=h.offset(),this.tooltipArrowOffset.left=this.tooltipMainOffset.left+
l,this.tooltipArrowOffset.top=this.tooltipMainOffset.top+q/2-this.arrowSize,g.offset({top:this.tooltipArrowOffset.top,left:this.tooltipArrowOffset.left})):t<this.hostOffset.left+this.hostWidth+10&&t>this.hostOffset.left+this.hostWidth-10&&(this.tooltipOffset.left=this.hostOffset.left+this.hostWidth+this.arrowSize,this.tooltipOffset.top=r-this.tooltipHeight/2,this._detectBrowserBounds(),this.tooltipMainOffset=h.offset(),d._removeClass(e,d.toThemeProperty("jqx-tooltip-arrow-t-b")),e.className+=" "+
d.toThemeProperty("jqx-tooltip-arrow-l-r"),e.style.borderWidth=this.arrowSize+"px "+this.arrowSize+"px "+this.arrowSize+"px 0px",this.tooltipMainOffset=h.offset(),this.tooltipArrowOffset.left=this.tooltipMainOffset.left-this.arrowSize,this.tooltipArrowOffset.top=this.tooltipMainOffset.top+q/2-this.arrowSize,g.offset({top:this.tooltipArrowOffset.top,left:this.tooltipArrowOffset.left}));break;case "default":this.tooltipOffset.left=this.hostOffset.left+this.hostWidth-this.defaultOffset,this.tooltipOffset.top=
this.hostOffset.top+this.hostHeight+this.arrowSize,this._detectBrowserBounds(),this.tooltipMainOffset=h.offset(),d._removeClass(e,d.toThemeProperty("jqx-tooltip-arrow-l-r")),e.className+=" "+d.toThemeProperty("jqx-tooltip-arrow-t-b"),e.style.borderWidth="0 "+this.arrowSize+"px "+this.arrowSize+"px",this.tooltipArrowOffset.left=this.tooltipMainOffset.left+4*this.arrowSize,this.tooltipArrowOffset.top=this.tooltipMainOffset.top-this.arrowSize,g.offset({top:this.tooltipArrowOffset.top,left:this.tooltipArrowOffset.left})}}},
_setContent:function(){this._text.innerHTML=this.content},opened:function(){return this._isOpen&&"block"==this.host.css("display")&&"visible"==this.host.css("visibility")},_animateShow:function(){this._closeAll();clearTimeout(this.autoHideTimeout);var b=parseFloat(this._tooltip.style.opacity);if(!1===this._isOpen&&0===b){var d=this;d._tooltip.style.visibility="visible";d._tooltip.style.display="block";d._tooltip.style.opacity=0;this.opening&&!1===this.opening(this)||d._tooltipHelper.animate({opacity:this.opacity},
this.animationShowDelay,function(){d._raiseEvent("0");d._isOpen=!0;d.openedTooltip=d;c.data(document.body,"_openedTooltip"+d.name,d);d.autoHideTimeout&&clearTimeout(d.autoHideTimeout);0<d.autoHideDelay&&!0===d.autoHide&&(d.autoHideTimeout=setTimeout(function(){d._autoHide()},d.autoHideDelay))})}},_trigger:function(){if("removed"!==this._id()){var b=this,d=this.host;this.selector&&(d=c("#"+this.selector));if(!1===this._isTouchDevice)switch(this.trigger){case "hover":"mouse"===this.position?(this.addHandler(d,
"mousemove.tooltip",function(d){1===b._enterFlag&&(b._raiseEvent("2"),b._setPosition(d),clearTimeout(b.hoverShowTimeout),b.hoverShowTimeout=setTimeout(function(){b._animateShow();b._enterFlag=0},b.showDelay))}),this.addHandler(d,"mouseenter.tooltip",function(){0!==b._leaveFlag&&(b._enterFlag=1)}),this.addHandler(d,"mouseleave.tooltip",function(d){b._leaveFlag=1;clearTimeout(b.hoverShowTimeout);var c=b._tooltipHelper.offset(),f=b._tooltip.offsetWidth,h=b._tooltip.offsetHeight;(parseInt(d.pageX,10)<
parseInt(c.left,10)||parseInt(d.pageX,10)>parseInt(c.left,10)+f)&&b.close();(parseInt(d.pageY,10)<parseInt(c.top,10)||parseInt(d.pageY,10)>parseInt(c.top,10)+h)&&b.close()}),this.addHandler(b._tooltipHelper,"mouseleave.tooltip",function(d){b._checkBoundariesAuto(d);0!==b._clickFlag&&0!==b._autoFlag?b._leaveFlag=0:(b._leaveFlag=1,b.close())})):(this.addHandler(d,"mouseenter.tooltip",function(d){clearTimeout(b.hoverShowTimeout);b.hoverShowTimeout=setTimeout(function(){b._raiseEvent("2");b._setPosition(d);
b._animateShow()},b.showDelay)}),this.addHandler(d,"mouseleave.tooltip",function(d){b._leaveFlag=1;clearTimeout(b.hoverShowTimeout);if(b.autoHide){var c=d.pageX;d=d.pageY;var f=b._tooltipHelper.offset(),h=f.left,f=f.top,l=b._tooltip.offsetWidth,q=b._tooltip.offsetHeight;(parseInt(c,10)<parseInt(h,10)||parseInt(c,10)>parseInt(h,10)+l||parseInt(d,10)<parseInt(f,10)||parseInt(d,10)>parseInt(f,10)+q)&&b.close()}}),this.addHandler(b._tooltipHelper,"mouseleave.tooltip",function(d){b._checkBoundariesAuto(d);
0!==b._clickFlag&&0!==b._autoFlag?b._leaveFlag=0:(b._leaveFlag=1,b.autoHide&&b.close())}));break;case "click":this.addHandler(d,"click.tooltip",function(d){"mouseenter"===b.position&&(b.position="mouse");b._raiseEvent("2");b._setPosition(d);b._animateShow()})}else"none"!==this.trigger&&this.addHandler(d,"touchstart.tooltip",function(d){"mouseenter"===b.position&&(b.position="mouse");b._raiseEvent("2");b._setPosition(d);b._animateShow()})}},_autoHide:function(){var b=this,d=parseFloat(b._tooltip.style.opacity);
!0===this.autoHide&&!0===this._isOpen&&d>=this.opacity&&(b._raiseEvent("3"),b._tooltipHelper.animate({opacity:0},b.animationHideDelay,function(){b._tooltip.style.visibility="hidden";b._tooltip.style.display="none";b._raiseEvent("1");b._isOpen=!1}))},_clickHide:function(){var b=this;this.addHandler(b._tooltipHelper,"click.tooltip",function(d){b._checkBoundariesClick(d);b.close()})},_setSize:function(){this._tooltip.style.width=this._toPx(this.width);this._tooltip.style.height=this._toPx(this.height)},
resize:function(){this._setSize()},_setTheme:function(){-1===this._tooltip.className.indexOf("jqx-tooltip")&&(this._tooltip.className+=" "+this.toThemeProperty("jqx-tooltip jqx-popup"),this._main.className+=" "+this.toThemeProperty("jqx-widget jqx-fill-state-normal jqx-tooltip-main"),this._text.className+=" "+this.toThemeProperty("jqx-widget jqx-fill-state-normal jqx-tooltip-text"),this._arrow&&(this._arrow.className+=" "+this.toThemeProperty("jqx-widget jqx-fill-state-normal jqx-tooltip-arrow")))},
_initialPosition:function(){var b=this.position;this.position="default";this._setPosition();this.position=b},_detectBrowserBounds:function(){var b=this._tooltipHelper;this.enableBrowserBoundsDetection?this.tooltipOffset.top<this.documentTop&&0>this.tooltipOffset.left?b.offset({top:this.documentTop,left:this.documentLeft}):this.tooltipOffset.top<this.documentTop&&this.tooltipOffset.left+this.tooltipWidth>this.windowWidth+this.documentLeft?b.offset({top:this.documentTop,left:this.windowWidth+this.documentLeft-
this.tooltipWidth}):this.tooltipOffset.top<this.documentTop?b.offset({top:this.documentTop,left:this.tooltipOffset.left}):this.tooltipOffset.top+this.tooltipHeight>this.windowHeight+this.documentTop&&0>this.tooltipOffset.left?b.offset({top:this.windowHeight+this.documentTop-this.tooltipHeight,left:this.documentLeft}):this.tooltipOffset.top+this.tooltipHeight>this.windowHeight+this.documentTop&&this.tooltipOffset.left+this.tooltipWidth>this.windowWidth+this.documentLeft?b.offset({top:this.windowHeight+
this.documentTop-this.tooltipHeight,left:this.windowWidth+this.documentLeft-this.tooltipWidth}):this.tooltipOffset.top+this.tooltipHeight>this.windowHeight+this.documentTop?b.offset({top:this.windowHeight+this.documentTop-this.tooltipHeight,left:this.tooltipOffset.left}):0>this.tooltipOffset.left?b.offset({top:this.tooltipOffset.top,left:this.documentLeft}):this.tooltipOffset.left+this.tooltipWidth>this.windowWidth+this.documentLeft?b.offset({top:this.tooltipOffset.top,left:this.windowWidth+this.documentLeft-
this.tooltipWidth}):b.offset({top:this.tooltipOffset.top,left:this.tooltipOffset.left}):b.offset({top:this.tooltipOffset.top,left:this.tooltipOffset.left})},_checkBoundaries:function(b){return b.pageX>=this.hostOffset.left&&b.pageX<=this.hostOffset.left+this.hostWidth&&b.pageY>=this.hostOffset.top&&b.pageY<=this.hostOffset.top+this.hostHeight?!0:!1},_checkBoundariesClick:function(b){this._checkBoundaries(b)?this._clickFlag=1:this._clickFlag=0},_checkBoundariesAuto:function(b){this._checkBoundaries(b)?
this._autoFlag=1:this._autoFlag=0},_removeHandlers:function(){this.removeHandler(this.host,"mouseenter.tooltip");this.removeHandler(this.host,"mousemove.tooltip");this.removeHandler(this.host,"mouseleave.tooltip");this.removeHandler(this.host,"click.tooltip");this.removeHandler(this.host,"touchstart.tooltip");this.removeHandler(this._tooltipHelper,"click.tooltip");this.removeHandler(this._tooltipHelper,"mouseleave.tooltip")},_closeAll:function(){for(var b=0;b<this.IDArray.length;b++){var d=document.getElementById(this.IDArray[b].tooltipID);
d!==this._tooltip&&(d.style.opacity=0,d.style.visibility="hidden",d.style.display="none",this._isOpen=!1)}},_toPx:function(b){return"number"===typeof b?b+"px":b},_removeClass:function(b,d){c(b).removeClass(d)}})})(jqxBaseFramework);
(function(c){c.jqx.jqxWidget("jqxCheckBox","",{});c.extend(c.jqx._jqxCheckBox.prototype,{defineInstance:function(){var b={animationShowDelay:300,animationHideDelay:300,width:null,height:null,boxSize:"15px",checked:!1,hasThreeStates:!1,disabled:!1,enableContainerClick:!0,locked:!1,groupName:"",keyboardCheck:!0,enableHover:!0,hasInput:!0,rtl:!1,updated:null,disabledContainer:!1,changeType:null,_canFocus:!0,aria:{"aria-checked":{name:"checked",type:"boolean"},"aria-disabled":{name:"disabled",type:"boolean"}},
events:["checked","unchecked","indeterminate","change"]};if(this===c.jqx._jqxCheckBox.prototype)return b;c.extend(!0,this,b);return b},createInstance:function(b){this._createFromInput("CheckBox");this.render()},_createFromInput:function(b){if("input"==this.element.nodeName.toLowerCase()){this.field=this.element;this.field.className&&(this._className=this.field.className);var d={title:this.field.title};this.field.value&&(d.value=this.field.value);this.field.checked&&(d.checked=!0);d.id=this.field.id.length?
this.field.id.replace(/[^\w]/g,"_")+"_"+b:c.jqx.utilities.createId()+"_"+b;var e=this.element.nextSibling,g=!1;!e||"#text"!=e.nodeName&&"span"!=e.nodeName||(g=!0);var f=0;b=c("<div></div>",d);g&&(b.append(e),e=c("<span>"+c(e).text()+"</span>"),e.appendTo(c(document.body)),f+=e.width(),e.remove());b[0].style.cssText=this.field.style.cssText;this.width||(this.width=c(this.field).width()+f+10);this.height||(this.height=c(this.field).outerHeight()+10);c(this.field).hide().after(b);f=this.host.data();
this.host=b;this.host.data(f);this.element=b[0];this.element.id=this.field.id;this.field.id=d.id;this._className&&(this.host.addClass(this._className),c(this.field).removeClass(this._className));this.field.tabIndex&&(d=this.field.tabIndex,this.field.tabIndex=-1,this.element.tabIndex=d)}},_addInput:function(){if(this.hasInput){this.input&&this.input.remove();var b=this.host.attr("name");this.input=c("<input type='hidden'/>");this.host.append(this.input);b&&this.input.attr("name",b);this.input.val(this.checked);
this.host.attr("role","checkbox");c.jqx.aria(this)}},render:function(){this.init=!0;var b=this;this.setSize();this.propertyChangeMap.width=function(d,e,c,g){b.setSize()};this.propertyChangeMap.height=function(d,e,c,g){b.setSize()};this._removeHandlers();this.width||this.host.css("overflow-x","visible");this.height||this.host.css("overflow-y","visible");this.checkbox&&(this.checkbox.remove(),this.checkbox=null);this.checkMark&&(this.checkMark.remove(),this.checkMark=null);this.box&&(this.box.remove(),
this.box=null);this.clear&&(this.clear.remove(),this.clear=null);null==this.boxSize&&(this.boxSize=13);var d=parseInt(this.boxSize)+"px",e=Math.floor((parseInt(this.boxSize)-13)/2),g=e;this.checkbox="13px"!=this.boxSize?c('<div><div style="width: '+d+"; height: "+d+';"><span style="position: relative; left: '+(e+"px")+"; top: "+(g+"px")+'; width: 13px; height: 13px;"></span></div></div>'):c('<div><div style="width: '+d+"; height: "+d+';"><span style="width: '+d+"; height: "+d+';"></span></div></div>');
this.host.prepend(this.checkbox);this.disabledContainer||(this.host.attr("tabIndex")||this.host.attr("tabIndex",0),this.clear=c('<div style="clear: both;"></div>'),this.host.append(this.clear));this.checkMark=c(this.checkbox[0].firstChild.firstChild);this.box=this.checkbox;this.box.addClass(this.toThemeProperty("jqx-checkbox-default")+" "+this.toThemeProperty("jqx-fill-state-normal")+" "+this.toThemeProperty("jqx-rc-all"));this.disabled&&this.disable();this.disabledContainer||(this.host.addClass(this.toThemeProperty("jqx-widget")),
this.host.addClass(this.toThemeProperty("jqx-checkbox")));this.locked&&!this.disabledContainer&&this.host.css("cursor","auto");d=this.element.getAttribute("checked");if("checked"==d||"true"==d||1==d)this.checked=!0;this._addInput();this._render();this._addHandlers();this.init=!1;this._centerBox()},_centerBox:function(){if(this.height&&-1==this.height.toString().indexOf("%")&&this.box){var b=parseInt(this.height);this.host.css("line-height",b+"px");b=b-parseInt(this.boxSize)-1;this.box.css("margin-top",
parseInt(b/2))}},refresh:function(b){b||(this.setSize(),this._render())},resize:function(b,d){this.width=b;this.height=d;this.refresh()},setSize:function(){null!=this.width&&-1!=this.width.toString().indexOf("px")?this.host.width(this.width):void 0==this.width||isNaN(this.width)?null!=this.width&&-1!=this.width.toString().indexOf("%")&&(this.element.style.width=this.width):this.host.width(this.width);null!=this.height&&-1!=this.height.toString().indexOf("px")?this.host.height(this.height):void 0==
this.height||isNaN(this.height)?null!=this.height&&-1!=this.height.toString().indexOf("%")&&(this.element.style.height=this.height):this.host.height(this.height);this._centerBox()},_addHandlers:function(){var b=this,d="mousedown";c.jqx.mobile.isTouchDevice()&&(d=c.jqx.mobile.getTouchEventName("touchend"));this.addHandler(this.box,d,function(d){if(!b.disabled&&!b.enableContainerClick&&!b.locked)return b.changeType="mouse",b.toggle(),b.updated&&(d.owner=b,b.updated(d,b.checked,b.oldChecked)),d.preventDefault&&
d.preventDefault(),!1});this.disabledContainer||(this.addHandler(this.host,"keydown",function(d){if(!b.disabled&&!b.locked&&b.keyboardCheck&&32==d.keyCode){if(!b._canFocus)return!0;b.changeType="keyboard";b.toggle();b.updated&&(d.owner=b,b.updated(d,b.checked,b.oldChecked));d.preventDefault&&d.preventDefault();return!1}}),this.addHandler(this.host,d,function(d){if(!b.disabled&&b.enableContainerClick&&!b.locked)return b.changeType="mouse",b.toggle(),d.preventDefault&&d.preventDefault(),b._canFocus&&
b.focus(),!1}),this.addHandler(this.host,"selectstart",function(d){if(!b.disabled&&b.enableContainerClick)return d.preventDefault&&d.preventDefault(),!1}),this.addHandler(this.host,"mouseup",function(d){!b.disabled&&b.enableContainerClick&&d.preventDefault&&d.preventDefault()}),this.addHandler(this.host,"focus",function(d){if(!b.disabled&&!b.locked){if(!b._canFocus)return!0;b.enableHover&&b.box.addClass(b.toThemeProperty("jqx-checkbox-hover"));b.box.addClass(b.toThemeProperty("jqx-fill-state-focus"));
d.preventDefault&&d.preventDefault();b.hovered=!0;return!1}}),this.addHandler(this.host,"blur",function(d){if(!b.disabled&&!b.locked){if(!b._canFocus)return!0;b.enableHover&&b.box.removeClass(b.toThemeProperty("jqx-checkbox-hover"));b.box.removeClass(b.toThemeProperty("jqx-fill-state-focus"));d.preventDefault&&d.preventDefault();return b.hovered=!1}}),this.addHandler(this.host,"mouseenter",function(d){b.locked&&b.host.css("cursor","arrow");if(b.enableHover&&!b.disabled&&b.enableContainerClick&&!b.locked)return b.box.addClass(b.toThemeProperty("jqx-checkbox-hover")),
b.box.addClass(b.toThemeProperty("jqx-fill-state-hover")),d.preventDefault&&d.preventDefault(),b.hovered=!0,!1}),this.addHandler(this.host,"mouseleave",function(d){if(b.enableHover&&!b.disabled&&b.enableContainerClick&&!b.locked)return b.box.removeClass(b.toThemeProperty("jqx-checkbox-hover")),b.box.removeClass(b.toThemeProperty("jqx-fill-state-hover")),d.preventDefault&&d.preventDefault(),b.hovered=!1}),this.addHandler(this.box,"mouseenter",function(){b.locked||b.disabled||b.enableContainerClick||
(b.box.addClass(b.toThemeProperty("jqx-checkbox-hover")),b.box.addClass(b.toThemeProperty("jqx-fill-state-hover")))}),this.addHandler(this.box,"mouseleave",function(){b.disabled||b.enableContainerClick||(b.box.removeClass(b.toThemeProperty("jqx-checkbox-hover")),b.box.removeClass(b.toThemeProperty("jqx-fill-state-hover")))}))},focus:function(){try{this.host.focus()}catch(b){}},_removeHandlers:function(){var b="mousedown";c.jqx.mobile.isTouchDevice()&&(b="touchend");this.box&&(this.removeHandler(this.box,
b),this.removeHandler(this.box,"mouseenter"),this.removeHandler(this.box,"mouseleave"));this.removeHandler(this.host,b);this.removeHandler(this.host,"mouseup");this.removeHandler(this.host,"selectstart");this.removeHandler(this.host,"mouseenter");this.removeHandler(this.host,"mouseleave");this.removeHandler(this.host,"keydown");this.removeHandler(this.host,"blur");this.removeHandler(this.host,"focus")},_render:function(){this.disabled?this.disable():this.enableContainerClick?this.host.css("cursor",
"pointer"):this.init||this.host.css("cursor","auto");this.rtl&&(this.box.addClass(this.toThemeProperty("jqx-checkbox-rtl")),this.host.addClass(this.toThemeProperty("jqx-rtl")));this.updateStates()},_setState:function(b,d){this.checked!=b&&(this.checked=b,this.checkMark[0].className=this.checked?this.toThemeProperty("jqx-checkbox-check-checked"):null==this.checked?this.toThemeProperty("jqx-checkbox-check-indeterminate"):"");if(!1===d||!0===d)this.locked=d},val:function(b){if(0==arguments.length||null!=
b&&"object"==typeof b)return this.checked;"string"==typeof b?("true"==b&&this.check(),"false"==b&&this.uncheck(),""==b&&this.indeterminate()):(1==b&&this.check(),0==b&&this.uncheck(),null==b&&this.indeterminate());return this.checked},check:function(){this.checked=!0;var b=this;this.checkMark.removeClass();c.jqx.browser.msie||0==this.animationShowDelay?this.checkMark.addClass(this.toThemeProperty("jqx-checkbox-check-checked")):(this.checkMark.addClass(this.toThemeProperty("jqx-checkbox-check-checked")),
this.checkMark.css("opacity",0),this.checkMark.stop().animate({opacity:1},this.animationShowDelay,function(){}));if(null!=this.groupName&&0<this.groupName.length){var d=c.find(this.toThemeProperty(".jqx-checkbox",!0));c.each(d,function(){c(this).jqxCheckBox("groupName")==b.groupName&&this!=b.element&&c(this).jqxCheckBox("uncheck")})}d=this.changeType;this._raiseEvent("0",!0);this.changeType=d;this._raiseEvent("3",{checked:!0});void 0!=this.input&&(this.input.val(this.checked),c.jqx.aria(this,"aria-checked",
this.checked))},uncheck:function(){this.checked=!1;var b=this;c.jqx.browser.msie||0==this.animationHideDelay?""!=b.checkMark[0].className&&(b.checkMark[0].className=""):(this.checkMark.css("opacity",1),this.checkMark.stop().animate({opacity:0},this.animationHideDelay,function(){""!=b.checkMark[0].className&&(b.checkMark[0].className="")}));var d=this.changeType;this._raiseEvent("1");this.changeType=d;this._raiseEvent("3",{checked:!1});void 0!=this.input&&(this.input.val(this.checked),c.jqx.aria(this,
"aria-checked",this.checked))},indeterminate:function(){this.checked=null;this.checkMark.removeClass();c.jqx.browser.msie||0==this.animationShowDelay?this.checkMark.addClass(this.toThemeProperty("jqx-checkbox-check-indeterminate")):(this.checkMark.addClass(this.toThemeProperty("jqx-checkbox-check-indeterminate")),this.checkMark.css("opacity",0),this.checkMark.stop().animate({opacity:1},this.animationShowDelay,function(){}));this._raiseEvent("2");this._raiseEvent("3",{checked:null});void 0!=this.input&&
(this.input.val(this.checked),c.jqx.aria(this,"aria-checked","undefined"))},toggle:function(){this.disabled||this.locked||(null!=this.groupName&&0<this.groupName.length?1!=this.checked&&(this.checked=!0,this.updateStates()):(this.oldChecked=this.checked,this.checked=1==this.checked?this.hasThreeStates?null:!1:null!=this.checked,this.updateStates(),void 0!=this.input&&this.input.val(this.checked)))},updateStates:function(){this.checked?this.check():0==this.checked?this.uncheck():null==this.checked&&
this.indeterminate()},disable:function(){this.disabled=!0;1==this.checked?this.checkMark.addClass(this.toThemeProperty("jqx-checkbox-check-disabled")):null==this.checked&&this.checkMark.addClass(this.toThemeProperty("jqx-checkbox-check-indeterminate-disabled"));this.box.addClass(this.toThemeProperty("jqx-checkbox-disabled-box"));this.host.addClass(this.toThemeProperty("jqx-checkbox-disabled"));this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"));this.box.addClass(this.toThemeProperty("jqx-checkbox-disabled"));
c.jqx.aria(this,"aria-disabled",this.disabled)},enable:function(){1==this.checked?this.checkMark.removeClass(this.toThemeProperty("jqx-checkbox-check-disabled")):null==this.checked&&this.checkMark.removeClass(this.toThemeProperty("jqx-checkbox-check-indeterminate-disabled"));this.box.removeClass(this.toThemeProperty("jqx-checkbox-disabled-box"));this.host.removeClass(this.toThemeProperty("jqx-checkbox-disabled"));this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled"));this.box.removeClass(this.toThemeProperty("jqx-checkbox-disabled"));
this.disabled=!1;c.jqx.aria(this,"aria-disabled",this.disabled)},destroy:function(){this.host.remove()},_raiseEvent:function(b,d){if(!this.init){var e=new c.Event(this.events[b]);e.owner=this;d||(d={});d.type=this.changeType;this.changeType=null;e.args=d;try{var g=this.host.trigger(e)}catch(f){}return g}},propertiesChangedHandler:function(b,d,e){e.width&&e.height&&2==Object.keys(e).length&&b.setSize()},propertyChangedHandler:function(b,d,e,g){if(void 0!=this.isInitialized&&0!=this.isInitialized&&
!(b.batchUpdate&&b.batchUpdate.width&&b.batchUpdate.height&&2==Object.keys(b.batchUpdate).length)){"enableContainerClick"!=d||b.disabled||b.locked||(g?b.host.css("cursor","pointer"):b.host.css("cursor","auto"));"rtl"==d&&(g?(b.box.addClass(b.toThemeProperty("jqx-checkbox-rtl")),b.host.addClass(b.toThemeProperty("jqx-rtl"))):(b.box.removeClass(b.toThemeProperty("jqx-checkbox-rtl")),b.host.removeClass(b.toThemeProperty("jqx-rtl"))));"boxSize"==d&&b.render();"theme"==d&&c.jqx.utilities.setTheme(e,g,
b.host);if("checked"==d&&g!=e)switch(g){case !0:b.check();break;case !1:b.uncheck();break;case null:b.indeterminate()}"disabled"==d&&g!=e&&(g?b.disable():b.enable())}}})})(jqxBaseFramework);
(function(c){c.jqx.jqxWidget("jqxRibbon","",{});c.extend(c.jqx._jqxRibbon.prototype,{defineInstance:function(){var b={width:null,height:"auto",mode:"default",position:"top",selectedIndex:-1,selectionMode:"click",popupCloseMode:"click",animationType:"fade",animationDelay:400,scrollPosition:"both",disabled:!1,rtl:!1,scrollStep:10,scrollDelay:30,reorder:!1,initContent:null,_roundedCorners:!0,_removeByDrag:!1,_suppressReorder:!0,events:["select","unselect","change","_removeByDrag","reorder"]};if(this===
c.jqx._jqxRibbon.prototype)return b;c.extend(!0,this,b);return b},createInstance:function(){if("none"===this.host.css("display")||!1===document.body.contains(this.element))this._initiallyHidden=!0;this._browser=c.jqx.browser;"popup"!==this.mode&&-1===this.selectedIndex&&(this.selectedIndex=0);this._originalHTML=this.element.innerHTML;this._render(!0)},render:function(){this._render()},refresh:function(b){!0!==b&&this._render()},destroy:function(){this._removeHandlers();this.host.remove()},selectAt:function(b){this._selectAt(b)},
clearSelection:function(){-1!==this.selectedIndex&&this._clearSelection()},disableAt:function(b){this._items[b]._disabled=!0;c(this._items[b]).addClass(this.toThemeProperty("jqx-fill-state-disabled"));b===this.selectedIndex&&this._clearSelection()},enableAt:function(b){this._items[b]._disabled=!1;c(this._items[b]).removeClass(this.toThemeProperty("jqx-fill-state-disabled"))},hideAt:function(b){this._items[b].style.display="none";this._checkScrollButtons();b===this.selectedIndex?this._clearSelection():
this._updatePositions()},showAt:function(b){this._items[b].style.display="horizontal"===this._orientation?"inline-block":"inherit";this._checkScrollButtons();this._updatePositions()},val:function(b){if(b)this._selectAt(b);else return this.selectedIndex},addAt:function(b,d){var e="jqx-ribbon-item jqx-ribbon-item-"+this.position,g="jqx-widget-content jqx-ribbon-content-section jqx-ribbon-content-section-"+this.position;this._removeHandlers();var f=document.createElement("li");f.innerHTML=d.title;var h=
document.createElement("div");if("string"===typeof d.content)h.innerHTML=d.content;else if(void 0!==d.content.length)try{if(void 0!==jQuery&&d.content instanceof jQuery)c(h).append(d.content);else if(c.isArray(d.content))for(var l=0;l<d.content.length;l++)d.content[l].appendTo(h);else for(;0<d.content.length;)h.appendChild(d.content[0])}catch(q){}else h.appendChild(d.content);switch(this.position){case "top":e+=" jqx-rc-t";g+=" jqx-rc-b";break;case "bottom":e+=" jqx-rc-b";g+=" jqx-rc-t";break;case "left":e+=
" jqx-rc-l";g+=" jqx-rc-r";break;case "right":e+=" jqx-rc-r",g+=" jqx-rc-l"}"popup"===this.mode&&(g+=" jqx-ribbon-content-section-popup jqx-ribbon-content-section-"+this._orientation+"-popup");!0===this.rtl&&(e+=" jqx-ribbon-item-rtl");f.className=this.toThemeProperty(e);h.className=this.toThemeProperty(g);this._items.length-1>=b?(this._headerElement.insertBefore(f,this._items[b]),this._contentElement.insertBefore(h,this._contentSections[b])):(this._headerElement.appendChild(f),this._contentElement.appendChild(h));
this._updateItems();this._addHandlers();this._checkScrollButtons();b<=this.selectedIndex&&this.selectedIndex<this._items.length-1&&this.selectedIndex++;this._updatePositions();0>this.selectedIndex||(this._suppressSelectionEvents=!0,this._selectAt(this.selectedIndex,this.selectedIndex,!0))},removeAt:function(b){b===this.selectedIndex&&this._clearSelection();c(this._items[b]).remove();c(this._contentSections[b]).remove();this._updateItems(!0);this._updatePositions();this._checkScrollButtons()},updateAt:function(b,
d){var e=this._items[b];e.innerHTML=d.newTitle;this._contentSections[b].innerHTML=d.newContent;e._isInitialized=!1;this.initContent&&b===this.selectedIndex&&(this.initContent(b),e._isInitialized=!0);this._updatePositions()},setPopupLayout:function(b,d,e,c){var f=this._contentSections[b];"popup"===this.mode&&(f.getAttribute("data-width")||(f.style.width&&f.setAttribute("data-width",f.style.width),f.style.height&&f.setAttribute("data-height",f.style.height)),e&&(f.style.width=this._toPx(e)),c&&(f.style.height=
this._toPx(c)),f._layout=d,this._positionContent(b))},propertiesChangedHandler:function(b,d,e){e&&e.width&&e.height&&2===Object.keys(e).length&&(b.element.style.width=b._toPx(b.width),b.element.style.height=b._toPx(b.height),b._updateSize())},propertyChangedHandler:function(b,d,e,g){if(!(b.batchUpdate&&b.batchUpdate.width&&b.batchUpdate.height&&2===Object.keys(b.batchUpdate).length)&&g!==e)switch(d){case "width":case "height":b.element.style[d]=b._toPx(g);b._updateSize();break;case "position":b._render();
break;case "mode":b._contentElement.style.width="auto";b._removeHandlers(null,e);b._render();break;case "selectedIndex":b._selectAt(g,e);break;case "selectionMode":b._removeHandlers(e);b._addHandlers();break;case "scrollPosition":d=b._scrollButtonNear;var f=b._scrollButtonFar;c(d).removeClass(b.toThemeProperty("jqx-ribbon-scrollbutton-"+e+" jqx-rc-tr jqx-rc-bl jqx-rc-tl"));c(f).removeClass(b.toThemeProperty("jqx-ribbon-scrollbutton-"+e+" jqx-rc-tr jqx-rc-bl jqx-rc-br"));d.className+=" "+b.toThemeProperty("jqx-ribbon-scrollbutton-"+
g);f.className+=" "+b.toThemeProperty("jqx-ribbon-scrollbutton-"+g);b._scrollButtonRc(d,f);b._checkScrollButtons();b._updatePositions();break;case "disabled":!0===g?(b._removeHandlers(),b.element.className+=" "+b.toThemeProperty("jqx-fill-state-disabled")):(b.host.removeClass(b.toThemeProperty("jqx-fill-state-disabled")),b._addHandlers());break;case "theme":c.jqx.utilities.setTheme(e,g,b.host);break;case "rtl":if(!0===g)for(b._headerElement.className+=" "+b.toThemeProperty("jqx-ribbon-header-rtl"),
e=0;e<b._items.length;e++)b._items[e].className+=" "+b.toThemeProperty("jqx-ribbon-item-rtl");else for(b._header.removeClass(b.toThemeProperty("jqx-ribbon-header-rtl")),e=0;e<b._items.length;e++)c(b._items[e]).removeClass(b.toThemeProperty("jqx-ribbon-item-rtl"));b._positionSelectionToken(b.selectedIndex)}},_raiseEvent:function(b,d){var e=new c.Event(this.events[b]);e.owner=this;e.args=d;var g;try{g=this.host.trigger(e)}catch(f){}return g},_render:function(b){var d=this;!0!==b&&d._removeHandlers();
d._selectionTokenOffsetY=0;switch(d._browser.browser){case "mozilla":d._browserWidthRtlFlag=0;d._browserScrollRtlFlag=1;d._selectionTokenOffsetX=1;break;case "msie":d._browserWidthRtlFlag=0;d._browserScrollRtlFlag=-1;"8.0"===d._browser.version?d._selectionTokenOffsetX=1:"7.0"===d._browser.version?(d._selectionTokenOffsetX=0,"popup"!==d.mode||"bottom"!==d.position&&"right"!==d.position||(d._selectionTokenOffsetY=2)):d._selectionTokenOffsetX=0;break;default:d._browserWidthRtlFlag=1,d._browserScrollRtlFlag=
1,d._selectionTokenOffsetX=0}if(!0===b){var e=d.host.children();d._headerElement=e[0];d._header=c(e[0]);d._contentElement=e[1];d._content=c(e[1]);d._checkStructure(e)}d._headerElement.style["float"]="none";d._contentElement.style.padding="0px";d.element.style.width=d._toPx(d.width);d.element.style.height=d._toPx(d.height);"bottom"!==d.position&&"right"!==d.position||d.element.insertBefore(d._contentElement,d._headerElement);d._orientation="top"===d.position||"bottom"===d.position?"horizontal":"vertical";
"right"===d.position?d._headerElement.style["float"]="right":"left"===d.position&&(d._headerElement.style["float"]="left");d._contentSections=d._content.children();c.each(d._contentSections,function(){this.getAttribute("data-width")&&(this.style.width=this.getAttribute("data-width"),this.style.height=this.getAttribute("data-height"),this.removeAttribute("data-width"),this.removeAttribute("data-height"))});!0===b&&(d._selectionToken=document.createElement("div"),d._selectionToken.className=d.toThemeProperty("jqx-widget-content jqx-ribbon-selection-token jqx-ribbon-selection-token-"+
d.position),d.element.appendChild(d._selectionToken));d._updateItems();!0!==d._initiallyHidden&&d._addClasses();!0===b&&(d._appendScrollButtons(),d._checkScrollButtons());d._allowSelection=!0;-1!==d.selectedIndex&&(d._items[d.selectedIndex].className+=" "+d.toThemeProperty("jqx-widget-content jqx-ribbon-item-selected"),d._positionSelectionToken(d.selectedIndex),d._contentSections[d.selectedIndex].style.display="block",d.initContent&&(d.initContent(d.selectedIndex),d._items[d.selectedIndex]._isInitialized=
!0));d.disabled?d.element.className+=" "+d.toThemeProperty("jqx-fill-state-disabled"):d._addHandlers();c.jqx.utilities.resize(d.host,function(){d._initiallyHidden&&(d._initiallyHidden=!1,d._addClasses(),-1!==d.selectedIndex&&(d._items[d.selectedIndex].className+=" "+d.toThemeProperty("jqx-widget-content jqx-ribbon-item-selected")));d._updateSize(!0)});"popup"===d.mode&&""!==d.theme&&setTimeout(function(){d._positionPopup();d._positionSelectionToken(d.selectedIndex)},30)},_updateSize:function(b){if("7.0"===
this._browser.version&&"msie"===this._browser.browser)if("horizontal"===this._orientation)this._header.css("width",this.host.width()-parseInt(this._header.css("padding-left"),10)-parseInt(this._header.css("padding-right"),10)-parseInt(this._header.css("border-left-width"),10)-parseInt(this._header.css("border-right-width"),10)),this._contentSections.width(this._content.width()-parseInt(this._contentSections.css("border-left-width"),10)-parseInt(this._contentSections.css("border-right-width"),10)-
parseInt(this._contentSections.css("padding-left"),10)-parseInt(this._contentSections.css("padding-right"),10)),"default"===this.mode&&"string"===typeof this.height&&-1!==this.height.indexOf("%")&&this._contentSections.height(this._content.height()-this._header.height()-parseInt(this._contentSections.css("border-bottom-width"),10)-parseInt(this._contentSections.css("border-top-width"),10)-1);else if(this._header.css("height",this.host.height()-parseInt(this._header.css("padding-top"),10)-parseInt(this._header.css("padding-bottom"),
10)-parseInt(this._header.css("border-top-width"),10)-parseInt(this._header.css("border-bottom-width"),10)),this._contentSections.height(this._content.height()-parseInt(this._contentSections.css("border-top-width"),10)-parseInt(this._contentSections.css("border-bottom-width"),10)-parseInt(this._contentSections.css("padding-top"),10)-parseInt(this._contentSections.css("padding-bottom"),10)),"default"===this.mode&&"string"===typeof this.width&&-1!==this.height.indexOf("%")){var d="left"===this.position?
parseInt(this._contentSections.css("border-left-width"),10)+parseInt(this._contentSections.css("border-right-width"),10)+1:0;this._contentSections.width(this._content.width()-this._header.width()-d)}this._checkScrollButtons(!0);this._updatePositions(void 0,b);"popup"===this.mode&&this._positionPopup()},_stopAnimation:function(){if(!this._allowSelection){this.selectedIndex=this._animatingIndex;var b=c(this._contentSections[this._animatingIndex]);this._initAnimate(b);b.animate("finish");this._clearSelection(!0,
this._animatingIndex);this._allowSelection=!0}},_selectAt:function(b,d,e){var g=this;void 0===d&&(d=g.selectedIndex);if(b!==d||!0===e)if(g._stopAnimation(),g._allowSelection){g._animatingIndex=b;-1!==g.selectedIndex&&g._clearSelection(!0,d);g._allowSelection=!1;g._selecting=b;"click"===g.selectionMode&&c(g._items[b]).removeClass(g.toThemeProperty("jqx-fill-state-hover jqx-ribbon-item-hover"));if("popup"===g.mode&&g._roundedCorners){g._header.removeClass(g.toThemeProperty("jqx-rc-all"));var f,h;switch(g.position){case "top":f=
"jqx-rc-t";h="jqx-rc-b";break;case "bottom":f="jqx-rc-b";h="jqx-rc-t";break;case "left":f="jqx-rc-l";h="jqx-rc-r";break;case "right":f="jqx-rc-r",h="jqx-rc-l"}g._headerElement.className+=" "+g.toThemeProperty(f);for(e=0;e<g._items.length;e++)g._items[e].className+=" "+g.toThemeProperty(f),g._contentSections[e].className+=" "+g.toThemeProperty(h)}g._items[b].className+=" "+g.toThemeProperty("jqx-widget-content jqx-ribbon-item-selected");g._selectionToken.style.display="block";g._updatePositions(b);
switch(g.animationType){case "fade":f=c(g._contentSections[b]);g._initAnimate(f);"none"===f.css("display")?f.fadeIn({duration:g.animationDelay,complete:function(){g._animationComplete(b,d)}}):f.fadeOut({duration:g.animationDelay,complete:function(){g._animationComplete(b,d)}});break;case "slide":f=c(g._contentSections[b]);h=g.position;"top"===h?h="up":"bottom"===h&&(h="down");g.slideAnimation=g._slide(f,{mode:"show",direction:h,duration:g.animationDelay},b,d);break;case "none":g._contentSections[b].style.display=
"block",g._animationComplete(b,d)}}},_clearSelection:function(b,d){var e=this;"popup"===e.mode&&e._roundedCorners&&(e._headerElement.className+=" "+e.toThemeProperty("jqx-rc-all"));e._selecting=-1;void 0===d&&(d=e.selectedIndex);c(e._items[d]).removeClass(e.toThemeProperty("jqx-widget-content jqx-ribbon-item-selected"));e._selectionToken.style.display="none";if(!0!==b&&"none"!==e.animationType){var g=c(e._contentSections[d]);if("fade"===e.animationType)e._initAnimate(g),g.fadeOut({duration:e.animationDelay,
complete:function(){e._clearSelectionComplete(d)}});else if("slide"===e.animationType){var f=e.position;"top"===f?f="up":"bottom"===f&&(f="down");e._stopAnimation();d=e.selectedIndex;e.slideAnimation=e._slide(g,{mode:"hide",direction:f,duration:e.animationDelay},d);e.selectedIndex=-1}}else-1!==d&&(e._contentSections[d].style.display="none",e._clearSelectionComplete(d,b))},_addHandlers:function(){function b(b){b=r._closest(b.target,"li");var d=b._index;r._items[d]._disabled||(d!==r.selectedIndex?r._selectAt(d):
"popup"===r.mode&&"none"!==r.popupCloseMode&&(b.className+=" "+r.toThemeProperty("jqx-fill-state-hover jqx-ribbon-item-hover"),r._clearSelection()))}function d(b){if(!0===r.reorder&&!0===w){var d=r._closest(b.target,"li")._index;b=r._items[z].innerHTML;for(var e=r._contentSections[z].childNodes,g=[];0<e.length;)g.push(c(e[0]).detach());r._suppressSelectionEvents=!0;r._oldReorderIndex=z;r.removeAt(z);r.clearSelection();r.addAt(d,{title:b,content:g});r.selectAt(d);setTimeout(function(){c(r._items[d]).trigger("mousedown")},
0)}else b=r._closest(b.target,"li"),v(b._index)&&(b.className+=" "+r.toThemeProperty("jqx-fill-state-hover jqx-ribbon-item-hover"))}function e(b){b=r._closest(b.target,"li");v(b._index)&&c(b).removeClass(r.toThemeProperty("jqx-fill-state-hover jqx-ribbon-item-hover"))}function g(b){"#document"!==b.target.nodeName&&(b=r._closest(b.target,"li"),!0!==r.reorder&&!0!==r._removeByDrag||b._index!==r.selectedIndex||(w=!0,z=b._index,b.style.cursor="move"))}function f(){"mouseLeave"===r.popupCloseMode&&"popup"===
r.mode&&r._clearSelection()}function h(b){b=r._closest(b.target,"li")._index;r._items[b]._disabled||b===r.selectedIndex||r._selectAt(b)}function l(b){b=r._closest(b.target,"li")._index;r._items[b]._disabled||"popup"===r.mode&&"none"!==r.popupCloseMode&&r._clearSelection()}function q(){"mouseLeave"===r.popupCloseMode&&"popup"===r.mode&&r._clearSelection()}var r=this,t=r.element.id,w=!1,z,B=function(b){if("click"===r.popupCloseMode&&"popup"===r.mode&&-1!==r.selectedIndex&&"svg"!==b.target.tagName){var d=
r._closest(b.target,void 0,"jqx-ribbon");if(void 0!==d&&d.getAttribute("id")!==t)r._clearSelection();else if(void 0===b.target.className||-1!==b.target.className.indexOf("jqx-ribbon-content-popup"))r._clearSelection();else if(!c(b.target).ischildof(r.host)){var e=!1,g=[],f=function(b){b.parentElement&&(g.push(b.parentElement),f(b.parentElement))};f(b.target);c.each(g,function(){if(void 0!==this.className&&this.className.indexOf){if(-1!==this.className.indexOf("jqx-ribbon"))return e=!0,!1;if(-1!==
this.className.indexOf("jqx-ribbon"))return t===this.id&&(e=!0),!1}});e||r._clearSelection()}}};if("click"===r.selectionMode){for(var v=function(b){return(r._selecting!==b&&!1===r._allowSelection||(-1===r._selecting||r.selectedIndex!==b)&&!0===r._allowSelection)&&!r._items[b]._disabled},y=0;y<r._items.length;y++){var C=r._items[y];r.addHandler(C,"click.ribbon"+t,b);r.addHandler(C,"mouseenter.ribbon"+t,d);r.addHandler(C,"mouseleave.ribbon"+t,e);r.addHandler(C,"mousedown.ribbon"+t,g)}if("popup"===r.mode){r.addHandler(r.host,
"mouseleave.ribbon"+t,function(){"mouseLeave"===r.popupCloseMode&&"popup"===r.mode&&r._clearSelection()});for(y=0;y<r._contentSections.length;y++)r.addHandler(r._contentSections[y],"mouseleave.ribbon"+t,f);r.addHandler(c(document),"mousedown.ribbon"+t,function(b){B(b)})}if(!0===r._removeByDrag)for(y=0;y<r._items.length;y++)r._items[y].className+=" "+r.toThemeProperty("jqx-ribbon-item-docking-layout");r.addHandler(document,"mouseup.ribbon"+t,function(){w=!1;for(var b=0;b<r._items.length;b++)r._items[b].style.cursor=
""});r.addHandler(r._header,"mouseleave.ribbon"+t,function(b){!0===r._removeByDrag&&!0===w&&(r._raiseEvent("3",{draggedIndex:z,x:b.pageX,y:b.pageY}),1<r._items.length&&r.removeAt(z),w=!1,b.target.style.cursor="")})}else if("hover"===r.selectionMode){for(y=0;y<r._items.length;y++)C=r._items[y],r.addHandler(C,"mouseenter.ribbon"+t,h),"popup"===r.mode&&r.addHandler(C,"click.ribbon"+t,l);if("popup"===r.mode){r.addHandler(r.host,"mouseleave.ribbon"+t,function(){"mouseLeave"===r.popupCloseMode&&"popup"===
r.mode&&r._clearSelection()});for(y=0;y<r._contentSections.length;y++)r.addHandler(r._contentSections,"mouseleave.ribbon"+t,q);r.addHandler(c(document),"mousedown.ribbon"+t,function(b){B(b)})}}c.jqx.mobile.isTouchDevice()?(y="touchstart",C="touchend"):(y="mousedown",C="mouseup");r.addHandler(r._scrollButtonNear,y+".ribbon"+t,function(){r._timeoutNear="horizontal"===r._orientation?setInterval(function(){r._headerElement.scrollLeft-=r.scrollStep*(r.rtl&&"msie"===r._browser.browser?-1:1);r._updatePositions()},
r.scrollDelay):setInterval(function(){r._headerElement.scrollTop-=r.scrollStep;r._updatePositions()},r.scrollDelay);return!1});r.addHandler(r._scrollButtonFar,y+".ribbon"+t,function(){r._timeoutFar="horizontal"===r._orientation?setInterval(function(){r._headerElement.scrollLeft+=r.scrollStep*(r.rtl&&"msie"===r._browser.browser?-1:1);r._updatePositions()},r.scrollDelay):setInterval(function(){r._headerElement.scrollTop+=r.scrollStep;r._updatePositions()},r.scrollDelay);return!1});r.addHandler(c(document),
C+".ribbon"+t,function(){clearInterval(r._timeoutNear);clearInterval(r._timeoutFar)})},_removeHandlers:function(b,d){var e=this.element.id;b||(b=this.selectionMode);d||(d=this.mode);for(var g=0;g<this._items.length;g++){var f=this._items[g];this.removeHandler(f,"mouseenter.ribbon"+e);"click"===b&&(this.removeHandler(f,"click.ribbon"+e),this.removeHandler(f,"mouseleave.ribbon"+e),this.removeHandler(f,"mousedown.ribbon"+e))}"click"===b?(this.removeHandler(document,"mouseup.ribbon"+e),this.removeHandler(this._header,
"mouseleave.ribbon"+e)):"hover"===b&&"popup"===d&&this.removeHandler(this.host,"mouseleave.ribbon"+e);c.jqx.mobile.isTouchDevice()?(g="touchstart",f="touchend"):(g="mousedown",f="mouseup");this.removeHandler(this._scrollButtonNear,g+".ribbon"+e);this.removeHandler(this._scrollButtonFar,g+".ribbon"+e);this.removeHandler(c(document),f+".ribbon"+e)},_checkStructure:function(b){if(2!==b.length)throw Error("jqxRibbon: Invalid HTML structure. You need to add a ul and a div to the widget container.");b=
this._header.children().length;var d=this._content.children().length;if(b!==d)throw Error("jqxRibbon: Invalid HTML structure. For each list item you must have a corresponding div element.");},_addClasses:function(){var b="jqx-widget-content jqx-ribbon-content-section jqx-ribbon-content-section-"+this.position,d="jqx-widget-content jqx-ribbon-content jqx-ribbon-content-"+this._orientation,e="jqx-widget-header jqx-disableselect jqx-ribbon-header jqx-ribbon-header-"+this._orientation,g="jqx-ribbon-item jqx-ribbon-item-"+
this.position;this._content.removeClass();this._header.removeClass(this.toThemeProperty("jqx-rc-all jqx-widget-header jqx-disableselect jqx-rc-t jqx-rc-b jqx-rc-l jqx-rc-r jqx-rc-all jqx-ribbon-header-"+this._orientation+"-popup jqx-ribbon-header-bottom jqx-ribbon-header-auto jqx-ribbon-header-right jqx-ribbon-header-rtl"));this.host.removeClass();if(this._roundedCorners)switch(this.position){case "top":e+=" jqx-rc-t";g+=" jqx-rc-t";b+=" jqx-rc-b";break;case "bottom":e+=" jqx-rc-b";g+=" jqx-rc-b";
b+=" jqx-rc-t";break;case "left":e+=" jqx-rc-l";g+=" jqx-rc-l";b+=" jqx-rc-r";break;case "right":e+=" jqx-rc-r",g+=" jqx-rc-r",b+=" jqx-rc-l"}else switch(this.position){case "top":g+=" jqx-rc-t";break;case "bottom":g+=" jqx-rc-b";break;case "left":g+=" jqx-rc-l";break;case "right":g+=" jqx-rc-r"}!0===this.rtl&&(e+=" jqx-ribbon-header-rtl",g+=" jqx-ribbon-item-rtl");this.element.className+=" "+this.toThemeProperty("jqx-widget jqx-ribbon");this._headerElement.className+=" "+this.toThemeProperty(e);
this._contentElement.className+=" "+this.toThemeProperty(d);for(d=0;d<this._items.length;d++){var e=c(this._contentSections[d]),f=c(this._items[d]);e.removeClass();f.removeClass(this.toThemeProperty("jqx-fill-state-disabled jqx-ribbon-item-rtl jqx-widget-content jqx-ribbon-item-selected jqx-rc-t jqx-rc-b jqx-rc-l jqx-rc-r jqx-ribbon-item-docking-layout jqx-ribbon-item jqx-ribbon-item-"+this.position));"popup"===this.mode&&(b+=" jqx-ribbon-content-section-popup jqx-ribbon-content-popup-"+this.position+
" jqx-ribbon-content-section-"+this._orientation+"-popup");this._contentSections[d].className+=" "+this.toThemeProperty(b);this._items[d].className+=" "+this.toThemeProperty(g)}var h,l;"popup"===this.mode?(-1===this.selectedIndex&&this._roundedCorners&&(this.element.className+=" "+this.toThemeProperty("jqx-rc-all"),this._headerElement.className+=" "+this.toThemeProperty("jqx-rc-all")),this.element.className+=" "+this.toThemeProperty("jqx-ribbon-popup"),this._headerElement.className+=" "+this.toThemeProperty("jqx-ribbon-header-"+
this._orientation+"-popup"),this._contentElement.className+=" "+this.toThemeProperty("jqx-ribbon-content-popup"),this._positionPopup()):"horizontal"===this._orientation?"auto"!==this.height?(l=this._headerElement.offsetHeight,"top"===this.position?this._contentElement.style.paddingTop=this._toPx(l):this._headerElement.className+=" "+this.toThemeProperty("jqx-ribbon-header-bottom")):this._headerElement.className+=" "+this.toThemeProperty("jqx-ribbon-header-auto"):"vertical"===this._orientation&&("auto"!==
this.width?(h=this._headerElement.offsetWidth,"left"===this.position?this._contentElement.style.paddingLeft=this._toPx(h):(this._headerElement.className+=" "+this.toThemeProperty("jqx-ribbon-header-right"),this._contentElement.style.paddingRight=this._toPx(h))):(this.element.className+=" "+this.toThemeProperty("jqx-ribbon-auto"),this._headerElement.className+=" "+this.toThemeProperty("jqx-ribbon-header-auto"),this._contentElement.className+=" "+this.toThemeProperty("jqx-ribbon-content-auto-width")));
c(this._headerElement).addClass(this.toThemeProperty("jqx-ribbon-header-"+this.position));"7.0"===this._browser.version&&"msie"===this._browser.browser&&("horizontal"===this._orientation?(this._header.css("width",this.host.width()-parseInt(this._header.css("padding-left"),10)-parseInt(this._header.css("padding-right"),10)-parseInt(this._header.css("border-left-width"),10)-parseInt(this._header.css("border-right-width"),10)),this._items.height(this._items.height()-parseInt(this._items.css("padding-top"),
10)-parseInt(this._items.css("padding-bottom"),10)-parseInt(this._items.css("border-top-width"),10)-parseInt(this._items.css("border-bottom-width"),10)),this._contentSections.width(this._contentSections.width()-parseInt(this._contentSections.css("border-left-width"),10)-parseInt(this._contentSections.css("border-right-width"),10)-parseInt(this._contentSections.css("padding-left"),10)-parseInt(this._contentSections.css("padding-right"),10)),"default"===this.mode&&"auto"!==this.height&&("top"===this.position?
this._contentSections.css("padding-top",l):this._contentSections.css("padding-bottom",l),this._content.css("height",this.host.height()+2),this._contentSections.css("height",this._content.height()-parseInt(this._contentSections.css("border-bottom-width"),10)-parseInt(this._contentSections.css("border-top-width"),10)-1))):("left"===this.position?(this._contentElement.className+=" "+this.toThemeProperty("jqx-ribbon-content-left"),b=parseInt(this._contentSections.css("border-left-width"),10)+parseInt(this._contentSections.css("border-right-width"),
10)+1):(this._contentElement.className+=" "+this.toThemeProperty("jqx-ribbon-content-right"),b=0),this._header.css("height",this.host.height()-parseInt(this._header.css("padding-top"),10)-parseInt(this._header.css("padding-bottom"),10)-parseInt(this._header.css("border-top-width"),10)-parseInt(this._header.css("border-bottom-width"),10)),this._items.width(this._items.width()-parseInt(this._items.css("padding-left"),10)-parseInt(this._items.css("padding-right"),10)-parseInt(this._items.css("border-left-width"),
10)-parseInt(this._items.css("border-right-width"),10)),this._contentSections.height(this._contentSections.height()-parseInt(this._contentSections.css("border-top-width"),10)-parseInt(this._contentSections.css("border-bottom-width"),10)-parseInt(this._contentSections.css("padding-top"),10)-parseInt(this._contentSections.css("padding-bottom"),10)),"default"===this.mode&&"auto"!==this.width&&("left"===this.position?this._contentSections.css("padding-left",h):this._contentSections.css("padding-right",
h),this._contentSections.width(this._content.width()-this._header.width()-b))));"bottom"===this.position&&this._content.css("padding-bottom",l)},_positionPopup:function(){var b="7.0"===this._browser.version&&"msie"===this._browser.browser;switch(this.position){case "top":this._contentElement.style.top=this._toPx(this._headerElement.offsetHeight);break;case "bottom":this._contentElement.style.bottom=b?this._toPx(this._height(this._headerElement)):this._toPx(this._headerElement.offsetHeight);break;
case "left":this._contentElement.style.left=this._toPx(this._headerElement.offsetWidth);break;case "right":this._contentElement.style.right=this._header.outerWidth()+"px"}},_appendScrollButtons:function(){function b(b,e,c){b.className=d.toThemeProperty("jqx-ribbon-scrollbutton jqx-ribbon-scrollbutton-"+d.position+" jqx-ribbon-scrollbutton-"+d.scrollPosition+" jqx-widget-header "+e);b.innerHTML='<div class="'+d.toThemeProperty("jqx-ribbon-scrollbutton-inner "+c)+'"></div>';"horizontal"===d._orientation?
b.style.height=d._toPx(d._height(d._headerElement)):b.style.width=d._toPx(d._width(d._headerElement));d.element.appendChild(b)}var d=this,e="horizontal"===d._orientation?["left","right"]:["up","down"],c=document.createElement("div");b(c,"jqx-ribbon-scrollbutton-lt","jqx-icon-arrow-"+e[0]);var f=document.createElement("div");b(f,"jqx-ribbon-scrollbutton-rb","jqx-icon-arrow-"+e[1]);d._scrollButtonRc(c,f);d._scrollButtonNear=c;d._scrollButtonFar=f;if(d.roundedCorners)switch(d.position){case "top":case "bottom":c.style.marginLeft=
"-1px";f.style.marginRight="-1px";break;case "right":case "left":c.style.marginTop="-1px",f.style.marginBottom="-1px"}},_scrollButtonRc:function(b,d){if(this.roundedCorners)switch(this.position){case "top":"far"!==this.scrollPosition&&(b.className+=" "+this.toThemeProperty("jqx-rc-tl"));"near"!==this.scrollPosition&&(d.className+=" "+this.toThemeProperty("jqx-rc-tr"));break;case "bottom":"far"!==this.scrollPosition&&(b.className+=" "+this.toThemeProperty("jqx-rc-bl"));"near"!==this.scrollPosition&&
(d.className+=" "+this.toThemeProperty("jqx-rc-br"));break;case "left":"far"!==this.scrollPosition&&(b.className+=" "+this.toThemeProperty("jqx-rc-tl"));"near"!==this.scrollPosition&&(d.className+=" "+this.toThemeProperty("jqx-rc-bl"));break;case "right":"far"!==this.scrollPosition&&(b.className+=" "+this.toThemeProperty("jqx-rc-tr")),"near"!==this.scrollPosition&&(d.className+=" "+this.toThemeProperty("jqx-rc-br"))}},_updateItems:function(b){function d(){e._items[c]._index===e.selectedIndex&&(e.selectedIndex=
c)}var e=this;e._items=e._header.children();e._contentSections=e._content.children();for(var c=0;c<e._items.length;c++){var f=e._items[c];f.setAttribute("unselectable","on");void 0===f._index&&(f._disabled=!1,f._isInitialized=!1,e._contentSections[c]._layout="default");!0===b&&d();f._index=c;!0!==b&&d();e._contentSections[c]&&(e._contentSections[c]._index=c)}},_positionContent:function(b){var d=this,e=d._contentSections[b],g,f,h,l,q;"horizontal"===d._orientation?(g=d.element.offsetWidth,f=d.host.offset().left,
h=d._items[b].offsetWidth,b=c(d._items[b]).offset().left,l=e.offsetWidth||parseInt(e.style.width,10),q="left"):(g=d.element.offsetHeight,f=d.host.offset().top,h=d._items[b].offsetHeight,b=c(d._items[b]).offset().top,l=e.offsetHeight||parseInt(e.style.height,10),q="top");var r=function(b){0>b?b=0:b+l>g&&(b=g-l);e.style[q]=d._toPx(b)};switch(e._layout){case "near":r(b-f);break;case "far":r(b-f-(l-h));break;case "center":r(b-f-(l-h)/2);break;default:if("right"===d.position)for(f=0;f<d._contentSections.length;f++)d._contentSections[f].style.right=
"1px";else e.style[q]=""}},_checkScrollButtons:function(b){var d=this,e=0;c.each(d._items,function(){var b=c(this);"none"!==b.css("display")&&(e+="horizontal"===d._orientation?b.outerWidth(!0):b.outerHeight(!0))});var g="horizontal"===d._orientation?["margin-left","margin-right"]:["margin-top","margin-bottom"],f="horizontal"===d._orientation?d._width(d._headerElement):d._height(d._headerElement);d._itemMargins||(d._itemMargins=[],d._itemMargins.push(c(d._items[0]).css(g[0])),d._itemMargins.push(c(d._items[d._items.length-
1]).css(g[1])));if(e>f){d._scrollButtonNear.style.display="block";d._scrollButtonFar.style.display="block";var f=d.rtl?d._itemMargins[0]:17,h=d.rtl?d._itemMargins[0]:17;switch(d.scrollPosition){case "near":h=0;f=34;break;case "far":h=34,f=17}d._items[0]&&(d._items[0].style[g[0]]=d._toPx(f));d._items[d._items.length-1]&&(d._items[d._items.length-1].style[g[1]]=d._toPx(h))}else d._items[0]&&(d._items[0].style[g[0]]=d._toPx(d._itemMargins[0])),d._items[d._items.length-1]&&(d._items[d._items.length-1].style[g[1]]=
d._toPx(d._itemMargins[1])),d._scrollButtonNear.style.display="none",d._scrollButtonFar.style.display="none";!0===b&&("horizontal"===d._orientation?(b=d._toPx(d._height(d._headerElement)),d._scrollButtonNear.style.height=b,d._scrollButtonFar.style.height=b):(b=d._toPx(d._width(d._headerElement)),d._scrollButtonNear.style.width=b,d._scrollButtonFar.style.width=b))},_positionSelectionToken:function(b){if(-1!==b){var d=c(this._items[b]);if(0!==d.length){var e,g;"horizontal"===this._orientation?(!0===
this.rtl?(b=1===this._browserWidthRtlFlag?this._headerElement.scrollWidth-this._headerElement.clientWidth:0,g=this._browserScrollRtlFlag):(b=0,g=1),g=d[0].offsetLeft+b-this._headerElement.scrollLeft*g-this._selectionTokenOffsetX+2,e=this._headerElement.offsetHeight-1,d=this._width(d[0])+parseInt(d.css("padding-left"),10)+parseInt(d.css("padding-right"),10),"top"===this.position?(b=e-this._selectionTokenOffsetY,e=""):(b="",e-=this._selectionTokenOffsetY),this._selectionToken.style.top=this._toPx(b),
this._selectionToken.style.bottom=this._toPx(e),this._selectionToken.style.left=this._toPx(g),this._selectionToken.style.width=this._toPx(d)):(b=d[0].offsetTop-this._headerElement.scrollTop-this._selectionTokenOffsetX+2,e=this._headerElement.offsetWidth-1,d=this._height(d[0])+parseInt(d.css("padding-top"),10)+parseInt(d.css("padding-bottom"),10),"left"===this.position?(g=e-this._selectionTokenOffsetY,e=""):(g="",e-=this._selectionTokenOffsetY),this._selectionToken.style.top=this._toPx(b),this._selectionToken.style.left=
this._toPx(g),this._selectionToken.style.right=this._toPx(e),this._selectionToken.style.height=this._toPx(d))}}},_updatePositions:function(b,d){isNaN(b)&&(b=!0===d&&null!==this._selecting&&0<=this._selecting?this._selecting:this.selectedIndex);-1!==b&&(this._positionSelectionToken(b),"popup"===this.mode&&"default"!==this._contentSections[b]._layout&&this._positionContent(b),"popup"!==this.mode||"left"!==this.position&&"right"!==this.position||(this._contentElement.style.width="auto",this._contentSections[b].style.width&&
0<=this._contentSections[b].style.width.indexOf("%")?this._contentElement.style.width=this._toPx(this._width(this._contentSections[b])-this._width(this._headerElement)):this._contentElement.style.width=this._toPx(this._width(this._contentSections[b]))))},_animationComplete:function(b,d){var e=-1!==d?d:null;this._contentElement.style.pointerEvents="auto";this.selectedIndex=b;!0!==this._suppressSelectionEvents?(this._raiseEvent("0",{selectedIndex:b}),this._raiseEvent("2",{unselectedIndex:e,selectedIndex:b})):
(!0!==this._suppressReorder&&void 0!==this._oldReorderIndex&&b!==this._oldReorderIndex&&this._raiseEvent("4",{newIndex:b,oldIndex:this._oldReorderIndex}),this._suppressReorder=this._suppressSelectionEvents=!1);this.initContent&&!1===this._items[b]._isInitialized&&(this.initContent(b),this._items[b]._isInitialized=!0);this._allowSelection=!0;this._selecting=null},_clearSelectionComplete:function(b,d){this._selecting=null;void 0===b&&(b=this.selectedIndex);-1!==b&&(this._contentElement.style.pointerEvents=
"none",!0!==this._suppressSelectionEvents&&this._raiseEvent("1",{unselectedIndex:b}));!0!==d&&(this.selectedIndex=-1)},_slide:function(b,d,e,g){var f=this;f.activeAnimations||(f.activeAnimations=[]);if(0<f.activeAnimations.length)for(var h=0;h<f.activeAnimations.length;h++)f.activeAnimations[h].clearQueue(),f.activeAnimations[h].finish();else b.clearQueue(),b.animate("finish");var l={save:function(b,d){for(var e=0;e<d.length;e++)null!==d[e]&&0<b.length&&b.data("ui-effects-"+d[e],b[0].style[d[e]])},
restore:function(b,d){var e,c;for(c=0;c<d.length;c++)null!==d[c]&&(e=b.data("ui-effects-"+d[c]),void 0===e&&(e=""),b.css(d[c],e))},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var d={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},e=c("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),g={width:b.width(),height:b.height()},f=document.activeElement;try{f.id}catch(h){f=
document.body}b.wrap(e);(b[0]===f||c.contains(b[0],f))&&c(f).focus();e=b.parent();"static"===b.css("position")?(e.css({position:"relative"}),b.css({position:"relative"})):(c.extend(d,{position:b.css("position"),zIndex:b.css("z-index")}),c.each(["top","left","bottom","right"],function(e,c){d[c]=b.css(c);isNaN(parseInt(d[c],10))&&(d[c]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));b.css(g);return e.css(d).show()},removeWrapper:function(b){var d=document.activeElement;
b.parent().is(".ui-effects-wrapper")&&(b.parent().replaceWith(b),(b[0]===d||c.contains(b[0],d))&&c(d).focus());return b}},q="position top bottom left right width height".split(" "),r=d.mode,h="show"===r,t=d.direction||"left",w="up"===t||"down"===t?"top":"left",t="up"===t||"left"===t,z,B={};l.save(b,q);b.show();z=d.distance||b["top"===w?"outerHeight":"outerWidth"](!0);l.createWrapper(b).css({overflow:"hidden"});h&&b.css(w,t?isNaN(z)?"-"+z:-z:z);B[w]=(h?t?"+=":"-=":t?"-=":"+=")+z;f.activeAnimations.push(b);
b.animate(B,{duration:d.duration,easing:d.easing,complete:function(){f.activeAnimations.pop(b);"show"===r?f._animationComplete(e,g):"hide"===r&&(b.hide(),f._clearSelectionComplete(e));l.restore(b,q);l.removeWrapper(b)}});return function(){b.clearQueue();b.stop(!0,!0)}},_toPx:function(b){return"number"===typeof b?b+"px":b},_width:function(b){var d=c(b),e=d.css("border-left-width"),g=d.css("border-right-width"),f=parseInt(d.css("padding-left"),10),h=parseInt(d.css("padding-right"),10);if(d="none"===
d.css("display")?!0:!1)b.style.display="block";e=-1===e.indexOf("px")?1:parseInt(e,10);g=-1===g.indexOf("px")?1:parseInt(g,10);e=b.offsetWidth-(e+g+f+h);d&&(b.style.display="none");return Math.max(0,e)},_height:function(b){var d=c(b),e=d.css("border-top-width"),g=d.css("border-bottom-width"),f=parseInt(d.css("padding-top"),10),d=parseInt(d.css("padding-bottom"),10),e=-1===e.indexOf("px")?1:parseInt(e,10),g=-1===g.indexOf("px")?1:parseInt(g,10);return Math.max(0,b.offsetHeight-(e+g+f+d))},_closest:function(b,
d,e){if(d){if(b.nodeName.toLowerCase()===d)return b;for(var c=b.parentNode;null!==c&&"#document"!==c.nodeName;){if(c.nodeName.toLowerCase()===d)return c;c=c.parentNode}}if(e){if(-1<(" "+b.className+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" "))return b;for(b=b.parentNode;null!==b&&"#document"!==b.nodeName;){if(-1<(" "+b.className+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" "))return b;b=b.parentNode}}},_initAnimate:function(b){b.initAnimate&&!b.animate&&b.initAnimate()}})})(jqxBaseFramework);
(function(c){c.jqx.jqxWidget("jqxRadioButton","",{});c.extend(c.jqx._jqxRadioButton.prototype,{defineInstance:function(){var b={animationShowDelay:300,animationHideDelay:300,width:null,height:null,boxSize:"15px",checked:!1,hasThreeStates:!1,disabled:!1,enableContainerClick:!0,locked:!1,groupName:"",rtl:!1,changeType:null,aria:{"aria-checked":{name:"checked",type:"boolean"},"aria-disabled":{name:"disabled",type:"boolean"}},events:["checked","unchecked","indeterminate","change"]};if(this===c.jqx._jqxRadioButton.prototype)return b;
c.extend(!0,this,b);return b},createInstance:function(b){this._createFromInput("RadioButton");this.render()},_createFromInput:function(b){if("input"==this.element.nodeName.toLowerCase()){this.field=this.element;this.field.className&&(this._className=this.field.className);var d={title:this.field.title};this.field.value&&(d.value=this.field.value);this.field.checked&&(d.checked=!0);d.id=this.field.id.length?this.field.id.replace(/[^\w]/g,"_")+"_"+b:c.jqx.utilities.createId()+"_"+b;var e=this.element.nextSibling,
g=!1;!e||"#text"!=e.nodeName&&"span"!=e.nodeName||(g=!0);var f=0;b=c("<div></div>",d);g&&(b.append(e),e=c("<span>"+c(e).text()+"</span>"),e.appendTo(c(document.body)),f+=e.width(),e.remove());b[0].style.cssText=this.field.style.cssText;this.width||(this.width=c(this.field).width()+f+10);this.height||(this.height=c(this.field).outerHeight()+10);c(this.field).hide().after(b);f=this.host.data();this.host=b;this.host.data(f);this.element=b[0];this.element.id=this.field.id;this.field.id=d.id;this._className&&
(this.host.addClass(this._className),c(this.field).removeClass(this._className));this.field.tabIndex&&(d=this.field.tabIndex,this.field.tabIndex=-1,this.element.tabIndex=d)}},render:function(){this.setSize();var b=this;this.propertyChangeMap.width=function(d,e,c,g){b.setSize()};this.propertyChangeMap.height=function(d,e,c,g){b.setSize()};this.radiobutton&&this.radiobutton.remove();this.width||this.host.css("overflow-x","visible");this.height||this.host.css("overflow-y","visible");null==this.boxSize&&
(this.boxSize=15);var d=parseInt(this.boxSize)+"px",e=Math.floor((parseInt(this.boxSize)-15)/2),g=e,e=e+"px",g=g+"px",f=parseInt(this.boxSize)/2+"px";this.radiobutton="15px"!=this.boxSize?c('<div><div style="width: '+d+"; height: "+d+';"><span style="position: relative; left: '+e+"; top: "+g+'; width: 15px; height: 15px;"></span></div></div>'):c('<div><div style="width: '+d+"; height: "+d+';"><span style="width: '+f+"; height: "+f+';"></span></div></div>');this.host.attr("role","radio");this.host.prepend(this.radiobutton);
this.disabledContainer||(this.host.attr("tabIndex")||this.host.attr("tabIndex",0),this.clear=c('<div style="clear: both;"></div>'),this.host.append(this.clear));this.checkMark=c(this.radiobutton[0].firstChild.firstChild);this.box=this.radiobutton;this._supportsRC=!0;c.jqx.browser.msie&&9>c.jqx.browser.version&&(this._supportsRC=!1);this.box.addClass(this.toThemeProperty("jqx-fill-state-normal"));this.box.addClass(this.toThemeProperty("jqx-radiobutton-default"));this.host.addClass(this.toThemeProperty("jqx-widget"));
this.disabled&&this.disable();this.host.addClass(this.toThemeProperty("jqx-radiobutton"));this.locked&&this.host.css("cursor","auto");d=this.element.getAttribute("checked");if("checked"==d||"true"==d||1==d)this.checked=!0;this._addInput();this._render();this._addHandlers();c.jqx.aria(this);this._centerBox()},_centerBox:function(){if(this.height&&-1==this.height.toString().indexOf("%")&&this.box){var b=parseInt(this.height);this.host.css("line-height",b+"px");b=b-parseInt(this.boxSize)-1;this.box.css("margin-top",
parseInt(b/2))}},_addInput:function(){var b=this.host.attr("name");this.input=c("<input type='hidden'/>");this.host.append(this.input);b&&this.input.attr("name",b)},refresh:function(b){b||(this.setSize(),this._render())},resize:function(b,d){this.width=b;this.height=d;this.setSize()},setSize:function(){null!=this.width&&-1!=this.width.toString().indexOf("px")?this.host.width(this.width):void 0==this.width||isNaN(this.width)?null!=this.width&&-1!=this.width.toString().indexOf("%")&&(this.element.style.width=
this.width):this.host.width(this.width);null!=this.height&&-1!=this.height.toString().indexOf("px")?this.host.height(this.height):void 0==this.height||isNaN(this.height)?null!=this.height&&-1!=this.height.toString().indexOf("%")&&(this.element.style.height=this.height):this.host.height(this.height);this._centerBox()},_addHandlers:function(){var b=this;this.addHandler(this.box,"click",function(d){if(!b.disabled&&!b.enableContainerClick)return b.changeType="mouse",b.toggle("click"),d.preventDefault(),
!1});this.addHandler(this.host,"keydown",function(d){if(!b.disabled&&!b.locked&&32==d.keyCode)return b.changeType="keyboard",b.toggle("click"),d.preventDefault(),!1});this.addHandler(this.host,"click",function(d){if(!b.disabled&&b.enableContainerClick)return b.changeType="mouse",b.toggle("click"),d.preventDefault(),!1});this.addHandler(this.host,"selectstart",function(d){!b.disabled&&b.enableContainerClick&&d.preventDefault()});this.addHandler(this.host,"mouseup",function(d){!b.disabled&&b.enableContainerClick&&
d.preventDefault()});this.addHandler(this.host,"focus",function(d){if(!b.disabled&&b.enableContainerClick&&!b.locked)return b.box.addClass(b.toThemeProperty("jqx-radiobutton-hover")),b.box.addClass(b.toThemeProperty("jqx-fill-state-focus")),d.preventDefault(),!1});this.addHandler(this.host,"blur",function(d){if(!b.disabled&&b.enableContainerClick&&!b.locked)return b.box.removeClass(b.toThemeProperty("jqx-radiobutton-hover")),b.box.removeClass(b.toThemeProperty("jqx-fill-state-focus")),d.preventDefault(),
!1});this.addHandler(this.host,"mouseenter",function(d){if(!b.disabled&&b.enableContainerClick&&!b.locked)return b.box.addClass(b.toThemeProperty("jqx-radiobutton-hover")),b.box.addClass(b.toThemeProperty("jqx-fill-state-hover")),d.preventDefault(),!1});this.addHandler(this.host,"mouseleave",function(d){if(!b.disabled&&b.enableContainerClick&&!b.locked)return b.box.removeClass(b.toThemeProperty("jqx-radiobutton-hover")),b.box.removeClass(b.toThemeProperty("jqx-fill-state-hover")),d.preventDefault(),
!1});this.addHandler(this.box,"mouseenter",function(){b.disabled||b.enableContainerClick||(b.box.addClass(b.toThemeProperty("jqx-radiobutton-hover")),b.box.addClass(b.toThemeProperty("jqx-fill-state-hover")))});this.addHandler(this.box,"mouseleave",function(){b.disabled||b.enableContainerClick||(b.box.removeClass(b.toThemeProperty("jqx-radiobutton-hover")),b.box.removeClass(b.toThemeProperty("jqx-fill-state-hover")))})},focus:function(){try{this.host.focus()}catch(b){}},_removeHandlers:function(){this.removeHandler(this.box,
"click");this.removeHandler(this.box,"mouseenter");this.removeHandler(this.box,"mouseleave");this.removeHandler(this.host,"click");this.removeHandler(this.host,"mouseup");this.removeHandler(this.host,"mousedown");this.removeHandler(this.host,"selectstart");this.removeHandler(this.host,"mouseenter");this.removeHandler(this.host,"mouseleave");this.removeHandler(this.host,"keydown");this.removeHandler(this.host,"focus");this.removeHandler(this.host,"blur")},_render:function(){null==this.boxSize&&(this.boxSize=
13);this.box.width(this.boxSize);this.box.height(this.boxSize);this.disabled?this.disable():this.enableContainerClick?this.host.css("cursor","pointer"):this.host.css("cursor","auto");this.rtl&&(this.box.addClass(this.toThemeProperty("jqx-radiobutton-rtl")),this.host.addClass(this.toThemeProperty("jqx-rtl")));this.updateStates()},val:function(b){if(0==arguments.length||"object"==typeof b)return this.checked;"string"==typeof b?("true"==b&&this.check("api"),"false"==b&&this.uncheck("api"),""==b&&this.indeterminate("api")):
(1==b&&this.check("api"),0==b&&this.uncheck("api"),null==b&&this.indeterminate("api"));return this.checked},check:function(b){this.checked=!0;var d=this;this.checkMark.removeClass();this.checkMark.addClass(this.toThemeProperty("jqx-fill-state-pressed"));c.jqx.browser.msie?(this.disabled&&this.checkMark.addClass(this.toThemeProperty("jqx-radiobutton-check-disabled")),this.checkMark.addClass(this.toThemeProperty("jqx-radiobutton-check-checked"))):(this.disabled&&this.checkMark.addClass(this.toThemeProperty("jqx-radiobutton-check-disabled")),
this.checkMark.addClass(this.toThemeProperty("jqx-radiobutton-check-checked")),this.checkMark.css("opacity",0),this.checkMark.stop().animate({opacity:1},this.animationShowDelay,function(){}));var e=c.find(".jqx-radiobutton");null==this.groupName&&(this.groupName="");c.each(e,function(){c(this).jqxRadioButton("groupName")==d.groupName&&this!=d.element&&c(this).jqxRadioButton("uncheck","api")});e=this.changeType;this._raiseEvent("0");this.changeType=e;this._raiseEvent("3",{type:b,checked:!0});0==this.checkMark.height()?
(b=parseInt(this.boxSize)/2,this.checkMark.height(b),this.checkMark.width(b)):"13px"!=this.boxSize&&(b=parseInt(this.boxSize)/2,this.checkMark.height(b),this.checkMark.width(b),this.checkMark.css("margin-left",1+b/4),this.checkMark.css("margin-top",1+b/4));this.input.val(this.checked);c.jqx.aria(this,"aria-checked",this.checked)},uncheck:function(b){var d=this.checked;this.checked=!1;var e=this;c.jqx.browser.msie?e.checkMark.removeClass():(this.checkMark.css("opacity",1),this.checkMark.stop().animate({opacity:0},
this.animationHideDelay,function(){e.checkMark.removeClass()}));d&&(d=this.changeType,this._raiseEvent("1"),this.changeType=d,this._raiseEvent("3",{type:b,checked:!1}));this.input.val(this.checked);c.jqx.aria(this,"aria-checked",this.checked)},indeterminate:function(b){var d=this.checked;this.checked=null;this.checkMark.removeClass();c.jqx.browser.msie?this.checkMark.addClass(this.toThemeProperty("jqx-radiobutton-check-indeterminate")):(this.checkMark.addClass(this.toThemeProperty("jqx-radiobutton-check-indeterminate")),
this.checkMark.css("opacity",0),this.checkMark.stop().animate({opacity:1},this.animationShowDelay,function(){}));null!=d&&(d=this.changeType,this._raiseEvent("2"),this.changeType=d,this._raiseEvent("3",{type:b,checked:null}));this.input.val(this.checked);c.jqx.aria(this,"aria-checked","undefined")},toggle:function(b){if(!this.disabled&&!this.locked){var d=this.checked;this.checked=1==this.checked?this.hasTreeStates?null:!0:!0;d!=this.checked&&this.updateStates(b);this.input.val(this.checked)}},updateStates:function(b){this.checked?
this.check(b):0==this.checked?this.uncheck(b):null==this.checked&&this.indeterminate(b)},disable:function(){this.disabled=!0;1==this.checked?this.checkMark.addClass(this.toThemeProperty("jqx-radiobutton-check-disabled")):null==this.checked&&this.checkMark.addClass(this.toThemeProperty("jqx-radiobutton-check-indeterminate-disabled"));this.box.addClass(this.toThemeProperty("jqx-radiobutton-disabled"));this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"));c.jqx.aria(this,"aria-disabled",
this.disabled)},enable:function(){this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled"));1==this.checked?this.checkMark.removeClass(this.toThemeProperty("jqx-radiobutton-check-disabled")):null==this.checked&&this.checkMark.removeClass(this.toThemeProperty("jqx-radiobutton-check-indeterminate-disabled"));this.box.removeClass(this.toThemeProperty("jqx-radiobutton-disabled"));this.disabled=!1;c.jqx.aria(this,"aria-disabled",this.disabled)},destroy:function(){this._removeHandlers();this.host.remove()},
_raiseEvent:function(b,d){var e=new c.Event(this.events[b]);e.owner=this;d||(d={});d.type=this.changeType;this.changeType=null;e.args=d;try{var g=this.host.trigger(e)}catch(f){}return g},propertiesChangedHandler:function(b,d,e){e.width&&e.height&&2==Object.keys(e).length&&b.setSize()},propertyChangedHandler:function(b,d,e,g){if(void 0!=this.isInitialized&&0!=this.isInitialized&&!(b.batchUpdate&&b.batchUpdate.width&&b.batchUpdate.height&&2==Object.keys(b.batchUpdate).length)){d!=this.enableContainerClick||
this.disabled||this.locked||(g?this.host.css("cursor","pointer"):this.host.css("cursor","auto"));"rtl"==d&&(g?(b.box.addClass(b.toThemeProperty("jqx-radiobutton-rtl")),b.host.addClass(b.toThemeProperty("jqx-rtl"))):(b.box.removeClass(b.toThemeProperty("jqx-radiobutton-rtl")),b.host.removeClass(b.toThemeProperty("jqx-rtl"))));"boxSize"==d&&b.render();if("checked"==d)switch(g){case !0:this.check("api");break;case !1:this.uncheck("api");break;case null:this.indeterminate()}"theme"==d&&c.jqx.utilities.setTheme(e,
g,this.host);"disabled"==d&&(g?this.disable():this.enable())}}})})(jqxBaseFramework);
(function(c){c.jqx.jqxWidget("jqxSplitter","",{});c.extend(c.jqx._jqxSplitter.prototype,{defineInstance:function(){var b={width:300,height:300,panels:[],orientation:"vertical",disabled:!1,splitBarSize:5,touchSplitBarSize:15,panel1:null,panel2:null,_eventsMap:{mousedown:c.jqx.mobile.getTouchEventName("touchstart"),mouseup:c.jqx.mobile.getTouchEventName("touchend"),mousemove:c.jqx.mobile.getTouchEventName("touchmove"),mouseenter:"mouseenter",mouseleave:"mouseleave"},_isTouchDevice:!1,_isNested:!1,resizable:!0,
touchMode:"auto",showSplitBar:!0,initContent:null,_events:["resize","expanded","collapsed","resizeStart","layout"]};if(this===c.jqx._jqxSplitter.prototype)return b;c.extend(!0,this,b);return b},createInstance:function(){this.render()},_initOverlay:function(b){this.overlay||"undefined"==b?(this.overlay.remove(),this.overlay=null):1==b&&(this.overlay=c("<div style='z-index: 100; background: #fff;'></div>"),this.overlay.css("opacity",.01),this.overlay.css("position","absolute"),this.overlay.appendTo(c(document.body)),
this.host.coord(),this.overlay.css("left","0px"),this.overlay.css("top","0px"),this.overlay.width(c(window).width()),this.overlay.height(c(window).height()),this.overlay.addClass("jqx-disableselect"),"horizontal"==this.orientation?this.overlay.css("cursor","row-resize"):this.overlay.css("cursor","col-resize"))},_startDrag:function(b){return b.target==this.splitBarButton[0]||this.disabled||this.panels[0].collapsed||this.panels[1].collapsed||!this.resizable?!0:null==this.overlay?(this._dragging=!0,
this._initOverlay(!0),this._dragStart=c.jqx.position(b),!1):!0},_drag:function(b){if(this.panels[0].collapsed||this.panels[1].collapsed||this.disabled||!this._dragging)return!0;var d="horizontal"==this.orientation?"top":"left",e="vertical"==this.orientation?"width":"height";this._position=c.jqx.position(b);if(this.overlay&&!this._splitBarClone&&3<=Math.abs(this._position[d]-this._dragStart[d]))b=this.splitBar.coord(),this._cloneStart={left:b.left,top:b.top},this._splitBarClone=this._createSplitBarClone(),
this._raiseEvent(3,{panels:this.panels});else{if(this._splitBarClone){var g,f,h=this.host[e](),l=h/100,e=this._splitBarClone[e]()+2;g=parseInt(this.host.coord()[d]);var q=this._position[d]-this._dragStart[d]+this._cloneStart[d]-g;0>q&&(q=0);q>h+0-e&&(q=h+0-e);g=this.panels[0].min;f=this.panels[1].min;-1!=f.toString().indexOf("%")&&(f=parseFloat(f)*l);-1!=g.toString().indexOf("%")&&(g=parseFloat(g)*l);this._splitBarClone.removeClass(this.toThemeProperty("jqx-splitter-splitbar-invalid"));q<g&&(this._splitBarClone.addClass(this.toThemeProperty("jqx-splitter-splitbar-invalid")),
q=g);q>h+0-e-f&&(this._splitBarClone.addClass(this.toThemeProperty("jqx-splitter-splitbar-invalid")),q=h+0-e-f);this._splitBarClone.css(d,q);b.preventDefault&&b.preventDefault();b.stopPropagation&&b.stopPropagation();return!1}return!0}},resize:function(b,d){this.width=b;this.height=d;this._arrange()},_resize:function(){var b="horizontal"==this.orientation?"height":"width",d=this._splitBarClone.css("horizontal"==this.orientation?"top":"left"),b=this.host[b](),e=1/(b/100);-1!=this.panels[0].size.toString().indexOf("%")?
(this.panels[0].size=parseFloat(d)*e+"%",this.panels[1].size=100-parseFloat(d)*e+"%"):(this.panels[0].size=parseFloat(d),this.panels[1].size=b-parseFloat(d));this._layoutPanels();this._raiseEvent(0,{panels:this.panels})},_stopDrag:function(){this._dragging&&this._initOverlay();this._dragging=!1;if(this._splitBarClone){if(this.panels[0].collapsed||this.panels[1].collapsed||this.disabled)return!0;this._resize();this._splitBarClone.remove();this._splitBarClone=null}},_createSplitBarClone:function(){var b=
this.splitBar.clone();b.fadeTo(0,.7);b.css("z-index",99999);"vertical"==this.orientation?b.css("cursor","col-resize"):b.css("cursor","row-resize");this.host.append(b);return b},_eventName:function(b){return this._isTouchDevice?this._eventsMap[b]:b},_addHandlers:function(){var b=this;c.jqx.utilities.resize(this.host,function(){b._layoutPanels()});this.addHandler(this.splitBar,"dragstart."+this.element.id,function(b){return!1});this.splitBarButton&&(this.addHandler(this.splitBarButton,"click."+this.element.id,
function(){b.panels[0].collapsible?b.panels[0].collapsed?b.expand():b.collapse():b.panels[1].collapsible&&(b.panels[1].collapsed?b.expand():b.collapse())}),this.addHandler(this.splitBarButton,this._eventName("mouseenter"),function(){b.splitBarButton.addClass(b.toThemeProperty("jqx-splitter-collapse-button-hover"));b.splitBarButton.addClass(b.toThemeProperty("jqx-fill-state-hover"))}),this.addHandler(this.splitBarButton,this._eventName("mouseleave"),function(){b.splitBarButton.removeClass(b.toThemeProperty("jqx-splitter-collapse-button-hover"));
b.splitBarButton.removeClass(b.toThemeProperty("jqx-fill-state-hover"))}));this.addHandler(c(document),this._eventName("mousemove")+"."+this.element.id,function(d){return b._drag(d)});this.addHandler(c(document),this._eventName("mouseup")+"."+this.element.id,function(){return b._stopDrag()});this.addHandler(this.splitBar,this._eventName("mousedown"),function(d){return b._startDrag(d)});this.addHandler(this.splitBar,this._eventName("mouseenter"),function(){b.resizable&&!b.disabled&&(b.splitBar.addClass(b.toThemeProperty("jqx-splitter-splitbar-hover")),
b.splitBar.addClass(b.toThemeProperty("jqx-fill-state-hover")))});this.addHandler(this.splitBar,this._eventName("mouseleave"),function(){b.resizable&&!b.disabled&&(b.splitBar.removeClass(b.toThemeProperty("jqx-splitter-splitbar-hover")),b.splitBar.removeClass(b.toThemeProperty("jqx-fill-state-hover")))});if((""!=document.referrer||window.frameElement)&&null!=window.top&&window.top!=window.self){var d=null;window.parent&&document.referrer&&(d=document.referrer);d&&-1!=d.indexOf(document.location.host)&&
(d=function(d){b._stopDrag()},window.top.document.addEventListener?window.top.document.addEventListener("mouseup",d,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",d))}},_removeHandlers:function(){this.removeHandler(c(window),"resize."+this.element.id);this.splitBarButton&&(this.removeHandler(this.splitBarButton,"click."+this.element.id),this.removeHandler(this.splitBarButton,this._eventName("mouseenter")),this.removeHandler(this.splitBarButton,this._eventName("mouseleave")));
this.removeHandler(c(document),this._eventName("mousemove")+"."+this.element.id);this.removeHandler(c(document),this._eventName("mouseup")+"."+this.element.id);this.splitBar&&(this.removeHandler(this.splitBar,"dragstart."+this.element.id),this.removeHandler(this.splitBar,this._eventName("mousedown")),this.removeHandler(this.splitBar,this._eventName("mouseenter")),this.removeHandler(this.splitBar,this._eventName("mouseleave")))},render:function(){this.splitBar&&this.splitBar.remove();var b=this.host.children();
if(2!=b.length)throw"Invalid HTML Structure! jqxSplitter requires 1 container DIV tag and 2 nested DIV tags.";if(2==b.length){var d=b[0].className.split(" "),b=b[1].className.split(" ");if(-1!=d.indexOf("jqx-reset")&&-1!=d.indexOf("jqx-splitter")&&-1!=d.indexOf("jqx-widget"))throw"Invalid HTML Structure! Nested jqxSplitter cannot be initialized from a Splitter Panel. You need to add a new DIV tag inside the Splitter Panel and initialize the nested jqxSplitter from it!";if(-1!=b.indexOf("jqx-reset")&&
-1!=b.indexOf("jqx-splitter")&&-1!=b.indexOf("jqx-widget"))throw"Invalid HTML Structure! Nested jqxSplitter cannot be initialized from a Splitter Panel. You need to add a new DIV tag inside the Splitter Panel and initialize the nested jqxSplitter from it!";}if(0<this.host.parent().length&&-1!=this.host.parent()[0].className.indexOf("jqx-splitter")){if(-1!=this.element.className.indexOf("jqx-splitter-panel"))throw"Invalid HTML Structure! Nested jqxSplitter cannot be initialized from a Splitter Panel. You need to add a new DIV tag inside the Splitter Panel and initialize the nested jqxSplitter from it!";
this._isNested=!0;300==this.width&&(this.width="100%");300==this.height&&(this.height="100%");"100%"==this.width&&"100%"==this.height&&(this.host.addClass("jqx-splitter-nested"),-1!=this.host.parent()[0].className.indexOf("jqx-splitter-panel")&&this.host.parent().addClass("jqx-splitter-panel-nested"))}this._hasBorder=0==this.host.hasClass("jqx-hideborder")||""!=this.element.style.borderTopWidth;this._removeHandlers();this._isTouchDevice=c.jqx.mobile.isTouchDevice();this._validate();this.panel1.css("left",
"0px");this.panel1.css("top","0px");this.panel2.css("left","0px");this.panel2.css("top","0px");this.splitBar=c("<div><div></div></div>");this.resizable||this.splitBar.css("cursor","default");this.splitBarButton=this.splitBar.find("div:last");this._setTheme();this.splitBar.insertAfter(this.panel1);this._arrange();0==this.panels[0].collapsible&&0==this.panels[1].collapsible&&this.splitBarButton.hide();this._addHandlers();this.initContent&&this.initContent();this.disabled&&this.disable()},_hiddenParent:function(){return c.jqx.isHidden(this.host)},
_setTheme:function(){this.panel1.addClass(this.toThemeProperty("jqx-widget-content"));this.panel2.addClass(this.toThemeProperty("jqx-widget-content"));this.panel1.addClass(this.toThemeProperty("jqx-splitter-panel"));this.panel2.addClass(this.toThemeProperty("jqx-splitter-panel"));this.panel1.addClass(this.toThemeProperty("jqx-reset"));this.panel2.addClass(this.toThemeProperty("jqx-reset"));this.host.addClass(this.toThemeProperty("jqx-reset"));this.host.addClass(this.toThemeProperty("jqx-splitter"));
this.host.addClass(this.toThemeProperty("jqx-widget"));this.host.addClass(this.toThemeProperty("jqx-widget-content"));this.splitBar.addClass(this.toThemeProperty("jqx-splitter-splitbar-"+this.orientation));this.splitBar.addClass(this.toThemeProperty("jqx-fill-state-normal"));this.splitBarButton.addClass(this.toThemeProperty("jqx-splitter-collapse-button-"+this.orientation));this.splitBarButton.addClass(this.toThemeProperty("jqx-fill-state-pressed"))},_validate:function(){var b=this.host.children();
if(2!=b.length)throw"Invalid HTML Structure! jqxSplitter requires two nested DIV tags!";this.panels&&!this.panels[1]?this.panels[0]?this.panels[1]={}:this.panels=[{size:"50%"},{size:"50%"}]:void 0==this.panels&&(this.panels=[{size:"50%"},{size:"50%"}]);b=this.host.children();this.panel1=this.panels[0].element=c(b[0]);this.panel2=this.panels[1].element=c(b[1]);this.panel1[0].style.minWidth="";this.panel1[0].style.maxWidth="";this.panel2[0].style.minWidth="";this.panel2[0].style.maxWidth="";c.each(this.panels,
function(){void 0==this.min&&(this.min=0);void 0==this.size&&(this.size=0);0>this.size&&(this.size=0);0>this.min&&(this.min=0);void 0==this.collapsible&&(this.collapsible=!0);void 0==this.collapsed&&(this.collapsed=!1);0!=this.size&&(-1!=this.size.toString().indexOf("px")&&(this.size=parseInt(this.size)),-1==this.size.toString().indexOf("%")?parseInt(this.min)>parseInt(this.size)&&(this.min=this.size):-1!=this.min.toString().indexOf("%")&&parseInt(this.min)>parseInt(this.size)&&(this.min=this.size))})},
_arrange:function(){if(null!=this.width){var b=this.width;"string"!=typeof b&&(b=parseInt(this.width)+"px");this.host.css("width",b)}null!=this.height&&(b=this.height,"string"!=typeof b&&(b=parseInt(this.height)+"px"),this.host.css("height",b));this._splitBarSize=this._isTouchDevice?this.touchSplitBarSize:this.splitBarSize;this.showSplitBar||(this._splitBarSize=0,this.splitBar.hide());b="horizontal"==this.orientation?"width":"height";this.splitBar.css(b,"100%");this.panel1.css(b,"100%");this.panel2.css(b,
"100%");"horizontal"==this.orientation?this.splitBar.height(this._splitBarSize):this.splitBar.width(this._splitBarSize);"vertical"===this.orientation?(this.splitBarButton.width(this._splitBarSize),this.splitBarButton.height(45)):(this.splitBarButton.height(this._splitBarSize),this.splitBarButton.width(45));this.splitBarButton.css("position","relative");"vertical"===this.orientation?(this.splitBarButton.css("top","50%"),this.splitBarButton.css("left","0"),this.splitBarButton.css("margin-top","-23px"),
this.splitBarButton.css("margin-left","-0px")):(this.splitBarButton.css("left","50%"),this.splitBarButton.css("top","0"),this.splitBarButton.css("margin-left","-23px"),this.splitBarButton.css("margin-top","-0px"));this._layoutPanels()},collapse:function(){if(!this.disabled){var b=-1;this.panels[0].collapsed=this.panels[1].collapsed=!1;this.panels[0].element[0].style.visibility="inherit";this.panels[1].element[0].style.visibility="inherit";this.panels[0].collapsible?b=0:this.panels[1].collapsible&&
(b=1);-1!=b&&(this.panels[b].collapsed=!0,this.panels[b].element[0].style.visibility="hidden",this.splitBar.addClass(this.toThemeProperty("jqx-splitter-splitbar-collapsed")),this._layoutPanels(),this._raiseEvent(2,{index:b,panels:this.panels}),this._raiseEvent(0,{panels:this.panels}))}},expand:function(){if(!this.disabled){var b=-1;this.panels[0].collapsed=this.panels[1].collapsed=!1;this.panels[0].element[0].style.visibility="inherit";this.panels[1].element[0].style.visibility="inherit";this.panels[0].collapsible?
b=0:this.panels[1].collapsible&&(b=1);-1!=b&&(this.panels[b].collapsed=!1,this.panels[b].element[0].style.visibility="inherit",this.splitBar.removeClass(this.toThemeProperty("jqx-splitter-splitbar-collapsed")),this._layoutPanels(),this._raiseEvent(1,{index:b,panels:this.panels}),this._raiseEvent(0,{panels:this.panels}))}},disable:function(){this.disabled=!0;this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"));this.splitBar.addClass(this.toThemeProperty("jqx-splitter-splitbar-collapsed"));
this.splitBarButton.addClass(this.toThemeProperty("jqx-splitter-splitbar-collapsed"))},enable:function(){this.disabled=!1;this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled"));this.splitBar.removeClass(this.toThemeProperty("jqx-splitter-splitbar-collapsed"));this.splitBarButton.removeClass(this.toThemeProperty("jqx-splitter-splitbar-collapsed"))},refresh:function(b){1!=b&&this._arrange()},propertyChangedHandler:function(b,d,e,g){"panels"===d||"orientation"===d||"showSplitBar"===d?
b.render():("touchMode"===d&&(b._isTouchDevice=g),"disabled"===d?g?b.disable():b.enable():"theme"===d?c.jqx.utilities.setTheme(e,g,b.host):b.refresh())},_layoutPanels:function(){var b="horizontal"==this.orientation?"height":"width",d="horizontal"==this.orientation?"top":"left",e,c,f,h,l=parseInt(this._splitBarSize)+2;this.showSplitBar||(l=0);var q=this.host[b](),r=q/100,t=1/r,w=t*l,z=this.panel1,B=this.panel2,v=this.panels[0].size;this.panels[0].collapsed&&(f=!0);this.panels[1].collapsed&&(h=!0);
e=this.panels[0].min;c=this.panels[1].min;-1!=c.toString().indexOf("%")&&(c=parseFloat(c)*r);-1!=e.toString().indexOf("%")&&(e=parseFloat(e)*r);this._isNested&&this._isTouchDevice&&("horizontal"==this.orientation?(z.width(this.host.width()),B.width(this.host.width())):(z.height(this.host.height()),B.height(this.host.height())));if(f)e=Math.max(c,q-l),z[b](0),B[b](e);else if(h)e=Math.max(e,q-l),B[b](0),z[b](e);else if(-1!=v.toString().indexOf("%"))f=100-parseFloat(v),z.css(b,parseFloat(v)+"%"),B.css(b,
f-w+"%"),f=B[b](),f<c&&(c=(f-c)*t,v=parseFloat(v)+parseFloat(c),f=100-parseFloat(v),z.css(b,parseFloat(v)+"%"),B.css(b,f-w+"%")),z[b]()<e&&z.css(b,parseFloat(e*t)+"%");else{f=q-v-l;if(z[0].style[b]!=v+"px")z[b](v);if(B[0].style[b]!=f+"px")B[b](f);f<c&&(v+=f-c,B[b](c),z[b](v));if(v<e)z[b](e)}b=this.panel1[b]();this.splitBar[0].style[d]!=b+"px"&&("vertical"==this.orientation?(this.splitBar[0].style.borderLeftColor="",this.splitBar[0].style.borderRightColor="",this.splitBarButton[0].style.width=parseInt(this._splitBarSize)+
"px",this.splitBarButton[0].style.left="0px"):(this.splitBar[0].style.borderTopColor="",this.splitBar[0].style.borderBottomColor="",this.splitBarButton[0].style.height=parseInt(this._splitBarSize)+"px",this.splitBarButton[0].style.top="0px"),this._hasBorder&&(q-l==b?"vertical"==this.orientation?(this.splitBar[0].style.borderRightColor="transparent",this.splitBarButton[0].style.width=parseInt(this._splitBarSize+1)+"px"):(this.splitBar[0].style.borderBottomColor="transparent",this.splitBarButton[0].style.height=
parseInt(this._splitBarSize+1)+"px"):0==b&&("vertical"==this.orientation?(this.splitBar[0].style.borderLeftColor="transparent",this.splitBarButton[0].style.width=parseInt(this._splitBarSize+1)+"px",this.splitBarButton[0].style.left="-1px"):(this.splitBar[0].style.borderTopColor="transparent",this.splitBarButton[0].style.height=parseInt(this._splitBarSize+1)+"px",this.splitBarButton[0].style.top="-1px"))),this.splitBar[0].style[d]=b+"px");this.panel2[0].style[d]!=b+l+"px"&&(this.panel2[0].style[d]=
b+l+"px");this._raiseEvent(4,{panels:this.panels})},destroy:function(){this._removeHandlers();c.jqx.utilities.resize(this.host,null,!0);this.host.remove()},_raiseEvent:function(b,d){var e=new c.Event(this._events[b]);e.owner=this;e.args=d;var g=[{},{}];g[0].size="vertical"==this.orientation?this.panel1[0].offsetWidth:this.panel1[0].offsetHeight;g[1].size="vertical"==this.orientation?this.panel2[0].offsetWidth:this.panel2[0].offsetHeight;g[0].min=this.panels[0].min;g[1].min=this.panels[1].min;g[0].collapsible=
this.panels[0].collapsible;g[1].collapsible=this.panels[1].collapsible;g[0].collapsed=this.panels[0].collapsed;g[1].collapsed=this.panels[1].collapsed;e.args.panels=g;return this.host.trigger(e)}})})(jqxBaseFramework);
(function(c){c.jqx.jqxWidget("jqxTabs","",{});c.extend(c.jqx._jqxTabs.prototype,{defineInstance:function(){var b={scrollAnimationDuration:200,enabledHover:!0,disabled:!1,collapsible:!1,animationType:"none",enableScrollAnimation:!0,contentTransitionDuration:450,toggleMode:"click",selectedItem:0,height:"auto",width:"auto",position:"top",selectionTracker:!1,scrollable:!0,scrollPosition:"right",scrollStep:70,autoHeight:!0,headerHeight:null,showCloseButtons:!1,canCloseAllTabs:!0,closeButtonSize:16,arrowButtonSize:16,
keyboardNavigation:!0,reorder:!1,selectionTrackerAnimationDuration:300,_isTouchDevice:!1,roundedCorners:!0,_headerExpandingBalance:0,_dragStarted:!1,_tabCaptured:!1,_lastUnorderedListPosition:0,_selectedItem:0,_titleList:[],_contentList:[],_contentWrapper:null,_unorderedList:null,_scrollTimeout:null,isCollapsed:!1,touchMode:!1,initTabContent:null,enableDropAnimation:!1,_currentEvent:null,_needScroll:!0,_isAnimated:{},_events:"created selected add removed enabled disabled selecting unselecting unselected dragStart dragEnd locked unlocked collapsed expanded tabclick".split(" "),
_initTabContentList:[],_invalidArgumentExceptions:{invalidScrollAnimationDuration:"The scroll animation duration is not valid!",invalidWidth:"Width you've entered is invalid!",invalidHeight:"Height you've entered is invalid!",invalidAnimationType:"You've entered invalid animation type!",invalidcontentTransitionDuration:"You've entered invalid value for contentTransitionDuration!",invalidToggleMode:"You've entered invalid value for toggleMode!",invalidPosition:"You've entered invalid position!",invalidScrollPosition:"You've entered invalid scroll position!",
invalidScrollStep:"You've entered invalid scroll step!",invalidStructure:"Invalid structure!",invalidArrowSize:"Invalid scroll button size!",invalidCloseSize:"Invalid close button size!"},aria:{"aria-disabled":{name:"disabled",type:"boolean"}},rtl:!1};if(this===c.jqx._jqxTabs.prototype)return b;c.extend(!0,this,b);return b},createInstance:function(){this._IE8=c.jqx.browser.msie&&9>c.jqx.browser.version;c.jqx.aria(this);this.element.className+=" "+this.toThemeProperty("jqx-tabs jqx-widget jqx-widget-content");
this.element.setAttribute("role","tablist");for(var b=this.host.children(),d=0;d<b.length;d++){var e=b[d];"ul"===e.nodeName.toLowerCase()?this._unorderedList=e:"div"===e.nodeName.toLowerCase()&&this._contentList.push(e)}this._unorderedListHelper=c(this._unorderedList);this._unorderedListHelper.initAnimate&&this._unorderedListHelper.initAnimate();this._closeButtonList=[];this._selectedItem=this.selectedItem;this._isTouchDevice=c.jqx.mobile.isTouchDevice();this._needScroll=this.scrollable;this.selectionTracker&&
(this.selectionTracker=this._seletionTrackerBrowserCheck());this._isTouchDevice&&(this.keyboardNavigation=this.reorder=!1);this._titleList=this._unorderedListHelper.children();for(b=this._titleList.length;b;)b--,this._titleList[b].setAttribute("role","tab"),this._titleList[b].getAttribute("id")||this._titleList[b].setAttribute("id",this.element.id+"Tab"+b),this._contentList[b].setAttribute("role","tabpanel");this._validateProperties();this._refresh();this._moveSelectionTrack(this._selectedItem,0);
this.disabled&&this.disable();this.element.tabIndex=0;this._raiseEvent(0);this._enableWindowResize()},_hiddenParent:function(){if("none"===this.host.css("display"))return!0;var b=!1;c.each(this.host.parents(),function(){if("none"===c(this).css("display"))return b=!0,!1});return b},_enableWindowResize:function(){var b=this,d=c.jqx.isHidden(b.host);c.jqx.utilities.resize(this.host,function(){d?(b._uiRefresh(!0),d=!1):b.refresh()})},resize:function(b,d){this.width=b;this.height=d;c.jqx.isHidden(this.host)?
this._uiRefresh(!0):this.refresh()},refresh:function(b){!0===b&&void 0!==b||this._setSize()},_seletionTrackerBrowserCheck:function(){var b="Browser CodeName: "+navigator.appCodeName+"",b=b+("Browser Name: "+navigator.appName+""),b=b+("Browser Version: "+navigator.appVersion+""),b=b+("Platform: "+navigator.platform+""),b=b+("User-agent header: "+navigator.userAgent+"");return-1!==b.indexOf("IEMobile")||-1!==b.indexOf("Windows Phone OS")||c.jqx.browser.msie&&7>=c.jqx.browser.version?!1:!0},render:function(){this._refresh()},
_uiRefresh:function(b){this._unorderedListLeftBackup=this._unorderedListHelper.css("left");b&&this._render();this._addStyles();this._performLayout();this._prepareTabs();this._removeEventHandlers();this._addEventHandlers();"auto"===this._unorderedListLeftBackup&&(this._unorderedListLeftBackup=this._getArrowsDisplacement());this._unorderedList.style.left=this._toPx(this._unorderedListLeftBackup);this.rtl&&this.scrollable&&this._rightArrow&&"hidden"!==c(this._rightArrow).css("visibility")&&(b=2*this.arrowButtonSize,
b=this._width(this.element)-parseInt(this._width(this._unorderedList)+b+parseInt(this._unorderedListHelper.css("margin-left"),10),10),this._unorderedList.style.left=b+"px")},_refresh:function(){c.jqx.isHidden(this.host)||this._uiRefresh(!0)},_addStyles:function(){this._unorderedList.className+=" "+this.toThemeProperty("jqx-tabs-title-container");this._unorderedList.style.outline="none";this._unorderedList.style.whiteSpace="nowrap";this._unorderedList.style.marginTop="0px";this._unorderedList.style.marginBottom=
"0px";this._unorderedList.style.padding="0px";this._unorderedList.style.background="transparent";this._unorderedList.style.border="none";this._unorderedList.style.borderStyle="none";this._unorderedList.style.textIndent="0px";for(var b=this.length();b;){b--;var d=this._titleList[b],e="jqx-tabs-title jqx-item";d.style.padding="";"bottom"===this.position&&(e+=" jqx-tabs-title-bottom");d.disabled&&(e+=" jqx-tabs-title-disable jqx-fill-state-disabled");switch(this.position){case "top":e+=" jqx-rc-t";this._removeClass(this._contentList[b],
this.toThemeProperty("jqx-rc-t"));this._contentList[b].className+=" "+this.toThemeProperty("jqx-rc-b");break;case "bottom":e+=" jqx-rc-b",this._removeClass(this._contentList[b],this.toThemeProperty("jqx-rc-b")),this._contentList[b].className+=" "+this.toThemeProperty("jqx-rc-t")}d.className="jqx-reset jqx-disableselect "+this.toThemeProperty(e)}if(this.selectionTracker)switch(this.position){case "top":this._removeClass(this._selectionTracker,this.toThemeProperty("jqx-rc-b"));this._selectionTracker.className+=
" "+this.toThemeProperty("jqx-rc-t");break;case "bottom":this._removeClass(this._selectionTracker,this.toThemeProperty("jqx-rc-t")),this._selectionTracker.className+=" "+this.toThemeProperty("jqx-rc-b")}},_raiseEvent:function(b,d){var e=new c.Event(this._events[b]);e.owner=this;e.args=d;if(6===b||7===b)e.cancel=!1,this._currentEvent=e;var g="";try{if(g=this.host.trigger(e),1===b){var f=this;if(this.selectionTracker||"none"!==this.animationType)setTimeout(function(){!f._initTabContentList[f.selectedItem]&&
f.initTabContent&&(f.initTabContent(f.selectedItem),f._initTabContentList[f.selectedItem]=!0);var b=new c.Event("loadContent");b.owner=this;0<f._contentList.length&&f._contentList[f.selectedItem]&&c(f._contentList[f.selectedItem]).trigger(b)},50+f.selectionTrackerAnimationDuration);else{var h=new c.Event("loadContent");!f._initTabContentList[f.selectedItem]&&f.initTabContent&&(f.initTabContent(f.selectedItem),f._initTabContentList[f.selectedItem]=!0);h.owner=this;var l=new c.Event("resize");this.host.trigger(l)}}}catch(q){q&&
console&&console.log(q)}return g},_getArrowsDisplacement:function(){if(!this._needScroll)return 0;var b=this.arrowButtonSize,d=this.arrowButtonSize;return"left"===this.scrollPosition?b+d:"both"===this.scrollPosition?b:0},_scrollRight:function(b){this._stop(this._unorderedListHelper);this._unlockAnimation("unorderedList");var d=parseInt(this._width(this._unorderedList)+parseInt(this._unorderedListHelper.css("margin-left"),10),10),e=this._width(this.element),g,f,h=parseInt(this._unorderedListHelper.css("left"),
10),l=this._getArrowsDisplacement(),q;this.scrollable?(g=this._leftArrow.offsetWidth,f=this._rightArrow.offsetWidth):f=g=0;b=this.enableScrollAnimation?b:0;this._width(this._headerWrapper)>parseInt(this._unorderedListHelper.css("margin-left"),10)+this._width(this._unorderedList)||(Math.abs(h)+this.scrollStep<Math.abs(e-d)+g+f+l?(l=h-this.scrollStep,q=h-this.scrollStep+parseInt(c(this._titleList[this._selectedItem]).position().left,10)):(l=e-d-(2*this.arrowButtonSize-l),l<parseInt(this._unorderedListHelper.css("left"),
10)-4&&l>parseInt(this._unorderedListHelper.css("left"),10)+4&&(q=e-d-g-f+parseInt(c(this._titleList[this._selectedItem]).position().left,10))));this._performScrollAnimation(l,q,b)},_scrollLeft:function(b){this._stop(this._unorderedListHelper);this._unlockAnimation("unorderedList");var d=parseInt(this._unorderedListHelper.css("left"),10),e=this._getArrowsDisplacement(),g;b=this.enableScrollAnimation?b:0;this._width(this._headerWrapper)>=this._width(this._unorderedList)||(d+this.scrollStep<e?(e=d+
this.scrollStep,g=d+this.scrollStep+parseInt(c(this._titleList[this._selectedItem]).position().left,10)):e<parseInt(this._unorderedListHelper.css("left"),10)-4&&e>parseInt(this._unorderedListHelper.css("left"),10)+4&&(g=parseInt(c(this._titleList[this._selectedItem]).position().left,10)));this._performScrollAnimation(e,g,b)},_performScrollAnimation:function(b,d,e){var c=this;void 0!==d&&this._moveSelectionTrack(this._selectedItem,0,d);this._lockAnimation("unorderedList");this._unorderedListHelper.animate({left:b},
e,function(){c._moveSelectionTrack(c.selectedItem,0);c._unlockAnimation("unorderedList")})},_addKeyboardHandlers:function(){var b=this;this.keyboardNavigation&&this.addHandler(this.host,"keydown",function(d){if(!b._activeAnimation()){var e=b.selectionTracker,g=b.getContentAt(b._selectedItem);if(c(d.target).ischildof(g)||c(document.activeElement).ischildof(c(g)))return!0;switch(d.keyCode){case 37:return b.rtl?b.next():b.previous(),!1;case 39:return b.rtl?b.previous():b.next(),!1;case 36:return b.first(),
!1;case 35:return b.last(),!1;case 27:b._tabCaptured&&(b._cancelClick=!0,b._uncapture(null,b.selectedItem),b._tabCaptured=!1)}b.selectionTracker=e}return!0})},_addScrollHandlers:function(){var b=this;this.addHandler(this._leftArrow,"mousedown",function(){b._startScrollRepeat(!0,b.scrollAnimationDuration)});this.addHandler(this._rightArrow,"mousedown",function(){b._startScrollRepeat(!1,b.scrollAnimationDuration)});this.addHandler(this._rightArrow,"mouseleave",function(){clearTimeout(b._scrollTimeout)});
this.addHandler(this._leftArrow,"mouseleave",function(){clearTimeout(b._scrollTimeout)});this.addHandler(c(document),"mouseup.tab"+this.element.id,this._mouseUpScrollDocumentHandler,this);this.addHandler(c(document),"mouseleave.tab"+this.element.id,this._mouseLeaveScrollDocumentHandler,this)},_mouseLeaveScrollDocumentHandler:function(b){b=b.data;b._scrollTimeout&&clearTimeout(b._scrollTimeout)},_mouseUpScrollDocumentHandler:function(b){clearTimeout(b.data._scrollTimeout)},_mouseUpDragDocumentHandler:function(b){var d=
b.data;d._tabCaptured&&d._dragStarted&&d._uncapture(b);d._tabCaptured=!1},_addReorderHandlers:function(){this.addHandler(c(document),"mousemove.tab"+this.element.id,this._moveElement,this);this.addHandler(c(document),"mouseup.tab"+this.element.id,this._mouseUpDragDocumentHandler,this)},_addEventHandlers:function(){for(var b=this.length();b;)b--,this._addEventListenerAt(b);this.keyboardNavigation&&this._addKeyboardHandlers();this.scrollable&&this._addScrollHandlers();this.reorder&&!this._isTouchDevice&&
this._addReorderHandlers();var d=this;try{if((""!==document.referrer||window.frameElement)&&null!==window.top&&window.top!==window.self){var b=function(){d._tabCaptured&&(d._cancelClick=!0,d._uncapture(null,d.selectedItem),d._tabCaptured=!1)},e=null;window.parent&&document.referrer&&(e=document.referrer);e&&-1!==e.indexOf(document.location.host)&&window.top.document&&this.addHandler(c(window.top.document),"mouseup.tabs"+this.element.id,b)}}catch(g){}},focus:function(){try{this.host.focus();var b=
this;setTimeout(function(){b.host.focus()},25)}catch(d){}},_getFocusedItem:function(b){for(var d=this.length();d;){d--;var e=this._titleList[d],g=this._outerWidth(e,!0),f=parseInt(c(e).offset().left,10);if(f<=b&&f+g>=b&&e!==this._capturedElement&&!this._titleList[d].locked&&!0!==this._titleList[d].disabled)return d}return-1},_uncapture:function(b){var d=this.selectionTracker;this._unorderedListLeftBackup=this._unorderedListHelper.css("left");this._tabCaptured=this._dragStarted=!1;var e=this._indexOf(this._capturedElement);
if(this._capturedElement){switch(this.position){case "top":this._capturedElement.style.bottom="0px";break;case "bottom":this._capturedElement.style.top="0px"}var c;b&&(c=this._getFocusedItem(b.clientX));-1!==c&&b?(this._raiseEvent(10,{item:e,dropIndex:c}),this._reorderItems(c,e)):this._capturedElement.style.left="0px";for(var f=0;f<this._titleList.length;f++)this._titleList[f].style.position="static";this._reorderHeaderElements();this._unorderedList.style.position="relative";this._unorderedList.style.top=
"0px";this._prepareTabs();-1!==c&&b?this._moveSelectionTrack(this._selectedItem,0):(this._selectedItem=e,this._moveSelectionTrack(e,0));this._addSelectStyle(this._selectedItem,!0);document.selection&&document.selection.clear();this._unorderedList.style.left=this._toPx(this._unorderedListLeftBackup);this.selectionTracker=d}},_reorderItems:function(b,d){var e=this._titleList[this.selectedItem],g=this._titleList[d];"undefined"===typeof this._capturedElement&&(this._capturedElement=g);c(g).remove();d<
b?this._titleList[b+1]?this._unorderedList.insertBefore(g,this._titleList[b+1]):this._unorderedList.appendChild(g):this._unorderedList.insertBefore(g,this._titleList[b]);this._reorderElementArrays(b,d);this._getSelectedItem(e);this._removeEventHandlers();this._addEventHandlers()},_reorderElementArrays:function(b,d){var e=this._contentList[d];if(d<b)for(var c=d;c<=b;c++)this._titleList[c]=this._titleList[c+1],this._contentList[c]=this._contentList[c+1];else for(c=d;c>=b;c--)this._titleList[c]=this._titleList[c-
1],this._contentList[c]=this._contentList[c-1];this._contentList[b]=e;this._titleList[b]=this._capturedElement},getSelectedItem:function(){return this.selectedItem},_getSelectedItem:function(b){for(var d=this.length();d;)if(d--,this._titleList[d]===b){this._selectedItem=this.selectedItem=d;break}},_moveElement:function(b){var d=b.data;if(d._tabCaptured)if(document.selection&&document.selection.clear(),d._dragStarted)d._performDrag(b),clearTimeout(d._scrollTimeout);else{var e=-parseInt(d._unorderedListHelper.css("left"),
10);if(b.clientX+e>d._startX+3||b.clientX+e<d._startX-3)d._prepareTabForDragging(),d._dragStarted=!0}},_performDrag:function(b){var d=this.getZoomFactor(),e=-parseInt(this._unorderedListHelper.css("left"),10);this._capturedElement.style.left=this._toPx(e+b.clientX/d-this._startX/d);this._lastX=b.clientX/d;this._moveSelectionTrack(this.selectedItem,0)},getZoomFactor:function(){var b=1;document.body.getBoundingClientRect&&(b=document.body.getBoundingClientRect(),b=Math.round((b.right-b.left)/document.body.offsetWidth*
100)/100);return b},_prepareTabForDragging:function(){this._capturedElement.style.position="relative";this._capturedElement.style.left="0px";this._capturedElement.style.top="0px";this._capturedElement.style.zIndex=300;this.selectedItem=this._indexOf(this._capturedElement);switch(this.position){case "top":this._capturedElement.style.bottom=this._toPx(c(this._capturedElement).css("top"));break;case "bottom":this._capturedElement.style.top=this._toPx(c(this._capturedElement).css("top"))}this._raiseEvent(9,
{item:this._indexOf(this._capturedElement)})},_dragScroll:function(b){var d=parseInt(this._unorderedListHelper.css("left"),10),e=this,g=c(e._headerWrapper);b.clientX<=g.offset().left?(this._scrollLeft(this.scrollAnimationDuration),this._capturedElement.style.left=parseInt(c(this._capturedElement).css("left"),10)+this._lastUnorderedListPosition-d):b.clientX>g.offset().left+e._width(this._headerWrapper)?(this._scrollRight(this.scrollAnimationDuration),this._capturedElement.style.left=parseInt(c(this._capturedElement).css("left"),
10)+this._lastUnorderedListPosition-d):(e._stop(e._unorderedListHelper),this._unlockAnimation("unorderedList"),clearTimeout(this._scrollTimeout));this._scrollTimeout=setTimeout(function(){e._dragScroll(b)},this.scrollAnimationDuration);this._lastUnorderedListPosition=d},_captureElement:function(b,d){this._tabCaptured||this._titleList[d].locked||!0===this._titleList[d].disabled||this._activeAnimation()||(this._startX=-parseInt(this._unorderedListHelper.css("left"),10)+b.clientX,this._startY=b.clientY,
this._lastX=b.clientX,this._lastY=b.clientY,this._tabCaptured=!0,this._capturedElement=this._titleList[d])},_titleInteractionTrigger:function(b){0<this._headerExpandingBalance&&this._removeOppositeBorder();this._selectedItem!==b?(this.select(this._titleList[b],"toggle"),this._titleList[b].collapsed=!1,this.collapsible||("auto"!==this.height?this._contentWrapper.style.visibility="visible":this._contentWrapper.style.display="block")):this.collapsible&&(this.isCollapsed?this.expand():this.collapse())},
collapse:function(){var b=this._selectedItem;this.isCollapsed=!0;"auto"!==this.height?this._contentWrapper.style.visibility="hidden":this._contentWrapper.style.display="none";this._raiseEvent(13,{item:b});"top"===this.position?(this._headerWrapper.className+=" "+this.toThemeProperty("jqx-tabs-header-collapsed"),this.element.className+=" "+this.toThemeProperty("jqx-tabs-collapsed")):(this._headerWrapper.className+=" "+this.toThemeProperty("jqx-tabs-header-collapsed-bottom"),this.element.className+=
" "+this.toThemeProperty("jqx-tabs-collapsed-bottom"))},expand:function(){var b=this._selectedItem;this.isCollapsed=!1;this._select(b,this.contentTransitionDuration,null,!1,!0);"auto"!==this.height?this._contentWrapper.style.visibility="visible":this._contentWrapper.style.display="block";this._raiseEvent(14,{item:b});"top"===this.position?(this._removeClass(this._headerWrapper,this.toThemeProperty("jqx-tabs-header-collapsed")),this._removeClass(this.element,this.toThemeProperty("jqx-tabs-collapsed"))):
(this._removeClass(this._headerWrapper,this.toThemeProperty("jqx-tabs-header-collapsed-bottom")),this._removeClass(this.element,this.toThemeProperty("jqx-tabs-collapsed-bottom")))},_addSelectHandler:function(b){var d=this;this.addHandler(this._titleList[b],"selectstart",function(){return!1});this.addHandler(this._titleList[b],this.toggleMode,function(b){return function(){d._raiseEvent("15",{item:b});d._tabCaptured||d._cancelClick||d._titleInteractionTrigger(b);return!0}}(b))},_addDragDropHandlers:function(b){var d=
this;this.addHandler(this._titleList[b],"mousedown",function(e){d._captureElement(e,b)});this.addHandler(this._titleList[b],"mouseup",function(e){d._tabCaptured&&d._dragStarted?(d._cancelClick=!0,d._uncapture(e,b)):d._cancelClick=!1;return d._tabCaptured=!1})},_removeHoverStates:function(){var b=this;c.each(this._titleList,function(){b._removeClass(this,b.toThemeProperty("jqx-tabs-title-hover-top jqx-tabs-title-hover-bottom"))})},_addHoverHandlers:function(b){var d=this,e=this._titleList[b];this.addHandler(e,
"mouseenter mouseleave",function(c){if(b!==d._selectedItem){var f="jqx-fill-state-hover",f="top"===d.position?f+" jqx-tabs-title-hover-top":f+" jqx-tabs-title-hover-bottom";"mouseenter"===c.type?e.className+=" "+d.toThemeProperty(f):d._removeClass(e,d.toThemeProperty(f));d.showCloseButtons&&(f=d._closeButtonList[b],"mouseenter"===c.type?f.className+=" "+d.toThemeProperty("jqx-tabs-close-button-hover",!0):d._removeClass(f,d.toThemeProperty("jqx-tabs-close-button-hover",!0)))}})},_addEventListenerAt:function(b){var d=
this;if(!this._titleList[b].disabled){this.reorder&&!this._isTouchDevice&&this._addDragDropHandlers(b);this._addSelectHandler(b);this.enabledHover&&this._addHoverHandlers(b);var e=d._closeButtonList[b];this.removeHandler(e,"click");this.addHandler(e,"click",function(){d.removeAt(b);return!1})}},_removeEventHandlers:function(){for(var b=this.length();b;)b--,this._removeEventListenerAt(b);this.scrollable&&(this.removeHandler(this._leftArrow,"mousedown"),this.removeHandler(this._rightArrow,"mousedown"));
this.removeHandler(c(document),"mousemove.tab"+this.element.id,this._moveElement);this.removeHandler(c(document),"mouseup.tab"+this.element.id,this._mouseUpScrollDocumentHandler);this.removeHandler(c(document),"mouseup.tab"+this.element.id,this._mouseUpDragDocumentHandler);this.removeHandler(this.host,"keydown")},_removeEventListenerAt:function(b){this.removeHandler(this._titleList[b],this.toggleMode);this.removeHandler(this._titleList[b],"mouseenter");this.removeHandler(this._titleList[b],"mouseleave");
this.removeHandler(this._titleList[b],"mousedown");this.removeHandler(this._titleList[b],"mouseup");this.removeHandler(this._closeButtonList[b],"click")},_moveSelectionTrack:function(b,d,e){var g=this;if(-1!==b&&0!==this._titleList.length&&!(b>=this._titleList.length)){var f=this._titleList[b],h=c(f);if(this.selectionTracker&&this._selectionTracker){g._stop(g._selectionTrackerHelper);this._unlockAnimation("selectionTracker");void 0===e&&(e=parseInt(h.position().left,10),isNaN(parseInt(this._unorderedListHelper.css("left"),
10))||(e+=parseInt(this._unorderedListHelper.css("left"),10)),isNaN(parseInt(this._unorderedListHelper.css("margin-left"),10))||(e+=parseInt(this._unorderedListHelper.css("margin-left"),10)),isNaN(parseInt(h.css("margin-left"),10))||(e+=parseInt(h.css("margin-left"),10)),isNaN(parseInt(h.css("margin-right"),10)));var l=0;"top"===this.position&&(this._height(g._headerWrapper),this.autoHeight||(l+=parseInt(h.css("margin-top"),10)));this._lockAnimation("selectionTracker");var l=parseInt(h.css("padding-left"),
10)+parseInt(h.css("padding-right"),10),q="top"===this.position?0:1,r=parseInt(c(this._headerWrapper).css("padding-top"),10),t=parseInt(h.css("padding-top"),10)+parseInt(h.css("padding-bottom"),10);this._selectionTracker.style.visibility="visible";this._moveSelectionTrackerContainer.style.visibility="visible";h=parseInt(h.css("margin-top"),10);isNaN(h)&&(h=0);g._selectionTrackerHelper.animate({top:r+h-q,left:e+"px",height:parseInt(this._height(f)+t,10),width:g._width(f)+l},d,function(){g._unlockAnimation("selectionTracker");
g._selectionTracker.style.visibility="hidden";g._addSelectStyle(b,!0);g._moveSelectionTrackerContainer.style.visibility="hidden"})}}},destroy:function(){c.jqx.utilities.resize(this.host,null,!0);(""!=document.referrer||window.frameElement)&&null!=window.top&&window.top!=window.self&&this.removeHandler(c(window.top.document),"mouseup.tabs"+this.element.id);this.host.remove()},_switchTabs:function(b,d){if(b!==d&&!this._activeAnimation()&&!this._tabCaptured){this._raiseEvent(7,{item:d});this._raiseEvent(6,
{item:b});if(this._currentEvent&&this._currentEvent.cancel){this._currentEvent=null;return}this._unselect(d,null,!0);this._select(b,this.contentTransitionDuration,null,!0);return!0}return!1},_activeAnimation:function(){for(var b in this._isAnimated)if(this._isAnimated.hasOwnProperty(b)&&this._isAnimated[b])return!0;return!1},_indexOf:function(b){for(var d=this.length();d;)if(d--,this._titleList[d]===b||this._contentList[d]===b)return d;return-1},_validateProperties:function(){try{if(0>this.scrollAnimationDuration||
isNaN(this.scrollAnimationDuration))throw Error(this._invalidArgumentExceptions.invalidScrollAnimationDuration);if(0>parseInt(this.width,10)&&"auto"!==this.width)throw Error(this._invalidArgumentExceptions.invalidWidth);if(0>parseInt(this.height,10)&&"auto"!==this.height)throw Error(this._invalidArgumentExceptions.invalidHeight);if("none"!==this.animationType&&"fade"!==this.animationType)throw Error(this._invalidArgumentExceptions.invalidAnimationType);if(0>this.contentTransitionDuration||isNaN(this.contentTransitionDuration))throw Error(this._invalidArgumentExceptions.invalidcontentTransitionDuration);
if("click"!==this.toggleMode&&"dblclick"!==this.toggleMode&&"mouseenter"!==this.toggleMode&&"none"!==this.toggleMode)throw Error(this._invalidArgumentExceptions.invalidToggleMode);if("top"!==this.position&&"bottom"!==this.position)throw Error(this._invalidArgumentExceptions.invalidPosition);if("left"!==this.scrollPosition&&"right"!==this.scrollPosition&&"both"!==this.scrollPosition)throw Error(this._invalidArgumentExceptions.invalidScrollPosition);if(0>this.scrollStep||isNaN(this.scrollStep))throw Error(this._invalidArgumentExceptions.invalidScrollStep);
if(this._titleList.length!==this._contentList.length||0===this._titleList.length)throw Error(this._invalidArgumentExceptions.invalidStructure);if(0>this.arrowButtonSize||isNaN(this.arrowButtonSize))throw Error(this._invalidArgumentExceptions.invalidArrowSize);if(0>this.closeButtonSize||isNaN(this.closeButtonSize))throw Error(this._invalidArgumentExceptions.invalidCloseSize);}catch(b){try{console.log(b)}catch(d){}}},_startScrollRepeat:function(b,d){var e=this;b?this._scrollLeft(d):this._scrollRight(d);
this._scrollTimeout&&clearTimeout(this._scrollTimeout);this._scrollTimeout=setTimeout(function(){e._startScrollRepeat(b,e.scrollAnimationDuration)},d)},_performLayout:function(){for(var b=this.length();b;)if(b--,"top"===this.position||"bottom"===this.position)this._titleList[b].style["float"]=this.rtl?"right":"left";this._fitToSize();this._performHeaderLayout();this._fitToSize()},updatetabsheader:function(){this._performHeaderLayout()},_setSize:function(){this._fitToSize();this._positionArrows(this._totalItemsWidth);
this._unorderedList.style.width=this._totalItemsWidth>this.element.offsetWidth?this._toPx(this._totalItemsWidth):this.element.offsetWidth-2+"px";this._fitToSize()},_addArrows:function(){this._leftArrow&&this._rightArrow&&(c(this._leftArrow).remove(),c(this._rightArrow).remove());this._leftArrow=document.createElement("div");this._leftArrow.innerHTML='<span style="display: block; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-tabs-arrow-left")+'"></span>';this._leftArrow.className=
this.toThemeProperty("jqx-tabs-arrow-background jqx-widget-header");this._leftArrow.style.zIndex=30;this._leftArrow.style.display="none";this._leftArrow.style.width=this._toPx(this.arrowButtonSize);this._leftArrow.style.height="100%";this._rightArrow=document.createElement("div");this._rightArrow.innerHTML='<span style="display: block; width: 16px; height: 16px;" class="'+this.toThemeProperty("jqx-tabs-arrow-right")+'"></span>';this._rightArrow.className=this.toThemeProperty("jqx-tabs-arrow-background jqx-widget-header");
this._rightArrow.style.zIndex=30;this._rightArrow.style.display="none";this._rightArrow.style.width=this._toPx(this.arrowButtonSize);this._rightArrow.style.height="100%";this._headerWrapper.appendChild(this._leftArrow);this._headerWrapper.appendChild(this._rightArrow)},_tabsWithVisibleCloseButtons:function(){if(!this.showCloseButtons)return 0;var b=this.length();c.each(this._titleList,function(){var d=this.attr("hasclosebutton");void 0!==d&&null!==d&&("false"!==d&&!1!==d||b--)});return b},_calculateTitlesSize:function(){function b(b,
d){b&&(b.style.display=d?"block":"none")}var d=0,e=0,g=this.length();this.rtl&&c.jqx.browser.msie&&8>c.jqx.browser.version&&(this._measureItem=document.createElement("span"),this._measureItem.style.position="relative",this._measureItem.style.visibility="hidden",document.body.appendChild(this._measureItem));for(;g;){g--;var f=this._titleList[g],h=this._closeButtonList[g];this._measureItem&&(this._measureItem.innerHTML=f.innerHTML,this._measureItem.html(this._titleList[g].html()),f.style.width=this._toPx(this._width(this._measureItem)));
f.style.position="static";b(h,!1);var e=e+this._outerWidth(f,!0),l=this._outerHeight(f,!0);d<l&&(d=l);0===this._height(f)&&(l=f.cloneNode(!0),document.body.appendChild(l),d=this._outerHeight(l,!0),document.body.removeChild(l));var l=f.getAttribute("hasCloseButton"),q;void 0!==l&&null!==l?(q=!1,this.hiddenCloseButtons&&1===this.hiddenCloseButtons[g]&&(b(h,!1),q=!0),q||("true"===l||!0===l?(e+=this.closeButtonSize,b(h,!0)):"false"!==l&&!1!==l||b(h,!1))):this.showCloseButtons&&(this.canCloseAllTabs||
1<this._tabsWithVisibleCloseButtons())&&(q=!1,this.hiddenCloseButtons&&1===this.hiddenCloseButtons[g]&&(b(h,!1),q=!0),q||(e+=this.closeButtonSize,b(h,!0)));f.style.height=this._toPx(this._height(f))}this._measureItem&&c(this._measureItem).remove();return{height:d,width:10+e}},_reorderHeaderElements:function(){this.selectionTracker&&(this._moveSelectionTrackerContainer.style.position="absolute",this._moveSelectionTrackerContainer.style.height="100%",this._moveSelectionTrackerContainer.style.top="0px",
this._moveSelectionTrackerContainer.style.left="0px",this._moveSelectionTrackerContainer.style.width="100%");this._headerWrapper.style.position="relative";this._headerWrapper.style.left="0px";this._headerWrapper.style.top="0px";if(this.scrollable){this._rightArrow.style.width=this._toPx(this.arrowButtonSize);this._rightArrow.style.position="absolute";this._rightArrow.style.top="0px";this._leftArrow.style.width=this._toPx(this.arrowButtonSize);this._leftArrow.style.position="absolute";this._leftArrow.style.top=
"0px";var b=this.theme&&-1!==this.theme.indexOf("ui-")?3:0;0<b&&(this._rightArrow.className+=" "+this.toThemeProperty("jqx-rc-r"),this._leftArrow.className+=" "+this.toThemeProperty("jqx-rc-l"));var d=this.scrollPosition;this.rtl&&("left"===d&&(d="right"),"right"===d&&(d="left"));switch(d){case "both":this._rightArrow.style.right="0px";this._leftArrow.style.left="0px";break;case "left":this._rightArrow.style.left=this._toPx(this.arrowButtonSize);this._leftArrow.style.left="0px";break;case "right":this._rightArrow.style.right=
this._toPx(-b),this._leftArrow.style.right=this._toPx(parseInt(this.arrowButtonSize,10)-b)}}},_positionArrows:function(b){b>=this._headerWrapper.offsetWidth&&this.scrollable?(this._needScroll=!0,0===this._unorderedListHelper.position().left&&(this._unorderedListLeftBackup=this._getArrowsDisplacement()+"px"),this._leftArrow.style.display="block",this._rightArrow.style.display="block"):(this._needScroll=!1,this._leftArrow.style.display="none",this._rightArrow.style.display="none",this._unorderedList.style.left=
"0px")},_performHeaderLayout:function(){this._removeSelectStyle();var b=this._calculateTitlesSize(),d=b.height,b=b.width;this._headerWrapper.style.height=this._toPx(d);this._unorderedList.style.height=this._toPx(d);null!==this.headerHeight&&"auto"!==this.headerHeight&&(this._headerWrapper.style.height=this._toPx(this.headerHeight),this._unorderedList.style.height=this._toPx(this.headerHeight));d=this._width(this.element);this._unorderedList.style.width=b>d?this._toPx(b):this._toPx(d);c.jqx.browser.msie&&
8>c.jqx.browser.version&&(this._unorderedList.style.position="relative",this._unorderedList.style.overflow="hidden");this._reorderHeaderElements();this._totalItemsWidth=b+=parseInt(this._unorderedListHelper.css("margin-left"),10);this._positionArrows(b);this._unorderedList.style.position="relative";this._unorderedList.style.top="0px";this._verticalAlignElements();this._moveSelectionTrack(this._selectedItem,0);this._addSelectStyle(this.selectedItem)},_verticalAlignElements:function(){for(var b=this.length();b;){b--;
var d=this._titleList[b],e=c(d),g=e.children()[0],f=this._closeButtonList[b];parseInt(e.css("padding-top"),10);if(this.autoHeight){var h=parseInt(e.css("padding-top"),10),l=parseInt(e.css("padding-bottom"),10),q=e.css("border-top-width"),e=e.css("border-bottom-width"),q=-1===q.indexOf("px")?1:parseInt(q,10),e=-1===e.indexOf("px")?1:parseInt(e,10);d.style.height=this._toPx(this._outerHeight(this._unorderedList,!0)-(h+l+q+e))}else"top"===this.position?(h=this._height(this._unorderedList)-parseInt(this._outerHeight(d,
!0),10),parseInt(e.css("margin-top"),10)!==h&&0!==h&&(d.style.marginTop=this._toPx(h))):d.style.height=this._toPx(this._height(d));g.style.height="100%";d=this._height(d);f&&(e=d/2-this._height(f)/2,f.style.marginTop=this._toPx(1+e));f=d/2-this._height(g)/2;g.style.marginTop=this._toPx(f)}this.scrollable&&(b=(parseInt(this._headerWrapper.offsetHeight,10)-this.arrowButtonSize)/2,c(this._rightArrow).children()[0].style.marginTop=this._toPx(b),this._rightArrow.style.height="100%",c(this._leftArrow).children()[0].style.marginTop=
this._toPx(b),this._leftArrow.style.height="100%")},_getImageUrl:function(b){b=b.css("background-image");b=b.replace('url("',"");b=b.replace('")',"");b=b.replace("url(","");return b=b.replace(")","")},_fitToSize:function(){var b=!1,d=!1;null!==this.width&&-1!==this.width.toString().indexOf("%")&&(b=!0);null!==this.height&&-1!==this.height.toString().indexOf("%")&&(d=!0);b?(this.element.style.width=this.width,this._contentWrapper.style.width="100%"):(this.element.style.width=this._toPx(this.width),
"auto"!==this.width&&(this._contentWrapper.style.width="100%"));d?(this.element.style.height=this.height,this._contentWrapper.style.width="100%",this._contentWrapper.style.height="auto",b=this.element.offsetHeight-this._headerWrapper.offsetHeight,this._contentWrapper.style.height=b+"px"):"auto"!==this.height?(this.element.style.height=this._toPx(this.height),b=this._height(this.element)-this._headerWrapper.offsetHeight,this._contentWrapper.style.height=this._toPx(b)):this._contentWrapper.style.height=
"auto"},_maxHeightTab:function(){for(var b=this.length(),d=-1;b;)b--,-1<this._outerHeight(this._titleList[b],!0)&&(d=b);return d},_addSelectionTracker:function(){this._moveSelectionTrackerContainer&&c(this._moveSelectionTrackerContainer).remove();this._moveSelectionTrackerContainer=document.createElement("div");this._moveSelectionTrackerContainer.className=this.toThemeProperty("jqx-tabs-selection-tracker-container");this._selectionTracker=document.createElement("div");this._selectionTracker.className=
this.toThemeProperty("jqx-tabs-selection-tracker-"+this.position);this._selectionTracker.style.color="inherit";this._selectionTracker.style.position="absolute";this._selectionTracker.style.zIndex=10;this._selectionTracker.style.left="0px";this._selectionTracker.style.top="0px";this._selectionTracker.style.display="inline-block";this._moveSelectionTrackerContainer.appendChild(this._selectionTracker);this._headerWrapper.appendChild(this._moveSelectionTrackerContainer);this._selectionTrackerHelper=c(this._selectionTracker);
this._selectionTrackerHelper.initAnimate&&this._selectionTrackerHelper.initAnimate()},_addContentWrapper:function(){var b=null===this._contentWrapper;b&&(this._contentWrapper=document.createElement("div"),this._contentWrapper.className=this.toThemeProperty("jqx-tabs-content jqx-widget-content"),this._contentWrapper.style["float"]="none");for(var d=this.length();d;)d--,this._contentList[d].className+=" "+this.toThemeProperty("jqx-tabs-content-element");if(b)for("top"===this.position?this.element.appendChild(this._contentWrapper):
this.element.insertBefore(this._contentWrapper,this.element.firstChild),b=0;b<this._contentList.length;b++)this._contentWrapper.appendChild(this._contentList[b]);this.roundedCorners&&(this._contentWrapper.className="top"===this.position?this._contentWrapper.className+(" "+this.toThemeProperty("jqx-rc-b")):this._contentWrapper.className+(" "+this.toThemeProperty("jqx-rc-t")),this.element.className+=" "+this.toThemeProperty("jqx-rc-all"))},_addHeaderWrappers:function(){var b=this.length();void 0!==
this._headerWrapper&&c(this._headerWrapper).remove();this._headerWrapper=document.createElement("div");this._headerWrapper.style.outline="none";"top"===this.position?this.element.insertBefore(this._headerWrapper,this.element.firstChild):this.element.appendChild(this._headerWrapper);this._headerWrapper.appendChild(this._unorderedList);var d="jqx-tabs-headerWrapper jqx-tabs-header jqx-widget-header";"bottom"===this.position&&(d+=" jqx-tabs-header-bottom");this.roundedCorners&&(d="top"===this.position?
d+" jqx-rc-t":d+" jqx-rc-b");for(this._headerWrapper.className=this.toThemeProperty(d);b;)if(b--,d=this._titleList[b],null===d.querySelector(".jqx-tabs-titleWrapper")){var e=document.createElement("div");e.className="jqx-tabs-titleWrapper";e.style.outline="none";e.style.position="relative";e.style.zIndex=15;var g=c(d).children();e.appendChild(g[0]);e.appendChild(g[1]);d.appendChild(e)}},_render:function(){this._addCloseButtons();this._addHeaderWrappers();this._addContentWrapper();this.selectionTracker&&
this._addSelectionTracker();this._addArrows()},_addCloseButton:function(b,d){var e=document.createElement("div"),g=this._titleList[b];e.className="jqx-tabs-titleContentWrapper jqx-disableselect";var f="left";this.rtl&&(f="right");0<c(g).find(".jqx-tabs-close-button").length&&c(g).find(".jqx-tabs-close-button").remove();e.style["float"]=f;e.innerHTML=g.innerHTML;g.innerHTML="";var h=document.createElement("div");h.className=this.toThemeProperty("jqx-tabs-close-button");h.style.height=this._toPx(this.closeButtonSize);
h.style.width=this._toPx(this.closeButtonSize);h.style["float"]=f;h.style.fontSize="1px";g.appendChild(e);g.appendChild(h);!0===d?this._closeButtonList[b]=h:this._closeButtonList.splice(b,0,h);this.showCloseButtons?this.hiddenCloseButtons&&1===this.hiddenCloseButtons[b]&&(h.style.display="none"):h.style.display="none"},_addCloseButtons:function(){for(var b=this.length();b;)b--,this._addCloseButton(b,!0)},_prepareTabs:function(){var b=this.length(),d=this.selectionTracker;for(this.selectionTracker=
!1;b;)b--,this._selectedItem!==b&&this._unselect(b,null,!1);this._select(this._selectedItem,0,null,!1);this.selectionTracker=d;!this.initTabContent||this._initTabContentList[this.selectedItem]||this._hiddenParent()||(this.initTabContent(this.selectedItem),this._initTabContentList[this.selectedItem]=!0)},_isValidIndex:function(b){return 0<=b&&b<this.length()},_removeSelectStyle:function(){for(var b=this.length();b;){b--;var d=this._titleList[b];this.showCloseButtons&&this._removeClass(this._closeButtonList[b],
this.toThemeProperty("jqx-tabs-close-button-selected"));var e="jqx-fill-state-pressed",e="top"===this.position?e+" jqx-tabs-title-selected-top":e+" jqx-tabs-title-selected-bottom";this._removeClass(d,this.toThemeProperty(e))}},_addSelectStyle:function(b,d){this._removeSelectStyle();if(!this.selectionTracker||void 0!==d&&d){var e=this._titleList[b];if(0<=b&&void 0!==e){var c=null;this.showCloseButtons&&(c=this._closeButtonList[b],this.hiddenCloseButtons&&1===this.hiddenCloseButtons[b]&&(c=null));var f=
"jqx-fill-state-hover",h=" jqx-fill-state-pressed";"top"===this.position?(f+=" jqx-tabs-title-hover-top",h+=" jqx-tabs-title-selected-top"):(f+=" jqx-tabs-title-hover-bottom",h+=" jqx-tabs-title-selected-bottom");this._removeClass(e,this.toThemeProperty(f));e.className+=this.toThemeProperty(h);null!==c&&(c.className+=" "+this.toThemeProperty("jqx-tabs-close-button-selected"))}}},_addItemTo:function(b,d,e){if(d<b.length){for(var c,f,h=d;h+1<b.length;h++)void 0===c?(c=b[h+1],b[h+1]=b[h]):(f=b[h+1],
b[h+1]=c,c=f);void 0===c&&(c=b[d]);b[d]=e;b.push(c)}else b.push(e)},_select:function(b,d,e,g,f){if(!this._tabCaptured){this.host.attr("hideFocus","true");var h=this;void 0===f?this._addSelectStyle(b):this._addSelectStyle(b,f);var l=c(h._titleList[b]),q=h._titleList[b].getAttribute("id"),r=c(h._contentList[b]);if(this.isCollapsed&&this.collapsible)r[0].style.display="none",this._selectCallback(b,e,g);else switch(this.animationType){case "none":if(h.selectionTracker)setTimeout(function(){r[0].style.display=
"block";c.jqx.aria(l,"aria-selected",!0);c.jqx.aria(r,"aria-hidden",!1);c.jqx.aria(h,"aria-activedescendant",q)},this.selectionTrackerAnimationDuration);else{for(d=0;d<this._contentList.length;d++)b!==d&&"block"===c(h._contentList[d]).css("display")&&(h._contentList[d].style.display="none",c.jqx.aria(c(h._titleList[d]),"aria-selected",!1),c.jqx.aria(c(h._contentList[d]),"aria-hidden",!0));r[0].style.display="block";c.jqx.aria(l,"aria-selected",!0);c.jqx.aria(r,"aria-hidden",!1);c.jqx.aria(this,"aria-activedescendant",
q)}this._selectCallback(b,e,g);break;case "fade":this._lockAnimation("contentListSelect"),h._selectCallback(b,e,g),r.initAnimate&&void 0===r.fadeIn&&r.initAnimate(),r.fadeIn({duration:1E3,complete:function(){h._unlockAnimation("contentListSelect");c.jqx.aria(l,"aria-selected",!0);c.jqx.aria(r,"aria-hidden",!1);c.jqx.aria(h,"aria-activedescendant",q)}})}}},_selectCallback:function(b,d,e){this.selectedItem=this._selectedItem=b;d&&d();e&&this._raiseEvent(1,{item:b})},_unselect:function(b,d,e){if(0<=
b&&!this._tabCaptured){var g=this._contentList[b],f=c(g),h=this._titleList[b],l=c(h);f.initAnimate&&void 0===f.animate&&f.initAnimate();this._stop(f);"fade"===this.animationType?(g.style.display="none",c.jqx.aria(l,"aria-selected",!1),c.jqx.aria(f,"aria-hidden",!0)):this.selectionTracker?setTimeout(function(){g.style.display="none";c.jqx.aria(l,"aria-selected",!1);c.jqx.aria(f,"aria-hidden",!0)},this.selectionTrackerAnimationDuration):(g.style.display="none",c.jqx.aria(l,"aria-selected",!1),c.jqx.aria(f,
"aria-hidden",!0));this._unselectCallback(b,d,e);this.selectionTracker||this._removeClass(h,this.toThemeProperty("jqx-tabs-title-selected jqx-fill-state-pressed"))}},_unselectCallback:function(b,d,e){e&&this._raiseEvent(8,{item:b});d&&d()},disable:function(){for(var b=this.length();b;)b--,this.disableAt(b)},enable:function(){for(var b=this.length();b;)b--,this.enableAt(b)},getEnabledTabsCount:function(){var b=0;c.each(this._titleList,function(){this.disabled||b++});return b},getDisabledTabsCount:function(){var b=
0;c.each(this._titleList,function(){this.disabled&&b++});return b},removeAt:function(b){if(this._isValidIndex(b)&&(this.canCloseAllTabs||1<this.length())){this._removeHoverStates();var d=this,e=d._outerWidth(this._titleList[b],!0),g=this.getTitleAt(b);this._unorderedList.style.width=d._toPx(d._width(this._unorderedList)-e);c(this._titleList[b]).remove();c(this._contentList[b]).remove();this._titleList.splice(b,1);this._contentList.splice(b,1);d._closeButtonList.splice(b,1);this._addStyles();this._performHeaderLayout();
this._removeEventHandlers();this._addEventHandlers();this._raiseEvent(3,{item:b,title:g});this._isAnimated={};0<this.selectedItem?(this._selectedItem=-1,this.selectedItem>=b?(b=this._getPreviousIndex(this.selectedItem),this.select(b)):this.select(d.selectedItem)):(this._selectedItem=-1,b=this._getNextIndex(this.selectedItem),this.select(b));parseInt(this._unorderedListHelper.css("left"),10)>this._getArrowsDisplacement()&&(this._unorderedList.style.left=d._toPx(this._getArrowsDisplacement()));d._width(this._unorderedList)<=
d._width(this._headerWrapper)&&(b=this.enableScrollAnimation?this.scrollAnimationDuration:0,this._lockAnimation("unorderedList"),this._unorderedListHelper.animate({left:0},b,function(){d._unlockAnimation("unorderedList")}))}},removeFirst:function(){this.removeAt(0)},removeLast:function(){this.removeAt(this.length()-1)},disableAt:function(b){var d=this._titleList[b];d.disabled&&void 0!==d.disabled||(this.selectedItem===b&&(this.next()||this.previous()),d.disabled=!0,this.removeHandler(d,this.toggleMode),
this.enabledHover&&c(d).off("mouseenter").off("mouseleave"),this._removeEventListenerAt(b),d.className+=" "+this.toThemeProperty("jqx-tabs-title-disable jqx-fill-state-disabled"),this._raiseEvent(5,{item:b}))},enableAt:function(b){var d=this._titleList[b];d.disabled&&(d.disabled=!1,this._addEventListenerAt(b),this._removeClass(d,this.toThemeProperty("jqx-tabs-title-disable jqx-fill-state-disabled")),this._raiseEvent(4,{item:b}))},addAt:function(b,d,e){if(0<=b&&b<=this.length()){this._removeHoverStates();
var c=document.createElement("li");c.innerHTML=d;c.className=this.toThemeProperty("jqx-tabs-title jqx-item");d=document.createElement("div");d.innerHTML=e;d.className=this.toThemeProperty("jqx-tabs-content-element");"bottom"===this.position&&(c.className+=" "+this.toThemeProperty("jqx-tabs-title-bottom"));0===this._titleList.length?this._unorderedList.appendChild(c):b<this.length()&&0<=b?this._unorderedList.insertBefore(c,this._titleList[b]):this._unorderedList.appendChild(c);this._contentWrapper.appendChild(d);
this._addItemTo(this._titleList,b,c);this._addItemTo(this._contentList,b,d);this._addCloseButton(b);this._selectedItem>b&&this._selectedItem++;this._switchTabs(b,this._selectedItem);this._selectedItem=b;this._uiRefresh(!1);this._raiseEvent(2,{item:b});this._moveSelectionTrack(this._selectedItem,0)}},addFirst:function(b,d){this.addAt(0,b,d)},addLast:function(b,d){this.addAt(this.length(),b,d)},val:function(b){if(0===arguments.length||"object"===typeof b)return this._selectedItem;this.select(b);return this._selectedItem},
select:function(b){"object"===typeof b&&(b=this._indexOf(b));var d=0<=b&&b<this._titleList.length?this._titleList[b].getAttribute("canselect"):!0;(void 0===d||null===d||"true"===d||!0===d)&&b!==this._selectedItem&&this._isValidIndex(b)&&(this._activeAnimation()||this._titleList[b].disabled||this._switchTabs(b,this._selectedItem)&&this.ensureVisible(b))},previous:function(b){var d=this._selectedItem;for(void 0===b||isNaN(b)||(d=b);0<d&&d<this._titleList.length;)if(d--,!this._titleList[d].disabled)return this.select(d),
!0;return!1},_getPreviousIndex:function(b){if(void 0===b||isNaN(b))return 0;for(var d=b;0<b&&b<=this._titleList.length;)if(b--,!this._titleList[b].disabled)return b;return d},_getNextIndex:function(b){if(void 0===b||isNaN(b))return 0;for(var d=b;0<=b&&b<this._titleList.length;){if(!this._titleList[b].disabled)return b;b++}return d},next:function(b){var d=this._selectedItem;for(void 0===b||isNaN(b)||(d=b);0<=d&&d<this._titleList.length-1;)if(d++,!this._titleList[d].disabled)return this.select(d),!0;
return!1},first:function(){this._titleList[0].disabled?this.next(0):this.select(0)},last:function(){var b=this._titleList.length-1;this._titleList[b].disabled?this.previous(b):this.select(b)},length:function(){return this._titleList.length},lockAt:function(b){!this._isValidIndex(b)||this._titleList[b].locked&&void 0!==this._titleList[b].locked||(this._titleList[b].locked=!0,this._raiseEvent(11,{item:b}))},unlockAt:function(b){this._isValidIndex(b)&&this._titleList[b].locked&&(this._titleList[b].locked=
!1,this._raiseEvent(12,{item:b}))},lockAll:function(){for(var b=this.length();b;)b--,this.lockAt(b)},unlockAll:function(){for(var b=this.length();b;)b--,this.unlockAt(b)},showCloseButtonAt:function(b){this._isValidIndex(b)&&(this.showCloseButtons||(this.showCloseButtons=!0,this.updatetabsheader()),this._closeButtonList[b].style.display="block",this.hiddenCloseButtons||(this.hiddenCloseButtons=[]),this.hiddenCloseButtons[b]=0)},hideCloseButtonAt:function(b){this._isValidIndex(b)&&(this._closeButtonList[b].style.display=
"none",this.hiddenCloseButtons||(this.hiddenCloseButtons=[]),this.hiddenCloseButtons[b]=1)},hideAllCloseButtons:function(){for(var b=this.length();b;)b--,this.hideCloseButtonAt(b)},showAllCloseButtons:function(){for(var b=this.length();b;)b--,this.showCloseButtonAt(b)},getTitleAt:function(b){return this._titleList[b]?c(this._titleList[b]).text():null},getContentAt:function(b){return this._contentList[b]?this._contentList[b]:null},setTitleAt:function(b,d){this._titleList[b]&&(c(this._titleList[b]).text(d),
this.showCloseButtons&&(this._addCloseButton(b),this._removeEventHandlers(),this._addEventHandlers()),this.render(),this.refresh())},setContentAt:function(b,d){this._contentList[b]&&c(this._contentList[b]).html(d)},ensureVisible:function(b){var d=this;if(void 0===b||-1===b||null===b)b=this.selectedItem;if(!this._isValidIndex(b))return!1;var e=this._titleList[b],g=parseInt(c(e).position().left,10)+parseInt(this._unorderedListHelper.css("margin-left"),10),f=parseInt(this._unorderedListHelper.css("left"),
10),h=this._outerWidth(this._headerWrapper,!0),e=this._outerWidth(e,!0),f=f-this._getArrowsDisplacement(),l=h-this._getArrowsDisplacement()-f;if(g<-f)g=-g+this._getArrowsDisplacement(),h=this._getArrowsDisplacement();else if(g+e>l-this._getArrowsDisplacement())g=-g+h-e-(this.scrollable?2*this.arrowButtonSize-this._getArrowsDisplacement():0),h=h-e-this._getArrowsDisplacement();else return this._moveSelectionTrack(b,this.selectionTrackerAnimationDuration),!0;this._lockAnimation("unorderedList");this._unorderedListHelper.animate({left:g},
this.scrollAnimationDuration,function(){d._unlockAnimation("unorderedList");d._moveSelectionTrack(d._selectedItem,0);return!0});this._moveSelectionTrack(b,this.selectionTrackerAnimationDuration,h);return!0},isVisibleAt:function(b){if(void 0===b||-1===b||null===b)b=this.selectedItem;if(!this._isValidIndex(b))return!1;var d=this._titleList[b];b=parseInt(c(d).position().left,10)+parseInt(this._unorderedListHelper.css("margin-left"),10);var e=parseInt(this._unorderedListHelper.css("left"),10),g=this._outerWidth(this._headerWrapper,
!0),d=this._outerWidth(d,!0),e=e-this._getArrowsDisplacement(),g=g-this._getArrowsDisplacement()-e;return b<-e?!1:b+d>g?!1:!0},isDisabled:function(b){return this._titleList[b].disabled},_lockAnimation:function(b){this._isAnimated&&(this._isAnimated[b]=!0)},_unlockAnimation:function(b){this._isAnimated&&(this._isAnimated[b]=!1)},propertiesChangedHandler:function(b,d,e){e&&e.width&&e.height&&2===Object.keys(e).length&&b._setSize()},propertyChangedHandler:function(b,d,e,g){if(!(b.batchUpdate&&b.batchUpdate.width&&
b.batchUpdate.height&&2===Object.keys(b.batchUpdate).length)){this._validateProperties();switch(d){case "touchMode":g&&(b.enabledHover=!1,b.keyboardNavigation=!1);break;case "width":case "height":b._setSize();return;case "disabled":g?this.disable():this.enable();return;case "showCloseButtons":g?this.showAllCloseButtons():this.hideAllCloseButtons();this._performHeaderLayout();return;case "selectedItem":this._isValidIndex(g)&&this.select(g);return;case "scrollStep":case "contentTransitionDuration":case "scrollAnimationDuration":case "enableScrollAnimation":return;
case "selectionTracker":g?(this._refresh(),this.select(this._selectedItem)):this._selectionTracker&&this._selectionTrackerHelper.remove();return;case "scrollable":g?(this._refresh(),this.select(this._selectedItem)):(c(this._leftArrow).remove(),c(this._rightArrow).remove(),this._performHeaderLayout());return;case "autoHeight":this._performHeaderLayout();return;case "theme":c.jqx.utilities.setTheme(e,g,this.host);return}this._unorderedList.style.left="0px";this._refresh();this.select(this._selectedItem);
this._addSelectStyle(this._selectedItem,!0)}},_toPx:function(b){return"number"===typeof b?b+"px":b},_removeClass:function(b,d){c(b).removeClass(d)},_width:function(b){var d=c(b),e=d.css("border-left-width"),g=d.css("border-right-width"),f=parseInt(d.css("padding-left"),10),d=parseInt(d.css("padding-right"),10),e=-1===e.indexOf("px")?1:parseInt(e,10),g=-1===g.indexOf("px")?1:parseInt(g,10);return b.offsetWidth-(e+g+f+d)},_outerWidth:function(b,d){var e=b.offsetWidth;if(d)var g=c(b),f=parseInt(g.css("margin-left"),
10),g=parseInt(g.css("margin-right"),10),e=e+(f+g);return e},_height:function(b){var d=c(b),e=d.css("border-top-width"),g=d.css("border-bottom-width"),f=parseInt(d.css("padding-top"),10),d=parseInt(d.css("padding-bottom"),10),e=-1===e.indexOf("px")?1:parseInt(e,10),g=-1===g.indexOf("px")?1:parseInt(g,10);return b.offsetHeight-(e+g+f+d)},_outerHeight:function(b,d){var e=b.offsetHeight;if(d)var g=c(b),f=parseInt(g.css("margin-top"),10),g=parseInt(g.css("margin-bottom"),10),e=e+(f+g);return e},_stop:function(b){b.stop?
b.stop():b.animate("stop",!0)}})})(jqxBaseFramework);
(function(c){function b(b){b=c(b);return"none"!==b.css("display")&&"hidden"!==b.css("visibility")}c.jqx.jqxWidget("jqxWindow","",{});c.extend(c.jqx._jqxWindow.prototype,{defineInstance:function(){var b={height:"auto",width:200,minHeight:50,maxHeight:1200,minWidth:50,maxWidth:1200,showCloseButton:!0,disabled:!1,autoOpen:!0,keyboardCloseKey:"esc",title:"",content:"",draggable:!0,resizable:!0,animationType:"fade",closeAnimationDuration:250,showAnimationDuration:250,isModal:!1,position:"center",closeButtonSize:16,
closeButtonAction:"hide",modalOpacity:.3,dragArea:null,okButton:null,cancelButton:null,dialogResult:{OK:!1,Cancel:!1,None:!0},collapsed:!1,showCollapseButton:!1,collapseAnimationDuration:150,collapseButtonSize:16,rtl:!1,keyboardNavigation:!0,headerHeight:null,_events:"created closed moving moved open collapse expand open close resize".split(" "),initContent:null,enableResize:!0,restricter:null,autoFocus:!0,closing:null,_invalidArgumentExceptions:{invalidHeight:"Invalid height!",invalidWidth:"Invalid width!",
invalidMinHeight:"Invalid minHeight!",invalidMaxHeight:"Invalid maxHeight!",invalidMinWidth:"Invalid minWidth!",invalidMaxWidth:"Invalid maxWidth",invalidKeyCode:"Invalid keyCode!",invalidAnimationType:"Invalid animationType!",invalidCloseAnimationDuration:"Invalid closeAnimationDuration!",invalidShowAnimationDuration:"Invalid showAnimationDuration!",invalidPosition:"Invalid position!",invalidCloseButtonSize:"Invalid closeButtonSize!",invalidCollapseButtonSize:"Invalid collapseButtonSize!",invalidCloseButtonAction:"Invalid cluseButtonAction!",
invalidModalOpacity:"Invalid modalOpacity!",invalidDragArea:"Invalid dragArea!",invalidDialogResult:"Invalid dialogResult!",invalidIsModal:"You can have just one modal window!"},_enableResizeCollapseBackup:null,_enableResizeBackup:void 0,_heightBeforeCollapse:null,_minHeightBeforeCollapse:null,_mouseDown:!1,_isDragging:!1,_rightContentWrapper:null,_leftContentWrapper:null,_headerContentWrapper:null,_closeButton:null,_collapseButton:null,_title:null,_content:null,_mousePosition:{},_windowPosition:{},
_modalBackground:null,_SCROLL_WIDTH:21,_visible:!0,modalBackgroundZIndex:1299,modalZIndex:1800,zIndex:1E3,_touchEvents:{mousedown:c.jqx.mobile.getTouchEventName("touchstart"),mouseup:c.jqx.mobile.getTouchEventName("touchend"),mousemove:c.jqx.mobile.getTouchEventName("touchmove"),mouseenter:"mouseenter",mouseleave:"mouseleave",click:c.jqx.mobile.getTouchEventName("touchstart")}};if(this===c.jqx._jqxWindow.prototype)return b;c.extend(!0,this,b);return b},createInstance:function(){this.host.initAnimate&&
this.host.initAnimate();this.host.attr("role","dialog");this.host.removeAttr("data-bind");this.host.appendTo(document.body);var b=this;(function(e){for(var c=0;c<e.length;c++){var h=e[c];b[h]&&0<=b[h].toString().indexOf("px")&&(b[h]=parseInt(b[h],10))}})("minWidth minHeight maxWidth maxHeight width height".split(" "));var e=function(){var e=parseInt(c(b.restricter).css("padding-top"),10),f=parseInt(c(b.restricter).css("padding-left"),10),h=parseInt(c(b.restricter).css("padding-bottom"),10),l=parseInt(c(b.restricter).css("padding-right"),
10),q=c(b.restricter).coord();b.dragArea={left:f+q.left,top:e+q.top,width:1+l+c(b.restricter).width(),height:1+h+c(b.restricter).height()}};this.restricter&&e();this.restricter&&(this.addHandler(c(window),"resize."+this.element.id,function(){e()}),this.addHandler(c(window),"orientationchanged."+this.element.id,function(){e()}),this.addHandler(c(window),"orientationchange."+this.element.id,function(){e()}));this._isTouchDevice=c.jqx.mobile.isTouchDevice();this._validateProperties();this._createStructure();
this._refresh();this.autoOpen||(this.element.style.display="none");c.jqx.browser.msie&&this.host.addClass(this.toThemeProperty("jqx-noshadow"));this.isModal||this._fixWindowZIndex();this._setStartupSettings();this._positionWindow();this._raiseEvent(0);this.autoOpen&&(this._performLayout(),this.isModal&&this._fixWindowZIndex("modal-show"),this.initContent&&(this.initContent(),this._contentInitialized=!0),this._raiseEvent(7),this._raiseEvent(9))},refresh:function(){this._performLayout()},_setStartupSettings:function(){this.disabled&&
this.disable();this.collapsed&&(this.collapsed=!1,this.collapse(0));this.autoOpen||(this.hide(null,.001,!0),this._visible=!1);null!==this.title&&""!==this.title&&this.setTitle(this.title);null!==this.content&&""!==this.content&&this.setContent(this.content);this.title=this._headerContentWrapper.html();this.content=this._content.html()},_fixWindowZIndex:function(b){var e=c.data(document.body,"jqxwindows-list")||[],g=this.zIndex;if(this.isModal)e&&(e=this._removeFromArray(this.host,e),c.data(document.body,
"jqxwindows-list",e)),(e=c.data(document.body,"jqxwindows-modallist"))?"modal-show"==b?e.push(this.host):(b=e.indexOf(this.host),-1!=b&&e.splice(b,1)):"modal-show"==b?(e=[],e.push(this.host),c.data(document.body,"jqxwindows-modallist",e)):(c.data(document.body,"jqxwindows-modallist",[]),e=[]),g=this.modalZIndex,c.each(e,function(){if(this.data()&&this.data().jqxWindow){var b=this.data().jqxWindow.instance;b._modalBackground.style.zIndex=g;b.element.style.zIndex=g+1;g+=2}}),c.data(document.body,"jqxwindow-modal",
this.host);else{0>this._indexOf(this.host,e)&&e.push(this.host);c.data(document.body,"jqxwindows-list",e);if(1<e.length)if(b=e[e.length-2],"auto"==b.css("z-index"))g=this.zIndex+e.length+1;else{var f=this.zIndex,g=parseInt(b.css("z-index"),10)+1;g<f&&(g=f)}this.element.style.zIndex=g;this._sortByStyle("z-index",e)}},_validateProperties:function(){try{this._validateSize();this._validateAnimationProperties();this._validateInteractionProperties();this._validateModalProperties();if(!this.position)throw Error(this._invalidArgumentExceptions.invalidPosition);
if(isNaN(this.closeButtonSize)||0>parseInt(this.closeButtonSize,10))throw Error(this._invalidArgumentExceptions.invalidCloseButtonSize);if(isNaN(this.collapseButtonSize)||0>parseInt(this.collapseButtonSize,10))throw Error(this._invalidArgumentExceptions.invalidCollapseButtonSize);}catch(b){throw Error(b);}},_validateModalProperties:function(){if(0>this.modalOpacity||1<this.modalOpacity)throw Error(this._invalidArgumentExceptions.invalidModalOpacity);if(this.isModal&&!this._singleModalCheck())throw Error(this._invalidArgumentExceptions.invalidIsModal);
},_validateSize:function(){this._validateSizeLimits();if("auto"!==this.height&&isNaN(parseInt(this.height,10)))throw Error(this._invalidArgumentExceptions.invalidHeight);if("auto"!==this.width&&isNaN(parseInt(this.width,10)))throw Error(this._invalidArgumentExceptions.invalidWidth);"auto"!==this.height&&this.height<this.minHeight&&(this.height=this.minHeight);this.width<this.minWidth&&(this.width=this.minWidth);"auto"!==this.height&&this.height>this.maxHeight&&(this.height=this.maxHeight);this.width>
this.maxWidth&&(this.width=this.maxWidth);null!==this.dragArea&&this.dragArea&&(null!==this.dragArea.height&&this.host.height()>this.dragArea.height||parseInt(this.height,10))},_validateSizeLimits:function(){null==this.maxHeight&&(this.maxHeight=9999);null==this.minWidth&&(this.minWidth=0);null==this.maxWidth&&(this.maxWidth=9999);null==this.minHeight&&(this.minHeight=0);if(isNaN(parseInt(this.minHeight,10)))throw Error(this._invalidArgumentExceptions.invalidMinHeight);if(isNaN(parseInt(this.maxHeight,
10)))throw Error(this._invalidArgumentExceptions.invalidMaxHeight);if(isNaN(parseInt(this.minWidth,10)))throw Error(this._invalidArgumentExceptions.invalidMinWidth);if(isNaN(parseInt(this.maxWidth,10)))throw Error(this._invalidArgumentExceptions.invalidMaxWidth);if(this.minHeight&&this.maxHeight&&parseInt(this.minHeight,10)>parseInt(this.maxHeight,10)&&this.maxHeight!=Number.MAX_VALUE)throw Error(this._invalidArgumentExceptions.invalidMinHeight);if(this.minWidth&&this.maxWidth&&parseInt(this.minWidth,
10)>parseInt(this.maxWidth,10)&&this.maxWidth!=Number.MAX_VALUE)throw Error(this._invalidArgumentExceptions.invalidMinWidth);},_validateAnimationProperties:function(){if("fade"!==this.animationType&&"slide"!==this.animationType&&"combined"!==this.animationType&&"none"!==this.animationType)throw Error(this._invalidArgumentExceptions.invalidAnimationType);if(isNaN(parseInt(this.closeAnimationDuration,10))||0>this.closeAnimationDuration)throw Error(this._invalidArgumentExceptions.invalidCloseAnimationDuration);
if(isNaN(parseInt(this.showAnimationDuration,10))||0>this.showAnimationDuration)throw Error(this._invalidArgumentExceptions.invalidShowAnimationDuration);},_validateInteractionProperties:function(){if(0>parseInt(this.keyCode,10)||130<parseInt(this.keyCode,10)&&"esc"!==this.keyCode)throw Error(this._invalidArgumentExceptions.invalidKeyCode);if(null!==this.dragArea&&("undefined"===typeof this.dragArea.width||"undefined"===typeof this.dragArea.height||"undefined"===typeof this.dragArea.left||"undefined"===
typeof this.dragArea.top))throw Error(this._invalidArgumentExceptions.invalidDragArea);if(!this.dialogResult||!this.dialogResult.OK&&!this.dialogResult.Cancel&&!this.dialogResult.None)throw Error(this._invalidArgumentExceptions.invalidDialogResult);if("hide"!==this.closeButtonAction&&"close"!==this.closeButtonAction)throw Error(this._invalidArgumentExceptions.invalidCloseButtonAction);},_singleModalCheck:function(){for(var b=c.data(document.body,"jqxwindows-list")||[],e=b.length;e;)if(--e,0<c(b[e].attr("id")).length&&
c(b[e].attr("id")).jqxWindow("isModal"))return!1;return!0},_createStructure:function(){var b=this.host.children();if(1===b.length)this._content=b[0],this._header=document.createElement("div"),this._header.innerHTML=this.host.attr("caption"),this.element.insertBefore(this._header,this._content),this.host.attr("caption",""),this._header=c(this._header),this._content=c(this._content);else if(2===b.length)this._header=c(b[0]),this._content=c(b[1]);else throw Error("Invalid structure!");},_refresh:function(){this._render();
this._addStyles();this._performLayout();this._removeEventHandlers();this._addEventHandlers();this._initializeResize()},_render:function(){this._addHeaderWrapper();this._addCloseButton();this._addCollapseButton();this._removeModal();this._makeModal()},_addHeaderWrapper:function(){this._headerContentWrapper||(this._header[0].innerHTML='<div style="float:left;">'+this._header[0].innerHTML+"</div>",this._headerContentWrapper=c(this._header.children()[0]),null!==this.headerHeight&&this._header.height(this.headerHeight))},
_addCloseButton:function(){this._closeButton||(this._closeButtonWrapper=document.createElement("div"),this._closeButtonWrapper.className=this.toThemeProperty("jqx-window-close-button-background"),this._closeButton=document.createElement("div"),this._closeButton.className=this.toThemeProperty("jqx-window-close-button jqx-icon-close"),this._closeButton.style.width="100%",this._closeButton.style.height="100%",this._closeButtonWrapper.appendChild(this._closeButton),this._header[0].appendChild(this._closeButtonWrapper),
this._closeButtonWrapper=c(this._closeButtonWrapper),this._closeButton=c(this._closeButton))},_addCollapseButton:function(){this._collapseButton||(this._collapseButtonWrapper=document.createElement("div"),this._collapseButtonWrapper.className=this.toThemeProperty("jqx-window-collapse-button-background"),this._collapseButton=document.createElement("div"),this._collapseButton.className=this.toThemeProperty("jqx-window-collapse-button jqx-icon-arrow-up"),this._collapseButton.style.width="100%",this._collapseButton.style.height=
"100%",this._collapseButtonWrapper.appendChild(this._collapseButton),this._header[0].appendChild(this._collapseButtonWrapper),this._collapseButtonWrapper=c(this._collapseButtonWrapper),this._collapseButton=c(this._collapseButton))},_removeModal:function(){this.isModal||"object"!==typeof this._modalBackground||null===this._modalBackground||(c("."+this.toThemeProperty("jqx-window-modal")).remove(),this._modalBackground=null)},focus:function(){try{this.host.focus();var b=this;setTimeout(function(){b.host.focus()},
10)}catch(e){}},_makeModal:function(){if(this.isModal&&!this._modalBackground){var b=c.data(document.body,"jqxwindows-list");b&&(this._removeFromArray(this.host,b),c.data(document.body,"jqxwindows-list",b));this._modalBackground=document.createElement("div");this._modalBackground.className=this.toThemeProperty("jqx-window-modal");this._setModalBackgroundStyles();document.body.appendChild(this._modalBackground);this.addHandler(this._modalBackground,this._getEvent("click"),function(){return!1});var e=
this;this.addHandler(this._modalBackground,"mouseup",function(b){e._stopResizing(e);b.preventDefault()});this.addHandler(this._modalBackground,"mousedown",function(b){var d=e._getTabbables();0<d.length&&(d[0].focus(1),setTimeout(function(){d[0].focus(1)},100));b.preventDefault();return!1});this.addHandler(c(document),"keydown.window"+this.element.id,function(b){if(9===b.keyCode){var d=c.data(document.body,"jqxwindows-modallist");if(!(1<d.length&&d[d.length-1][0]!=e.element)){var d=e._getTabbables(),
h=null,l=null;if(0!==e.element.offsetWidth&&0!==e.element.offsetHeight&&(0<d.length&&(h=d[0],l=d[d.length-1]),b.target!=e.element&&null!=h)){if(!e.element.contains(b.target)||b.target===l&&!b.shiftKey)return h.focus(1),!1;if(b.target===h&&b.shiftKey)return l.focus(1),!1}}}})}},_addStyles:function(){this.host.addClass(this.toThemeProperty("jqx-rc-all"));this.host.addClass(this.toThemeProperty("jqx-window"));this.host.addClass(this.toThemeProperty("jqx-popup"));c.jqx.browser.msie&&this.host.addClass(this.toThemeProperty("jqx-noshadow"));
this.host.addClass(this.toThemeProperty("jqx-widget"));this.host.addClass(this.toThemeProperty("jqx-widget-content"));this._header.addClass(this.toThemeProperty("jqx-window-header"));this._content.addClass(this.toThemeProperty("jqx-window-content"));this._header.addClass(this.toThemeProperty("jqx-widget-header"));this._content.addClass(this.toThemeProperty("jqx-widget-content"));this._header.addClass(this.toThemeProperty("jqx-disableselect"));this._header.addClass(this.toThemeProperty("jqx-rc-t"));
this._content.addClass(this.toThemeProperty("jqx-rc-b"));this.host.attr("tabindex")||(this.element.tabIndex=0,this._header[0].tabIndex=0,this._content[0].tabIndex=0);this.element.setAttribute("hideFocus","true");this.element.style.outline="none"},_performHeaderLayout:function(){this._handleHeaderButtons();this._header[0].style.position="relative";this.rtl?(this._headerContentWrapper[0].style.direction="rtl",this._headerContentWrapper[0].style["float"]="right"):(this._headerContentWrapper[0].style.direction=
"ltr",this._headerContentWrapper[0].style["float"]="left");this._performHeaderCloseButtonLayout();this._performHeaderCollapseButtonLayout();this._centerElement(this._headerContentWrapper,this._header,"y","margin");this.headerHeight&&(this._centerElement(this._closeButtonWrapper,this._header,"y","margin"),this._centerElement(this._collapseButtonWrapper,this._header,"y","margin"))},_handleHeaderButtons:function(){if(this._closeButtonWrapper){if(this.showCloseButton){this._closeButtonWrapper[0].style.visibility=
"visible";var b=this._toPx(this.closeButtonSize);this._closeButtonWrapper[0].style.width=b;this._closeButtonWrapper[0].style.height=b}else this._closeButtonWrapper[0].style.visibility="hidden";this.showCollapseButton?(this._collapseButtonWrapper[0].style.visibility="visible",b=this._toPx(this.collapseButtonSize),this._collapseButtonWrapper[0].style.width=b,this._collapseButtonWrapper[0].style.height=b):this._collapseButtonWrapper[0].style.visibility="hidden"}},_performHeaderCloseButtonLayout:function(){if(this._closeButtonWrapper){var b=
parseInt(this._header.css("padding-right"),10);isNaN(b)||(this._closeButtonWrapper.width(this._closeButton.width()),this.rtl?(this._closeButtonWrapper[0].style.marginRight="0px",this._closeButtonWrapper[0].style.marginLeft=this._toPx(b)):(this._closeButtonWrapper[0].style.marginRight=this._toPx(b),this._closeButtonWrapper[0].style.marginLeft="0px"));this._closeButtonWrapper[0].style.position="absolute";this.rtl?(this._closeButtonWrapper[0].style.right="",this._closeButtonWrapper[0].style.left="0px"):
(this._closeButtonWrapper[0].style.right="0px",this._closeButtonWrapper[0].style.left="")}},_performHeaderCollapseButtonLayout:function(){if(this._closeButtonWrapper){var b=parseInt(this._header.css("padding-right"),10);if(!isNaN(b)){var e=this._toPx(this.collapseButtonSize);this._collapseButtonWrapper[0].style.width=e;this._collapseButtonWrapper[0].style.height=e;this.rtl?(this._collapseButtonWrapper[0].style.marginRight="0px",this._collapseButtonWrapper[0].style.marginLeft=this._toPx(b)):(this._collapseButtonWrapper[0].style.marginRight=
this._toPx(b),this._collapseButtonWrapper[0].style.marginLeft="0px")}this._collapseButtonWrapper[0].style.position="absolute";b=this._toPx(this.showCloseButton?this._closeButton.outerWidth(!0):0);this.rtl?(this._collapseButtonWrapper[0].style.right="",this._collapseButtonWrapper[0].style.left=b):(this._collapseButtonWrapper[0].style.right=b,this._collapseButtonWrapper[0].style.left="");this._centerElement(this._collapseButton,c(this._collapseButton[0].parentElement),"y")}},_performWidgetLayout:function(){var b;
"auto"!==this.width&&(this.width&&0<=this.width.toString().indexOf("%")?this.element.style.width=this.width:this.element.style.width=this._toPx(this.width));this.collapsed||("auto"!==this.height?this.height&&0<=this.height.toString().indexOf("%")?this.element.style.height=this.height:this.element.style.height=this._toPx(this.height):this.element.style.height=this.host.height()+"px",this.element.style.minHeight=this._toPx(this.minHeight));this._setChildrenLayout();b=this._validateMinSize();this.element.style.maxHeight=
this._toPx(this.maxHeight);this.element.style.minWidth=this._toPx(this.minWidth);this.element.style.maxWidth=this._toPx(this.maxWidth);b||this._setChildrenLayout()},_setChildrenLayout:function(){this._header.width(this.host.width()-(this._header.outerWidth(!0)-this._header.width()));this._content.width(this.host.width()-(this._content.outerWidth(!0)-this._content.width()));this._content.height(this.host.height()-this._header.outerHeight(!0)-(this._content.outerHeight(!0)-this._content.height()))},
_validateMinSize:function(){var b=!0;this.minHeight<this._header.height()&&(this.minHeight=this._header.height(),b=!1);var e=c(this._header.children()[0]).outerWidth(),g=this._header.children()[1]?c(this._header.children()[1]).outerWidth():0;100>this.minWidth&&(this.minWidth=Math.min(e+g,100),b=!1);return b},_centerElement:function(b,e,c,f){"number"===typeof e.left&&"number"===typeof e.top&&"number"===typeof e.height&&"number"===typeof e.width?this._centerElementInArea(b,e,c):this._centerElementInParent(b,
e,c,f)},_centerElementInParent:function(b,e,c,f){var h="none"===b.css("display"),l;c=c.toLowerCase();f?(l=f+"Top",f+="Left"):(l="top",f="left");if(0<=c.indexOf("y")){h&&(b[0].style.display="block");var q=b.outerHeight(!0),r;h&&(b[0].style.display="none");r=e.height();b[0].style[l]=Math.max(0,r-q)/2+"px"}0<=c.indexOf("x")&&(h&&(b[0].style.display="block"),c=b.outerWidth(!0),h&&(b[0].style.display="none"),e=e.width(),b[0].style[f]=Math.max(0,e-c)/2+"px")},_centerElementInArea:function(b,e,c){c=c.toLowerCase();
if(0<=c.indexOf("y")){var f=b.outerHeight(!0);b[0].style.top=(e.height-f)/2+e.top+"px"}0<=c.indexOf("x")&&(c=b.outerWidth(!0),b[0].style.left=(e.width-c)/2+e.left+"px")},_removeEventHandlers:function(){this.removeHandler(this._header,this._getEvent("mousedown"));this.removeHandler(this._header,this._getEvent("mousemove"));this.removeHandler(this._header,"focus");this.removeHandler(c(document),this._getEvent("mousemove")+"."+this.host.attr("id"));this.removeHandler(c(document),this._getEvent("mouseup")+
"."+this.host.attr("id"));this.removeHandler(this.host,"keydown");this.removeHandler(this._closeButton,this._getEvent("click"));this.removeHandler(this._closeButton,this._getEvent("mouseenter"));this.removeHandler(this._closeButton,this._getEvent("mouseleave"));this.removeHandler(this._collapseButton,this._getEvent("click"));this.removeHandler(this._collapseButton,this._getEvent("mouseenter"));this.removeHandler(this._collapseButton,this._getEvent("mouseleave"));this.removeHandler(this.host,this._getEvent("mousedown"));
this.okButton&&this.removeHandler(c(this.okButton),this._getEvent("click"),this._setDialogResultHandler);this.cancelButton&&this.removeHandler(c(this.cancelButton),this._getEvent("click"),this._setDialogResultHandler);this.removeHandler(this._header,this._getEvent("mouseenter"));this.removeHandler(this._header,this._getEvent("mouseleave"));this.removeHandler(this.host,"resizing",this._windowResizeHandler)},_removeFromArray:function(b,e){return 0<=this._indexOf(b,e)?e.splice(this._indexOf(b,e),1):
e},_sortByStyle:function(b,e){for(var c=0;c<e.length;c++)for(var f=e.length-1;f>c;f--){var h=e[f],l=e[f-1];parseInt(h.css(b),10)<parseInt(l.css(b),10)&&(e[f]=l,e[f-1]=h)}},_initializeResize:function(){this.resizable&&this.initResize({target:this.host,alsoResize:this._content,maxWidth:this.maxWidth,minWidth:this.minWidth,maxHeight:this.maxHeight,minHeight:this.minHeight,indicatorSize:10,resizeParent:this.dragArea})},_removeResize:function(){this.removeResize()},_getEvent:function(b){return this._isTouchDevice?
this._touchEvents[b]:b},_addEventHandlers:function(){this._addDragDropHandlers();this._addCloseHandlers();this._addCollapseHandlers();this._addFocusHandlers();this._documentResizeHandlers();this._closeButtonHover();this._collapseButtonHover();this._addDialogButtonsHandlers();this._addHeaderHoverEffect();this._addResizeHandlers();var b=this;this.addHandler(this._header,this._getEvent("mousemove"),function(){b._addHeaderCursorHandlers(b)})},_addResizeHandlers:function(){var b=this;b.addHandler(b.host,
"resizing",b._windowResizeHandler,{self:b});this.addHandler(c(window),"orientationchanged."+this.element.id,function(){b._performLayout()});this.addHandler(c(window),"orientationchange."+this.element.id,function(){b._performLayout()})},_windowResizeHandler:function(b){var e=b.data.self;e._header.width(e.host.width()-(e._header.outerWidth(!0)-e._header.width()));if(e.width&&0<=e.width.toString().indexOf("%")){var g=c(document.body).width()/100;e.width=1/g*b.args.width+"%"}else e.width=b.args.width;
e.height&&0<=e.height.toString().indexOf("%")?(g=c(document.body).height()/100,e.height=1/g*b.args.height+"%"):e.height=b.args.height},_addHeaderHoverEffect:function(){var b=this;this.addHandler(this._header,this._getEvent("mouseenter"),function(){c(this).addClass(b.toThemeProperty("jqx-window-header-hover"))});this.addHandler(this._header,this._getEvent("mouseleave"),function(){c(this).removeClass(b.toThemeProperty("jqx-window-header-hover"))})},_addDialogButtonsHandlers:function(){this.okButton&&
this.addHandler(c(this.okButton),this._getEvent("click"),this._setDialogResultHandler,{self:this,result:"ok"});this.cancelButton&&this.addHandler(c(this.cancelButton),this._getEvent("click"),this._setDialogResultHandler,{self:this,result:"cancel"})},_documentResizeHandlers:function(){var b=this;this.isModal&&this.addHandler(c(window),"resize.window"+this.element.id,function(){if("object"===typeof b._modalBackground&&null!==b._modalBackground){b.isOpen()&&(b._modalBackground.style.display="none");
if(b.restricter)b._modalBackground.style.left=b._toPx(b.dragArea.left),b._modalBackground.style.top=b._toPx(b.dragArea.top),b._modalBackground.style.width=b._toPx(b.dragArea.width),b._modalBackground.style.height=b._toPx(b.dragArea.height);else{var e=b._getDocumentSize();b._modalBackground.style.width=e.width+"px";b._modalBackground.style.height=e.height+"px"}b.isOpen()&&(b._modalBackground.style.display="block")}})},_setDialogResultHandler:function(b){var e=b.data.self;e._setDialogResult(b.data.result);
e.closeWindow()},_setDialogResult:function(b){this.dialogResult.OK=!1;this.dialogResult.None=!1;this.dialogResult.Cancel=!1;b=b.toLowerCase();switch(b){case "ok":this.dialogResult.OK=!0;break;case "cancel":this.dialogResult.Cancel=!0;break;default:this.dialogResult.None=!0}},_getDocumentSize:function(){var b=c.jqx.browser.msie&&9>c.jqx.browser.version,e=b?4:0,g=e;document.body.scrollHeight>document.body.clientHeight&&b&&(e=this._SCROLL_WIDTH);document.body.scrollWidth>document.body.clientWidth&&b&&
(g=this._SCROLL_WIDTH);return{width:c(document).width()-e,height:c(document).height()-g}},_closeButtonHover:function(){var b=this;this.addHandler(this._closeButton,this._getEvent("mouseenter"),function(){b._closeButton.addClass(b.toThemeProperty("jqx-window-close-button-hover"))});this.addHandler(this._closeButton,this._getEvent("mouseleave"),function(){b._closeButton.removeClass(b.toThemeProperty("jqx-window-close-button-hover"))})},_collapseButtonHover:function(){var b=this;this.addHandler(this._collapseButton,
this._getEvent("mouseenter"),function(){b._collapseButton.addClass(b.toThemeProperty("jqx-window-collapse-button-hover"))});this.addHandler(this._collapseButton,this._getEvent("mouseleave"),function(){b._collapseButton.removeClass(b.toThemeProperty("jqx-window-collapse-button-hover"))})},_setModalBackgroundStyles:function(){if(this.isModal){var b=this._getDocumentSize();c.jqx.browser.msie&&9>c.jqx.browser.version?this._modalBackground.style.filter="alpha(opacity="+100*this.modalOpacity+")":this._modalBackground.style.opacity=
this.modalOpacity;this._modalBackground.style.position="absolute";this._modalBackground.style.top="0px";this._modalBackground.style.left="0px";this._modalBackground.style.width=b.width;this._modalBackground.style.height=b.height;this._modalBackground.style.zIndex=this.modalBackgroundZIndex;this.autoOpen||(this._modalBackground.style.display="none")}},_addFocusHandlers:function(){var b=this;this.addHandler(this.host,this._getEvent("mousedown"),function(){b.isModal||b.bringToFront()})},_indexOf:function(b,
e){for(var c=0;c<e.length;c++)if(e[c][0]===b[0])return c;return-1},_addCloseHandlers:function(){var b=this;this.addHandler(this._closeButton,this._getEvent("click"),function(e){return b._closeWindow(e)});"none"!==this.keyboardCloseKey&&"number"!==typeof this.keyboardCloseKey&&"esc"===this.keyboardCloseKey.toLowerCase()&&(this.keyboardCloseKey=27);this.addHandler(this.host,"keydown",function(e){e.keyCode===b.keyboardCloseKey&&null!=b.keyboardCloseKey&&"none"!=b.keyboardCloseKey?b._closeWindow(e):b._handleKeys(e)},
{self:this});this.addHandler(this.host,"keyup",function(){if(b.keyboardNavigation&&b._moved){var e=b.host.coord(),c=e.left,e=e.top;b._raiseEvent(3,c,e,c,e);b._moved=!1}})},_handleKeys:function(b){if(this.keyboardNavigation&&this._headerFocused&&!c(document.activeElement).ischildof(this._content)){var e=b.ctrlKey,g=b.keyCode,f=this.host.coord(),h=f.left,f=f.top,l=this._getDraggingArea(),q=this.host.width(),r=this.host.height(),t=!0;switch(g){case 37:e?this.resizable&&this.resize(q-10,r):this.draggable&&
0<=h-10&&this.move(h-10,f);t=!1;break;case 38:e?this.resizable&&this.resize(q,r-10):this.draggable&&0<=f-10&&this.move(h,f-10);t=!1;break;case 39:e?this.resizable&&this.resize(q+10,r):this.draggable&&h+q+10<=l.width&&this.move(h+10,f);t=!1;break;case 40:e?this.resizable&&this.resize(q,r+10):this.draggable&&f+r+10<=l.height&&this.move(h,f+10),t=!1}t||(b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation());return t}},_addCollapseHandlers:function(){var b=this;this.addHandler(this._collapseButton,
this._getEvent("click"),function(){b.collapsed?b.expand():b.collapse()})},_closeWindow:function(){this.closeWindow();return!1},_addHeaderCursorHandlers:function(b){b.resizeArea&&b.resizable&&!b.collapsed?b._header[0].style.cursor=b._resizeWrapper.style.cursor:b.draggable?b._header[0].style.cursor="move":(b._header[0].style.cursor="default",b._resizeWrapper&&(b._resizeWrapper.style.cursor="default"))},_addDragDropHandlers:function(){if(this.draggable){var b=this;this.addHandler(this.host,"focus",function(){b._headerFocused=
!0});this.addHandler(this.host,"blur",function(){b._headerFocused=!1});this.addHandler(this._header,"focus",function(){b._headerFocused=!0;return!1});this.addHandler(this._header,this._getEvent("mousedown"),function(e,c,h){c&&(e.pageX=c);h&&(e.pageY=h);b._headerMouseDownHandler(b,e);return!0});this.addHandler(this._header,"dragstart",function(b){b.preventDefault&&b.preventDefault();return!1});this.addHandler(this._header,this._getEvent("mousemove"),function(e){return b._headerMouseMoveHandler(b,e)});
this.addHandler(c(document),this._getEvent("mousemove")+"."+this.host.attr("id"),function(e){return b._dragHandler(b,e)});this.addHandler(c(document),this._getEvent("mouseup")+"."+this.host.attr("id"),function(e){return b._dropHandler(b,e)});try{if(""!==document.referrer||window.frameElement){var e=null;null!=window.top&&window.top!=window.self&&window.parent&&document.referrer&&(e=document.referrer);e&&-1!=e.indexOf(document.location.host)&&(e=function(e){b._dropHandler(b,e)},window.top.document.addEventListener?
window.top.document.addEventListener("mouseup",e,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",e))}}catch(g){}}},_headerMouseDownHandler:function(b,e){b.isModal||b.bringToFront();if(null==b._resizeDirection){var g=c.jqx.position(e);b._mousePosition.x=g.left;b._mousePosition.y=g.top;b._mouseDown=!0;b._isDragging=!1}},_headerMouseMoveHandler:function(b,e){if(b._mouseDown&&!b._isDragging){c.jqx.mobile.getTouches(e);var g,f;f=c.jqx.position(e);g=f.left;f=f.top;if(g+
3<b._mousePosition.x||g-3>b._mousePosition.x||f+3<b._mousePosition.y||f-3>b._mousePosition.y)b._isDragging=!0,b._mousePosition={x:g,y:f},b._windowPosition={x:b.host.coord().left,y:b.host.coord().top},c(document.body).addClass(b.toThemeProperty("jqx-disableselect"));return b._isTouchDevice?(e.preventDefault(),!0):!1}return b._isDragging?b._isTouchDevice?(e.preventDefault(),!0):!1:!0},_dropHandler:function(b,e){var g=!0;if(b._isDragging&&!b.isResizing&&!b._resizeDirection){var g=parseInt(b.host.css("left"),
10),f=parseInt(b.host.css("top"),10),h=b._isTouchDevice?0:e.pageX,l=b._isTouchDevice?0:e.pageY;b.enableResize=b._enableResizeBackup;b._enableResizeBackup="undefined";b._raiseEvent(3,g,f,h,l);g=!1;"undefined"!=e.preventDefault&&e.preventDefault();null!=e.originalEvent&&(e.originalEvent.mouseHandled=!0);"undefined"!=e.stopPropagation&&e.stopPropagation()}b._isDragging=!1;b._mouseDown=!1;c(document.body).removeClass(b.toThemeProperty("jqx-disableselect"));return g},_dragHandler:function(b,e){if(b._isDragging&&
!b.isResizing&&!b._resizeDirection){var g=b._isTouchDevice?e.originalEvent.which:e.which;"undefined"===typeof b._enableResizeBackup&&(b._enableResizeBackup=b.enableResize);b.enableResize=!1;if(0===g&&c.jqx.browser.msie&&8>c.jqx.browser.version)return b._dropHandler(b,e);g=c.jqx.position(e);b.move(b._windowPosition.x+(g.left-b._mousePosition.x),b._windowPosition.y+(g.top-b._mousePosition.y),e);e.preventDefault();return!1}return!0},_validateCoordinates:function(b,e,c,f){var h=this._getDraggingArea();
b=b<h.left?h.left:b;e=e<h.top?h.top:e;var l=this.host.outerWidth(!0),q=this.host.outerHeight(!0);b+l>=h.width+h.left-2*f&&(b=h.width+h.left-l-f);e+q>=h.height+h.top-c&&(e=h.height+h.top-q-c);return{x:b,y:e}},_performLayout:function(){this._performHeaderLayout();this._performWidgetLayout()},_parseDragAreaAttributes:function(){null!==this.dragArea&&(this.dragArea.height=parseInt(this.dragArea.height,10),this.dragArea.width=parseInt(this.dragArea.width,10),this.dragArea.top=parseInt(this.dragArea.top,
10),this.dragArea.left=parseInt(this.dragArea.left,10))},_positionWindow:function(){this._parseDragAreaAttributes();if(this.position instanceof Array&&2===this.position.length&&"number"===typeof this.position[0]&&"number"===typeof this.position[1])this.element.style.left=this._toPx(this.position[0]),this.element.style.top=this._toPx(this.position[1]);else if(this.position instanceof Object)if(this.position.left)this.host.offset(this.position);else if(void 0!==this.position.x&&void 0!==this.position.y)this.element.style.left=
this._toPx(this.position.x),this.element.style.top=this._toPx(this.position.y);else{if(this.position.center){this._centerElement(this.host,this.position.center,"xy");var b=this.position.center.coord(),e=parseInt(this.host.css("left"),10),c=parseInt(this.host.css("top"),10);this.element.style.left=this._toPx(e+b.left);this.element.style.top=this._toPx(c+b.top)}}else this._positionFromLiteral()},_getDraggingArea:function(){var b={};b.left=this.dragArea&&this.dragArea.left?this.dragArea.left:0;b.top=
this.dragArea&&this.dragArea.top?this.dragArea.top:0;b.width=this.dragArea&&this.dragArea.width?this.dragArea.width:this._getDocumentSize().width;b.height=this.dragArea&&this.dragArea.height?this.dragArea.height:this._getDocumentSize().height;return b},_positionFromLiteral:function(){this.position instanceof Array||(this.position=this.position.split(","));for(var b=this.position.length,e=this._getDraggingArea();b;)switch(--b,this.position[b]=this.position[b].replace(/ /g,""),this.position[b]){case "top":this.element.style.top=
this._toPx(e.top);break;case "left":this.element.style.left=this._toPx(e.left);break;case "bottom":this.element.style.top=this._toPx(e.height-this.host.height()+e.top);break;case "right":this.element.style.left=this._toPx(e.left+e.width-this.host.width());break;default:this.dragArea||(e=c(window)),this._centerElement(this.host,e,"xy")}},_raiseEvent:function(b,e,g,f,h){var l=this._events[b],q=c.Event(l),r={};if(2===b||3===b)r.x=e,r.y=g,r.pageX=f,r.pageY=h;if("closed"===l||"close"===l)r.dialogResult=
this.dialogResult;q.args=r;return this.host.trigger(q)},destroy:function(){this.removeHandler(c(window),"resize.window"+this.element.id);this._removeEventHandlers();this._destroy()},_destroy:function(){this.isModal&&(null!==this._modalBackground&&c(this._modalBackground).remove(),this.host.jqxWindow({isModal:!1}));this.restricter&&(this.removeHandler(c(window),"resize."+this.element.id),this.removeHandler(c(window),"orientationchanged."+this.element.id),this.removeHandler(c(window),"orientationchange."+
this.element.id));this.host.remove();null!==this._modalBackground&&c(this._modalBackground).remove()},_toClose:function(b,e){return b&&e[0]===this.element||e[0]!==this.element&&"object"===typeof e[0]},propertyChangedHandler:function(b,e,g,f){this._validateProperties();switch(e){case "rtl":this._performLayout();break;case "dragArea":this._positionWindow();break;case "collapseButtonSize":this._performLayout();break;case "closeButtonSize":this._performLayout();break;case "isModal":this._refresh();this._fixWindowZIndex();
if(!1===f){b=c.data(document.body,"jqxwindows-modallist");var h=[];for(e=0;e<b.length;e++)b[e][0]!==this.element&&h.push(b[e])}c.data(document.body,"jqxwindows-modallist",h);break;case "keyboardCloseKey":this._removeEventHandlers();this._addEventHandlers();break;case "disabled":f?this.disable():(this.disabled=!0,this.enable());break;case "showCloseButton":case "showCollapseButton":this._performLayout();break;case "height":this._performLayout();break;case "width":this._performLayout();break;case "title":this.setTitle(f);
this.title=f;break;case "content":this.setContent(f);break;case "draggable":this._removeEventHandlers();this._addEventHandlers();this._removeResize();this._initializeResize();break;case "resizable":(this.enableResize=f)?this._initializeResize():this._removeResize();break;case "position":this._positionWindow();break;case "modalOpacity":this._setModalBackgroundStyles();break;case "okButton":f?this._addDialogButtonsHandlers():this.removeHandler(this.okButton);break;case "cancelButton":f?this._addDialogButtonsHandlers():
this.removeHandler(this.cancelButton);break;case "collapsed":f?g||(this.collapsed=!1,this.collapse(0)):g&&(this.collapsed=!0,this.expand(0));break;case "theme":c.jqx.utilities.setTheme(g,f,this.host);break;case "maxWidth":case "maxHeight":case "minWidth":case "minHeight":b._performLayout(),b._removeResize(),b._initializeResize()}},collapse:function(b){if(!this.collapsed&&!0!==this._animationInProgress&&"none"!=this.host.css("display")){var e=this,g=this._header.outerHeight(!0),f=parseInt(this._header.css("border-bottom-width"),
10),h=parseInt(this._header.css("margin-bottom"),10);b=isNaN(parseInt(b,10))?this.collapseAnimationDuration:b;isNaN(f)||(g-=2*f);isNaN(h)||(g+=h);this._heightBeforeCollapse=this.host.height();this._minHeightBeforeCollapse=this.host.css("min-height");this.element.style.minHeight=this._toPx(g);e._animationInProgress=!0;this.host.animate({height:g},{duration:b,complete:function(){e._animationInProgress=!1;e.collapsed=!0;e._collapseButton.addClass(e.toThemeProperty("jqx-window-collapse-button-collapsed"));
e._collapseButton.addClass(e.toThemeProperty("jqx-icon-arrow-down"));e._content[0].style.display="none";e._raiseEvent(5);e._raiseEvent(9);c.jqx.aria(e,"aria-expanded",!1)}})}},expand:function(b){if(this.collapsed&&!0!==this._animationInProgress){var e=this;b=isNaN(parseInt(b,10))?this.collapseAnimationDuration:b;e._animationInProgress=!0;this.host.animate({height:this._heightBeforeCollapse},{duration:b,complete:function(){e._animationInProgress=!1;e.collapsed=!1;e.element.style.minHeight=e._toPx(e._minHeightBeforeCollapse);
e._collapseButton.removeClass(e.toThemeProperty("jqx-window-collapse-button-collapsed"));e._collapseButton.removeClass(e.toThemeProperty("jqx-icon-arrow-down"));e._content[0].style.display="block";e._raiseEvent(6);e._performWidgetLayout();e._raiseEvent(9);c.jqx.aria(e,"aria-expanded",!0)}})}},closeAll:function(b){b=!0;for(var e=c.data(document.body,"jqxwindows-list"),g=e.length,f=c.data(document.body,"jqxwindow-modal")||[];g;)--g,this._toClose(b,e[g])&&(e[g].jqxWindow("closeWindow","close"),e.splice(g,
1));this._toClose(b,f)&&(f.jqxWindow("closeWindow","close"),c.data(document.body,"jqxwindow-modal",[]));c.data(document.body,"jqxwindows-list",e)},setTitle:function(b){if("string"===typeof b)this._headerContentWrapper.html(b);else if("object"===typeof b)try{this._headerContentWrapper[0].innerHTML="",b instanceof HTMLElement?this._headerContentWrapper[0].appendChild(b):b.appendTo&&b.appendTo(this._headerContentWrapper)}catch(e){throw Error(e);}this.title=b;this._performLayout()},setContent:function(b){this._contentInitialized=
!1;for(var e=this._content,g=!1;!g;)e[0].style.width="auto",e[0].style.height="auto",e.hasClass("jqx-window")?g=!0:e=c(e[0].parentNode);if(c.isArray(b))for(e=0;e<b.length;e++)b[e].appendTo(this._content);else if("string"===typeof b)c(this._content[0]).html(b);else if("object"===typeof b)try{this._content[0].innerHTML="",b instanceof HTMLElement?this._content[0].appendChild(b):b.appendTo&&b.appendTo(this._content)}catch(f){throw Error(f);}this.content=b;this._performLayout()},disable:function(){this.disabled=
!0;this._removeEventHandlers();this._header.addClass(this.toThemeProperty("jqx-window-header-disabled"));this._closeButton.addClass(this.toThemeProperty("jqx-window-close-button-disabled"));this._collapseButton.addClass(this.toThemeProperty("jqx-window-collapse-button-disabled"));this._content.addClass(this.toThemeProperty("jqx-window-content-disabled"));this.host.addClass(this.toThemeProperty("jqx-window-disabled"));this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"));this._removeResize()},
enable:function(){this.disabled&&(this._addEventHandlers(),this._header.removeClass(this.toThemeProperty("jqx-window-header-disabled")),this._content.removeClass(this.toThemeProperty("jqx-window-content-disabled")),this._closeButton.removeClass(this.toThemeProperty("jqx-window-close-button-disabled")),this._collapseButton.removeClass(this.toThemeProperty("jqx-window-collapse-button-disabled")),this.host.removeClass(this.toThemeProperty("jqx-window-disabled")),this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled")),
this.disabled=!1,this._initializeResize())},isOpen:function(){return this._visible},closeWindow:function(b){var e=this;b="undefined"===typeof b?this.closeButtonAction:b;this.hide(function(){"close"===b&&e._destroy()})},bringToFront:function(){var b=c.data(document.body,"jqxwindows-list");if(this.isModal)c.data(document.body,"jqxwindows-modallist"),this._fixWindowZIndex("modal-hide"),this._fixWindowZIndex("modal-show");else{for(var e=parseInt(b[b.length-1].css("z-index"),10),g=this._indexOf(this.host,
b),f=b.length-1;f>g;--f){var h=parseInt(b[f].css("z-index"),10)-1;b[f][0].style.zIndex=h}this.element.style.zIndex=e;this._sortByStyle("z-index",b)}},hide:function(b,e,g){var f=this;if(!this.closing||!1!==this.closing()){e=e||this.closeAnimationDuration;switch(this.animationType){case "none":this.element.style.display="none";break;case "fade":f._animationInProgress=!0;this.host.fadeOut({duration:e,callback:function(){f._animationInProgress=!1;b instanceof Function&&b()}});break;case "slide":f._animationInProgress=
!0;this.host.slideUp({duration:e,callback:function(){f._animationInProgress=!1;b instanceof Function&&b()}});break;case "combined":f._animationInProgress=!0,this.host.animate({opacity:0,width:"0px",height:"0px"},{duration:e,complete:function(){f._animationInProgress=!1;f.element.style.display="none";b instanceof Function&&b()}})}this._visible=!1;this.isModal&&(c(this._modalBackground).hide(),this._fixWindowZIndex("modal-hide"));!0!==g&&(this._raiseEvent(1),this._raiseEvent(8))}},open:function(b,e){this.show(b,
e)},close:function(b,e,c){this.hide(b,e,c)},show:function(b,e){var g=this;this._setDialogResult("none");e=e||this.showAnimationDuration;switch(this.animationType){case "none":this.element.style.display="block";break;case "fade":g._animationInProgress=!0;this.host.fadeIn({duration:e,complete:function(){g._animationInProgress=!1;b instanceof Function&&b()}});break;case "slide":g._animationInProgress=!0;this.host.slideDown({duration:e,callback:function(){g._animationInProgress=!1;b instanceof Function&&
b()}});break;case "combined":this.element.style.display="block";var f=g.host.width(),h=g.host.height();this.element.style.minWidth="0px";this.element.style.minHeight="0px";this.element.style.opacity=0;this.element.style.width="0px";this.element.style.height="0px";g._animationInProgress=!0;this.host.animate({opacity:1,width:f+"px",height:h+"px"},{duration:e,complete:function(){g._animationInProgress=!1;g._performLayout();b instanceof Function&&b()}})}this.isModal&&(c(this._modalBackground).show(),
this._fixWindowZIndex("modal-show"));var l=this;this._visible||(150<e&&"none"!=this.animationType?setTimeout(function(){!l._contentInitialized&&l.initContent&&(l.initContent(),l._contentInitialized=!0);l._raiseEvent(7);l._raiseEvent(9)},e-150):(!l._contentInitialized&&l.initContent&&(l.initContent(),l._contentInitialized=!0),this._raiseEvent(7),l._raiseEvent(9)));this._visible=!0;"combined"!==g.animationType&&this._performLayout();this.autoFocus&&(l._isTouchDevice||l._content[0].focus(),setTimeout(function(){l._isTouchDevice||
l._content[0].focus()},100))},_getTabbables:function(){var d;d=c.jqx.browser.msie&&9>c.jqx.browser.version?this._content.find("*"):this._content[0].querySelectorAll("*");var e=[];c.each(d,function(){var d=this.getAttribute("tabindex"),f=null===d;if(d=f||0<=d)f=!f,d=this.nodeName.toLowerCase(),"area"===d?(f=this.parentNode,d=f.name,this.href&&d&&"map"===f.nodeName.toLowerCase()?(f=c("img[usemap=#"+d+"]")[0],d=!!f&&b(f)):d=!1):d=(/input|select|textarea|button|object/.test(d)?!this.disabled:"a"==d?this.href||
f:f)&&b(this);d&&(e[e.length]=this)});return e},move:function(b,e,g,f){var h=0,l=0,q,r;b=parseInt(b,10);e=parseInt(e,10);c.jqx.browser.msie&&(c(window).width()>c(document).width()&&!this.dragArea&&(l=this._SCROLL_WIDTH),c(window).height()<c(document).height()&&document.documentElement.clientWidth>document.documentElement.scrollWidth&&!this.dragArea&&(h=this._SCROLL_WIDTH));h=this._validateCoordinates(b,e,l,h);if(parseInt(this.host.css("left"),10)!==h.x||parseInt(this.host.css("top"),10)!==h.y)g&&
(g=c.jqx.position(g),q=g.left,r=g.top),void 0===q&&(q=b),void 0===r&&(r=e),!1!==f&&this._raiseEvent(2,h.x,h.y,q,r);this.element.style.left=h.x+"px";this.element.style.top=h.y+"px";this._moved=!0},_toPx:function(b){return"number"===typeof b?b+"px":b}})})(jqxBaseFramework);
(function(c){var b=function(b){return{resizeConfig:function(){this.resizeTarget=null;this.resizeIndicatorSize=5;this.resizeTargetChildren=null;this.resizeArea=this.isResizing=!1;this.minWidth=1;this.maxWidth=100;this.minHeight=1;this.maxHeight=100;this.resizeParent=null;this.enableResize=!0;this._resizeEvents=["resizing","resized","resize"];this._resizeMouseDown=!1;this._resizeCurrentMode=null;this._mouseResizePosition={};this._resizeMethods=null;this._SCROLL_WIDTH=21},_resizeExceptions:{invalidTarget:"Invalid target!",
invalidMinHeight:"Invalid minimal height!",invalidMaxHeight:"Invalid maximum height!",invalidMinWidth:"Invalid minimum width!",invalidMaxWidth:"Invalid maximum width!",invalidIndicatorSize:"Invalid indicator size!",invalidSize:"Invalid size!"},removeResize:function(){if(this.resizeTarget){var e=b(this.resizeTarget.children(".jqx-resize"));e.detach();var c=e.children();this._removeResizeEventListeners();for(var f=0;f<c.length;f+=1)b(c[f]).detach(),this.resizeTarget.append(c[f]);e.remove()}this._resizeDirection=
null},initResize:function(e){this.resizeConfig();this.resizeTarget=b(e.target);this.resizeIndicatorSize=e.indicatorSize||10;this.maxWidth=e.maxWidth||100;this.minWidth=e.minWidth||1;this.maxHeight=e.maxHeight||100;this.minHeight=e.minHeight||1;this.resizeParent=e.resizeParent;this._parseResizeParentProperties();this._validateResizeProperties();this._validateResizeTargetDimensions();this._getChildren(this.resizeTarget.maxWidth,this.resizeTarget.minWidth,this.resizeTarget.maxHeight,this.resizeTarget.minHeight,
e.alsoResize);this._refreshResize();this._cursorBackup=this.resizeTarget.css("cursor");"auto"===this._cursorBackup&&(this._cursorBackup="default")},_validateResizeTargetDimensions:function(){this.resizeTarget.maxWidth=this.maxWidth;this.resizeTarget.minWidth=3*this.resizeIndicatorSize>this.minWidth?3*this.resizeIndicatorSize:this.minWidth;this.resizeTarget.maxHeight=this.maxHeight;this.resizeTarget.minHeight=3*this.resizeIndicatorSize>this.minHeight?3*this.resizeIndicatorSize:this.minHeight},_parseResizeParentProperties:function(){this.resizeParent&&
(this.resizeParent.left=parseInt(this.resizeParent.left,10),this.resizeParent.top=parseInt(this.resizeParent.top,10),this.resizeParent.width=parseInt(this.resizeParent.width,10),this.resizeParent.height=parseInt(this.resizeParent.height,10))},_getChildren:function(e,c,f,h,l){this.resizeTargetChildren=b(l);this.resizeTargetChildren=this.resizeTargetChildren.toArray();for(e=this.resizeTargetChildren.length;e;)--e,this.resizeTargetChildren[e]=b(this.resizeTargetChildren[e])},_refreshResize:function(){this._renderResize();
this._performResizeLayout();this._removeResizeEventListeners();this._addResizeEventHandlers()},_renderResize:function(){if(!(void 0!==this._resizeWrapper&&0<b(this._resizeWrapper).parents().length)){var e=document.createElement("div");e.className="jqx-resize jqx-rc-all";e.style.zIndex=8E3;e.appendChild(this._header[0]);e.appendChild(this._content[0]);this.resizeTarget[0].appendChild(e);this._resizeWrapper=e}},_performResizeLayout:function(){this._resizeWrapper.style.height=this.resizeTarget.height()+
"px";this._resizeWrapper.style.width=this.resizeTarget.width()+"px"},_removeResizeEventListeners:function(){var e=this.resizeTarget.attr("id");this.removeHandler(this._resizeWrapper,"mousemove.resize"+e);this.removeHandler(this._resizeWrapper,"mousedown.resize"+e);this.removeHandler(b(document),"mousemove.resize"+e);this.removeHandler(b(document),"mouseup.resize"+e)},_addResizeEventHandlers:function(){var e=this.resizeTarget.attr("id"),c=this;c._isTouchDevice?(this.addHandler(this._resizeWrapper,
"touchmove.resize."+e,function(b){c._resizeCursorChangeHandler(c,b)}),this.addHandler(this._resizeWrapper,"touchstart.resize."+e,function(b){c._resizeCursorChangeHandler(c,b);c._resizeMouseDownHandler(c,b)}),this.addHandler(b(document),"touchmove.resize."+e,function(b){return c._resizeHandler(c,b)}),this.addHandler(b(document),"touchend.resize."+e,function(b){c._stopResizing(c,b)})):(this.addHandler(this._resizeWrapper,"mousemove.resize."+e,function(b){c._resizeCursorChangeHandler(c,b)}),this.addHandler(this._resizeWrapper,
"mousedown.resize."+e,function(b){c._resizeMouseDownHandler(c,b)}),this.addHandler(b(document),"mousemove.resize."+e,function(b){return c._resizeHandler(c,b)}),this.addHandler(b(document),"mouseup.resize."+e,function(b){c._stopResizing(c,b)}));try{if(""!==document.referrer||window.frameElement)e=function(b){c._stopResizing(c,b)},window.top.document.addEventListener?window.top.document.addEventListener("mouseup",e,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",e)}catch(f){}},
_stopResizing:function(b){b.enableResize&&(b.isResizing&&b._raiseResizeEvent(1),b._resizeMouseDown=!1,b.isResizing=!1,b._resizeDirection=null,b.resizeTarget&&b.resizeTarget.removeClass("jqx-disableselect"));"undefined"==b._cursorBackup&&(b._cursorBackup="default");b._resizeWrapper&&(b._resizeWrapper.style.cursor=b._cursorBackup)},_resizeHandler:function(e,c){if(e.enableResize&&!e.collapsed){if(e.isResizing&&e._resizeDirection){0===c.which&&b.jqx.browser.msie&&9>b.jqx.browser.version&&e._stopResizing(c);
if(e._isTouchDevice){var f=b.jqx.position(c);e._performResize(f.left,f.top);return!1}e._performResize(c.pageX,c.pageY);return!1}return e._isTouchDevice?(f=b.jqx.position(c),e._resizeCaptureCursor(f.left,f.top)):e._resizeCaptureCursor(c.pageX,c.pageY)}},_resizeCaptureCursor:function(b,d){if(this._resizeMouseDown&&!this.isResizing&&this._resizeDirection&&(this._isTouchDevice||b+3<this._mouseResizePosition.x||b-3>this._mouseResizePosition.x||d+3<this._mouseResizePosition.y||d-3>this._mouseResizePosition.y))return this._changeCursor(b-
parseInt(this.resizeTarget.css("left"),10),d-parseInt(this.resizeTarget.css("top"),10)),this._mouseResizePosition={x:b,y:d},this._prepareResizeMethods(this._resizeDirection),this._resizeBackupData(),this.isResizing=!0,this.resizeTarget.addClass("jqx-disableselect"),!1},_resizeBackupData:function(){this.resizeTarget.lastWidth=this.resizeTarget.width();this.resizeTarget.lastHeight=this.resizeTarget.height();this.resizeTarget.x=parseInt(this.resizeTarget.css("left"),10);this.resizeTarget.y=parseInt(this.resizeTarget.css("top"),
10);this._resizeBackupChildrenSize()},_resizeBackupChildrenSize:function(){for(var b=this.resizeTargetChildren.length,d;b;)--b,d=this.resizeTargetChildren[b],this.resizeTargetChildren[b].lastWidth=d.width(),this.resizeTargetChildren[b].lastHeight=d.height()},_performResize:function(b,d){var c=b-this._mouseResizePosition.x,h=d-this._mouseResizePosition.y;this._resizeDirection&&this._resize(this.resizeTarget,c,h)},_resizeCursorChangeHandler:function(e,c){if(e.enableResize&&!e.collapsed&&!e.isResizing)if(e._isTouchDevice){var f=
b.jqx.position(c);e._changeCursor(f.left-parseInt(e.resizeTarget.css("left"),10),f.top-parseInt(e.resizeTarget.css("top"),10))}else e._changeCursor(c.pageX-parseInt(e.resizeTarget.css("left"),10),c.pageY-parseInt(e.resizeTarget.css("top"),10))},_resizeMouseDownHandler:function(e,c){if(e.enableResize&&null!==e._resizeDirection){e._resizeMouseDown=!0;if(e._isTouchDevice){var f=b.jqx.position(c);e._mouseResizePosition.x=f.left;e._mouseResizePosition.y=f.top}else e._mouseResizePosition.x=c.pageX,e._mouseResizePosition.y=
c.pageY;c.preventDefault()}},_validateResizeProperties:function(){try{if(!this.resizeTarget||1!==this.resizeTarget.length)throw Error(this._resizeExceptions.invalidTarget);if(0>this.minHeight||isNaN(parseInt(this.minHeight,10)))throw Error(this._resizeExceptions.invalidMinHeight);if(0>=this.maxHeight||isNaN(parseInt(this.maxHeight,10)))throw Error(this._resizeExceptions.invalidMaxHeight);if(0>this.minWidth||isNaN(parseInt(this.minWidth,10)))throw Error(this._resizeExceptions.invalidMinWidth);if(0>
this.maxWidth||isNaN(parseInt(this.maxWidth,10)))throw Error(this._resizeExceptions.invalidMaxWidth);if(0>this.resizeIndicatorSize||isNaN(parseInt(this.resizeIndicatorSize,10)))throw Error(this._resizeExceptions.invalidIndicatorSize);if(this.minHeight>this.maxHeight||this.minWidth>this.maxWidth)throw Error(this._resizeExceptions.invalidSize);}catch(b){throw Error(b);}},_changeCursor:function(b,d){this.isResizing||this._resizeMouseDown||(this.resizeArea=!0,b<=this.resizeIndicatorSize&&0<=b&&d<=this.resizeIndicatorSize&&
0<d?(this._resizeWrapper.style.cursor="nw-resize",this._resizeDirection="topleft"):d<=this.resizeIndicatorSize&&0<d&&b>=this.resizeTarget.width()-this.resizeIndicatorSize?(this._resizeWrapper.style.cursor="ne-resize",this._resizeDirection="topright"):d>=this.resizeTarget.height()-this.resizeIndicatorSize&&d<this.resizeTarget.height()&&b<=this.resizeIndicatorSize&&0<=b?(this._resizeWrapper.style.cursor="sw-resize",this._resizeDirection="bottomleft"):d>=this.resizeTarget.height()-this.resizeIndicatorSize&&
d<this.resizeTarget.height()&&b>=this.resizeTarget.width()-this.resizeIndicatorSize&&b<this.resizeTarget.width()?(this._resizeWrapper.style.cursor="se-resize",this._resizeDirection="bottomright"):b<=this.resizeIndicatorSize&&0<=b?(this._resizeWrapper.style.cursor="e-resize",this._resizeDirection="left"):d<=this.resizeIndicatorSize&&0<d?(this._resizeWrapper.style.cursor="n-resize",this._resizeDirection="top"):d>=this.resizeTarget.height()-this.resizeIndicatorSize&&d<this.resizeTarget.height()?(this._resizeWrapper.style.cursor=
"n-resize",this._resizeDirection="bottom"):b>=this.resizeTarget.width()-this.resizeIndicatorSize&&b<this.resizeTarget.width()?(this._resizeWrapper.style.cursor="e-resize",this._resizeDirection="right"):(this._resizeWrapper.style.cursor=this._cursorBackup,this._resizeDirection=null,this.resizeArea=!1))},_prepareResizeMethods:function(b){this._resizeMethods=[];0<=b.indexOf("left")&&this._resizeMethods.push(this._resizeLeft);0<=b.indexOf("top")&&this._resizeMethods.push(this._resizeTop);0<=b.indexOf("right")&&
this._resizeMethods.push(this._resizeRight);0<=b.indexOf("bottom")&&this._resizeMethods.push(this._resizeBottom)},_validateResize:function(b,d,c,h,l){return"horizontal"===c||"both"===c?this._validateWidth(b,h,l):"vertical"===c||"both"===c?this._validateHeight(d,h,l):{result:!1,fix:0}},_getParent:function(){return null!==this.resizeParent&&"undefined"!==this.resizeParent&&this.resizeParent.height&&this.resizeParent.width&&this.resizeParent.top&&this.resizeParent.left?this.resizeParent:{left:0,top:0,
width:b(document).width(),height:b(document).height()}},_validateHeight:function(e,c,f){var h=0,l=this._getParent();b(window).width()>b(document).width()&&b.jqx.browser.msie&&l.height===b(document).height()&&(h=this._SCROLL_WIDTH);return"bottom"===f&&e+c.position().top+h+2>l.height+l.top?{fix:l.height-c.position().top-h-2+l.top,result:!1}:"top"===f&&c.lastHeight-e+c.y<l.top?{fix:e+(c.lastHeight-e+c.y)-l.top,result:!1}:e<c.minHeight?{fix:c.minHeight,result:!1}:e>c.maxHeight?{fix:c.maxHeight,result:!1}:
{result:!0,fix:e}},_validateWidth:function(e,c,f){var h=0,l=this._getParent();b(window).height()<b(document).height()&&b.jqx.browser.msie&&document.documentElement.clientWidth>=document.documentElement.scrollWidth&&l.width===b(document).width()&&(h=this._SCROLL_WIDTH);return"right"===f&&e+c.position().left+h+2>l.width+l.left?{fix:l.width-c.position().left-h-2+l.left,result:!1}:"left"===f&&c.lastWidth-e+c.x<l.left?{fix:e+(c.lastWidth-e+c.x)-l.left,result:!1}:e<c.minWidth?{fix:c.minWidth,result:!1}:
e>c.maxWidth?{fix:c.maxWidth,result:!1}:{result:!0,fix:e}},_resize:function(b,d,c){for(var h=this._resizeMethods.length,l=0;l<h;l++)if(this._resizeMethods[l]instanceof Function)this._resizeMethods[l]({element:b,x:d,y:c,self:this});this._performResizeLayout()},resize:function(b,d){if(this.resizable){var c=b-this.host.width(),h=d-this.host.height(),l="right";0!==h&&(l="bottom");this._resizeDirection=l;this._prepareResizeMethods(this._resizeDirection);this._resizeBackupData();this.isResizing=!0;this._resize(this.resizeTarget,
c,h);this.isResizing=!1}},_setResizeChildrenSize:function(b,d){for(var c=this.resizeTargetChildren.length;c;)if(c--,"width"===d){var h=this.resizeTargetChildren[c].lastWidth-(this.resizeTarget.lastWidth-b);h<this.resizeTarget.maxWidth&&0<h&&this.resizeTargetChildren[c].width(h)}else h=this.resizeTargetChildren[c].lastHeight-(this.resizeTarget.lastHeight-b),h<this.resizeTarget.maxHeight&&0<h&&this.resizeTargetChildren[c].height(h)},_resizeRight:function(e){var c=e.element.lastWidth+e.x,f=e.self._validateResize(c,
0,"horizontal",e.element,"right");f.result||(c=f.fix);e.element.width()!==c&&(e.self._setResizeChildrenSize(c,"width"),e.element.width(c),0<=e.self.width.toString().indexOf("%")&&(f=b(document.body).width()/100,e.element[0].style.width=1/f*c+"%",e.self._setChildrenLayout()),e.self._raiseResizeEvent(0));return c},_resizeLeft:function(e){var c=e.element.lastWidth-e.x,f=e.self._validateResize(c,0,"horizontal",e.element,"left"),h=e.element.x+e.x;if(f.result)return e.element.width()!==c&&(e.self._setResizeChildrenSize(c,
"width"),e.element.width(c),0<=e.self.width.toString().indexOf("%")&&(f=b(document.body).width()/100,e.element[0].style.width=1/f*c+"%",e.self._setChildrenLayout()),e.element[0].style.left=e.self._toPx(h),e.self._raiseResizeEvent(0)),c},_resizeBottom:function(e){var c=e.element.lastHeight+e.y,f=e.self._validateResize(0,c,"vertical",e.element,"bottom");f.result||(c=f.fix);e.element.height()!==c&&(e.self._setResizeChildrenSize(c,"height"),e.element.height(c),0<=e.self.height.toString().indexOf("%")&&
(f=b(document.body).height()/100,e.element[0].style.height=1/f*c+"%",e.self._setChildrenLayout()),e.self._raiseResizeEvent(0));return c},_resizeTop:function(e){var c=e.element.lastHeight-e.y,f=e.self._validateResize(0,c,"vertical",e.element,"top"),h=e.element.y+e.y;if(f.result)return e.element.height()!==c&&(e.self._setResizeChildrenSize(c,"height"),e.element.height(c),0<=e.self.height.toString().indexOf("%")&&(f=b(document.body).height()/100,e.element[0].style.height=1/f*c+"%",e.self._setChildrenLayout()),
e.element[0].style.top=e.self._toPx(h),e.self._raiseResizeEvent(0)),c},_raiseResizeEvent:function(e){var c=this._resizeEvents[e],f=b.Event(c),h={};h.width=parseInt(this.resizeTarget[0].style.width,10);h.height=parseInt(this.resizeTarget[0].style.height,10);f.args=h;0===e&&(c=this._resizeEvents[2],e=b.Event(c),e.args=h,this.resizeTarget.trigger(e));return this.resizeTarget.trigger(f)}}}(jqxBaseFramework);c.extend(c.jqx._jqxWindow.prototype,b)})(jqxBaseFramework);
(function(c){c.jqx.jqxWidget("jqxInput","",{});c.extend(c.jqx._jqxInput.prototype,{defineInstance:function(){var b={disabled:!1,filter:this._filter,sort:this._sort,highlight:this._highlight,dropDownWidth:null,renderer:this._renderer,opened:!1,$popup:document.createElement("ul"),source:[],roundedCorners:!0,searchMode:"default",placeHolder:"",width:null,height:null,value:"",rtl:!1,displayMember:"",valueMember:"",events:["select","open","close","change"],popupZIndex:1E3,items:8,minLength:1,maxLength:null};
if(this===c.jqx._jqxInput.prototype)return b;c.extend(!0,this,b);return b},createInstance:function(){if("none"===this.host.css("display")||!1===document.body.contains(this.element))this._initiallyHidden=!0;this._popupHelper=c(this.$popup);this.render()},render:function(){var b=this;if("textarea"===this.element.nodeName.toLowerCase())this.element.style.overflow="auto";else if("div"===this.element.nodeName.toLowerCase()){this.baseHost=this.element;var d=b.element.getElementsByTagName("input"),e=!1;
c.each(d,function(){var b=this.type;if(null==b||"text"===b||"textarea"===b)return d=c(this),e=!0,!1});if(!e)throw Error("jqxInput: Missing Text Input in the Input Group");if(0<d.length){this.baseHost=c(this.element);b.baseElement=b.element;var g=this.host.data();this.host=d;this.element=d[0];this.host.data(g);b.baseElement.className+=" "+b.toThemeProperty("jqx-widget jqx-rc-all jqx-input-group");var f=this.baseHost.children();c.each(f,function(d){var e="jqx-input-group-addon";c(this).removeClass(b.toThemeProperty("jqx-rc-all"));
0===d&&(e+=" jqx-rc-l");d===f.length-1&&(e+=" jqx-rc-r");this!==b.element&&(e+=" jqx-fill-state-normal");this.className+=" "+b.toThemeProperty(e)})}}this.addHandlers();this.rtl&&(b.element.className+=" "+b.toThemeProperty("jqx-rtl"));b.element.setAttribute("role","textbox");c.jqx.aria(this,"aria-autocomplete","both");c.jqx.aria(this,"aria-disabled",this.disabled);c.jqx.aria(this,"aria-readonly",!1);c.jqx.aria(this,"aria-multiline",!1);this.source&&this.source.length&&c.jqx.aria(this,"aria-haspopup",
!0);""!==this.value&&(this.element.value=this.value);this._oldsource=this.source;this._updateSource()},_updateSource:function(){var b=this,d=function(d){if(void 0===d)return null;if("string"===typeof d||d instanceof String)return{label:d,value:d};if("string"!==typeof d&&!1===d instanceof String){var e="",c="";""!==b.displayMember&&void 0!==b.displayMember&&d[b.displayMember]&&(e=d[b.displayMember]);""!==b.valueMember&&void 0!==b.valueMember&&(c=d[b.valueMember]);""===e&&(e=d.label);""===c&&(c=d.value);
return{label:e,value:c}}return d},e=function(b){for(var e=[],c=0;c<b.length;c++)e[c]=d(b[c]);return e};if(this.source&&this.source._source){this.adapter=this.source;if(null!=this.adapter._source.localdata)this.adapter.unbindBindingUpdate(this.element.id),this.adapter.bindBindingUpdate(this.element.id,function(){b.source=e(b.adapter.records)});else{var g={};this.adapter._options.data?c.extend(b.adapter._options.data,g):(this.source._source.data&&c.extend(g,this.source._source.data),this.adapter._options.data=
g);this.adapter.unbindDownloadComplete(this.element.id);this.adapter.bindDownloadComplete(this.element.id,function(){b.source=e(b.adapter.records)})}this.source.dataBind()}else c.isFunction(this.source)||(this.source=e(this.source))},_refreshClasses:function(b){b=b?"addClass":"removeClass";var d="jqx-widget-content jqx-input-widget jqx-input jqx-widget",e="jqx-popup jqx-input-popup jqx-menu jqx-menu-vertical jqx-menu-dropdown jqx-widget jqx-widget-content";c.jqx.browser.msie&&(e+=" jqx-noshadow");
this.roundedCorners&&(d+=" jqx-rc-all",e+=" jqx-rc-all");this.disabled?d+=" jqx-fill-state-disabled":this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled"));this.host[b](this.toThemeProperty(d));this._popupHelper[b](this.toThemeProperty(e))},selectAll:function(){var b=this.host;setTimeout(function(){if("selectionStart"in b[0])b[0].focus(),b[0].setSelectionRange(0,b[0].value.length);else{var d=b[0].createTextRange();d.collapse(!0);d.moveEnd("character",b[0].value.length);d.moveStart("character",
0);d.select()}},10)},selectLast:function(){this.selectStart(this.host[0].value.length)},selectFirst:function(){this.selectStart(0)},selectStart:function(b){var d=this.host;setTimeout(function(){if("selectionStart"in d[0])d[0].focus(),d[0].setSelectionRange(b,b);else{var e=d[0].createTextRange();e.collapse(!0);e.moveEnd("character",b);e.moveStart("character",b);e.select()}},10)},focus:function(){try{var b=this;b.element.focus();setTimeout(function(){b.element.focus()},25)}catch(d){}},resize:function(b,
d){this.width=b;this.height=d;this.refresh()},refresh:function(){this._refreshClasses(!1);this._refreshClasses(!0);if(this.baseHost){null!=this.width&&-1!=this.width.toString().indexOf("px")?this.baseElement.style.width=parseInt(this.width)+"px":void 0==this.width||isNaN(this.width)||(this.baseElement.style.width=this.width+"px");null!=this.height&&-1!=this.height.toString().indexOf("px")?this.baseElement.style.height=parseInt(this.height)+"px":void 0==this.height||isNaN(this.height)||(this.baseElement.style.height=
this.height+"px");var b=this,d=c.jqx.browser.msie&&9>c.jqx.browser.version,e=0;c.each(this.baseHost.children(),function(){this.style.height="100%";this!==b.element&&(e+=c(this).outerWidth())});b._addonsWidth=e;if(d){var g=Math.max(0,b.baseElement.offsetHeight-2);b.element.style.width=Math.max(0,b.baseElement.offsetWidth-e-1)+"px";b.element.style.minHeight=g+"px";b.element.style.lineHeight=g+"px"}else b.element.style.width="calc(100% - "+e+"px)";c.jqx.utilities.resize(b.baseHost,function(){if(d&&"string"===
typeof b.width&&-1!==b.width.indexOf("%")&&!b._initiallyHidden)b.element.style.width=b.baseElement.offsetWidth-b._addonsWidth-1+"px";else if(b._initiallyHidden){b._addonsWidth=b._getAddonsWidth();if(d){b.element.style.width=b.baseElement.offsetWidth-b._addonsWidth-1+"px";var e=b.baseElement.offsetHeight-2;b.element.style.minHeight=e+"px";b.element.style.lineHeight=e+"px"}else b.element.style.width="calc(100% - "+b._addonsWidth+"px)";b._initiallyHidden=!1}})}else null!=this.width&&-1!=this.width.toString().indexOf("px")?
this.element.style.width=parseInt(this.width)+"px":void 0==this.width||isNaN(this.width)?this.element.style.width=this.width:this.element.style.width=this.width+"px",null!=this.height&&-1!=this.height.toString().indexOf("px")?this.element.style.height=parseInt(this.height)+"px":void 0==this.height||isNaN(this.height)?this.element.style.height=this.height:this.element.style.height=this.height+"px";this.disabled?this.element.setAttribute("disabled",!0):this.element.removeAttribute("disabled");this.maxLength&&
this.element.setAttribute("maxlength",this.maxLength);this.element.getAttribute("placeholder")||this._refreshPlaceHolder()},_refreshPlaceHolder:function(){"placeholder"in this.element&&!(c.jqx.browser.msie&&9>c.jqx.browser.version)?this.element.setAttribute("placeHolder",this.placeHolder):""===this.element.value&&(this.element.value=this.placeHolder)},destroy:function(){this.removeHandlers();this.baseHost?this.baseHost.remove():this.host.remove();this.$popup&&this._popupHelper.remove()},propertiesChangedHandler:function(b,
d,e){e.width&&e.height&&2===Object.keys(e).length&&b.refresh()},propertyChangedHandler:function(b,d,e,g){if("width"===d&&g!==e)b.baseHost?(b.baseElement.style.width=b._toPx(g),c.jqx.browser.msie&&9>c.jqx.browser.version&&(b.element.style.width=b.baseElement.offsetWidth-b._addonsWidth-1+"px")):b.element.style.width=b._toPx(g);else if("placeHolder"===d)"placeholder"in b.element&&!(c.jqx.browser.msie&&9>c.jqx.browser.version)||b.element.value!==e||(b.element.value=""),b._refreshPlaceHolder();else if(!(b.batchUpdate&&
b.batchUpdate.width&&b.batchUpdate.height&&2===Object.keys(b.batchUpdate).length))if("theme"===d&&c.jqx.utilities.setTheme(e,g,b.host),"opened"===d)g?b.open():b.close();else{"source"===d&&(b._oldsource=g,b._updateSource());if("displayMember"===d||"valueMember"===d)b.source=b._oldsource,b._updateSource();"disabled"===d&&c.jqx.aria(b,"aria-disabled",b.disabled);"value"===d&&(b.element.value=g);b.refresh()}},select:function(b,d,e){d=this._find("jqx-fill-state-pressed",this._popupHelper);b=d.getAttribute("data-value");
d=d.getAttribute("data-name");this.element.value=this.renderer(d,this.element.value);this.selectedItem={label:d,value:b};this.element.setAttribute("data-value",b);this.element.setAttribute("data-label",d);this._raiseEvent("0",{item:{label:d,value:b},label:d,value:b});this._raiseEvent("3",{type:e,item:{label:d,value:b},label:d,value:b});this.value=d;return this.close()},val:function(b){if(0===arguments.length||null!=b&&"object"===typeof b&&!b.label&&!b.value)return""!==this.displayMember&&""!==this.valueMember&&
this.selectedItem?""===this.element.value?"":this.selectedItem:this.element.value;if(b&&b.label)return this.selectedItem={label:b.label,value:b.value},this.element.setAttribute("data-value",b.value),this.element.setAttribute("data-label",b.label),this.value=b,this.element.value=b.label,this.element.value;this.value=b;this.element.value=b;this.element.setAttribute("data-value",b);this.element.setAttribute("data-label",b);b&&b.label?this._raiseEvent("3",{type:null,item:{label:b.label,value:b.value},
label:b.label,value:b.value}):this._raiseEvent("3",{type:null,item:{label:b,value:b},label:b,value:b});return this.element.value},_raiseEvent:function(b,d){void 0===d&&(d={owner:null});var e=this.events[b];d.owner=this;e=new c.Event(e);e.owner=this;e.args=d;e.preventDefault&&e.preventDefault();return this.host.trigger(e)},_renderer:function(b){return b},open:function(){if(!c.jqx.isHidden(this.host)){var b=c.extend({},this.host.coord(!0),{height:this.element.offsetHeight});if(this.$popup.parentNode!==
document.body){var d=this.element.id+"_popup";this.$popup.id=d;c.jqx.aria(this,"aria-owns",d);document.body.appendChild(this.$popup)}this.$popup.style.position="absolute";this.$popup.style.zIndex=this.popupZIndex;this.$popup.style.top=this._toPx(b.top+b.height);this.$popup.style.left=this._toPx(b.left);this.$popup.style.display="block";var e=0,b=this._popupHelper.children();c.each(b,function(){e+=c(this).outerHeight()+1});this.$popup.style.height=this._toPx(e);this.opened=!0;this._raiseEvent("1",
{popup:this.$popup});c.jqx.aria(this,"aria-expanded",!0);return this}},close:function(){this.$popup.style.display="none";this.opened=!1;this._raiseEvent("2",{popup:this.$popup});c.jqx.aria(this,"aria-expanded",!1);return this},suggest:function(){var b;this.query=this.element.value;return!this.query||this.query.length<this.minLength?this.opened?this.close():this:(b=c.isFunction(this.source)?this.source(this.query,c.proxy(this.load,this)):this.source)?this.load(b):this},load:function(b){for(var d=[],
e=0;e<b.length;e++){var c=b[e];this.filter(c)&&d.push(c)}d=this.sort(d);return d.length?this._render(d.slice(0,this.items)).open():this.opened?this.close():this},_filter:function(b){var d=this.query,e=b;null!=b.label?e=b.label:this.displayMember&&(e=b[this.displayMember]);switch(this.searchMode){case "none":break;default:return c.jqx.string.containsIgnoreCase(e,d);case "contains":return c.jqx.string.contains(e,d);case "equals":return c.jqx.string.equals(e,d);case "equalsignorecase":return c.jqx.string.equalsIgnoreCase(e,
d);case "startswith":return c.jqx.string.startsWith(e,d);case "startswithignorecase":return c.jqx.string.startsWithIgnoreCase(e,d);case "endswith":return c.jqx.string.endsWith(e,d);case "endswithignorecase":return c.jqx.string.endsWithIgnoreCase(e,d)}},_sort:function(b){for(var d=[],e=[],c=[],f=0;f<b.length;f++){var h=b[f],l=h;h.label?l=h.label:this.displayMember&&(l=h[this.displayMember]);0===l.toString().toLowerCase().indexOf(this.query.toString().toLowerCase())?d.push(h):0<=l.toString().indexOf(this.query)?
e.push(h):0<=l.toString().toLowerCase().indexOf(this.query.toString().toLowerCase())&&c.push(h)}return d.concat(e,c)},_highlight:function(b){var d=this.query,d=d.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");return b.replace(new RegExp("("+d+")","ig"),function(b,d){return"<b>"+d+"</b>"})},_render:function(b){var d=this,e=d._popupHelper.children();if(0<e.length)for(var g=0;g<e.length;g++)c(e[g]).remove();var f=function(b,e){var c=b,g=document.createElement("li"),f=document.createElement("a"),
w,z;f.setAttribute("href","#");g.appendChild(f);void 0!==b.value&&null!==b.value?(w=void 0!==b.label&&null!==b.label?b.label:b.value,z=b.value):void 0!==b.label&&null!==b.label?z=w=b.label:void 0!==d.displayMember&&""!==d.displayMember?(w=b[d.displayMember],z=b[d.valueMember]):z=w=b;g.setAttribute("data-value",z);g.setAttribute("data-name",w);b.label?c=b.label:d.displayMember&&(c=b[d.displayMember]);f.innerHTML=d.highlight(c);c="";d.rtl&&(c=" jqx-rtl");0===e&&(c+=" jqx-fill-state-pressed");g.className=
d.toThemeProperty("jqx-item jqx-menu-item jqx-rc-all"+c);d.$popup.appendChild(g);d.addHandler(g,"mouseenter",function(b){d.mouseenter(b)})};(function(b){for(var d=0;d<b.length;d++)f(b[d],d)})(b);this.$popup.style.width=this.dropDownWidth?d._toPx(d.dropDownWidth):d._toPx(d.element.offsetWidth-6);return this},next:function(){var b=this._find("jqx-fill-state-pressed",this._popupHelper),d=b.nextSibling;c(b).removeClass(this.toThemeProperty("jqx-fill-state-pressed"));d||(d=this.$popup.firstChild);d.className+=
" "+this.toThemeProperty("jqx-fill-state-pressed")},prev:function(){var b=this._find("jqx-fill-state-pressed",this._popupHelper),d=b.previousSibling;c(b).removeClass(this.toThemeProperty("jqx-fill-state-pressed"));d||(d=this.$popup.lastChild);d.className+=" "+this.toThemeProperty("jqx-fill-state-pressed")},addHandlers:function(){var b=this,d=".jqxInput"+b.element.id;b.addHandler(b.host,"focus"+d,function(){b.onFocus()});b.addHandler(b.host,"blur"+d,function(){b.onBlur()});b.addHandler(b.host,"change"+
d,function(d){if(!d.args){d.stopPropagation();d.preventDefault();var c=b.val();c&&c.label?(d=c.label,c=c.val):d=c;b._raiseEvent("3",{type:"keyboard",item:{label:d,value:c},label:d,value:c});b.value=d}});b.addHandler(b.host,"keypress"+d,function(d){b.keypress(d)});b.addHandler(b.host,"keyup"+d,function(d){b.keyup(d)});b.addHandler(b.host,"keydown"+d,function(d){b.keydown(d)});b.addHandler(b.$popup,"mousedown"+d,function(d){b.click(d)})},removeHandlers:function(){var b=".jqxInput"+this.element.id;this.removeHandler(this.host,
"change"+b);this.removeHandler(this.host,"focus"+b);this.removeHandler(this.host,"blur"+b);this.removeHandler(this.host,"keypress"+b);this.removeHandler(this.host,"keyup"+b);this.removeHandler(this.host,"keydown"+b);this.removeHandler(this.$popup,"mousedown"+b)},move:function(b){if(this.opened){switch(b.keyCode){case 9:case 13:case 27:b.preventDefault();break;case 38:b.shiftKey||(b.preventDefault(),this.prev());break;case 40:b.shiftKey||(b.preventDefault(),this.next())}b.stopPropagation()}},keydown:function(b){this.suppressKeyPressRepeat=
-1!==[40,38,9,13,27].indexOf(b.keyCode);this.move(b)},keypress:function(b){this.suppressKeyPressRepeat||this.move(b)},keyup:function(b){switch(b.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.opened)return;this.select(b,this,"keyboard");break;case 27:if(!this.opened)return;this.close();break;default:var d=this;this.timer&&clearTimeout(this.timer);this.timer=setTimeout(function(){d.suggest()},300)}b.stopPropagation();b.preventDefault()},clear:function(){this.val("")},
onBlur:function(){var b=this;setTimeout(function(){b.close()},150);b.host.removeClass(b.toThemeProperty("jqx-fill-state-focus"));"placeholder"in b.element&&!(c.jqx.browser.msie&&9>c.jqx.browser.version)||""!==b.element.value&&b.element.value!==b.placeHolder||(b.element.value=b.placeHolder)},onFocus:function(){this.element.className+=" "+this.toThemeProperty("jqx-fill-state-focus");"placeholder"in this.element&&!(c.jqx.browser.msie&&9>c.jqx.browser.version)||this.element.value!==this.placeHolder||
(this.element.value="")},click:function(b){b.stopPropagation();b.preventDefault();this.select(b,this,"mouse")},mouseenter:function(b){c(this._find("jqx-fill-state-pressed",this._popupHelper)).removeClass(this.toThemeProperty("jqx-fill-state-pressed"));b.currentTarget.className+=" "+this.toThemeProperty("jqx-fill-state-pressed")},_toPx:function(b){return"number"===typeof b?b+"px":b},_find:function(b,d){for(var e=d.children(),c=0;c<e.length;c++){var f=e[c];if(-1!==f.className.indexOf(b))return f}},
_getAddonsWidth:function(){for(var b=this.baseHost.children(),d=0,e=0;e<b.length;e++)b[e]!==this.element&&(d+=c(b[e]).outerWidth());return d}})})(jqxBaseFramework);
(function(c){c.jqx.jqxWidget("jqxNumberInput","",{});c.extend(c.jqx._jqxNumberInput.prototype,{defineInstance:function(){var b={value:null,decimal:0,min:-99999999,max:99999999,width:200,validationMessage:"Invalid value",height:25,textAlign:"right",readOnly:!1,promptChar:"_",decimalDigits:2,decimalSeparator:".",groupSeparator:",",groupSize:3,symbol:"",symbolPosition:"left",digits:8,negative:!1,negativeSymbol:"-",disabled:!1,inputMode:"advanced",spinButtons:!1,spinButtonsWidth:18,spinButtonsStep:1,
autoValidate:!0,spinMode:"advanced",enableMouseWheel:!0,touchMode:"auto",allowNull:!0,placeHolder:"",changeType:null,template:"",rtl:!1,events:"valueChanged textchanged mousedown mouseup keydown keyup keypress change".split(" "),aria:{"aria-valuenow":{name:"decimal",type:"number"},"aria-valuemin":{name:"min",type:"number"},"aria-valuemax":{name:"max",type:"number"},"aria-disabled":{name:"disabled",type:"boolean"}},invalidArgumentExceptions:["invalid argument exception"]};if(this===c.jqx._jqxNumberInput.prototype)return b;
c.extend(!0,this,b);return b},createInstance:function(b){b=this.host.attr("value");void 0!=b&&(this.decimal=b);null!=this.value&&(this.decimal=this.value);this._createFromInput("jqxNumberInput");this.render()},_createFromInput:function(b){if("input"==this.element.nodeName.toLowerCase()){this.field=this.element;this.field.className&&(this._className=this.field.className);var d={title:this.field.title};this.field.value&&(this.decimal=parseFloat(this.field.value));if(this.field.getAttribute("min")){var e=
this.field.getAttribute("min");this.min=parseFloat(e)}this.field.getAttribute("step")&&(e=this.field.getAttribute("step"),this.spinButtonsStep=parseFloat(e));this.field.getAttribute("max")&&(e=this.field.getAttribute("max"),this.max=parseFloat(e));d.id=this.field.id.length?this.field.id.replace(/[^\w]/g,"_")+"_"+b:c.jqx.utilities.createId()+"_"+b;b=c("<div></div>",d);b[0].style.cssText=this.field.style.cssText;this.width||(this.width=c(this.field).width());this.height||(this.height=c(this.field).outerHeight());
c(this.field).hide().after(b);e=this.host.data();this.host=b;this.host.data(e);this.element=b[0];this.element.id=this.field.id;this.field.id=d.id;this._className&&(this.host.addClass(this._className),c(this.field).removeClass(this._className));this.field.tabIndex&&(d=this.field.tabIndex,this.field.tabIndex=-1,this.element.tabIndex=d)}},_doTouchHandling:function(){var b=this.savedValue;this.parsing||(this.parsing=!0);if(this.parsing){this.numberInput.val()&&0==this.numberInput.val().indexOf("-")?this.setvalue("negative",
!0):this.setvalue("negative",!1);for(var d=this.numberInput.val(),e=0;e<d.length-1;e++){var c=d.substring(e,e+1);if(isNaN(parseFloat(c))&&-1===this.symbol.toString().indexOf(c)&&"%"!=c&&"$"!=c&&"."!=c&&","!=c&&"-"!=c){this.numberInput[0].value=b;this.parsing=!1;return}}this.ValueString=this.GetValueString(this.numberInput.val(),this.decimalSeparator,""!=this.decimalSeparator);this._parseDecimalInSimpleMode();this.decimal=this.ValueString;this.getvalue("negative")&&(this.decimal="-"+this.ValueString);
this.parsing=!1}},render:function(){this.host.attr({role:"spinbutton"});this.host.attr("data-role","input");c.jqx.aria(this);c.jqx.aria(this,"aria-multiline",!1);var b=this;(this.officeMode||this.theme&&-1!=this.theme.indexOf("office"))&&18==this.spinButtonsWidth&&(this.spinButtonsWidth=15);if(c.jqx.mobile.isTouchDevice()||!0===this.touchMode)this.inputMode="textbox",this.spinMode="simple";""==this.decimalSeparator&&(this.decimalSeparator=" ");this.host.addClass(this.toThemeProperty("jqx-input"));
this.host.addClass(this.toThemeProperty("jqx-rc-all"));this.host.addClass(this.toThemeProperty("jqx-widget"));this.host.addClass(this.toThemeProperty("jqx-widget-content"));this.host.addClass(this.toThemeProperty("jqx-numberinput"));this.spinButtons?this._spinButtons():(this.numberInput=c("<input style='border:none;' autocomplete='off' type='textarea'/>").appendTo(this.host),this.numberInput.addClass(this.toThemeProperty("jqx-input-content")),this.numberInput.addClass(this.toThemeProperty("jqx-widget-content")));
this.numberInput.attr("placeholder",this.placeHolder);var d=this.host.attr("name");d&&this.numberInput.attr("name",d);this.host.attr("tabindex")&&(this.numberInput.attr("tabindex",this.host.attr("tabindex")),this.host.removeAttr("tabindex"));if(c.jqx.mobile.isTouchDevice()||!0===this.touchMode||"textbox"==this.inputMode)b=this,b.savedValue="",this.addHandler(this.numberInput,"focus",function(){b.savedValue=b.numberInput[0].value}),this.addHandler(this.numberInput,"change",function(){b._doTouchHandling()});
c.data(this.host[0],"jqxNumberInput").jqxNumberInput=this;b=this;0<this.host.parents("form").length&&this.addHandler(this.host.parents("form"),"reset",function(){setTimeout(function(){b.setDecimal(0)},10)});this.propertyChangeMap.disabled=function(b,d,c,l){l?(b.numberInput.addClass(e.toThemeProperty("jqx-input-disabled")),b.numberInput.attr("disabled",!0)):(b.host.removeClass(e.toThemeProperty("jqx-input-disabled")),b.numberInput.attr("disabled",!1));b.spinButtons&&b.host.jqxRepeatButton&&(b.upbutton.jqxRepeatButton({disabled:l}),
b.downbutton.jqxRepeatButton({disabled:l}))};this.disabled&&(this.numberInput.addClass(this.toThemeProperty("jqx-input-disabled")),this.numberInput.attr("disabled",!0),this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")));this.selectedText="";this.decimalSeparatorPosition=-1;var e=this;this.oldValue=this._value();this.items=[];d=this.decimal;this._initializeLiterals();this._render();this.setDecimal(d);b=this;setTimeout(function(){},100);this._addHandlers();c.jqx.utilities.resize(this.host,
function(){b._render()})},refresh:function(b){b||this._render()},wheel:function(b,d){if(d.enableMouseWheel){d.changeType="mouse";var e=0;b||(b=window.event);b.originalEvent&&b.originalEvent.wheelDelta&&(b.wheelDelta=b.originalEvent.wheelDelta);b.wheelDelta?e=b.wheelDelta/120:b.detail&&(e=-b.detail/3);if(e)return e=d._handleDelta(e),b.preventDefault&&b.preventDefault(),null!=b.originalEvent&&(b.originalEvent.mouseHandled=!0),void 0!=b.stopPropagation&&b.stopPropagation(),e?(e=!1,b.returnValue=e):!1;
b.preventDefault&&b.preventDefault();b.returnValue=!1}},_handleDelta:function(b){0>b?this.spinDown():this.spinUp();return!0},_addHandlers:function(){var b=this;this.addHandler(this.numberInput,"paste",function(d){var g=b._selection();d.preventDefault();d.originalEvent.clipboardData?content=(d.originalEvent||d).clipboardData.getData("text/plain"):window.clipboardData&&(content=window.clipboardData.getData("Text"));this.selectedText=content;c.data(document.body,"jqxSelection",this.selectedText);"simple"!=
b.inputMode?b._pasteSelectedText():b.val(content);setTimeout(function(){b._setSelectionStart(g.start)})});this.addHandler(this.numberInput,"mousedown",function(d){return b._raiseEvent(2,d)});this._mousewheelfunc=this._mousewheelfunc||function(d){if(!b.editcell)return b.wheel(d,b),!1};this.removeHandler(this.host,"mousewheel",this._mousewheelfunc);this.addHandler(this.host,"mousewheel",this._mousewheelfunc);var d="";this.addHandler(this.numberInput,"focus",function(e){c.data(b.numberInput,"selectionstart",
b._selection().start);b.host.addClass(b.toThemeProperty("jqx-fill-state-focus"));b.spincontainer&&b.spincontainer.addClass(b.toThemeProperty("jqx-numberinput-focus"));d=b.numberInput.val();b._savedValue=b.decimal});this.addHandler(this.numberInput,"blur",function(e){"simple"==b.inputMode&&b._exitSimpleInputMode(e,b,!1,d);if(b.autoValidate){var g=parseFloat(b.decimal);b.getvalue("negative")&&0<b.decimal&&(g=-parseFloat(b.decimal));g>b.max&&(b._disableSetSelection=!0,b.setDecimal(b.max),b._disableSetSelection=
!1);g<b.min&&(b._disableSetSelection=!0,b.setDecimal(b.min),b._disableSetSelection=!1)}b.host.removeClass(b.toThemeProperty("jqx-fill-state-focus"));b.spincontainer&&b.spincontainer.removeClass(b.toThemeProperty("jqx-numberinput-focus"));b.numberInput.val()!=d&&(b._raiseEvent(7,e),c.jqx.aria(b,"aria-valuenow",b.decimal),b.element.value=b.decimal);return!0});this.addHandler(this.numberInput,"mouseup",function(d){return b._raiseEvent(3,d)});this.addHandler(this.numberInput,"keydown",function(d){b.changeType=
"keyboard";return b._raiseEvent(4,d)});this.addHandler(this.numberInput,"keyup",function(d){return b._raiseEvent(5,d)});this.addHandler(this.numberInput,"keypress",function(d){return b._raiseEvent(6,d)})},focus:function(){try{this.numberInput.focus()}catch(b){}},_removeHandlers:function(){this.removeHandler(this.numberInput,"mousedown");c.jqx.mobile.isOperaMiniMobileBrowser()&&this.removeHandler(c(document),"click."+this.element.id,this._exitSimpleInputMode,this);this.removeHandler(this.numberInput,
"paste");this.removeHandler(this.numberInput,"focus");this.removeHandler(this.numberInput,"blur");this.removeHandler(this.numberInput,"mouseup");this.removeHandler(this.numberInput,"keydown");this.removeHandler(this.numberInput,"keyup");this.removeHandler(this.numberInput,"keypress")},_spinButtons:function(){if(this.host.jqxRepeatButton){this.numberInput?this.numberInput.css("float","left"):(this.numberInput=c("<input autocomplete='off' style='border: none; position: relative; float: left;' type='textarea'/>"),
this.numberInput.appendTo(this.host),this.numberInput.addClass(this.toThemeProperty("jqx-input-content")),this.numberInput.addClass(this.toThemeProperty("jqx-widget-content")));this.spincontainer&&(this.upbutton&&this.upbutton.jqxRepeatButton("destroy"),this.downbutton&&this.downbutton.jqxRepeatButton("destroy"),this.spincontainer.remove());this.spincontainer=c('<div style="float: right; height: 100%; overflow: hidden; position: relative;"></div>');this.rtl&&(this.spincontainer.css("float","right"),
this.numberInput.css("float","right"),this.spincontainer.css("left","-1px"));this.host.append(this.spincontainer);this.upbutton=c('<div style="overflow: hidden; padding: 0px; margin-left: -1px; position: relative;"><div></div></div>');this.spincontainer.append(this.upbutton);this.upbutton.jqxRepeatButton({overrideTheme:!0,disabled:this.disabled,roundedCorners:"top-right"});this.downbutton=c('<div style="overflow: hidden; padding: 0px; margin-left: -1px; position: relative;"><div></div></div>');this.spincontainer.append(this.downbutton);
this.downbutton.jqxRepeatButton({overrideTheme:!0,disabled:this.disabled,roundedCorners:"bottom-right"});this.template&&(this.upbutton.addClass(this.toThemeProperty("jqx-"+this.template)),this.downbutton.addClass(this.toThemeProperty("jqx-"+this.template)));var b=this;this.downbutton.addClass(this.toThemeProperty("jqx-fill-state-normal jqx-action-button"));this.upbutton.addClass(this.toThemeProperty("jqx-fill-state-normal jqx-action-button"));this.upbutton.addClass(this.toThemeProperty("jqx-rc-tr"));
this.downbutton.addClass(this.toThemeProperty("jqx-rc-br"));this.addHandler(this.downbutton,"mouseup",function(d){b.disabled||(b.downbutton.removeClass(b.toThemeProperty("jqx-fill-state-pressed")),b._downArrow.removeClass(b.toThemeProperty("jqx-icon-arrow-down-selected")))});this.addHandler(this.upbutton,"mouseup",function(d){b.disabled||(b.upbutton.removeClass(b.toThemeProperty("jqx-fill-state-pressed")),b._upArrow.removeClass(b.toThemeProperty("jqx-icon-arrow-up-selected")))});this.removeHandler(c(document),
"mouseup."+this.element.id);this.addHandler(c(document),"mouseup."+this.element.id,function(d){b.upbutton.removeClass(b.toThemeProperty("jqx-fill-state-pressed"));b._upArrow.removeClass(b.toThemeProperty("jqx-icon-arrow-up-selected"));b.downbutton.removeClass(b.toThemeProperty("jqx-fill-state-pressed"));b._downArrow.removeClass(b.toThemeProperty("jqx-icon-arrow-down-selected"))});this.addHandler(this.downbutton,"mousedown",function(d){if(!b.disabled)return c.jqx.browser.msie&&9>c.jqx.browser.version&&
(b._inputSelection=b._selection()),b.downbutton.addClass(b.toThemeProperty("jqx-fill-state-pressed")),b._downArrow.addClass(b.toThemeProperty("jqx-icon-arrow-down-selected")),d.preventDefault(),d.stopPropagation(),!1});this.addHandler(this.upbutton,"mousedown",function(d){if(!b.disabled)return c.jqx.browser.msie&&9>c.jqx.browser.version&&(b._inputSelection=b._selection()),b.upbutton.addClass(b.toThemeProperty("jqx-fill-state-pressed")),b._upArrow.addClass(b.toThemeProperty("jqx-icon-arrow-up-selected")),
d.preventDefault(),d.stopPropagation(),!1});this.addHandler(this.upbutton,"mouseenter",function(d){b.upbutton.addClass(b.toThemeProperty("jqx-fill-state-hover"));b._upArrow.addClass(b.toThemeProperty("jqx-icon-arrow-up-hover"))});this.addHandler(this.upbutton,"mouseleave",function(d){b.upbutton.removeClass(b.toThemeProperty("jqx-fill-state-hover"));b._upArrow.removeClass(b.toThemeProperty("jqx-icon-arrow-up-hover"))});this.addHandler(this.downbutton,"mouseenter",function(d){b.downbutton.addClass(b.toThemeProperty("jqx-fill-state-hover"));
b._downArrow.addClass(b.toThemeProperty("jqx-icon-arrow-down-hover"))});this.addHandler(this.downbutton,"mouseleave",function(d){b.downbutton.removeClass(b.toThemeProperty("jqx-fill-state-hover"));b._downArrow.removeClass(b.toThemeProperty("jqx-icon-arrow-down-hover"))});this.upbutton.css("border-width","0px");this.downbutton.css("border-width","0px");this.disabled?(this.upbutton[0].disabled=!0,this.downbutton[0].disabled=!0):(this.upbutton[0].disabled=!1,this.downbutton[0].disabled=!1);this.spincontainer.addClass(this.toThemeProperty("jqx-input"));
this.spincontainer.addClass(this.toThemeProperty("jqx-rc-r"));this.spincontainer.css("border-width","0px");this.rtl?this.spincontainer.css("border-right-width","1px"):this.spincontainer.css("border-left-width","1px");this._upArrow=this.upbutton.find("div");this._downArrow=this.downbutton.find("div");this._upArrow.addClass(this.toThemeProperty("jqx-icon-arrow-up"));this._downArrow.addClass(this.toThemeProperty("jqx-icon-arrow-down"));this._upArrow.addClass(this.toThemeProperty("jqx-input-icon"));this._downArrow.addClass(this.toThemeProperty("jqx-input-icon"));
b=this;this._upArrow.hover(function(){b.disabled||b._upArrow.addClass(b.toThemeProperty("jqx-icon-arrow-up-hover"))},function(){b._upArrow.removeClass(b.toThemeProperty("jqx-icon-arrow-up-hover"))});this._downArrow.hover(function(){b.disabled||b._downArrow.addClass(b.toThemeProperty("jqx-icon-arrow-down-hover"))},function(){b._downArrow.removeClass(b.toThemeProperty("jqx-icon-arrow-down-hover"))});var d=c.jqx.mobile.isTouchDevice(),e="click";d&&(e=c.jqx.mobile.getTouchEventName("touchstart"));d&&
(this.addHandler(this.downbutton,"click",function(d){b.spinDown()}),this.addHandler(this.upbutton,"click",function(d){b.spinUp()}));this.addHandler(this.downbutton,e,function(e){d?(e.preventDefault(),e.stopPropagation()):(0==b._selection().start&&b._setSelectionStart(b.numberInput.val().length),c.jqx.browser.msie&&9>c.jqx.browser.version&&b._setSelectionStart(b._inputSelection.start));b.spinDown();return!1});this.addHandler(this.upbutton,e,function(e){d?(e.preventDefault(),e.stopPropagation()):(0==
b._selection().start&&b._setSelectionStart(b.numberInput.val().length),c.jqx.browser.msie&&9>c.jqx.browser.version&&b._setSelectionStart(b._inputSelection.start));b.spinUp();return!1})}else throw Error("jqxNumberInput: Missing reference to jqxbuttons.js.");},spinDown:function(){var b=this.decimal;if("none"!=this.spinMode)if(null==this.decimal)this.setDecimal(0);else{var d=this.getvalue("negative"),e=d?-1:0;(c.jqx.mobile.isTouchDevice()||"textbox"==this.inputMode)&&this._doTouchHandling();if(!this.disabled){var g=
this._selection(),f=this.decimal,h=this.getDecimal();if(h<this.min)this.setDecimal(this.min),this._setSelectionStart(g.start),this.spinDown();else if(h>this.max)this.setDecimal(this.max),this._setSelectionStart(g.start),this.spinDown();else{0>this.spinButtonsStep&&(this.spinButtonsStep=1);var l=parseInt(this.decimal)-this.spinButtonsStep,l=l.toString().length,q=e+l<=this.digits;if("advanced"!=this.spinMode){if(h-this.spinButtonsStep>=this.min&&q){l=1;for(q=0;q<this.decimalDigits;q++)l*=10;h=l*h-l*
this.spinButtonsStep;h=this._parseDecimalValueToEditorValue(h/l);this.setDecimal(h)}}else{d=this._getspindecimal();this._getSeparatorPosition();h=parseFloat(d.decimal);0>this.spinButtonsStep&&(this.spinButtonsStep=1);var l=parseInt(h)-this.spinButtonsStep,l=l.toString().length,q=e+l<=this.digits,l=1,r=d.decimal.indexOf(".");if(-1!=r){for(var t=d.decimal.length-r-1,l=1,q=0;q<t;q++)l*=10;h-=new Number(this.spinButtonsStep/l);h=h.toFixed(t);r=h.toString().indexOf(".");-1==r&&(h=h.toString()+".");t=h.toString()+
d.afterdecimal;t=new Number(t);t=t.toFixed(this.decimalDigits);t>=this.min&&(t=this._parseDecimalValueToEditorValue(t),this.setDecimal(t))}else h-this.spinButtonsStep>=this.min&&q&&(h=l*h-l*this.spinButtonsStep,t=(h/l).toString()+d.afterdecimal,t>=this.min&&(t=this._parseDecimalValueToEditorValue(t),this.setDecimal(t)))}void 0==t||"simple"!=this.inputMode?(this._setSelectionStart(g.start),this.savedValue=this.numberInput[0].value):(t=this.decimal.toString(),d=this.getvalue("negative"),0==e&&d?this._setSelectionStart(g.start+
1):void 0==t||void 0!=f&&f.toString().length!=t.length?d?this._setSelectionStart(g.start+1):this._setSelectionStart(g.start-1):this._setSelectionStart(g.start));b!=this.decimal&&(c.jqx.mobile.isTouchDevice()&&this._raiseEvent(0,{}),this._raiseEvent(7,{}));c.jqx.aria(self,"aria-valuenow",this.decimal)}}}},_getspindecimal:function(){var b=this._selection(),d="";this._getSeparatorPosition();var e=this._getVisibleItems(),c=this._getHiddenPrefixCount(),f=this.numberInput.val();this.numberInput.val().length==
b.start&&0==b.length&&(this._setSelection(b.start,b.start+1),b=this._selection());for(var h="advanced"!=this.inputMode,l=0;l<b.start;l++)if(h){var q=f.substring(l,l+1),r=!isNaN(parseInt(q));r&&(d+=q);q==this.decimalSeparator&&(d+=q)}else e[l].canEdit&&e[l].character!=this.promptChar?d+=e[l].character:e[l].canEdit||-1==this.decimalSeparatorPosition||e[l]!=e[this.decimalSeparatorPosition-c]||(0==d.length&&(d="0"),d+=e[l].character);for(var t="",l=b.start;l<e.length;l++)h?(q=f.substring(l,l+1),(r=!isNaN(parseInt(q)))&&
(t+=q),q==this.decimalSeparator&&(t+=q)):e[l].canEdit&&e[l].character!=this.promptChar?t+=e[l].character:e[l].canEdit||-1==this.decimalSeparatorPosition||e[l]!=e[this.decimalSeparatorPosition-c]||(t+=e[l].character);return{decimal:this.getvalue("negative")?"-"+this._parseDecimalValue(d).toString():this._parseDecimalValue(d).toString(),afterdecimal:this._parseDecimalValue(t)}},_parseDecimalValue:function(b){if("."!=this.decimalSeparator){var d=b.toString().indexOf(this.decimalSeparator);if(0<=d)return b.toString().substring(0,
d)+"."+b.toString().substring(d+1)}return b},_parseDecimalValueToEditorValue:function(b){if("."!=this.decimalSeparator){var d=b.toString().indexOf(".");if(0<=d)return b.toString().substring(0,d)+this.decimalSeparator+b.toString().substring(d+1)}return b},spinUp:function(){var b=this.decimal;if("none"!=this.spinMode)if(null==this.decimal)this.setDecimal(0);else{(c.jqx.mobile.isTouchDevice()||"textbox"==this.inputMode)&&this._doTouchHandling();var d=this.getvalue("negative"),e=d?-1:0;if(!this.disabled){var g=
this._selection(),f=this.decimal,h=this.getDecimal();if(h<this.min)this.setDecimal(this.min),this._setSelectionStart(g.start),this.spinUp();else if(h>this.max)this.setDecimal(this.max),this._setSelectionStart(g.start),this.spinUp();else{0>this.spinButtonsStep&&(this.spinButtonsStep=1);var l=parseInt(this.decimal)+this.spinButtonsStep,l=l.toString().length,q=e+l<=this.digits;if("advanced"!=this.spinMode){if(h+this.spinButtonsStep<=this.max&&q){l=1;for(d=0;d<this.decimalDigits;d++)l*=10;h=l*h+l*this.spinButtonsStep;
h=this._parseDecimalValueToEditorValue(h/l);this.setDecimal(h)}}else{var r=this._getspindecimal();this._getSeparatorPosition();h=parseFloat(r.decimal);0>this.spinButtonsStep&&(this.spinButtonsStep=1);var l=parseInt(h)+this.spinButtonsStep,l=l.toString().length,q=e+l<=this.digits,l=1,t=r.decimal.indexOf(".");if(-1!=t){for(var w=r.decimal.length-t-1,l=1,d=0;d<w;d++)l*=10;h+=new Number(this.spinButtonsStep/l);h=h.toFixed(w);t=h.toString().indexOf(".");-1==t&&(h=h.toString()+".");w=h.toString()+r.afterdecimal;
w=new Number(w);w=w.toFixed(this.decimalDigits);h=(new Number(w)).toFixed(this.decimalDigits);h<=this.max?(w=this._parseDecimalValueToEditorValue(w),this.setDecimal(w)):w=void 0}else h+this.spinButtonsStep<=this.max&&q&&(h=l*h+l*this.spinButtonsStep,w=(h/l).toString()+r.afterdecimal,h=(new Number(w)).toFixed(this.decimalDigits),h<=this.max?(w=this._parseDecimalValueToEditorValue(w),d&&-1==w.indexOf("-")&&"-0"!=r.decimal&&(w="-"+w),this.setDecimal(w)):w=void 0)}void 0==w||"simple"!=this.inputMode?
(this._setSelectionStart(g.start),this.savedValue=this.numberInput[0].value):(w=this.decimal.toString(),d=this.getvalue("negative"),-1!=e||d?void 0==w||void 0!=f&&f.toString().length!=w.length?d?this._setSelectionStart(g.start):this._setSelectionStart(1+g.start):this._setSelectionStart(g.start):this._setSelectionStart(-1+g.start));b!=this.decimal&&(c.jqx.mobile.isTouchDevice()&&this._raiseEvent(0,{}),this._raiseEvent(7,{}));c.jqx.aria(self,"aria-valuenow",this.decimal)}}}},_exitSimpleInputMode:function(b,
d,e,g){void 0==d&&(d=b.data);if(null!=d){if(void 0==e){if(null!=b.target&&null!=d.element&&(void 0!=b.target.id&&0<b.target.id.toString().length&&0<d.host.find("#"+b.target.id).length||b.target==d.element))return;g=d.host.offset();e=g.left;g=g.top;var f=d.host.width(),h=d.host.height();b=c(b.target).offset();if(b.left>=e&&b.left<=e+f&&b.top>=g&&b.top<=g+h)return}c.jqx.mobile.isOperaMiniBrowser()&&d.numberInput.attr("readonly",!0);if(!d.disabled&&!d.readOnly&&null!=c.data(d.numberInput,"simpleInputMode"))return c.data(d.numberInput,
"simpleInputMode",null),this._parseDecimalInSimpleMode(),!1}},_getDecimalInSimpleMode:function(){var b=this.decimal;if("."!=this.decimalSeparator){var d=b.toString().indexOf(this.decimalSeparator);0<d&&(b=b.toString().substring(0,d)+"."+b.toString().substring(d+1))}return b},_parseDecimalInSimpleMode:function(b){var d=this.getvalue("negative"),e=this.ValueString;void 0==e&&(e=this.GetValueString(this.numberInput.val(),this.decimalSeparator,""!=this.decimalSeparator));if("."!=this.decimalSeparator){var c=
e.toString().indexOf(".");0<c&&(e=e.toString().substring(0,c)+this.decimalSeparator+e.toString().substring(c+1))}d=d?"-":"";"left"==this.symbolPosition&&(d+=this.symbol);e=e.toString();0<=e.indexOf("-")&&(e=e.substring(e.indexOf("-")+1));d+=e;"right"==this.symbolPosition&&(d+=this.symbol);0!=b&&this.numberInput.val(d)},_enterSimpleInputMode:function(b,d){void 0==d&&(d=b.data);var e=this._selection();if(null!=d){var g=d.getvalue("negative"),f=d.decimal;g&&0<f&&(f=-f);d.numberInput.val(f);c.data(d.numberInput,
"simpleInputMode",!0);c.jqx.mobile.isOperaMiniBrowser()&&d.numberInput.attr("readonly",!1);this._parseDecimalInSimpleMode();this._setSelectionStart(e.start)}},setvalue:function(b,d){void 0!==this[b]&&("decimal"==b?this._setDecimal(d):(this[b]=d,this.propertyChangedHandler(this,b,d,d)))},getvalue:function(b){return"decimal"==b&&void 0!=this.negative&&1==this.negative?-Math.abs(this[b]):b in this?this[b]:null},_getString:function(){for(var b="",d=0;d<this.items.length;d++)b+=this.items[d].character;
return b},_literal:function(b,d,e,c){return{character:b,regex:d,canEdit:e,isSeparator:c}},_initializeLiterals:function(){if("textbox"!=this.inputMode){for(var b=0,d=this.negativeSymbol.length,e=0;e<d;e++){var c=this.negativeSymbol.substring(e,e+1),f="",h=!1,c=this.negative?this._literal(c,f,h,!1):this._literal("",f,h,!1);this.items[b]=c;b++}d=this.symbol.length;if("left"==this.symbolPosition)for(e=0;e<d;e++)c=this.symbol.substring(e,e+1),f="",h=!1,c=this._literal(c,f,h,!1),this.items[b]=c,b++;var l=
this.digits%this.groupSize;0==l&&(l=this.groupSize);for(e=0;e<this.digits;e++)c=this.promptChar,f="\\d",h=!0,c=this._literal(c,f,h,!1),this.items[b]=c,b++,e<this.digits-1&&void 0!=this.groupSeparator&&0<this.groupSeparator.length?(l--,0==l&&(l=this.groupSize,c=this._literal(this.groupSeparator,"",!1,!1),this.items[b]=c,b++)):e==this.digits-1&&(c.character=0);this.decimalSeparatorPosition=-1;if(void 0!=this.decimalDigits&&0<this.decimalDigits)for(c=this.decimalSeparator,0==c.length&&(c="."),c=this._literal(c,
"",!1,!0),this.items[b]=c,this.decimalSeparatorPosition=b,b++,e=0;e<this.decimalDigits;e++)f="\\d",l=this._literal(0,f,!0,!1),this.items[b]=l,b++;if("right"==this.symbolPosition)for(e=0;e<d;e++)c=this.symbol.substring(e,e+1),f="",h=!1,c=this._literal(c,f,h),this.items[b]=c,b++}},_match:function(b,d){return(new RegExp(d,"i")).test(b)},_raiseEvent:function(b,d){var e=this.events[b],g={owner:this};if("none"==this.host.css("display"))return!0;var f=d.charCode?d.charCode:d.keyCode?d.keyCode:0,h=!0,l=this.readOnly;
if((3==b||2==b)&&!this.disabled)if("simple"!=this.inputMode&&"textbox"!=this.inputMode)this._handleMouse(d);else return!0;if(0==b){var q=this.getvalue("decimal");this.max<q||this.min>q?this.host.addClass(this.toThemeProperty("jqx-input-invalid")):(this.host.removeClass(this.toThemeProperty("jqx-input-invalid")),this.host.addClass(this.toThemeProperty("jqx-input")),this.host.addClass(this.toThemeProperty("jqx-rc-all")))}q=new c.Event(e);q.owner=this;g.value=this.getvalue("decimal");g.text=this.numberInput.val();
q.args=g;7==b&&(g.type=this.changeType,this.changeType=null);void 0!=e&&4!=b&&5!=b&&6!=b&&(h=this.host.trigger(q));if("textbox"==this.inputMode)return h;if("simple"!=this.inputMode)if(4==b){if(l||this.disabled)return!1;h=this._handleKeyDown(d,f)}else if(5==b){if(l||this.disabled)h=!1}else{if(6==b){if(l||this.disabled)return!1;h=this._handleKeyPress(d,f)}}else if(4==b||5==b||6==b){if(c.jqx.mobile.isTouchDevice()||!0===this.touchMode)return!0;if(l||this.disabled)return!1;e=String.fromCharCode(f);parseInt(e);
e=!0;d.ctrlKey||d.shiftKey||d.metaKey||65<=f&&90>=f&&(e=!1);if(6==b&&void 0!=c.jqx.browser.opera&&8==f)return!1;if(e){4==b&&(e=this._handleSimpleKeyDown(d,f));if(189==f||45==f||109==f||173==f)h=this._selection(),4==b&&(0==this.getvalue("negative")?this.setvalue("negative",!0):this.setvalue("negative",!1),this.decimal=this.ValueString,this._parseDecimalInSimpleMode(),this._setSelectionStart(h.start),e=!1,this._raiseEvent(0,this.value),this._raiseEvent(1,this.numberInput.val()));g=g.ctrlKey||g.metaKey;
if(!c.jqx.browser.msie&&(g&&99==f||g&&67==f||g&&122==f||g&&90==f||g&&118==f||g&&86==f||d.shiftKey&&45==f))return(c.jqx.browser.webkit||c.jqx.browser.chrome)&&this._handleSimpleKeyDown(d,f),67==f?!0:!1;if(g&&97==f||g&&65==f)return!0;if(6==b&&e)return this._isSpecialKey(f)}return e}return h},GetSelectionInValue:function(b,d,e,c){var f=0;for(i=0;i<d.length&&!(i>=b);i++){var h=d.substring(i,i+1);(!isNaN(parseInt(h))||c&&d.substring(i,i+1)==e)&&f++}return f},GetSelectionLengthInValue:function(b,d,e,c){var f=
0;for(i=0;i<e.length&&!(i>=b+d);i++){var h=e.substring(i,i+1),h=!isNaN(parseInt(h));(0<d&&i>=b&&h||i>=b&&e[i].toString()==c)&&f++}return f},GetInsertTypeByPositionInValue:function(b,d,e,c){var f="before";e=this.GetValueString(e,d,c);d=this.GetDigitsToSeparator(0,e,d);b>d&&(f="after");return f},RemoveRange:function(b,d,e,c,f,h){var l=this.digits,q=d,r=0;this._selection();c=this.decimalSeparator;var t=""!=c;if(0==q&&this.ValueString.length<this.decimalPossibleChars-1)return r;var w=this.GetSeparatorPositionInText(c,
e);f||(w=this.GetSeparatorPositionInText(c,e));0>w&&!t&&1<e.length&&(w=e.length);-1==w&&(w=e.length);2>d&&1==h&&this.ValueString.length-this.decimalDigits-(t?1:0)==l&&b+d<w&&q++;d="";for(h=0;h<e.length;h++)h<b||h>=b+q?d+=e.substring(h,h+1):(l=e.substring(h,h+1),l==c?d+=c:(l=e.substring(h,h+1),this.symbol&&""!=this.symbol&&0<=this.symbol.indexOf(l)||(h>w?d+="0":(l=e.substring(h,h+1),isNaN(parseInt(l))||r++))));0==d.length&&(d="0");f?this.numberInput.val(d):this.ValueString=d;e=d.substring(0,1);e==
c&&isNaN(parseInt(e))&&(d="0"+d);this.decimal=this.ValueString=this.GetValueString(d,c,t);this._parseDecimalInSimpleMode();this._setSelectionStart(b);return r},InsertDigit:function(b,d){"number"!=typeof this.digits&&(this.digits=parseInt(this.digits));"number"!=typeof this.decimalDigits&&(this.decimalDigits=parseInt(this.decimalDigits));var e=1+this.digits,c=this._selection(),f=this.getvalue("negative"),h=!1;0==c.start&&""!=this.symbol&&"left"==this.symbolPosition&&(this._setSelectionStart(c.start+
1),c=this._selection(),h=!0);if(f&&h||f&&!h&&0==c.start)this._setSelectionStart(c.start+1),c=this._selection();var l=this.numberInput.val().substring(c.start,c.start+1),q=this.numberInput.val(),h=this.decimalSeparator,r=""!=h&&0<this.decimalDigits;if(l==this.symbol&&"right"==this.symbolPosition)if(0==this.decimalDigits){if(this.ValueString=this.GetValueString(q,h,r),this.ValueString.length>=e)return}else return;this.ValueString=this.GetValueString(q,h,r);""==this.ValueString&&(this.ValueString=(new Number(0)).toFixed(this.decimalDigits));
l=this.ValueString;0<this.decimalDigits&&d>=l.length&&(d=l.length-1);var t="";d<l.length&&(t=l.substring(d,d+1));var w=!1;"after"==this.GetInsertTypeByPositionInValue(d,h,q,r)&&(w=!0);t!=h&&this.ValueString.length-this.decimalDigits-(r?1:0)>=e-1&&(w=!0);"0"===t&&1===this.ValueString.length&&0===this.decimalDigits&&(w=!0);q=r?1:0;if(!(!w&&this.ValueString&&this.ValueString.length>=this.digits+this.decimalDigits+q)){if(w&&t!=h){e=l.substring(0,d);if(e.length==l.length&&this.ValueString.length>=this.digits+
this.decimalDigits+q)return;q=b;r="";d+1<l.length&&(r=l.substring(d+1));this.ValueString=e+q+r}else e=l.substring(0,d),q=b,r=l.substring(d),e=e+q+r,"0"==l.substring(0,1)&&l.substring(1,2)==h&&(e=q+l.substring(1),t==h&&(this._setSelectionStart(c.start-1),c=this._selection())),this.ValueString=e;this.decimal=f?-this.ValueString:this.ValueString;this._parseDecimalInSimpleMode();this._setSelectionStart(c.start+1);this.value=this.decimal;this._raiseEvent(0,this.value);this._raiseEvent(1,this.numberInput.val())}},
GetStringToSeparator:function(b,d,e){var c=this.GetSeparatorPositionInText(d,b);b=b.subString(0,c);return this.GetValueString(b,d,e)},GetSeparatorPositionInText:function(b,d){var e=-1;for(i=0;i<d.length;i++)if(d.substring(i,i+1)==b){e=i;break}return e},GetValueString:function(b,d,e){e="";for(var c=0;c<b.length;c++){var f=b.substring(c,c+1);isNaN(parseInt(f))||(e+=f);f==d&&(e+=d)}return e},Backspace:function(){var b=this._selection(),d=this._selection(),e=this.numberInput.val();if(0!=b.start||0!=b.length)this.isBackSpace=
!0,e=e.substring[b.start,b.start+1],isNaN(parseInt(e)),0<b.start&&0==b.length&&(this._setSelectionStart(b.start-1),this._selection()),this.Delete(),this._setSelectionStart(d.start-1),this.isBackSpace=!1},Delete:function(b){var d=this._selection(),e=this.numberInput.val();0===d.start&&"-"==e.substring(0,1)&&(this.setvalue("negative",!1),d=this._selection(),e=this.numberInput.val());b=d.start;var c=d.length,c=Math.max(c,1);this.ValueString=this.GetValueString(e,this.decimalSeparator,""!=this.decimalSeparator);
b>this.ValueString.indexOf(this.decimalSeparator)&&0<this.decimalDigits&&b++;e=0;this.symbol&&("left"==this.symbolPosition&&e--,this.negative&&e--);this.RemoveRange(d.start+e,c,this.ValueString,".",!1);d=this.ValueString.substring(0,1);isNaN(parseInt(d))&&(this.ValueString="0"+this.ValueString);this.decimal=this.ValueString;this._parseDecimalInSimpleMode();this._setSelectionStart(b);this.value=this.decimal;this._raiseEvent(0,this.value);this._raiseEvent(1,this.numberInput.val())},insertsimple:function(b){var d=
this._selection(),e=this.numberInput.val();if(!(d.start==e.length&&null!=this.decimal&&0<this.decimalDigits)){var c=this.decimalSeparator;this.ValueString=this.GetValueString(e,c,""!=c);var f=this.GetSelectionInValue(d.start,e,c,""!=c),e=this.GetSelectionLengthInValue(d.start,d.length,e,c);this.GetDigitsToSeparator(0,this.ValueString,c);0<this.decimalDigits&&f>=this.ValueString.length&&f--;""==this.ValueString?(this.ValueString=(new Number(0)).toFixed(this.decimalDigits),this.ValueString=this.ValueString.replace(".",
c),this.RemoveRange(d.start,e,this.ValueString,c,!1,!0),this.InsertDigit(b,0,d)):(this.RemoveRange(d.start,e,this.ValueString,c,!1,!0),this.InsertDigit(b,f,d))}},GetDigitsToSeparator:function(b,d,e){void 0==e&&(e=".");if(0>d.indexOf(e))return d.length;for(i=0;i<d.length;i++)if(d.substring(i,i+1)==e){b=i;break}return b},_handleSimpleKeyDown:function(b,d){var e=this._selection(),g=b.ctrlKey||b.metaKey;if((8==d||46==d)&&g)return this.setDecimal(null),!1;0<=e.start&&e.start<this.items.length&&(g=String.fromCharCode(d));
27===d&&(this.setDecimal(this._savedValue),g=this.GetSeparatorPositionInText(this.decimalSeparator,this.numberInput.val()),-1!=g&&this._setSelectionStart(g),b.preventDefault());if(this.rtl&&37==d){var f=(g=b.shiftKey)?1:0;g?this._setSelection(e.start+1-f,e.start+e.length+1):this._setSelection(e.start+1-f,e.start+1);return!1}if(this.rtl&&39==d)return(g=b.shiftKey)?this._setSelection(e.start-1,e.length+(g?1:0)+e.start-1):this._setSelection(e.start-1,e.start-1),!1;if(8==d)return this.Backspace(),!1;
if(190==d||110==d)return g=this.GetSeparatorPositionInText(this.decimalSeparator,this.numberInput.val()),-1!=g&&this._setSelectionStart(g+1),!1;if(188==d){f=this.numberInput.val();for(g=e.start;g<f.length;g++)if(f[g]==this.groupSeparator){this._setSelectionStart(1+g);break}return!1}if((g=b.ctrlKey||b.metaKey)&&99==d||g&&67==d){var e=this._selection(),f="",h=this.numberInput.val();if(0<e.start||0<e.length)for(g=e.start;g<e.end;g++)f+=h.substring(g,g+1);c.data(document.body,"jqxSelection",f);if(c.jqx.browser.msie)window.clipboardData.setData("Text",
f);else{var l=this,q=c('<textarea style="position: absolute; left: -1000px; top: -1000px;"/>');q.val(f);c("body").append(q);q.select();setTimeout(function(){document.designMode="off";q.select();q.remove();l.focus()},100)}this.savedText=f;return!0}if(g&&122==d||g&&90==d)return!1;if(g&&118==d||g&&86==d||b.shiftKey&&45==d)return c.jqx.browser.msie&&!this.savedText&&(this.savedText=window.clipboardData.getData("Text")),null!=this.savedText&&0<this.savedText.length?this.val(this.savedText):this.val(c.data(document.body,
"jqxSelection")),!1;g=String.fromCharCode(d);e=parseInt(g);96<=d&&105>=d&&(e=d-96,d-=48);if(!isNaN(e))return l=this,this.insertsimple(e),!1;if(46==d)return this.Delete(),!1;if(38==d)return this.spinUp(),!1;if(40==d)return this.spinDown(),!1;e=this._isSpecialKey(d);return c.jqx.browser.mozilla?e:!0},_getEditRange:function(){var b=0,d=0;for(i=0;i<this.items.length;i++)if(this.items[i].canEdit){b=i;break}for(i=this.items.length-1;0<=i;i--)if(this.items[i].canEdit){d=i;break}return{start:b,end:d}},_getVisibleItems:function(){var b=
[],d=0;for(i=0;i<this.items.length;i++)0<this.items[i].character.toString().length&&(b[d]=this.items[i],d++);return b},_hasEmptyVisibleItems:function(){var b=this._getVisibleItems();for(i=0;i<b.length;i++)if(b[i].canEdit&&b[i].character==this.promptChar)return!0;return!1},_getFirstVisibleNonEmptyIndex:function(){var b=this._getVisibleItems();for(i=0;i<b.length;i++)if(b[i].canEdit&&b[i].character!=this.promptChar)return i},_handleMouse:function(b,d){var e=this._selection();if(1>=e.length){var c=this._getFirstVisibleNonEmptyIndex();
e.start<c&&this._setSelectionStart(c)}},_insertKey:function(b){this.numberInput[0].focus();var d=String.fromCharCode(b);b=parseInt(d);if(!isNaN(b)){var e=0;for(i=0;i<this.items.length;i++)0==this.items[i].character.length&&e++;var g=this._selection(),f=this;if(0<=g.start&&g.start<=this.items.length){var h=!1;b=this._getFirstVisibleNonEmptyIndex();g.start<b&&0==g.length&&(!isNaN(d)||" "==d)&&(this._setSelectionStart(b),g=this._selection());this._getFirstEditableItemIndex();var l=this._getLastEditableItemIndex(),
q=this._getVisibleItems();c.each(q,function(b,c){if(!(g.start>b&&b!=q.length-1)){var w=q[b];b>l&&(w=q[l]);if(!isNaN(d)&&" "!=d&&w.canEdit){var z=f._getSeparatorPosition();if(f._match(d,w.regex)){if(!h&&0<g.length){for(j=g.start+e;j<g.end+e;j++)f.items[j].canEdit&&(f.items[j].character=j>z?"0":f.promptChar);f._getString();h=!0}var z=f._getSeparatorPosition(),B=f._hasEmptyVisibleItems();null==f.decimal&&(g.start=z-1,0>g.start&&(g.start=0),g.end=g.start);if(g.start<=z&&B){w=b;-1==f.decimalSeparatorPosition&&
g.start==z&&(w=b+1);null==f.decimal&&(w=g.start);B="";for(p=0;p<w;p++)q[p].canEdit&&q[p].character!=f.promptChar&&(B+=q[p].character);var B=B+d,v=1>f.decimal?1:0;g.start==z&&-1!=f.decimalSeparatorPosition&&(B+=f.decimalSeparator,v=0);for(p=w+v;p<q.length;p++)q[p].character==f.decimalSeparator&&q[p].isSeparator?B+=q[p].character:q[p].canEdit&&q[p].character!=f.promptChar&&(B+=q[p].character);"."!=f.decimalSeparator&&(B=f._parseDecimalValue(B));B=parseFloat(B).toString();B=new Number(B);B=B.toFixed(f.decimalDigits);
"."!=f.decimalSeparator&&(B=f._parseDecimalValueToEditorValue(B));f.setvalue("decimal",B);f._getString();g.end<z?f._setSelectionStart(g.end+v):f._setSelectionStart(g.end);1<=g.length&&f._setSelectionStart(g.end);g.length==f.numberInput.val().length&&(z=f._moveCaretToDecimalSeparator(),f._setSelectionStart(z-(0<=f.decimalSeparatorPosition?1:0)))}else if(g.start<z||g.start>z){if(f.numberInput.val().length==g.start&&-1!=f.decimalSeparatorPosition||f.numberInput.val().length==g.start&&-1==f.decimalSeparatorPosition&&
!B)return!1;B="";v=!1;for(p=0;p<b;p++)q[p].canEdit&&q[p].character!=f.promptChar&&(B+=q[p].character),q[p].character==f.decimalSeparator&&q[p].isSeparator&&(B+=q[p].character,v=!0);B+=d;v||g.start!=z-1||(B+=f.decimalSeparator,v=!0);for(p=b+1;p<q.length;p++)!v&&q[p].character==f.decimalSeparator&&q[p].isSeparator?B+=q[p].character:q[p].canEdit&&q[p].character!=f.promptChar&&(B+=q[p].character);f.setvalue("decimal",B);z=f._getString();if(0>f.decimalSeparatorPosition&&w==q[l])return f._setSelectionStart(b),
!1;w=z.indexOf(f.symbol);B=f.getvalue("negative")?1:0;w<=B&&(w=z.length);g.start<w?f._setSelectionStart(b+1):f._setSelectionStart(b);g.length==f.numberInput.val().length&&(z=f._moveCaretToDecimalSeparator(),f._setSelectionStart(z-1))}return!1}}}})}}},_handleKeyPress:function(b,d){var e=this._selection(),g=b.ctrlKey||b.metaKey;if(g&&97==d||g&&65==d)return!0;if(8==d)return 0<e.start&&this._setSelectionStart(e.start),!1;if(46==d)return e.start<this.items.length&&this._setSelectionStart(e.start),!1;c.jqx.browser.mozilla||
45!=d&&173!=d&&109!=d&&189!=d||(0==this.getvalue("negative")?this.setvalue("negative",!0):this.setvalue("negative",!1));c.jqx.browser.msie&&this._insertKey(d);return this._isSpecialKey(d)},_deleteSelectedText:function(){var b=this._selection(),d="",e=this._getSeparatorPosition(),c=this._getVisibleItems(),f=this._getHiddenPrefixCount();this.numberInput.val().length==b.start&&0==b.length&&(this._setSelection(b.start,b.start+1),b=this._selection());for(i=0;i<b.start;i++)c[i].canEdit&&c[i].character!=
this.promptChar?d+=c[i].character:c[i].canEdit||-1==this.decimalSeparatorPosition||c[i]!=c[this.decimalSeparatorPosition-f]||(0==d.length&&(d="0"),d+=c[i].character);for(i=b.start;i<b.end;i++)i>e&&-1!=this.decimalSeparatorPosition?c[i].canEdit&&c[i].character!=this.promptChar&&(d+="0"):c[i].canEdit||-1==this.decimalSeparatorPosition||c[i]!=c[this.decimalSeparatorPosition-f]||(0==d.length&&(d="0"),d+=c[i].character);for(i=b.end;i<c.length;i++)c[i].canEdit&&c[i].character!=this.promptChar?d+=c[i].character:
c[i].canEdit||-1==this.decimalSeparatorPosition||c[i]!=c[this.decimalSeparatorPosition-f]||(0==d.length&&(d="0"),d+=c[i].character);this.setvalue("decimal",d);return 0<b.length},_restoreInitialState:function(){var b=parseInt(this.decimalDigits);0<b&&(b+=2);for(k=this.items.length-1;k>this.items.length-1-b&&this.items[k];k--)this.items[k].canEdit&&this.items[k].character==this.promptChar&&(this.items[k].character=0)},clear:function(){this.setDecimal(0)},clearDecimal:function(){if("textbox"==this.inputMode)this.numberInput.val();
else{for(var b=0;b<this.items.length;b++)this.items[b].canEdit&&(this.items[b].character=this.promptChar);this._restoreInitialState()}},_saveSelectedText:function(){var b=this._selection(),d="",e=this._getVisibleItems();if(0<b.start||0<b.length)for(i=b.start;i<b.end;i++)e[i].canEdit&&e[i].character!=this.promptChar?d+=e[i].character:e[i].isSeparator&&(d+=e[i].character);c.jqx.browser.msie&&window.clipboardData.setData("Text",d);return d},_pasteSelectedText:function(){this._selection();this.selectedText=
c.data(document.body,"jqxSelection");if(window.clipboardData){var b=window.clipboardData.getData("Text");if(b!=this.selectedText&&0<b.length&&(this.selectedText=window.clipboardData.getData("Text"),null==this.selectedText||void 0==this.selectedText))return}this._getVisibleItems();if(null!=this.selectedText)for(b=0;b<this.selectedText.length;b++){var d=parseInt(this.selectedText[b]);isNaN(d)||this._insertKey(48+d)}},_getHiddenPrefixCount:function(){var b=0;this.negative||b++;if("left"==this.symbolPosition)for(i=
0;i<this.symbol.length;i++)""==this.symbol.substring(i,i+1)&&b++;return b},_getEditableItem:function(){var b=this._selection();for(i=0;i<this.items.length;i++)if(i<b.start&&this.items[i].canEdit&&this.items[i].character!=this.promptChar)return this.items[i];return null},_getEditableItems:function(){var b=[],d=0;for(i=0;i<this.items.length;i++)this.items[i].canEdit&&(b[d]=this.items[i],d++);return b},_getValidSelectionStart:function(b){for(i=this.items.length-1;0<=i;i--)if(this.items[i].canEdit&&this.items[i].character!=
this.promptChar)return i;return-1},_getEditableItemIndex:function(b){b=this._selection();var d=this._getHiddenPrefixCount(),e=this._getVisibleItems(),c=b.start,f=-1;for(i=0;i<c;i++)i<e.length&&e[i].canEdit&&(f=i+d);if(-1==f&&0<b.length)for(c=b.end,i=0;i<c;i++)if(i<e.length&&e[i].canEdit){f=i+d;break}return f},_getEditableItemByIndex:function(b){for(k=0;k<this.items.length;k++)if(k>b&&this.items[k].canEdit&&this.items[k].character!=this.promptChar)return k;return-1},_getFirstEditableItemIndex:function(){var b=
this._getVisibleItems();for(m=0;m<b.length;m++)if(b[m].character!=this.promptChar&&b[m].canEdit&&"0"!=b[m].character)return m;return-1},_getLastEditableItemIndex:function(){var b=this._getVisibleItems();for(m=b.length-1;0<=m;m--)if(b[m].character!=this.promptChar&&b[m].canEdit)return m;return-1},_moveCaretToDecimalSeparator:function(){for(i=this.items.length-1;0<=i;i--)if(this.items[i].character==this.decimalSeparator&&this.items[i].isSeparator)return this.negative?this._setSelectionStart(i+1):this._setSelectionStart(i),
i;return this.numberInput.val().length},_handleBackspace:function(){var b=this._selection(),d=this._getHiddenPrefixCount(),e=this._getEditableItemIndex()-d,c=this._getFirstVisibleNonEmptyIndex(),d=!1;this.negative&&(d=!0,c>=e+1||0==b.start)&&(this.setvalue("negative",!1),0==b.length&&(this._setSelectionStart(b.start-1),b=this._selection()));if(0<=e){if(0==b.length&&-1!=e&&this._setSelection(e,e+1),(e=b.start>this._getSeparatorPosition()+1&&0<this.decimalSeparatorPosition)&&(b=this._selection()),this._deleteSelectedText(),
1>b.length||e?this._setSelectionStart(b.start):1<=b.length&&this._setSelectionStart(b.end),b.length==this.numberInput.val().length||d)b=this._moveCaretToDecimalSeparator(),this._setSelectionStart(b-1)}else this._setSelectionStart(b.start)},_handleKeyDown:function(b,d){var e=this._selection(),g=b.ctrlKey||b.metaKey;if((8==d||46==d)&&g)return this.setDecimal(null),!1;if(this.rtl&&37==d){var f=(g=b.shiftKey)?1:0;g?this._setSelection(e.start+1-f,e.start+e.length+1):this._setSelection(e.start+1-f,e.start+
1);return!1}if(this.rtl&&39==d)return(g=b.shiftKey)?this._setSelection(e.start-1,e.length+(g?1:0)+e.start-1):this._setSelection(e.start-1,e.start-1),!1;if(g&&97==d||g&&65==d)return!0;if(g&&120==d||g&&88==d)return this.selectedText=this._saveSelectedText(b),c.data(document.body,"jqxSelection",this.selectedText),this._handleBackspace(),!1;if(g&&99==d||g&&67==d)return this.selectedText=this._saveSelectedText(b),c.data(document.body,"jqxSelection",this.selectedText),!1;if(g&&122==d||g&&90==d)return!1;
if(g&&118==d||g&&86==d||b.shiftKey&&45==d)return this._pasteSelectedText(),!1;0<=e.start&&e.start<this.items.length&&String.fromCharCode(d);if(8==d)return this._handleBackspace(),!1;if(190==d||110==d)return this._moveCaretToDecimalSeparator(),!1;if(188==d){g=this.numberInput.val();for(i=e.start;i<g.length;i++)if(g[i]==this.groupSeparator){this._setSelectionStart(1+i);break}return!1}if(null==c.jqx.browser.msie&&(g=String.fromCharCode(d),g=parseInt(g),96<=d&&105>=d&&(g=d-96,d-=48),!isNaN(g)))return this._insertKey(d),
!1;if(46==d){g=this._getVisibleItems();if(e.start<g.length){f=0==g[e.start].canEdit?2:1;if(0==e.start&&this.negative&&(this.setvalue("negative",!1),0==e.length&&this._setSelectionStart(0),e=this._selection(),0==e.length))return!1;0==e.length&&this._setSelection(e.start+f,e.start+f+e.length);this._handleBackspace();1>new Number(this.decimal)||e.start>this._getSeparatorPosition()?this._setSelectionStart(e.end+f):e.start+1<this.decimalSeparatorPosition&&this._setSelectionStart(e.end+f)}return!1}if(38==
d)return this.spinUp(),!1;if(40==d)return this.spinDown(),!1;27===d&&(this.setDecimal(this._savedValue),this._setSelectionStart(e.end),b.preventDefault());e=this._isSpecialKey(d);!c.jqx.browser.mozilla||45!=d&&173!=d&&109!=d&&189!=d||(0==this.getvalue("negative")?this.setvalue("negative",!0):this.setvalue("negative",!1));return c.jqx.browser.mozilla?e:!0},_isSpecialKey:function(b){return 8!=b&&9!=b&&13!=b&&35!=b&&36!=b&&37!=b&&39!=b&&27!=b&&46!=b?!1:!0},_selection:function(){try{if("selectionStart"in
this.numberInput[0]){var b=this.numberInput[0],d=b.selectionEnd-b.selectionStart;return{start:b.selectionStart,end:b.selectionEnd,length:d,text:b.value}}var e=document.selection.createRange();if(null==e)return{start:0,end:b.value.length,length:0};var c=this.numberInput[0].createTextRange(),f=c.duplicate();c.moveToBookmark(e.getBookmark());f.setEndPoint("EndToStart",c);d=e.text.length;return{start:f.text.length,end:f.text.length+e.text.length,length:d,text:e.text}}catch(h){return{start:0,end:0,length:0}}},
selectAll:function(){var b=this.numberInput;setTimeout(function(){if("selectionStart"in b[0])b[0].focus(),b[0].setSelectionRange(0,b[0].value.length);else{var d=b[0].createTextRange();d.collapse(!0);d.moveEnd("character",b[0].value.length);d.moveStart("character",0);d.select()}},10)},_setSelection:function(b,d){if(1!=this._disableSetSelection&&!c.jqx.mobile.isTouchDevice()&&1!=this.touchMode)try{if("selectionStart"in this.numberInput[0])this.numberInput[0].focus(),this.numberInput[0].setSelectionRange(b,
d);else{var e=this.numberInput[0].createTextRange();e.collapse(!0);e.moveEnd("character",d);e.moveStart("character",b);e.select()}}catch(g){}},_setSelectionStart:function(b){this._setSelection(b,b);c.data(this.numberInput,"selectionstart",b)},resize:function(b,d){this.width=b;this.height=d;this._render(!1)},_render:function(b){var d=parseInt(this.host.css("border-left-width")),e=parseInt(this.host.css("border-left-width")),g=parseInt(this.host.css("border-left-width")),f=parseInt(this.host.css("border-left-width"));
this.numberInput.css("padding-top","0px");this.numberInput.css("padding-bottom","0px");null!=this.width&&-1!=this.width.toString().indexOf("px")?this.element.style.width=this.width:void 0==this.width||isNaN(this.width)||(this.element.style.width=this.width+"px");null!=this.height&&-1!=this.height.toString().indexOf("px")?this.element.style.height=this.height:void 0==this.height||isNaN(this.height)||(this.element.style.height=this.height+"px");var h=this.host.width(),l=this.host.height();this.numberInput.css({"border-left-width":0,
"border-right-width":0,"border-bottom-width":0,"border-top-width":0});isNaN(g)&&(g=1);isNaN(e);isNaN(f);isNaN(d);this.numberInput.css("text-align",this.textAlign);d=this.numberInput.css("font-size");""==d&&(d=13);this.numberInput.css("height",parseInt(d)+4+"px");this.numberInput.css("width",h-2);g=l-2*g-parseInt(d)-2;isNaN(g)&&(g=0);0>g&&(g=0);this.spinButtons&&this.spincontainer&&(h-=parseInt(this.spinButtonsWidth-2),c.jqx.mobile.isTouchDevice()||!0===this.touchMode?(this.spincontainer.width(2*this.spinButtonsWidth),
h-=this.spinButtonsWidth,this.upbutton.height("100%"),this.downbutton.height("100%"),this.downbutton.css("float","left"),this.upbutton.css("float","right"),this.upbutton.width(this.spinButtonsWidth),this.downbutton.width(1+this.spinButtonsWidth)):(this.spincontainer.width(this.spinButtonsWidth),this.upbutton.width(this.spinButtonsWidth+2),this.downbutton.width(this.spinButtonsWidth+2),this.upbutton.height("50%"),this.downbutton.height("50%"),this.spincontainer.width(this.spinButtonsWidth)),this._upArrow.height("100%"),
this._downArrow.height("100%"),this.numberInput.css("width",h-6),this.numberInput.css("margin-right","2px"));h=g/2;c.jqx.browser.msie&&8>c.jqx.browser.version&&(h=g/4);this.numberInput.css("padding-left","0px");this.numberInput.css("padding-right","0px");this.numberInput.css("padding-top",Math.round(h)+"px");this.numberInput.css("padding-bottom",Math.round(h)+"px");if(void 0==b||1==b)this.numberInput.val(this._getString()),"advanced"!=this.inputMode&&this._parseDecimalInSimpleMode()},destroy:function(){this._removeHandlers();
this.host.remove()},inputValue:function(b){if(void 0===b)return this._value();this.propertyChangedHandler(this,"value",this._value,b);this._refreshValue();return this},_value:function(){return this.numberInput.val()},val:function(b){if(void 0!==b&&"object"!=typeof b||null===b)if(null===b)this.setDecimal(null);else{b=b.toString();-1<b.indexOf(this.symbol)&&(b=b.replace(this.symbol,""));var d=this.groupSeparator,e=b;if(""!=d){for(b=e.indexOf(d);-1!=b;)e=e.replace(d,""),b=e.indexOf(d);b=e}b=b.replace(this.decimalSeparator,
".");d="";for(e=0;e<b.length;e++){var c=b.substring(e,e+1);"-"===c&&(d+="-");"."===c&&(d+=".");null!=c.match(/^[0-9]+$/)&&(d+=c)}b=d.replace(/ /g,"");b=new Number(b);this.setDecimal(b)}else return this.getDecimal()},getDecimal:function(){if(null==this.decimal)return null;"simple"==this.inputMode&&(this._parseDecimalInSimpleMode(!1),this.decimal=this._getDecimalInSimpleMode(this.decimal));return""==this.decimal?0:this.getvalue("negative")&&0<this.decimal?-parseFloat(this.decimal):parseFloat(this.decimal)},
setDecimal:function(b){var d=b;if("."!=this.decimalSeparator){if(null!==b){var e=b;if("number"!=typeof b){b=b.toString();var c=b.indexOf(".");if(-1!=c){var f=b.substring(0,c);b=b.substring(c+1);e=f+"."+b;-1!=f.indexOf("-")&&(f=f.substring(1));b="advanced"!=this.inputMode?f+"."+b:f+this.decimalSeparator+b}else c=b.indexOf(this.decimalSeparator),-1!=c&&(f=b.substring(0,c),b=b.substring(c+1),e=f+"."+b,-1!=f.indexOf("-")&&(f=f.substring(1)),b="advanced"!=this.inputMode?f+"."+b:f+this.decimalSeparator+
b)}0>e?this.setvalue("negative",!0):this.setvalue("negative",!1)}this._setDecimal(b)}else 0>b?this.setvalue("negative",!0):this.setvalue("negative",!1),null===b?this._setDecimal(b):this._setDecimal(Math.abs(b));null==d&&this.numberInput.val("")},_setDecimal:function(b){this.allowNull||null!=b||(b=this.decimal=0);if(null==b)this.value=this.decimal=null,this.clearDecimal(),this._refreshValue(),this.value=this.decimal=null;else{-1!=b.toString().indexOf("e")&&(b=(new Number(b)).toFixed(this.decimalDigits).toString());
this.clearDecimal();var d=b.toString(),e="",c="",f=!0;0==d.length&&(d="0");for(var h=0;h<d.length;h++){if("number"==typeof b){if("."==d.substring(h,h+1)){f=!1;continue}}else if(d.substring(h,h+1)==this.decimalSeparator){f=!1;continue}f?e+=d.substring(h,h+1):c+=d.substring(h,h+1)}0<e.length&&(e=parseFloat(e).toString());h=this.digits;h<e.length&&(e=e.substr(0,h));d=0;f=this._getSeparatorPosition();h=this._getHiddenPrefixCount();for(h=f+=h;0<=h;h--)h<this.items.length&&this.items[h].canEdit&&d<e.length&&
(this.items[h].character=e.substring(e.length-d-1,e.length-d),d++);d=0;for(h=f;h<this.items.length;h++)this.items[h].canEdit&&d<c.length&&(this.items[h].character=c.substring(d,d+1),d++);this._refreshValue();"."!=this.decimalSeparator&&(e=b.toString().indexOf(this.decimalSeparator),0<e&&(b=b.toString().substring(0,e)+"."+b.toString().substring(e+1)));this.ValueString=(new Number(b)).toFixed(this.decimalDigits);"advanced"!=this.inputMode&&(this._parseDecimalInSimpleMode(),this._raiseEvent(1,this.ValueString));
"textbox"==this.inputMode&&(this.decimal=this.ValueString,this.getvalue("negative")&&(this.decimal="-"+this.ValueString));b=this.val();b<this.min||b>this.max?this.host.addClass("jqx-input-invalid"):this.host.removeClass("jqx-input-invalid")}},_getSeparatorPosition:function(){var b=this._getHiddenPrefixCount();return 0<this.decimalSeparatorPosition?this.decimalSeparatorPosition-b:this.items.length-b},_setTheme:function(){this.host.removeClass();this.host.addClass(this.toThemeProperty("jqx-input"));
this.host.addClass(this.toThemeProperty("jqx-rc-all"));this.host.addClass(this.toThemeProperty("jqx-widget"));this.host.addClass(this.toThemeProperty("jqx-widget-content"));this.host.addClass(this.toThemeProperty("jqx-numberinput"));this.spinButtons&&(this.downbutton.removeClass(),this.upbutton.removeClass(),this.downbutton.addClass(this.toThemeProperty("jqx-scrollbar-button-state-normal")),this.upbutton.addClass(this.toThemeProperty("jqx-scrollbar-button-state-normal")),this._upArrow.removeClass(),
this._downArrow.removeClass(),this._upArrow.addClass(this.toThemeProperty("jqx-icon-arrow-up")),this._downArrow.addClass(this.toThemeProperty("jqx-icon-arrow-down")));this.numberInput.removeClass();this.numberInput.addClass(this.toThemeProperty("jqx-input-content"))},propertiesChangedHandler:function(b,d,e){e&&e.width&&e.height&&2==Object.keys(e).length&&b._render()},propertyChangedHandler:function(b,d,e,g){if(!(b.batchUpdate&&b.batchUpdate.width&&b.batchUpdate.height&&2==Object.keys(b.batchUpdate).length)){"template"==
d&&(b.upbutton.removeClass(b.toThemeProperty("jqx-"+b.template)),b.downbutton.removeClass(b.toThemeProperty("jqx-"+b.template)),b.upbutton.addClass(b.toThemeProperty("jqx-"+b.template)),b.downbutton.addClass(b.toThemeProperty("jqx-"+b.template)));if(("digits"==d||"groupSize"==d||"decimalDigits"==d)&&0>g)throw new Exception(this.invalidArgumentExceptions[0]);"placeHolder"==d&&b.numberInput.attr("placeholder",b.placeHolder);"theme"===d&&c.jqx.utilities.setTheme(e,g,b.host);"digits"==d&&g!=e&&(b.digits=
parseInt(g));if("min"==d||"max"==d)c.jqx.aria(b,"aria-value"+d,g.toString()),b._refreshValue();"decimalDigits"==d&&g!=e&&(b.decimalDigits=parseInt(g));if("decimalSeparator"==d||"digits"==d||"symbol"==d||"symbolPosition"==d||"groupSize"==d||"groupSeparator"==d||"decimalDigits"==d||"negativeSymbol"==d){var f=b.decimal;"decimalSeparator"==d&&""==g&&(g=" ");e!=g&&(b._selection(),b.items=[],b._initializeLiterals(),b.value=b._getString(),b._refreshValue(),b._setDecimal(f))}"rtl"==d&&(b.rtl?(b.spincontainer&&
(b.spincontainer.css("float","right"),b.spincontainer.css("border-right-width","1px")),b.numberInput.css("float","right")):(b.spincontainer&&(b.spincontainer.css("float","right"),b.spincontainer.css("border-right-width","1px")),b.numberInput.css("float","left")));"spinButtons"==d&&(b.spincontainer?(g?b.spincontainer.css("display","block"):b.spincontainer.css("display","none"),b._render()):b._spinButtons());"touchMode"===d&&(b.inputMode="textbox",b.spinMode="simple",b.render());"negative"==d&&"advanced"==
b.inputMode&&(e=b._selection(),g?(b.items[0].character=b.negativeSymbol[0],f=1):(b.items[0].character="",f=-1),b._refreshValue(),b.isInitialized&&b._setSelection(e.start+f,e.end+f));"decimal"==d&&(b.value=g,b.setDecimal(g));"value"===d&&(b.value=g,b.setDecimal(g),b._raiseEvent(1,g));"textAlign"==d&&(b.textAlign=g,b._render());"disabled"==d&&(b.numberInput.attr("disabled",g),b.disabled?b.host.addClass(b.toThemeProperty("jqx-fill-state-disabled")):b.host.removeClass(b.toThemeProperty("jqx-fill-state-disabled")),
c.jqx.aria(b,"aria-disabled",g.toString()));"readOnly"==d&&(b.readOnly=g);if("promptChar"==d){for(i=0;i<b.items.length;i++)b.items[i].character==b.promptChar&&(b.items[i].character=g);b.promptChar=g}"width"==d?(b.width=g,b._render()):"height"==d&&(b.height=g,b._render())}},_value:function(){return this.value},_refreshValue:function(){var b;if("textbox"!==this.inputMode){b=this.value=this._getString();for(var d="",e=0;e<this.items.length;e++){var c=this.items[e];c.canEdit&&c.character!=this.promptChar&&
(d+=c.character);e==this.decimalSeparatorPosition&&(d+=".")}this.decimal=d;d=!1;this.oldValue!==b&&(this.oldValue=b,this._raiseEvent(0,b),d=!0);"simple"!=this.inputMode&&(this.numberInput.val(b),d&&this._raiseEvent(1,b));null==b&&this.numberInput.val("")}}})})(jqxBaseFramework);
(function(c){c.jqx.jqxWidget("jqxPasswordInput","",{});c.extend(c.jqx._jqxPasswordInput.prototype,{defineInstance:function(){var b={width:null,height:null,disabled:!1,rtl:!1,placeHolder:null,showStrength:!1,showStrengthPosition:"right",maxLength:null,minLength:null,showPasswordIcon:!0,strengthTypeRenderer:null,passwordStrength:null,changeType:null,localization:{passwordStrengthString:"Password strength",tooShort:"Too short",weak:"Weak",fair:"Fair",good:"Good",strong:"Strong",showPasswordString:"Show Password"},
strengthColors:{tooShort:"rgb(170, 0, 51)",weak:"rgb(170, 0, 51)",fair:"rgb(255, 204, 51)",good:"rgb(45, 152, 243)",strong:"rgb(118, 194, 97)"}};if(this===c.jqx._jqxPasswordInput.prototype)return b;c.extend(!0,this,b);return b},createInstance:function(){this._inDOM=document.body.contains(this.element);this.render()},render:function(){var b=this,d=c.jqx.browser.version;this._browserCheck="msie"!=c.jqx.browser.browser||"7.0"!=d&&"8.0"!=d;this.widgetID=b.element.id;if("password"!=this.element.getAttribute("type"))throw"Invalid input type. Please set the type attribute of the input element to password.";
b._hidden=!0;b._setTheme();b._setAttributes();b._showPassword();b._showStrength();c.jqx.utilities.resize(this.host,function(){if(b._inDOM)b.element===document.activeElement&&(b._positionIcon(),b.showStrength&&b.host.jqxTooltip("close"));else{var d=b.element.parentNode;b.element.nextSibling?d.insertBefore(b.icon,b.element.nextSibling):d.appendChild(b.icon);b._inDOM=!0}})},refresh:function(b){b||(this.removeHandler(this.host,"change.passwordinput"+this.widgetID),this.removeHandler(this.host,"focus.passwordinput"+
this.widgetID),this.removeHandler(this.host,"blur.passwordinput"+this.widgetID),this.removeHandler(this.host,"click.passwordinput"+this.widgetID),this.removeHandler(this.host,"keyup.passwordinput"+this.widgetID),this.removeHandler(this.icon,"mousedown.passwordinput"+this.widgetID),this.removeHandler(c(document),"mouseup.passwordinput"+this.widgetID),this.removeHandler(c(document),"mousedown.passwordinput"+this.widgetID),this._setAttributes(),this._setTheme(),this._showPassword(),this._showStrength())},
val:function(b){var d=this.element.value,e="placeholder"in this.element;if(c.isEmptyObject(b)&&""!==b)return e||d!==this.placeHolder||(d=""),d;if(!e||b!==d){if(!e){if(""===b){d!==this.placeHolder&&(this.element.value=this.placeHolder,this.element.setAttribute("type","text"));return}this.element.setAttribute("type","password")}this.element.value=b;!0===this.showStrength&&this._evaluateStrength()}},propertyChangedHandler:function(b,d,e,g){"theme"===d?c.jqx.utilities.setTheme(e,g,b.host):"disabled"==
d?b.disabled?(b.element.setAttribute("disabled","disabled"),b.element.className+=" "+b.toThemeProperty("jqx-fill-state-disabled")):(b.host.removeAttr("disabled"),b.host.removeClass(b.toThemeProperty("jqx-fill-state-disabled"))):"placeHolder"==d?this._browserCheck&&("placeholder"in this.element?b.element.setAttribute("placeholder",b.placeHolder):""===b.element.value?(b.element.setAttribute("type","text"),b.element.value=g):b.element.value==e&&(b.element.value=g)):this.refresh()},resize:function(b,
d){this.width=b;this.height=d;null!=this.width&&-1!=this.width.toString().indexOf("px")?this.element.style.width=this.width:void 0==this.width||isNaN(this.width)||(this.element.style.width=this.width+"px");null!=this.height&&-1!=this.height.toString().indexOf("px")?this.element.style.height=this.height:void 0==this.height||isNaN(this.height)||(this.element.style.height=this.height+"px")},_setAttributes:function(){var b=this,d=b.element;null!=this.width&&-1!=this.width.toString().indexOf("px")?this.element.style.width=
this.width:void 0==this.width||isNaN(this.width)||(this.element.style.width=this.width+"px");null!=this.height&&-1!=this.height.toString().indexOf("px")?this.element.style.height=this.height:void 0==this.height||isNaN(this.height)||(this.element.style.height=this.height+"px");b.maxLength&&d.setAttribute("maxlength",b.maxLength);b.minLength&&d.setAttribute("minLength",b.minLength);b.placeHolder&&b._browserCheck&&("placeholder"in b.element?d.setAttribute("placeholder",b.placeHolder):""===d.value&&(d.setAttribute("type",
"text"),d.value=b.placeHolder));b.disabled?(d.setAttribute("disabled","disabled"),d.className+=" "+this.toThemeProperty("jqx-fill-state-disabled")):(d.removeAttribute("disabled"),b.host.removeClass(b.toThemeProperty("jqx-fill-state-disabled")));var e=!1;b.addHandler(d,"change.passwordinput"+b.widgetID,function(d){e||(d.preventDefault(),d.stopPropagation(),e=!0,b._raiseEvent(),e=!1)});b.addHandler(d,"click.passwordinput"+b.widgetID,function(){b.showPasswordIcon&&b.icon&&(b.icon.style.display="inline",
b._positionIcon())});b.interval=null;b.addHandler(d,"keydown.passwordinput"+b.widgetID,function(){b.changeType="keyboard";if(b.showPasswordIcon&&b.icon){b.interval&&clearInterval(b.interval);var d=0;b.interval=setInterval(function(){"none"!=b.icon.style.display?(b._positionIcon(),d++,5<d&&clearInterval(b.interval)):clearInterval(b.interval)},100)}});b.addHandler(d,"focus.passwordinput"+b.widgetID,function(){b._focused=!0;d.className+=" "+b.toThemeProperty("jqx-fill-state-focus");!b.placeHolder||!b._browserCheck||
"placeholder"in b.element||d.value!=b.placeHolder||(d.value="",b._hidden&&d.setAttribute("type","password"));0<b.val().length&&b.showStrength&&b.host.jqxTooltip("content")&&b.host.jqxTooltip("open");b.showPasswordIcon&&b.icon&&(b.icon.style.display="inline",b._positionIcon())});b.addHandler(d,"blur.passwordinput"+b.widgetID,function(){b._focused=!1;b.host.removeClass(b.toThemeProperty("jqx-fill-state-focus"));!b.placeHolder||!b._browserCheck||"placeholder"in b.element||""!==d.value||(b.element.value=
b.placeHolder,b.element.setAttribute("type","text"));b.showPasswordIcon&&b._browserCheck&&(!1===b.rtl?b.host.removeClass(b.toThemeProperty("jqx-passwordinput-password-icon-ltr")):b.host.removeClass(b.toThemeProperty("jqx-passwordinput-password-icon-rtl")));b.showStrength&&b.host.jqxTooltip("close");b.showPasswordIcon&&b.icon&&(b.icon.style.display="none")})},destroy:function(){this.host.jqxTooltip&&this.host.jqxTooltip("destroy");this.host.remove()},_setTheme:function(){var b="jqx-widget jqx-widget-content jqx-input jqx-input-widget jqx-rc-all";
this.rtl?(b+=" jqx-rtl",this.element.style.direction="rtl"):(this.host.removeClass(this.toThemeProperty("jqx-rtl")),this.element.style.direction="ltr");this.element.className+=" "+this.toThemeProperty(b)},_showPassword:function(){if(this.showPasswordIcon&&this._browserCheck){var b=this,d=document.createElement("span"),e=".passwordinput"+b.widgetID;d.setAttribute("tabindex",-1);d.setAttribute("hasfocus",!1);d.setAttribute("title",b.localization.showPasswordString);d.style.position="absolute";d.style.display=
"none";d.className=b.toThemeProperty("jqx-passwordinput-password-icon");var g=b.element.parentNode;g&&(b.element.nextSibling?g.insertBefore(d,b.element.nextSibling):g.appendChild(d));b.icon=d;b._positionIcon();var f=function(){b.element.setAttribute("type","password");b._hidden=!0},h=function(){!1===b._hidden?f():b._hidden&&(b.element.setAttribute("type","text"),b._hidden=!1)};c.jqx.mobile.isTouchDevice()?b.addHandler(b.icon,"mousedown"+e,function(){h();return!1}):(b.addHandler(b.icon,"mousedown"+
e,function(){h();return!1}),b.addHandler(c(document),"mouseup"+e,function(){f();return!1}),b.addHandler(c(document),"mousedown"+e,function(){b._focused&&f()}))}},_positionIcon:function(){var b=this.host.offset(),d=this.element.offsetWidth,e=this.element.offsetHeight,g=c(this.icon);this.rtl?g.offset({top:parseInt(b.top+e/2-5,10),left:b.left+2}):g.offset({top:parseInt(b.top+e/2-5,10),left:b.left+d-18})},_showStrength:function(){if(this.showStrength)if(this.host.jqxTooltip){var b=this.widgetID+"Strength",
d=b+"Value",b=b+"Indicator",e;this.strengthTypeRenderer?(e=this.element.value,"placeholder"in this.element||!this._browserCheck||e!=this.placeHolder||(e=""),this._countCharacters(),e=this.strengthTypeRenderer(e,{letters:this.letters,numbers:this.numbers,specialKeys:this.specials},this.localization.tooShort)):e='<div style="width: 220px;"><div><span style="font-weight: bold;">'+this.localization.passwordStrengthString+': </span><span id="'+d+'"></span></div><div id="'+b+'"></div></div>';this.host.jqxTooltip({theme:this.theme,
position:this.showStrengthPosition,content:e,trigger:"none",autoHide:!1,rtl:this.rtl});this.strengthTypeRenderer||(b=document.getElementById(b),document.getElementById(d).innerHTML=this.localization.tooShort,b.className+=" jqx-passwordinput-password-strength-inicator",b.style.backgroundColor=this.strengthColors.tooShort,b.style["float"]=!1===this.rtl?"left":"right");this._checkStrength()}else throw Error("jqxPasswordInput: Missing reference to jqxtooltip.js");},_checkStrength:function(){var b=this;
b.addHandler(b.host,"keyup.passwordinput"+b.widgetID,function(){b._evaluateStrength()})},_raiseEvent:function(){var b=new c.Event("change");b.args={type:this.changeType};this.changeType=null;b.owner=this;return this.host.trigger(b)},_evaluateStrength:function(){var b=this.element.value,d=b.length;this._countCharacters();0<d&&this.showStrength&&(this.host.jqxTooltip("opened")||this.host.jqxTooltip("open"));var e=this.letters+this.numbers+2*this.specials+this.letters*this.numbers/2+d,g;g=8>d?this.localization.tooShort:
20>e?this.localization.weak:30>e?this.localization.fair:40>e?this.localization.good:this.localization.strong;var f;if(this.strengthTypeRenderer)f=this.strengthTypeRenderer(b,{letters:this.letters,numbers:this.numbers,specialKeys:this.specials},g),this.host.jqxTooltip({content:f});else{this.passwordStrength&&(f=this.passwordStrength(b,{letters:this.letters,numbers:this.numbers,specialKeys:this.specials},g),c.each(this.localization,function(){if(f==this)return g=f,!1}));document.getElementById(this.widgetID+
"StrengthValue").innerHTML=g;var b=document.getElementById(this.widgetID+"StrengthIndicator"),h,l;switch(g){case this.localization.tooShort:h="20%";l=this.strengthColors.tooShort;break;case this.localization.weak:h="40%";l=this.strengthColors.weak;break;case this.localization.fair:h="60%";l=this.strengthColors.fair;break;case this.localization.good:h="80%";l=this.strengthColors.good;break;case this.localization.strong:h="100%",l=this.strengthColors.strong}b.style.width=h;b.style.backgroundColor=l}},
_countCharacters:function(){this.specials=this.numbers=this.letters=0;for(var b=this.element.value,d=b.length,e=0;e<d;e++){var c=b.charAt(e),f=b.charCodeAt(e);64<f&&91>f||96<f&&123>f||127<f&&155>f||159<f&&166>f?this.letters+=1:!1===isNaN(c)?this.numbers+=1:-1!="<>@!#$%^&*()_+[]{}?:;|'\"\\,./~`-=".indexOf(c)&&(this.specials+=1)}},_toPx:function(b){return"number"===typeof b?b+"px":b}})})(jqxBaseFramework);
var saveAs=saveAs||function(c){if(!("undefined"===typeof c||"undefined"!==typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var b=c.document.createElementNS("http://www.w3.org/1999/xhtml","a"),d="download"in b,e=/constructor/i.test(c.HTMLElement),g=/CriOS\/[\d]+/.test(navigator.userAgent),f=function(b){(c.setImmediate||c.setTimeout)(function(){throw b;},0)},h=function(b){setTimeout(function(){"string"===typeof b?(c.URL||c.webkitURL||c).revokeObjectURL(b):b.remove()},4E4)},l=function(b){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(b.type)?
new Blob([String.fromCharCode(65279),b],{type:b.type}):b},q=function(q,r,z){z||(q=l(q));var B=this,v="application/octet-stream"===q.type,y,C=function(){for(var b=["writestart","progress","write","writeend"],b=[].concat(b),d=b.length;d--;){var e=B["on"+b[d]];if("function"===typeof e)try{e.call(B,B)}catch(c){f(c)}}};z=function(){if((g||v&&e)&&c.FileReader){var b=new FileReader;b.onloadend=function(){var d=g?b.result:b.result.replace(/^data:[^;]*;/,"data:attachment/file;");c.open(d,"_blank")||(c.location.href=
d);B.readyState=B.DONE;C()};b.readAsDataURL(q);B.readyState=B.INIT}else y||(y=(c.URL||c.webkitURL||c).createObjectURL(q)),v?c.location.href=y:c.open(y,"_blank")||(c.location.href=y),B.readyState=B.DONE,C(),h(y)};B.readyState=B.INIT;d?(y=(c.URL||c.webkitURL||c).createObjectURL(q),setTimeout(function(){b.href=y;b.download=r;var d=new MouseEvent("click");b.dispatchEvent(d);C();h(y);B.readyState=B.DONE})):z()},r=q.prototype;if("undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob)return function(b,
d,e){d=d||b.name||"download";e||(b=l(b));return navigator.msSaveOrOpenBlob(b,d)};r.abort=function(){};r.readyState=r.INIT=0;r.WRITING=1;r.DONE=2;r.error=r.onwritestart=r.onprogress=r.onwrite=r.onabort=r.onerror=r.onwriteend=null;return function(b,d,e){return new q(b,d||b.name||"download",e)}}}("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this.content);
"undefined"!==typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!==typeof define&&null!==define&&null!==define.amd&&define([],function(){return saveAs});"use strict";var CBStatIconField=function(c){jsGrid.Field.call(this,c)};CBStatIconField.prototype=new jsGrid.Field({css:"jsg-icon",align:"center",itemTemplate:genTemplate("statIcon")});jsGrid.fields.staticon=CBStatIconField;var CBResIconField=function(c){jsGrid.Field.call(this,c)};
CBResIconField.prototype=new jsGrid.Field({css:"jsg-icon",align:"center",itemTemplate:genTemplate("resIcon")});jsGrid.fields.resicon=CBResIconField;function genTemplate(c){return function(b,d){return b?String.formatEx('<span data-{0}="'+d.id+'"><img src="'+("/Common/Media/Ribbons/Reader/Status/"+b+"16.png")+'"height="16"></span>',c):String.formatEx('<span data-{0}="'+d.id+'"></span>',c)}}
(function(c){"object"===typeof exports&&"undefined"!==typeof module?module.exports=c():"function"===typeof define&&define.amd?define([],c):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).localforage=c()})(function(){return function b(d,e,g){function f(l,r){if(!e[l]){if(!d[l]){var t="function"==typeof require&&require;if(!r&&t)return t(l,!0);if(h)return h(l,!0);t=Error("Cannot find module '"+l+"'");throw t.code="MODULE_NOT_FOUND",t;}t=e[l]=
{exports:{}};d[l][0].call(t.exports,function(b){var e=d[l][1][b];return f(e?e:b)},t,t.exports,b,d,e,g)}return e[l].exports}for(var h="function"==typeof require&&require,l=0;l<g.length;l++)f(g[l]);return f}({1:[function(b,d,e){(function(b){function e(){w=!0;for(var b,d,g=z.length;g;){d=z;z=[];for(b=-1;++b<g;)d[b]();g=z.length}w=!1}var h=b.MutationObserver||b.WebKitMutationObserver,l;if(h){var q=0,h=new h(e),r=b.document.createTextNode("");h.observe(r,{characterData:!0});l=function(){r.data=q=++q%2}}else if(b.setImmediate||
"undefined"===typeof b.MessageChannel)l="document"in b&&"onreadystatechange"in b.document.createElement("script")?function(){var d=b.document.createElement("script");d.onreadystatechange=function(){e();d.onreadystatechange=null;d.parentNode.removeChild(d);d=null};b.document.documentElement.appendChild(d)}:function(){setTimeout(e,0)};else{var t=new b.MessageChannel;t.port1.onmessage=e;l=function(){t.port2.postMessage(0)}}var w,z=[];d.exports=function(b){1!==z.push(b)||w||l()}}).call(this,"undefined"!==
typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],2:[function(b,d,e){function g(){}function f(b){if("function"!==typeof b)throw new TypeError("resolver must be a function");this.state=y;this.queue=[];this.outcome=void 0;b!==g&&r(this,b)}function h(b,d,e){this.promise=b;"function"===typeof d&&(this.onFulfilled=d,this.callFulfilled=this.otherCallFulfilled);"function"===typeof e&&(this.onRejected=e,this.callRejected=this.otherCallRejected)}function l(b,d,
e){w(function(){var g;try{g=d(e)}catch(f){return z.reject(b,f)}g===b?z.reject(b,new TypeError("Cannot resolve promise with itself")):z.resolve(b,g)})}function q(b){var d=b&&b.then;if(b&&"object"===typeof b&&"function"===typeof d)return function(){d.apply(b,arguments)}}function r(b,d){function e(d){f||(f=!0,z.reject(b,d))}function g(d){f||(f=!0,z.resolve(b,d))}var f=!1,h=t(function(){d(g,e)});"error"===h.status&&e(h.value)}function t(b,d){var e={};try{e.value=b(d),e.status="success"}catch(g){e.status=
"error",e.value=g}return e}var w=b(1),z={},B=["REJECTED"],v=["FULFILLED"],y=["PENDING"];d.exports=e=f;f.prototype["catch"]=function(b){return this.then(null,b)};f.prototype.then=function(b,d){if("function"!==typeof b&&this.state===v||"function"!==typeof d&&this.state===B)return this;var e=new this.constructor(g);this.state!==y?l(e,this.state===v?b:d,this.outcome):this.queue.push(new h(e,b,d));return e};h.prototype.callFulfilled=function(b){z.resolve(this.promise,b)};h.prototype.otherCallFulfilled=
function(b){l(this.promise,this.onFulfilled,b)};h.prototype.callRejected=function(b){z.reject(this.promise,b)};h.prototype.otherCallRejected=function(b){l(this.promise,this.onRejected,b)};z.resolve=function(b,d){var e=t(q,d);if("error"===e.status)return z.reject(b,e.value);if(e=e.value)r(b,e);else{b.state=v;b.outcome=d;for(var e=-1,g=b.queue.length;++e<g;)b.queue[e].callFulfilled(d)}return b};z.reject=function(b,d){b.state=B;b.outcome=d;for(var e=-1,g=b.queue.length;++e<g;)b.queue[e].callRejected(d);
return b};e.resolve=function(b){return b instanceof this?b:z.resolve(new this(g),b)};e.reject=function(b){var d=new this(g);return z.reject(d,b)};e.all=function(b){function d(b,g){e.resolve(b).then(function(b){l[g]=b;++v!==f||h||(h=!0,z.resolve(y,l))},function(b){h||(h=!0,z.reject(y,b))})}var e=this;if("[object Array]"!==Object.prototype.toString.call(b))return this.reject(new TypeError("must be an array"));var f=b.length,h=!1;if(!f)return this.resolve([]);for(var l=Array(f),v=0,q=-1,y=new this(g);++q<
f;)d(b[q],q);return y};e.race=function(b){function d(b){e.resolve(b).then(function(b){h||(h=!0,z.resolve(v,b))},function(b){h||(h=!0,z.reject(v,b))})}var e=this;if("[object Array]"!==Object.prototype.toString.call(b))return this.reject(new TypeError("must be an array"));var f=b.length,h=!1;if(!f)return this.resolve([]);for(var l=-1,v=new this(g);++l<f;)d(b[l]);return v}},{1:1}],3:[function(b,d,e){d="undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:
{};"function"!==typeof d.Promise&&(d.Promise=b(2))},{2:2}],4:[function(b,d,e){function g(b,d){b=b||[];d=d||{};try{return new Blob(b,d)}catch(e){if("TypeError"!==e.name)throw e;for(var g=new ("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),f=0;f<b.length;f+=1)g.append(b[f]);return g.getBlob(d.type)}}function f(b,d){d&&b.then(function(b){d(null,b)},function(b){d(b)})}function h(b,d,e){"function"===
typeof d&&b.then(d);if("function"===typeof e)b["catch"](e)}function l(b){"string"!==typeof b&&(console.warn(b+" used as a key, but it is not a string."),b=String(b));return b}function q(){if(arguments.length&&"function"===typeof arguments[arguments.length-1])return arguments[arguments.length-1]}function r(b){return(new I(function(d){var e=b.transaction("local-forage-detect-blob-support","readwrite"),f=g([""]);e.objectStore("local-forage-detect-blob-support").put(f,"key");e.onabort=function(b){b.preventDefault();
b.stopPropagation();d(!1)};e.oncomplete=function(){var b=navigator.userAgent.match(/Chrome\/(\d+)/),e=navigator.userAgent.match(/Edge\//);d(e||!b||43<=parseInt(b[1],10))}}))["catch"](function(){return!1})}function t(b){return"boolean"===typeof K?I.resolve(K):r(b).then(function(b){return K=b})}function w(b){b=S[b.name];var d={};d.promise=new I(function(b,e){d.resolve=b;d.reject=e});b.deferredOperations.push(d);b.dbReady=b.dbReady?b.dbReady.then(function(){return d.promise}):d.promise}function z(b){if(b=
S[b.name].deferredOperations.pop())return b.resolve(),b.promise}function B(b,d){var e=S[b.name].deferredOperations.pop();if(e)return e.reject(d),e.promise}function v(b,d){return new I(function(e,g){if(b.db)if(d)w(b),b.db.close();else return e(b.db);var f=[b.name];d&&f.push(b.version);var h=Q.open.apply(Q,f);d&&(h.onupgradeneeded=function(d){var e=h.result;try{e.createObjectStore(b.storeName),1>=d.oldVersion&&e.createObjectStore("local-forage-detect-blob-support")}catch(g){if("ConstraintError"===g.name)console.warn('The database "'+
b.name+'" has been upgraded from version '+d.oldVersion+" to version "+d.newVersion+', but the storage "'+b.storeName+'" already exists.');else throw g;}});h.onerror=function(b){b.preventDefault();g(h.error)};h.onsuccess=function(){e(h.result);z(b)}})}function y(b,d){if(!b.db)return!0;var e=!b.db.objectStoreNames.contains(b.storeName),g=b.version>b.db.version;b.version<b.db.version&&(b.version!==d&&console.warn('The database "'+b.name+"\" can't be downgraded from version "+b.db.version+" to version "+
b.version+"."),b.version=b.db.version);return g||e?(e&&(e=b.db.version+1,e>b.version&&(b.version=e)),!0):!1}function C(b){return new I(function(d,e){var g=new FileReader;g.onerror=e;g.onloadend=function(e){e=btoa(e.target.result||"");d({__local_forage_encoded_blob:!0,data:e,type:b.type})};g.readAsBinaryString(b)})}function D(b){for(var d=atob(b.data),e=d.length,f=new ArrayBuffer(e),h=new Uint8Array(f),l=0;l<e;l++)h[l]=d.charCodeAt(l);return g([f],{type:b.type})}function E(b){var d=this,e=d._initReady().then(function(){var b=
S[d._dbInfo.name];if(b&&b.dbReady)return b.dbReady});h(e,b,b);return e}function F(b){w(b);for(var d=S[b.name].forages,e=0;e<d.length;e++){var g=d[e];g._dbInfo.db&&(g._dbInfo.db.close(),g._dbInfo.db=null)}return v(b,!1).then(function(e){for(var g=0;g<d.length;g++)d[g]._dbInfo.db=e;b.db=e}).then(function(){if(y(b))return v(b,!0)})["catch"](function(d){B(b,d);throw d;})}function G(b,d,e,g){void 0===g&&(g=1);try{var f=b.db.transaction(b.storeName,d);e(null,f)}catch(h){if(0<g&&(!b.db||"InvalidStateError"===
h.name||"NotFoundError"===h.name))return I.resolve().then(function(){if(!b.db||"NotFoundError"===h.name&&!b.db.objectStoreNames.contains(b.storeName)&&b.version<=b.db.version)return b.db&&(b.version=b.db.version+1),v(b,!0)}).then(function(){return F(b).then(function(){G(b,d,e,g-1)})})["catch"](e);e(h)}}function H(b){var d=.75*b.length,e=b.length,g=0,f,h,l,v;"="===b[b.length-1]&&(d--,"="===b[b.length-2]&&d--);for(var q=new ArrayBuffer(d),y=new Uint8Array(q),d=0;d<e;d+=4)f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(b[d]),
h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(b[d+1]),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(b[d+2]),v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(b[d+3]),y[g++]=f<<2|h>>4,y[g++]=(h&15)<<4|l>>2,y[g++]=(l&3)<<6|v&63;return q}function M(b){b=new Uint8Array(b);var d="",e;for(e=0;e<b.length;e+=3)d+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[b[e]>>2],d+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(b[e]&
3)<<4|b[e+1]>>4],d+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(b[e+1]&15)<<2|b[e+2]>>6],d+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[b[e+2]&63];2===b.length%3?d=d.substring(0,d.length-1)+"=":1===b.length%3&&(d=d.substring(0,d.length-2)+"==");return d}function P(b,d,e,g){b.executeSql("CREATE TABLE IF NOT EXISTS "+d.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],e,g)}function J(b,d,e,g,f,h){b.executeSql(e,g,f,function(b,l){l.code===l.SYNTAX_ERR?
b.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[name],function(b,v){v.rows.length?h(b,l):P(b,d,function(){b.executeSql(e,g,f,h)},h)},h):h(b,l)},h)}function O(b,d,e,g){var h=this;b=l(b);var v=new I(function(f,l){h.ready().then(function(){void 0===d&&(d=null);var v=d,q=h._dbInfo;q.serializer.serialize(d,function(d,y){y?l(y):q.db.transaction(function(e){J(e,q,"INSERT OR REPLACE INTO "+q.storeName+" (key, value) VALUES (?, ?)",[b,d],function(){f(v)},function(b,d){l(d)})},
function(d){d.code===d.QUOTA_ERR&&(0<g?f(O.apply(h,[b,v,e,g-1])):l(d))})})})["catch"](l)});f(v,e);return v}function W(b){return new I(function(d,e){b.transaction(function(g){g.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(e,g){for(var f=[],h=0;h<g.rows.length;h++)f.push(g.rows.item(h).name);d({db:b,storeNames:f})},function(b,d){e(d)})},function(b){e(b)})})}function X(b,d){var e=b.name+"/";b.storeName!==d.storeName&&(e+=b.storeName+
"/");return e}function N(b,d){b[d]=function(){var e=arguments;return b.ready().then(function(){return b[d].apply(b,e)})}}function U(){for(var b=1;b<arguments.length;b++){var d=arguments[b];if(d)for(var e in d)d.hasOwnProperty(e)&&(ea(d[e])?arguments[0][e]=d[e].slice():arguments[0][e]=d[e])}return arguments[0]}var T="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?
"symbol":typeof b},Q=function(){if("undefined"!==typeof indexedDB)return indexedDB;if("undefined"!==typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!==typeof mozIndexedDB)return mozIndexedDB;if("undefined"!==typeof OIndexedDB)return OIndexedDB;if("undefined"!==typeof msIndexedDB)return msIndexedDB}();"undefined"===typeof Promise&&b(3);var I=Promise,K,S,L=Object.prototype.toString;b={_driver:"asyncStorage",_initStorage:function(b){function d(){return I.resolve()}var e=this,g={db:null};
if(b)for(var f in b)g[f]=b[f];S||(S={});var h=S[g.name];h||(h={forages:[],db:null,dbReady:null,deferredOperations:[]},S[g.name]=h);h.forages.push(e);e._initReady||(e._initReady=e.ready,e.ready=E);b=[];for(f=0;f<h.forages.length;f++){var l=h.forages[f];l!==e&&b.push(l._initReady()["catch"](d))}var q=h.forages.slice(0);return I.all(b).then(function(){g.db=h.db;return v(g,!1)}).then(function(b){g.db=b;return y(g,e._defaultConfig.version)?v(g,!0):b}).then(function(b){g.db=h.db=b;e._dbInfo=g;for(b=0;b<
q.length;b++){var d=q[b];d!==e&&(d._dbInfo.db=g.db,d._dbInfo.version=g.version)}})},_support:function(){try{if(!Q)return!1;var b="undefined"!==typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),d="function"===typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!b||d)&&"undefined"!==typeof indexedDB&&"undefined"!==typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(b,d){var e=this,
g=new I(function(d,g){e.ready().then(function(){G(e._dbInfo,"readonly",function(f,h){if(f)return g(f);try{var l=h.objectStore(e._dbInfo.storeName).openCursor(),v=1;l.onsuccess=function(){var e=l.result;if(e){var g=e.value;g&&g.__local_forage_encoded_blob&&(g=D(g));g=b(g,e.key,v++);if(void 0!==g)d(g);else e["continue"]()}else d()};l.onerror=function(){g(l.error)}}catch(q){g(q)}})})["catch"](g)});f(g,d);return g},getItem:function(b,d){var e=this;b=l(b);var g=new I(function(d,g){e.ready().then(function(){G(e._dbInfo,
"readonly",function(f,h){if(f)return g(f);try{var l=h.objectStore(e._dbInfo.storeName).get(b);l.onsuccess=function(){var b=l.result;void 0===b&&(b=null);b&&b.__local_forage_encoded_blob&&(b=D(b));d(b)};l.onerror=function(){g(l.error)}}catch(v){g(v)}})})["catch"](g)});f(g,d);return g},setItem:function(b,d,e){var g=this;b=l(b);var h=new I(function(e,f){var h;g.ready().then(function(){h=g._dbInfo;return"[object Blob]"===L.call(d)?t(h.db).then(function(b){return b?d:C(d)}):d}).then(function(d){G(g._dbInfo,
"readwrite",function(h,l){if(h)return f(h);try{var v=l.objectStore(g._dbInfo.storeName).put(d,b);null===d&&(d=void 0);l.oncomplete=function(){void 0===d&&(d=null);e(d)};l.onabort=l.onerror=function(){f(v.error?v.error:v.transaction.error)}}catch(q){f(q)}})})["catch"](f)});f(h,e);return h},removeItem:function(b,d){var e=this;b=l(b);var g=new I(function(d,g){e.ready().then(function(){G(e._dbInfo,"readwrite",function(f,h){if(f)return g(f);try{var l=h.objectStore(e._dbInfo.storeName)["delete"](b);h.oncomplete=
function(){d()};h.onerror=function(){g(l.error)};h.onabort=function(){g(l.error?l.error:l.transaction.error)}}catch(v){g(v)}})})["catch"](g)});f(g,d);return g},clear:function(b){var d=this,e=new I(function(b,e){d.ready().then(function(){G(d._dbInfo,"readwrite",function(g,f){if(g)return e(g);try{var h=f.objectStore(d._dbInfo.storeName).clear();f.oncomplete=function(){b()};f.onabort=f.onerror=function(){e(h.error?h.error:h.transaction.error)}}catch(l){e(l)}})})["catch"](e)});f(e,b);return e},length:function(b){var d=
this,e=new I(function(b,e){d.ready().then(function(){G(d._dbInfo,"readonly",function(g,f){if(g)return e(g);try{var h=f.objectStore(d._dbInfo.storeName).count();h.onsuccess=function(){b(h.result)};h.onerror=function(){e(h.error)}}catch(l){e(l)}})})["catch"](e)});f(e,b);return e},key:function(b,d){var e=this,g=new I(function(d,g){if(0>b)d(null);else e.ready().then(function(){G(e._dbInfo,"readonly",function(f,h){if(f)return g(f);try{var l=!1,v=h.objectStore(e._dbInfo.storeName).openCursor();v.onsuccess=
function(){var e=v.result;e?0===b?d(e.key):l?d(e.key):(l=!0,e.advance(b)):d(null)};v.onerror=function(){g(v.error)}}catch(q){g(q)}})})["catch"](g)});f(g,d);return g},keys:function(b){var d=this,e=new I(function(b,e){d.ready().then(function(){G(d._dbInfo,"readonly",function(g,f){if(g)return e(g);try{var h=f.objectStore(d._dbInfo.storeName).openCursor(),l=[];h.onsuccess=function(){var d=h.result;d?(l.push(d.key),d["continue"]()):b(l)};h.onerror=function(){e(h.error)}}catch(v){e(v)}})})["catch"](e)});
f(e,b);return e},dropInstance:function(b,d){d=q.apply(this,arguments);var e=this.config();b="function"!==typeof b&&b||{};b.name||(b.name=b.name||e.name,b.storeName=b.storeName||e.storeName);b.name?(e=b.name===e.name&&this._dbInfo.db?I.resolve(this._dbInfo.db):v(b,!1),e=b.storeName?e.then(function(d){if(d.objectStoreNames.contains(b.storeName)){var e=d.version+1;w(b);var g=S[b.name].forages;for(d=0;d<g.length;d++){var f=g[d];f._dbInfo.db&&(f._dbInfo.db.close(),f._dbInfo.db=null,f._dbInfo.version=e)}return(new I(function(d,
g){var f=Q.open(b.name,e);f.onerror=g;f.onupgradeneeded=function(){f.result.deleteObjectStore(b.storeName)};f.onsuccess=function(){d(f.result)}})).then(function(b){for(var d=0;d<g.length;d++){var e=g[d];e._dbInfo.db=b;z(e._dbInfo)}})["catch"](function(d){(B(b,d)||I.resolve())["catch"](function(){});throw d;})}}):e.then(function(){w(b);for(var d=S[b.name].forages,e=0;e<d.length;e++){var g=d[e];g._dbInfo.db&&(g._dbInfo.db.close(),g._dbInfo.db=null)}return(new I(function(d,e){var g=Q.deleteDatabase(b.name);
g.onerror=g.onblocked=e;g.onsuccess=d})).then(function(){for(var b=0;b<d.length;b++)z(g._dbInfo)})["catch"](function(d){(B(b,d)||I.resolve())["catch"](function(){});throw d;})})):e=I.reject("Invalid arguments");f(e,d);return e}};var V=/^~~local_forage_type~([^~]+)~/,ja=Object.prototype.toString,Z={serialize:function(b,d){var e="";b&&(e=ja.call(b));if(b&&("[object ArrayBuffer]"===e||b.buffer&&"[object ArrayBuffer]"===ja.call(b.buffer))){var g,f="__lfsc__:";b instanceof ArrayBuffer?(g=b,f+="arbf"):
(g=b.buffer,"[object Int8Array]"===e?f+="si08":"[object Uint8Array]"===e?f+="ui08":"[object Uint8ClampedArray]"===e?f+="uic8":"[object Int16Array]"===e?f+="si16":"[object Uint16Array]"===e?f+="ur16":"[object Int32Array]"===e?f+="si32":"[object Uint32Array]"===e?f+="ui32":"[object Float32Array]"===e?f+="fl32":"[object Float64Array]"===e?f+="fl64":d(Error("Failed to get type for BinaryArray")));d(f+M(g))}else if("[object Blob]"===e)e=new FileReader,e.onload=function(){var e="~~local_forage_type~"+b.type+
"~"+M(this.result);d("__lfsc__:blob"+e)},e.readAsArrayBuffer(b);else try{d(JSON.stringify(b))}catch(h){console.error("Couldn't convert value into a JSON string: ",b),d(null,h)}},deserialize:function(b){if("__lfsc__:"!==b.substring(0,9))return JSON.parse(b);var d=b.substring(13);b=b.substring(9,13);var e;if("blob"===b&&V.test(d)){var f=d.match(V);e=f[1];d=d.substring(f[0].length)}d=H(d);switch(b){case "arbf":return d;case "blob":return g([d],{type:e});case "si08":return new Int8Array(d);case "ui08":return new Uint8Array(d);
case "uic8":return new Uint8ClampedArray(d);case "si16":return new Int16Array(d);case "ur16":return new Uint16Array(d);case "si32":return new Int32Array(d);case "ui32":return new Uint32Array(d);case "fl32":return new Float32Array(d);case "fl64":return new Float64Array(d);default:throw Error("Unkown type: "+b);}},stringToBuffer:H,bufferToString:M};e={_driver:"webSQLStorage",_initStorage:function(b){var d=this,e={db:null};if(b)for(var g in b)e[g]="string"!==typeof b[g]?b[g].toString():b[g];b=new I(function(b,
g){try{e.db=openDatabase(e.name,String(e.version),e.description,e.size)}catch(f){return g(f)}e.db.transaction(function(f){P(f,e,function(){d._dbInfo=e;b()},function(b,d){g(d)})},g)});e.serializer=Z;return b},_support:"function"===typeof openDatabase,iterate:function(b,d){var e=this,g=new I(function(d,g){e.ready().then(function(){var f=e._dbInfo;f.db.transaction(function(e){J(e,f,"SELECT * FROM "+f.storeName,[],function(e,g){for(var h=g.rows,l=h.length,v=0;v<l;v++){var q=h.item(v),y=q.value;y&&(y=
f.serializer.deserialize(y));y=b(y,q.key,v+1);if(void 0!==y){d(y);return}}d()},function(b,d){g(d)})})})["catch"](g)});f(g,d);return g},getItem:function(b,d){var e=this;b=l(b);var g=new I(function(d,g){e.ready().then(function(){var f=e._dbInfo;f.db.transaction(function(e){J(e,f,"SELECT * FROM "+f.storeName+" WHERE key = ? LIMIT 1",[b],function(b,e){var g=e.rows.length?e.rows.item(0).value:null;g&&(g=f.serializer.deserialize(g));d(g)},function(b,d){g(d)})})})["catch"](g)});f(g,d);return g},setItem:function(b,
d,e){return O.apply(this,[b,d,e,1])},removeItem:function(b,d){var e=this;b=l(b);var g=new I(function(d,g){e.ready().then(function(){var f=e._dbInfo;f.db.transaction(function(e){J(e,f,"DELETE FROM "+f.storeName+" WHERE key = ?",[b],function(){d()},function(b,d){g(d)})})})["catch"](g)});f(g,d);return g},clear:function(b){var d=this,e=new I(function(b,e){d.ready().then(function(){var g=d._dbInfo;g.db.transaction(function(d){J(d,g,"DELETE FROM "+g.storeName,[],function(){b()},function(b,d){e(d)})})})["catch"](e)});
f(e,b);return e},length:function(b){var d=this,e=new I(function(b,e){d.ready().then(function(){var g=d._dbInfo;g.db.transaction(function(d){J(d,g,"SELECT COUNT(key) as c FROM "+g.storeName,[],function(d,e){var g=e.rows.item(0).c;b(g)},function(b,d){e(d)})})})["catch"](e)});f(e,b);return e},key:function(b,d){var e=this,g=new I(function(d,g){e.ready().then(function(){var f=e._dbInfo;f.db.transaction(function(e){J(e,f,"SELECT key FROM "+f.storeName+" WHERE id = ? LIMIT 1",[b+1],function(b,e){var g=e.rows.length?
e.rows.item(0).key:null;d(g)},function(b,d){g(d)})})})["catch"](g)});f(g,d);return g},keys:function(b){var d=this,e=new I(function(b,e){d.ready().then(function(){var g=d._dbInfo;g.db.transaction(function(d){J(d,g,"SELECT key FROM "+g.storeName,[],function(d,e){for(var g=[],f=0;f<e.rows.length;f++)g.push(e.rows.item(f).key);b(g)},function(b,d){e(d)})})})["catch"](e)});f(e,b);return e},dropInstance:function(b,d){d=q.apply(this,arguments);var e=this.config();b="function"!==typeof b&&b||{};b.name||(b.name=
b.name||e.name,b.storeName=b.storeName||e.storeName);var g=this,h;h=b.name?(new I(function(d){var f;f=b.name===e.name?g._dbInfo.db:openDatabase(b.name,"","",0);b.storeName?d({db:f,storeNames:[b.storeName]}):d(W(f))})).then(function(b){return new I(function(d,e){b.db.transaction(function(g){function f(b){return new I(function(d,e){g.executeSql("DROP TABLE IF EXISTS "+b,[],function(){d()},function(b,d){e(d)})})}for(var h=[],l=0,v=b.storeNames.length;l<v;l++)h.push(f(b.storeNames[l]));I.all(h).then(function(){d()})["catch"](function(b){e(b)})},
function(b){e(b)})})}):I.reject("Invalid arguments");f(h,d);return h}};var ca;try{ca="undefined"!==typeof localStorage&&"setItem"in localStorage&&"function"===typeof localStorage.setItem}catch(Y){ca=!1}var ea=Array.isArray||function(b){return"[object Array]"===Object.prototype.toString.call(b)},fa={},ka={},A={INDEXEDDB:b,WEBSQL:e,LOCALSTORAGE:{_driver:"localStorageWrapper",_initStorage:function(b){var d={};if(b)for(var e in b)d[e]=b[e];d.keyPrefix=X(b,this._defaultConfig);var g;try{localStorage.setItem("_localforage_support_test",
!0),localStorage.removeItem("_localforage_support_test"),g=!1}catch(f){g=!0}if(g&&!(0<localStorage.length))return I.reject();this._dbInfo=d;d.serializer=Z;return I.resolve()},_support:ca,iterate:function(b,d){var e=this,g=e.ready().then(function(){for(var d=e._dbInfo,g=d.keyPrefix,f=g.length,h=localStorage.length,l=1,v=0;v<h;v++){var q=localStorage.key(v);if(0===q.indexOf(g)){var y=localStorage.getItem(q);y&&(y=d.serializer.deserialize(y));y=b(y,q.substring(f),l++);if(void 0!==y)return y}}});f(g,
d);return g},getItem:function(b,d){var e=this;b=l(b);var g=e.ready().then(function(){var d=e._dbInfo,g=localStorage.getItem(d.keyPrefix+b);g&&(g=d.serializer.deserialize(g));return g});f(g,d);return g},setItem:function(b,d,e){var g=this;b=l(b);var h=g.ready().then(function(){void 0===d&&(d=null);var e=d;return new I(function(f,h){var l=g._dbInfo;l.serializer.serialize(d,function(d,g){if(g)h(g);else try{localStorage.setItem(l.keyPrefix+b,d),f(e)}catch(v){"QuotaExceededError"!==v.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==
v.name||h(v),h(v)}})})});f(h,e);return h},removeItem:function(b,d){var e=this;b=l(b);var g=e.ready().then(function(){localStorage.removeItem(e._dbInfo.keyPrefix+b)});f(g,d);return g},clear:function(b){var d=this,e=d.ready().then(function(){for(var b=d._dbInfo.keyPrefix,e=localStorage.length-1;0<=e;e--){var g=localStorage.key(e);0===g.indexOf(b)&&localStorage.removeItem(g)}});f(e,b);return e},length:function(b){var d=this.keys().then(function(b){return b.length});f(d,b);return d},key:function(b,d){var e=
this,g=e.ready().then(function(){var d=e._dbInfo,g;try{g=localStorage.key(b)}catch(f){g=null}g&&(g=g.substring(d.keyPrefix.length));return g});f(g,d);return g},keys:function(b){var d=this,e=d.ready().then(function(){for(var b=d._dbInfo,e=localStorage.length,g=[],f=0;f<e;f++){var h=localStorage.key(f);0===h.indexOf(b.keyPrefix)&&g.push(h.substring(b.keyPrefix.length))}return g});f(e,b);return e},dropInstance:function(b,d){d=q.apply(this,arguments);b="function"!==typeof b&&b||{};if(!b.name){var e=this.config();
b.name=b.name||e.name;b.storeName=b.storeName||e.storeName}var g=this,e=b.name?(new I(function(d){b.storeName?d(X(b,g._defaultConfig)):d(b.name+"/")})).then(function(b){for(var d=localStorage.length-1;0<=d;d--){var e=localStorage.key(d);0===e.indexOf(b)&&localStorage.removeItem(e)}}):I.reject("Invalid arguments");f(e,d);return e}}};ca=[A.INDEXEDDB._driver,A.WEBSQL._driver,A.LOCALSTORAGE._driver];var aa=["dropInstance"],R="clear getItem iterate key keys length removeItem setItem".split(" ").concat(aa),
ia={description:"",driver:ca.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};ca=new (function(){function b(d){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");for(var e in A)if(A.hasOwnProperty(e)){var g=A[e],f=g._driver;this[e]=f;fa[f]||this.defineDriver(g)}this._defaultConfig=U({},ia);this._config=U({},this._defaultConfig,d);this._initDriver=this._driverSet=null;this._ready=!1;this._dbInfo=null;this._wrapLibraryMethodsWithReady();this.setDriver(this._config.driver)["catch"](function(){})}
b.prototype.config=function(b){if("object"===("undefined"===typeof b?"undefined":T(b))){if(this._ready)return Error("Can't call config() after localforage has been used.");for(var d in b){"storeName"===d&&(b[d]=b[d].replace(/\W/g,"_"));if("version"===d&&"number"!==typeof b[d])return Error("Database version must be a number.");this._config[d]=b[d]}return"driver"in b&&b.driver?this.setDriver(this._config.driver):!0}return"string"===typeof b?this._config[b]:this._config};b.prototype.defineDriver=function(b,
d,e){var g=new I(function(d,e){try{var g=b._driver,h=Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(b._driver){for(var l=R.concat("_initStorage"),v=0,q=l.length;v<q;v++){var y=l[v];if((0>aa.indexOf(y)||b[y])&&"function"!==typeof b[y]){e(h);return}}(function(){for(var d=function(b){return function(){var d=I.reject(Error("Method "+b+" is not implemented by the current driver"));f(d,arguments[arguments.length-1]);return d}},e=0,g=aa.length;e<g;e++){var h=
aa[e];b[h]||(b[h]=d(h))}})();h=function(e){fa[g]&&console.info("Redefining LocalForage driver: "+g);fa[g]=b;ka[g]=e;d()};"_support"in b?b._support&&"function"===typeof b._support?b._support().then(h,e):h(!!b._support):h(!0)}else e(h)}catch(r){e(r)}});h(g,d,e);return g};b.prototype.driver=function(){return this._driver||null};b.prototype.getDriver=function(b,d,e){b=fa[b]?I.resolve(fa[b]):I.reject(Error("Driver not found."));h(b,d,e);return b};b.prototype.getSerializer=function(b){var d=I.resolve(Z);
h(d,b);return d};b.prototype.ready=function(b){var d=this,e=d._driverSet.then(function(){null===d._ready&&(d._ready=d._initDriver());return d._ready});h(e,b,b);return e};b.prototype.setDriver=function(b,d,e){function g(){v._config.driver=v.driver()}function f(b){v._extend(b);g();v._ready=v._initStorage(v._config);return v._ready}function l(b){return function(){function d(){for(;e<b.length;){var h=b[e];e++;v._dbInfo=null;v._ready=null;return v.getDriver(h).then(f)["catch"](d)}g();v._driverSet=I.reject(Error("No available storage method found."));
return v._driverSet}var e=0;return d()}}var v=this;ea(b)||(b=[b]);var q=this._getSupportedDrivers(b);this._driverSet=(null!==this._driverSet?this._driverSet["catch"](function(){return I.resolve()}):I.resolve()).then(function(){var b=q[0];v._dbInfo=null;v._ready=null;return v.getDriver(b).then(function(b){v._driver=b._driver;g();v._wrapLibraryMethodsWithReady();v._initDriver=l(q)})})["catch"](function(){g();v._driverSet=I.reject(Error("No available storage method found."));return v._driverSet});h(this._driverSet,
d,e);return this._driverSet};b.prototype.supports=function(b){return!!ka[b]};b.prototype._extend=function(b){U(this,b)};b.prototype._getSupportedDrivers=function(b){for(var d=[],e=0,g=b.length;e<g;e++){var f=b[e];this.supports(f)&&d.push(f)}return d};b.prototype._wrapLibraryMethodsWithReady=function(){for(var b=0,d=R.length;b<d;b++)N(this,R[b])};b.prototype.createInstance=function(d){return new b(d)};return b}());d.exports=ca},{3:3}]},{},[4])(4)});"use strict";function CBDebug(){}
CBDebug.assert=function(c,b){if(!c)if(b||(b="ASSERT FAILURE"),"undefined"!==typeof console&&console.assert)console.assert(c,b),alert(b);else throw b;};CBDebug.call=function(c,b){for(var d=arguments,e=[],g=2;g<d.length;++g)e.push(d[g]);b.apply(c,e)};CBDebug.profile=function(c){"undefined"!==typeof console&&console.profile&&console.profile(c)};CBDebug.profileEnd=function(){"undefined"!==typeof console&&console.profileEnd&&console.profileEnd()};function ASSERT(c){CBDebug.assert(c,c)}"use strict";
var CB={namespace:function(c){c=c.split(".");var b=CB;"CB"===c[0]&&(c=c.slice(1));for(var d=0;d<c.length;d+=1)"undefined"===typeof b[c[d]]&&(b[c[d]]={}),b=b[c[d]]},inherit:function(c,b){var d=c.prototype;c.prototype=new b;for(var e in d)d.hasOwnProperty(e)&&(c.prototype[e]=d[e]);c.superClass=b;c.prototype.superClass=b.prototype;return c},V0:function(c,b){for(var d in b)b.hasOwnProperty(d)&&(c.prototype[d]=b[d])},partial:function(c,b){return ObjUtil.copyTo(b,c,!0)},V1:function(c,b){Object.defineProperty(c,
b,{writable:!1})},property:function(c,b,d,e){Object.defineProperty(c,b,{get:d,set:e})},V2:function(c,b,d,e){Object.defineProperty(c.prototype,b,{get:d,set:e})},V3:{V4:function(c,b){c.charAt(0)==b&&(c=c.slice(1,c.length-1));2<c.length&&c.charAt(c.length-1)==b&&(c=c.slice(0,c.length-1));return c}}};function Char(){}Char.IsDigit=function(c){return"9">=c&&"0"<=c};Char.IsLetter=function(c){return"z">=c&&"a"<=c||"Z">=c&&"A"<=c};Char.IsUpperCaseLetter=function(c){return"Z">=c&&"A"<=c};
Char.IsLetterOrDigit=function(c){return Char.IsLetter(c)||Char.IsDigit(c)};Char.IsWhiteSpace=function(c){return"\r"===c||"\n"===c||" "===c||"\t"===c};Char.getIsChar=function(c){return function(b){return b===c}};Char.getIsNotChar=function(c){return function(b){return b!==c}};function StringIterator(c){this.m_str=c;this.m_len=c.length}StringIterator.prototype.m_str=null;StringIterator.prototype.m_inx=-1;StringIterator.g_hasIndex=function(){return!0}();
StringIterator.g_hasIndex?(StringIterator.prototype.Current=function(){return this.m_str[this.m_inx]},StringIterator.prototype.Peek=function(){return this.m_inx>=this.m_len-1?0:this.m_str[this.m_inx+1]},StringIterator.prototype.Next=function(){++this.m_inx;return this.m_inx===this.m_len?0:this.m_str[this.m_inx]}):(StringIterator.prototype.Current=function(){return this.m_str.charAt(this.m_inx)},StringIterator.prototype.Peek=function(){return this.m_inx>=this.m_len-1?0:this.m_str.charAt(this.m_inx+
1)},StringIterator.prototype.Next=function(){++this.m_inx;return this.m_inx===this.m_len?0:this.m_str.charAt(this.m_inx)});StringIterator.prototype.CurrentString=function(c){return this.SubString(this.m_inx,c)};StringIterator.prototype.NextString=function(c){return this.SubString(this.m_inx+1,c)};StringIterator.prototype.SubString=function(c,b){var d=this.m_len-c;if(!b||b>d)b=d;return this.m_str.substring(c,c+b)};StringIterator.prototype.getPosition=function(){return this.m_inx};
StringIterator.prototype.setPosition=function(c){this.m_inx=c};StringIterator.prototype.skip=function(c){this.m_inx+=c};StringIterator.prototype.isEOF=function(){return this.m_inx===this.m_len};StringIterator.prototype.AcceptWhile=function(c,b){var d="";if(b){var e=this.Current();if(!c(e))return d;d=e}for(e=this.Next();0!==e&&c(e);e=this.Next())d+=e;return d};StringIterator.prototype.AcceptUntil=function(c,b){return this.AcceptWhile(NOT(c),b)};
StringIterator.prototype.AcceptStr=function(c,b){var d=c.length;return(b?this.CurrentString(d):this.NextString(d))===c?(b||++d,this.skip(d),!0):!1};StringIterator.prototype.AcceptChar=function(c,b){if(b){if(this.Current()===c)return this.skip(1),!0}else if(this.Peek()===c)return this.skip(2),!0;return!1};StringIterator.prototype.skipWhile=function(c,b){if(!b||c(this.Current()))for(var d=this.Next();0!==d&&c(d);d=this.Next());};StringIterator.prototype.skipUntil=function(c){return this.skipWhite(NOT(c))};
String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")});String.quote||(String.prototype.quote=function(){return'"'+this.replace(/\\/g,"\\\\").replace(RegExp('"',"g"),'\\"')+'"'});String.startsWith||(String.prototype.startsWith=function(c){return this.indexOf?0===this.indexOf(c):!1});String.capitalize||(String.capitalize=function(){return this.length?this[0].toUpperCase()+this.substring(1,this.length).toLowerCase():this});"use strict";
function StringBuilder(){var c=null,b=null,d=0,e="";this.appendFormat=function(){var b=String.formatEx.apply("",arguments);this.append(b)};this.append=function(g){e+=g;2800<e.length&&(null===c?c=b=[]:(g=b,b=[],g[1]=b),b[0]=e,e="",++d)};this.toString=function(){if(0==d)return e;for(;1<d;){for(var g=c,f=[],h=f,l=0;"undefined"!=typeof g;)"undefined"==typeof h[0]?(h[0]=g[0],++l):("undefined"!=typeof g[0]&&(h[0]+=g[0]),h[1]=[],h=h[1]),g=g[1];c=f;b=h;d=l}return c[0]+e}}
(function(){function c(b){for(var c="",f=d.lastIndex=0;;){var h=d.exec(b);if(!h)break;var l=h.index;l>f&&(f=b.substring(f,l).quote(),c&&(c+="+"),c+=f);h=h[1];f=parseInt(h);l="nz(";l=isNaN(f)?l+("(_a."+h+")"):l+("(_a["+(f+1)+"])");l+=")";c&&(c+="+");c+=l;f=d.lastIndex}b.length>f&&(b=b.substring(f).quote(),c&&(c+="+"),c+=b);return new Function("_a","var nz = function(_v){if(_v === undefined || _v === null)return ''; return _v.toString()};return "+c+";")}var b={},d=/{(\w+(\.\w+)*(\[\d+\])?)}/g;String.formatEx||
(String.formatEx=function(d){var g=b[d];g||(g=c(d),b[d]=g);var f=arguments;2===arguments.length&&"object"===typeof arguments[1]&&0>d.indexOf("{0}")&&(f=arguments[1]);return g(f)});String.f=String.formatEx;String.vformatEx||(String.vformatEx=function(b,d){return c(b)(d)})})();
CB.V5={V6:function(c,b,d,e,g){d=d||1;e=e||1;g=g||1;if(0===c.length)return b.length;if(0===b.length)return c.length;var f=[],h;for(h=0;h<=b.length;h++)f[h]=[h];var l;for(l=0;l<=c.length;l++)f[0][l]=l;for(h=1;h<=b.length;h++)for(l=1;l<=c.length;l++)b.charAt(h-1)==c.charAt(l-1)?f[h][l]=f[h-1][l-1]:f[h][l]=Math.min(f[h-1][l-1]+d,Math.min(f[h][l-1]+e,f[h-1][l]+g));return f[b.length][c.length]}};"use strict";
CB.Form=function(){var c=function(b){this.config=b;this.V7=26;this.V8=90;this.buttonH=30;this.theme="chessbase"};c.prototype.show=function(){$(this.V9).css("display","block")};c.prototype.hide=function(){$(this.V9).css("display","none")};c.prototype.isVisible=function(){return!$(this.V9).is(":hidden")};c.prototype.create=function(b){$("#"+this.config.id).remove();this.V9=$(String.f("<div id='{0}'></div>",this.config.id));this.Va(this.V9);$(b).append(this.V9);$(this.V9).jqxWindow({width:this.config.width||
400,height:this.config.height||400,isModal:this.config.modal,theme:this.theme,resizable:!1,autoOpen:!1});$(this.V9).jqxWindow({initContent:function(){$("#btnCancel").jqxButton({width:this.V8,height:this.buttonH,theme:this.theme});$("#btnOk").jqxButton({width:this.V8,height:this.buttonH,theme:this.theme})}.bind(this)});$(this.V9).jqxWindow("cancelButton",$("#btnCancel"));$(this.V9).jqxWindow("open");$("#btnOk").click(function(b){b=this.Vb();$(this.V9).jqxWindow("hide");this.config.okHandler&&this.config.okHandler(b)}.bind(this));
$("#btnCancel").click(function(b){$(this.V9).jqxWindow("hide");this.config.cancelHandler&&this.config.cancelHandler()}.bind(this))};c.prototype.Vb=function(){var b={};this.config.fields.forEach(function(d){switch(d.type){case "number":case "password":case "string":b[d.id]=$("#"+d.id).val();break;case "checkbox":b[d.id]=$("#"+d.id).jqxCheckBox("checked")}}.bind(this));return b};c.prototype.Vc=function(){return{imgHeight:32,imgWidth:32,theme:"chessbase"}};c.prototype.Va=function(b){var d=$("<div>"+
this.config.title+"</div>");b.append(d);var d=$(String.f("<div></div>")),e=$("<table class='cbJqxFormTable'></table>");d.append(e);this.config.fields.forEach(function(b){var d=$("<tr></tr>");switch(b.type){case "separator":d.append($("<td colspan='2'><div class='cbJqxFormSeparator'/></td>"));break;case "number":var c=$(String.f("<td align='right' class='cbJqxFormCaption'>{0}</td>",b.caption));d.append(c);var c=$("<td align='left'></td>"),g=$(String.f("<input id='{0}'/>",b.id));c.append(g);g.jqxNumberInput({width:this.config.Vd||
60,height:this.config.V7||this.V7,min:b.min||0,max:b.max||999999999,theme:this.theme,decimalDigits:0,digits:2,inputMode:"simple",spinButtons:b.spin});b.val&&g.jqxNumberInput("val",b.val);d.append(c);break;case "string":c=$(String.f("<td align='right'>{0}</td>",b.caption));d.append(c);c=$("<td align='left'></td>");g=$(String.f("<input id='{0}'/>",b.id));c.append(g);g.jqxInput({width:this.config.strInpW||200,height:this.config.V7||this.V7,maxLength:this.config.maxLength||128,theme:this.theme});b.val&&
g.jqxInput("val",b.val);d.append(c);break;case "password":c=$(String.f("<td align='right'>{0}</td>",b.caption));d.append(c);c=$("<td align='left'></td>");g=$(String.f("<input id='{0}' type='password' />",b.id));c.append(g);g.jqxPasswordInput({width:this.config.strInpW||200,height:this.config.V7||this.V7,maxLength:128,theme:this.theme,placeHolder:"Enter password:"});d.append(c);break;case "checkbox":c=$(String.f("<td align='right' class='cbJqxFormCaption'>{0}</td>",b.caption)),d.append(c),c=$("<td align='left'></td>"),
g=$(String.f("<div id='{0}'></div>",b.id)),c.append(g),g.jqxCheckBox({width:this.config.Ve||120,height:this.config.Vf||this.V7,theme:this.theme,checked:b.checked}),d.append(c)}e.append(d)}.bind(this));var c=$("<tr></tr>");c.append($("<td align='right'></td>"));c.append($('<td style="padding-top: 10px;" align="right"><input style="margin-right: 5px;" type="button" id="btnOk" value="OK" /><input id="btnCancel" type="button" value="Cancel" /></td>'));e.append(c);b.append(d)};c.prototype.Vg=function(b){var d=
V3c6.config.Vh();this.config.Vi&&(d+=this.config.Vi+"/");d=d+b+(this.config.Vj||32);return d+".png"};c.Vk=function(b,d,e,c,f,h){(new CB.Form({id:"inputString",title:b,width:300,height:180,modal:!0,okHandler:f,cancelHandler:h,fields:[{caption:d,type:"string",id:"idInput",strInpW:160,maxLength:c,val:e}]})).create()};return c}();CB.Vl=function(){return function(c){}}();"use strict";CB.namespace("CB.Vm");var glLoc,lm;
CB.Vm=function(){return function(c){this.locObjects=[].concat(c);lm=this.locObjects[0];for(c=1;c<this.locObjects.length;c++){var b=this.locObjects[c],d;for(d in b)b.hasOwnProperty(d)&&(lm[d]=b[d])}d=ObjUtil.clone(CB.V3b2);d.arrStrPieces[CB.Piece.Vn]=d.arrStrPieces[CB.Piece.Vo]=lm.NOTATION_KING;d.arrStrPieces[CB.Piece.Vp]=d.arrStrPieces[CB.Piece.Vq]=lm.NOTATION_QUEEN;d.arrStrPieces[CB.Piece.Vr]=d.arrStrPieces[CB.Piece.Vs]=lm.NOTATION_ROOK;d.arrStrPieces[CB.Piece.Vt]=d.arrStrPieces[CB.Piece.Vu]=lm.NOTATION_BISHOP;
d.arrStrPieces[CB.Piece.Vv]=d.arrStrPieces[CB.Piece.Vw]=lm.NOTATION_KNIGHT;d.arrStrPieces[CB.Piece.Vx]=d.arrStrPieces[CB.Piece.Vy]="";lm.NOTA_LOCALIZATION=d}}();"use strict";CB.namespace("CB.Vz.Chess.ENG");
CB.Vz.Chess.ENG={LOGIN:"Log in",LOGOUT:"Log out",ACCOUNT:"My Account",BOARDS:"Boards",RECONNECT:"Reconnect",V10:"Resign",V11:"Close Board",V12:"Offer Draw",V13:"Accept Draw",V14:"{0} accepted a draw.",V15:"{0} offers a draw.",V16:"{0} accepts a draw.",V17:"{0} resigns.",V18:"Testing Connection to Server",CONNECTING:"Connecting to server, please wait...",V19:"Reconnected OK",V1a:"Name",V1b:"Country",V1c:"Rank",WHITE:"White",BLACK:"Black",V1d:"Elo White",V1e:"Elo Black",RESULT:"Result",V1f:"Time Control",
V1g:"Tournament",GAMES:"Games",V1h:"Chat",V1i:"Your chat partner is gone.",V1j:"Connection",V1k:"Map",KING:"King",QUEEN:"Queen",ROOK:"Rook",BISHOP:"Bishop",KNIGHT:"Knight",PAWN:"Pawn",V1l:"Type Chat Here",V1m:"Type Here To Chat With",GUEST:"Guest",V1n:"Confirm",V1o:"Cancel",V1p:"Clock",TIME:"Time",V1q:"Gain per Move",V1r:"Close",V1s:"Add",V1t:"Remove",NOTATION:"Notation",BOARD_FRITZ:"Fritz",BOARD_CRYSTALS:"Crystals",BOARD_USCF:"USCF",BOARD_OLDSTYLE:"OldStyle",BOARD_HABSBURG:"Habsburg",V1u:"Fritz & Chesster",
V1v:"Play Blitz",V1w:"New Game",TAKE_BACK:"Take Back",MAKE_MOVE:"Make Move",FLIP_BOARD:"Flip Board",V1x:"Copy",V1y:"Search Board",V1z:"Year",V20:"Book",LIVE_BOOK:"Live Book",MOVE:"Move",V21:"Nr Games",V22:"Score",V23:"Last Played",ELO_AVG:"Elo Avg.",VISITS:"Visits",LOADING_STATISTICS:"Loading statistics",LETS_CHECK:"Let's Check",EVAL:"Eval",VARIATION:"Variation",DEPTH:"Depth",ENGINE:"Engine",V24:"Enter your search text...",V25:"Retrieving games",V26:"Player details",V27:"Player information",V28:"First Name",
V29:"Last Name",V2a:"Year of Birth",V2b:"Trend",V2c:"Rating",V2d:"Send Feedback",V2e:"Your Comment",V2f:"Your E-mail Address",V2g:"Send",BROWSER_DOESNT_SUPPORT_3D:"Browser does not support 3d boards",BOARD3D_FRITZ:"Fritz",BOARD3D_MODERN:"Modern",BOARD3D_ROOM:"Room",BOARD3D_BALLOON:"Balloon",BOARD3D_METAL:"Metal",V2h:"Silver",BOARD3D_FUTURE:"Future",V2i:"Marble",V2j:"Welcome",V2k:"Material",V2l:"Analysis",ANALYSIS_ENGINE:"Engine",ENG_SEARCH_INFO_FMT:"Depth {0}/{1}, Speed = {2}kPos/s, Time = {3}s",
V2m:"Paste",PW_INVALID:"<bold>User/Password invalid, please try again</bold>",PLEASE_LOGIN:"Please log in with your ChessBase (Playchess) account:",V2n:"Name",V2o:"Password",V2p:"Create Account",V2q:"Guest",PLEASE_LOGIN_SHORT:"Please Log In",LOADING_ENGINE:"Loading Engine...",V2r:"Loading Live Games ...",V2s:"Inviting other players to a game of {0} ({1})",OTHER_TOOLS:"More Apps",DATABASES:"Databases",OPEN_DATABASE:"Open Database",CREATE_DATABASE:"Create Database",DELETE_DATABASE:"Delete Database",
V2t:"Delete",V2u:"Clean Up",V2v:"My Databases",V2w:"Databases shared with me",V2x:"Select Database For '{0}'",V2y:"Open PGN",SAVE:"Save",SAVE_AND_REPLACE_GAMES:"Save and replace games",SAVE_AS_NEW:"Save As New",EDIT_GAME:"Edit Game",DATABASE_FUNCTIONS:"Open, create and delete databases",V2z:"Text Before",TEXT_AFTER:"Text",V30:"Start Line",PROMOTE_LINE:"Promote Line",DELETE_LINE:"Delete Line",CUT_LINE:"Cut Line",V31:"Open a PGN file from your computer",V32:"Add a text annotation before this move",
TEXT_AFTER_TIP:"Add a text annotation after this move",V33:"Retract current move and start a line",V34:"Promote the currently selected line",DELETE_LINE_TIP:"Delete the selected line",CUT_LINE_TIP:"Cut off the following moves",V35:"Stay Logged In",V36:"Forgot Password",CHANGE_PASSWORD:"Change Password",V37:"Old Password",V38:"New Password",V39:"Confirm Password",MENU_PLAYCHESS_TOOL:"Play & Watch",MENU_DATABASE_TOOL:"Live Database",MENU_MYGAMES_TOOL:"My Own Games",MENU_FRITZ_TOOL:"Chess Program Fritz",
MENU_FRITZ_CHESSTER_TOOL:"Chess For Kids",MENU_TACTICS_TOOL:"Tactics Training",LANGUAGE:"Language",LOGIN_CREATE_LINK:"Click here to create an account",LOGIN_PLEASE_LOGIN:"Please Log In",LOGIN_ACCOUNT_FREE:"Creating an account is free. The account is valid for all other ChessBase Web Tools and for play.chessbase.com.",LOGIN_WELCOME:"Welcome, {0}",V3a:"Manage friends",INVITE_FRIEND:"Invite a friend",V3b:"Ping",NOTATION_KING:"K",NOTATION_QUEEN:"Q",NOTATION_KNIGHT:"N",NOTATION_BISHOP:"B",NOTATION_ROOK:"R",
V3c:"P",GENERAL_INVITE:'Thank you for using the <span style="font-weight:bold">{0}</span>.',V3d:'Thank you for using <span style="font-weight:bold">ChessBase MyGames</span>, your personal chess database in the web.',V3e:"Please login with your ChessBase Account to create and access your cloud chess databases. You can also use the cloud databases with ChessBase 13.",V3f:"ECO",V3g:"Back",V3h:"Next Move",V3i:"Previous Move",V3j:"Next Game",V3k:"Previous Game",MENU_VIDEO_TOOL:"Training Videos",MENU_OPENINGS_TOOL:"Manage Openings",
REQUESTING_MOVES:"Requesting Moves",FRESH_POSITION:"Fresh Position",V3l:"Embed",V3m:"Help",V3n:"Toggle 2D/3D Board",BOARD3D_BLACKWHITE:"Black white",V3o:"Mate",V3p:"Stalemate",V3q:"Setup Position",WHITE_MATES:"White mates",WHITE_CLEARLY_WINNING:"White is clearly winning",WHITE_WINNING:"White is winning",WHITE_DECISIVE:"White has a decisive advantage",WHITE_CLEARLY_BETTER:"White is clearly better",WHITE_BETTER:"White is better",WHITE_SLIGHTLY:"White is slightly better",WHITE_EDGE:"White is minimally better",
BLACK_MATES:"Black mates",BLACK_CLEARLY_WINNING:"Black is clearly winning",BLACK_WINNING:"Black is winning",BLACK_DECISIVE:"Black has a decisive advantage",BLACK_CLEARLY_BETTER:"Black is clearly better",BLACK_BETTER:"Black is better",BLACK_SLIGHTLY:"Black is slightly better",BLACK_EDGE:"Black is minimally better",EQUAL_POS:"The position is equal",PREMIUM_ONLY:"Premium Only",V3r:"Avatar",V3s:"Assisted Calculation",V3t:"Calculate variations with Fritz' assistance before you continue the game here.",
V3u:"Enter moves blindly. Click in the notation to add variations anywhere. Right-click unveils current position. Click 'Assisted Calculation' to resume your game.",V3v:"Calculating...",V3w:"Wood",TRAINING_SOLUTION:"Show Solution",TRAINING_HELP:"Get Help",TRAINING_QUESTION:"Find the correct move",UNANNOTATE:"Unannotate",V3x:"More Lines",V3y:"Less Lines",V3z:"Calculate Threat",V40:"Start",V41:"Pause",V42:"At the moment there\u2019s no live broadcast",CONNECTED_TO_SERVER:"Connected to server: {0}",
V43:"Initializing",INSERT_DIAGRAM:"Insert Diagram",V44:"Board",V45:"Loading board, just a second...",LIKE:"Like"};"use strict";CB.namespace("CB.Vz.Chess.GER");
CB.Vz.Chess.GER={LOGIN:"Anmelden",LOGOUT:"Abmelden",ACCOUNT:"Mein Konto",BOARDS:"Bretter",RECONNECT:"Verbinden",V10:"Aufgeben",V11:"Brett schlie\u00dfen",V12:"Remis bieten",V13:"Remis akzeptieren",V14:"{0} hat das Remis angenommen.",V15:"{0} bietet Remis.",V16:"{0} nimmt Remis an.",V17:"{0} gibt auf.",V18:"Test Verbindung zum Server",CONNECTING:"Verbindung wird aufgebaut, einen Moment...",V19:"Verbindung wiederhergestellt",V1a:"Name",V1b:"Land",V1c:"Rang",WHITE:"Weiss",BLACK:"Schwarz",V1d:"Elo Weiss",
V1e:"Elo Schwarz",RESULT:"Ergebnis",V1f:"Bedenkzeit",V1g:"Turnier",GAMES:"Partien",V1h:"Chat",V1i:"Ihr Chat Partner ist gegangen.",V1j:"Verbindung",V1k:"Karte",KING:"K\u00f6nig",QUEEN:"Dame",ROOK:"Turm",BISHOP:"L\u00e4ufer",KNIGHT:"Springer",PAWN:"Bauer",V1l:"Chat hier eingeben",V1m:"Hier tippen f\u00fcr Chat an",GUEST:"Gast",V1n:"Best\u00e4tigen",V1o:"Abbruch",V1p:"Clock",TIME:"Time",V1q:"Gain per Move",V1r:"Close",V1s:"Add",V1t:"Remove",NOTATION:"Notation",BOARD_FRITZ:"Fritz",BOARD_CRYSTALS:"Crystals",
BOARD_USCF:"USCF",BOARD_OLDSTYLE:"OldStyle",BOARD_HABSBURG:"Habsburg",V1u:"Fritz & Fertig",V1v:"Blitzpartie",V1w:"Neue Partie",TAKE_BACK:"Zug zur\u00fcck",MAKE_MOVE:"Zug vor",FLIP_BOARD:"Brett drehen",V1x:"Kopieren",V1y:"Brett suchen",V1z:"Jahr",V20:"Buch",LIVE_BOOK:"Live Buch",MOVE:"Zug",V21:"Nr Games",V22:"Score",V23:"Zuletzt gespielt",ELO_AVG:"Elo Avg.",VISITS:"Besuche",LOADING_STATISTICS:"L\u00e4dt Statistiken",LETS_CHECK:"Let's Check",EVAL:"Eval",VARIATION:"Variation",DEPTH:"Tiefe",ENGINE:"Engine",
V24:"Suchtext hier eingeben...",V25:"Lade Partien",V26:"Spieler Details",V27:"Spieler Information",V28:"Vorname",V29:"Nachname",V2a:"Geburtsjahr",V2b:"Trend",V2c:"Rating",V2d:"Feedback senden",V2e:"Ihr Hinweis",V2f:"Ihre E-Mail-Adresse",V2g:"Absenden",BROWSER_DOESNT_SUPPORT_3D:"Ihr Browser unterst\u00fctzt noch kein 3D",BOARD3D_FRITZ:"Fritz",BOARD3D_MODERN:"Modern",BOARD3D_ROOM:"Room",BOARD3D_BALLOON:"Balloon",BOARD3D_METAL:"Metal",V2h:"Silver",BOARD3D_FUTURE:"Future",V2i:"Marble",V2j:"Willkommen",
V2k:"Material",V2l:"Analyse",ANALYSIS_ENGINE:"Engine",ENG_SEARCH_INFO_FMT:"Tiefe {0}/{1}, {2}Tsd Pos/s, Zeit = {3}s",V2m:"Einf\u00fcgen",PW_INVALID:'Account <em>"{0}"</em> oder Passwort nicht erkannt.',PLEASE_LOGIN:"Anmelden mit ChessBase (Playchess) Konto:",V2n:"Name",V2o:"Passwort",V2p:"Konto neu anlegen",V2q:"Gast",PLEASE_LOGIN_SHORT:"Bitte anmelden",LOADING_ENGINE:"Lade Engine...",V2r:"Lade Live Partien ...",V2s:"Inviting other players to a game of {0} ({1})",OTHER_TOOLS:"Weitere Apps",DATABASES:"Datenbanken",
OPEN_DATABASE:"Datenbank \u00f6ffnen",CREATE_DATABASE:"Neue Datenbank",DELETE_DATABASE:"Datenbank l\u00f6schen",V2t:"L\u00f6schen",V2u:"Aufr\u00e4umen",V2v:"Meine Datenbanken",V2w:"Mit mir geteilt",V2x:"Datenbankauswahl f\u00fcr '{0}'",V2y:"PGN \u00d6ffnen",SAVE:"Speichern",SAVE_AND_REPLACE_GAMES:"Partien speichern und ersetzen",SAVE_AS_NEW:"Neue Version speichern",EDIT_GAME:"Kenndaten setzen",DATABASE_FUNCTIONS:"Datenbanken \u00f6ffnen, anlegen und l\u00f6schen",V2z:"Text vor Zug",TEXT_AFTER:"Text",
V30:"Variante",PROMOTE_LINE:"Aufwerten",DELETE_LINE:"L\u00f6schen",CUT_LINE:"Schneiden",V31:"PGN-Datei von Ihrem Computer \u00f6ffnen",V32:"Textkommentar vor diesem Zug",TEXT_AFTER_TIP:"Textkommentar nach diesem Zug",V33:"Zug zur\u00fccknehmen und Variante starten",V34:"Ausgew\u00e4hlte Variante wird Hauptvariante",DELETE_LINE_TIP:"Ausgew\u00e4hlte Variante l\u00f6schen",CUT_LINE_TIP:"Nachfolgende Z\u00fcge wegschneiden",V35:"Angemeldet bleiben",V36:"Passwort vergessen",CHANGE_PASSWORD:"Passwort \u00e4ndern",
V37:"Altes Passwort",V38:"Neues Passwort",V39:"Passwort best\u00e4tigen",MENU_PLAYCHESS_TOOL:"Spielen & Zuschauen",MENU_DATABASE_TOOL:"Live Datenbank",MENU_MYGAMES_TOOL:"Meine Partien",MENU_FRITZ_TOOL:"Schachprogramm Fritz",MENU_FRITZ_CHESSTER_TOOL:"Fritz & Fertig f\u00fcr Kinder",MENU_TACTICS_TOOL:"Taktiktraining",LANGUAGE:"Sprache",LOGIN_CREATE_LINK:"Hier klicken, um Account anzulegen",LOGIN_PLEASE_LOGIN:"Bitte anmelden",LOGIN_ACCOUNT_FREE:"Ein ChessBase Account ist kostenlos und gilt f\u00fcr alle ChessBase Web Tools und f\u00fcr www.schach.de.",
LOGIN_WELCOME:"Willkommen, {0}",V3a:"Freunde verwalten",INVITE_FRIEND:"Einen Freund einladen",V3b:"Ping",NOTATION_KING:"K",NOTATION_QUEEN:"D",NOTATION_KNIGHT:"S",NOTATION_BISHOP:"L",NOTATION_ROOK:"T",V3c:"",GENERAL_INVITE:'Danke f\u00fcr den Einsatz von <span style="font-weight:bold">{0}</span>.',V3d:'Danke f\u00fcr den Einsatz von <span style="font-weight:bold">ChessBase MyGames</span>, ihrer pers\u00f6nlichen Schachdatenbank im Web.',V3e:"Mit Ihrem ChessBase Account k\u00f6nnen Sie Clouddatenbanken f\u00fcr Schachpartien anlegen und verwalten. Diese Clouddatenbanken stehen auch unter ChessBase 13 zur Verf\u00fcgung.",
V3f:"ECO",V3g:"Zur\u00fcck",V3h:"Next Move",V3i:"Previous Move",V3j:"Next Game",V3k:"Previous Game",MENU_VIDEO_TOOL:"Videotraining",MENU_OPENINGS_TOOL:"Er\u00f6ffnungen verwalten",REQUESTING_MOVES:"Z\u00fcge anfordern",FRESH_POSITION:"Frische Stellung",V3l:"Teilen",V3m:"Hilfe",V3n:"2D/3D Brett umschalten",BOARD3D_BLACKWHITE:"Schwarzweiss",V3o:"Matt",V3p:"Patt",V3q:"Stellung aufbauen",WHITE_MATES:"Weiss setzt Matt",WHITE_CLEARLY_WINNING:"Weiss steht v\u00f6llig auf Gewinn",WHITE_WINNING:"Weiss steht auf Gewinn",
WHITE_DECISIVE:"Weiss hat gro\u00dfen Vorteil",WHITE_CLEARLY_BETTER:"Weiss steht deutlich besser",WHITE_BETTER:"Weiss steht besser",WHITE_SLIGHTLY:"Weiss steht etwas besser",WHITE_EDGE:"Weiss steht minimal besser",BLACK_MATES:"Schwarz setzt Matt",BLACK_CLEARLY_WINNING:"Schwarz steht v\u00f6llig auf Gewinn",BLACK_WINNING:"Schwarz steht auf Gewinn",BLACK_DECISIVE:"Schwarz hat gro\u00dfen Vorteil",BLACK_CLEARLY_BETTER:"Schwarz steht deutlich besser",BLACK_BETTER:"Schwarz steht besser",BLACK_SLIGHTLY:"Schwarz steht etwas besser",
BLACK_EDGE:"Schwarz steht minimal besser",EQUAL_POS:"Die Stellung ist ausgeglichen",PREMIUM_ONLY:"Nur bei Premium",V3r:"Avatar",V3s:"Rechentraining",V3t:"Berechnen Sie beliebige (gepr\u00fcfte) Varianten bevor Sie die Partie hier fortsetzen.",V3u:"F\u00fchren Sie Z\u00fcge blind aus. Klicken Sie in die Notation, um Varianten hinzuzuf\u00fcgen. Rechtsklick zeigt wahre Stellung. Klick auf 'Rechentraining' setzt die Partie fort.",TRAINING_SOLUTION:"L\u00f6sung zeigen",TRAINING_HELP:"Hilfestellung",TRAINING_QUESTION:"Finde den richtigen Zug",
UNANNOTATE:"Entkommentieren",V3x:"Mehr Varianten",V3y:"Weniger Varianten",V3z:"Drohung berechnen",V40:"Start",V41:"Pause",V42:"Im Augenblick l\u00e4uft keine Live\u00fcbertragung",CONNECTED_TO_SERVER:"Verbunden: {0}",V43:"Initialisiere",INSERT_DIAGRAM:"Diagramm einf\u00fcgen",V44:"Brett",V45:"Brett wird geladen, eine Sekunde...",LIKE:"Like"};CB.Vz.Chess.DEU=CB.Vz.Chess.GER;"use strict";CB.namespace("CB.Vz.Chess.ESP");
CB.Vz.Chess.ESP={LOGIN:"Conectar",LOGOUT:"Cerrar sesi\u00f3n",ACCOUNT:"Mi cuenta",BOARDS:"Tablero",RECONNECT:"Reconectar",V10:"Rendirse",V11:"Cerrar tablero",V12:"Ofrecer tablas",V13:"Aceptar tablas",V14:"{0} acept\u00f3 tablas.",V15:"{0} ofrece tablas.",V16:"{0} acepta tablas.",V17:"{0} se rinde.",V18:"Probando la conexi\u00f3n con el servidor",CONNECTING:"Conectando con el servidor, por favor espere...",V19:"Reconectado",V1a:"Nombre",V1b:"Pa\u00eds",V1c:"Rango",WHITE:"Blancas",BLACK:"Negras",V1d:"Elo blancas",
V1e:"Elo negras",RESULT:"Resultado",V1f:"Control de tiempo",V1g:"Torneo",GAMES:"Partidas",V1h:"Charla",V1i:"Su interlocutor se ha ido.",V1j:"Conexi\u00f3n",V1k:"Mapa",KING:"Rey",QUEEN:"Dama",ROOK:"Torre",BISHOP:"Alfil",KNIGHT:"Caballo",PAWN:"Pe\u00f3n",V1l:"Escriba aqu\u00ed la charla",V1m:"Escriba aqu\u00ed con quien quiere charlar",GUEST:"Invitado",V1n:"Confirmar",V1o:"Cancelar",V1p:"Reloj",TIME:"Tiempo",V1q:"Incr. por mov.",V1r:"Cerrar",V1s:"A\u00f1adir",V1t:"Quitar",NOTATION:"Notaci\u00f3n",BOARD_FRITZ:"Fritz",
BOARD_CRYSTALS:"Crystals",BOARD_USCF:"USCF",BOARD_OLDSTYLE:"OldStyle",BOARD_HABSBURG:"Habsburg",V1u:"Fritz & Chesster",V1v:"Jugar blitz",V1w:"Nueva partida",TAKE_BACK:"Retroceder",MAKE_MOVE:"Jugar",FLIP_BOARD:"Girar tablero",V1x:"Copiar",V1y:"Buscar tablero",V1z:"A\u00f1o",V20:"Libro",LIVE_BOOK:"Live Book",MOVE:"Jugada",V21:"Partidas",V22:"Marcador",V23:"\u00daltima vez",ELO_AVG:"Elo medio",VISITS:"Visitas",LOADING_STATISTICS:"Cargando estad\u00edsticas",LETS_CHECK:"Let's Check",EVAL:"Eval.",VARIATION:"Variante",
DEPTH:"Prof.",ENGINE:"M\u00f3dulo",V24:"Escriba el texto a buscar...",V25:"Obtener partidas",V26:"Datos del jugador",V27:"Informaci\u00f3n del jugador",V28:"Nombre",V29:"Apellidos",V2a:"Nacido en",V2b:"Tendencia",V2c:"Elo",V2d:"Enviar comentario",V2e:"Su comentario",V2f:"Su e-mail",V2g:"Enviado",BROWSER_DOESNT_SUPPORT_3D:"El navegador no admite tableros 3D",BOARD3D_FRITZ:"Fritz",BOARD3D_MODERN:"Moderno",BOARD3D_ROOM:"Habitaci\u00f3n",BOARD3D_BALLOON:"Globos",BOARD3D_METAL:"Metal",V2h:"Plata",BOARD3D_FUTURE:"Futuro",
V2i:"M\u00e1rmol",V2j:"Bienvenido",V2k:"Material",V2l:"An\u00e1lisis",ANALYSIS_ENGINE:"M\u00f3dulo",ENG_SEARCH_INFO_FMT:"Prof {0}/{1}, {2}kPos/s, tiempo = {3}s",V2m:"Pegar",PW_INVALID:"Usuario/Contrase\u00f1a no v\u00e1lido. Por favor, vuelva a intentarlo",PLEASE_LOGIN:"Por favor conecte con su cuenta ChessBase (Playchess):",V2n:"Nombre",V2o:"Contrase\u00f1a",V2p:"Crear cuenta",V2q:"Invitado",PLEASE_LOGIN_SHORT:"Por favor, identif\u00edquese",LOADING_ENGINE:"Cargando m\u00f3dulo...",V2r:"Cargando partidas en directo...",
V2s:"Invitando a otros jugadores a una partida de {0} ({1})",OTHER_TOOLS:"M\u00e1s herramientas",DATABASES:"Bases de datos",OPEN_DATABASE:"Abrir base",CREATE_DATABASE:"Crear base",DELETE_DATABASE:"Borrar base",V2t:"Borrar",V2u:"Limpiar",V2v:"Mis bases",V2w:"Bases compartidas conmigo",V2x:"Seleccionar base para '{0}'",V2y:"Abrir PGN",SAVE:"Guardar",SAVE_AND_REPLACE_GAMES:"Guardar y reemplazar partidas",SAVE_AS_NEW:"Guardar como nueva",EDIT_GAME:"Editar partida",DATABASE_FUNCTIONS:"Abrir, crear y y borrar bases",
V2z:"Texto antes",TEXT_AFTER:"Texto despu\u00e9s",V30:"Iniciar l\u00ednea",PROMOTE_LINE:"Promocionar l\u00ednea",DELETE_LINE:"Borrar l\u00ednea",CUT_LINE:"Cortar l\u00ednea",V31:"Abrir un archivo PGN de su equipo",V32:"A\u00f1adir comentario en forma de texto antes de esta jugada",TEXT_AFTER_TIP:" A\u00f1adir comentario en forma de texto tras esta jugada",V33:"Retroceder la jugada y comenzar una variante",V34:"Subir de nivel la variante seleccionada",DELETE_LINE_TIP:"Borrar la variante seleccionada",
CUT_LINE_TIP:"Truncar la variante",V35:"Seguir conectado",V36:"Contrase\u00f1a olvidada",CHANGE_PASSWORD:"Cambiar contrase\u00f1a",V37:"Contrase\u00f1a antigua",V38:"Contrase\u00f1a nueva",V39:"Confirmar contrase\u00f1a",MENU_PLAYCHESS_TOOL:"Playchess",MENU_DATABASE_TOOL:"Live Database",MENU_MYGAMES_TOOL:"My Games Cloud",MENU_FRITZ_TOOL:"Fritz Online",MENU_FRITZ_CHESSTER_TOOL:"Chess For Kids",MENU_TACTICS_TOOL:"Tactics Training",LANGUAGE:"Idioma",LOGIN_CREATE_LINK:"Haga clic aqu\u00ed para crear una cuenta",
LOGIN_PLEASE_LOGIN:"Por favor identif\u00edquese",LOGIN_ACCOUNT_FREE:"La creaci\u00f3n de una cuenta es gratis. La cuenta vale para todas las dem\u00e1s herramientas web de ChessBase y para jugar en www.playchess.com.",LOGIN_WELCOME:"Bienvenido {0}",V3a:"Gestionar amigos",INVITE_FRIEND:"Invitar a un amigo",V3b:"Ping",NOTATION_KING:"R",NOTATION_QUEEN:"D",NOTATION_KNIGHT:"C",NOTATION_BISHOP:"A",NOTATION_ROOK:"T",V3c:"P",GENERAL_INVITE:"Gracias por usar {0}.",V3d:"Gracias por usar ChessBase MyGames, su base de datos de ajedrez personal en la web.",
V3e:"Por favor con\u00e9ctese con su cuenta ChessBase para tener acceso a sus bases de datos en la nube. Tambi\u00e9n puede usar las bases de datos en la nube con ChessBase 13.",V3f:"ECO",V3g:"Volver",V3h:"Siguiente jug.",V3i:"Anterior jug.",V3j:"Siguiente part.",V3k:"Anterior part.",MENU_VIDEO_TOOL:"V\u00eddeos de entrenamiento",MENU_OPENINGS_TOOL:"Gestionar aperturas",REQUESTING_MOVES:"Requesting Moves",FRESH_POSITION:"Fresh Position",V3l:"Embed",V3m:"Help",V3n:"Toggle 2D/3D Board",BOARD3D_BLACKWHITE:"Black white",
V3o:"Mate",V3p:"Ahogado",V3q:"Armar posici\u00f3n",WHITE_MATES:"Las blancas dan mate",WHITE_CLEARLY_WINNING:"Las blancas tienen clara ventaja ganadora",WHITE_WINNING:"Las blancas tienen ventaja ganadora",WHITE_DECISIVE:"Las blancas tienen ventaja decisiva",WHITE_CLEARLY_BETTER:"Las blancas est\u00e1n claramente mejor",WHITE_BETTER:"Las blancas est\u00e1n mejor",WHITE_SLIGHTLY:"Las blancas est\u00e1n un poco mejor",WHITE_EDGE:"Las blancas tienen una ventaja m\u00ednima",BLACK_MATES:"Las negras dan mate",
BLACK_CLEARLY_WINNING:"Las negras tienen clara ventaja ganadora",BLACK_WINNING:"Las negras tienen ventaja ganadora",BLACK_DECISIVE:"Las negras tienen ventaja decisiva",BLACK_CLEARLY_BETTER:"Las negras est\u00e1n claramente mejor",BLACK_BETTER:"Las negras est\u00e1n mejor",BLACK_SLIGHTLY:"Las negras est\u00e1n un poco mejor",BLACK_EDGE:"Las negras tienen una ventaja m\u00ednima",EQUAL_POS:"La posici\u00f3n est\u00e1 igualada",PREMIUM_ONLY:"S\u00f3lo premium",V3r:"Avatar",V3s:"Entrenar c\u00e1lculo",
V3t:"Calcular variantes con la ayuda de Fritz antes de continuar la partida aqu\u00ed.",V3u:"Ejecute jugadas a la ciega. Haga clic en la notaci\u00f3n para a\u00f1adir variantes. Haga clic en 'Entrenar c\u00e1lculo' para reanudar la partida.",V3v:"Calculando...",V3w:"Madera",TRAINING_SOLUTION:"Ver soluci\u00f3n",TRAINING_HELP:"Ayuda",TRAINING_QUESTION:"Encontrar la jugada correcta",UNANNOTATE:"Desanotar",V3x:"M\u00e1s l\u00edneas",V3y:"Menos l\u00edneas",V3z:"Calcular amenaza",V40:"Start",V41:"Pause",
V42:"En ese momento, no hay una transmisi\u00f3n",CONNECTED_TO_SERVER:"Connected to server: {0}",V43:"Initializing",INSERT_DIAGRAM:"Insert Diagram",V44:"Tablero",V45:"Loading board, just a second...",LIKE:"Like"};
var LZString=function(){function c(b,e){if(!d[b]){d[b]={};for(var c=0;c<b.length;c++)d[b][b.charAt(c)]=c}return d[b][e]}var b=String.fromCharCode,d={},e={compressToBase64:function(b){if(null==b)return"";b=e._compress(b,6,function(b){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b)});switch(b.length%4){default:case 0:return b;case 1:return b+"===";case 2:return b+"==";case 3:return b+"="}},decompressFromBase64:function(b){return null==b?"":""==b?null:e._decompress(b.length,
32,function(d){return c("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",b.charAt(d))})},compressToUTF16:function(d){return null==d?"":e._compress(d,15,function(d){return b(d+32)})+" "},decompressFromUTF16:function(b){return null==b?"":""==b?null:e._decompress(b.length,16384,function(d){return b.charCodeAt(d)-32})},compressToUint8Array:function(b){b=e.compress(b);for(var d=new Uint8Array(2*b.length),c=0,l=b.length;c<l;c++){var q=b.charCodeAt(c);d[2*c]=q>>>8;d[2*c+1]=q%256}return d},
decompressFromUint8Array:function(d){if(null===d||void 0===d)return e.decompress(d);for(var c=Array(d.length/2),h=0,l=c.length;h<l;h++)c[h]=256*d[2*h]+d[2*h+1];var q=[];c.forEach(function(d){q.push(b(d))});return e.decompress(q.join(""))},compressToEncodedURIComponent:function(b){return null==b?"":e._compress(b,6,function(b){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$".charAt(b)})},decompressFromEncodedURIComponent:function(b){if(null==b)return"";if(""==b)return null;
b=b.replace(/ /g,"+");return e._decompress(b.length,32,function(d){return c("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",b.charAt(d))})},compress:function(d){return e._compress(d,16,function(d){return b(d)})},_compress:function(b,d,e){if(null==b)return"";var c,q,r={},t={},w,z,B="",v=2,y=3,C=2,D=[],E=0,F=0,G;for(G=0;G<b.length;G+=1)if(w=b.charAt(G),Object.prototype.hasOwnProperty.call(r,w)||(r[w]=y++,t[w]=!0),z=B+w,Object.prototype.hasOwnProperty.call(r,z))B=z;else{if(Object.prototype.hasOwnProperty.call(t,
B)){if(256>B.charCodeAt(0)){for(c=0;c<C;c++)E<<=1,F==d-1?(F=0,D.push(e(E)),E=0):F++;q=B.charCodeAt(0);for(c=0;8>c;c++)E=E<<1|q&1,F==d-1?(F=0,D.push(e(E)),E=0):F++,q>>=1}else{q=1;for(c=0;c<C;c++)E=E<<1|q,F==d-1?(F=0,D.push(e(E)),E=0):F++,q=0;q=B.charCodeAt(0);for(c=0;16>c;c++)E=E<<1|q&1,F==d-1?(F=0,D.push(e(E)),E=0):F++,q>>=1}v--;0==v&&(v=Math.pow(2,C),C++);delete t[B]}else for(q=r[B],c=0;c<C;c++)E=E<<1|q&1,F==d-1?(F=0,D.push(e(E)),E=0):F++,q>>=1;v--;0==v&&(v=Math.pow(2,C),C++);r[z]=y++;B=String(w)}if(""!==
B){if(Object.prototype.hasOwnProperty.call(t,B)){if(256>B.charCodeAt(0)){for(c=0;c<C;c++)E<<=1,F==d-1?(F=0,D.push(e(E)),E=0):F++;q=B.charCodeAt(0);for(c=0;8>c;c++)E=E<<1|q&1,F==d-1?(F=0,D.push(e(E)),E=0):F++,q>>=1}else{q=1;for(c=0;c<C;c++)E=E<<1|q,F==d-1?(F=0,D.push(e(E)),E=0):F++,q=0;q=B.charCodeAt(0);for(c=0;16>c;c++)E=E<<1|q&1,F==d-1?(F=0,D.push(e(E)),E=0):F++,q>>=1}v--;0==v&&(v=Math.pow(2,C),C++);delete t[B]}else for(q=r[B],c=0;c<C;c++)E=E<<1|q&1,F==d-1?(F=0,D.push(e(E)),E=0):F++,q>>=1;v--;0==
v&&C++}q=2;for(c=0;c<C;c++)E=E<<1|q&1,F==d-1?(F=0,D.push(e(E)),E=0):F++,q>>=1;for(;;)if(E<<=1,F==d-1){D.push(e(E));break}else F++;return D.join("")},decompress:function(b){return null==b?"":""==b?null:e._decompress(b.length,32768,function(d){return b.charCodeAt(d)})},_decompress:function(d,e,c){var l=[],q=4,r=4,t=3,w,z=[],B,v,y,C,D,E=c(0),F=e,G=1;for(B=0;3>B;B+=1)l[B]=B;v=0;C=Math.pow(2,2);for(D=1;D!=C;)y=E&F,F>>=1,0==F&&(F=e,E=c(G++)),v|=(0<y?1:0)*D,D<<=1;switch(v){case 0:v=0;C=Math.pow(2,8);for(D=
1;D!=C;)y=E&F,F>>=1,0==F&&(F=e,E=c(G++)),v|=(0<y?1:0)*D,D<<=1;w=b(v);break;case 1:v=0;C=Math.pow(2,16);for(D=1;D!=C;)y=E&F,F>>=1,0==F&&(F=e,E=c(G++)),v|=(0<y?1:0)*D,D<<=1;w=b(v);break;case 2:return""}B=l[3]=w;for(z.push(w);;){if(G>d)return"";v=0;C=Math.pow(2,t);for(D=1;D!=C;)y=E&F,F>>=1,0==F&&(F=e,E=c(G++)),v|=(0<y?1:0)*D,D<<=1;switch(w=v){case 0:v=0;C=Math.pow(2,8);for(D=1;D!=C;)y=E&F,F>>=1,0==F&&(F=e,E=c(G++)),v|=(0<y?1:0)*D,D<<=1;l[r++]=b(v);w=r-1;q--;break;case 1:v=0;C=Math.pow(2,16);for(D=1;D!=
C;)y=E&F,F>>=1,0==F&&(F=e,E=c(G++)),v|=(0<y?1:0)*D,D<<=1;l[r++]=b(v);w=r-1;q--;break;case 2:return z.join("")}0==q&&(q=Math.pow(2,t),t++);if(l[w])w=l[w];else if(w===r)w=B+B.charAt(0);else return null;z.push(w);l[r++]=B+w.charAt(0);q--;B=w;0==q&&(q=Math.pow(2,t),t++)}}};return e}();
"function"===typeof define&&define.amd?define(function(){return LZString}):"undefined"!==typeof module&&null!=module?module.exports=LZString:"undefined"!==typeof angular&&null!=angular&&angular.module("LZString",[]).factory("LZString",function(){return LZString});function getCtxFunction(c,b){return function(){return b.apply(c,arguments)}}Function.prototype.bind||(Function.prototype.bind=function(c){return getCtxFunction(c,this)});
var V3bf={initInstForListeners:function(c){c.addListener=V3bf.addListener;c.removeListener=V3bf.removeListener;c.fireEvent=V3bf.fireEvent;c.getListeners=V3bf.getListeners;c.enableEvents=V3bf.enableEvents;c.eventsEnabled=!0;c.idLstnr=0},initForListeners:function(c){V3bf.initInstForListeners(c.prototype)},enableEvents:function(c){this.eventsEnabled=c},getListeners:function(c){c="m_lstOn"+c;var b=this[c];b||(b={},this[c]=b);return b},addListener:function(c,b){this.getListeners(c)[this.idLstnr]=b;return this.idLstnr++},
removeListener:function(c,b){delete this.getListeners(c)[b]},fireEvent:function(c,b){if(this.eventsEnabled){var d=this.getListeners(c),e;for(e in d)d.hasOwnProperty(e)&&d[e].apply(this,b)}},addInstEvent:function(c,b,d){c[String.formatEx("addOn{0}Listener",b)]=function(d){return this.addListener(b,d)};c[String.formatEx("removeOn{0}Listener",b)]=function(d){this.removeListener(b,d)};c[String.formatEx("fireOn{0}",b)]=function(){if(this[String.formatEx("fireOn{0}",b)].delayed)this[String.formatEx("fireOn{0}",
b)].needFire=!0;else try{var e=arguments||[];d&&(e=d.call(this));this.fireEvent(b,e)}catch(c){CB.V46("fire-"+b,c)}};c.removeAllListeners=function(){for(var b in this)this.hasOwnProperty(b)&&0==b.search("m_lstOn")&&delete b};c[String.formatEx("delayfireOn{0}",b)]=function(d){d=d||100;this[String.formatEx("fireOn{0}",b)].delayed=!0;var c=this;window.setTimeout(function(){c[String.formatEx("continuefireOn{0}",b)]()},d)};c[String.formatEx("continuefireOn{0}",b)]=function(){this[String.formatEx("fireOn{0}",
b)].delayed=!1;if(this[String.formatEx("fireOn{0}",b)].needFire)try{this[String.formatEx("fireOn{0}",b)]()}catch(d){CB.V46("delfire-"+b,d)}this[String.formatEx("fireOn{0}",b)].needFire=!1}},addEvent:function(c,b,d){V3bf.addInstEvent(c.prototype,b,d)}};function HashTable(c,b){c&&(this.funcHash=c);b&&(this.funcEq=b);this.impl={}}HashTable.prototype.impl={};HashTable.prototype.funcHash=function(c){return ObjUtil.hashCode(c)};HashTable.prototype.funcEq=function(c,b){return c===b};
HashTable.prototype.getItem=function(c){var b=this.funcHash(c);if(b=this.impl[b]){var d=function(b){return this.funcEq(b.key,c)}.bind(this),b=b.filter(d);if(null!=b&&0<b.length)return b[0].value}};HashTable.prototype.setItem=function(c,b){var d=this.funcHash(c),e=this.impl[d];e||(e=[],this.impl[d]=e);for(var d=0,g=e.length;d<g;++d){var f=e[d];if(this.funcEq(f.key,c)){f.value=b;return}}e.push({key:c,value:b})};
HashTable.prototype.removeItem=function(c){var b=this.funcHash(c),d=this.impl[b];if(d){var e=function(b){return!this.funcEq(b.key,c)}.bind(this),d=d.filter(e);this.impl[b]=d}};HashTable.prototype.clear=function(){this.impl={}};"use strict";
var ObjUtil={clone:function(c,b){b||(b=new HashTable);var d=b.getItem(c);if(d)return d;c.clone?d=c.clone(b):(d=ObjUtil.isArray(c)?[]:new c.constructor,b.setItem(c,d),ObjUtil.copyTo(c,d,!1,b));b.setItem(c,d);return d},clone2:function(c){return ObjUtil.copyTo2(c,new c.constructor)},cloneNoFunc:function(c){c=JSON.stringify(c);return JSON.parse(c)},copyTo:function(c,b,d,e){for(var g in c)if(!(d&&g in b)){var f=c[g],h=f;null!=f&&"object"===typeof f&&(h=ObjUtil.clone(f,e));b[g]=h}c.toString!==b.toString&&
(b.toString=c.toString);return b},copyTo2:function(c,b){for(var d in c){var e=c[d],g=e;null!=e&&"object"===typeof e&&(g=ObjUtil.clone2(e));b[d]=g}return b}};function _CMP(c,b){if(void 0===c!==(void 0===b))return!1;if(void 0===c&&void 0===b)return!0;if(null===c!==(null===b))return!1;if(null===c&&null===b)return!0;var d=typeof c,e=typeof b;return"object"===d!==("object"===e)?!1:"object"===d&&"object"===e?ObjUtil.equals(c,b):c==b}
ObjUtil.equals=function(c,b){if(c.equals)return c.equals(b);for(var d in c)if(!_CMP(c[d],b[d]))return!1;return!0};ObjUtil.isEmpty=function(c){return!Object.keys(c).length};ObjUtil.isFunction=function(c){return!!(c&&c.constructor&&c.call&&c.apply)};ObjUtil.isArray=function(c){return"[object Array]"===Object.prototype.toString.call(c)};function djb2(c){for(var b=5381,d,e=0;e<c.length;++e)d=c.charCodeAt(e)&255,b=4294967295&(b<<5)+b+d;return b}
function StringHash(c){return djb2(typeof c+c.constructor.toString())}ObjUtil.hashCode=function(c){return c.hashCode?c.hashCode():"object"===typeof c?StringHash(c):djb2(c.toString())};function EnumToString(c,b){for(var d in c)if(c[d]===b)return d;return""}function StringToEnum(c,b){if(b in c)return c[b]}function StringToEnumFlags(c,b){for(var d=b.split("|"),e=0,g=0,f=d.length;g<f;++g){var h=StringToEnum(c,d[g]);h&&(e|=h)}return e}
function evalObj(c){var b={},d;for(d in c){var e=c[d];b[d]=e;"string"===typeof e&&(0>e.indexOf("{")||(b[d]=eval("("+e+")")))}return b}function minusToCamel(c){for(var b=c.indexOf("-");0<=b;b=c.indexOf("-")){var d=c.substring(0,b);c=c.substring(b+1);0<c.length&&(c=c.charAt(0).toUpperCase()+(1<c.length?c.substring(1):""));c=d+c}return c}function NOT(c){return function(){return!c.apply(this,arguments)}}function TRUE(){return function(){return!0}}function FALSE(){return function(){return!1}}
function EqualsFilter(c){return function(b,d,e){return ObjUtil.equals(b,c)}}"use strict";Array.prototype.find||(Array.prototype.find=function(c){if("function"!==typeof c)throw new TypeError("predicate must be a function");for(var b=Object(this),d=b.length>>>0,e,g=0;g<d;g++)if(g in b&&(e=b[g],c.call(this,e,g,b)))return e});Array.prototype.all||(Array.prototype.all=function(c){return!this.some(function(b,d,e){return!c(b,d,e)})});
Array.prototype.findIndex||(Array.prototype.findIndex=function(c){if("function"!==typeof c)throw new TypeError("predicate must be a function");for(var b=Object(this),d=b.length>>>0,e,g=0;g<d;g++)if(g in b&&(e=b[g],c.call(this,e,g,b)))return g;return-1});
Array.prototype.pickRandom||(Array.prototype.pickRandom=function(c){if("function"!==typeof c)throw new TypeError("predicate must be a function");for(var b=Object(this),d=b.length>>>0,e,g=void 0,f=0,h=0;h<d;h++)h in b&&(f+=c.call(this,b[h],h,b));for(var l=Math.random()*f,h=f=0;h<d;h++)if(h in b&&(e=b[h],f+=c.call(this,e,h,b),f>=l)){g=e;break}return g});"use strict";
CB.V47=function(){var c=function(b){this.V48=b;this.handlers=[]};c.prototype.count=function(){return this.handlers.length};c.prototype.add=function(b){this.handlers.push(b);return this.handlers.length-1};c.prototype.remove=function(b){if(void 0===this.handlers[b])throw Error("Removing unknown handler: "+b);delete this.handlers[b]};c.prototype.execute=function(){for(var b=0;b<this.handlers.length;b++)if(void 0!==this.handlers[b])this.handlers[b](this.V48)};c.prototype.empty=function(){for(var b=0;b<
this.handlers.length;b++)if(void 0!==this.handlers[b])return!1;return!0};return c}();"use strict";CB.namespace("CB.V4a");CB.V4a.V4b=function(c){return unescape(encodeURIComponent(c))};CB.V4a.V4c=function(c){return CB.V4a.V4d(c)};CB.V4a.test=function(){var c=CB.V4a.V4b("Rh\u00f4ne");return CB.V4a.V4e(c)};
CB.V4a.V4d=function(c){var b,d,e,g,f,h;b="";e=c.length;for(d=0;d<e;)switch(g=c[d++].charCodeAt(0),g>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:b+=String.fromCharCode(g);break;case 12:case 13:d<e&&(f=c[d++].charCodeAt(0));b+=String.fromCharCode((g&31)<<6|f&63);break;case 14:d<e&&(f=c[d++].charCodeAt(0)),d<e&&(h=c[d++].charCodeAt(0)),b+=String.fromCharCode((g&15)<<12|(f&63)<<6|(h&63)<<0)}return b};
CB.V4a.V4e=function(c){for(var b=!1,d=0;d<c.length&&!b;d++){var e=c.charCodeAt(d);if(e&128)if(194<=e&&223>=e&&128<=c.charCodeAt(d+1)&&191>=c.charCodeAt(d+1))d+=2,b=!0;else if(224==e&&160<=c.charCodeAt(d+1)&&191>=c.charCodeAt(d+1)&&128<=c.charCodeAt(d+2)&&191>=c.charCodeAt(d+2)||(225<=e&&236>=e||238==e||239==e)&&128<=c.charCodeAt(d+1)&&191>=c.charCodeAt(d+1)&&128<=c.charCodeAt(d+2)&&191>=c.charCodeAt(d+2)||237==e&&128<=c.charCodeAt(d+1)&&159>=c.charCodeAt(d+1)&&128<=c.charCodeAt(d+2)&&191>=c.charCodeAt(d+
2))d+=3,b=!0;else if(240==e&&144<=c.charCodeAt(d+1)&&191>=c.charCodeAt(d+1)&&128<=c.charCodeAt(d+2)&&191>=c.charCodeAt(d+2)&&128<=c.charCodeAt(d+3)&&191>=c.charCodeAt(d+3)||241<=e&&243>=e&&128<=c.charCodeAt(d+1)&&191>=c.charCodeAt(d+1)&&128<=c.charCodeAt(d+2)&&191>=c.charCodeAt(d+2)&&128<=c.charCodeAt(d+3)&&191>=c.charCodeAt(d+3)||244==e&&128<=c.charCodeAt(d+1)&&143>=c.charCodeAt(d+1)&&128<=c.charCodeAt(d+2)&&191>=c.charCodeAt(d+2)&&128<=c.charCodeAt(d+3)&&191>=c.charCodeAt(d+3))d+=4,b=!0}return b};
CB.V4a.V4f=function(c){for(var b=0;b<c.length;b++)if(c.charCodeAt(b)&128)return!0;return!1};CB.V4a.V4g=function(c){return CB.V4a.base64.encode(c)};CB.V4a.V4h=function(c){return CB.V4a.base64.V4i(c)};
CB.V4a.base64={base64s:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",encode:function(c){if("function"===typeof btoa)return btoa(c);for(var b=this.base64s,d,e,g=0,f="";c.length>=g+3;)d=(c.charCodeAt(g++)&255)<<16|(c.charCodeAt(g++)&255)<<8|c.charCodeAt(g++)&255,f+=b.charAt((d&16515072)>>18)+b.charAt((d&258048)>>12)+b.charAt((d&4032)>>6)+b.charAt(d&63);0<c.length-g&&3>c.length-g&&(e=!!(c.length-g-1),d=(c.charCodeAt(g++)&255)<<16|(e?(c.charCodeAt(g)&255)<<8:0),f+=b.charAt((d&16515072)>>
18)+b.charAt((d&258048)>>12)+(e?b.charAt((d&4032)>>6):"=")+"=");return f},V4i:function(c){if("function"===typeof atob)return atob(c);var b=this.base64s,d,e="",g;for(g=0;g<c.length;g+=4)d=(b.indexOf(c.charAt(g))&255)<<18|(b.indexOf(c.charAt(g+1))&255)<<12|(b.indexOf(c.charAt(g+2))&255)<<6|b.indexOf(c.charAt(g+3))&255,e+=String.fromCharCode((d&16711680)>>16,(d&65280)>>8,d&255);return 61===c.charCodeAt(g-2)?e.substring(0,e.length-2):61===c.charCodeAt(g-1)?e.substring(0,e.length-1):e},V4j:function(c){this.V4k=
new Uint8Array(256);for(var b=0;b<this.base64s.length;b++)this.V4k[this.base64s.charCodeAt(b)]=b;var b=.75*c.length,d=c.length,e=0,g,f,h,l;"="===c[c.length-1]&&(b--,"="===c[c.length-2]&&b--);for(var q=new ArrayBuffer(b),r=new Uint8Array(q),b=0;b<d;b+=4)g=this.V4k[c.charCodeAt(b)],f=this.V4k[c.charCodeAt(b+1)],h=this.V4k[c.charCodeAt(b+2)],l=this.V4k[c.charCodeAt(b+3)],r[e++]=g<<2|f>>4,r[e++]=(f&15)<<4|h>>2,r[e++]=(h&3)<<6|l&63;return q}};
CB.V4a.V4l=function(c){c=c.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");c=(new RegExp("[\\?&]"+c+"=([^&#]*)")).exec(window.location.href);if(null===c)return"";c=c[1];c.length&&"/"==c.charAt(c.length-1)&&(c=c.slice(0,c.length-1));return c};CB.V4a.V4m=function(c){if(c){var b=c.toLowerCase();b.replace(/</g,"(");b.replace(/>/g,")");b&&15<b.length&&(-1!=c.search("http://")&&(b=b.slice(7)),-1!=c.search("https://")&&(b=b.slice(8)),c=b.indexOf("/"),0<c&&(b=b.slice(0,c)));return b}return""};
CB.V4a.V4n=function(c){c=c.replace("%22",'"');c=c.replace("%27","'");if('"'==c.charAt(0)||"'"==c.charAt(0))c=c.slice(1,c.length-1);return c};CB.V4a.V4o=function(c){return c.replace(/[\u00A0-\u2666<>\&]/g,function(b){return"&#"+b.charCodeAt(0)+";"})};var decodeHtmlEntity=function(c){},encodeHtmlEntity=function(c){};CB.V4a.V4p=function(c){return c.replace(/[\u00A0-\u2666<>\&]/g,function(b){return"&#"+b.charCodeAt(0)+";"})};CB.V4a.V4q=function(c){return c.replace(/&#(\d+);/g,function(b,d){return String.fromCharCode(d)})};
CB.V4a.V4r=function(c){for(var b=0,d="",e=0;e<c.length;e++){var g=c.charCodeAt(e);if(255<g)return c;127<g&&b++;d+=String.fromCharCode(this.conv1252[g])}return b>.7*c.length?d:c};
CB.V4a.conv1252=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,1026,1027,8218,1107,8222,8230,8224,8225,8364,8240,1033,8249,1034,1036,1035,1039,1106,8216,8217,8220,8221,8226,
8211,8212,8482,1113,8250,1114,1116,1115,1119,160,1038,1118,1032,164,1168,166,167,1025,169,1028,171,172,173,174,1031,176,177,1030,1110,1169,181,182,183,1105,8470,1108,187,1112,1029,1109,1111,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,
1103];
(function(c,b){c.JSONP=function(b,e,g,f){b=b||"";e=e||{};g=g||"";f=f||function(){};var h=function(b){var d=[],e;for(e in b)b.hasOwnProperty(e)&&d.push(e);return d};if("object"==typeof e){for(var l="",h=h(e),q=0;q<h.length;q++)l+=encodeURIComponent(h[q])+"="+encodeURIComponent(e[h[q]]),q!=h.length-1&&(l+="&");b+="?"+l}else"function"==typeof e&&(f=g=e);"function"==typeof g&&(f=g,g="callback");Date.now||(Date.now=function(){return(new Date).getTime()});e=Date.now();var r="jsonp"+Math.round(e+1000001*Math.random());
c[r]=function(b){f(b);delete c[r]};b=-1===b.indexOf("?")?b+"?":b+"&";e=document.createElement("script");e.setAttribute("src",b+g+"="+r);document.getElementsByTagName("head")[0].appendChild(e)}})(window);function byteswap_ushort(c){var b=new ArrayBuffer(2),b=new DataView(b);b.setUInt16(0,c);c=b.GetUint8();b.SetUint8(0,b.GetUint8(1));b.SetUint8(1,c);return b.GetUint16(0)}
function byteswap_ulong(c){var b=new ArrayBuffer(4),b=new DataView(b);b.setUInt32(0,c);c=new ArrayBuffer(4);c=new DataView(c);for(var d=0;4>d;d++)c.setUint8(d,b.getUint8(3-d));return c.GetUint32(0)}function byteswap_uint64(c){var b=new ArrayBuffer(8),b=new DataView(b);b.setUInt64(0,c);c=new ArrayBuffer(8);c=new DataView(c);for(var d=0;8>d;d++)c.setUint8(d,b.getUint8(7-d));return c.GetUint64(0)}
function getInternetExplorerVersion(){return 0<=navigator.userAgent.indexOf("MSIE ")||navigator.userAgent.match(/Trident.*rv\:11\./)?11:-1}function idiv(c,b){return(c-c%b)/b}function isNumber(c){return!isNaN(parseInt(c,10))}CB.V4s=function(c,b,d){if("number"!=typeof b)throw Error("CB.setFlag: number expected for bits");void 0===c.flags&&(c.flags=0);c.flags=d?c.flags|b:c.flags&~b};CB.V4t=function(c,b){return 0!=(c&b)};CB.namespace("CB.V4u");CB.V4u={};
CB.V4u.V4v=function(c){c=new Date(10*c);return c.getUTCHours()<<24|c.getUTCMinutes()<<16|c.getUTCSeconds()<<8|c.getUTCMilliseconds()/10};"use strict";CB=CB||{};
CB.Timer=function(){var c=function(b){this.handler=b;this.active=!1};c.prototype.V4w=function(b){this.runOnce(0,b)};c.prototype.runOnce=function(b,d){if("undefined"==typeof b||null==b)b=5E3;d&&(this.handler=d);this.stop();this.V4x=!1;this.active=!0;this.timeout=b;this.timer=window.setTimeout(this.V4y.bind(this),this.timeout);this.tick=new CB.V4z};c.prototype.runPeriodic=function(b,d){d&&(this.handler=d);this.stop();this.active=this.V4x=!0;this.timeout=b||5E3;this.timer=window.setInterval(this.V4y.bind(this),
this.timeout);this.tick=new CB.V4z};c.prototype.restart=function(){this.active&&(this.stop(),this.active=!0,this.timer=this.V4x?window.setInterval(this.V4y.bind(this),this.timeout):window.setTimeout(this.V4y.bind(this),this.timeout),this.tick=new CB.V4z)};c.prototype.V50=function(){return this.tick?this.tick.V50():0};c.prototype.stop=function(){this.V4x?window.clearInterval(this.timer):window.clearTimeout(this.timer);this.active=!1};c.prototype.isActive=function(){return this.active};c.prototype.V4y=
function(){this.handler&&this.handler();this.active=!1};c.prototype.V51=function(){return this.timeout?this.timeout:0};c.V52=function(b){for(b+=(new Date).getTime();new Date<b;);};c.V4w=function(b,d){d=d||100;(new CB.Timer).runOnce(d,b)};return c}();CB.V54=window.performance&&window.performance.now;
CB.V4z=function(){var c=function(){this.start()};c.prototype.start=function(){this.ticker=CB.V54?window.performance.now():(new Date).valueOf()};c.prototype.V55=function(){return CB.V54?Math.round(100*(window.performance.now()-this.ticker))/100:(new Date).valueOf()-this.ticker};c.prototype.V56=function(b){var d="";b&&(d=b+": ");d+=this.V55()+"ms";this.start();return d};c.prototype.V50=function(){return Math.round(this.V55())};return c}();
CB.V57=function(){return CB.V54?Math.round(window.performance.now()):(new Date).valueOf()};CB.V58=function(){return CB.V54?window.performance.now():(new Date).valueOf()};CB.V59=function(){var c=function(b){this.V5a=void 0!==b?b:!0;this.start()};c.prototype.start=function(){this.tick=(new Date).valueOf()};c.prototype.V5b=function(b){return this.V5d()>1E3*b?(this.V5a&&this.start(),!0):!1};c.prototype.V5d=function(){return(new Date).valueOf()-this.tick};return c}();
CB.V3bs=function(){var c=function(){};c.prototype.exec=function(b,d){this.timer&&this.timer.stop();this.timer=new CB.Timer(b);this.V53=d;this.timer.runOnce(d)};c.prototype.isActive=function(){return this.timer&&this.timer.isActive()};c.prototype.stop=function(){this.timer&&this.timer.stop()};c.prototype.restart=function(){this.isActive()&&(this.timer.stop(),this.timer.runOnce(this.V53||1E3))};return c}();"use strict";
CB.Date=function(){var c=function(b,d,e){b&&(this.year=b);d&&(this.month=d);e&&(this.day=e)};c.prototype.year=0;c.prototype.month=0;c.prototype.day=0;c.prototype.toString=function(){return String.formatEx("{day}.{month}.{year}",this)};c.g_regexPGN=/(?:(\d{4})|\?{4})\.(?:(\d{2})|\?{2})\.(?:(\d{2})|\?{2})/;c.fromPGNString=function(b){return(b=c.g_regexPGN.exec(b))?new c(Number(b[1]),Number(b[2]),Number(b[3])):new c};c.prototype.V5e=function(b){this.year=b>>9;this.month=b>>5&15;this.day=b&31};c.prototype.V5f=
function(){var b=new Date;this.year=b.getFullYear();this.month=b.getMonth()+1;this.day=b.getDate()};c.today=function(){var b=new CB.Date;b.V5f();return b};c.prototype.V5g=function(){return this.year<<9|this.month<<5|this.day};c.prototype.fromDataBuf=function(b){b=b.V3c1();this.V5e(b)};c.prototype.V3c0=function(b){b.V3by(this.year<<9|this.month<<5|this.day)};c.prototype.toLocaleString=function(){var b="";this.year&&(b=this.year.toString(),this.month&&(b=this.month.toString()+"."+b,10>this.month&&(b=
"0"+b),this.day&&(b=this.day.toString()+"."+b,10>this.day&&(b="0"+b))));return b};c.prototype.toPGNString=function(){var b="";if(this.year){b=this.year.toString();if(this.month){var d=this.month.toString();10>this.month&&(d="0"+d);b+="."+d}else b+=".??";this.day?(d=this.day.toString(),10>this.day&&(d="0"+d),b+="."+d):b+=".??"}return b};c.prototype.getDay=function(){return this.day};c.prototype.V5h=function(b){this.day=b};c.prototype.getMonth=function(){return this.month};c.prototype.setMonth=function(b){this.month=
b};c.prototype.getYear=function(){return this.year};c.prototype.setYear=function(b){this.year=b};c.getThisYear=function(){var b=new CB.Date;b.V5f();return b.getYear()};return c}();"use strict";CB.Time=function(){var c=function(b){this.time=b};c.prototype.time=0;return c}();CB.V5i=function(){var c=function(){this.V5j=0};c.prototype.V3c0=function(b){b.V3bu(this.V5j)};c.prototype.fromDataBuf=function(b){b.V3bz(this.V5j)};return c}();
function CBGuid(){this.uint16Data3=this.uint16Data2=this.uint32Data1=0;this.uint8Data4=[0,0,0,0,0,0,0,0]}
CBGuid.prototype={fromRandom:function(c){var b=0;if(void 0!==c)for(var d=0;d<c.length;d++)b+=c.charCodeAt(d);this.uint32Data1=Math.floor(4294967296*Math.random()+b);this.uint16Data2=Math.floor(65536*Math.random()+b);this.uint16Data3=Math.floor(65536*Math.random()+b);for(d=0;8>d;d++)this.uint8Data4[d]=Math.floor(256*Math.random()+b)},toString:function(){for(var c=this.uint32Data1.toString(16)+"-"+this.uint16Data2.toString(16)+"-"+this.uint16Data3.toString(16)+"-",b=0;2>b;b++)c+=this.uint8Data4[b].toString(16);
c+="-";for(b=2;8>b;b++)c+=this.uint8Data4[b].toString(16);return c},V3c0:function(c){c.V3bi(this.uint32Data1);c.V3bj(this.uint16Data2);c.V3bj(this.uint16Data3);for(var b=0;8>b;b++)c.writeUint8(this.uint8Data4[b])},fromDataBuf:function(c){this.uint32Data1=c.V3bx();this.uint16Data2=c.V3bj();this.uint16Data3=c.V3bj();for(var b=0;8>b;b++)this.uint8Data4[b]=c.readUint8()}};"use strict";
CB.V5k={V5l:0,AFG:1,ALB:2,ALG:3,AND:4,ANG:5,ANT:6,ARG:7,ARM:8,V5m:9,AUT:10,AZE:11,BAH:12,BHN:13,BAN:14,BAR:15,BLR:16,BEL:17,BLZ:18,BER:19,BOL:20,BIH:21,BOT:22,BRA:23,IVB:24,BRN:25,BUL:26,BUR:27,CAN:28,CHI:29,CHN:30,COL:31,CRI:32,CRO:33,CUB:34,CYP:35,CZE:36,DEN:37,DJI:38,DOM:39,ECU:40,EGY:41,ENG:42,ESP:43,EST:44,ETH:45,FAI:46,FIJ:47,FIN:48,FRA:49,MKD:50,GAM:51,GEO:52,GER:53,GHA:54,GRE:55,GUA:56,GCI:57,GUY:58,HAI:59,HON:60,HKG:61,HUN:62,ISL:63,IND:64,INA:65,IRI:66,IRQ:67,ISR:68,IRL:69,ITA:70,IVO:71,
JAM:72,JPN:73,JCI:74,JOR:75,KAZ:76,KEN:77,KOR:78,KYR:79,KUW:80,LAT:81,LBN:82,LBY:83,LIE:84,LTU:85,LUX:86,MAC:87,MAD:88,MAS:89,MLI:90,MLT:91,MAU:92,MRI:93,MEX:94,MDA:95,MNC:96,MON:97,MAR:98,MOZ:99,MYA:100,NAM:101,NEP:102,NED:103,AHO:104,NZL:105,NCA:106,NGR:107,NOR:108,PAK:109,PLE:110,PAN:111,PNG:112,PAR:113,PER:114,PHI:115,POL:116,POR:117,PUR:118,QAT:119,ROU:120,RUS:121,ESA:122,SMR:123,SCO:124,SEN:125,SEY:126,SIN:127,SVK:128,SLO:129,RSA:130,SRI:131,SUD:132,SUR:133,SWE:134,SUI:135,SYR:136,TJK:137,TAN:138,
THA:139,TRI:140,TUN:141,TUR:142,TKM:143,UGA:144,UKR:145,UAE:146,USA:147,URU:148,URS:149,UZB:150,VEN:151,VIE:152,ISV:153,WLS:154,YEM:155,YUG:156,ZAM:157,ZIM:158,ZRE:159,DDR:160,CSR:161,CAM:162,CHD:163,KAP:164,KBA:165,COM:166,CON:167,NKO:168,LAO:169,LES:170,MWI:171,MDV:172,MSH:173,OMN:174,NAU:175,MIC:176,NIG:177,SAU:178,TOG:179,TON:180,VAN:181,VAT:182,TUV:183,SWA:184,SIE:185,SLU:186,PAP:187,SVI:188,SAM:189,SKI:190,SAL:191,GE2:192,ZAR:193,RWA:194,LBR:195,NET:196,TPE:197,ASU:198,AGG:199,ARN:200,BNN:201,
BTN:202,BRI:203,CMB:204,CAY:205,CAR:206,CIB:207,CIA:208,COA:209,CIN:210,ELG:211,ERI:212,FGB:213,FRG:214,FRP:215,GAB:216,GGB:217,GRA:218,GRL:219,FGA:220,GMA:221,GUI:222,GUB:223,IOM:224,JMY:225,MFR:226,MYF:227,MSG:228,NCF:229,NNN:230,NNA:231,NMI:232,OTM:233,PAL:234,PIG:235,RUF:236,SAO:237,SOM:238,SVN:239,HGB:240,PGB:241,TKI:242,TCI:243,WFR:244,NIR:245,ISS:246,GBR:247,SAA:248,MNE:249,SRB:250,CAT:251,BAS:252,KOS:253,V5n:254};
CB.V5o=function(){var c=[];c[CB.V5k.V5l]="United Nations";c[CB.V5k.AFG]="Afghanistan";c[CB.V5k.ALB]="Albania";c[CB.V5k.ALG]="Algeria";c[CB.V5k.ASU]="American samoa";c[CB.V5k.AND]="Andorra";c[CB.V5k.ANG]="Angola";c[CB.V5k.AGG]="Anguilla";c[CB.V5k.ANT]="Antigua and Barbuda";c[CB.V5k.ARG]="Argentina";c[CB.V5k.ARM]="Armenia";c[CB.V5k.ARN]="Aruba";c[CB.V5k.V5m]="Australia";c[CB.V5k.AUT]="Austria";c[CB.V5k.AZE]="Azerbaijan";c[CB.V5k.BAH]="Bahamas";c[CB.V5k.BHN]="Bahrain";c[CB.V5k.BAN]="Bangladesh";c[CB.V5k.BAR]=
"Barbados";c[CB.V5k.BAS]="Basque Country";c[CB.V5k.BLR]="Belarus";c[CB.V5k.BEL]="Belgium";c[CB.V5k.BLZ]="Belize";c[CB.V5k.BNN]="Benin";c[CB.V5k.BER]="Bermuda";c[CB.V5k.BTN]="Bhutan";c[CB.V5k.BOL]="Bolivia";c[CB.V5k.BIH]="Bosnia and Herzegovina";c[CB.V5k.BOT]="Botswana";c[CB.V5k.BRA]="Brazil";c[CB.V5k.IVB]="Virgin Islands British";c[CB.V5k.ISV]="Virgin Islands US";c[CB.V5k.BRN]="Brunei";c[CB.V5k.BUL]="Bulgaria";c[CB.V5k.BUR]="Burkina faso";c[CB.V5k.BRI]="Burundi";c[CB.V5k.CMB]="Cambodja";c[CB.V5k.CAM]=
"Cameroon";c[CB.V5k.CAN]="Canada";c[CB.V5k.KAP]="Cape verde";c[CB.V5k.CAY]="Cayman Islands";c[CB.V5k.CAR]="Central African Republic";c[CB.V5k.CAT]="Catalonia";c[CB.V5k.CHD]="Chad";c[CB.V5k.CIB]="Jersey";c[CB.V5k.CHI]="Chile";c[CB.V5k.CHN]="China";c[CB.V5k.CIA]="Christmas";c[CB.V5k.COA]="Cocos (Keeling)";c[CB.V5k.COL]="Colombia";c[CB.V5k.COM]="Comoros";c[CB.V5k.CON]="Congo-Brazzaville";c[CB.V5k.CIN]="Cook Islands";c[CB.V5k.CRI]="Costa Rica";c[CB.V5k.CRO]="Croatia";c[CB.V5k.CUB]="Cuba";c[CB.V5k.CYP]=
"Cyprus";c[CB.V5k.CZE]="Czech Republic";c[CB.V5k.DEN]="Denmark";c[CB.V5k.DJI]="Djibouti";c[CB.V5k.DOM]="Dominican Republic";c[CB.V5k.ECU]="Ecuador";c[CB.V5k.ELG]="Equatorial Guinea";c[CB.V5k.EGY]="Egypt";c[CB.V5k.ENG]="England";c[CB.V5k.ERI]="Eritrea";c[CB.V5k.ESP]="Spain";c[CB.V5k.EST]="Estonia";c[CB.V5k.ETH]="Ethiopia";c[CB.V5k.FGB]="England";c[CB.V5k.FAI]="Faroes";c[CB.V5k.FIJ]="Fiji";c[CB.V5k.FIN]="Finland";c[CB.V5k.FRA]="France";c[CB.V5k.FRG]="Guyana";c[CB.V5k.FRP]="Tahiti(French Polinesia)";
c[CB.V5k.MKD]="Macedonia";c[CB.V5k.GAB]="Gabon";c[CB.V5k.GAM]="Gambia";c[CB.V5k.GEO]="Georgia";c[CB.V5k.GER]="Germany";c[CB.V5k.SAA]="Germany";c[CB.V5k.DDR]="Germany";c[CB.V5k.GE2]="Germany";c[CB.V5k.GHA]="Ghana";c[CB.V5k.GGB]="Gibraltar";c[CB.V5k.GRE]="Greece";c[CB.V5k.GRA]="Grenada";c[CB.V5k.GRL]="Greenland";c[CB.V5k.FGA]="Guadeloupe";c[CB.V5k.GMA]="Guam";c[CB.V5k.GUA]="Guatemala";c[CB.V5k.GUI]="Guinea";c[CB.V5k.GUB]="Guinea-Bissau";c[CB.V5k.GCI]="Guernsey";c[CB.V5k.GUY]="Guyana";c[CB.V5k.HAI]=
"Haiti";c[CB.V5k.HON]="Honduras";c[CB.V5k.HKG]="Hong Kong";c[CB.V5k.HUN]="Hungary";c[CB.V5k.ISL]="Iceland";c[CB.V5k.IND]="India";c[CB.V5k.INA]="Indonesia";c[CB.V5k.IRI]="Iran";c[CB.V5k.IRQ]="Iraq";c[CB.V5k.IOM]="Isle of MAN";c[CB.V5k.ISR]="Israel";c[CB.V5k.IRL]="Ireland";c[CB.V5k.ITA]="Italy";c[CB.V5k.IVO]="Cote d'Ivoire";c[CB.V5k.JAM]="Jamaica";c[CB.V5k.JMY]="Svalbard and Jan Mayen";c[CB.V5k.JPN]="Japan";c[CB.V5k.JCI]="Jersey";c[CB.V5k.JOR]="Jordan";c[CB.V5k.KAZ]="Kazakhstan";c[CB.V5k.KEN]="Kenya";
c[CB.V5k.KBA]="Kiribati";c[CB.V5k.KOR]="South Korea";c[CB.V5k.KYR]="Kyrgyzstan";c[CB.V5k.KUW]="Kuwait";c[CB.V5k.LAO]="Laos";c[CB.V5k.LAT]="Latvia";c[CB.V5k.LBN]="Lebanon";c[CB.V5k.LES]="Lesotho";c[CB.V5k.LBR]="Liberia";c[CB.V5k.LBY]="Libya";c[CB.V5k.LIE]="Liechtenstein";c[CB.V5k.LTU]="Lithuania";c[CB.V5k.LUX]="Luxembourg";c[CB.V5k.MAC]="Macao";c[CB.V5k.MAD]="Madagascar";c[CB.V5k.MAS]="Malaysia";c[CB.V5k.MLI]="Mali";c[CB.V5k.MLT]="Malta";c[CB.V5k.MWI]="Malawi";c[CB.V5k.MFR]="Martinique";c[CB.V5k.MAU]=
"Mauritania";c[CB.V5k.MRI]="Mauritius";c[CB.V5k.MYF]="Mayotte";c[CB.V5k.MEX]="Mexico";c[CB.V5k.MIC]="Micronesia";c[CB.V5k.MDA]="Moldova";c[CB.V5k.MNC]="Monaco";c[CB.V5k.MON]="Mongolia";c[CB.V5k.MSG]="Montserrat";c[CB.V5k.MAR]="Morocco";c[CB.V5k.MOZ]="Mozambique";c[CB.V5k.MYA]="Myanmar(Burma)";c[CB.V5k.NAM]="Namibia";c[CB.V5k.NEP]="Nepal";c[CB.V5k.NED]="Netherlands";c[CB.V5k.AHO]="Netherlands Antilles";c[CB.V5k.NCF]="New caledonia";c[CB.V5k.NET]="United Nations";c[CB.V5k.NZL]="New zealand";c[CB.V5k.NCA]=
"Nicaragua";c[CB.V5k.NGR]="Nigeria";c[CB.V5k.NNN]="Niue";c[CB.V5k.NNA]="Norfolk";c[CB.V5k.NMI]="Northern Mariana";c[CB.V5k.NOR]="Norway";c[CB.V5k.OTM]="Timor-Leste";c[CB.V5k.PAK]="Pakistan";c[CB.V5k.PAL]="Palau";c[CB.V5k.PLE]="Palestine";c[CB.V5k.PAN]="Panama";c[CB.V5k.PNG]="Papua new GUINEA";c[CB.V5k.PAR]="Paraguay";c[CB.V5k.PER]="Peru";c[CB.V5k.PHI]="Philippines";c[CB.V5k.PIG]="Pitcairn";c[CB.V5k.POL]="Poland";c[CB.V5k.POR]="Portugal";c[CB.V5k.PUR]="Puerto rico";c[CB.V5k.QAT]="Qatar";c[CB.V5k.RUF]=
"Reunion";c[CB.V5k.ROU]="Romania";c[CB.V5k.URS]="Russian Federation";c[CB.V5k.RUS]="Russian Federation";c[CB.V5k.ZAR]="Russian Federation";c[CB.V5k.ESA]="El Salvador";c[CB.V5k.SMR]="San Marino";c[CB.V5k.SAO]="Sao Tome and PRINCIPE";c[CB.V5k.SCO]="Scotland";c[CB.V5k.SEN]="Senegal";c[CB.V5k.YUG]="Serbia(Yugoslavia)";c[CB.V5k.SRB]="Serbia(Yugoslavia)";c[CB.V5k.SEY]="Seychelles";c[CB.V5k.SIN]="Singapore";c[CB.V5k.SVK]="Slovakia";c[CB.V5k.SLO]="Slovenia";c[CB.V5k.SOM]="Somalia";c[CB.V5k.RSA]="South africa";
c[CB.V5k.SRI]="Sri lanka";c[CB.V5k.SUD]="Sudan";c[CB.V5k.SUR]="Suriname";c[CB.V5k.SVN]="Svalbard and Jan Mayen";c[CB.V5k.SWE]="Sweden";c[CB.V5k.SUI]="Switzerland";c[CB.V5k.SYR]="Syria";c[CB.V5k.HGB]="Saint Helena";c[CB.V5k.PGB]="Saint Pierre and Miquelon";c[CB.V5k.TJK]="Tajikistan";c[CB.V5k.TAN]="Tanzania";c[CB.V5k.THA]="Thailand";c[CB.V5k.TKI]="Tokelau";c[CB.V5k.TRI]="Trinidad and Tobago";c[CB.V5k.TUN]="Tunisia";c[CB.V5k.TCI]="Turks and Caicos Islands";c[CB.V5k.TUR]="Turkey";c[CB.V5k.TKM]="Turkmenistan";
c[CB.V5k.UGA]="Uganda";c[CB.V5k.UKR]="Ukraine";c[CB.V5k.UAE]="United Arab Emirates";c[CB.V5k.USA]="United States of America";c[CB.V5k.URU]="Uruguay";c[CB.V5k.UZB]="Uzbekistan";c[CB.V5k.VEN]="Venezuela";c[CB.V5k.VIE]="Viet Nam";c[CB.V5k.WLS]="Wales";c[CB.V5k.WFR]="Wallis and Futuna";c[CB.V5k.YEM]="Yemen";c[CB.V5k.ZAM]="Zambia";c[CB.V5k.ZIM]="Zimbabwe";c[CB.V5k.ZRE]="Congo-Kinshasa(Zaire)";c[CB.V5k.NKO]="North korea";c[CB.V5k.MDV]="Maldives";c[CB.V5k.MSH]="Marshall Islands";c[CB.V5k.OMN]="Oman";c[CB.V5k.NAU]=
"Nauru";c[CB.V5k.NIG]="Niger";c[CB.V5k.SAU]="Saudi Arabia";c[CB.V5k.TOG]="Togo";c[CB.V5k.TON]="Tonga";c[CB.V5k.VAN]="Vanuatu";c[CB.V5k.VAT]="Vatican City";c[CB.V5k.TUV]="Tuvalu";c[CB.V5k.SWA]="Swaziland";c[CB.V5k.SIE]="Sierra Leone";c[CB.V5k.SLU]="Saint Lucia";c[CB.V5k.PAP]="Papua New Guinea";c[CB.V5k.SVI]="St Vincent and The Grenadines";c[CB.V5k.SAM]="Samoa";c[CB.V5k.SKI]="St Kitts and NEVIS";c[CB.V5k.SAL]="Solomon islands";c[CB.V5k.RWA]="Rwanda";c[CB.V5k.TPE]="Taiwan";c[CB.V5k.NIR]="Northern Ireland";
c[CB.V5k.GBR]="United Kingdom(Great Britain)";c[CB.V5k.KOS]="Kosovo";var b=[],d=function(d){this.n=d;void 0===this.n&&(this.n=CB.V5k.V5l);if(0==b.length){d=0;for(var g in CB.V5k)CB.V5k.hasOwnProperty(g)&&(b[d]=g,d+=1);for(g=0;g<b.length;g++){var f=c[g];void 0===f&&(f=c[0]);d=b[g];1<d.length&&(f=window.escape(f),f=" background-image: url( "+CB.V5p()+"media/flags/flags16/"+f+".png ) !important;",CB.V5q.V5r(".cls-"+d,f+"background-repeat:no-repeat; background-position:center center;"))}}};d.prototype.V5s=
function(){return b[this.n]};d.prototype.getStrFlag=function(){return c[this.n]?c[this.n]:c[CB.V5k.V5l]};return d}();"use strict";
CB.V5t={V5u:function(){this.V5v||(this.V5w()&&(this.V5v="iOS"+this.V5w()),this.V5x()&&(this.V5v="Andr"+this.V5x()),this.V5y()&&(this.V5v="Win"),this.V5z()&&(this.V5v="Ux"),this.V60()&&(this.V5v="Mac"),this.V5v=navigator.platform);return this.V5v},V61:function(){return this.V5u()+" "+String.f("{0}/{1}/{2}, cpus={3}",window.innerWidth,window.innerHeight,window.devicePixelRatio,this.V62())},V63:function(){return"cordova"==CB.V4a.V4l("client")},V64:function(){4;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|bada|Opera Mini/i.test(navigator.userAgent)},
V65:function(){return!CB.V5t.V64()&&1400<screen.width&&900<=screen.height},V66:function(){var c=document.documentElement;c.requestFullscreen?c.requestFullscreen():c.webkitrequestFullscreen?c.webkitrequestFullscreen():c.mozrequestFullscreen?c.mozrequestFullscreen():c.msrequestFullscreen&&c.msrequestFullscreen()},V67:function(){return document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen||(screen.availHeight||screen.height-30)<=window.innerHeight},V68:function(){7;return 1E3<=screen.width&&
760<=screen.height||1E3<=screen.height},V69:function(){return/iPhone/i.test(navigator.userAgent)||/iPod/i.test(navigator.userAgent)},V6a:function(){return/iPad/i.test(navigator.userAgent)},V5w:function(){return parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||!1},V5y:function(){return/Win32/i.test(navigator.platform)},V5z:function(){return/Linux/i.test(navigator.platform)},
V60:function(){return/Mac/i.test(navigator.platform)},isTouchDevice:function(){void 0===this.V6b&&(this.V6b=this.V64()||"ontouchstart"in window||0<navigator.MaxTouchPoints||0<navigator.msMaxTouchPoints);return this.V6b},V6c:function(){try{return window.self!==window.top&&-1==document.referrer.search(/google/i)&&-1==document.referrer.search(/bing/i)}catch(c){return!0}},V6d:function(){if(void 0!==window.screenLeft)return new CB.V6e(window.screenLeft,window.screenTop);if(void 0!==window.screenX)return new CB.V6e(window.screenX,
window.screenY)},V6f:function(){var c=window,b=document,d=b.documentElement,b=b.getElementsByTagName("body")[0];return new CB.Size(c.innerWidth||d.clientWidth||b.clientWidth,c.innerHeight||d.clientHeight||b.clientHeight)},V6g:function(){return 1400<=screen.width&&900<=screen.height},V6h:function(c){return screen.width*(c||1)<screen.height},V6i:function(){if(document.inputEncoding)switch(document.inputEncoding){default:return 1252;case "ISO-8859-11":return 874;case "Windows-31J":return 932;case "ISO-8859-2":return 1250;
case "ISO-8859-5":return 1251;case "ISO-8859-1":return 1252;case "ISO-8859-7":return 1253;case "ISO-8859-9":return 1254;case "ISO-8859-8":return 1255;case "ISO-8859-6":return 1256;case "ISO-8859-13":return 1257}else return 1252},getInternetExplorerVersion:function(){var c=-1;"Microsoft Internet Explorer"==navigator.appName&&null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(c=parseFloat(RegExp.$1));return c},V6j:function(){return this.V64()||this.isTouchDevice()},V6k:function(){return void 0!==
Function.prototype.bind&&"undefined"!==typeof console&&"WebSocket"in window?11<=this.V6l()?!0:this.V6m()&&4.2>=this.V5x()||this.V6n()&&535>this.V6o()&&!this.V6p()?!1:!0:!1},V6q:function(){return document.location&&document.location.protocol?"https:"==document.location.protocol:window.location&&window.location.protocol?"https:"==window.location.protocol:!1},V6l:function(){var c=window.navigator.userAgent,b=c.indexOf("MSIE ");if(0<b)return parseInt(c.substring(b+5,c.indexOf(".",b)),10);if(0<c.indexOf("Trident/"))return b=
c.indexOf("rv:"),parseInt(c.substring(b+3,c.indexOf(".",b)),10);b=c.indexOf("Edge/");if(0<b)return parseInt(c.substring(b+5,c.indexOf(".",b)),10)},V6r:function(){var c=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./);return c?parseInt(c[1]):0},V6s:function(){var c=this.V6l();return c?12>c:!1},V6t:function(){return"object"===typeof WebAssembly},V6u:function(){var c=null;try{c=!!new ActiveXObject("htmlfile")}catch(b){c=!1}return c},V6v:function(){return null!=window.webkitURL},V6p:function(){return-1!=
navigator.userAgent.indexOf("Chrome")},V6w:function(){return-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&-1==navigator.userAgent.indexOf("CriOS")},V6x:function(){return-1!=navigator.userAgent.indexOf("Firefox")},V6y:function(){5;var c=this.V6l(),b=this.V6r(),d=parseFloat(this.V6o());return c=(c=this.V6p()||11<=c||54<=b||600<d)&&CB.V5t.V62()>=(CB.V5t.V6t()?4:6)},V6m:function(){return 0<=navigator.userAgent.indexOf("Android")&&-1==navigator.userAgent.indexOf("Chrome")},
V6z:function(){return 0<this.V5x()},V6n:function(){return 0<=navigator.userAgent.indexOf("Windows")&&0<=navigator.userAgent.indexOf("Safari")},V6o:function(){var c=navigator.userAgent;return 0<=c.indexOf("Safari")?parseFloat(c.slice(c.indexOf("Safari")+7)):0},V5x:function(){var c=navigator.userAgent;return 0<=c.indexOf("Android")?parseFloat(c.slice(c.indexOf("Android")+8)):0},V70:function(c){if(window.WebGLRenderingContext)for(var b=document.createElement("canvas"),d=["webgl","experimental-webgl",
"moz-webgl","webkit-3d"],e=!1,g=0;4>g;g++)try{if((e=b.getContext(d[g]))&&"function"==typeof e.getParameter)return c?{name:d[g],V71:e}:!0}catch(f){}return!1},runsOnChessBaseDomain:function(){return-1!=document.URL.search(/chessbase.com/i)&&-1==document.URL.search(/cloudserver/i)||-1!=document.URL.search(/playchess.com/i)},runsOnChessBaseCom:function(){return-1!=document.URL.search(/chessbase.com/i)},V72:function(){return-1!=document.URL.search(/live.chessbase.com/i)||-1!=document.URL.search(/acc.chessbase.com/i)},
V73:function(){return-1!=document.URL.search(/videos.chessbase.com/i)||-1!=document.URL.search(/videostest.chessbase.com/i)},V74:function(){alert(0);return window.devicePixelRatio},V75:function(c){this.V76=c},pixToZoom:function(c){return this.V76?c/this.V76:window.devicePixelRatio?c/window.devicePixelRatio:c},zoomToPix:function(c){return this.V76?c*this.V76:window.devicePixelRatio?c*window.devicePixelRatio:c},V62:function(){return window.navigator.hardwareConcurrency},browser:{V77:function(){return{browser:this.search(this.data.browser),
version:this.search(navigator.userAgent)||this.search(navigator.appVersion),V78:this.search(this.data.V78)}},search:function(c){if("object"===typeof c)for(var b=0;b<c.length;b++){var d=c[b].string,e=c[b].prop;this.V79=c[b].versionSearch||c[b].identity;if(d){if(-1!=d.indexOf(c[b].subString))return c[b].identity}else if(e)return c[b].identity}else if(b=c.indexOf(this.V79),-1!=b)return parseFloat(c.substr(b+this.V79.length+1))},data:{browser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},
{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:Window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,
subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],V78:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},
{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]}}};"use strict";
CB.V7a={ENG:0,DEU:1,GER:1,FRA:2,ESP:3,ITA:4,NED:5,POR:6,DEF:7,SLO:8,SWE:9,BAS:10,SVK:11,POL:12,CZE:13,CAT:14,TRK:15,MGY:16,RUS:17,GRK:18,ROM:19,CHN:20,UN:21,NOR:22,HEB:23,UKR:24,VIE:25,ARA:26,SER:27,LIT:28,BRA:29,FAR:30,CRO:31,GAL:32,HIN:33,V7b:function(){return void 0!==navigator.languages&&navigator.languages.length?navigator.languages[0]:void 0!==navigator.language?navigator.language:void 0!==navigator.userLanguage?navigator.userLanguage:"en-en"},V7c:function(){return this.V7b().slice(0,2)},V7d:function(){var c=
CB.V7a.V7b();return this.V7e(c)},V7e:function(c){return-1<c.indexOf("de")?this.DEU:-1<c.indexOf("es")?this.ESP:-1<c.indexOf("nl")?this.NED:-1<c.indexOf("fr")?this.FRA:-1<c.indexOf("it")?this.ITA:-1<c.indexOf("sl")?this.SLO:-1<c.indexOf("sv")?this.SWE:-1<c.indexOf("ro")?this.ROM:-1<c.indexOf("zh")?this.CHN:-1<c.indexOf("ru")?this.RUS:-1<c.indexOf("no")?this.NOR:-1<c.indexOf("pl")?this.POL:-1<c.indexOf("he")?this.HEB:-1<c.indexOf("ca")?this.CAT:-1<c.indexOf("tr")?this.TRK:-1<c.indexOf("sl")?this.SLO:
-1<c.indexOf("el")?this.GRK:-1<c.indexOf("uk")?this.UKR:-1<c.indexOf("vi")?this.VIE:-1<c.indexOf("ar")?this.ARA:-1<c.indexOf("sr")?this.SER:-1<c.indexOf("lt")?this.LIT:-1<c.indexOf("pt-br")||-1<c.indexOf("pt")?this.BRA:-1<c.indexOf("fa")?this.FAR:-1<c.indexOf("ga")?this.GAL:-1<c.indexOf("hr")?this.CRO:-1<c.indexOf("hi")?this.HIN:-1<c.indexOf("cs")?this.CZE:this.ENG},V7f:function(c){switch(c){default:case CB.V7a.ENG:return"en";case CB.V7a.DEU:return"de";case CB.V7a.ESP:return"es";case CB.V7a.NED:return"nl";
case CB.V7a.FRA:return"fr";case CB.V7a.ITA:return"it";case CB.V7a.POR:return"pt";case CB.V7a.SLO:return"sl";case CB.V7a.SWE:return"sv";case CB.V7a.ROM:return"ro";case CB.V7a.CHN:return"zh";case CB.V7a.RUS:return"ru";case CB.V7a.NOR:return"no";case CB.V7a.POL:return"pl";case CB.V7a.HEB:return"he";case CB.V7a.CAT:return"ca";case CB.V7a.TRK:return"tr";case CB.V7a.SLO:return"sl";case CB.V7a.GRK:return"el";case CB.V7a.UKR:return"uk";case CB.V7a.VIE:return"vi";case CB.V7a.ARA:return"ar";case CB.V7a.SER:return"sr";
case CB.V7a.LIT:return"lt";case CB.V7a.BRA:return"pt";case CB.V7a.FAR:return"fa";case CB.V7a.CRO:return"hr";case CB.V7a.GAL:return"ga";case CB.V7a.HIN:return"hi";case CB.V7a.CZE:return"cs"}},V7g:function(c){switch(c){default:case CB.V7a.ENG:return"en";case CB.V7a.DEU:return"de";case CB.V7a.ESP:return"es";case CB.V7a.FRA:return"fr";case CB.V7a.NED:return"nl";case CB.V7a.ITA:return"it"}},getRibbonFlagName:function(c){switch(c){default:case CB.V7a.ENG:return"en-us"==this.V7b()?"us":"gb";case CB.V7a.DEU:return"de-at"==
this.V7b()?"at":"de";case CB.V7a.ESP:return"es";case CB.V7a.NED:return"nl";case CB.V7a.ROM:return"ro";case CB.V7a.CHN:switch(this.V7b()){default:case "zh-cn":return"cn";case "zh-tw":return"tw";case "zh-sg":return"si";case "zh-hk":return"hk"}case CB.V7a.FRA:return"fr";case CB.V7a.RUS:return"ru";case CB.V7a.NOR:return"no";case CB.V7a.ITA:return"it";case CB.V7a.POL:return"pl";case CB.V7a.UN:return"_United_Nations";case CB.V7a.HEB:return"il";case CB.V7a.CAT:return"_Catalonia";case CB.V7a.TRK:return"tr";
case CB.V7a.SLO:return"si";case CB.V7a.GRK:return"gr";case CB.V7a.UKR:return"ua";case CB.V7a.VIE:return"vn";case CB.V7a.ARA:return"sa";case CB.V7a.SER:return"rs";case CB.V7a.LIT:return"lt";case CB.V7a.BRA:return"br";case CB.V7a.FAR:return"ir";case CB.V7a.CRO:return"hr";case CB.V7a.GAL:return"ie";case CB.V7a.HIN:return"in";case CB.V7a.CZE:return"cz"}}};
CB.V7a.V7h=function(c){switch(c){default:case CB.V7a.ENG:return"ENG";case CB.V7a.DEU:case CB.V7a.GER:return"GER";case CB.V7a.ESP:return"ESP";case CB.V7a.NED:return"NED";case CB.V7a.ROM:return"ROM";case CB.V7a.CHN:return"CHN";case CB.V7a.FRA:return"FRA";case CB.V7a.RUS:return"RUS";case CB.V7a.NOR:return"NOR";case CB.V7a.POL:return"POL";case CB.V7a.ITA:return"ITA";case CB.V7a.HEB:return"HEB";case CB.V7a.CAT:return"CAT";case CB.V7a.TRK:return"TRK";case CB.V7a.SLO:return"SLO";case CB.V7a.UN:return"UN";
case CB.V7a.GRK:return"EL";case CB.V7a.UKR:return"UKR";case CB.V7a.VIE:return"VIE";case CB.V7a.ARA:return"ARA";case CB.V7a.SER:return"SER";case CB.V7a.LIT:return"LIT";case CB.V7a.BRA:return"BRA";case CB.V7a.FAR:return"FAR";case CB.V7a.CRO:return"CRO";case CB.V7a.GAL:return"GAL";case CB.V7a.HIN:return"HIN";case CB.V7a.CZE:return"CZE"}};
CB.V7a.getNativeLangName=function(c){switch(c){default:case CB.V7a.ENG:return"English";case CB.V7a.DEU:return"Deutsch";case CB.V7a.ESP:return"Espa\u00f1ol";case CB.V7a.NED:return"Nederlands";case CB.V7a.ROM:return"Rom\u00e2n";case CB.V7a.CHN:return"\u4e2d\u6587";case CB.V7a.FRA:return"Fran\u00e7ais";case CB.V7a.RUS:return"\u0420\u0443\u0441\u0441\u043a\u0438\u0439";case CB.V7a.NOR:return"Norsk";case CB.V7a.POL:return"Polski";case CB.V7a.ITA:return"Italiano";case CB.V7a.HEB:return"\u05e2\u05d1\u05e8\u05d9\u05ea";
case CB.V7a.CAT:return"Catal\u00e0";case CB.V7a.TRK:return"T\u00fcrk\u00e7e";case CB.V7a.SLO:return"Slovenski";case CB.V7a.GRK:return"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac";case CB.V7a.UKR:return"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430";case CB.V7a.VIE:return"Ti\u1ebfng Vi\u1ec7t";case CB.V7a.ARA:return"\u0627\u0644\u0639\u0631\u0628\u064a\u0629";case CB.V7a.SER:return"Srbski";case CB.V7a.LIT:return"Lietuvi\u0173";case CB.V7a.BRA:return"Portugu\u00eas";case CB.V7a.FAR:return"\u0641\u0627\u0631\u0633\u06cc";
case CB.V7a.CRO:return"Hrvatski";case CB.V7a.GAL:return"Gaeilge";case CB.V7a.HIN:return"\u0939\u093f\u0928\u094d\u0926\u0940";case CB.V7a.CZE:return"\u010ce\u0161tina"}};CB.V7a.V7i=function(c){var b=[];c.forEach(function(d){b.push(this.getNativeLangName(d))}.bind(this));return b};CB.V7a.V7j=function(c){var b=[];c.forEach(function(d){b.push(this.getRibbonFlagName(d))}.bind(this));return b};"use strict";
CB.V7k=function(){var c=function(b,e){this.fLat=b;this.fLong=e;this.nNation=this.V7l=0},b=function(b){return Math.PI/180*b};c.prototype={isValid:function(){return 0!=this.fLat||0!=this.fLong},toString:function(){return""},fromDataBuf:function(b){this.fLat=b.readFloat32();this.fLong=b.readFloat32();this.nNation=b.V3c1()},V3c0:function(b){b.writeFloat32(this.fLat);b.writeFloat32(this.fLong);b.V3by(this.nNation)},getSphericDist:function(d){return this.fLat==d.fLat&&this.fLong==d.fLong?0:6378*Math.acos(Math.sin(b(this.fLat))*
Math.sin(b(d.fLat))+Math.cos(b(this.fLat))*Math.cos(b(d.fLat))*Math.cos(b(d.fLong-this.fLong)))},getAzimuthDirection:function(d){return-Math.atan2(Math.sin(b(this.fLong-d.fLong))*Math.cos(b(this.fLat)),Math.cos(b(this.fLat))*Math.sin(b(d.fLat))-Math.sin(b(this.fLat))*Math.cos(b(d.fLat))*Math.cos(b(this.fLong-d.fLong)))},getNewPoint:function(d,e){var c=d/6378,f=Math.acos(Math.cos(c)*Math.cos(b(90-this.fLat))+Math.sin(b(90-this.fLat))*Math.sin(c)*Math.cos(b(e))),c=Math.asin(Math.sin(c)*Math.sin(b(e))/
Math.sin(f));return new CB.V7k(90-f/(Math.PI/180),c/(Math.PI/180)+this.V7m)},fromBrowser:function(){navigator.geolocation.getCurrentPosition(function(b){this.fLat=b.coords.latitude;this.fLong=b.coords.longitude;this.V7l=b.coords.altitude},function(b){},{enableHighAccuracy:!1,timeout:2E4,maximumAge:"Infinite"})}};return c}();"NOMINIFY=w,h,topLeft";"use strict";
CB.V6e=function(){var c=function(b,d){"object"==typeof b&&"undefined"==typeof d?void 0!=b.clientX?this.set(b.clientX,b.clientY):b.touches&&b.touches.length?this.set(b.touches[0].pageX,b.touches[0].pageY):void 0!=b.pageX&&this.set(b.pageX,b.pageY):this.set(b,d)};c.prototype.set=function(b,d){this.x=b;this.y=d};c.prototype.add=function(b){return new CB.V6e(this.x+b.x,this.y+b.y)};c.prototype.subtract=function(b){return new CB.V6e(this.x-b.x,this.y-b.y)};c.prototype.V7n=function(b){b=this.subtract(b);
return Math.sqrt(b.x*b.x+b.y*b.y)};c.prototype.V7o=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};c.prototype.toInt=function(){this.x=Math.floor(this.x+.5);this.y=Math.floor(this.y+.5)};c.prototype.cloneIntPoint=function(){var b=new c(this.x,this.y);b.toInt();return b};c.prototype.toString=function(){return"("+this.x+","+this.y+")"};c.prototype.getX=function(){return this.x};c.prototype.getY=function(){return this.y};return c}();
CB.Size=function(){var c=function(b,d){this.w=b;this.h=d};c.prototype.toString=function(){return"w="+this.w+", h="+this.h};c.prototype.V7p=function(b){return new CB.V6e((b.w-this.w)/2,(b.h-this.h)/2)};return c}();
CB.V7q=function(){var c=function(b,d,e,c){this.left=b||0;this.top=d||0;this.right=e||0;this.bottom=c||0};Object.defineProperty(c.prototype,"w",{get:function(){return this.getSize().w},set:function(b){this.right=this.left+b-1},enumerable:!0});Object.defineProperty(c.prototype,"h",{get:function(){return this.getSize().h},set:function(b){this.bottom=this.top+b-1},enumerable:!0});Object.defineProperty(c.prototype,"topLeft",{get:function(){return new CB.V6e(this.left,this.top)},set:function(b){var d=this.w,
e=this.h;this.left=b.x;this.top=b.y;this.w=d;this.h=e},enumerable:!0});c.prototype.V7r=function(b){this.left=b.left;this.top=b.top;this.right=b.right;this.bottom=b.bottom};c.prototype.V7s=function(b,d){this.left=b.x;this.top=b.y;this.right=b.x+d.w-1;this.bottom=b.y+d.h-1};c.prototype.V7t=function(b){this.left=b.left;this.top=b.top;this.right=b.right;this.bottom=b.bottom};c.prototype.V7u=function(b,d,e,c){this.left=Math.min(b,e);this.right=Math.max(b,e);this.top=Math.min(d,c);this.bottom=Math.max(d,
c)};c.prototype.toString=function(){return"l="+this.left+", t="+this.top+" "+this.getSize().toString()};c.prototype.getPos=function(){return new CB.V6e(this.left,this.top)};c.prototype.V7v=function(){return new CB.V6e(this.left,this.top)};c.prototype.V7w=function(){return new CB.V6e(this.right,this.top)};c.prototype.V7x=function(){return new CB.V6e(this.right,this.bottom)};c.prototype.V7y=function(){return new CB.V6e(this.left,this.bottom)};c.prototype.getSize=function(){return new CB.Size(this.right-
this.left+1,this.bottom-this.top+1)};c.prototype.getUnion=function(b){return new CB.V7q(Math.min(Math.min(this.left,b.left),Math.min(this.right,b.right)),Math.min(Math.min(this.top,b.top),Math.min(this.bottom,b.bottom)),Math.max(Math.max(this.left,b.left),Math.max(this.right,b.right)),Math.max(Math.max(this.top,b.top),Math.max(this.bottom,b.bottom)))};c.prototype.V7z=function(b){var d=new CB.V7q(this.left,this.top,this.right,this.bottom);if(d.left<b.left||d.left>=b.right)d.left=b.left;if(d.right>
b.right||d.right<=b.left)d.right=b.right;if(d.top<b.top||d.top>=b.bottom)d.top=b.top;if(d.bottom>b.bottom||d.bottom<=b.top)d.bottom=b.bottom;return d};c.prototype.V80=function(b,d){return b>=this.left&&b<=this.right&&d>=this.top&&d<=this.bottom};c.prototype.getPath=function(){var b=new CB.V81;b.push(this.V7v());b.push(this.V7w());b.push(this.V7x());b.push(this.V7y());return b};c.prototype.move=function(b,d){this.left+=b;this.top+=d;this.right+=b;this.bottom+=d};c.prototype.V82=function(b,d){this.left+=
b;this.right-=b;this.top+=d;this.bottom-=d};c.prototype.expand=function(b,d){this.V82(-b,-d)};return c}();
CB.V83=function(){var c=function(b,d,e){this.set(b,d,e)};c.prototype.set=function(b,d,e){this.x=b;this.y=d;this.z=e};c.prototype.add=function(b){return new CB.Vec(this.x+b.x,this.y+b.y,this.z+b.z)};c.prototype.subtract=function(b){return new CB.V6e(this.x-b.x,this.y-b.y,this.z-b.z)};c.prototype.getLength=function(){return void 0!==this.z?Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z):Math.sqrt(this.x*this.x+this.y*this.y)};c.prototype.V84=function(){this.x=-this.x;this.y=-this.y;void 0!==this.z&&
(this.z=-this.z)};c.prototype.toString=function(){return void 0!==this.z?"("+this.x+","+this.y+","+this.z+")":"("+this.x+","+this.y+")"};return c}();
CB.V81=function(){var c=function(){this.subPaths=[]};c.prototype.toString=function(){for(var b="Pth:",d=0;d<this.subPaths.length;d++)b+="s=",this.subPaths[d].forEach(function(d,c,f){b+=d.toString();f<c.length-1&&(b+=",")});return b};c.prototype.push=function(b){0===this.subPaths.length&&this.subPaths.push([]);this.subPaths[this.subPaths.length-1].push(b)};c.prototype.exec=function(b){b.beginPath();for(var d=0;d<this.subPaths.length;d++)1<this.subPaths[d].length&&this.V85(b,this.subPaths[d]);b.closePath()};
c.prototype.V85=function(b,d){b.moveTo(d[0].x,d[0].y);for(var e=1;e<d.length;e++)b.lineTo(d[e].x,d[e].y)};c.prototype.V86=function(b){for(var d=0;d<this.subPaths.length;d++)3<this.subPaths[d].length&&(b.beginPath(),this.V87(b,this.subPaths[d]),b.closePath())};c.prototype.V87=function(b,d){b.moveTo(d[0].x,d[0].y);var e;for(e=1;e<d.length-2;e++)b.quadraticCurveTo(d[e].x,d[e].y,(d[e].x+d[e+1].x)/2,(d[e].y+d[e+1].y)/2);b.quadraticCurveTo(d[e].x,d[e].y,d[e+1].x,d[e+1].y)};c.prototype.reverse=function(){this.subPaths.length&&
this.subPaths[this.subPaths.length-1].reverse()};c.prototype.append=function(b){this.subPaths=this.subPaths.concat(b.subPaths)};return c}();
CB.V88={clipRect:function(c,b){b.getPath().exec(c);c.clip()},V89:function(c,b,d){b=b.getPath();d=d.getPath();d.reverse();b.append(d);this.V8a(c,b)},V8b:function(c,b){b.getPath().exec(c);c.stroke()},fillRect:function(c,b){b.getPath().exec(c);c.fill()},V8a:function(c,b){b.exec(c);c.clip()},V8c:function(c,b,d,e,g){c.beginPath();c.moveTo(b,d);c.lineTo(e,g);c.stroke()},V8d:function(c,b,d,e,g,f){e<2*f&&(f=e/2);g<2*f&&(f=g/2);c.beginPath();c.moveTo(b+f,d);c.arcTo(b+e,d,b+e,d+g,f);c.arcTo(b+e,d+g,b,d+g,f);
c.arcTo(b,d+g,b,d,f);c.arcTo(b,d,b+e,d,f);c.stroke()},V8e:function(c,b,d,e){(c=CB.V88.V8f(c,d,e))&&window.saveAs(c,b)},V8f:function(c,b,d){var e=document.createElement("canvas");e.width=b;e.height=d;c.data&&c.data.length?e.getContext("2d").putImageData(c,0,0):e.getContext("2d").drawImage(c,0,0);return CB.V88.V8g(e.toDataURL())},V8g:function(c){var b=atob(c.split(",")[1]);c=c.split(",")[0].split(":")[1].split(";")[0];for(var d=new ArrayBuffer(b.length),e=new Uint8Array(d),g=0;g<b.length;g++)e[g]=b.charCodeAt(g);
if(window.Blob)return new Blob([d],{type:c})}};CB.Color=function(){var c=function(b,d,e,c){this.V8h=b;this.V8i=d;this.V8j=e;this.alpha=void 0!==c?c:1};c.prototype.toString=function(){return"rgba( "+Math.round(this.V8h)+", "+Math.round(this.V8i)+", "+Math.round(this.V8j)+", "+this.alpha+" )"};return c}();
CB.HSLColor=function(){var c=function(b,d,e,c){this.hue=b;this.V8k=d;this.V8l=e;this.alpha=c||1};c.prototype.toString=function(){return 1>this.alpha?"hsla( "+Math.round(this.hue)+", "+Math.round(this.V8k)+"%, "+Math.round(this.V8l)+"%, "+this.alpha+" )":"hsl( "+Math.round(this.hue)+", "+Math.round(this.V8k)+"%, "+Math.round(this.V8l)+"% )"};c.RED=0;c.YELLOW=60;c.GREEN=120;c.CYAN=180;c.BLUE=240;c.MAGENTA=300;return c}();"use strict";
CB.V8m=function(){var c=function(){this.loaded=!1;this.height=this.width=0;this.url="";this.V8n=function(){}};c.prototype.isValid=function(){return 0<this.width&&0<this.height};c.prototype.V8o=function(b){b?(this.image=new Image,V3c6&&V3c6.config.V8p&&(0>b.search("data:image/png;base64")||!CB.V5t.V6w())&&(this.image.crossOrigin="Anonymous"),this.image.addEventListener("load",c.prototype.V8q.bind(this)),this.image.addEventListener("error",c.prototype.V8r.bind(this)),this.url=b,this.image.src=b):CB.V46("bmp._fromUrl",
"no url")};c.V8s=function(b,d){var e=new CB.V8m;b.getItem(d,function(b,c){var h=!1;if(c&&!b){var l=(window.URL||window.webkitURL).createObjectURL(c);l?(e.V8o(l),e.urlToRevoke=l,h=!0):CB.V46("Bitmap::fromDB","imgURL null")}h||e.V8o(d)});return e};c.prototype.V8t=function(b){if("undefined"!=typeof this.image&&this.loaded)return b.createPattern(this.image,"repeat")};c.prototype.V8u=function(b,d,e,c,f){try{this.imageData=b.getImageData(d,e,c,f),this.loaded=!0,this.width=c,this.height=f}catch(h){console.log(h)}};
c.prototype.V8v=function(b,d,e,c,f,h,l){try{void 0===this.canvas&&(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d")),this.canvas.width=c,this.canvas.height=f,0<d+c&&0<e+f&&this.context&&b&&(this.context.drawImage(b.canvas,d,e,h,l,0,0,c,f),this.imageData=this.context.getImageData(0,0,c,f)),this.loaded=!0,this.width=c,this.height=f}catch(q){console.log(q)}};c.prototype.draw=function(b,d,e,c,f,h,l,q,r){if(isNaN(d)||isNaN(e)){var t=this.url.substring(0,30);CB.V46("Draw",
"NaN + "+t+Error().stack)}else if(t=Function.prototype.call.bind(Array.prototype.slice),this.loaded)try{if(void 0!==this.imageData){var w=t(arguments);w.splice(0,1,this.imageData);b.putImageData.apply(b,w)}else void 0!==this.image&&(w=t(arguments),w.splice(0,1,this.image),b.drawImage.apply(b,w))}catch(z){CB.V46("BMP draw",z)}};c.prototype.V8w=function(b,d,e,c,f){this.loaded&&(void 0!==this.imageData?b.putImageData(this.imageData,d,e,c,f):void 0!==this.image&&b.drawImage(this.image,d,e,c,f))};c.prototype.V8x=
function(b,d,e,c,f){this.loaded&&(void 0!==this.imageData?this.V8y(b,this.imageData,b.putImageData,d,e,c,f):void 0!==this.image&&this.V8y(b,this.image,b.drawImage,d,e,c,f))};c.prototype.V8y=function(b,d,e,c,f,h,l){if(isNaN(c)||isNaN(f))CB.V46("Tile","NaN + "+u+Error().stack);else{new CB.V7q(c,f,c+h,f+l);for(var q=f,r=c;q<f+l;){for(;r<c+h;){var t=this.width,w=this.height;r+t>c+h&&(t=c+h-r);q+w>f+l&&(w=f+l-q);try{e.call(b,d,0,0,t,w,r,q,t,w)}catch(z){CB.V46("BMP tile: ",z)}r+=this.width}r=c;q+=this.height}}};
c.prototype.isValid=function(){return this.loaded};c.prototype.V8q=function(){this.loaded=!0;this.width=this.image.width;this.height=this.image.height;this.V8n();this.urlToRevoke&&(window.URL||window.webkitURL).revokeObjectURL(this.urlToRevoke)};c.prototype.V8r=function(){5};return c}();"use strict";CB.namespace("CB.V8z");
CB.V8z=function(){var c=function(){this.V90=new CB.V8m;this.V91=new CB.V8m;this.V95=this.V94=this.V93=this.V92=-1;this.pos=new CB.V6e(0,0);this.V96=new CB.V6e(0,0);this.isVisible=this.loaded=!1;this.h=this.w=0};c.prototype.toString=function(){return this.pos.toString()};c.prototype.V8o=function(b){this.V90.V8n=this.V8q.bind(this);this.V90.V8o(b)};c.prototype.V8u=function(b,d,e,c,f){this.V90.V8u(b,d,e,c,f);this.V8q()};c.prototype.V8q=function(){this.w=this.V90.width;this.h=this.V90.height;this.V94=
Math.floor(this.w/2);this.V95=Math.floor(this.h/2);this.loaded=!0};c.prototype.moveTo=function(b,d){if(this.V90.loaded){this.V96=this.pos;var e=d.cloneIntPoint();this.pos=e;this.V91.isValid()&&this.V91.draw(b,this.V93-this.V94,this.V92-this.V95);this.V97&&(this.V91=new CB.V8m,this.V97=!1);this.V91.V8u(b,e.x-this.V94,e.y-this.V95,this.w,this.h);this.V93=e.x;this.V92=e.y;this.V98(b,e.x-this.V94,e.y-this.V95);this.isVisible=!0}};c.prototype.setBackground=function(b){b&&(this.V97=!0,this.V91=b,this.V93=
this.pos.x,this.V92=this.pos.y)};c.prototype.hasBackground=function(){return this.V91.loaded||this.V97};c.prototype.hide=function(b){this.V91.isValid()&&this.isVisible&&(this.V91.draw(b,this.V93-this.V94,this.V92-this.V95),this.isVisible=!1)};c.prototype.saveBeforeMove=function(b,d){var e=d.cloneIntPoint();this.V97&&(this.V91=new CB.V8m,this.V97=!1);this.V91.V8u(b,e.x-this.V94,e.y-this.V95,this.w,this.h);this.V93=e.x;this.V92=e.y};c.prototype.moveToNoSave=function(b,d){if(this.V90.loaded){this.V96=
this.pos;var e=d.cloneIntPoint();this.pos=e;this.V98(b,e.x-this.V94,e.y-this.V95);this.isVisible=!0}};c.prototype.show=function(b){this.V91.isValid()&&this.V94&&(this.V91.draw(b,this.V93-this.V94,this.V92-this.V95),this.V97&&(this.V91=new CB.V8m,this.V97=!1),this.V91.V8u(b,this.V93-this.V94,this.V92-this.V95,this.w,this.h),this.V98(b,this.V93-this.V94,this.V92-this.V95),this.isVisible=!0)};c.prototype.V99=function(b){this.V97&&(this.V91=new CB.V8m,this.V97=!1);this.V91.V8u(b,this.V93-this.V94,this.V92-
this.V95,this.w,this.h)};c.prototype.V98=function(b,d,e){b.save();if(37<this.V90.width){var c=Math.min(3,Math.round(Math.sqrt(this.V90.width/30)));b.shadowOffsetX=c;b.shadowOffsetY=c;b.shadowBlur=1*c;b.shadowColor="rgba( 40, 18, 10, 0.24 )"}this.V90.draw(b,d,e);b.restore()};c.prototype.deleteBackground=function(){this.V97=!1;this.V91=new CB.V8m;this.V92=this.V93=-1};c.prototype.V9a=function(b){this.V9b=b};c.prototype.getMoveClipRect=function(){return new CB.V7q(Math.min(this.pos.x,this.V96.x)-this.V94,
Math.min(this.pos.y,this.V96.y)-this.V95,Math.max(this.pos.x,this.V96.x)+this.V94,Math.max(this.pos.y,this.V96.y)+this.V95)};return c}();
CB.Animation=function(){var c=function(b){this.cbcanvas=b;this.V9c=30;this.V9d=this.lastTime=0;this.startTime=this.V9e();this.V9f=0;this.jobs=[];this.V9g=[]};c.prototype.V9h=function(){window.cancelAnimationFrame(this.V9i);this.V9g=[];this.V9j=!1;if(this.jobs.length){for(var b=0;b<this.jobs.length;b++)this.jobs[b].deleteBackground();this.jobs=[];return!0}return!1};c.prototype.V9k=function(b,d,e){this.lastTime=this.V9n=this.V9m=0;this.startTime=this.V9e();this.V9l=e;this.V9g.push(function(){this.V9o(b,
d)}.bind(this));this.V9i=window.requestAnimationFrame(function(b){this.V9p(b)}.bind(this));this.V9j=!0};c.prototype.V9p=function(b){this.V9q&&this.V9q();var d=10,e=1;void 0===b&&(b=new Date);this.tick(b);for(b=0;b<this.V9g.length;b++)this.V9g[b]();this.V9g=[];this.V9n+=1;this.V9m+=this.V9f;2<this.V9n&&(d=Math.floor(this.V9m/this.V9n),40>d&&(e=1<d?Math.floor(40/d+.5):40));var c=this.cbcanvas.V9r,f=!0;for(b=0;b<this.jobs.length;b++)this.jobs[b].shouldHideInThisStep()&&this.jobs[b].hide(c);for(b=0;b<
this.jobs.length;b++)this.jobs[b].isImmobileInThisStep()&&!this.jobs[b].getsInvisibleAtEnd()&&this.jobs[b].moveToNoSave(c,this.jobs[b].currPos);for(b=0;b<this.jobs.length;b++)this.jobs[b].isStillMoving()&&(this.jobs[b].hasReachedEndPos()?this.jobs[b].currPos=this.jobs[b].ptTo:this.jobs[b].displace(e),this.jobs[b].saveBeforeMove(c,this.jobs[b].currPos));for(b=0;b<this.jobs.length;b++)this.jobs[b].isStillMoving()&&(this.jobs[b].moveToNoSave(c,this.jobs[b].currPos),this.cbcanvas.V9s(this.jobs[b].getMoveClipRect())),
this.jobs[b].prepNextStep(e)||(f=!1);this.V9l&&this.cbcanvas.V9t(this.V9l);this.V9u&&this.V9u();this.cbcanvas.V9v();this.V9w();f?(this.V9j=!1,this.V9x&&this.V9x(),this.jobs=[]):this.V9i=window.requestAnimationFrame(function(b){this.V9p(b)}.bind(this));f||(3<this.V9n?this.currFPS=d:delete this.currFPS)};c.prototype.V9w=function(){for(var b=[],d=0;d<this.jobs.length;d++)this.jobs[d].canDelete()||b.push(this.jobs[d]);this.jobs=b};c.prototype.V9o=function(b,d){for(var e=this.cbcanvas.V9r,c=0;c<this.jobs.length;c++)this.jobs[c].hide(e);
for(c=0;c<b.length;c++)b[c].hide(e);for(c=0;c<this.jobs.length;c++)-1==this.jobs[c].sqTo&&this.jobs[c].moveTo(e,this.jobs[c].ptTo);for(c=0;c<this.jobs.length;c++)-1!=this.jobs[c].sqTo&&this.jobs[c].moveTo(e,this.jobs[c].ptTo);var f=0<this.jobs.length;this.jobs=[];for(c=0;c<b.length;c++)b[c].startAnimation(e,d),b[c].deleteBackground(),b[c].moveTo(e,b[c].ptFrom),this.jobs.push(b[c]);return f};c.prototype.tick=function(b){this.V9y(b);this.V9d=this.V9e()-this.startTime;this.lastTime=b};c.prototype.V9y=
function(b){0==this.lastTime&&(this.lastTime=this.startTime);this.V9f=0===this.lastTime||this.lastTime==b?this.V9c:1E3/(b-this.lastTime)};c.prototype.V9e=function(){return(new Date).getTime()};return c}();"use strict";
CB.V9z=function(){var c=function(){this.nSize=this.nPos=0;this.buffer=new ArrayBuffer(188);this.viewBuf=new DataView(this.buffer);this.Va0=[];this.Va1=[]};c.prototype.clear=function(){this.nSize=this.nPos=0;this.Va0=[];this.Va1=[]};c.prototype.rewind=function(){this.nPos=0;this.Va0=[];this.Va1=[]};c.prototype.getPos=function(){return this.nPos};c.prototype.setPos=function(b){if(b<=this.nSize&&b<=this.buffer.byteLength)this.nPos=b;else throw"Error: SetPos exceeds DataBuffer size";};c.prototype.getSize=
function(){return this.nSize};c.prototype.setSize=function(b){if(b>=this.buffer.byteLength)throw"DBuf setSize illegal";this.nSize=b};c.prototype.Va2=function(){return this.nSize+4};c.prototype.Va3=function(b,d){b.setInt32(d,this.nSize);this.Va4(b,d,4);d+=4;for(var e=0;e<this.nSize;e++)b.setUint8(e+d,this.viewBuf.getUint8(e))};c.prototype.Va5=function(b,d){this.Va4(b,d,4);var e=b.getInt32(d);if(35E4>e&&0<=e){this.Va6(e);d+=4;for(var c=0;c<e;c++){var f=b.getUint8(c+d);this.viewBuf.setUint8(c,f)}this.Va7(e)}};
c.prototype.V3bo=function(b){b=CB.V4a.V4b(b);this.V3b9(b)};c.prototype.V3b9=function(b){this.Va6(b.length+4);this.V3by(b.length);for(var d=0;d<b.length;d++){var e=b.charCodeAt(d);this.viewBuf.setUint8(this.nPos+d,e)}this.Va7(b.length)};c.prototype.V3br=function(b){var d=this.V3c1();if(d<=b&&25E4>d){b="";for(var e=0;e<d;e++){var c=this.viewBuf.getUint8(this.nPos+e);b+=String.fromCharCode(c)}b=CB.V4a.V4c(b);this.nPos+=d}else throw Error("Data Error: Read String");return b};c.prototype.V3b6=function(b){this.Va6(b.length+
4);this.V3by(b.length);for(var d=0;d<b.length;d++){var e=b.charCodeAt(d);this.viewBuf.setUint8(this.nPos+d,e)}this.Va7(b.length)};c.prototype.V3b7=function(b){var d="",e=this.V3c1();if(e<=b&&25E4>e){for(b=0;b<e;b++)var c=this.viewBuf.getUint8(this.nPos+b),d=d+String.fromCharCode(c);this.nPos+=e}else throw Error(String.f("Data Error: Read String, Len={0}, maxLen={1}",e,b));return d};c.prototype.writeByteLenASCIIString=function(b){this.Va6(b.length+2);this.writeUint8(b.length+1);for(var d=0;d<b.length;d++){var e=
b.charCodeAt(d);this.viewBuf.setUint8(this.nPos+d,e)}this.viewBuf.setUint8(this.nPos+b.length,0);this.Va7(b.length+1)};c.prototype.readByteLenASCIIString=function(b){var d="",e=this.readUint8();0<e&&--e;if(1E3>e){for(var c=0;c<e;c++)var f=this.viewBuf.getUint8(this.nPos+c),d=d+String.fromCharCode(f);if(e<=b)this.nPos+=e+1;else throw Error(String.f("Data Error: Read ByteLenString, len={0}, maxLen={1}",e,b));}else throw Error(String.f("Data Error: Read ByteLenString > 1000, len={0}",e));return d};c.prototype.readSizedString=
function(b){var d="";if(25E4>b){for(var e=0;e<b;e++)var c=this.viewBuf.getUint8(this.nPos+e),d=d+String.fromCharCode(c);this.nPos+=b}else throw Error("Data Error: Read SizedString, max="+b);return d};c.prototype.writeSizedString=function(b){var d=b.length;this.Va6(d);for(var e=0;e<d;e++){var c=b.charCodeAt(e);this.viewBuf.setUint8(this.nPos+e,c)}this.Va7(d)};c.prototype.Va8=function(b){var d;if(25E4>b){d="";for(var e=0;e<b;e++){var c=this.viewBuf.getUint8(this.nPos+e);d+=String.fromCharCode(c)}d=
CB.V4a.V4c(d);this.nPos+=b}else throw Error("Data Error: Read UTF8String, len="+b);return d};c.prototype.readByteArray=function(b){for(var d=[],e=0;e<b&&this.nPos+e<this.nSize;e++)d.push(this.viewBuf.getUint8(this.nPos+e));this.nPos+=b;return d};c.prototype.writeByteArray=function(b,d){for(var e=0;e<b.length&&e<d;e++)this.writeByte(b[e])};c.prototype.writeDataBuffer=function(b){this.V3by(b.getSize());this.Va6(b.getSize());for(var d=0;d<b.getSize();d++)this.viewBuf.setUint8(this.nPos+d,b.viewBuf.getUint8(d));
this.Va7(b.getSize())};c.prototype.readDataBuffer=function(){var b=new CB.V9z,d=this.V3c1();b.Va6(d);for(var e=0;e<d;e++)b.viewBuf.setUint8(e,this.viewBuf.getUint8(this.nPos+e));this.nPos+=d;b.Va7(d);b.nPos=0;return b};c.prototype.writeData=function(b){this.Va6(b.getSize());for(var d=0;d<b.getSize();d++)this.viewBuf.setUint8(this.nPos+d,b.viewBuf.getUint8(d));this.Va7(b.getSize())};c.prototype.V3c4=function(b){if(void 0===b)throw Error("V3c4, value undefined");this.Va6(1);b?this.viewBuf.setUint8(this.nPos,
1):this.viewBuf.setUint8(this.nPos,0);this.Va7(1)};c.prototype.V3c5=function(b){b=this.viewBuf.getUint8(this.nPos);this.nPos+=1;return 0!=b};c.prototype.writeUint8=function(b){if(void 0===b)throw Error("writeUint8, value undefined");this.Va6(1);this.viewBuf.setUint8(this.nPos,b);this.Va7(1)};c.prototype.readUint8=function(){var b=this.viewBuf.getUint8(this.nPos);this.nPos+=1;return b};c.prototype.readByte=c.prototype.readUint8;c.prototype.writeByte=c.prototype.writeUint8;c.prototype.V3bw=function(b){if(void 0===
b)throw Error("V3bw, value undefined");this.Va6(2);this.viewBuf.setInt16(this.nPos,b);this.Va4(this.viewBuf,this.nPos,2);this.Va7(2)};c.prototype.V3c2=function(){var b=0;this.nPos<=this.viewBuf.byteLength-2&&(this.Va4(this.viewBuf,this.nPos,2),b=this.viewBuf.getInt16(this.nPos),this.Va4(this.viewBuf,this.nPos,2),this.nPos+=2);return b};c.prototype.readShort=c.prototype.V3c2;c.prototype.writeShort=c.prototype.V3bw;c.prototype.V3bj=function(b){if(void 0===b)throw Error("V3bj, value undefined");this.Va6(2);
this.viewBuf.setUint16(this.nPos,b);this.Va4(this.viewBuf,this.nPos,2);this.Va7(2)};c.prototype.V3bv=function(){var b=0;this.nPos<=this.viewBuf.byteLength-2&&(this.Va4(this.viewBuf,this.nPos,2),b=this.viewBuf.getUint16(this.nPos),this.Va4(this.viewBuf,this.nPos,2),this.nPos+=2);return b};c.prototype.V3by=function(b){if(void 0===b)throw Error("V3by, value undefined");this.Va6(4);this.viewBuf.setInt32(this.nPos,b);this.Va4(this.viewBuf,this.nPos,4);this.Va7(4)};c.prototype.writeFakeInt64=function(b){this.V3by(b);
this.V3by(0)};c.prototype.readFakeInt64=function(){var b=this.V3c1();this.V3c1();return b};c.prototype.V3c1=function(){var b=0;this.nPos<=this.viewBuf.byteLength-4&&(this.Va4(this.viewBuf,this.nPos,4),b=this.viewBuf.getInt32(this.nPos),this.Va4(this.viewBuf,this.nPos,4),this.nPos+=4);return b};c.prototype.writeInt=c.prototype.V3by;c.prototype.readInt=c.prototype.V3c1;c.prototype.V3bi=function(b){this.Va6(4);this.viewBuf.setUint32(this.nPos,b);this.Va4(this.viewBuf,this.nPos,4);this.Va7(4)};c.prototype.V3bx=
function(){var b=0;this.nPos<=this.viewBuf.byteLength-4&&(this.Va4(this.viewBuf,this.nPos,4),b=this.viewBuf.getUint32(this.nPos),this.Va4(this.viewBuf,this.nPos,4),this.nPos+=4);return b};c.prototype.V3bh=function(b){b=b.getYear()<<9|b.getMonth()<<5|b.getDay();this.V3bi(b)};c.prototype.V3bt=function(){var b=new CB.Date,d=this.V3bx();b.setYear(d>>9);b.setMonth(d>>5&15);b.V5h(d&31);return b};c.prototype.Va9=function(){var b=this.V3bx();return new CB.Time(b)};c.prototype.V3bu=function(b){if(void 0===
b)throw Error("V3bu, value undefined");var d=Math.floor(b/4294967296);this.V3by(b-d);this.V3by(d)};c.prototype.readUint64=function(){if(this.nPos<=this.viewBuf.byteLength-8){this.Va4(this.viewBuf,this.nPos,8);var b=this.viewBuf.getUint32(this.nPos);this.nPos+=4;var d=this.viewBuf.getUint32(this.nPos);this.nPos+=4;return 4294967296*b+d}return 0};c.prototype.V3bz=function(){if(this.nPos<=this.viewBuf.byteLength-8){this.Va4(this.viewBuf,this.nPos,8);var b=this.viewBuf.getInt32(this.nPos);this.nPos+=
4;var d=this.viewBuf.getUint32(this.nPos);this.nPos+=4;return 4294967296*b+d}return 0};c.prototype.writeFloat32=function(b){this.Va6(4);this.viewBuf.setFloat32(this.nPos,b);this.Va4(this.viewBuf,this.nPos,4);this.Va7(4)};c.prototype.readFloat32=function(){this.Va4(this.viewBuf,this.nPos,4);var b=this.viewBuf.getFloat32(this.nPos);this.nPos+=4;return b};c.prototype.Vaa=function(b){this.Va6(8);this.viewBuf.setFloat64(this.nPos,b);this.Va4(this.viewBuf,this.nPos,8);this.Va7(8)};c.prototype.readFloat64=
function(){this.Va4(this.viewBuf,this.nPos,8);var b=this.viewBuf.getFloat64(this.nPos);this.nPos+=8;return b};c.prototype.Vab=function(){for(var b=this.getSize(),d=[],e=0;e<b;e++){var c=this.viewBuf.getUint8(e);d[e]=c}return CB.Vac.Vad(d,b)};c.prototype.Vae=function(b,d){this.clear();if(d){var e=[],c=CB.Vac.Vaf(e,b);if(0<c)for(var f=0;f<c;f++)this.writeByte(e[f])}else for(e=0,10<b.length&&(e=parseInt(b.substr(0,10),10)),0>e&&(e=0),c=0;c<e;c++)f=b.substr(10+2*c,2),f=parseInt(f,16),this.writeByte(f)};
c.prototype.Vag=function(b){this.clear();b=CB.V4a.base64.V4j(b);for(var d=new Uint8Array(b),e=0;e<b.byteLength;e++)this.writeByte(d[e]);this.writeByteArray(b,b.byteLength);this.rewind()};c.prototype.readBEInt32=function(){var b=this.readUint8(),d=this.readUint8(),e=this.readUint8(),c=this.readUint8();return b<<24|d<<16|e<<8|c};c.prototype.writeBEInt32=function(b){if(void 0===b)throw Error("V3by, value undefined");this.Va6(4);this.viewBuf.setInt32(this.nPos,b);this.Va7(4)};c.prototype.readBEInt24=
function(){var b=this.readUint8(),d=this.readUint8(),e=this.readUint8();return b<<16|d<<8|e};c.prototype.readBEInt16=function(){var b=this.readUint8(),d=this.readUint8();return 256*b+d};c.prototype.writeBEInt24=function(b){var d=b>>8,e=b&255;this.writeUint8(b>>16);this.writeUint8(d);this.writeUint8(e)};c.prototype.writeBEInt16=function(b){var d=b&255;this.writeUint8(b>>8);this.writeUint8(d)};c.prototype.writeArray=function(b){var d=b.length;this.V3by(d);for(var e=0;e<d;++e)b[e].write(this)};c.prototype.Vah=
function(b){var d=b.length;this.V3bw(d);for(var e=0;e<d;++e)b[e].write(this)};c.prototype.readArray=function(b,d){var e=this.V3c1();65534<e&&CBDebug.assert(65535>e);b.length=e;for(var c=0;c<e;++c){var f=d(this);b[c]=f}};c.prototype.Vai=function(b,d){var e=this.V3c2();b.length=e;for(var c=0;c<e;++c){var f=d(this);b[c]=f}};c.prototype.beginSizedWrite=function(){this.Va0.push(this.getPos());this.V3by(0)};c.prototype.endSizedWrite=function(){var b=this.getPos();if(0<this.Va0.length){this.setPos(this.Va0[this.Va0.length-
1]);var d=this.nSize;this.V3by(b-this.Va0[this.Va0.length-1]-4);this.nSize=d;this.setPos(b);this.Va0.pop()}else throw Error("DB::EndWrite");};c.prototype.beginSizedRead=function(){this.Va0.push(this.getPos());this.Va1.push(this.V3c1())};c.prototype.endSizedRead=function(){if(0<this.Va0.length&&0<this.Va1.length){var b=this.getPos()-this.Va0[this.Va0.length-1]-4;this.skip(this.Va1[this.Va1.length-1]-b);this.Va0.pop();this.Va1.pop()}else throw Error("DB::EndRead");};c.prototype.skipSizedRead=function(){var b=
this.V3c1();this.skip(b)};c.prototype.skip=function(b){if(this.nPos+b<=this.nSize)this.nPos+=b;else throw Error("DB::Skip");};c.prototype.Vaj=function(b,d){var e=this.getPos();this.setPos(b);d();this.setPos(e)};c.prototype.Va6=function(b){if(this.nPos+b>=this.buffer.byteLength||this.nSize+b>=this.buffer.byteLength){var d=Math.max(this.nPos,this.nSize),e=8*Math.floor(3*(d+b)/16+1);if(e<b+d)throw"DataBuffer Size";b=new ArrayBuffer(e);d=new DataView(b);for(e=0;e<this.buffer.byteLength/4;e++)d.setUint32(4*
e,this.viewBuf.getUint32(4*e));this.buffer=b;this.viewBuf=d}};c.prototype.Va7=function(b){if(this.nPos+b>=this.buffer.byteLength)throw"DataBuffer overrun";this.nPos+=b;this.nSize+=b;if(this.nSize>=this.buffer.byteLength)throw"DataBuffer Size Limit exc.";};c.prototype.Va4=function(b,d,e){for(var c=[],f=0;f<e;f++)c.push(b.getUint8(d+f));for(f=0;f<e;f++)b.setUint8(d+f,c[e-f-1])};return c}();function createReadFactory(c){return function(b){var d=new c;d.read(b);return d}}
function createReadFactory2(c){return function(b){var d=new c;d.read2(b);return d}}"use strict";
CB.Vak=function(){var c=function(b){this.bag=[];var d;if(0<arguments.length)for(d=0;d<b.length;d++)this.insert(b[d])};c.prototype.clear=function(){this.bag=[]};c.prototype.search=function(b,d){for(var e=this.bag.length,c,f=2==arguments.length?d:0;f<e;){c=f+Math.floor((e-f)/2);if(this.bag[c].setEquals(b))return c;b.setGreater(this.bag[c])?f=c+1:e=c}return f};c.prototype.insert=function(b){var d=this.search(b);void 0!==this.bag[d]&&this.bag[d].setEquals(b)||this.bag.splice(d,0,b)};c.prototype.contains=
function(b){var d=this.search(b);return void 0!==this.bag[d]?this.bag[d].setEquals(b):!1};c.prototype.get=function(b){var d=this.search(b);if(void 0!==this.bag[d]&&this.bag[d].setEquals(b))return this.bag[d]};c.prototype.size=function(){return this.bag.length};c.prototype.Val=function(){return this.bag};c.prototype.equals=function(b){if(this.size()!=b.size())return!1;var d;for(d=0;d<this.bag.length;d++)if(!this.bag[d].setEquals(b.bag[d]))return!1;return!0};c.prototype.save=function(b,d){var e=new CB.Vam;
e.save(b+"_len",this.bag.length);for(var c=0;c<this.bag.length;c++)d&&!d(this.bag[c])||e.save(b+"_o"+c,this.bag[c])};c.prototype.load=function(b,d){var e=new CB.Vam,c=e.load(b+"_len");if(c)for(var f=0,h=0;h<c;h++){var l=e.load(b+"_o"+h);d?(l=d(l))&&(this.bag[f++]=l):this.bag[f++]=l}};return c}();
CB.Van=function(){var c=function(b){this.bag=[];var d;if(0<arguments.length)for(d=0;d<b.length;d++)this.insert(b[d])};c.prototype.clear=function(){this.bag=[]};c.prototype.search=function(b,d){for(var e=this.bag.length,c,f=2==arguments.length?d:0;f<e;){c=f+Math.floor((e-f)/2);if(this.bag[c]==b)return c;b>this.bag[c]?f=c+1:e=c}return f};c.prototype.insert=function(b){var d=this.search(b);void 0!==this.bag[d]&&this.bag[d]==b||this.bag.splice(d,0,b)};c.prototype.contains=function(b){var d=this.search(b);
return void 0!==this.bag[d]?this.bag[d]==b:!1};c.prototype.get=function(b){var d=this.search(b);if(void 0!==this.bag[d]&&this.bag[d]==b)return this.bag[d]};c.prototype.size=function(){return this.bag.length};c.prototype.Val=function(){return this.bag};c.prototype.equals=function(b){if(this.size()!=b.size())return!1;var d;for(d=0;d<this.bag.length;d++)if(this.bag[d]!=b.bag[d])return!1;return!0};c.prototype.save=function(b,d){var e=new CB.Vam;e.save(b+"_len",this.bag.length);for(var c=0;c<this.bag.length;c++)d&&
!d(this.bag[c])||e.save(b+"_o"+c,this.bag[c])};c.prototype.load=function(b,d){var e=new CB.Vam,c=e.load(b+"_len");if(c)for(var f=0,h=0;h<c;h++){var l=e.load(b+"_o"+h);d?(l=d(l))&&(this.bag[f++]=l):this.bag[f++]=l}};return c}();"use strict";CB.namespace("CB.Vao");
CB.Vao=function(){var c=function(b){this.Vap=b;this.Vaq={};this.Var={}};c.staticIdVector=0;c.staticIdBunch=0;c.prototype.Vas=function(b,d,e,c){var f={vec:[],overhead:new CB.V9z},h=b.getBuf().V3bx();b.getBuf().V3bx();var l=b.getBuf().V3bx();b.getBuf().V3bx();f.overhead=b.getBuf().readDataBuffer();if(0<l){for(var q=b.getBuf().V3c1(),r=0;r<q&&3E4>r;r++){var t=c(b.getBuf());f.vec.push(t)}d=new CB.Vat(d);d.setUserType(e);d.getBuf().V3bi(h);d.getBuf().V3bi(0);d.getBuf().V3bi(l);d.getBuf().V3bi(0);d.getBuf().V3by(q);
d.address(b.getIdReceiver(),b.V3bk());this.Vap(d)}return f};c.prototype.Vau=function(b,d,e,g,f,h,l,q){var r=++c.staticIdVector,t=++c.staticIdBunch,w=0;do{var z=new CB.V9z;z.V3by(r);z.V3by(0);z.V3by(t);z.V3by(0);z.writeDataBuffer(l);var B=0,v=z.getPos();z.V3by(B);if(e.length){var y;do{var C=z.getSize(),D=z.getPos();q(z,e[w]);(y=z.getSize()<g)||0==B?(B++,w++):(z.setPos(D),z.setSize(C))}while(y&&w<e.length);y=z.getPos();z.setPos(v);z.V3by(B);z.setPos(y)}this.Vaq[t]={sender:b,receiver:d,buf:z,idBunch:t,
idVec:r,msgType:f,userType:h,nSent:0};t++}while(w<e.length);this.Var[r]={idVec:r,data:{msgType:f,userType:h,overHead:l}};this.Vax(b,d,r)};c.prototype.Vax=function(b,d,e){var c=!1,f;for(f in this.Vaq)if(this.Vaq.hasOwnProperty(f)){var h=this.Vaq[f],c=c||h.idVec==e;if(0==e||h.idVec==e){0==h.nSent%10&&(f=new CB.Vat(h.msgType),f.setUserType(h.userType),f.getBuf().writeData(h.buf),f.address(b,d),this.Vap(f));h.nSent++;break}}!c&&(c=this.Var[e])&&(f=new CB.Vat(c.data.msgType),f.setUserType(c.data.userType),
f.getBuf().writeFakeInt64(e),f.getBuf().writeFakeInt64(0),f.getBuf().writeDataBuffer(c.data.overHead),f.address(b,d),this.Vap(f),delete this.Var[e])};c.prototype.Vay=function(b){var d=b.getBuf().readFakeInt64(),e=b.getBuf().readFakeInt64(),c=b.getBuf().V3c1();delete this.Vaq[e];this.Vax(b.getIdReceiver(),b.V3bk(),d);return c};return c}();"use strict";CB.Vaz={WHITE:0,BLACK:1,Vb0:3};CB.Vaz.Vb1=8;CB.Vaz.other=function(c){return c^CB.Vaz.BLACK};
CB.Vaz.fromString=function(c){return"w"===c?CB.Vaz.WHITE:CB.Vaz.BLACK};CB.Vaz.toString=function(c){return c===CB.Vaz.WHITE?"w":"b"};CB.Piece={V5l:0,KING:1,QUEEN:2,KNIGHT:3,BISHOP:4,ROOK:5,PAWN:6,Vn:1,Vp:2,Vv:3,Vt:4,Vr:5,Vx:6,Vo:9,Vq:10,Vw:11,Vu:12,Vs:13,Vy:14,COLOUR:8,WHITE:0,BLACK:8};CB.Piece.Vb2=7;CB.Piece.Vb1=8;CB.Piece.Vb3=function(c){return c&CB.Piece.Vb2};CB.Piece.side=function(c){return(c&CB.Vaz.Vb1)/8};CB.Piece.Vb4=function(c){return c^CB.Vaz.Vb1};CB.Piece.Vb5=function(c,b){return c|8*b};
CB.Piece.Vb6=" KQNBRP  kqnbrp".split("");CB.Piece.toString=function(c){return CB.Piece.Vb6[c]};CB.Piece.fromString=function(c){c=CB.Piece.Vb6.indexOf(c);return 0>c?CB.Piece.V5l:c};CB.Vb7={V5l:0,Vb8:1,Vb9:2,Vba:4,Vbb:8};CB.Vb7.Vbc=CB.Vb7.Vb9|CB.Vb7.Vb8;CB.Vb7.Vbd=CB.Vb7.Vbb|CB.Vb7.Vba;CB.Vb7.Vbe=CB.Vb7.Vbc|CB.Vb7.Vbd;CB.Vb7.toString=function(c){if(c===CB.Vb7.V5l)return"-";var b="";c&CB.Vb7.Vb9&&(b+="K");c&CB.Vb7.Vb8&&(b+="Q");c&CB.Vb7.Vbb&&(b+="k");c&CB.Vb7.Vba&&(b+="q");return b};
CB.Vb7.fromString=function(c){var b=CB.Vb7.V5l;c=new StringIterator(c);for(var d=c.Next();0!==d;d=c.Next())switch(d){case "K":b|=CB.Vb7.Vb9;break;case "Q":b|=CB.Vb7.Vb8;break;case "k":b|=CB.Vb7.Vbb;break;case "q":b|=CB.Vb7.Vba}return b};
CB.Vbf={Vbg:0,Vbh:7,Vbi:3,Vbj:56,Vbk:0,Vbl:1,Vbm:2,Vbn:3,Vbo:4,Vbp:5,Vbq:6,Vbr:7,Vbs:8,Vbt:9,Vbu:10,Vbv:11,Vbw:12,Vbx:13,Vby:14,Vbz:15,Vc0:16,Vc1:17,Vc2:18,Vc3:19,Vc4:20,Vc5:21,Vc6:22,Vc7:23,Vc8:24,Vc9:25,Vca:26,Vcb:27,Vcc:28,Vcd:29,Vce:30,Vcf:31,Vcg:32,Vch:33,Vci:34,Vcj:35,Vck:36,Vcl:37,Vcm:38,Vcn:39,Vco:40,F2:41,Vcp:42,Vcq:43,Vcr:44,Vcs:45,Vct:46,Vcu:47,Vcv:48,Vcw:49,Vcx:50,Vcy:51,Vcz:52,Vd0:53,Vd1:54,Vd2:55,Vd3:56,Vd4:57,Vd5:58,Vd6:59,Vd7:60,Vd8:61,Vd9:62,Vda:63,Vdb:0,Vdc:1,Vdd:2,Vde:3,Vdf:4,Vdg:5,
Vdh:6,Vdi:7,Vdj:0,Vdk:1,Vdl:2,Vdm:3,Vdn:4,Vdo:5,Vdp:6,Vdq:7};CB.Vdr=CB.Vbf;CB.Vbf.g_arrSquareStrs="a1 a2 a3 a4 a5 a6 a7 a8 b1 b2 b3 b4 b5 b6 b7 b8 c1 c2 c3 c4 c5 c6 c7 c8 d1 d2 d3 d4 d5 d6 d7 d8 e1 e2 e3 e4 e5 e6 e7 e8 f1 f2 f3 f4 f5 f6 f7 f8 g1 g2 g3 g4 g5 g6 g7 g8 h1 h2 h3 h4 h5 h6 h7 h8".split(" ");CB.Vbf.toString=function(c){return this.g_arrSquareStrs[c]};CB.Vbf.Vds=CB.Vbf.toString;CB.Vbf.Vdt=function(c,b){return CB.Vbf.Vds(CB.Vbf.Vdu(c,b))};
CB.Vbf.Vdv=function(c){return String.fromCharCode("a".charCodeAt()+c)};CB.Vbf.Vdw=function(c){return c+1};CB.Vbf.Vdx=function(c){return c.charCodeAt(0)-"a".charCodeAt()};CB.Vbf.Vdy=function(c){return c.charCodeAt(0)-"1".charCodeAt()};CB.Vbf.fromString=function(c){if(c&&2===c.length){var b=CB.Vbf.Vdx(c.charAt(0));c=CB.Vbf.Vdy(c.charAt(1));return CB.Vbf.Vdz(b,c)}};CB.Vbf.Ve0=function(c){return(c&CB.Vbf.Vbh)>>CB.Vbf.Vbg};CB.Vbf.Ve1=function(c){return(c&CB.Vbf.Vbj)>>CB.Vbf.Vbi};CB.Vbf.Ve2=CB.Vbf.Ve0;
CB.Vbf.Ve3=CB.Vbf.Ve1;CB.Vbf.Ve4=function(c,b){var d=CB.Vbf.Ve0(c)-CB.Vbf.Ve0(b),e=CB.Vbf.Ve1(c)-CB.Vbf.Ve1(b);return Math.sqrt(d*d+e*e)};CB.Vbf.Vdz=function(c,b){return 8*c+b};CB.Vbf.Vdu=CB.Vbf.Vdz;CB.Vbf.isLegal=function(c,b){return c<=CB.Vbf.Vdi&&c>=CB.Vbf.Vdb&&b<=CB.Vbf.Vdq&&b>=CB.Vbf.Vdj};CB.Vbf.Ve5=function(c){var b=CB.Vbf.Ve1(c);c=CB.Vbf.Ve0(c);return!((b+c)%2)};CB.Vbf.Ve6=function(c){return!CB.Vbf.Ve5(c)};
CB.Vbf.V7n=function(c,b){var d=CB.Vbf.Ve3(c)-CB.Vbf.Ve3(b),e=CB.Vbf.Ve2(c)-CB.Vbf.Ve2(b);return Math.sqrt(d*d+e*e)};CB.Vbf.Ve7=function(c){return c===CB.Vaz.WHITE?CB.Vbf.Vdq:CB.Vbf.Vdj};"use strict";
CB.Ve8=function(){var c=function(b){this.sqs=[];for(var d=0;64>d;d++)this.sqs.push(0);b&&this.setup()};c.Ve9=64;c.prototype.setup=function(){this.sqs=[CB.Piece.Vr,CB.Piece.Vx,0,0,0,0,CB.Piece.Vy,CB.Piece.Vs,CB.Piece.Vv,CB.Piece.Vx,0,0,0,0,CB.Piece.Vy,CB.Piece.Vw,CB.Piece.Vt,CB.Piece.Vx,0,0,0,0,CB.Piece.Vy,CB.Piece.Vu,CB.Piece.Vp,CB.Piece.Vx,0,0,0,0,CB.Piece.Vy,CB.Piece.Vq,CB.Piece.Vn,CB.Piece.Vx,0,0,0,0,CB.Piece.Vy,CB.Piece.Vo,CB.Piece.Vt,CB.Piece.Vx,0,0,0,0,CB.Piece.Vy,CB.Piece.Vu,CB.Piece.Vv,CB.Piece.Vx,
0,0,0,0,CB.Piece.Vy,CB.Piece.Vw,CB.Piece.Vr,CB.Piece.Vx,0,0,0,0,CB.Piece.Vy,CB.Piece.Vs]};c.prototype.clear=function(){this.sqs.forEach(function(b,d,e){e[d]=0})};c.prototype.Vea=function(b){for(var d=CB.Vaz.WHITE,e=CB.Piece.KING,c=0;c<b.length;c++)switch(b[c]){case "K":e=CB.Piece.KING;break;case "Q":e=CB.Piece.QUEEN;break;case "R":e=CB.Piece.ROOK;break;case "B":e=CB.Piece.BISHOP;break;case "N":e=CB.Piece.KNIGHT;break;case "P":e=CB.Piece.PAWN;break;case "a":case "b":case "c":case "d":case "e":case "f":case "g":case "h":var f=
b.charCodeAt(c),h=b.charCodeAt(c+1);49<=h&&56>=h?this.sqs[(f-97<<3)+h-49]=e|d:98==f&&(d=CB.Vaz.Vb1);break;case "w":d=CB.Vaz.WHITE}};c.prototype.copyFrom=function(b){for(var d=0;d<b.length;d++)this.sqs[d]=b[d]};c.prototype.copyTo=function(b){for(var d=0;64>d;d++)b[d]=this.sqs[d]};c.prototype.set=function(b,d){this.sqs[b]=d};c.prototype.get=function(b){return this.sqs[b]};c.prototype.change=function(b,d){this.sqs[d]=this.sqs[b];this.sqs[b]=0};c.prototype.Veb=function(b,d,e){this.sqs[d]=e;this.sqs[b]=
0};c.prototype.Vec=function(b,d,e){this.sqs[d]=this.sqs[b];this.sqs[b]=0;this.sqs[e]=0};c.prototype.writeToDataBuffer=function(b){for(var d=0;64>d;d++)b.writeByte(this.sqs[d])};c.prototype.Ved=function(){for(var b=[],d=7;0<=d;d--){for(var e="",c=0;8>c;c++)var f=this.get(8*c+d),e=f?e+CB.Piece.Vb6[f]:CB.Vbf.Ve5(8*c+d)?e+".":e+" ";b.push(e)}return b};c.prototype.Vee=function(b,d,e,c){for(d=0;64>d;d++)if((void 0===c||!c[d])&&e[d]==b)return d;return-1};c.prototype.test=function(){var b=new CB.Ve8;b.setup();
b.Ved().forEach(function(b){})};return c}();"use strict";CB.Vef=function(){var c=function(b,d){void 0!==b?(this.cr=b.cr,this.ep=b.ep,this.mvd=b.board[d.from],this.vct=b.board[d.to]):(this.cr=CB.Vb7.V5l,this.ep=0,this.mvd=this.vct=CB.Piece.V5l);void 0!==d&&(this.fldVct=d.to);this.from2=this.to2=0};c.prototype.Veg=function(b,d){this.fldVct=d;this.vct=b};c.prototype.Veh=function(b,d){this.from2=b;this.to2=d};return c}();"use strict";
CB.Vei=function(){var c=function(b,d,e){this.to=this.from=0;this.prom=CB.Piece.V5l;b&&(this.from=b);d&&(this.to=d);e&&(this.prom=e)};c.g_mvW00=new c(CB.Vbf.Vcg,CB.Vbf.Vcv);c.g_mvW000=new c(CB.Vbf.Vcg,CB.Vbf.Vc0);c.g_mvB00=new c(CB.Vbf.Vcn,CB.Vbf.Vd2);c.g_mvB000=new c(CB.Vbf.Vcn,CB.Vbf.Vc7);c.prototype.Vej=!1;c.prototype.Vek=!1;c.prototype.needCol=!1;c.prototype.needRow=!1;c.prototype.mvd=CB.Piece.V5l;c.prototype.vct=CB.Piece.V5l;Object.defineProperty(c.prototype,"piece",{get:function(){return this.mvd},
set:function(b){this.mvd=b},enumerable:!0});Object.defineProperty(c.prototype,"capt",{get:function(){return this.vct},set:function(b){this.vct=b},enumerable:!0});c.prototype.Vel=!1;c.prototype.Vem=!1;c.prototype.isNullMove=function(){return this.from===this.to&&!this.from};c.prototype.isCastling=function(){return this.isShortCastling()||this.isLongCastling()};c.prototype.equals=function(b){return this.from===b.from&&this.to===b.to&&this.prom===b.prom};c.prototype.isValid=function(){return this.from!=
this.to};c.prototype.Ven=function(){return this.equals(CB.Vei.g_mvW00)&&this.mvd===CB.Piece.Vn||this.equals(CB.Vei.g_mvB00)&&this.mvd===CB.Piece.Vo};c.prototype.isShortCastling=function(){return this.Vel};c.prototype.Veo=function(){return this.equals(CB.Vei.g_mvW000)&&this.mvd===CB.Piece.Vn||this.equals(CB.Vei.g_mvB000)&&this.mvd===CB.Piece.Vo};c.prototype.isLongCastling=function(){return this.Vem};c.prototype.setIsCastling=function(){this.Vel=this.Ven();this.Vem=this.Veo()};c.prototype.subLines=
null;c.prototype.annos=null;c.prototype.isCheck=function(){return this.Vej};c.prototype.setCheck=function(b){this.Vej=b};c.prototype.isMate=function(){return this.Vek};c.prototype.setMate=function(b){this.Vek=b};c.prototype.isTake=function(){return this.vct!=CB.Piece.V5l};c.prototype.getMoved=function(){return this.mvd};c.prototype.setMoved=function(b){this.mvd=b};c.prototype.getVictim=function(){return this.vct};c.prototype.setVictim=function(b){this.vct=b};c.prototype.getPiece=c.prototype.getMoved;
c.prototype.isProm=function(){return this.prom!=CB.Piece.V5l};c.prototype.isPawn=function(){return this.mvd&&(this.mvd&7)==CB.Piece.PAWN};c.prototype.getSide=function(){return CB.Piece.side(this.mvd)};c.prototype.isNeedCol=function(){return this.needCol};c.prototype.setNeedCol=function(b){this.needCol=b};c.prototype.isNeedRow=function(){return this.needRow};c.prototype.setNeedRow=function(b){this.needRow=b};c.prototype.getTreeMoveCount=function(){var b=1;this.subLines&&(b=this.subLines.reduce(function(b,
e){return b+e.getTreeMoveCount()},b));return b};c.prototype.indexOfLine=function(b){return this.subLines?this.subLines.indexOf(b):-1};c.prototype.findLine=function(b){if(this.subLines)for(var d=0;d<this.subLines.length;++d){var e=this.subLines[d];if(e[0].equals(b))return e}return null};c.prototype.removeLine=function(b){this.subLines&&(b=this.subLines.indexOf(b),0>b||this.subLines.splice(b,1))};c.prototype.removeLines=function(){this.subLines=null};c.prototype.getLine=function(b){return this.subLines[b]};
c.prototype.getSubLines=function(){return this.subLines};c.prototype.getSubLinesCount=function(){return this.subLines?this.subLines.length:0};c.prototype.hasLines=function(){return null!=this.subLines&&0<this.subLines.length};c.prototype.newLine=function(b,d){this.subLines||(this.subLines=[]);var e=new CB.Vep(b,d);this.subLines.push(e);return e};c.prototype.addLine=function(b){this.subLines||(this.subLines=[]);this.subLines.push(b)};c.prototype.insertLine=function(b,d){this.subLines||(this.subLines=
[]);this.subLines.splice(b,0,d)};c.prototype.swapLines=function(b,d){if(this.subLines){var e=this.subLines[b];this.subLines[b]=this.subLines[d];this.subLines[d]=e}};c.prototype.write=function(b){if(this.prom){var d=this.to|this.prom-CB.Piece.QUEEN<<6;b.writeByte(this.from|64);b.writeByte(d)}else b.writeByte(this.from),b.writeByte(this.to);this.Veq(b);this.Ver(b)};c.prototype.write2=function(b){if(this.prom){var d=this.to|this.prom-CB.Piece.QUEEN<<6;b.writeByte(this.from|64);b.writeByte(d)}else b.writeByte(this.from),
b.writeByte(this.to);d=0;this.annos&&this.annos.count()&&(d|=1);this.getSubLinesCount()&&(d|=2);b.writeUint8(d);d&1&&this.Ves(b);d&2&&this.Vet(b)};c.prototype.read=function(b){this.from=b.readByte();this.to=b.readByte();64==(this.from&192)&&(this.prom=CB.Piece.QUEEN+(this.to>>6));this.from&=63;this.to&=63;this.Veu(b);this.Vev(b)};c.prototype.read2=function(b){this.from=b.readByte();this.to=b.readByte();64==(this.from&192)&&(this.prom=CB.Piece.QUEEN+(this.to>>6));this.from&=63;this.to&=63;var d=b.readByte();
d&1&&this.Vew(b);d&2&&this.Vex(b)};c.prototype.Veu=function(b){this.annos=CB.Annotation.readFactory(b)};c.prototype.Vew=function(b){this.annos=CB.Annotation.readFactory2(b)};c.prototype.Veq=function(b){CB.Annotation.write(b,this.annos)};c.prototype.Ves=function(b){CB.Annotation.write2(b,this.annos)};c.prototype.Vev=function(b){var d=b.readByte();if(127>=d){this.subLines=Array(d);for(var e=0;e<d;++e)this.subLines[e]=CB.Vep.readFactory(b)}};c.prototype.Vex=function(b){var d=b.readByte();if(127>=d){this.subLines=
Array(d);for(var e=0;e<d;++e)this.subLines[e]=CB.Vep.readFactory2(b)}};c.prototype.Ver=function(b){var d=this.getSubLinesCount();b.writeByte(d);if(d)for(var e=0;e<d;++e)this.subLines[e].write(b)};c.prototype.Vet=function(b){var d=this.getSubLinesCount();b.writeByte(d);if(d)for(var e=0;e<d;++e)this.subLines[e].write2(b)};c.readFactory=createReadFactory(c);c.readFactory2=createReadFactory2(c);c.prototype.moveLinesTo=function(b){b.subLines=this.subLines;this.subLines=null};c.prototype.toString=function(){var b=
CB.Vbf.toString(this.from)+CB.Vbf.toString(this.to);this.prom!=CB.Piece.V5l&&(b+=CB.Piece.toString(this.prom).toLowerCase());return b};c.g_regex=/^[a-h][1-8][a-h][1-8]([NBRQ])?$/i;c.isValidString=function(b){return c.g_regex.test(b)};c.fromString=function(b){var d=b.substring(0,2),e=b.substring(2,4),d=CB.Vbf.fromString(d),e=CB.Vbf.fromString(e),c=void 0;4<b.length&&(b=b.charAt(4),c=CB.Piece.Vb3(CB.Piece.fromString(b)));return new CB.Vei(d,e,c)};c.prototype.toJSON=function(){return{from:CB.Vbf.toString(this.from),
to:CB.Vbf.toString(this.to),prom:"  Q N B R  ".split(" ")[this.prom%8]}};c.prototype.Vey=function(b){this.from=CB.Vbf.fromString(b.from);this.to=CB.Vbf.fromString(b.to);b=" KQNBR".search(RegExp(b.prom,"i"));this.prom=0<b?b:0;return{from:CB.Vbf.toString(this.from),to:CB.Vbf.toString(this.to),prom:"  Q N B R  ".split(" ")[this.prom%8]}};c.prototype.setSubParentData=function(b,d,e){if(this.subLines)for(var c=0;c<this.subLines.length;++c){var f=this.subLines[c];f.setParentMoveIndex(d);f.setParentLine(b);
e&&f.setSubParentData(!0)}};c.prototype.getAnno=function(){return this.annos};c.prototype.hasAnno=function(){return null!=this.annos};c.prototype.setAnnoItem=function(b,d){this.annos||(this.annos=new CB.Annotation);this.annos.setItem(b,d)};c.prototype.setAnno=function(b){this.annos=b};c.prototype.getAnnoItem=function(b){return this.annos?this.annos.getItem(b):null};c.prototype.deleteAnnoItem=function(b){this.annos&&this.annos.deleteItem(b)};c.prototype.Vez=function(){this.annos=null};c.prototype.unAnnotate=
function(){this.Vez();this.removeLines()};c.prototype.forAllMoves=function(b){b(this);if(this.subLines)for(var d=0;d<this.subLines.length;d++)this.subLines[d].forAllMoves(b)};return c}();"use strict";
CB.Vf0=function(){var c=function(b,d,e,c){this.from=b||0;this.to=d||0;this.type=e||0;this.prom=c||0};c.prototype.Vf1=function(b){b&&(this.from=b.from,this.to=b.to,this.prom=b.prom,this.type=void 0!==b.type?b.type:0)};c.prototype.toString=function(){return CB.Vbf.toString(this.from)+"-"+CB.Vbf.toString(this.to)+", ty="+this.type};c.prototype.fromDataBuf=function(b){this.from=b.readUint8();this.to=b.readUint8();this.type=b.readUint8();this.prom=b.readUint8()};c.prototype.V3c0=function(b){b.writeUint8(this.from);
b.writeUint8(this.to);b.writeUint8(this.type);b.writeUint8(this.prom)};return c}();"use strict";
CB.Vep=function(){var c=function(b,d){this.parent=null;this.inxMvParent=0;b&&(this.parent=b,this.inxMvParent=d)};c.prototype=[];c.prototype.Vf2=function(){return!this.parent};c.prototype.Vf3=function(){this.parent=null;this.inxMvParent=0};c.prototype.getParentLine=function(){return this.parent};c.prototype.setParentLine=function(b){this.parent=b};c.prototype.getParentMoveIndex=function(){return this.inxMvParent};c.prototype.setParentMoveIndex=function(b){this.inxMvParent=b};c.prototype.getTreeMoveCount=
function(){return this.reduce(function(b,d){return b+d.getTreeMoveCount()},0)};c.prototype.setSubParentData=function(b){this.forEach(function(d,e){d.setSubParentData(this,e,b)}.bind(this))};c.prototype.swapMoves=function(b,d){var e=[b,this.length-b];if(d)for(var c=0,f=d.length;c<f;++c)e.push(d[c]);e=this.splice.apply(this,e);this.setSubParentData();e=[0,d.length].concat(e);d.splice.apply(d,e);d.setSubParentData();d.setParentLine(this);return d};c.prototype.selfTest=function(b,d,e){CBDebug.assert(this.inxMvParent===
e);CBDebug.assert(!d||null!=this.getParentMove()&&0<=this.getParentMove().indexOfLine(this));b=ObjUtil.clone(b);e=0;for(var c=this.length;e<c;++e){var f=this[e];if(f.hasLines()){CBDebug.assert(!d||e);for(var h=f.getSubLines(),l=0;l<h.length;++l)h[l].selfTest(ObjUtil.clone(b),this,e)}b.makeMove(f)}};c.prototype.getParentMove=function(){return this.parent?this.parent[this.inxMvParent]:null};c.prototype.toString=function(){return this.join(" ")};c.readFactory=createReadFactory(c);c.readFactory2=createReadFactory2(c);
c.prototype.read=function(b){b.readArray(this,CB.Vei.readFactory);this.setSubParentData();this.Vf4()};c.prototype.read2=function(b){var d=b.readUint8();d&128&&(d=(d<<8|b.readUint8())&32767);if(0<d){if(2048<d)return!1;if(0<d){this.length=d;for(var e=0;e<d;e++){var c=new CB.Vei;c.read2(b);this[e]=c}}}else if(0>d)return!1;this.setSubParentData();this.Vf4()};c.prototype.write=function(b){this.Vf5();b.writeArray(this)};c.prototype.write2=function(b){this.Vf5();2048>=this.length&&(this.length&-128&&b.writeUint8(this.length<<
8|128),b.writeUint8(this.length&255));for(var d=0;d<this.length;d++)this[d].write2(b)};c.prototype.hasLines=function(){return this.some(function(b){return b.hasLines()})};c.prototype.Vf4=function(){for(var b=1;b<this.length;b++)if(this[b].hasAnno()&&this[b].getAnno().hasTraining()){var d=this[b].getAnno().getTraining();this[b].getAnno().setTraining(null);this[b-1].setAnnoItem(CB.AnnoType.Vf6,d)}};c.prototype.Vf5=function(){for(var b=this.length-2;0<=b;b--)if(this[b].hasAnno()&&this[b].getAnno().hasTraining()){var d=
this[b].getAnno().getTraining();this[b].getAnno().setTraining(null);this[b+1].setAnnoItem(CB.AnnoType.Vf6,d)}};c.prototype.isAnnotated=function(){return this.some(function(b){return b.hasLines()||b.hasAnno()})};c.prototype.setAnno=function(b){this.anno=b};c.prototype.getAnno=function(b){return this.anno};c.prototype.setAnnoItem=function(b,d){this.anno||(this.anno=new CB.Annotation);this.anno.setItem(b,d)};c.prototype.hasAnno=function(){return void 0!==this.anno};c.prototype.unAnnotate=function(){this.forEach(function(b){b.unAnnotate()})};
c.prototype.forAllMoves=function(b){this.forEach(function(d){d.forAllMoves(b)})};c.prototype.removeLines=function(){this.forEach(function(b){b.removeLines()})};return c}();"use strict";
CB.Vf7=function(){var c=function(b,d){this.line=void 0!=b?b:null;this.mvsToGo=void 0!=d?d:0};c.prototype.getLine=function(){return this.line};c.prototype.getMovesToGo=function(){return this.mvsToGo};c.prototype.setMovesToGo=function(b){this.mvsToGo=b};c.prototype.incMovesToGo=function(){++this.mvsToGo};c.prototype.decMovesToGo=function(){--this.mvsToGo};c.prototype.isLineEnd=function(){return this.line.length===this.mvsToGo};c.prototype.isLineStart=function(){return 0===this.mvsToGo};c.prototype.pushMove=
function(b){this.line.length=this.mvsToGo;this.line.push(b);++this.mvsToGo};c.prototype.deleteRemaining=function(){this.line.length=this.mvsToGo};c.prototype.deletePrevious=function(){this.line.splice(0,this.mvsToGo-1);this.mvsToGo=1;this.line.setSubParentData();this.line.Vf3();return this.line};c.prototype.shallowClone=function(){return new c(this.line,this.mvsToGo)};return c}();
CB.LineStack=function(){var c=function(b,d){b&&(d||(d=0),this.push(new CB.Vf7(b,d)))};c.prototype=[];c.prototype.Top=function(){return this[this.length-1]};c.prototype.shallowClone=function(){var b=new CB.LineStack;b.length=this.length;for(var d=0,e=this.length;d<e;++d)b[d]=this[d].shallowClone();return b};c.prototype.deleteRemaining=function(){this.Top()&&this.Top().deleteRemaining()};c.prototype.deletePrevious=function(){var b=this.Top(),d=b.deletePrevious();this.length=0;this.push(b);return d};
c.prototype.gotoPrev=function(){var b=this.Top();b&&(b.decMovesToGo(),1<this.length&&0===b.getMovesToGo()&&this.pop())};c.prototype.promoteLine=function(){var b=this.Top();if(b){var d=b.getLine(),e=b.getMovesToGo(),b=d.getParentLine(),c=d.getParentMoveIndex(),f=b[c],h=f.indexOfLine(d);f.removeLine(d);var l=d[0];f.moveLinesTo(l);b.swapMoves(c,d);l.insertLine(h,d);e+=c;this.pop();b=this.Top();b.setMovesToGo(e)}};c.prototype.Vf8=function(){for(var b=[],d=null,e=0,c=this.length;e<c;++e){var f=this[e],
h=f.getLine(),f=f.getMovesToGo(),l=0;d&&(l=d.indexOfLine(h));b.push({inxLine:l,mvsToGo:f});d=h[f]}return b};c.prototype.selfTest=function(){for(var b=null,d=0,e=0,c=this.length;e<c;++e){var f=this[e],h=f.getLine(),f=f.getMovesToGo();CBDebug.assert(h.getParentLine()===b);CBDebug.assert(h.getParentMoveIndex()===d);CBDebug.assert(!b||0<=h.getParentMove().indexOfLine(h));b=h;d=f}};return c}();"use strict";
CB.Position=function(){function c(b,d){this.piece=b;this.field=d}function b(b,d){return function(c){return c===b||d&&c===d}}var d=function(b){this.Vf9();b?this.Vfa(b):this.initStartPos()};d.NOEP=-1;d.prototype.copy=function(b){for(var d=0;d<this.board.length;++d)this.board[d]=b.board[d];this.sd=b.sd;this.ep=b.ep;this.cr=b.cr;this.Vfb=b;this.numPly=b.numPly};d.prototype.equals=function(b){if(!b||this.sd!=b.sd||this.ep!=b.ep||this.cr!=b.cr)return!1;for(var d=0;d<this.board.length;++d)if(this.board[d]!==
b.board[d])return!1;return!0};d.prototype.Vfc=function(b,d){return idiv(b,2)+1};d.mvToPlyNum=function(b,d){return 2*(b-1)+d};d.prototype.getMoveNum=function(){return this.Vfc(this.numPly,this.sd)};d.prototype.setMoveNum=function(b){this.numPly=d.mvToPlyNum(b,this.sd)};d.prototype.getPlyNum=function(){return this.numPly};d.prototype.initStartPos=function(){this.sd=CB.Vaz.WHITE;for(var b=CB.Vbf.Vdb;b<=CB.Vbf.Vdi;++b)this.board[CB.Vbf.Vdz(b,CB.Vbf.Vdk)]=CB.Piece.Vx,this.board[CB.Vbf.Vdz(b,CB.Vbf.Vdp)]=
CB.Piece.Vy;this.board[CB.Vbf.Vbk]=this.board[CB.Vbf.Vd3]=CB.Piece.Vr;this.board[CB.Vbf.Vbs]=this.board[CB.Vbf.Vcv]=CB.Piece.Vv;this.board[CB.Vbf.Vc0]=this.board[CB.Vbf.Vco]=CB.Piece.Vt;this.board[CB.Vbf.Vc8]=CB.Piece.Vp;this.board[CB.Vbf.Vcg]=CB.Piece.Vn;this.board[CB.Vbf.Vbr]=this.board[CB.Vbf.Vda]=CB.Piece.Vs;this.board[CB.Vbf.Vbz]=this.board[CB.Vbf.Vd2]=CB.Piece.Vw;this.board[CB.Vbf.Vc7]=this.board[CB.Vbf.Vcu]=CB.Piece.Vu;this.board[CB.Vbf.Vcf]=CB.Piece.Vq;this.board[CB.Vbf.Vcn]=CB.Piece.Vo;this.cr=
CB.Vb7.Vbe;this.numPly=this.Vfb=0};d.prototype.boardEquals=function(b){for(var d=0;64>d;d++)if(this.board[d]!=b[d])return!1;return!0};d.prototype.Vfa=function(b){b=new StringIterator(b);var c=CB.Vbf.Vdq,f=CB.Vbf.Vdb,h;for(h=b.Next();0!==h&&!Char.IsWhiteSpace(h);h=b.Next())if("/"===h)--c,f=CB.Vbf.Vdb;else if(Char.IsDigit(h))f+=Number(h);else{var l=CB.Vbf.Vdz(f,c);h=CB.Piece.fromString(h);CBDebug.assert(h!==CB.Piece.V5l);this.board[l]=h;f++}b.isEOF()||(b.skipWhile(Char.IsWhiteSpace),b.isEOF()||(this.sd=
CB.Vaz.fromString(b.Current()),b.skipWhile(Char.IsWhiteSpace),b.isEOF()||(c=b.AcceptUntil(Char.IsWhiteSpace,!0),this.cr=CB.Vb7.fromString(c),b.isEOF()||(b.skipWhile(Char.IsWhiteSpace),c=b.AcceptUntil(Char.IsWhiteSpace,!0),"-"===c?this.ep=d.NOEP:(c=CB.Vbf.fromString(c),this.ep=CB.Vbf.Ve1(c)),b.skipWhile(Char.IsWhiteSpace),c=b.AcceptUntil(Char.IsWhiteSpace,!0),this.Vfb=Number(c),b.skipWhile(Char.IsWhiteSpace),b=b.AcceptUntil(Char.IsWhiteSpace,!0),(b=Number(b))||(b=1),this.numPly=d.mvToPlyNum(b,this.sd)))))};
d.prototype.Vfd=function(b){this.Vfe();for(var d=b.length,c=!1,h=0;h<d;h++)if(("b"==b[h]||"s"==b[h])&&"K"==b[h+1]){c="s"==b[h];break}for(var l=0,q=0,h=0;h<d;h++)switch(b[h]){case "K":l=CB.Piece.KING;break;case "D":case "Q":l=CB.Piece.QUEEN;break;case "T":case "R":l=CB.Piece.ROOK;break;case "L":l=CB.Piece.BISHOP;break;case "B":l=c?CB.Piece.PAWN:CB.Piece.BISHOP;break;case "S":case "N":l=CB.Piece.KNIGHT;break;case "P":l=CB.Piece.PAWN;break;case "a":case "b":case "c":case "d":case "e":case "f":case "g":case "h":48<
b.charCodeAt(h+1)&&57>b.charCodeAt(h+1)?this.board[(b.charCodeAt(h)-97<<3)+b.charCodeAt(h+1)-49]=l|q:"b"!=b[h]||c||(q=CB.Piece.BLACK);break;case "s":c&&(q=CB.Piece.BLACK);break;case "w":q=CB.Piece.WHITE;break;case ":":this.Vff(b.slice(h+1)),h=d}0==this.cr&&(this.board[CB.Vbf.Vcg]==CB.Piece.Vn&&(this.board[CB.Vbf.Vd3]==CB.Piece.Vr?this.cr|=CB.Vb7.Vb9:this.board[CB.Vbf.Vbk]==CB.Piece.Vr&&(this.cr|=CB.Vb7.Vb8)),this.board[CB.Vbf.Vcn]==CB.Piece.Vo&&(this.board[CB.Vbf.Vda]==CB.Piece.Vs?this.cr|=CB.Vb7.Vbb:
this.board[CB.Vbf.Vbr]==CB.Piece.Vs&&(this.cr|=CB.Vb7.Vba)))};d.prototype.Vff=function(b){"b"==b[0]&&(this.sd=CB.Vaz.BLACK)};d.prototype.Vfg=function(){return this.makeMove(new CB.Vei(0,0))};d.prototype.Vfh=function(){return this.unmakeMove(new CB.Vei(0,0))};d.prototype.makeMove=function(b){if(b){var c=new CB.Vef(this,b);++this.numPly;this.sd=CB.Vaz.other(this.sd);var f=this.ep;this.ep=d.NOEP;if(b.isNullMove())return c;var h=this.board[b.from],l=this.board[b.to];this.board[b.to]=this.board[b.from];
this.board[b.from]=CB.Piece.V5l;var q=CB.Vbf.Ve0(b.from),r=CB.Vbf.Ve0(b.to),t=CB.Vbf.Ve1(b.from),w=CB.Vbf.Ve1(b.to);CB.Piece.Vb3(h)===CB.Piece.PAWN&&(w!==t&&w===f&&l===CB.Piece.V5l&&(l=CB.Piece.Vb4(h),f=CB.Vbf.Vdz(w,q),this.board[f]=CB.Piece.V5l,c.Veg(l,f)),b.prom!==CB.Piece.V5l&&(l=CB.Piece.Vb5(b.prom,CB.Piece.side(h)),this.board[b.to]=l),2===Math.abs(q-r)&&(this.ep=t));CB.Piece.Vb3(h)===CB.Piece.KING&&2===Math.abs(w-t)&&(w===CB.Vbf.Vdh?(h=CB.Vbf.Vdz(CB.Vbf.Vdi,q),q=CB.Vbf.Vdz(CB.Vbf.Vdg,q)):(h=
CB.Vbf.Vdz(CB.Vbf.Vdb,q),q=CB.Vbf.Vdz(CB.Vbf.Vde,q)),this.board[q]=this.board[h],this.board[h]=CB.Piece.V5l,c.Veh(h,q));if(this.cr){if(this.cr&CB.Vb7.Vbc)if(b.from===CB.Vbf.Vcg)this.cr&=~CB.Vb7.Vbc;else if(b.from===CB.Vbf.Vbk||b.to===CB.Vbf.Vbk)this.cr&=~CB.Vb7.Vb8;else if(b.from===CB.Vbf.Vd3||b.to===CB.Vbf.Vd3)this.cr&=~CB.Vb7.Vb9;if(this.cr&CB.Vb7.Vbd)if(b.from===CB.Vbf.Vcn)this.cr&=~CB.Vb7.Vbd;else if(b.from===CB.Vbf.Vbr||b.to===CB.Vbf.Vbr)this.cr&=~CB.Vb7.Vba;else if(b.from===CB.Vbf.Vda||b.to===
CB.Vbf.Vda)this.cr&=~CB.Vb7.Vbb}return c}};d.prototype.unmakeMove=function(b,d){!b.isNullMove()&&(this.board[b.from]=d.mvd,this.board[b.to]=CB.Piece.V5l,this.board[d.fldVct]=d.vct,d.to2||d.from2)&&(this.board[d.from2]=this.board[d.to2],this.board[d.to2]=CB.Piece.V5l);this.cr=d.cr;this.ep=d.ep;--this.numPly;this.sd=CB.Vaz.other(this.sd)};d.prototype.V3b8=function(){var b=this.Vfi();return this.filterLegals(b)};d.prototype.Vfi=function(b){for(var d=[],c=0;c<this.board.length;++c){var h=this.board[c];
h!==CB.Piece.V5l&&(b&&h!==b||CB.Piece.side(h)===this.sd&&this.Vfj(c,h,d))}return d};d.prototype.Vfk=function(b,d){d||(d=this.board[b]);var c=[];this.Vfj(b,d,c);return c};d.prototype.Vfl=function(b,d){var c=this.Vfk(b,d);return this.filterLegals(c)};d.prototype.Vfj=function(b,d,c){switch(d){case CB.Piece.Vx:case CB.Piece.Vy:this.Vfm(d,b,c);break;case CB.Piece.Vv:case CB.Piece.Vw:this.Vfn(d,b,c);break;case CB.Piece.Vt:case CB.Piece.Vu:this.Vfo(d,b,c);break;case CB.Piece.Vr:case CB.Piece.Vs:this.Vfp(d,
b,c);break;case CB.Piece.Vp:case CB.Piece.Vq:this.Vfq(d,b,c);break;case CB.Piece.Vn:case CB.Piece.Vo:this.Vfr(d,b,c)}};d.prototype.Vfs=function(b,d){return this.Vfi(d).filter(function(d){return d.to===b})};d.g_arrKnightMvs=[[2,1],[1,2],[-1,2],[-2,1],[-2,-1],[-1,-2],[1,-2],[2,-1]];d.g_arrKingMvs=[[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1],[1,-1]];d.g_arrBishopMvs=[[1,1],[-1,1],[-1,-1],[1,-1]];d.g_arrRookMvs=[[1,0],[0,1],[-1,0],[0,-1]];d.prototype.Vfn=function(b,c,f){this.Vft(b,c,d.g_arrKnightMvs,
!1,f)};d.prototype.Vfr=function(b,c,f){this.Vft(b,c,d.g_arrKingMvs,!1,f);if(b===CB.Piece.Vn){if(!(this.cr&CB.Vb7.Vbc)||this.Vfu(CB.Vbf.Vcg,CB.Vaz.BLACK))return;this.cr&CB.Vb7.Vb9&&this.board[CB.Vbf.Vco]===CB.Piece.V5l&&this.board[CB.Vbf.Vcv]===CB.Piece.V5l&&(this.Vfu(CB.Vbf.Vco,CB.Vaz.BLACK)||this.Vfu(CB.Vbf.Vcv,CB.Vaz.BLACK)||f.push(CB.Vei.g_mvW00));this.cr&CB.Vb7.Vb8&&this.board[CB.Vbf.Vc8]===CB.Piece.V5l&&this.board[CB.Vbf.Vc0]===CB.Piece.V5l&&this.board[CB.Vbf.Vbs]===CB.Piece.V5l&&(this.Vfu(CB.Vbf.Vc8,
CB.Vaz.BLACK)||this.Vfu(CB.Vbf.Vc0,CB.Vaz.BLACK)||f.push(CB.Vei.g_mvW000))}b===CB.Piece.Vo&&this.cr&CB.Vb7.Vbd&&!this.Vfu(CB.Vbf.Vcn,CB.Vaz.WHITE)&&(this.cr&CB.Vb7.Vbb&&this.board[CB.Vbf.Vcu]===CB.Piece.V5l&&this.board[CB.Vbf.Vd2]===CB.Piece.V5l&&(this.Vfu(CB.Vbf.Vcu,CB.Vaz.WHITE)||this.Vfu(CB.Vbf.Vd2,CB.Vaz.WHITE)||f.push(CB.Vei.g_mvB00)),this.cr&CB.Vb7.Vba&&this.board[CB.Vbf.Vcf]===CB.Piece.V5l&&this.board[CB.Vbf.Vc7]===CB.Piece.V5l&&this.board[CB.Vbf.Vbz]===CB.Piece.V5l&&(this.Vfu(CB.Vbf.Vcf,CB.Vaz.WHITE)||
this.Vfu(CB.Vbf.Vc7,CB.Vaz.WHITE)||f.push(CB.Vei.g_mvB000)))};d.prototype.Vfp=function(b,c,f){this.Vft(b,c,d.g_arrRookMvs,!0,f)};d.prototype.Vfo=function(b,c,f){this.Vft(b,c,d.g_arrBishopMvs,!0,f)};d.prototype.Vfq=function(b,d,c){this.Vfp(b,d,c);this.Vfo(b,d,c)};d.prototype.Vfm=function(b,d,c){var h=b===CB.Piece.Vx?1:-1,l=b===CB.Piece.Vx?CB.Vbf.Vdq:CB.Vbf.Vdj,q=CB.Vbf.Ve1(d),r=CB.Vbf.Ve0(d),t=CB.Piece.side(b),w=r+h,z=CB.Vbf.Vdz(q,w),l=w===l;this.board[z]===CB.Piece.V5l&&(l?(c.push(new CB.Vei(d,z,
CB.Piece.QUEEN)),c.push(new CB.Vei(d,z,CB.Piece.ROOK)),c.push(new CB.Vei(d,z,CB.Piece.BISHOP)),c.push(new CB.Vei(d,z,CB.Piece.KNIGHT))):(z=new CB.Vei(d,z),c.push(z)),b===CB.Piece.Vx&&r===CB.Vbf.Vdk||b===CB.Piece.Vy&&r===CB.Vbf.Vdp)&&(z=CB.Vbf.Vdz(q,r+2*h),this.board[z]===CB.Piece.V5l&&(z=new CB.Vei(d,z),c.push(z)));for(z=-1;1>=z;z+=2){var B=q+z,w=r+h;if(CB.Vbf.isLegal(B,w)){var w=CB.Vbf.Vdz(B,w),v=this.board[w];if(v!==CB.Piece.V5l&&CB.Piece.side(v)!==t)if(l)c.push(new CB.Vei(d,w,CB.Piece.QUEEN)),
c.push(new CB.Vei(d,w,CB.Piece.ROOK)),c.push(new CB.Vei(d,w,CB.Piece.BISHOP)),c.push(new CB.Vei(d,w,CB.Piece.KNIGHT));else{var y=new CB.Vei(d,w);c.push(y)}v===CB.Piece.V5l&&B===this.ep&&(v=t===CB.Vaz.WHITE?CB.Vbf.Vdn:CB.Vbf.Vdm,B=CB.Vbf.Vdz(B,v),B=this.board[B],r===v&&B===CB.Piece.Vb4(b)&&(w=new CB.Vei(d,w),c.push(w)))}}};d.prototype.Vft=function(b,d,c,h,l){b=CB.Piece.side(b);for(var q=CB.Vbf.Ve0(d),r=CB.Vbf.Ve1(d),t=0,w=c.length;t<w;++t){var z=c[t],B=r,v=q,y=h;do{B+=z[0];v+=z[1];if(!CB.Vbf.isLegal(B,
v))break;var C=CB.Vbf.Vdz(B,v),D=this.board[C];if(D!==CB.Piece.V5l)if(CB.Piece.side(D)===b)break;else y=!1;C=new CB.Vei(d,C);l.push(C)}while(y)}};d.prototype.filterLegals=function(b){var d=this;return b.filter(function(b){return!d.isSuicideMove(b)})};d.prototype.isProm=function(b,d){var c=this.sd;return this.board[b]==CB.Piece.Vb5(CB.Piece.PAWN,c)&&CB.Vbf.Ve0(d)==CB.Vbf.Ve7(c)};d.prototype.isLegalFromTo=function(b,d){var c=new CB.Vei(b,d);this.isProm(b,d)&&(c.prom=CB.Piece.QUEEN);return this.isLegalMove(c)};
d.prototype.isLegalMove=function(b){return null!=b&&(b.isNullMove()||this.Vfv(b))&&!this.isSuicideMove(b)};d.prototype.Vfv=function(b){if(null==b)return!1;var d=b.from,c=b.to;if(d===c)return!1;var h=this.board[d];if(h===CB.Piece.V5l||CB.Piece.side(h)!==this.sd)return!1;c=this.board[c];return c!==CB.Piece.V5l&&CB.Piece.side(h)===CB.Piece.side(c)?!1:this.Vfk(d,h).some(b.equals.bind(b))};d.prototype.isSuicideMove=function(b){var d=this.makeMove(b),c=this.Vfw();this.unmakeMove(b,d);return c};d.prototype.Vf9=
function(){this.board=Array(CB.Ve8.Ve9);this.Vfe()};d.prototype.Vfe=function(){for(var b=0;64>b;b++)this.board[b]=CB.Piece.V5l;this.sd=CB.Vaz.WHITE;this.cr=0;this.ep=d.NOEP;this.numPly=this.Vfb=0};d.prototype.toFEN=function(){for(var b="",c=CB.Vbf.Vdq;c>=CB.Vbf.Vdj;--c){for(var f=0,h=CB.Vbf.Vdb;h<=CB.Vbf.Vdi;++h){var l=CB.Vbf.Vdz(h,c),l=this.board[l];l===CB.Piece.V5l?++f:(0<f&&(b+=f),f=0,b+=CB.Piece.toString(l))}0<f&&(b+=f);c>CB.Vbf.Vdj&&(b+="/")}b=b+" "+CB.Vaz.toString(this.sd);b=b+" "+CB.Vb7.toString(this.cr);
b+=" ";this.ep===d.NOEP?b+="-":(c=this.getEPField(),b+=CB.Vbf.toString(c));b+=" 0 ";c=this.getMoveNum();return b+c};d.prototype.toString=d.prototype.toFEN;d.prototype.Vfx=function(){for(var b=" KQNBRP".split(""),d="",c=[],h=[],l=0;16>l;l++)c.push([0,0,0,0,0,0,0,0,0,0]),h[l]=0;for(l=0;64>l;l++){var q=this.board[l]&15;q&&16>h[q]&&(c[q][h[q]++]=l)}d+="w";for(l=1;7>l;l++)if(0<h[l]){1<l&&(d+=",");for(var q=b[l],d=d+String(q),r=0;r<h[l];r++)q=c[l][r],d+=CB.Vbf.toString(q),r<h[l]-1&&(d+=",")}d+="/b";for(l=
9;15>l;l++)if(0<h[l])for(9<l&&(d+=","),q=b[l&7],d+=String(q),r=0;r<h[l];r++)q=c[l][r],d+=CB.Vbf.toString(q),r<h[l]-1&&(d+=",");return d};d.prototype.getPiece=function(b){return this.board[b]};d.prototype.getPieces=function(){for(var b=[],d=0;d<this.board.length;++d){var f=this.board[d];f!==CB.Piece.V5l&&(f=new c(f,d),b.push(f))}return b};c.prototype.toString=function(){var b=CB.Piece.Vb3(this.piece);return CB.Piece.toString(b)+CB.Vbf.toString(this.field)};c.prototype.equals=function(b){return this.piece===
b.piece&&this.field===b.field};d.prototype.getSideToMove=function(){return this.sd};d.prototype.isWTM=function(){return this.sd===CB.Vaz.WHITE};d.prototype.isBTM=function(){return this.sd===CB.Vaz.BLACK};d.prototype.setBTM=function(b){this.sd=b?CB.Vaz.BLACK:CB.Vaz.WHITE};d.prototype.getBTM=d.prototype.isBTM;d.prototype.setCastleRights=function(b){this.cr=b};d.prototype.Vfy=function(){return this.ep===d.NOEP?-1:this.ep%8};d.prototype.getCPPEPFile=function(){return this.ep===d.NOEP?0:this.ep%8+1};d.prototype.setCPPEPFile=
function(b){this.ep=0>=b?d.NOEP:b-1};d.prototype.getEPField=function(){return this.ep===d.NOEP?-1:CB.Vbf.Vdz(this.ep,this.sd===CB.Vaz.WHITE?CB.Vbf.Vdo:CB.Vbf.Vdl)};d.prototype.getEPCol=function(){return this.ep};d.prototype.getEPVictimField=function(){return this.ep===d.NOEP?-1:CB.Vbf.Vdz(this.ep,this.sd===CB.Vaz.WHITE?CB.Vbf.Vdn:CB.Vbf.Vdm)};d.prototype.getCastleRights=function(){return this.cr};d.prototype.Vfz=function(){var b=0;this.board[CB.Vbf.Vcg]===CB.Piece.Vn&&(this.board[CB.Vbf.Vbk]===CB.Piece.Vr&&
(b|=CB.Vb7.Vb8),this.board[CB.Vbf.Vd3]===CB.Piece.Vr&&(b|=CB.Vb7.Vb9));this.board[CB.Vbf.Vcn]===CB.Piece.Vo&&(this.board[CB.Vbf.Vbr]===CB.Piece.Vs&&(b|=CB.Vb7.Vba),this.board[CB.Vbf.Vda]===CB.Piece.Vs&&(b|=CB.Vb7.Vbb));return b};d.prototype.Vg0=function(){for(var b=[],d=this.sd==CB.Vaz.WHITE?CB.Vbf.Vdn:CB.Vbf.Vdm,c=CB.Piece.Vb5(CB.Piece.PAWN,this.sd),h=CB.Piece.Vb4(c),l=CB.Vbf.Vdb;l<=CB.Vbf.Vdi;++l){var q=CB.Vbf.Vdz(l,d);this.board[q]===h&&(l>CB.Vbf.Vdb&&this.board[CB.Vbf.Vdz(l-1,d)]===c||l<CB.Vbf.Vdi&&
this.board[CB.Vbf.Vdz(l+1,d)]===c)&&b.push(l)}return b};d.prototype.Vfu=function(b,d){return 0<this.Vg1(b,d).length};d.prototype.Vg1=function(b,d){var c=[];this.Vg2(b,d,c);return c};d.prototype.Vg2=function(b,d,c){this.getPawnAttacksTo(b,d,c);this.getKnightAttacksTo(b,d,c);this.getKingAttacksTo(b,d,c);this.Vg3(b,d,c)};d.prototype.getKnightAttacksTo=function(c,g,f){this.Vg4(c,g,d.g_arrKnightMvs,b(CB.Piece.Vb5(CB.Piece.KNIGHT,g)),!1,f)};d.prototype.getKingAttacksTo=function(c,g,f){this.Vg4(c,g,d.g_arrKingMvs,
b(CB.Piece.Vb5(CB.Piece.KING,g)),!1,f)};d.prototype.getQueenAttacksTo=function(c,g,f){this.Vg4(c,g,d.g_arrBishopMvs,b(CB.Piece.Vb5(CB.Piece.QUEEN,g)),!0,f);this.Vg4(c,g,d.g_arrRookMvs,b(CB.Piece.Vb5(CB.Piece.QUEEN,g)),!0,f)};d.prototype.getPawnMovesTo=function(b,d,c){if(this.board[b]===CB.Piece.V5l){var h=CB.Vbf.Ve0(b),l=CB.Vbf.Ve1(b);if(d!==CB.Vaz.WHITE||h!==CB.Vbf.Vdj&&h!==CB.Vbf.Vdk)if(d!==CB.Vaz.BLACK||h!==CB.Vbf.Vdq&&h!==CB.Vbf.Vdp){var q=d===CB.Vaz.WHITE?-1:1;b=CB.Piece.Vb5(CB.Piece.PAWN,d);
d=d===CB.Vaz.WHITE?CB.Vbf.Vdm:CB.Vbf.Vdn;var r=CB.Vbf.Vdz(l,h+q);this.board[r]===b?c.push(r):h===d&&this.board[r]===CB.Piece.V5l&&(h=CB.Vbf.Vdz(l,h+2*q),this.board[h]===b&&c.push(h))}}};d.prototype.getBishopAttacksTo=function(c,g,f){this.Vg4(c,g,d.g_arrBishopMvs,b(CB.Piece.Vb5(CB.Piece.BISHOP,g)),!0,f)};d.prototype.getRookAttacksTo=function(c,g,f){this.Vg4(c,g,d.g_arrRookMvs,b(CB.Piece.Vb5(CB.Piece.ROOK,g)),!0,f)};d.prototype.Vg3=function(c,g,f){this.Vg4(c,g,d.g_arrRookMvs,b(CB.Piece.Vb5(CB.Piece.ROOK,
g),CB.Piece.Vb5(CB.Piece.QUEEN,g)),!0,f);this.Vg4(c,g,d.g_arrBishopMvs,b(CB.Piece.Vb5(CB.Piece.BISHOP,g),CB.Piece.Vb5(CB.Piece.QUEEN,g)),!0,f)};d.g_arrWhPawnAttks=[[1,1],[-1,1]];d.g_arrBlPawnAttks=[[1,-1],[-1,-1]];d.prototype.getPawnAttacksTo=function(c,g,f){g===CB.Vaz.WHITE?this.Vg4(c,g,d.g_arrWhPawnAttks,b(CB.Piece.Vx),!1,f):this.Vg4(c,g,d.g_arrBlPawnAttks,b(CB.Piece.Vy),!1,f)};d.prototype.Vg4=function(b,d,c,h,l,q){var r=CB.Vbf.Ve0(b);b=CB.Vbf.Ve1(b);for(var t=0,w=c.length;t<w;++t){var z=c[t],B=
b,v=r,y=l;do{B-=z[0];v-=z[1];if(!CB.Vbf.isLegal(B,v))break;var C=CB.Vbf.Vdz(B,v),D=this.board[C];if(D!==CB.Piece.V5l){if(CB.Piece.side(D)!==d)break;else y=!1;h(D)&&q.push(C)}}while(y)}};d.prototype.Vg5=function(b){b=CB.Piece.Vb5(CB.Piece.KING,b);return this.board.indexOf(b)};d.prototype.isCheck=function(){var b=this.Vg5(this.sd),d=CB.Vaz.other(this.sd);return this.Vfu(b,d)};d.prototype.Vfw=function(){var b=CB.Vaz.other(this.sd),b=this.Vg5(b);return this.Vfu(b,this.sd)};d.prototype.isMate=function(){return this.isCheck()?
!this.hasLegals():!1};d.prototype.Vg6=function(){return this.isCheck()?!1:!this.hasLegals()};d.prototype.swapSide=function(){return this.isCheck()||this.isMate()||this.Vg6()?!1:(this.makeMove(new CB.Vei),!0)};d.prototype.hasLegals=function(){return 0<this.V3b8().length};d.prototype.getVictim=function(b){var d=this.board[b.to];return d!==CB.Piece.V5l?d:CB.Piece.Vb3(this.board[b.from])===CB.Piece.PAWN&&CB.Vbf.Ve1(b.from)!==CB.Vbf.Ve1(b.to)?(b=CB.Vbf.Vdz(CB.Vbf.Ve1(b.to),CB.Vbf.Ve0(b.from)),this.board[b]):
CB.Piece.V5l};d.prototype.isTake=function(b){return tgis.getVictim(b)!==CB.Piece.V5l};d.prototype.Vg7=function(b){var d=b.from,c=this.board[d],h={needCol:!1,needRow:!1},l=CB.Piece.Vb3(c);if(l===CB.Piece.PAWN||l===CB.Piece.KING)return h;for(var q=[],r=0;r<CB.Ve8.Ve9;++r)this.board[r]===c&&r!==d&&q.push(r);if(!q.length||l===CB.Piece.BISHOP&&q.every(function(b){return CB.Vbf.Ve5(b)!==CB.Vbf.Ve5(d)}))return h;for(var r=l=!0,t=!1,w=0,z=q.length;w<z;++w){var B=q[w];this.Vfk(B,c).some(function(d){return d.to===
b.to})&&(t=!0,l&=CB.Vbf.Ve1(B)!==CB.Vbf.Ve1(d),r&=CB.Vbf.Ve0(B)!==CB.Vbf.Ve0(d))}t&&(h.needCol=l||!r,h.needRow=!l);return h};d.prototype.preCalcCtx=function(b){this.Vg8(b);if(!b.isNullMove()){var d=this.Vg7(b);b.setNeedCol(d.needCol);b.setNeedRow(d.needRow)}};d.prototype.Vg8=function(b){if(b.isNullMove())b.setMoved(CB.Piece.Vb5(CB.Piece.PAWN,this.sd)),b.setVictim(CB.Piece.V5l);else{b.setMoved(this.board[b.from]);var d=this.getVictim(b);b.setVictim(d);b.setIsCastling()}};d.prototype.postCalcCtx=function(b,
d){if(b.isNullMove())b.setCheck(!1);else{var c=this.isCheck();b.setCheck(c);c&&d&&b.setMate(!this.hasLegals())}};d.prototype.read=function(b){this.board=b.readByteArray(CB.Ve8.Ve9);this.sd=b.readInt();this.ep=b.readByte()-1;this.cr=b.readByte();this.numPly=0};d.prototype.write=function(b){b.writeByteArray(this.board,CB.Ve8.Ve9);b.writeInt(this.sd);b.writeByte(this.ep+1);b.writeByte(this.cr)};d.prototype.copyTo=function(b){b.sd=this.sd;b.ep=this.ep;b.cr=this.cr;for(var d=0;64>d;d++)b.board[d]=this.board[d]};
d.packBoard=function(b){for(var d=Array(32),c=0,h=d.length;c<h;++c)d[c]=b[2*c]|b[2*c+1]<<4;return d};d.unpackBoard=function(b){for(var d=Array(2*b.length),c=0,h=b.length;c<h;++c)d[2*c]=b[c]&15,d[2*c+1]=b[c]>>4;return d};d.prototype.Vg9=function(b,d){for(var c=0;c<this.board.length;c++)CB.Piece.side(this.board[c])==d&&(b[c]=this.board[c])};d.prototype.setEquals=function(b){for(var d=0;d<this.board.length;d++)if(this.board[d]!=b.board[d])return!1;return this.sd!=b.sd||this.ep!=b.ep||this.cr!=b.cr?!1:
!0};d.prototype.setGreater=function(b){for(var d=0;d<this.board.length;d++)if(this.board[d]!=b.board[d])return this.board[d]>b.board[d];return this.sd!=b.sd?this.sd>b.sd:this.ep!=b.ep?this.ep>b.ep:this.cr!=b.cr?this.cr>b.cr:!1};d.prototype.Vga=function(b){var d=new CB.Ve8;d.copyFrom(this.board);d.Ved().forEach(void 0!==b?b:function(b){});d="s="+this.sd+", ep="+this.ep+", cr="+this.cr;void 0!==b&&b(d)};d.prototype.isLegal=function(){var b=this.getPieces();if(32<b.length||2>b.length)return!1;for(var d=
Array(CB.Piece.Vy+1),c=0;c<d.length;++c)d[c]=0;for(c=0;c<b.length;++c){var h=b[c];++d[h.piece];if(CB.Piece.Vb3(h.piece)===CB.Piece.PAWN&&(h=CB.Vbf.Ve0(h.field),h==CB.Vbf.Vdj||h==CB.Vbf.Vdq))return!1}return 1!==d[CB.Piece.Vn]||1!==d[CB.Piece.Vo]||8<d[CB.Piece.Vx]||8<d[CB.Piece.Vy]?!1:!0};d.prototype.Vgb=function(b){if(b.length!=this.board.length)return!1;for(var d=0;d<this.board.length;d++)if(this.board[d]!=b[d])return!1;return!0};d.prototype.Vgc=function(b){for(var d=[],c=0;c<this.board.length;c++)this.board[c]==
b&&d.push(c);return d};return d}();"use strict";
CB.Annotation=function(){var c=function(){};c.prototype={};c.Vgd="[#]";c.prototype.toString=function(){var b="",d;for(d in this)this.hasOwnProperty(d)&&(b+=this[d].toString());return b};c.prototype.Vge=function(b,d){for(var c=0;c<d;++c){var g=b.readShort(),f=AnnoRec.readHeader(b);CBDebug.assert(f.len===g,"LEN OK");f.len-=AnnoRec.ANNO_HEAD_SIZE;(g=AnnoFactory.factory(f.type))?(g.read(f.len,b),this.setItem(f.type,g)):b.skip(f.len)}return this};c.prototype.Vgf=function(b,d){this.Vge(b,d);return this};
c.prototype.write=function(b){var d=0,c;for(c in this)this.hasOwnProperty(c)&&d++;b.writeShort(d);for(c in this)this.hasOwnProperty(c)&&this[c].write(b,c)};c.prototype.write2=function(b){var d=[],c;for(c in this)this.hasOwnProperty(c)&&d.push(c);var g=b.getPos();b.writeByte(0);var f=0;for(c=0;c<d.length;c++)this[d[c]].write&&(this[d[c]].write(b,d[c]),f++);d=b.getPos();b.setPos(g);b.writeByte(f);b.setPos(d)};c.write=function(b,d){d?d.write(b):b.writeShort(0)};c.write2=function(b,d){d?d.write2(b):b.writeByte(0)};
c.prototype.read=function(b){var d=b.readShort();this.Vge(b,d)};c.prototype.read2=function(b){var d=b.readByte();d&&this.Vgf(b,d)};c.prototype.fromDataBuf=c.prototype.read;c.prototype.V3c0=c.prototype.write;c.readFactory=function(b){var d=b.readShort();return d?(new CB.Annotation).Vge(b,d):null};c.readFactory2=function(b){var d=b.readUint8();return d?(new CB.Annotation).Vgf(b,d):null};c.prototype.empty=function(){for(var b in this)if(this.hasOwnProperty(b))return!1;return!0};c.prototype.count=function(){var b=
0,d;for(d in this)this.hasOwnProperty(d)&&b++;return b};c.prototype.setItem=function(b,d){this[b]=d};c.prototype.hasItem=function(b){return!!this[b]};c.prototype.getItem=function(b){return this[b]};c.prototype.deleteItem=function(b){delete this[b]};c.prototype.Vgg=function(b){this[CB.AnnoType.Vgh]=new CB.Vgi(b)};c.prototype.addPostText=function(b){this[CB.AnnoType.Vgj]&&this[CB.AnnoType.Vgj].m_str.length?this[CB.AnnoType.Vgj].addText(" "+b):this[CB.AnnoType.Vgj]=new CB.Vgi(b)};c.prototype.Vgk=function(){if(this[CB.AnnoType.Vgj]&&
this[CB.AnnoType.Vgj].m_str.length)return-1!=this[CB.AnnoType.Vgj].m_str.search("[#]")};c.prototype.toggleDiagram=function(){this[CB.AnnoType.Vgj]&&this[CB.AnnoType.Vgj].m_str.length?-1!=this[CB.AnnoType.Vgj].m_str.search("[#]")?(this[CB.AnnoType.Vgj].m_str=this[CB.AnnoType.Vgj].m_str.replace("[#]",""),this[CB.AnnoType.Vgj].m_str.length||delete this[CB.AnnoType.Vgj]):this[CB.AnnoType.Vgj].m_str+="[#]":this[CB.AnnoType.Vgj]=new CB.Vgi("[#]")};c.prototype.Vgl=function(){};c.prototype.Vgm=function(){return this.hasItem(CB.AnnoType.Vgh)};
c.prototype.Vgn=function(){if(this.Vgm())return this[CB.AnnoType.Vgh].getString()};c.prototype.getPostText=function(){if(this.Vgo())return this[CB.AnnoType.Vgj].getString()};c.prototype.Vgo=function(){return this.hasItem(CB.AnnoType.Vgj)};c.prototype.addSymbol=function(b){this[CB.AnnoType.Vgp]||(this[CB.AnnoType.Vgp]=new CB.Vgq);this[CB.AnnoType.Vgp].addSymbol(b)};c.prototype.Vgr=function(){return void 0!==this[CB.AnnoType.Vgp]};c.prototype.Vgs=function(){return this.hasItem(CB.AnnoType.SQUARE_LIST)};
c.prototype.Vgt=function(){return this.hasItem(CB.AnnoType.ARROW_LIST)};c.prototype.hasTraining=function(){return this.hasItem(CB.AnnoType.Vf6)};c.prototype.getTraining=function(){return this[CB.AnnoType.Vf6]};c.prototype.setTraining=function(b){b?this[CB.AnnoType.Vf6]=b:delete this[CB.AnnoType.Vf6]};return c}();"use strict";
CB.Vgu={Vgv:-1,BLACK_WINS:0,DRAW:1,WHITE_WINS:2,Vgw:3,Vgx:3,Vgy:3,isFinished:function(c){return c>=this.BLACK_WINS&&c<=this.WHITE_WINS},toString:function(c){switch(c){case this.Vgv:return lm.IN_PROGRESS;case this.WHITE_WINS:return"1\u20130";case this.BLACK_WINS:return"0\u20131";case this.DRAW:return"\u00bd\u2013\u00bd";case this.Vgx:return"";default:return""}},fromString:function(c){switch(c){case "\u00bd\u2013\u00bd":case "1/2-1/2":case "1/2":return this.DRAW;case "1\u20130":case "1-0":return this.WHITE_WINS;
case "0\u20131":case "0-1":return this.BLACK_WINS}}};CB.Vgz=function(){var c=function(b){this.n=b};c.prototype.isFinished=function(){return CB.Vgu.isFinished(this.n)};c.prototype.toString=function(){return CB.Vgu.toString(this.n)};c.prototype.toPGNString=function(){switch(this.n){default:return"*";case CB.Vgu.WHITE_WINS:return"1-0";case CB.Vgu.BLACK_WINS:return"0-1";case CB.Vgu.DRAW:return"1/2-1/2"}};return c}();
CB.Vh0=function(){var c=function(){this.white=new CB.PlayerData;this.black=new CB.PlayerData;this.event=new CB.EventData;this.player=[this.white,this.black];this.result=CB.Vgu.Vgw;this.clockParams=null};c.prototype.annotator="";c.prototype.round=0;c.prototype.subRound=0;c.prototype.board=0;c.prototype.eco="";c.prototype.result=CB.Vgu.Vgw;c.prototype.eloWh=0;c.prototype.eloBl=0;c.prototype.date=new CB.Date;c.prototype.clockParams=null;c.prototype.getStrPlayers=function(b,d){var c=this.white.getListStr(d||
0),g=this.black.getListStr(d||0);g&&g.length&&(b?(0<this.eloWh&&(c+=" ("+this.eloWh+")"),c=c+" - "+g,0<this.eloBl&&(c+=" ("+this.eloBl+")")):c=c+"-"+g);return c};c.prototype.toString=function(){var b=this.event.toString(),d=this.date.toLocaleString(),c=this.getStrPlayers(!0,999);b&&(c+=", "+b);d&&(c+=" "+d);return c};c.prototype.getWhite=function(){return this.white.toString()};c.prototype.getClockParams=function(){return this.clockParams};c.prototype.Vh1=function(b){this.clockParams=b};c.prototype.Vh2=
function(b){this.white.init(b)};c.prototype.getBlack=function(){return this.black.toString()};c.prototype.Vh3=function(b){this.black.init(b)};c.prototype.Vh4=function(){return this.eco};c.prototype.Vh5=function(b){this.eco=b};c.prototype.getEvent=function(){return this.event.event};c.prototype.Vh6=function(b){this.event.event=b};c.prototype.getAnnotator=function(){return this.annotator};c.prototype.Vh7=function(b){this.annotator=b};c.prototype.getSite=function(){return this.event.site};c.prototype.Vh8=
function(b){this.event.site=b};c.prototype.isDefined=function(){return this.getWhite()||this.getBlack()};c.prototype.getResult=function(){return this.result};c.prototype.getCBResult=function(){return new CB.Vgz(this.result)};c.prototype.setResult=function(b){var d=this.result;this.result="undefined"!=typeof b?b:CB.Vgu.Vgw;return d};c.prototype.Vh9=function(b){b&&(b=b.split("."),this.round=parseInt(b[0],10),1<b.length&&(this.subRound=parseInt(b[1],10)))};c.prototype.getRoundStr=function(){var b="";
this.round&&(b=""+this.round,this.subRound&&(b=b+"."+this.subRound));return b};c.prototype.getEloWhite=function(){return this.eloWh};c.prototype.Vha=function(b){this.eloWh=b};c.prototype.getEloBlack=function(){return this.eloBl};c.prototype.Vhb=function(b){this.eloBl=b};c.prototype.Vhc=function(){return Math.max(this.eloWh,this.eloBl)};c.prototype.Vhd=function(b){this.date=CB.Date.fromPGNString(b)};c.prototype.Vhe=function(){return this.date.toLocaleString()};c.prototype.getDateStr=function(){return this.date.toPGNString()};
c.prototype.setDeleted=function(b){this.flags=(this.deleted=b)?this.flags|1:this.flags&-2};c.prototype.read=function(b){this.white=CB.PlayerData.readFactory(b);this.black=CB.PlayerData.readFactory(b);try{this.event=CB.EventData.readFactory(b);CB.SourceData.readFactory(b);this.annotator=CB.AnnotatorData.readFactory(b).name;this.eloWh=b.readShort();this.eloBl=b.readShort();this.Vhf=b.V3bv();this.eco=CB.Vh0.Vhg(this.Vhf);this.result=CB.Vh0.Vhh(b);this.date=new CB.Date;var d=b.readInt();this.date.V5e(d);
this.plyCount=b.readShort();this.round=b.readByte();this.subRound=b.readByte();b.readInt();b.readInt();b.skipSizedRead()}catch(c){return console.log(c),!1}return!0};c.prototype.compactFromDataBuf=function(b){b.beginSizedRead();this.eType=b.V3c2();this.nGame=b.V3c1();this.white=CB.PlayerData.readFactory(b);this.black=CB.PlayerData.readFactory(b);this.event=CB.EventData.readFactory(b);this.eloWh=b.V3c2();this.eloBl=b.V3c2();this.result=CB.Vh0.Vhh(b);this.date=new CB.Date;this.date.fromDataBuf(b);this.plyCount=
b.V3c2();this.round=b.readByte();this.subRound=b.readByte();b.V3bx();b.V3bx();this.Vhf=b.V3bv();this.eco=CB.Vh0.Vhg(this.Vhf);this.flags=b.V3bv();this.deleted=!!(this.flags&1);b.endSizedRead()};c.prototype.compactToDataBuf=function(b){b.beginSizedWrite();void 0!==this.eType?b.V3bw(this.eType):b.V3bw(1);void 0!==this.nGame?b.V3by(this.nGame):b.V3by(0);this.white.write(b);this.black.write(b);this.event.write(b);b.writeShort(this.eloWh);b.writeShort(this.eloBl);c.Vhj(this.result,b);void 0===this.date&&
(this.date=new CB.Date(0));this.date.V3c0(b);this.plyCount?b.V3bw(this.plyCount):b.V3bw(0);b.writeByte(this.round);b.writeByte(this.subRound);b.V3bi(0);b.V3bi(0);this.Vhf?b.V3bj(this.Vhf):b.V3bj(0);void 0===this.flags&&(this.flags=0);this.deleted&&(this.flags|=1);b.V3bj(this.flags);b.endSizedWrite()};c.prototype.write=function(b){this.white.write(b);this.black.write(b);this.event.write(b);(new CB.SourceData).write(b);(new CB.AnnotatorData(this.annotator)).write(b);b.writeShort(this.eloWh);b.writeShort(this.eloBl);
b.writeShort(0);c.Vhj(this.result,b);b.writeInt(0);this.plyCount?b.writeShort(this.plyCount):b.writeShort(0);b.writeByte(this.round);b.writeByte(this.subRound);b.writeInt(0);b.writeInt(0);b.beginSizedWrite();b.endSizedWrite()};c.Vhh=function(b){var d=b.readByte();b.readByte();b.readByte();return d};c.Vhj=function(b,d){d.writeByte(b);d.writeByte(0);d.writeByte(0)};c.Vhg=function(b){var d,c;d=b>>7;if(0<d&&500>=d){if(d--,c=String.fromCharCode("A".charCodeAt()+d/100)[0],d%=100,c+=String.fromCharCode("0".charCodeAt()+
d/10)[0],c+=String.fromCharCode("0".charCodeAt()+d%10)[0],d=b&127)c+="/",100<=d?c+="99":(c+=String.fromCharCode("0".charCodeAt()+d/10)[0],c+=String.fromCharCode("0".charCodeAt()+d%10)[0])}else c="";return c};c.prototype.toJson=function(){return{gameNo:this.nGame,white:this.white.getListStr(1),black:this.black.getListStr(1),event:this.event.event,date:this.date.getYear(),result:CB.Vgu.toString(this.result),elow:this.eloWh,elob:this.eloBl,eco:this.eco,round:this.round,subRound:this.subRound,plyCount:this.plyCount,
flags:this.flags}};c.prototype.matchesFilterVal=function(b){return-1!=this.white.last.search(b)||-1!=this.black.last.search(b)||-1!=this.event.site.search(b)||-1!=this.event.event.search(b)?!0:!1};return c}();
CB.PlayerData=function(){var c=function(b,d){this.first=b?b:"";this.last=d?d:""};c.prototype.toString=function(){return this.first&&this.first.length&&this.last&&this.last.length?String.formatEx("{last}, {first}",this):this.last||this.first};c.prototype.getListStr=function(b){return b&&this.first&&this.last&&this.first.length&&this.last.length?this.last+","+this.first.substr(0,b):this.last||this.first};c.Vhk=!0;c.Vhl=!1;c.prototype.init=function(b){if(c.Vhk){var d=b.split(",");if(2===d.length){this.first=
d[1].trim();this.last=d[0].trim();return}}if(c.Vhl&&(d=b.split(" "),1<d.length)){this.first=d[0];this.last=d.slice(1).join(" ");return}this.last=b;this.first=""};c.create=function(b){var d=new c;d.init(b);return d};c.prototype.read=function(b){this.last=b.readByteLenASCIIString(50);this.first=b.readByteLenASCIIString(50);this.last=this.last.trim();this.first=this.first.trim()};c.readFactory=createReadFactory(c);c.prototype.write=function(b){b.writeByteLenASCIIString(this.last);b.writeByteLenASCIIString(this.first)};
return c}();
CB.EventData=function(){var c=function(){this.event=this.site="";this.rounds=this.flags=this.Vhm=this.nation=this.type=this.Vhi=0};c.prototype.read=function(b){this.site=b.readByteLenASCIIString(100);this.event=b.readByteLenASCIIString(100);this.Vhi=b.readInt();this.type=b.readShort();this.nation=b.readShort();this.Vhm=b.readByte();this.flags=b.readByte();this.rounds=b.readShort()};c.readFactory=createReadFactory(c);c.prototype.write=function(b){b.writeByteLenASCIIString(this.site);b.writeByteLenASCIIString(this.event);b.writeInt(this.Vhi);
b.writeShort(this.type);b.writeShort(this.nation);b.writeByte(this.Vhm);b.writeByte(this.flags);b.writeShort(this.rounds)};c.prototype.toString=function(){var b=this.event;this.site&&this.event&&this.site!=this.event&&(b+=" ");this.site!=this.event&&(b+=this.site);return b};return c}();
CB.SourceData=function(){var c=function(){this.Vhn=this.source="";this.Vhq=this.version=this.Vhp=this.Vho=0};c.prototype.read=function(b){this.source=b.readByteLenASCIIString(100);this.Vhn=b.readByteLenASCIIString(100);this.Vho=b.readInt();this.Vhp=b.readInt();this.version=b.readByte();this.Vhq=b.readByte()};c.readFactory=createReadFactory(c);c.prototype.write=function(b){b.writeByteLenASCIIString(this.source);b.writeByteLenASCIIString(this.Vhn);b.writeInt(this.Vho);b.writeInt(this.Vhp);b.writeByte(this.version);
b.writeByte(this.Vhq)};return c}();
CB.TeamData=function(){var c=function(){this.team="";this.nation=this.Vhr=this.num=0};c.prototype.toString=function(){return this.num?String.formatEx("{team} {num}",this):this.team};c.prototype.read=function(b){this.team=b.readByteLenASCIIString(100);this.num=b.readShort();this.Vhr=b.readByte();this.nation=b.readByte()};c.readFactory=createReadFactory(c);c.prototype.write=function(b){b.writeByteLenASCIIString(this.team);b.writeShort(this.num);b.writeByte(this.Vhr);b.writeByte(this.nation)};return c}();
CB.AnnotatorData=function(){var c=function(b){this.name="";b&&(this.name=b)};c.prototype.toString=function(){return this.name};c.prototype.read=function(b){this.name=b.readByteLenASCIIString(100)};c.readFactory=createReadFactory(c);c.prototype.write=function(b){b.writeByteLenASCIIString(this.name)};return c}();"use strict";CB.Vhs={V1o:-1,Vht:-64,Vhu:63,Vhv:64,Vhw:128,Vhx:256,Vhy:512,Vhz:1024,Vi0:2048,Vi1:4096};
CB.Game=function(){var c=function(b,d){b||(b=new CB.Position);this.start=b;d||(d=new CB.Vep);this.mainLine=d;this.stk=new CB.LineStack(this.mainLine);this.hdr=new CB.Vh0;this.initPost()};c.prototype.start=null;c.prototype.cur=null;c.prototype.mainLine=null;c.prototype.stk=null;c.prototype.hdr=null;c.prototype.init=function(b,d){c.call(this,b,d);this.fireOnChanged();this.fireOnHeaderChanged()};c.prototype.initPost=function(){this.cur=ObjUtil.clone(this.start);c.Vi2(this.start,this.mainLine)};c.prototype.assign=
function(b,d){this.start=b.start;this.cur=b.cur;this.mainLine=b.mainLine;this.stk=b.stk;this.hdr=b.hdr;this.replaceGameNo=b.replaceGameNo;this.replaceDBId=b.replaceDBId;d||(this.fireOnResetGame(),this.fireOnCurPosChanged(),this.fireOnChanged(),this.fireOnHeaderChanged())};c.prototype.getMoves=function(){return this.mainLine};c.prototype.setMoves=function(b){this.mainLine=b};c.prototype.getMainLine=c.prototype.getMoves;c.prototype.getCurPos=function(){return this.cur};c.prototype.getStartPos=function(){return this.start};
c.prototype.isNormalInit=function(){var b=new CB.Position;return ObjUtil.equals(this.start,b)};c.prototype.getNextMove=function(){var b=this.stk.Top();if(b){if(b.isLineEnd())return null;var d=b.getLine(),b=b.getMovesToGo();return d[b]}return null};c.prototype.getLastMove=function(){var b=this.stk.Top();if(!b||b.isLineStart())return null;var d=b.getLine(),b=b.getMovesToGo();return d[b-1]};c.prototype.getPreviousMove=c.prototype.getLastMove;c.Vi2=function(b,d){for(var e=ObjUtil.clone(b),g=0,f=d.length;g<
f;++g){var h=d[g];e.preCalcCtx(h);if(h.hasLines())for(var l=h.getSubLines(),q=0,r=l.length;q<r;++q)c.Vi2(e,l[q]);e.makeMove(h);e.postCalcCtx(h,g===d.length-1)}};c.prototype.reset=function(){c.apply(this);this.fireOnCurPosChanged();this.fireOnChanged();this.fireOnHeaderChanged()};c.prototype.setResult=function(b){this.hdr.setResult(b);this.fireOnChanged();this.fireOnHeaderChanged()};c.prototype.getResult=function(){return this.hdr.getResult()};c.prototype.getTopItem=function(){return this.stk.Top()};
c.prototype.getTopLine=function(){if(this.stk.Top())return this.stk.Top().getLine()};c.prototype.Vi3=function(){if(this.stk.Top())return this.stk.Top().getMovesToGo()};c.prototype.isLineEnd=function(){return this.stk.Top()?this.stk.Top().isLineEnd():!1};c.prototype.isOnMainLine=function(){return 1===this.stk.length};c.prototype.isGameStart=function(){return 1===this.stk.length&&this.stk[0].isLineStart()};c.prototype.Vi4=function(){return 1===this.stk.length&&this.stk[0].isLineEnd()};c.prototype.getStackPos=
function(b){for(var d=ObjUtil.clone(this.start),c=0,g=b.length;c<g;++c)for(var f=b[c],h=f.getLine(),f=f.getMovesToGo(),l=0;l<f;++l)d.makeMove(h[l]);return d};c.prototype.Vi5=function(b,d){var e=c.getStackForLine(b,d);return this.getStackPos(e)};c.prototype.setStack=function(b){this.stk=b;0<this.stk.length&&(this.mainLine=this.stk[0].line);this.cur=this.getStackPos(this.stk)};c.prototype.Vf8=function(){return this.stk.Vf8()};c.prototype.getHeader=function(){return this.hdr};c.prototype.setHeader=function(b){this.hdr=
b};c.prototype.getGameNo=function(){return this.hdr.nGame};c.prototype.requiresPremiumForDownload=function(){var b=0;this.forAllMoves(function(d){b++});return b>2*this.getMainLine().length?5<this.hdr.annotator.length:!1};c.prototype.selfTest=function(){CBDebug.call(this.stk,this.stk.selfTest);CBDebug.call(this.mainLine,this.mainLine.selfTest,this.start,null,0)};c.prototype.Vi6=function(b){return this.stk.length};c.prototype.Vi7=function(b,d){this.Vi8(d)};c.prototype.isOnLastMove=function(){return this.getMoveIndex()==
this.mainLine.length};c.prototype.getPlyNum=function(){return this.getCurPos().getPlyNum()};c.prototype.getMoveNo=c.prototype.getPlyNum;c.prototype.getAnno=function(b){if(this.getLastMove())return this.getLastMove().getAnnoItem(b);if(this.mainLine.anno)return this.mainLine.anno.getItem(b)};c.prototype.setAnno=function(b,d){this.getLastMove()&&(this.getLastMove().setAnnoItem(b,d),this.fireOnChanged())};c.prototype.setAnnoBeforeFirstMove=function(b,d,c){this.mainLine.anno||(this.mainLine.anno=new CB.Annotation);
this.mainLine.anno.setItem(b,d);c||this.fireOnChanged()};c.prototype.getOrCreateCurrAnno=function(){if(this.getPreviousMove())return this.getPreviousMove().hasAnno()||this.getPreviousMove().setAnno(new CB.Annotation),this.getPreviousMove().getAnno();this.getMoves().hasAnno()||this.getMoves().setAnno(new CB.Annotation);return this.getMoves().getAnno()};c.prototype.updateFromExtern=function(){this.fireOnChanged();this.fireOnCurPosChanged()};c.prototype.Vi9=function(){this.fireOnHeaderChanged()};c.prototype.Via=
function(b,d){for(var c=this.getCurLine(),g=0;g<c.length;g++)c[g]&&(b?c[g].deleteAnnoItem(b):c[g].setAnno(null));d||this.fireOnChanged()};c.prototype.deleteAnno=function(b,d){this.getLastMove()&&(this.getLastMove().deleteAnnoItem(b),d||this.fireOnAnnoChanged())};c.prototype.getEvaluationProfile=function(){if(this.mainLine.anno&&this.mainLine.anno[CB.AnnoType.Vib])return this.mainLine.anno[CB.AnnoType.Vib];var b=this.getCurLine();if(b.length&&b[0].annos)return b[0].annos[CB.AnnoType.Vib]};c.prototype.Vic=
function(b){this.mainLine.anno||(this.mainLine.anno=new CB.Annotation);b=b||new CB.EvalProfileAnno;return this.mainLine.anno[CB.AnnoType.Vib]=b};c.prototype.Vid=function(){this.mainLine.anno&&delete this.mainLine.anno[CB.AnnoType.Vib]};c.prototype.toString=function(){for(var b=new CB.Vie(CB.V3b2),d=this.hdr.toString(),d=d+"\r\n",c=0;c<this.mainLine.length;c++){var g=b.getMoveNota(this.mainLine[c]),f=b.getStrMoveNumInLine(c,this.getStartPos().getPlyNum()),d=d+(f+g);c<this.mainLine.length-1&&(d+=" ")}return d+=
" "+this.hdr.getCBResult().toString()};c.prototype.onSync=function(b){if(V3c6.panelMgr&&V3c6.panelMgr.onSync)V3c6.panelMgr.onSync(b)};c.Vif=function(){return new CB.Game};c.prototype.delayChangedEvents=function(b){this.delayfireOnCurPosChanged(b);this.delayfireOnChanged(b);this.delayfireOnHeaderChanged(b);this.delayfireOnAnnoChanged(b)};c.prototype.continueChangedEvents=function(){this.continuefireOnCurPosChanged();this.continuefireOnChanged();this.continuefireOnHeaderChanged();this.continuefireOnAnnoChanged()};
V3bf.initForListeners(c);V3bf.addEvent(c,"CurPosChanged",function(){return[this,this.getCurPos()]});V3bf.addEvent(c,"Navigate",function(){return[this]});V3bf.addEvent(c,"Move",function(){return[this,this.getLastMove()]});V3bf.addEvent(c,"Changed");V3bf.addEvent(c,"HeaderChanged");V3bf.addEvent(c,"AnnoChanged");V3bf.addEvent(c,"ResetGame");V3bf.addEvent(c,"GameEnd",function(){return[this,this.getResult()]});V3bf.addEvent(c,"ClickInNotation");V3bf.addEvent(c,"NotaDoubleClick");V3bf.addEvent(c,"Eval");
return c}();
(function(c){c.prototype.jump=function(b){b=this.getMoveIndex()+b;1>b&&(b=1);b>this.mainLine.length&&(b=this.mainLine.length);this.gotoIndex(b);this.fireOnNavigate();this.fireOnCurPosChanged()};c.prototype.gotoFirst=function(){this.gotoIndex(0)};c.prototype.gotoLast=function(){this.gotoIndex(this.mainLine.length)};c.prototype.gotoIndex=function(b,e){var g=c.getStackForIndex(this.mainLine,b);this.gotoStack(g,e)};c.prototype.gotoLine=function(b,e){var g=c.getStackForLine(b,e);this.gotoStack(g)};c.prototype.gotoSimplePath=
function(b){for(var c=this.mainLine,g=new CB.LineStack,f=0,h=b.length;f<h;++f){var l=b[f],q=new CB.Vf7(c,l.mvsToGo);g.push(q);f<h-1&&(c=c[l.mvsToGo].getLine(l.inxLine))}this.gotoStack(g)};c.prototype.triggerOnClickInNotation=function(){this.fireOnClickInNotation()};c.prototype.gotoNext=function(){if(!this.isLineEnd()){var b=this.getNextMove();this.cur.makeMove(b);(b=this.getTopItem())&&b.incMovesToGo();this.fireOnCurPosChanged();this.fireOnNavigate()}};c.prototype.gotoPrev=function(b){if(!this.isGameStart()){var c=
this.stk;c.gotoPrev();this.gotoStack(c,b)}};c.prototype.gotoPrevClone=function(){if(!this.isGameStart()){var b=ObjUtil.clone(this.stk);b.gotoPrev();this.gotoStack(b)}};c.prototype.gotoStart=function(){this.gotoIndex(1);this.fireOnCurPosChanged();this.fireOnNavigate()};c.prototype.gotoEnd=function(){this.gotoIndex(this.mainLine.length);this.fireOnCurPosChanged();this.fireOnNavigate()};c.prototype.gotoStack=function(b,c){this.setStack(b);c||(this.fireOnCurPosChanged(),this.fireOnNavigate())};c.prototype.gotoMove=
function(b,c){var g=this.getNextMove();return g?b.equals(g)?(b.mvd=g.mvd,this.gotoNext(),c&&this.fireOnMove(),!0):(g=g.findLine(b))?(this.gotoLine(g,1),c&&this.fireOnMove(),!0):!1:!1};c.prototype.getMoveOffs=function(){return this.cur.numPly-this.start.numPly};c.prototype.getMoveIndex=function(){var b=0;if(0<this.stk.length)for(var b=this.stk[this.stk.length-1],c=b.getLine(),b=b.getMovesToGo(),g=this.stk.length-2;0<=g;--g){var f=this.stk[g].getLine(),h=c.getParentMoveIndex(),l=f[h],q=l.indexOfLine(c);
CBDebug.assert(0<=q,"inxPrevLine >= 0");for(c=0;c<q;++c)b+=l.getLine(c).getTreeMoveCount();h+=1;for(l=f.length;h<l;++h)if(q=f[h],q.hasLines())for(var c=0,r=q.getSubLinesCount();c<r;++c)b+=q.getLine(c).getTreeMoveCount();b+=f.length;c=f}return b};c.getStackForLine=function(b,c){for(var g=[];null!=b;c=b.getParentMoveIndex(),b=b.getParentLine()){var f=new CB.Vf7(b,c);g.push(f)}for(var h=new CB.LineStack;0<g.length;)f=g.pop(),h.push(f);return h};c.getStackForIndex=function(d,c){var g={complete:!1,inxMv:c},
f=new CB.LineStack;b.call(this,d,g,f);return f};var b=function(d,c,g){var f=d.length;if(c.inxMv<=f)return g.push(new CB.Vf7(d,c.inxMv)),c.complete=!0;c.inxMv-=f;for(f=d.length-1;0<=f;--f){var h=d[f];if(h.hasLines()){g.push(new CB.Vf7(d,f));for(var l=0,q=h.getSubLinesCount();l<q;++l){var r=h.getLine(l);b(r,c,g);if(c.complete)return!0}g.pop()}}return!1}})(CB.Game);
(function(c){function b(b){this.cur.preCalcCtx(b);var d=this.cur.makeMove(b);this.cur.postCalcCtx(b,!0);return d}function d(b){return e.call(this,b,function(b,d){b.length=d+1})}function e(d,c){var e=b.call(this,d);e||CB.V46("MoveInMain, no undo",d);var g=this.stk.Top();if(g){var f=g.getLine(),h=g.getMovesToGo();f[h]=d;c(f,h);g.setMovesToGo(h+1)}this.fireOnMove(d);this.fireOnCurPosChanged();return e}function g(b){return e.call(this,b,function(b,d){r(this.cur,b,d+1)}.bind(this))}function f(d,c,e){var g=
b.call(this,d),f=this.stk.Top(),h=f.getMovesToGo();c=f.getLine()[h].getLine(c);c[0]=d;e(c);d=new CB.Vf7(c,1);this.stk.push(d);this.fireOnMove();this.fireOnCurPosChanged();return g}function h(b,d){return f.call(this,b,d,function(b){b.length=1})}function l(b,d){var c=function(b){r(this.cur,b,1)}.bind(this);return f.call(this,b,d,c)}function q(d){var c=b.call(this,d),e=this.stk.Top();if(e){var g=e.getLine(),f=e.getMovesToGo();f<g.length?(e=g[f].newLine(g,f),e=new CB.Vf7(e,0),e.pushMove(d),this.stk.push(e)):
e.pushMove(d);this.fireOnMove();this.fireOnCurPosChanged();return c}}function r(b,d,c){c=c||0;for(b=ObjUtil.clone(b);c<d.length;++c){var e=d[c];if(!b.isLegalMove(e))break;if(e.hasLines())for(var g=e.getSubLinesCount()-1;0<=g;--g){var f=e.getLine(g);r(b,f);0===f.length&&e.removeLine(g)}b.makeMove(e)}d.length=c}c.prototype.storeOnce=function(){this.storeState={start:ObjUtil.clone(this.start),cur:ObjUtil.clone(this.cur),mainLine:ObjUtil.clone(this.mainLine),stk:ObjUtil.clone(this.stk)}};c.prototype.restoreOnce=
function(){this.storeState&&(this.start=ObjUtil.clone(this.storeState.start),this.cur=ObjUtil.clone(this.storeState.cur),this.mainLine=ObjUtil.clone(this.storeState.mainLine),this.stk=ObjUtil.clone(this.storeState.stk))};c.prototype.storeOnce2=function(){this.storeState={start:ObjUtil.clone2(this.start),cur:ObjUtil.clone2(this.cur),mainLine:ObjUtil.clone2(this.mainLine),stk:ObjUtil.clone2(this.stk)}};c.prototype.restoreOnce2=function(){this.storeState&&(this.start=ObjUtil.clone2(this.storeState.start),
this.cur=ObjUtil.clone2(this.storeState.cur),this.mainLine=ObjUtil.clone2(this.storeState.mainLine),this.stk=ObjUtil.clone2(this.storeState.stk))};c.prototype.makeMove=function(b,c){0<=c&&63>=c&&(c=CB.Vhs.Vhy);if(this.gotoMove(b))return!0;var e=null,f=c&CB.Vhs.Vht,v=c&CB.Vhs.Vhu;switch(f){case CB.Vhs.V1o&CB.Vhs.Vht:case CB.Vhs.V1o:break;case CB.Vhs.Vi0:e=q.call(this,b);this.promoteLine();break;case CB.Vhs.Vhy:e=q.call(this,b);break;case CB.Vhs.Vhz:e=g.call(this,b);break;default:case CB.Vhs.Vhw:e=
d.call(this,b);break;case CB.Vhs.Vhx:e=h.call(this,b,v);break;case CB.Vhs.Vi1:e=l.call(this,b,v)}if(e)return b.undo=e,!0;CB.V46("No Undo","Type="+f+", mv="+b);return!1}})(CB.Game);"use strict";
(function(c){function b(b){CBDebug.call(this,this.selfTest);if(!this.isOnMainLine()){var c=this.getTopLine(),g=c.getParentMove(),f=g.getSubLinesCount();f&&1!==f&&(c=g.indexOfLine(c),b=c+b,0>b||b>=f||(g.swapLines(c,b),CBDebug.call(this,this.selfTest),this.fireOnChanged()))}}c.prototype.promoteLine=function(){if(this.isOnMainLine())return!1;CBDebug.call(this,this.selfTest);this.stk.promoteLine();CBDebug.call(this,this.selfTest);this.fireOnChanged();return!0};c.prototype.upLine=function(){b.call(this,
-1)};c.prototype.downLine=function(){b.call(this,1)};c.prototype.deleteLine=function(){if(!this.isOnMainLine()){CBDebug.call(this,this.selfTest);var b=this.stk.shallowClone(),c=this.getTopLine();c.getParentMove().removeLine(c);b.pop();this.setStack(b);CBDebug.call(this,this.selfTest);this.fireOnCurPosChanged();this.fireOnChanged()}};c.prototype.deleteRemaining=function(){this.stk.deleteRemaining();this.fireOnChanged()};c.prototype.deletePrevious=function(){if(0!=this.getCurLine().length){var b=this.stk.shallowClone();
b.gotoPrev();b=this.getStackPos(b);this.mainLine=this.stk.deletePrevious();this.start=b;this.fireOnChanged()}};c.prototype.unAnnotate=function(){this.mainLine.unAnnotate();var b=new CB.LineStack(this.mainLine,0);this.setStack(b);this.fireOnChanged();this.fireOnCurPosChanged()};c.prototype.startLine=function(){this.gotoPrev()};c.prototype.forAllMoves=function(b){this.mainLine.forAllMoves(b)}})(CB.Game);
(function(c){function b(b){for(var c=[],g=0,f=this.stk.length;g<f;++g){var h=this.stk[g],l=h.getLine(),h=h.getMovesToGo();b||g!=f-1||(h=l.length);h&&(c=c.concat(l.slice(0,h)))}return c}c.prototype.getCurLine=function(){return b.call(this,!1)};c.prototype.getCurLineCut=function(){return b.call(this,!0)};c.prototype.getLineStartMoveNo=function(){for(var b=0,c=0;c<this.stk.length-1;c++)b+=this.stk[c].getMovesToGo();return b};c.prototype.getCurLineIndex=function(){for(var b=0,c=0,g=this.stk.length;c<
g;++c)b+=this.stk[c].getMovesToGo();return b};c.prototype.setCurLineIndex=function(b){for(var c=new LineStack,g=0,f=this.stk.length;g<f;++g){var h=this.stk[g],l=h.getMovesToGo();if(g<f-1&&l<b)c.push(h),b-=l;else{g=h.getLine();l=b;b=new CB.Vf7(g,l);c.push(b);break}}this.gotoStack(c)}})(CB.Game);
(function(c){function b(b){var d=new CB.Position,d=ObjUtil.equals(this.start,d);b.V3c4(d);d||(this.start.write(b),b.writeShort(0),b.writeShort(this.start.getMoveNum()),b.V3c4(d))}function d(b){var d=b.V3c5();!d&&(this.start.read(b),b.readShort(),d=b.readShort(),this.start.setMoveNum(d),d=b.V3c5())&&(this.start=new CB.Position)}function e(b){d.call(this,b);var c=new CB.Annotation;c.read2(b);this.mainLine.read2(b);c.empty()||this.mainLine.setAnno(c)}c.prototype.fromBuf64=function(b){var d=new CB.V9z;
d.Vag(b);b=new CB.Game;var c=new CB.Vh0;c.compactFromDataBuf(d);d.V3c1();b.readGameOnly2(d);b.setHeader(c);this.assign(b)};c.prototype.write=function(d){var c=this.getMoveIndex();d.writeInt(c);d.writeInt(0);this.hdr.write(d);b.call(this,d);(new CB.Annotation).write(d);this.mainLine.write(d);d.beginSizedWrite();d.endSizedWrite()};c.prototype.read=function(b){var c=b.readInt();b.readInt();this.hdr.read(b);d.call(this,b);var e=new CB.Annotation;e.read(b);this.mainLine.read(b);e.empty()||this.mainLine.setAnno(e);
b.beginSizedRead();b.endSizedRead();this.initPost();CBDebug.call(this,this.selfTest);this.fireOnChanged();this.gotoIndex(c)};c.prototype.read2=function(b){var d=!1;this.hdr.read(b)&&(e.call(this,b),d=!0);this.initPost();return d};c.prototype.read3=function(b){var d=b.readInt();b.readInt();this.hdr.read(b);e.call(this,b);b.beginSizedWrite();b.endSizedWrite();this.initPost();CBDebug.call(this,this.selfTest);this.fireOnChanged();this.fireOnHeaderChanged();this.gotoIndex(d)};c.prototype.readGameOnly2=
function(b){e.call(this,b);this.initPost()};c.prototype.writeGameOnly2=function(d){b.call(this,d);d.writeUint8(0);this.mainLine.write2(d)};c.prototype.fromDataBuf=c.prototype.read;c.prototype.V3c0=c.prototype.write})(CB.Game);"use strict";CB.V3b2={arrStrPieces:[],Vig:"x",Vih:"+",strMate:"#",strProm:"",Vii:"0-0",Vij:"0-0-0",Vik:"--",Vil:!1};CB.V3b2.arrStrPieces[CB.Piece.Vn]=CB.V3b2.arrStrPieces[CB.Piece.Vo]="K";CB.V3b2.arrStrPieces[CB.Piece.Vp]=CB.V3b2.arrStrPieces[CB.Piece.Vq]="Q";
CB.V3b2.arrStrPieces[CB.Piece.Vr]=CB.V3b2.arrStrPieces[CB.Piece.Vs]="R";CB.V3b2.arrStrPieces[CB.Piece.Vt]=CB.V3b2.arrStrPieces[CB.Piece.Vu]="B";CB.V3b2.arrStrPieces[CB.Piece.Vv]=CB.V3b2.arrStrPieces[CB.Piece.Vw]="N";CB.V3b2.arrStrPieces[CB.Piece.Vx]=CB.V3b2.arrStrPieces[CB.Piece.Vy]="";
CB.Vie=function(){var c=function(b){this.Vim=b||CB.V3b2};c.prototype.Vin=function(){return this.Vim};c.prototype.Vio=function(b,d,c){var g=0;c&&(g=c);b=b.getMoveNum();for(c="";g<d.length;++g){var f=d[g],h=f.getMoved(),h=CB.Piece.side(h)===CB.Vaz.WHITE;c+=this.getMoveNota(f,h||!g?b:0)+" ";h||++b}return c};c.prototype.Vip=function(b,d){var c=b.getMainLine().length,c=c-d;0>c&&(c=0);for(var c=Math.floor(c/2)+1,g=[],f=Math.max(0,b.getMoveNo()-d),h=f;h<b.getMainLine().length;++h){var l=b.getMainLine()[h],
q=l.getMoved(),q=CB.Piece.side(q)===CB.Vaz.WHITE;g.push(this.getMoveNota(l,q||h==f?c:0));q||++c}return g};c.prototype.Viq=function(b,d){var c=Math.floor(d.getCurPos().getMoveNum()/2+1);d.getCurPos().preCalcCtx(b);return this.getMoveNota(b,c)};c.prototype.getMoveNota=function(b,d){var c="",g=b.getMoved();d&&(c=""+d+".",CB.Piece.side(g)===CB.Vaz.BLACK&&(c+=".."));b.isNullMove()?c+=this.Vim.Vik:b.isShortCastling()?c+=this.Vim.Vii:b.isLongCastling()?c+=this.Vim.Vij:(c=1>g||15<g?c+("[pcMvd="+g+"]"):c+
this.Vim.arrStrPieces[g],b.isNeedCol()&&(c+=CB.Vbf.Vdv(CB.Vbf.Ve1(b.from))),b.isNeedRow()&&(c+=CB.Vbf.Vdw(CB.Vbf.Ve0(b.from))),b.isTake()&&(g===CB.Piece.Vx||g===CB.Piece.Vy?(c+=CB.Vbf.Vdv(CB.Vbf.Ve1(b.from)),this.Vim.Vil||(c+=this.Vim.Vig)):c+=this.Vim.Vig),c+=CB.Vbf.toString(b.to),b.prom&&(c+=this.Vim.strProm,c+=this.Vim.arrStrPieces[b.prom]));b.isMate()?c+=this.Vim.strMate:b.isCheck()&&(c+=this.Vim.Vih);return c};c.prototype.getStrMoveNumInLine=function(b,d,c){var g=CB.Position.prototype.Vfc(b+
d),f="";if(0==(b+d&1)||0==b)f=g.toString()+".",c?0==(b+d&1)&&(f+=".."):0!=(b+d&1)&&(f+="..");return f};c.Vir={};c.Vir.Vis=CB.V3b2;return c}();var NotationLocalizations=CB.Vie.Vir;"use strict";CB.Vit={};
CB.Viu=function(){var c=function(){};c.prototype.init=function(b,d,c){this.id=-1;this.idGame=b;this.gameAction=d;this.controlMove=c;this.Viv=new Date};c.prototype.Viw=function(b){var d=new CB.Vat(Vix);d.setUserType(b);this.V3c0(d.getBuf());return d};c.prototype.fromDataBuf=function(b){this.id=b.V3c1();this.Viv=b.V3c1();this.idGame=b.V3c1();this.controlMove=new CB.Vf0;this.controlMove.fromDataBuf(b);this.Viy=b.V3c1();this.Viz=b.V3c1();this.gameAction=new CB.Vj0;this.gameAction.fromDataBuf(b)};c.prototype.V3c0=
function(b){b.V3by(this.id);b.V3by(this.Viv);b.V3by(this.idGame);this.controlMove.V3c0(b);b.V3by(this.Viy||0);b.V3by(this.Viz||0);this.gameAction.V3c0(b)};c.prototype.isAnEarlierMove=function(b){if(this.gameAction.type==CB.Vj1.Vj2){var d=this.gameAction.moveData;if(this.gameAction.moveData.moveNo<b.getPlyNum()&&(d=new CB.Vei(d.move[0],d.move[1],d.move[2]),b.getMoves()[this.gameAction.moveData.moveNo].equals(d)&&(0==this.gameAction.moveData.moveNo||b.getMoves()[this.gameAction.moveData.moveNo-1].equals(this.controlMove))))return!0}return!1};
c.prototype.Vj3=function(){return this.gameAction.type==CB.Vj1.Vj2};c.prototype.toString=function(){return"gameId="+this.idGame.toString(10)+" "+this.gameAction.toString()};return c}();"use strict";CB.Vj4={V5l:0,Vj5:1,Vj6:2,Vj7:3,Vj8:function(c){return c==CB.Vaz.BLACK?CB.Vj4.Vj5:CB.Vj4.Vj6}};
CB.Vj9=function(){var c=function(b){this.board=b;this.Vja=function(){return null};this.Vjb=!0;this.Vjc=[]};c.prototype.Vjd=function(){var b=this.Vje();null!==b&&b===this.getCurPos().getSideToMove()&&this.Vjf()};c.prototype.Vjg=function(){if(this.Vjc.length)return this.Vjc[this.Vjc.length-1].to};c.prototype.Vjh=function(b){try{this.Vji()}catch(c){CB.V46("ME:sq",c)}};c.prototype.Vjj=function(b){};c.prototype.Vji=function(){this.Vjc=[];this.Vjk().undoAttributes()};c.prototype.Vjl=function(b){b=b||1-
.25*this.Vjc.length;return"hsla( 120, 75%, 55%, "+Math.max(.1,b)+")"};c.prototype.Vjm=function(){try{for(var b=[],c=0;c<this.Vjc.length;c++){var g=this.Vjc[c],f=this.Vjl(.9-.3*c);b.push(new CB.Vjn(g.from,g.to,f))}b.length&&this.Vjk().queueBoardAttributes(b,{eraseQueue:!1,renderNow:!0,requestAnimInRender:!0})}catch(h){CB.V46("ME::rp")}};c.prototype.Vjo=function(b,c,g){try{if(this.Vjp()&&this.Vjq(b)){var f=new CB.Vei(b,c,g&7);this.fireOnStopClock();this.fireOnMoveEntered(f);return!0}if(this.Vjb){var h=
new CB.Vei(b,c,g&7);this.Vjc.push(h)}}catch(l){CB.V46("MvE::Entd",l)}return!1};c.prototype.Vjq=function(b){return CB.Piece.side(this.getCurPos().getPiece(b))==this.getCurPos().getSideToMove()};c.prototype.Vjr=function(b){try{var c=!0;if(this.Vjb){var g=this.getCurPos().getPiece(b);g&&CB.Piece.side(g)!=this.getCurPos().getSideToMove()&&CB.Piece.side(g)===this.Vje()&&(c=!1);b==this.Vjg()&&(c=!1)}c&&this.board.undoAttributes()}catch(f){CB.V46("ME::clr",f)}};var b=!1;c.prototype.Vjf=function(){if(b)return!1;
b=!0;var d=!1;if(this.Vjc.length){var c=this.Vjc.shift();this.getCurPos().isLegalFromTo(c.from,c.to)&&this.getCurPos().getSideToMove()==this.Vje()&&(this.fireOnStopClock(),new CB.Timer.V4w(function(){this.fireOnMoveEntered(c)}.bind(this)),d=!0,this.Vjm())}b=!1;return d};c.prototype.Vjs=function(b,c){var g={ok:!1,from:-1};try{if(b.get(c)==CB.Piece.V5l){var f=this.getCurPos().V3b8(),f=f.filter(function(b){return b.to==c});if(g.ok=1==f.length&&this.Vjt())g.from=f[0].from}}catch(h){CB.V46("ME:FS",h)}return g};
c.prototype.isLegal=function(b,c,g){return this.Vjp(b.get(c))?this.getCurPos().isLegalFromTo(c,g)||this.isPremove(b,c,g)&&0!=b.get(c):!1};c.prototype.Vju=function(b){return!!(this.Vjk().board.get(b)&CB.Piece.Vb1)==this.getCurPos().isBTM()&&0<this.Vjk().board.get(b)};c.prototype.Vjv=function(b){return!!(this.Vjk().board.get(b)&CB.Piece.Vb1)!=this.getCurPos().isBTM()&&0<this.Vjk().board.get(b)};c.prototype.Vjw=function(b,c){var g=this.Vjk().board;if(this.Vjp(g.get(b))&&this.getCurPos().isLegalFromTo(b,
c)){g=0;if(this.Vjk().isWhitePromoPawn(b)||this.Vjk().isBlackPromoPawn(b))g=CB.Piece.QUEEN;return this.Vjo(b,c,g)}return!1};c.prototype.Vjp=function(b){switch(this.Vjx()){case CB.Vj4.Vj7:return!0;case CB.Vj4.Vj5:return this.getCurPos().isWTM()||this.Vjb&&CB.Piece.side(b)==CB.Vaz.WHITE;case CB.Vj4.Vj6:return this.getCurPos().isBTM()||this.Vjb&&CB.Piece.side(b)==CB.Vaz.BLACK;default:return!1}};c.prototype.Vjt=function(){switch(this.Vjx()){case CB.Vj4.Vj5:return this.getCurPos().isWTM();case CB.Vj4.Vj6:return this.getCurPos().isBTM();
default:case CB.Vj4.Vj7:return!0}};c.prototype.Vjy=function(b){};c.prototype.Vjz=function(){this.Vk0(null)};c.prototype.isPremove=function(b,c,g){return 0<=c&&0<=g&&64>c&&64>g?(b=b.get(c))?this.Vjb&&this.getCurPos().isBTM()==(CB.Piece.side(b)==CB.Vaz.WHITE):!1:!1};c.prototype.isLegalFromTo=function(b,c){return this.getCurPos().isLegalFromTo(b,c)};c.prototype.Vk1=function(b,c){return this.isLegalFromTo(b,c)?this.getCurPos().getEPCol()==CB.Vbf.Ve3(c):!1};c.prototype.test=function(){};c.prototype.getGame=
function(){return this.board.getGame()};c.prototype.getCurPos=function(){return this.getGame().getCurPos()};c.prototype.Vjk=function(){return this.board};c.prototype.Vje=function(){return this.Vja()};c.prototype.Vk0=function(b){ObjUtil.isFunction(b)?this.Vja=b:this.Vja=function(){return b}};c.prototype.Vjx=function(){switch(this.Vje()){case CB.Vaz.WHITE:return CB.Vj4.Vj5;case CB.Vaz.BLACK:return CB.Vj4.Vj6;default:return CB.Vj4.Vj7}};c.prototype.Vk2=function(b,c){if(0<=c&&64>c){var g=b.get(c);return this.getCurPos().isBTM()==
(CB.Piece.side(g)==CB.Vaz.BLACK)}};V3bf.initForListeners(c);V3bf.addEvent(c,"MoveEntered");V3bf.addEvent(c,"StopClock");return c}();"use strict";
CB.Vk3=function(){var c=1,b=function(b,e){this.game=e||new CB.Game;CB.V1(this,"game");this.Vk5();this.Vk6=[];this.Vk4=b;this.Vk7=!0;this.uniqueId=c++;this.Vk8=new CB.Vk9;this.Vk8.setGame(this.game);this.fnInitGame=function(b){b.reset();if(PGN&&V3c6&&V3c6.urlParams&&V3c6.urlParams.pgn){var d=PGN.Vka(V3c6.urlParams.pgn);b.assign(d)}else V3c6&&V3c6.urlParams&&V3c6.urlParams.buf64&&(CB.V4a.V4l("buf64"),d=new CB.Game,d.fromBuf64(V3c6.urlParams.buf64),b.assign(d))}};b.prototype.destroy=function(){this.setBoardWin(null);
this.Vk8.setGame(null);this.Vkb();this.releaseCommandHandlers();this.V3bl&&this.V3bl.destroy()};b.prototype.Vkc=function(b){this.boardWin&&(this.boardWin.Vkd.allowedColor=b)};b.prototype.linkCommandHandlers=function(){this.Vke=V3c6.commands.Vkf(this);this.Vkg=V3c6.commands.Vkh(this)};b.prototype.releaseCommandHandlers=function(){V3c6.commands.Vki(this.Vke);V3c6.commands.Vkj(this.Vkg)};b.prototype.createControl=function(b,c,g,f){this.animateBoard=!0;this.boardArea=new CB.Vkk(b,c,g,f);b=f&&f.fnBoardFactory?
f.fnBoardFactory(b,c,g,"ByKernel",f):new CB.Vkl(b,c,g,"ByKernel",f);f&&f.addTitle&&b.addTitle(null,f.noClock);this.setBoardWin(b);this.V3bl.createGUIElements(this.boardWin);this.boardArea.addBoard(this.boardWin);this.initGame();this.boardWin.Vkm();this.releaseCommandHandlers();this.linkCommandHandlers();return this.boardArea};b.prototype.createControl3D=function(b,c,g){this.animateBoard=V3c6.Vkn();this.boardArea=new CB.BoardArea3D(b,c,g);b=new CB.BoardControl3D(b,c,g,"FritzBoard",this.Vko.bind(this));
this.setBoardWin(b);this.V3bl.createGUIElements(this.boardWin);this.boardArea.addBoard(this.boardWin);this.initGame();this.boardWin.Vkm();this.releaseCommandHandlers();this.linkCommandHandlers();return this.boardArea};b.prototype.Vko=function(){this.boardWin&&this.boardWin.setGame(this.game)};b.prototype.Vkp=function(b){this.Vk8&&this.Vk8.enable(b)};b.prototype.setBlackIsBottom=function(b){this.boardWin&&this.boardWin.setBlackIsBottom(b)};b.prototype.setBoardWin=function(b){this.boardWin&&this.boardWin.Vkd.removeOnMoveEnteredListener(this.Vkq);
if(this.boardWin=b)this.boardWin.Vkd&&(this.boardWin.Vkd.Vk0&&this.boardWin.Vkd.Vk0(this.Vje.bind(this)),this.boardWin.Vkd.addOnMoveEnteredListener&&(this.Vkq=this.boardWin.Vkd.addOnMoveEnteredListener(this.Vkr.bind(this)))),this.boardWin.setGame(this.game),this.idGame&&(this.boardWin.idGame=this.idGame)};b.prototype.Vks=function(b,c,g){this.notation=CB.NotaElement.factory(b,c,null);this.notation.setGame(this.game);return this.notation};b.prototype.Vkt=function(b){this.notation&&this.notation.Vkt(b)};
b.prototype.Vku=function(){this.V3bl.Vku()};b.prototype.setPlayingMode=function(b){this.Vkv=this.Vkv||{};this.V3bl&&this.V3bl.Vkw(this.Vkv);this.boardWin&&this.V3bl&&(this.V3bl.Vkx(this.boardWin),this.V3bl.destroy());this.V3bl=b;this.boardWin&&(this.V3bl.createGUIElements(this.boardWin),this.V3bl.Vku(),this.V3bl&&this.V3bl.Vky(this.Vkv),this.V3bl.Vkz());this.boardArea&&this.boardArea.Vl0();this.V3bl.getFnLoadSearchResult&&(this.loadSearchResultGame=this.V3bl.getFnLoadSearchResult())};b.Vl1=null;b.Vl2=
function(d){b.Vl3();return b.Vl1[d]};b.Vl3=function(){b.Vl1||(b.Vl1={},b.Vl1[V3c6.V3bp.LEVEL_BLITZ_3_0]={clockParams:new CB.Vl4(3,0)},b.Vl1[V3c6.V3bp.LEVEL_BLITZ_4_0]={clockParams:new CB.Vl4(4,0)},b.Vl1[V3c6.V3bp.LEVEL_BLITZ_5_0]={clockParams:new CB.Vl4(5,0)},b.Vl1[V3c6.V3bp.LEVEL_BLITZ_3_2]={clockParams:new CB.Vl4(3,2)},b.Vl1[V3c6.V3bp.LEVEL_BLITZ_5_5]={clockParams:new CB.Vl4(5,5)},b.Vl1[V3c6.V3bp.LEVEL_1_SECOND]={fixedTime:1E3},b.Vl1[V3c6.V3bp.LEVEL_5_SECONDS]={fixedTime:5E3},b.Vl1[V3c6.V3bp.LEVEL_15_SECONDS]=
{fixedTime:15E3},b.Vl1[V3c6.V3bp.LEVEL_40_SECONDS]={fixedTime:4E4})};b.prototype.execCommand=function(b){try{switch(b){case V3c6.V3bp.V1w:this.newGame();break;case V3c6.V3bp.V3q:this.Vl5(this.V3bl.Vl6);break;case V3c6.V3bp.Vl7:this.V3bl.Vl8()&&this.game.gotoPrev();break;case V3c6.V3bp.Vl9:this.V3bl.Vl8()&&this.game.gotoNext();break;case V3c6.V3bp.V30:this.startLine();break;case V3c6.V3bp.FLIP_BOARD:this.boardWin&&this.boardWin.flipBoard();break;case V3c6.V3bp.PROMOTE_LINE:this.V3bl.onPromoteLine()&&
this.game.promoteLine();break;case V3c6.V3bp.DELETE_LINE:this.V3bl.onDeleteLine()&&this.game.deleteLine();break;case V3c6.V3bp.CUT_LINE:this.V3bl.onCutLine()&&this.game.deleteRemaining();break;case V3c6.V3bp.Vla:this.V3bl.onDeletePrevious()&&this.game.deletePrevious();break;case V3c6.V3bp.ADD_POST_TEXT:this.Vlb(!0);break;case V3c6.V3bp.Vlc:this.Vlb(!1);break;case V3c6.V3bp.INSERT_DIAGRAM:this.V3bl.Vld()&&this.Vle();break;case V3c6.V3bp.Vlf:this.Vlg(1);break;case V3c6.V3bp.Vlh:this.Vlg(-1);break;case V3c6.V3bp.Vli:this.Vlj();
break;case V3c6.V3bp.Vlk:this.V3bl.test();break;case V3c6.V3bp.Vll:this.Vlm();break;case V3c6.V3bp.Vln:this.Vlo();break;case V3c6.V3bp.MARK_GOOD:this.V3bl.onAnnotate()&&this.addSymbol(CB.Vlp.Vlq);break;case V3c6.V3bp.MARK_BAD:this.V3bl.onAnnotate()&&this.addSymbol(CB.Vlp.Vlr);break;case V3c6.V3bp.MARK_VERYGOOD:this.V3bl.onAnnotate()&&this.addSymbol(CB.Vlp.Vls);break;case V3c6.V3bp.MARK_VERYBAD:this.V3bl.onAnnotate()&&this.addSymbol(CB.Vlp.Vlt);break;case V3c6.V3bp.MARK_INTERESTING:this.V3bl.onAnnotate()&&
this.addSymbol(CB.Vlp.Vlu);break;case V3c6.V3bp.MARK_DUBIOUS:this.V3bl.onAnnotate()&&this.addSymbol(CB.Vlp.Vlv);break;case V3c6.V3bp.WHITE_WINS:this.V3bl.onEval(CB.Vlw.WHITE_WINS)&&this.addSymbol(CB.Vlw.WHITE_WINS);break;case V3c6.V3bp.WHITE_BETTER:this.V3bl.onEval(CB.Vlw.WHITE_BETTER)&&this.addSymbol(CB.Vlw.WHITE_BETTER);break;case V3c6.V3bp.WHITE_SLIGHTLY:this.V3bl.onEval(CB.Vlw.Vlx)&&this.addSymbol(CB.Vlw.Vlx);break;case V3c6.V3bp.EQUAL:this.V3bl.onEval(CB.Vlw.EQUAL)&&this.addSymbol(CB.Vlw.EQUAL);
break;case V3c6.V3bp.UNCLEAR:this.V3bl.onEval(CB.Vlw.UNCLEAR)&&this.addSymbol(CB.Vlw.UNCLEAR);break;case V3c6.V3bp.BLACK_WINS:this.V3bl.onEval(CB.Vlw.BLACK_WINS)&&this.addSymbol(CB.Vlw.BLACK_WINS);break;case V3c6.V3bp.BLACK_BETTER:this.V3bl.onEval(CB.Vlw.BLACK_BETTER)&&this.addSymbol(CB.Vlw.BLACK_BETTER);break;case V3c6.V3bp.BLACK_SLIGHTLY:this.V3bl.onEval(CB.Vlw.Vly)&&this.addSymbol(CB.Vlw.Vly);break;case V3c6.V3bp.COMPENSATION:this.V3bl.onEval(CB.Vlw.COMPENSATION)&&this.addSymbol(CB.Vlw.COMPENSATION)}}catch(c){b=
V3c6.V3bp.Vlz(b),CB.V46(b,c)}};b.prototype.onKeyDown=function(b){var c=this.V3bl.onKeyDown(b);if(!c&&b&&b.getKey)switch(this.Vm0=c=!0,b.getKey()){default:c=!1;break;case b.A:b.ctrlKey?this.Vlb(!0):c=!1;break;case b.F:b.ctrlKey?this.execCommand(CB.Vm1.FLIP_BOARD):c=!1;break;case b.N:b.ctrlKey?this.execCommand(CB.Vm1.V1w):c=!1;break;case b.LEFT:this.V3bl.Vl8()&&this.game.gotoPrev();break;case b.RIGHT:this.Vm2();break;case b.HOME:this.V3bl.Vl8()&&this.game.gotoStart();break;case b.END:this.Vm3();break;
case b.PAGE_DOWN:this.Vm4();break;case b.PAGE_UP:this.V3bl.Vl8()&&this.game.jump(-20);break;case b.SPACE:this.V3bl.Vl8()&&(c=this.execCommand(CB.Vm1.Vm5));break;case b.F2:b.altKey?this.execCommand(CB.Vm1.Vm6):c=!1}return c};b.prototype.onFileSelect=function(b,c){return!1};b.prototype.Vm2=function(){this.V3bl.Vm7()&&this.game.gotoNext()};b.prototype.Vm3=function(){this.V3bl.Vm8()&&this.game.gotoEnd()};b.prototype.Vm4=function(){this.V3bl.Vm9()&&this.game.jump(20)};b.prototype.Vl5=function(b){V3c6.isPremium()?
this.Vma?this.Vmc():this.Vmb(b):V3c6.panelMgr.showBoardMessage(lm.PREMIUM_ONLY,3E3)};b.prototype.Vmd=function(){var b=new CB.Position("8/7k/P7/8/K7/8/8/8 w - - 0 1"),b=new CB.Game(b);this.game.assign(b)};b.prototype.Vmb=function(b){this.boardWin&&(this.boardWin.Vme(),this.Vma=new CB.Vmf(this.boardWin.cbcanvas,this.boardWin.width,this.boardWin.height,"posInput",function(b){(new CB.Timer(function(){this.Vmc(b)}.bind(this))).V4w()}.bind(this),b,{}),this.boardArea.Vmg(this.Vma),this.Vma.Vmh(),this.Vma.setPosition(this.getCurPos()),
this.boardArea.Vmi())};b.prototype.Vmc=function(b){if(this.Vma){var c=new CB.Game(this.Vma.Vmj());this.boardArea.Vmk(this.boardWin);this.Vma.destroy();delete this.Vma;this.V3bl.createGUIElements(this.boardWin);b||this.game.assign(c);this.V3bl.Vjy(c.getCurPos());this.boardWin.Vkd.Vjy(c.getCurPos());this.setBlackIsBottom(c.getCurPos().getBTM())}};b.prototype.Vml=function(b){b&&(this.game.assign(PGN.Vka(b)),this.game.gotoFirst())};b.prototype.initGame=function(){this.fnInitGame(this.game,this);this.V3bl.newGame(!1)};
b.prototype.newGame=function(){this.boardWin&&(this.boardWin.prepareFullRedraw(),this.boardWin.destroyMessage(),this.boardWin.Vmm());this.V3bl.Vmn(this.game);this.V3bl.newGame(!0)};b.prototype.Vk5=function(){this.game&&(this.Vmo=this.game.addOnNavigateListener(this.Vmp.bind(this)),this.Vmq=this.game.addOnMoveListener(this.Vmr.bind(this)),this.Vms=this.game.addOnChangedListener(this.Vmt.bind(this)),this.idHeaderListener=this.game.addOnHeaderChangedListener(this.Vmu.bind(this)),this.Vmv=this.game.addOnCurPosChangedListener(this.Vmw.bind(this)),
this.Vmx=this.game.addOnResetGameListener(this.Vmy.bind(this)),this.Vmz=this.game.addOnClickInNotationListener(this.Vn0.bind(this)))};b.prototype.Vkb=function(){this.game.removeOnNavigateListener(this.Vmo);this.game.removeOnMoveListener(this.Vmq);this.game.removeOnChangedListener(this.Vms);this.game.removeOnHeaderChangedListener(this.idHeaderListener);this.game.removeOnCurPosChangedListener(this.Vmv);this.game.removeOnResetGameListener(this.Vmx);this.game.removeOnClickInNotationListener(this.Vn1)};
b.prototype.Vn2=function(){return this.Vn3.bind(this)};b.prototype.Vn3=function(b,c){b.loadGameAsync(this.Vn4.bind(this),c)};b.prototype.Vn4=function(b){void 0!==b&&(this.loadSearchResultGame?this.loadSearchResultGame(b):(this.game.assign(b),this.game.gotoFirst(),this.loadSearchResultGame))};b.prototype.Vn5=function(b){1E4>b&&this.Vn6()&&!this.Vm0&&setTimeout(function(){this.Vn5(b+1)}.bind(this),5)};b.prototype.Vn7=function(b){0<this.game.getMoveIndex()&&!this.Vm0&&(this.game.gotoPrev(),setTimeout(function(){this.Vn7()}.bind(this),
5))};b.prototype.Vn6=function(){if(0==this.Vk6.length)return!1;this.game.makeMove(this.Vk6[Math.floor(Math.random()*this.Vk6.length)]);return!0};b.prototype.Vje=function(){if(this.V3bl)return this.V3bl.Vje()};b.prototype.Vk0=function(b){this.V3bl&&this.V3bl.Vk0(b)};b.prototype.Vn8=function(b){};b.prototype.Vkr=function(b){try{if(this.game.getCurPos().isLegalMove(b)&&!this.V3bl.Vkr(b)){if(this.V3bl.Vn9(b)){if(this.game.gotoMove(b))return;var c=this.V3bl.getMoveEnterType();this.Vna&&(c=this.Vna,this.Vna=
null);var g=function(b,d){d!=CB.Vhs.V1o&&(this.game.makeMove(b,d),this.Vnb())}.bind(this);c==CB.Vhs.Vhv?(c=function(b,d,c,e){g(c,d)},CB.Vnc&&CB.Vnc.Vnd(this.game,this.game.getCurPos(),b,null,c)):g(b,c)}else this.game.fireOnCurPosChanged();this.V3bl.Vne(b)}}catch(f){CB.V46("GK:ReactTo",f)}};b.prototype.markLastMove=function(b,c){this.boardWin&&this.boardWin.markLastMove(b||!this.animateBoard,c)};b.prototype.Vnf=function(b,c){this.boardWin&&this.boardWin.Vnf(b,c)};b.prototype.drawArrow=function(b,c,
g){this.boardWin&&this.boardWin.drawArrow(b,c,g)};b.prototype.Vng=function(b){if(this.boardWin){var c=this.boardWin.animSteps.forMove;CB.V5t.V64()?this.boardWin.animSteps.forMove=b||4:this.boardWin.animSteps.forMove=b||10}this.game.gotoNext();this.boardWin&&(this.boardWin.animSteps.forMove=c)};b.prototype.Vnh=function(b,c){this.Vni(function(){this.game.makeMove(b,CB.Vhs.Vhw)}.bind(this),c)};b.prototype.Vnj=function(b){if(this.boardWin){var c=this.boardWin.animSteps.forMove;CB.V5t.V64()?this.boardWin.animSteps.forMove=
b||2.5:this.boardWin.animSteps.forMove=b||6}this.game.gotoPrev();this.boardWin&&(this.boardWin.animSteps.forMove=c)};b.prototype.Vni=function(b,c){var g=this.boardWin.animSteps.forMove;CB.V5t.V64()?this.boardWin.animSteps.forMove=c||4:this.boardWin.animSteps.forMove=c||10;b();this.boardWin.animSteps.forMove=g};b.prototype.setResult=function(b,c){this.game.setResult(b);this.V3bl.Vnk(b,c)};b.prototype.Vnb=function(){if(!this.isFinished()){var b=this.Vnl();if(b!=CB.Vgu.Vgy)return this.V3bl.Vnm||this.setResult(b,
CB.Vnn.Vno),this.Vnp&&this.Vnp(b),!0}return!1};b.prototype.isFinished=function(){return this.game.hdr.getCBResult().isFinished()};b.prototype.isBTM=function(){return this.game.getCurPos().isBTM()};b.prototype.Vnl=function(){var b=(new CB.Vnq).checkGame(this.game),c=CB.Vgu.Vgy;switch(b){case CB.Vnr.V3p:case CB.Vnr.V2k:c=CB.Vgu.DRAW;break;case CB.Vnr.V3o:c=this.game.getCurPos().isBTM()?CB.Vgu.WHITE_WINS:CB.Vgu.BLACK_WINS;break;case CB.Vnr.Vns:case CB.Vnr.Vnt:c=CB.Vgu.DRAW}return c};b.prototype.Vmp=
function(){this.V3bl.Vnu()};b.prototype.Vmr=function(){this.V3bl.Vnv()};b.prototype.Vmw=function(){this.V3bl.Vkz();this.Vnw()};b.prototype.Vmt=function(b){this.V3bl.Vkz(b);this.Vnw()};b.prototype.Vmu=function(b){this.V3bl.Vnx()};b.prototype.Vmy=function(){this.V3bl.Vny();this.boardWin&&(this.boardWin.nextCurPosNoAnim=!0)};b.prototype.Vn0=function(){this.V3bl.Vnz()};b.prototype.Vlb=function(b){this.Vk4&&(this.Vk7==b?this.Vk4.Vo0():this.Vk4.Vo1(),this.Vk7=b,this.Vk4.Vo2()&&(this.game.getAnno(this.Vk7?
CB.AnnoType.Vgj:CB.AnnoType.Vgh),this.Vnw()))};b.prototype.Vlg=function(b){this.V3bl.Vlg(b)};b.prototype.Vo3=function(b,c){null!=b&&(this.V3bl.onTextAnno(b,this.Vk7)&&(b.length?this.game.setAnno(this.Vk7?CB.AnnoType.Vgj:CB.AnnoType.Vgh,new CB.Vgi(b)):this.game.deleteAnno(this.Vk7?CB.AnnoType.Vgj:CB.AnnoType.Vgh)),this.Vk4&&setTimeout(this.Vk4.Vo4.bind(this.Vk4)))};b.prototype.Vnw=function(){if(this.Vk4&&this.Vk4.Vo2&&this.Vk4.Vo2()){var b=this.game.getAnno(this.Vk7?CB.AnnoType.Vgj:CB.AnnoType.Vgh);
b?this.Vk4.Vo5(b.getString()):this.Vk4.Vo5("")}};b.prototype.Vo6=function(b){b&&b.length&&(this.game.getOrCreateCurrAnno().addPostText(b),this.game.fireOnChanged())};b.prototype.Vle=function(){var b=this.game.getOrCreateCurrAnno();b.toggleDiagram();this.V3bl.onTextAnno(b.getPostText()||"",!0)&&this.game.fireOnChanged()};b.prototype.deleteAnno=function(b){this.game.deleteAnno(b)};b.prototype.addSymbol=function(b){this.game.getOrCreateCurrAnno().addSymbol(b);this.game.fireOnAnnoChanged()};b.prototype.Vo7=
function(b){this.game.getOrCreateCurrAnno().addSymbol(b);this.game.fireOnAnnoChanged()};b.prototype.Vo8=function(){for(var b=0;b<this.game.getMoves().length-1;b++){var c=this.game.getMoves()[b].getAnno();if(void 0===c||null===c||void 0===c.getItem(CB.AnnoType.TIME))return!1}return 2<this.game.getMoves().length};b.prototype.Vo9=function(b){b&&this.game.getOrCreateCurrAnno().setItem(CB.AnnoType.TIME,b)};b.prototype.Voa=function(){this.Vo6(CB.Annotation.Vgd)};b.prototype.hasTraining=function(){for(var b=
0;b<this.game.getMoves().length-1;b++){var c=this.game.getMoves()[b].getAnno();if(c&&c.getItem(CB.AnnoType.Vf6))return!0}return!1};b.prototype.Vob=function(){for(var b=0;b<this.game.getMoves().length-1;b++){var c=this.game.getMoves()[b].getAnno();if(c){c.getItem(CB.AnnoType.Vf6)&&this.game.gotoIndex(b+1);break}if(this.game.getMoves()[b].hasLines())break}};b.prototype.getMoveNo=function(){return this.game.getMoveNo()};b.prototype.execEngineMove=function(b){this.game.makeMove(b);this.Vnb()};b.prototype.setIdGame=
function(b){this.idGame=b;this.boardWin&&(this.boardWin.idGame=b)};b.prototype.getCurPos=function(){return this.game.getCurPos()};b.prototype.executeGameAction=function(b,c){var g=new CB.V9z,f=!0;"TEXT"==b&&(f=!1);g.Vae(c,f);g.rewind();f=new CB.Vj0;f.fromDataBuf(g);f.fillExecutedMove();g=this.game.getHeader().getWhite();f._doExecute(this.game);f=this.game.getHeader().getWhite();this.game.updateFromExtern();0!=g.localeCompare(f)&&this.game.Vi9()};b.prototype.Vlm=function(){this.Voc(this.game.toString())};
b.prototype.Voc=function(b){if(window.clipboardData&&clipboardData.setData){if(this.boardWin){this.boardWin.addMessage("You may now paste this game as text everywhere.",!0);var c=this.boardWin;(new CB.Timer).runOnce(3E3,function(){c.destroyMessage()})}clipboardData.setData("Text",b)}};b.prototype.Vlo=function(){if(window.clipboardData&&clipboardData.getData){var b=clipboardData.getData("Text");this.Vml(b)}0<V3c6.V3bg.userName.length&&(new CB.Vod(V3c6.V3bg.userName,V3c6.V3bg.password)).getActivity(CB.Voe.Vof,
this.Vog.bind(this))};b.prototype.Vog=function(b,c){0!=b&&(this.Vml(c),this.game.updateFromExtern())};b.prototype.startLine=function(){this.game.gotoPrev();this.Vna=CB.Vhs.Vhy};return b}();"use strict";CB.Vj1={Voh:0,Voi:1,Voj:2,Vok:3,Vol:4,Vj2:5,Vom:6,Von:7,Voo:8,Vop:9,Voq:10,UNANNOTATE:11,Vor:12,Vos:13,Vot:14,Vou:15,Vov:16,Vow:17,toString:function(c){for(var b in this)if(this[b]==c)return"GameAction: "+b;return"Unknown GameAction: "+c}};
CB.Vj0=function(){var c=function(){this.type=CB.Vj1.Voh;this.nVal=0};c.prototype.fromDataBuf=function(b){this.type=b.V3c1();this.nVal=b.V3c1();switch(this.type){case CB.Vj1.Vol:this.Vox=new CB.Vf0;this.Vox.fromDataBuf(b);break;case CB.Vj1.Vj2:this.moveData=new CB.Voy;this.moveData.fromDataBuf(b);break;case CB.Vj1.Voj:this.setGame=new CB.Game;this.setGame.fromDataBuf(b);break;case CB.Vj1.Vom:case CB.Vj1.Vor:this.anno=new CB.Annotation;this.anno.fromDataBuf(b);break;case CB.Vj1.Vou:this.setGame=new CB.Game;
this.setGame.read3(b);break;case CB.Vj1.Vov:this.moves=new CB.Voz;this.moves.Vp0(rBuf,rBuf.ReadInt());break;case CB.Vj1.Vow:this.header=new CB.Vp1,this.header.ReadFromDataBuffer(rBuf,0)}};c.prototype.V3c0=function(b){b.V3by(this.type);b.V3by(this.nVal);switch(this.type){case CB.Vj1.Vol:this.Vox.V3c0(b);break;case CB.Vj1.Vj2:this.moveData.V3c0(b);break;case CB.Vj1.Voj:this.setGame.V3c0(b);break;case CB.Vj1.Vom:case CB.Vj1.Vor:this.anno.V3c0(b)}};c.prototype.Vp2=function(b){this.type=CB.Vj1.Vj2;this.moveData=
b};c.prototype.addText=function(b){this.anno=new CB.Annotation;this.anno.addPostText(b);this.type=CB.Vj1.Vor};c.prototype.isMove=function(){return this.type==CB.Vj1.Vj2||this.type==CB.Vj1.Vol};c.prototype.Vp3=function(){return this.type==CB.Vj1.Vj2};c.prototype.isGame=function(){return this.type==CB.Vj1.Voj};c.prototype.Vp4=function(){return this.type==CB.Vj1.Vor||this.type==CB.Vj1.Vom};c.prototype.Vp5=function(){if(this.moveData)return this.moveData.centiSecs};c.prototype.fillExecutedMove=function(){if(this.type==
CB.Vj1.Vol)return new CB.Vei(this.Vox.from,this.Vox.to,this.Vox.prom);if(this.type==CB.Vj1.Vj2)return new CB.Vei(this.moveData.move[0],this.moveData.move[1],this.moveData.move[2],this.moveData.type)};c.prototype.execute=function(b,d){var c=!0;d&&this.Vp6()&&(c=this.Vp7(b,d));c&&(c=this._doExecute(b));c&&d&&this.Vp8()&&(c=this.Vp7(b,d));return c};c.prototype.toString=function(){var b=CB.Vj1.toString(this.type);switch(this.type){default:return b;case CB.Vj1.Vj2:return"MoveData="+this.moveData;case CB.Vj1.Vom:return"SetAnno="+
this.anno;case CB.Vj1.Vor:return"AddAnno="+this.anno;case CB.Vj1.Vol:return"SetMove="+this.nVal}};c.prototype._doExecute=function(b){var d=!0;switch(this.type){case CB.Vj1.Voi:b.reset();break;case CB.Vj1.Vok:b.gotoIndex(this.nVal);d=this.nVal===b.getMoveIndex();break;case CB.Vj1.Vol:var c=new CB.Vei(this.Vox.from,this.Vox.to,this.Vox.prom);this.Vp9(c,b.getCurPos())?(d=this.nVal,d===CB.Vhs.Vhv&&b.getPlyNum()<b.getMoves().length&&(d=CB.Vhs.Vhw),d=b.makeMove(c,d)):d=!1;break;case CB.Vj1.Vj2:d=this.Vpa(this.moveData,
b);break;case CB.Vj1.Vou:case CB.Vj1.Voj:b.assign(this.setGame);d=!0;break;case CB.Vj1.Vom:this.nVal||0==b.getMoveOffs()?b.getMoves().setAnno(this.anno):(c=b.getPreviousMove())&&c.setAnno(this.anno);b.fireOnChanged();break;case CB.Vj1.Von:b.deleteLine();break;case CB.Vj1.Voo:b.promoteLine();break;case CB.Vj1.Vop:b.deletePrevious();break;case CB.Vj1.Voq:b.deleteRemaining();break;case CB.Vj1.UNANNOTATE:b.unAnnotate();break;case CB.Vj1.Vor:(c=this.nVal||0==b.getMoveOffs()?b.getMoves().getAnno():b.getPreviousMove().getAnno())||
(c=new CB.Annotation);this.anno.Vgm()?c.Vgg(this.anno.Vgn()):this.anno.Vgo()&&c.addPostText(this.anno.getPostText());this.nVal||0==b.getMoveOffs()?b.getMoves().setAnno(c):b.getPreviousMove().setAnno(c);b.fireOnChanged();break;case CB.Vj1.Vot:b.onSync(this.nVal);break;case CB.Vj1.Vov:b.setMoves(this.moves);break;case CB.Vj1.Vow:b.setHeader(this.header),b.fireOnChanged()}return d};c.prototype.Vp6=function(){return this.type==CB.Vj1.Vol||this.type==CB.Vj1.Vj2||this.type==CB.Vj1.Vom||this.type==CB.Vj1.Vor||
this.type==CB.Vj1.Voo||this.type==CB.Vj1.Voq};c.prototype.Vp8=function(){return this.type==CB.Vj1.Vok||this.type==CB.Vj1.Vop||this.type==CB.Vj1.Von};c.prototype.Vp7=function(b,d){return 0==b.getMoveOffs()||b.getPreviousMove()&&b.getPreviousMove().equals(d)};c.prototype.changesMoves=function(){return this.type==CB.Vj1.Vol||this.type==CB.Vj1.Vj2||this.type==CB.Vj1.Voi||this.type==CB.Vj1.Von||this.type==CB.Vj1.Voo||this.type==CB.Vj1.Vop||this.type==CB.Vj1.Voq};c.prototype.Vpa=function(b,d){var c=!1,
g=new CB.Vei(b.move[0],b.move[1],b.move[2]);this.Vp9(g,d.getCurPos())&&(d.enableEvents(!1),d.makeMove(g,CB.Vhs.Vhw),d.getOrCreateCurrAnno().setItem(CB.AnnoType.TIME,new CB.Vpb(CB.V4u.V4v(b.centiSecs))),d.enableEvents(!0),d.fireOnMove(),d.fireOnCurPosChanged(),c=!0);return c};c.prototype.Vp9=function(b,d){return d.isLegalMove(b)};return c}();"use strict";
CB.Vpc=function(){var c=function(){this.time=0;this.action=this.type=""};c.prototype.fromString=function(b,d){for(var c="",g=0,f=0,h=0,l=0,q=0;q<b.length;q++)":"==b[q]?(0==g?f=parseInt(c,10):1==g?h=parseInt(c,10):2==g&&(l=parseInt(c,10)),c="",g++):c+=b[q];this.time=l+60*h+3600*f;q=d.search(":");-1!=q&&(this.type=d.substring(0,q),this.action=d.substring(q+1))};return c}();"use strict";CB.Vnr={Vpd:0,V3o:1,V3p:2,V2k:3,Vns:4,Vnt:5,Vpe:6,DRAW:7,WHITE_WINS:8,BLACK_WINS:9,Vpf:10};
CB.Vnq=function(){var c=function(){};c.prototype.checkGame=function(b){var d=this.Vpg(b.getCurPos());if(d!=CB.Vnr.Vpd)return d;if(8<=b.getPlyNum()){for(var d=b.getCurPos().getCastleRights(),c=b.getPlyNum()-8,g=b.getPlyNum()-1;g>=c;g--){var f=b.getMoves()[g];if(f){if(!f.undo&&f.isValid()&&g<b.getPlyNum()-1){for(c=f=0;c<g;c++)b.getMoves()[c].undo&&f++;try{throw Error("DrawChkUndo");}catch(r){CB.V46(r,"undo-",r.stack?r.stack:"nostack")}break}if(f.isTake()||f.isProm()||f.isPawn())return CB.Vnr.Vpd}else return CB.Vnr.Vpd}for(var c=
b.getCurPos().getEPCol(),h=b.getPlyNum()-100,l=1,q=ObjUtil.clone(b.getCurPos()),g=b.getPlyNum();0<g;--g){f=b.getMoves()[--g];if(!f.undo)break;if(f.isTake()||f.isProm()||f.isPawn())break;if(b.getCurPos().getEPCol()!=c)break;if(g<=h)return CB.Vnr.Vnt;q.unmakeMove(f,f.undo);if(l&&d!=q.getCastleRights()&&(l=0,0>=h))break;if(0<g){f=b.getMoves()[--g];if(f.isTake()||f.isProm()||f.isPawn())break;if(b.getCurPos().getEPCol()!=c)break;if(g<=h)return CB.Vnr.Vnt;if(!f.undo)break;q.unmakeMove(f,f.undo);if(l){if(d!=
q.getCastleRights()&&(l=0,0>=h))break;if(c==q.getEPCol()&&q.boardEquals(b.getCurPos().board)&&(l++,0<=l))return CB.Vnr.Vns}}}}return CB.Vnr.Vpd};c.prototype.Vpg=function(b){if(!b.hasLegals())return b.isCheck()?CB.Vnr.V3o:CB.Vnr.V3p;for(var d=[0,0,0,0,0,0,0,0],c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],g=0,f=0,h=0;64>h;h++)d[b.board[h]&7]++,c[b.board[h]&15]++,(b.board[h]&7)==CB.Piece.BISHOP&&(b.board[h]&8?f=(h&1)==(h>>3&1)?f|1:f|2:g=(h&1)==(h>>3&1)?g|1:g|2);return d[CB.Piece.QUEEN]||d[CB.Piece.ROOK]||d[CB.Piece.PAWN]||
!(!d[CB.Piece.BISHOP]&&1>=d[CB.Piece.KNIGHT]||!d[CB.Piece.KNIGHT]&&(1>=d[CB.Piece.BISHOP]||3>g&&3>f&&(!g||!f||g==f)))?CB.Vnr.Vpd:CB.Vnr.V2k};c.prototype.canWin=function(b,d){var c=!1;try{for(var g=b.board,f=d==CB.Vaz.WHITE?0:CB.Vaz.Vb1,h=[],l=0;16>l;l++)h[l]=0;for(l=0;64>l;l++)h[g[l]&15]++,g[l]&&(g[l]&CB.Vaz.Vb1)==f&&(g[l]&CB.Piece.Vb2)!=CB.Piece.KING&&(c=!0);if(c&!h[CB.Piece.Vx]&&!h[CB.Piece.Vy]){var q=d==CB.Vaz.WHITE?CB.Piece.WHITE:CB.Piece.BLACK;if(!(h[q|CB.Piece.QUEEN]||h[q|CB.Piece.ROOK]||1!=
h[q|CB.Piece.BISHOP]+h[q|CB.Piece.KNIGHT]||h[CB.Piece.COLOUR-q|CB.Piece.BISHOP]||h[CB.Piece.COLOUR-q|CB.Piece.KNIGHT]))if(h[q|CB.Piece.BISHOP]){if(h[CB.Piece.COLOUR-q|CB.Piece.QUEEN]||h[CB.Piece.COLOUR-q|CB.Piece.ROOK])c=!1}else h[q|CB.Piece.KNIGHT]&&h[CB.Piece.COLOUR-q|CB.Piece.QUEEN]&&!h[CB.Piece.COLOUR-q|CB.Piece.ROOK]&&(c=!1)}}catch(r){c=!0,CB.V46("CanWin",r)}return c};return c}();"use strict";
CB.Vph=function(){var c=0,b=function(b){this.Vpj=b;this.Vpk=new CB.Timer(this.update.bind(this));this.isBlack=!1;this.id=++c};b.prototype.onTimeOverstepped=function(b){this.Vpj.Vpl(b)};b.prototype.Vpm=function(){this.Vpj.setText("---",!1);this.Vpj.setText("---",!0)};b.prototype.start=function(){};b.prototype.stop=function(){};b.prototype.Vpn=function(){return!1};b.prototype.Vpo=function(b){this.isBlack=b};b.prototype.Vjd=function(b){this.Vpo(b);this.start()};b.prototype.Vpp=function(b){};b.prototype.onTimeOverstepped=
function(b){this.Vpj.Vpl(b)};b.prototype.update=function(){};return b}();"use strict";
CB.Vl4=function(){var c=function(b,d){this.Vpq=void 0!==b?b:0;this.incSecs=d||0;1>this.Vpq&&0==this.incSecs&&(this.Vpq=1);this.flags=this.Vps=this.Vpr=0};c.Vpt=1;c.prototype.fromDataBuf=function(b){this.Vpq=b.V3c1()&65535;this.incSecs=b.V3c1()&65535;this.Vpr=b.V3c2();this.Vps=b.V3c2();this.flags=b.V3c1()};c.prototype.V3c0=function(b){b.V3by(this.Vpq&65535);b.V3by(this.incSecs&65535);b.V3bw(this.Vpr);b.V3bw(this.Vps);b.V3by(this.flags)};c.prototype.toString=function(){return this.Vpq+"m + "+this.incSecs+
"s"};c.prototype.Vpu=function(){return 0==this.Vpr&&0==this.Vps&&0==this.incSecs&&(1==this.Vpq||3==this.Vpq||5==this.Vpq)};c.Vpv=function(b){var d=new CB.Vl4(3,0);b&&(b=b.split(","),b.length&&(d.Vpq=b[0],0==d.Vpq&&(d.Vpq=5),1<b.length&&(d.incSecs=b[1])));return d};c.prototype.Vpw=function(){return 40*this.Vpq+this.incSecs};c.prototype.Vpx=function(){return 900<this.Vpy()?CB.Server.Vpz.Vq0:180<=this.Vpy()?CB.Server.Vpz.Vq1:CB.Server.Vpz.Vq2};c.prototype.Vq3=function(){switch(this.Vpx()){case CB.Server.Vpz.Vq2:return"Bullet";
case CB.Server.Vpz.Vq1:return"Blitz";case CB.Server.Vpz.Vq0:return"Slow"}};c.prototype.Vpy=function(){return 60*this.Vpq+40*this.incSecs};c.prototype.isBlitz=function(){return this.Vpx()==CB.Server.Vpz.Vq1};c.prototype.Vq4=function(){return this.Vpx()==CB.Server.Vpz.Vq2};c.prototype.Vq5=function(){return this.Vpx()==CB.Server.Vpz.Vq0};c.prototype.getStartSecs=function(){return 60*this.Vpq};return c}();"use strict";CB.Vq6={Vq7:-1,Vq8:-2,Vq9:-3,Vqa:-4,Vqb:0,Vqc:1,Vqd:2,Vqe:3};
CB.ChessClock=function(){var c=1,b=function(b,e,g){CB.ChessClock.superClass.call(this,b);this.Vqf=e;this.Vqg=g;this.result=CB.Vgu.Vgv;this.Vqh=!1;this.Vqj=this.Vqi=0;this.uniqueId=c++;this.Vqk=!1;this.Vql=null;this.Vqm=[]};CB.inherit(b,CB.Vph);b.prototype.Vqn=function(){return 10*this.Vqi};b.prototype.Vqo=function(){return 10*this.Vqj};b.prototype.destroy=function(){};b.prototype.Vqp=function(){this.Vh1(this.clockParams)};b.prototype.Vh1=function(b){this.Vqm=[!1,!1];this.result=CB.Vgu.Vgv;b?(this.clockParams=
b,this.Vqi=6E3*this.clockParams.Vpq,this.Vqj=6E3*this.clockParams.Vpq,0==this.clockParams.Vpq&&(this.Vqj=this.Vqi=1E3),this.Vpj.Vqq(new Date(10*this.Vqi),!1),this.Vpj.Vqq(new Date(10*this.Vqj),!0),this.Vpj.Vqr(3E3<this.clockParams.Vpy())):(this.Vpm(),delete this.clockParams);delete this.startTime;delete this.Vqs};b.prototype.Vqt=function(b){this.Vqh=b;this.Vpj.Vqt(b)};b.prototype.Vpp=function(b){this.stop();if(this.clockParams){for(var c=6E3*this.clockParams.Vpq,g=6E3*this.clockParams.Vpq,f=this.Vqh?
-1:1,h=0;h<b.getPlyNum();h++)if(h<b.getMoves().length){var l=b.getMoves()[h].getAnno();l&&(l=l.getItem(CB.AnnoType.TIME))&&(h&1?(g-=f*l.getTimeIn100th(),g+=f*this.clockParams.incSecs*100):(c-=f*l.getTimeIn100th(),c+=f*this.clockParams.incSecs*100))}this.Vqi=c;this.Vqj=g;this.Vqw();this.isBlack=0!=(b.getMoves().length&1);this.Vpj.Vpo(this.isBlack);this.Vqx(c,g);b.isOnLastMove()&&(b.hdr.getCBResult().isFinished()?this.Vpj.Vqy(b.hdr.getResult()):this.start())}};b.prototype.Vnk=function(b){this.isFinished()||
(this.result=b,this.stop(),this.Vpj.Vqy(b))};b.prototype.Vqz=function(){this.result=CB.Vgu.Vgv};b.prototype.isFinished=function(){return this.result>=CB.Vgu.BLACK_WINS&&this.result<=CB.Vgu.Vgw};b.prototype.Vpo=function(b){this.clockParams&&!this.isFinished()&&((this.isBlack=b)?this.Vqj+=100*this.clockParams.incSecs:this.Vqi+=100*this.clockParams.incSecs,this.Vqw(),this.Vpj.Vpo(b))};b.prototype.Vpn=function(){return this.Vqk};b.prototype.start=function(){this.Vqk||!this.clockParams||this.isFinished()||
(this.Vqk=!0,this.Vqw(),this.Vqx(this.Vqi,this.Vqj),this.Vpk.runOnce(1E3),delete this.Vqs)};b.prototype.stop=function(){if(this.Vqk&&(this.Vpk.stop(),this.startTime)){this.Vqk=!1;var b=(CB.V57()-this.startTime+5)/10;this.Vqs=b;this.isFinished()||this.Vr0(b,this.isBlack)}};b.prototype.Vqw=function(){this.startTime=CB.V57();this.Vr1=this.isBlack?this.Vqj:this.Vqi};b.prototype.Vr2=function(b){return b?this.Vqj:this.Vqi};b.prototype.Vqx=function(b,c){0<=b?this.Vpj.Vqq(new Date(10*b),!1):this.Vpj.Vqq(-1,
!1);0<=c?this.Vpj.Vqq(new Date(10*c),!0):this.Vpj.Vqq(-1,!0)};b.prototype.Vr0=function(b,c){if(this.clockParams){this.Vpj.Vr3(new Date(10*b),c);var g;this.Vpj.Vr3(new Date(10*b),c);g=this.Vqh?c?this.Vqj=this.Vr1+b:this.Vqi=this.Vr1+b:c?this.Vqj=this.Vr1-b:this.Vqi=this.Vr1-b;0>g?this.Vpj.Vqq(-1,c):this.Vpj.Vqq(new Date(10*g),c,this.Vr4());return g}};b.prototype.Vr5=function(b){if(this.clockParams&&!this.isFinished()){var c=(CB.V57()-this.startTime+5)/10;this.startTime=CB.V57()-10*b;this.Vr1-=b-c;
this.Vpk.stop();this.Vqs=b;this.Vr0(b,this.isBlack);this.update()}};b.prototype.reset=function(){this.Vh1(new CB.Vl4(0,0))};b.prototype.V55=function(){return this.Vqs?this.Vqs:this.startTime?(CB.V57()-this.startTime+5)/10:0};b.prototype.Vr6=function(){var d=b.Vr7(new Date(10*this.Vqi)),c=b.Vr7(new Date(10*this.Vqj)),g="";0<=this.Vqi&&(g=String.f("{0}={1}",lm.WHITE,d));d="";0<=this.Vqj&&(d=String.f("{0}={1}",lm.BLACK,c));(c=g)&&d&&(c+=", ");return c+d};b.prototype.Vr8=function(){return new CB.Vpb(CB.V4u.V4v(this.V55()))};
b.prototype.setText=function(b,c){this.Vpj.setText(b,c)};b.prototype.update=function(){var b=(CB.V57()-this.startTime+5)/10,c=this.Vr0(b,this.isBlack);if(0<c){this.Vpj.Vr9(1E3>c);var g=1E3;1E3>c&&(g=100);this.Vpk.runOnce(g);15<b/100&&b>c/3&&this.Vqg&&!this.Vqm[this.isBlack?1:0]&&(this.Vqg(this.isBlack),this.Vqm[this.isBlack?1:0]=!0)}else this.Vqf&&!this.isFinished()&&(this.Vpj.setText("TIME",this.isBlack),this.Vqf())};b.prototype.Vr4=function(){if(null!=this.Vql){var b,c;this.isBlack?(b=this.Vqj,
c=this.Vqi):(b=this.Vqi,c=this.Vqj);return Math.abs(b-c)<.1*Math.abs(b)&&2E3<b?CB.Vq6.Vqb:b>c?b>1.2*c?b>2*c?CB.Vq6.Vqe:CB.Vq6.Vqd:CB.Vq6.Vqc:b<.7*c?b<.5*c?b<.3*c&&1E3>b?CB.Vq6.Vqa:CB.Vq6.Vq9:CB.Vq6.Vq8:CB.Vq6.Vq7}return 0};b.Vr7=function(b,c,g){0>b&&(b=new Date(0));var f="";c&&(f=b.getUTCHours()+":");1E4>b.valueOf()&&!g?(c=b.getUTCSeconds(),b=Math.floor(b.getUTCMilliseconds()/100),f=c+"."+b+"s"):(c=b.getUTCMinutes(),1==c.toString().length&&0<c&&(c="0"+c),f+=c,c=Math.floor(b.getUTCSeconds()),1==c.toString().length&&
(c="0"+c),f+=":"+c);return f};return b}();"use strict";CB=CB||{};
CB.Vrb=function(){var c=function(){};c.prototype.destroy=function(){};c.prototype.deleteClock=function(){};c.prototype.onTimeOverstepped=function(b){};c.prototype.onAnnotate=function(){this.saved=!1;return!0};c.prototype.onTextAnno=function(b,d){this.saved=!1;return!0};c.prototype.Vld=function(){this.saved=!1;return!0};c.onEval=function(b){this.saved=!1;return!0};c.prototype.onPromoteLine=function(){this.saved=!1;return!0};c.prototype.onDeletePrevious=function(){this.saved=!1;return!0};c.prototype.onCutLine=
function(){this.saved=!1;return!0};c.prototype.onDeleteLine=function(){this.saved=!1;return!0};c.prototype.onBeforeUnload=function(){};c.prototype.getMoveEnterType=function(){return CB.Vhs.Vhw};c.prototype.Vl8=function(){return!0};c.prototype.Vm7=function(){return!0};c.prototype.Vm8=function(){return!0};c.prototype.Vm9=function(){return!0};c.prototype.mayLoadGames=function(){return!0};c.prototype.onKeyDown=function(b){return!1};c.prototype.isAnalysis=function(){return!1};c.prototype.setAnalysis=function(b){};
c.prototype.Vrc=function(){return!1};c.prototype.Vny=function(){};c.prototype.beforeGameLoad=function(){this.Vrd();this.saved=!1};c.prototype.Vre=function(){};c.prototype.Vnx=function(){};c.prototype.Vrd=function(){this.saveToCloud(!0);this.Vrf=0};c.prototype.onExit=function(){this.saveToCloud()};c.prototype.onEntry=function(){};c.prototype.shouldAnimatePosChange=function(){6;return CB.V5t.runsOnChessBaseDomain()||!CB.V5t.V6s()};c.prototype.saveToCloud=function(b){return V3c6.cloudMgr&&V3c6.cloudMgr.Vrg()&&
!this.saved&&this.Vrh(b)&&(6<this.kernel.game.getMoves().length||!this.kernel.game.isNormalInit())?(V3c6.cloudMgr.Vri(this.kernel.game),!0):!1};c.prototype.Vrh=function(){return!0};c.prototype.Vkz=function(){};c.prototype.Vnv=function(){};c.prototype.Vnu=function(){};c.prototype.Vnz=function(){};c.prototype.Vrj=function(){};c.prototype.Vjy=function(b){};c.prototype.Vn9=function(b){return!0};c.prototype.Vne=function(b){};c.prototype.Vnk=function(b){};c.prototype.updateClockFromGame=function(){};c.prototype.startClock=
function(){};c.prototype.stopClock=function(){};c.prototype.Vjx=function(){return CB.Vj4.Vj7};c.prototype.Vrk=function(b){};c.prototype.Vje=function(){return null};c.prototype.Vk0=function(b){};c.prototype.Vrl=function(){};c.prototype.Vrm=function(b){};c.prototype.setManualClock=function(){};c.prototype.Vrn=function(){};c.prototype.Vmn=function(b){b.reset()};c.prototype.newGame=function(){};c.prototype.Vku=function(){};c.prototype.createGUIElements=function(b){};c.prototype.Vkx=function(b){};c.prototype.Vkw=
function(b){};c.prototype.Vky=function(b){};c.prototype.Vl6=function(b){return b.isLegal()};c.prototype.Vkr=function(b){return!1};return c}();"use strict";CB=CB||{};
CB.Vro=function(){var c=function(b){CB.Vro.superClass.call(this);this.kernel=b;this.Vrp=!1};CB.inherit(c,CB.Vrb);c.prototype.loadGame=function(b){this.beforeGameLoad();this.kernel.game.assign(b);this.Vre()};c.prototype.destroy=function(){this.deleteClock()};c.prototype.deleteClock=function(){this.clock=null;this.Vrq&&(this.Vrq.stop(),delete this.Vrq);this.Vrr&&(this.Vrr.stop(),delete this.Vrr)};c.prototype.onTimeOverstepped=function(b){if(this.clock)this.clock.onTimeOverstepped(b)};c.prototype.Vn9=
function(b){this.clock&&this.clock.stop();return!0};c.prototype.isAnalysis=function(){return!0};c.prototype.Vrs=function(){"undefined"!=typeof V3c6&&!V3c6.analysisEngine&&CB.V5t.V65()&&V3c6.config.Vrt&&CB.AnalysisEngine&&(V3c6.analysisEngine=new CB.AnalysisEngine)};c.prototype.getMoveEnterType=function(){return this.kernel.game.isLineEnd()?CB.Vhs.Vhy:V3c6.Vru()?CB.Vhs.Vhv:this.isAnalysis()?CB.Vhs.Vhy:CB.Vhs.Vhw};c.prototype.Vnk=function(b){this.clock&&this.clock.Vnk(b)};c.prototype.updateClockFromGame=
function(){this.clock&&this.clock.Vpp(this.kernel.game)};c.prototype.startClock=function(){this.clock&&this.clock.start()};c.prototype.stopClock=function(){this.clock&&this.clock.stop()};c.prototype.Vjx=function(){return CB.Vj4.Vj7};c.prototype.Vnu=function(){this.updateClockFromGame()};c.prototype.setManualClock=function(b,d,c){delete this.Vrr;this.kernel.boardWin&&this.kernel.boardWin.Vrv()&&(this.clock&&this.clock.stop(),this.Vrq=new CB.ManualClock(this.kernel.boardWin.Vrv()),this.Vrq.Vrw(b,d,
c),this.Vrq.Vnk(this.kernel.game.hdr.getResult()),this.clock=this.Vrq)};c.prototype.Vnx=function(){this.Vrq&&this.Vrq.Vnk(this.kernel.game.hdr.getResult())};c.prototype.Vrn=function(b){delete this.Vrq;this.kernel.boardWin&&this.kernel.boardWin.Vrx()&&(this.Vrr=new CB.ChessClock(this.kernel.boardWin.Vrv()),this.Vrr.Vh1(b),b&&this.Vrr.Vpp(this.kernel.game),this.clock=this.Vrr)};c.prototype.Vry=function(b){b.fnMarkSquaresOnButtonDown=this.getMarkedSquaresOnButtonDown.bind(this)};c.prototype.Vrz=function(){this.kernel.boardWin&&
(this.kernel.boardWin.fnMarkSquaresOnButtonDown=null)};c.prototype.getMarkedSquaresOnButtonDown=function(b){return this.Vs0(b)};c.prototype.Vs1=function(){return"hsla( 0, 0%, 50%, 0.25 )"};c.prototype.Vs0=function(b){var d=[];this.kernel.game.getCurPos().V3b8().forEach(function(c){c.from==b&&d.push({sq:c.to,clr:this.Vs1()})}.bind(this));return d};c.prototype.setIsAutoplay=function(b){this.Vrp=b};return c}();CB.Vnn={Vno:2,Vs2:4,V10:8,Vs3:16};"use strict";CB=CB||{};
CB.Vs4=function(){var c=function(b,d){CB.Vro.call(this,b);this.Vs5=d||0;this.Vs6=[];this.Vs7=0;this.panEng=null};CB.inherit(c,CB.Vro);c.prototype.Vs8=function(b,d,c){return new CB.Vs9(b,this.Vs5,d,c)};c.prototype.Vlg=function(b){var d=this.Vs6[0],c=d.getMultiPV(),c=Math.max(c+b,1);this.Vsa();d.setMultiPV(c);this.goAll()};c.prototype.Vsb=function(b){this.Vs7<b+1&&(this.Vs7=b+1);if(V3c6.panelMgr.Vsc){var d=this.panEng=V3c6.panelMgr.Vsc(b);if(d&&!this.Vs6[b]){var c=this.Vs6[b]=this.Vs8(V3c6.config.getEngineUrl()[b],
b);d.setEngine(c);d.setAnalysis&&d.setAnalysis(this.isAnalysis());this.addOnBestMove(c);c.setTag(b)}}};c.prototype.Vsd=function(b){return!!this.Vs6[b]};c.prototype.Vse=function(b){this.Vs6[b]&&(this.Vs6[b].exit(),delete this.Vs6[b])};c.prototype.Vsf=function(b,d){this.kernel.game.getCurPos().isLegalMove(d.move)&&this.kernel.execEngineMove(d.move)};c.prototype.addOnBestMove=function(b){this.Vsg||(this.Vsg=b.addOnBestMoveListener(this.Vsf.bind(this)))};c.prototype.removeOnBestMove=function(b){b.removeOnBestMoveListener(this.Vsg);
this.Vsg=null};c.prototype.destroy=function(){this.Vsa();this.Vs6.forEach(function(b){b&&b.dispose()})};c.prototype.goAll=function(){this.Vs6.forEach(function(b){b&&b.go(this.kernel.game)}.bind(this))};c.prototype.Vsa=function(){this.Vs6.forEach(function(b){b&&b.stop()})};c.prototype.newGame=function(){this.Vsa();this.Vs6.forEach(function(b){b&&b.newGame()})};c.prototype.Vsh=c.prototype.Vsa;c.prototype.Vsi=function(){this.Vsj(!this.Vsk())};c.prototype.Vsj=function(b){};c.prototype.Vsk=function(){return!1};
c.prototype.Vsl=function(){return 0};c.prototype.Vkw=function(b){};c.prototype.Vky=function(b){};return c}();
CB.Vsm=function(){return{toggleEngine:function(){if(this.Vsd(0))return this.Vse(0),!1;this.Vsb(0);this.Vkz();return!0},incNMultiVars:function(c){this.Vsn+=c;1>this.Vsn&&(this.Vsn=1);64<this.Vsn&&(this.Vsn=64)},goAll:function(){this.Vso=!1;this.Vs6.forEach(function(c){c.setMultiPV(this.Vsn);c&&(c.go(this.kernel.game,{infinite:!0}),c.fireOnThreat(!1))}.bind(this))},toggleThreat:function(){if(this.Vso)this.goAll();else{var c=ObjUtil.clone(this.kernel.game.cur);if(c.swapSide()){this.Vso=!0;var b=new CB.Game(c);
this.Vs6.forEach(function(d){d.setMultiPV(this.Vsn);d&&(d.go(b,{infinite:!0}),d.fireOnThreat(!0))}.bind(this))}}},toggleAnalysisThreat:function(){if(V3c6.analysisEngine)if(this.Vso)V3c6.analysisEngine.Vsp(this.kernel),V3c6.analysisEngine.engine.fireOnThreat(!1);else{var c=ObjUtil.clone(this.kernel.game.cur);c.swapSide()&&(this.Vso=!0,c=new CB.Game(c),V3c6.analysisEngine.engine.setMultiPV(1),V3c6.analysisEngine.engine.go(c,{infinite:!0}),V3c6.analysisEngine.engine.fireOnThreat(!0))}}}}();"use strict";
CB.Vsq=function(){var c=function e(b,c,h){e.superClass.call(this,b,CB.Vsq.POOL_SIZE);this.kernel=b;this.Vsr=c||1;this.Vss=0;this.active=!0;this.Vst=new CB.Timer(this.Vsu.bind(this));this.Vsv=new CB.Timer(this.Vsw.bind(this));"undefined"!=typeof V3c6&&!V3c6.analysisEngine&&CB.V5t.V65()&&V3c6.config.Vrt&&CB.AnalysisEngine&&CB.V5t.V6y()&&(V3c6.analysisEngine=new CB.AnalysisEngine);this.Vsn=1;this.Vsx=h?h.hintTimeout||500:500;this.Vsy=h&&h.liveBookSilent?this.checkLiveBook.bind(this):this.Vsz.bind(this);
this.Vt0=0};CB.inherit(c,CB.Vs4);CB.Vsm&&CB.V0(c,CB.Vsm);c.POOL_SIZE=2;c.prototype.destroy=function(){V3c6.analysisEngine&&V3c6.analysisEngine.Vt1(this);this.superClass.destroy.call(this);V3c6.commands.Vt2(CB.Vm1.Vm6,!1)};c.prototype.Vku=function(){for(var b=0;b<this.Vsr;b++)this.Vsb(b);V3c6.commands.Vt2(CB.Vm1.Vm6,!0);this.panEng&&(this.Vt3=this.panEng.addOnMoveEnteredListener(this.kernel.Vkr.bind(this.kernel)))};c.prototype.createGUIElements=function(b){this.superClass.createGUIElements.call(this,
b);b.shouldAnimatePosChange=this.shouldAnimatePosChange.bind(this);CB.V5t.V64()&&(b.animSteps={forMove:.3,forPosition:.2});V3c6.analysisEngine&&V3c6.analysisEngine.Vt4(this)};c.prototype.Vny=function(){this.Vt0=0};c.prototype.Vn9=function(b){return this.fnAcceptMove?this.fnAcceptMove(b):!0};c.prototype.onExit=function(){this.superClass.onExit.call(this);V3c6.analysisEngine&&(V3c6.analysisEngine.Vt5(),V3c6.analysisEngine.Vt6())};c.prototype.Vne=function(b){if(this.fnAfterMove)return this.fnAfterMove(b)};
c.prototype.Vsh=function(){this.active=!1;this.superClass.Vsh.call(this)};c.prototype.isAnalysis=function(){return!0};c.prototype.setAnalysis=function(b){clearTimeout(this.timer);this.active=b;V3c6.commands.Vt2(CB.Vm1.Vm6,b);for(var c=0;c<this.Vs7;++c)b||void 0===this.Vs6[c]||this.Vs6[c].abort();b&&this.Vkz()};c.prototype.Vrm=function(b){throw Error("Cannot set search time on analysis playing mode");};c.prototype.Vrj=function(){this.setAnalysis(!0);for(var b=0;b<this.Vt7;++b)this.Vsb(b);this.Vkz()};
c.prototype.pendingMoveNow=!1;c.prototype.Vrc=function(){};c.ENGINE_DELAY=100;var b=new CB.V3bs;c.prototype.Vt8=new CB.V3bs;c.prototype.Vkz=function(){this.kernel==V3c6.panelMgr.getKernel()&&(this.Vsa(),V3c6.analysisEngine&&(V3c6.analysisEngine.Vt5(),V3c6.analysisEngine.Vt6()),this.Vrp||(b.exec(function(){this.active&&this.kernel.game.getCurPos().hasLegals()&&this.goAll()}.bind(this),c.ENGINE_DELAY),this.Vt8.exec(function(){this.Vsy();V3c6.analysisEngine&&V3c6.analysisEngine.Vsp(this.kernel)}.bind(this),
400)))};c.prototype.Vsz=function(){!V3c6.aTBLobby||!V3c6.aTBLobby.isLoggedIn()||this.Vt9&&this.Vt9.equals(this.kernel.game.getCurPos())&&!this.kernel.forceTBUpdate||(this.Vt9=ObjUtil.clone(this.kernel.game.getCurPos()),V3c6.panelMgr.tbBook&&(V3c6.panelMgr.tbBook.clear("Requesting moves..."),V3c6.panelMgr.tbBook.isVisible()&&V3c6.aTBLobby.Vta(this.kernel.game.getCurPos(),!1,!1,this.kernel.ticket),this.Vtb||(this.Vtb=V3c6.aTBLobby.addOnLiveBookListener(this.liveBookListener.bind(this))),this.Vtc||(this.Vtc=
V3c6.aTBLobby.addOnTBDataListener(this.tbDataListener.bind(this))),this.Vst.runOnce(5E3),V3c6.aTBLobby.Vtd(this.kernel.game.getCurPos()),this.Vsv.isActive||this.Vsv.runOnce(15E3)),this.kernel.forceTBUpdate=!1)};c.prototype.checkLiveBook=function(){this.Vte()?this.Vt9&&this.Vt9.equals(this.kernel.game.getCurPos())&&!this.kernel.forceTBUpdate||(this.Vt9=ObjUtil.clone(this.kernel.game.getCurPos()),V3c6.aTBLobby.Vta(this.kernel.game.getCurPos(),!1,!1,this.kernel.ticket),this.Vtb||(this.Vtb=V3c6.aTBLobby.addOnLiveBookListener(this.liveBookListener.bind(this))),
this.Vtc||(this.Vtc=V3c6.aTBLobby.addOnTBDataListener(this.tbDataListener.bind(this))),this.Vst.runOnce(5E3),this.kernel.forceTBUpdate=!1):V3c6.aTBLobby.fireOnLiveBookDisplay({ticket:this.kernel.ticket,moves:[]})};c.prototype.Vte=function(){var b=this.kernel.getCurPos();return 6<b.getPieces().length&&16>b.getPieces().length?!1:V3c6.aTBLobby.isLoggedIn()&&(6>this.Vt0||10>this.kernel.game.getMoveNo())&&(60>this.kernel.game.getMoveNo()||6>=b.getPieces().length||2550<this.kernel.game.hdr.Vhc())};c.prototype.liveBookListener=
function(b){V3c6.aTBLobby.fireOnLiveBookDisplay(b);this.Vst.stop();this.Vt0=0};c.prototype.tbDataListener=function(){};c.prototype.Vsu=function(){V3c6.panelMgr.tbBook&&V3c6.panelMgr.tbBook.setEmptyText(lm.FRESH_POSITION);this.Vt0++};c.prototype.Vsw=function(){V3c6.aTBLobby&&V3c6.aTBLobby.Vtf&&V3c6.panelMgr.tbBook&&V3c6.aTBLobby.Vtd(this.kernel.game.getCurPos())};c.prototype.Vtg=function(){this.active&&this.kernel.game.getCurPos().hasLegals()&&this.goAll()};c.prototype.getMoveEnterType=function(){return this.Vth?
this.Vth():CB.Vhs.Vhy};c.prototype.getMarkedSquaresOnButtonDown=function(b,c){return c&&!this.clickHintTimer.isActive()?this.Vti(b):this.Vs0(b)};c.prototype.startClickHintTimer=function(b){this.kernel.game.getMoveOffs()<this.Vtj||this.clickHintTimer.runOnce(this.Vsx,function(){var c=this.Vti(b);this.kernel.boardWin.Vtk(c)}.bind(this))};c.prototype.Vs1=function(){return"hsla( 0, 0%, 55%, 0.50 )"};c.prototype.Vti=function(b){var c=[];if(CB.Piece.side(this.kernel.getCurPos().board[b])!=this.kernel.getCurPos().getSideToMove())return c;
V3c6.analysisEngine&&(b=V3c6.analysisEngine.Vtl(b),b.forEach(function(b){for(var e=!1,l=0;!e&&l<c.length;l++)c[l].sq==b.sq&&(e=!0);e||c.push(b)}),0!=b.length||V3c6.analysisEngine.Vtm||V3c6.analysisEngine.Vsp(this.kernel));return c};c.prototype.onAnalysisLine=function(b,c,f){this.kernel.game.hasTBEval||(this.kernel.getCurPos().getBTM()&&(c=-c),this.kernel.game.fireOnEval(b,c,f))};c.prototype.toggleEngine=function(){if(this.Vsd(0))return this.Vse(0),!1;this.Vsb(0);this.Vkz();return!0};return c}();"use strict";
CB.AnnoType={Vgj:2,Vgp:3,SQUARE_LIST:4,ARROW_LIST:5,DIAGRAM:6,TIME:7,Vtn:8,Vf6:9,Vto:16,Vtp:16,Vtq:17,VIDEO:18,Vtr:19,Vts:20,Vtt:21,Vtu:22,Vtv:23,Vtw:24,Vtx:25,Vty:26,Vtz:27,Vu0:32,Vu1:32,Vu2:33,Vu3:34,Vu4:35,V1f:36,Vot:37,Vib:38,Vu5:127,Vu6:127,Vu7:127,Vu8:128,toString:function(c){for(var b in this)if(this[b]==c)return"AnnoType: "+b;return"Unknown AnnoType: "+c}};CB.Vlp={V5l:0,Vlq:1,Vlr:2,Vls:3,Vlt:4,Vlu:5,Vlv:6,Vu9:8,Vua:22,Vub:165,Vuc:166,WHITE:167,BLACK:168,Vud:169};
CB.Vlw={V5l:0,EQUAL:11,UNCLEAR:13,Vly:15,BLACK_BETTER:17,BLACK_WINS:19,WHITE_WINS:18,WHITE_BETTER:16,Vlx:14,COMPENSATION:44,Vue:132,Vuf:36,Vug:40,Vuh:138,Vui:32,Vuj:146};CB.Vuk={Vul:0,Vum:1,Vun:2,Vuo:3,Vup:4};CB.AnnoType.Vgh=CB.AnnoType.Vu8|CB.AnnoType.Vgj;CB.AnnoType.Vuq=CB.AnnoType.Vu8|CB.AnnoType.SQUARE_LIST;CB.AnnoType.Vur=CB.AnnoType.Vu8|CB.AnnoType.ARROW_LIST;CB.Vus={Vut:1,Vuu:2,Vuv:4,Vuw:8,Vux:16,Vuy:32,TACTICS:64,Vug:128,Vuz:256,Vv0:512,V2k:1024,Vv1:2048,Vv2:4096,Vv3:8192,Vv4:16384,Vix:32768};
var AnnoFactory={factory:function(c){return c in this?new this[c]:null}};function AnnoRec(){}AnnoRec.readHeader=function(c){return{inxMv:c.readBEInt24(),type:c.readByte(),len:c.readBEInt16()}};AnnoRec.writeHeader=function(c,b,d,e){c.writeBEInt24(b);c.writeByte(d);c.writeBEInt16(e)};AnnoRec.ANNO_HEAD_SIZE=6;
CB.Vgi=function(){var c=function(b){this.Vv5=CB.Vuk.Vul;this.m_str=b?b:""};c.prototype.getString=function(){return this.m_str};c.prototype.Vv6=function(b){this.m_str=b};c.prototype.toString=function(){return this.m_str};c.prototype.addText=function(b){this.m_str+=b};c.prototype.write=function(b,d){var c=AnnoRec.ANNO_HEAD_SIZE+2+this.m_str.length;b.V3bj(c);AnnoRec.writeHeader(b,0,d,c);b.writeByte(this.Vv5||CB.Vuk.Vul);b.writeByte(0);b.writeSizedString(this.m_str)};c.prototype.read=function(b,d){this.Vv5=
d.readByte();d.readByte();this.m_str=d.readSizedString(b-2);CB.V4a.V4e(this.m_str)&&(this.m_str=CB.V4a.V4c(this.m_str))};return c}();AnnoFactory[CB.AnnoType.Vgj]=CB.Vgi;AnnoFactory[CB.AnnoType.Vgh]=CB.Vgi;
CB.Vgq=function(){var c=function(){};c.prototype=[];c.prototype.toString=function(){return"syms"};c.prototype.Vv7=function(b){return 1<=b&&6>=b};c.prototype.Vv8=function(b){return 11<=b&&19>=b||44==b};c.prototype.addSymbol=function(b){for(var d=0;d<this.length;d++)if(this.Vv7(this[d])&&this.Vv7(b)||this.Vv8(this[d])&&this.Vv8(b)){b!=this[d]&&this.push(b);this.splice(d,1);return}for(d=0;d<this.length;d++)if(b==this[d]){this.splice(d,1);return}this.push(b)};c.prototype.hasExclusiveEval=function(b){for(var d=
0;d<this.length;d++)if(b==this[d]&&this.Vv8(b))return!0;return!1};c.prototype.getEval=function(){for(var b=0;b<this.length;b++)if(this.Vv8(this[b]))return this[b];return 0};c.prototype.write=function(b){var d=AnnoRec.ANNO_HEAD_SIZE+this.length;b.V3bj(d);AnnoRec.writeHeader(b,0,CB.AnnoType.Vgp,d);for(d=0;d<this.length;d++)b.writeByte(this[d])};c.prototype.read=function(b,d){for(var c=0;c<b;++c)this.push(d.readByte())};return c}();AnnoFactory[CB.AnnoType.Vgp]=CB.Vgq;
CB.Vv9={V5l:0,GREEN:1,YELLOW:2,RED:3,Vva:4};CB.Vv9.Vvb=function(c){switch(c){case "R":return CB.Vv9.RED;case "Y":return CB.Vv9.YELLOW;case "G":return CB.Vv9.GREEN;default:return CB.Vv9.V5l}};CB.Vv9.fromString=function(c){switch(c){case "R":case "LR":return CB.Vv9.RED;case "Y":return CB.Vv9.YELLOW;case "LG":case "G":return CB.Vv9.GREEN;default:return CB.Vv9.GREEN}};CB.Vv9.Vvc=function(c){switch(c){case CB.Vv9.RED:return"R";case CB.Vv9.YELLOW:return"Y";case CB.Vv9.GREEN:return"G"}return""};
CB.ColSq=function(){function c(b,d){this.field=b;this.Vvd=d}c.STRING_LEN=3;c.prototype.init=function(b){this.Vvd=CB.Vv9.GREEN;this.field=CB.Vbf.Vbk;4==b.length?(this.Vvd=CB.Vv9.fromString(b.substring(0,2)),this.field=CB.Vbf.fromString(b.substring(2,4))):3==b.length&&(this.Vvd=CB.Vv9.Vvb(b[0]),this.field=CB.Vbf.fromString(b.substring(1)))};c.readFactory=createReadFactory(c);c.prototype.read=function(b){this.Vvd=b.readByte();this.field=b.readByte();this.Vvd--;this.field--};c.prototype.write=function(b){b.writeByte(this.Vvd+
1);b.writeByte(this.field+1)};c.prototype.toString=function(){return CB.Vv9.Vvc(this.Vvd)+CB.Vbf.toString(this.field)};c.prototype.getColour=function(){switch(this.Vvd){case CB.Vv9.GREEN:return"hsla( 120, 65%, 50%, 0.75 )";case CB.Vv9.YELLOW:return"hsla( 60, 65%, 50%, 0.8 )";case CB.Vv9.RED:return"hsla( 0, 65%, 50%, 0.75 )"}};return c}();
CB.ColSqAnno=function(){var c=function(){};c.prototype=[];c.prototype.read=function(b,d){for(var c=0;c<b/2;c++){var g=new CB.ColSq(0,0);g.read(d);this.push(g)}};c.prototype.write=function(b){var d=AnnoRec.ANNO_HEAD_SIZE+2*this.length;b.V3bj(d);AnnoRec.writeHeader(b,0,CB.AnnoType.SQUARE_LIST,d);for(d=0;d<this.length;d++)this[d].write(b)};c.prototype.toString=function(b){b||(b=",");return this.join(b)};return c}();AnnoFactory[CB.AnnoType.SQUARE_LIST]=CB.ColSqAnno;
CB.ColArrow=function(){var c=function(b,d,c){this.from=b;this.to=d;this.Vvd=c};c.STRING_LEN=5;c.prototype.init=function(b){this.from=CB.Vbf.fromString(b.substring(1,3));this.to=CB.Vbf.fromString(b.substring(3,5));this.Vvd=CB.Vv9.Vvb(b[0])};c.readFactory=createReadFactory(c);c.prototype.read=function(b){this.Vvd=b.readByte();this.from=b.readByte();this.to=b.readByte();this.Vvd--;this.from--;this.to--};c.prototype.write=function(b){b.writeByte(this.Vvd+1);b.writeByte(this.from+1);b.writeByte(this.to+
1)};c.prototype.toString=function(){return CB.Vv9.Vvc(this.Vvd)};c.prototype.getColour=function(){switch(this.Vvd){case CB.Vv9.GREEN:return"hsla( 120, 70%, 50%, 0.90 )";case CB.Vv9.YELLOW:return"hsla( 50, 75%, 65%, 0.90 )";case CB.Vv9.RED:return"hsla( 1, 85%, 45%, 0.90 )"}};return c}();
CB.ColArrowAnno=function(){var c=function(){};c.prototype=[];c.prototype.read=function(b,d){for(var c=0;c<b/3;c++){var g=new CB.ColArrow;g.read(d);this.push(g)}};c.prototype.write=function(b){var d=AnnoRec.ANNO_HEAD_SIZE+3*this.length;b.V3bj(d);AnnoRec.writeHeader(b,0,CB.AnnoType.ARROW_LIST,d);for(d=0;d<this.length;d++)this[d].write(b)};c.prototype.toString=function(b){b||(b=",");return this.join(b)};return c}();AnnoFactory[CB.AnnoType.ARROW_LIST]=CB.ColArrowAnno;
AnnoFactory[CB.AnnoType.DIAGRAM]=CB.Vgi;CB.Vve=function(){var c=function(b,d){b&&(this.eval=b);d&&(this.depth=d)};c.prototype.eval=0;c.prototype.depth=0;c.prototype.toString=function(){return this.eval+"/"+this.depth};c.prototype.read=function(b,d){this.eval=d.V3c2();this.type=d.V3c2();this.depth=d.V3c2()};return c}();AnnoFactory[CB.AnnoType.Vu2]=CB.Vve;
CB.Vpb=function(){var c=function(b){this.time=b||0};c.prototype.getString=function(){var b=this.time>>24,d=this.time>>16&255,c=this.time>>8&255,g=this.time&255,f="";0<b&&(f=b+":");0<d&&(10>d&&0<f.length&&(f+="0"),f+=d+":");10>c&&0<f.length&&(f+="0");0==d&&0==b&&10>c?(f+=c,b=Math.floor(g/10),0<b&&(f+="."+b)):(b=Math.round(c+g/50),60==b&&(b=59),f+=b);return f};c.prototype.Vvf=function(b){this.time=CB.V4u.V4v(b)};c.prototype.toString=function(){return"Time: "+Math.round(this.getTimeIn100th()/100)+"s"};
c.prototype.read=function(b,d){this.time=d.readBEInt32()};c.prototype.write=function(b){var d=AnnoRec.ANNO_HEAD_SIZE+4;b.V3bj(d);AnnoRec.writeHeader(b,0,CB.AnnoType.TIME,d);b.writeBEInt32(this.time)};c.prototype.getTimeIn100th=function(){return 36E4*(this.time>>24)+6E3*(this.time>>16&255)+100*(this.time>>8&255)+(this.time&255)};return c}();AnnoFactory[CB.AnnoType.TIME]=CB.Vpb;
CB.Vvg=function(){var c=function(){};c.prototype.toString=function(){return"TC=NOTIMPL"};c.prototype.read=function(b,d){for(var c=0;c<b;c++)d.readByte()};return c}();AnnoFactory[CB.AnnoType.V1f]=CB.Vvg;
CB.Vvh=function(){var c=function(){this.data=[]};c.prototype.toString=function(){return"Sync"};c.prototype.read=function(b,d){for(var c=0;c<b;c++)this.data[c]=d.readByte()};c.prototype.write=function(b){var d=AnnoRec.ANNO_HEAD_SIZE+4;b.V3bj(d);AnnoRec.writeHeader(b,0,CB.AnnoType.Vot,d);for(var c=0,d=this.data.length;c<d;++c)b.writeByte(this.data[c])};return c}();AnnoFactory[CB.AnnoType.Vot]=CB.Vvh;
CB.Vvi=function(){var c=function(b){this.Vvj=b};c.prototype.toString=function(){return"Medal-"+this.Vvj};c.prototype.getString=function(){return this.toString()};c.prototype.getOneMedal=function(){return this.Vvj&CB.Vus.Vv0?CB.Vus.Vv0:this.Vvj&CB.Vus.Vv2?CB.Vus.Vv2:this.Vvj&CB.Vus.Vuy?CB.Vus.Vuy:this.Vvj&CB.Vus.Vv3?CB.Vus.Vv3:this.Vvj};c.prototype.read=function(b,d){this.Vvj=d.V3bx()};c.prototype.write=function(b){var d=AnnoRec.ANNO_HEAD_SIZE+4;b.V3bj(d);AnnoRec.writeHeader(b,0,CB.AnnoType.Vu3,d);
b.V3bi(this.Vvj)};return c}();AnnoFactory[CB.AnnoType.Vu3]=CB.Vvi;
CB.EvalProfileAnno=function(){var c=function(b,d,c){this.first=b||0;this.last=d||0;this.Vvk=c||[];this.min=32767;this.max=-32767;this.Vvl()};c.Vvm=32767;c.prototype.Vvl=function(){for(var b=0;b<this.Vvk.length;b++)this.Vvk[b]!=c.Vvm&&(this.Vvk[b]>this.max&&(this.max=this.Vvk[b]),this.Vvk[b]<this.min&&(this.min=this.Vvk[b]))};c.prototype.range=function(){return Math.max(1,this.max-this.min)};c.prototype.toString=function(){return"MoveMedal"};c.prototype.isValid=function(){return this.last>this.first};
c.prototype.read=function(b,d){this.Vvk=[];this.last=this.first=0;var e=d.readBEInt16();if(600>e){for(var g=0;g<e;g++){var f=new ArrayBuffer(4),h=new DataView(f);h.setInt8(0,d.readByte());h.setInt8(1,d.readByte());h.setInt8(2,d.readByte());h.setInt8(3,d.readByte());f=h.getInt16(2);h.getInt8(1);h=h.getInt8(0);-1==h?this.Vvk.push(c.Vvm):(1==h&&(f=0>f?-3E4+f:3E4-f),this.Vvk.push(f))}this.last=e-1}this.Vvl()};c.readFactory=createReadFactory(c);c.prototype.write=function(b){var d=AnnoRec.ANNO_HEAD_SIZE+
2+4*this.Vvk.length;b.V3bj(d);AnnoRec.writeHeader(b,0,CB.AnnoType.Vib,d);b.writeBEInt16(this.last);for(d=0;d<this.Vvk.length;d++){var e=new ArrayBuffer(4),e=new DataView(e);this.Vvk[d]==c.Vvm?(e.setInt8(0,255),e.setInt16(2,0)):(e.setInt8(0,0),e.setInt16(2,this.Vvk[d]));e.setInt8(1,0);b.writeBEInt32(e.getInt32(0))}};return c}();AnnoFactory[CB.AnnoType.Vib]=CB.EvalProfileAnno;
CB.Vvn=function(){var c=function(b){this.move=b;this.solved=!1;this.nHelpClicked=0;this.Vvo={};this.Vvo.en=={question:"",help:""}},b=["en","de","es","it"],d=[CB.V7a.ENG,CB.V7a.DEU,CB.V7a.ESP,CB.V7a.ITA];c.prototype.getQuestion=function(d){if(this.Vvo[d])return this.Vvo[d].question;for(d=0;d<b.length;d++)if(this.Vvo[b[d]])return this.Vvo[b[d]].question};c.prototype.getHelp=function(d){if(this.Vvo[d])return this.Vvo[d].help;for(d=0;d<b.length;d++)if(this.Vvo[b[d]])return this.Vvo[b[d]].help};c.prototype.toString=
function(){return"Training"};c.prototype.Vvp=function(b){b.V3bx();b.V3bv();for(var d=b.V3bv(),c=0;c<d&&10>c;c++){var h=this.Vvq(b),l=h.ln;l&&(this.Vvo[l]||(this.Vvo[l]={}),this.Vvo[l].question=h.str)}h=b.V3bv();for(c=0;c<h&&10>c;c++)this.Vvq(b);d=b.V3bv();for(c=0;c<d&&10>c;c++)if(h=this.Vvq(b),l=h.ln)this.Vvo[l]||(this.Vvo[l]={}),this.Vvo[l].help=h.str;h=b.V3bv();for(c=0;c<h&&10>c;c++)this.Vvq(b)};c.prototype.Vvr=function(b){b.V3bv();this.Vvp(b);for(var d=b.readByte(),c=0;c<d&&60>c;c++){var h=b.readByte(),
l=b.readByte(),q=b.readByte();b.readByte();var r=b.V3bv();0==c&&(this.move=new CB.Vei(h,l,q));for(h=0;h<r;h++)this.Vvq(b)}};c.prototype.Vvs=function(b){b.V3bv();this.Vvp(b);for(var d=b.readByte(),c=0;c<d&&60>c;c++){b.readByte();for(var h=b.V3bv(),l=0;l<h;l++)this.Vvq(b);h=b.V3bv();for(l=0;l<h;l++)this.Vvq(b)}};c.prototype.read=function(b,d){d.V3bv();switch(d.readByte()){case 1:this.Vvr(d);break;case 2:this.Vvs(d)}};c.prototype.write=function(c){var g=new CB.V9z;g.V3bj(1);g.writeByte(1);var f=g.getPos();
g.V3bj(0);g.V3bi(300);g.V3bj(0);var h=g.getPos();g.V3bj(0);for(var l=0,q=0;q<b.length;q++)this.Vvo[b[q]]&&this.Vvo[b[q]].question&&(l=this.Vvt(this.Vvo[b[q]].question,g,l,d[q]));g.Vaj(h,function(){g.V3bj(l)});g.V3bj(0);var r=0,h=g.getPos();g.V3bj(0);for(q=0;q<b.length;q++)this.Vvo[b[q]]&&this.Vvo[b[q]].help&&(r=this.Vvt(this.Vvo[b[q]].help,g,r,d[q]));g.Vaj(h,function(){g.V3bj(r)});g.V3bj(0);g.writeByte(1);g.writeByte(this.move.from);g.writeByte(this.move.to);g.writeByte(this.move.prom);g.writeByte(5);
g.V3bj(0);var t=g.getPos();g.Vaj(f,function(){g.V3bj(t)});f=AnnoRec.ANNO_HEAD_SIZE+g.getSize();c.V3bj(f);AnnoRec.writeHeader(c,0,CB.AnnoType.Vf6,f);c.writeData(g)};c.prototype.Vvq=function(b){b.readByte();var d=b.readByte(),c=b.V3bv();b=b.readSizedString(c);CB.V4a.V4e(b)&&(b=CB.V4a.V4c(b));return{ln:CB.V7a.V7f(d),str:b}};c.prototype.Vvt=function(b,d,c,h){b&&(d.writeByte(h),d.writeByte(0),d.V3bj(b.length),d.writeSizedString(b),c++);return c};return c}();AnnoFactory[CB.AnnoType.Vf6]=CB.Vvn;"use strict";
CB.Vvu={V5l:0,Vvv:1,Vvw:2,Vvx:3,Vvy:4,Vvz:5,Vw0:6,Vw1:7,Vw2:8,Vw3:9,Vw4:10,Vw5:11,Vw6:12,Vw7:13,Vw8:14,Vw9:15,Vwa:16,Vwb:17,Vwc:18,Vwd:19,Vwe:20,Vwf:21,Vwg:22,Vwh:23,Vwi:24,Vwj:25,Vwk:26,Vwl:27,Vwm:28,Vwn:29,Vwo:30,Vwp:31,Vwq:32,Vwr:33,Vws:34,Vwt:35,Vwu:36,Vwv:37,Vww:38,Vwx:39,Vwy:40,Vwz:41,Vx0:42,Vx1:43,Vx2:44,Vx3:45,Vx4:46,Vx5:47,Vx6:48,Vx7:49,Vx8:50,Vx9:51,Vxa:52,Vxb:53,Vxc:54,Vxd:55,Vxe:56,Vxf:57,Vxg:58,Vxh:59,Vxi:60,Vxj:61,Vxk:62,Vxl:63,Vxm:64,Vxn:65,Vxo:66,Vxp:67,Vxq:68,Vxr:69,Vxs:70,Vxt:71,
Vxu:72,Vxv:73,Vxw:74,Vxx:75,Vxy:76,Vxz:77,Vy0:78,Vy1:79,Vy2:80,Vy3:81,Vy4:82,Vy5:83,Vy6:84,Vy7:85,Vy8:86,Vy9:87,Vya:88,Vyb:89,Vyc:90,Vyd:91,Vye:92,Vyf:93,Vyg:94,Vyh:95,Vyi:96,Vyj:97,Vyk:98,Vyl:99,Vym:100,Vyn:101,Vyo:102,Vyp:103,Vyq:104,Vyr:105,Vys:106,Vyt:107,Vyu:108,Vyv:109,Vyw:110,Vyx:111,Vyy:112,Vyz:113,Vz0:114,Vz1:115,Vz2:116,Vz3:117,Vz4:118,Vz5:119,Vz6:120,Vz7:121,Vz8:122,Vz9:123,Vza:124,Vzb:125,Vzc:126,Vzd:127,Vze:128,Vzf:129,Vzg:130,Vzh:131,Vzi:132,Vzj:133,Vzk:134,Vzl:135,Vzm:136,Vzn:137,Vzo:138,
Vzp:139,Vzq:140,Vzr:141,Vzs:142,Vzt:143,Vzu:144,Vzv:145,Vuj:146,Vzw:147,Vv2:148,Vgw:149,Vzx:150,Vzy:151,Vzz:152,V100:153,V101:154,V102:155,V103:156,V104:157,V105:158,V106:159,V107:160,V108:161,V109:162,V10a:163,V10b:164,V10c:165,Vuc:166,WHITE:167,BLACK:168,Vud:169};var V3bq={};V3bq[CB.Vvu.V5l]="";V3bq[CB.Vvu.Vvv]="!";V3bq[CB.Vvu.Vvw]="?";V3bq[CB.Vvu.Vvx]="\u203c";V3bq[CB.Vvu.Vvy]="??";V3bq[CB.Vvu.Vvz]="!?";V3bq[CB.Vvu.Vw0]="?!";V3bq[CB.Vvu.Vw1]="!";V3bq[CB.Vvu.Vw2]="\ue021";V3bq[CB.Vvu.Vw3]="";
V3bq[CB.Vvu.Vw4]="=";V3bq[CB.Vvu.Vw5]="=";V3bq[CB.Vvu.Vw6]="=";V3bq[CB.Vvu.Vw7]="\u221e";V3bq[CB.Vvu.Vw8]="\ue02f";V3bq[CB.Vvu.Vw9]="\ue02e";V3bq[CB.Vvu.Vwa]="\u00b1";V3bq[CB.Vvu.Vwb]="\ue01a";V3bq[CB.Vvu.Vwc]="+-";V3bq[CB.Vvu.Vwd]="-+";V3bq[CB.Vvu.Vwe]="+-";V3bq[CB.Vvu.Vwf]="-+";V3bq[CB.Vvu.Vwg]="\ue01d";V3bq[CB.Vvu.Vwh]="\ue01d";V3bq[CB.Vvu.Vwi]="\ue023";V3bq[CB.Vvu.Vwj]="\ue023";V3bq[CB.Vvu.Vwk]="\ue023";V3bq[CB.Vvu.Vwl]="\ue023";V3bq[CB.Vvu.Vwm]="\ue023";V3bq[CB.Vvu.Vwn]="\ue023";
V3bq[CB.Vvu.Vwo]="\ue02d";V3bq[CB.Vvu.Vwp]="\ue02d";V3bq[CB.Vvu.Vwq]="\ue02d";V3bq[CB.Vvu.Vwr]="\ue02d";V3bq[CB.Vvu.Vws]="\ue02d";V3bq[CB.Vvu.Vwt]="\ue02d";V3bq[CB.Vvu.Vwu]="\ue012";V3bq[CB.Vvu.Vwv]="\ue012";V3bq[CB.Vvu.Vww]="\ue012";V3bq[CB.Vvu.Vwx]="\ue012";V3bq[CB.Vvu.Vwy]="\ue013";V3bq[CB.Vvu.Vwz]="\ue013";V3bq[CB.Vvu.Vx0]="\ue004\ue000";V3bq[CB.Vvu.Vx1]="\ue004\ue000";V3bq[CB.Vvu.Vx2]="\ue000";V3bq[CB.Vvu.Vx3]="\ue000";V3bq[CB.Vvu.Vx4]="\ue000";V3bq[CB.Vvu.Vx5]="\ue000";V3bq[CB.Vvu.Vx6]="\ue01e";
V3bq[CB.Vvu.Vx7]="\ue01e";V3bq[CB.Vvu.Vx8]="\ue01e";V3bq[CB.Vvu.Vx9]="\ue01e";V3bq[CB.Vvu.Vxa]="\ue01e";V3bq[CB.Vvu.Vxb]="\ue01e";V3bq[CB.Vvu.Vxc]="\ue00f";V3bq[CB.Vvu.Vxd]="\ue00f";V3bq[CB.Vvu.Vxe]="\ue00f";V3bq[CB.Vvu.Vxf]="\ue00f";V3bq[CB.Vvu.Vxg]="\ue00f";V3bq[CB.Vvu.Vxh]="\ue00f";V3bq[CB.Vvu.Vxi]="\ue00e";V3bq[CB.Vvu.Vxj]="\ue00e";V3bq[CB.Vvu.Vxk]="\ue00e";V3bq[CB.Vvu.Vxl]="\ue00e";V3bq[CB.Vvu.Vxm]="\ue00e";V3bq[CB.Vvu.Vxn]="\ue00e";V3bq[CB.Vvu.Vxo]="\ue010\ue0181";V3bq[CB.Vvu.Vxp]="\ue010\ue0188";
V3bq[CB.Vvu.Vxq]="";V3bq[CB.Vvu.Vxr]="";V3bq[CB.Vvu.Vxs]="\ue010\ue024";V3bq[CB.Vvu.Vxt]="\ue010\ue024";V3bq[CB.Vvu.Vxu]="";V3bq[CB.Vvu.Vxv]="";V3bq[CB.Vvu.Vxw]="\ue010\ue024";V3bq[CB.Vvu.Vxx]="\ue010\ue024";V3bq[CB.Vvu.Vxy]="";V3bq[CB.Vvu.Vxz]="";V3bq[CB.Vvu.Vy0]="\ue010\ue029";V3bq[CB.Vvu.Vy1]="\ue010\ue029";V3bq[CB.Vvu.Vy2]="\ue010\ue029";V3bq[CB.Vvu.Vy3]="\ue010\ue029";V3bq[CB.Vvu.Vy4]="";V3bq[CB.Vvu.Vy5]="";V3bq[CB.Vvu.Vy6]="";V3bq[CB.Vvu.Vy7]="";V3bq[CB.Vvu.Vy8]="\ue010\ue028";
V3bq[CB.Vvu.Vy9]="\ue010\ue028";V3bq[CB.Vvu.Vya]="";V3bq[CB.Vvu.Vyb]="";V3bq[CB.Vvu.Vyc]="\ue010\ue027";V3bq[CB.Vvu.Vyd]="\ue010\ue027";V3bq[CB.Vvu.Vye]="";V3bq[CB.Vvu.Vyf]="";V3bq[CB.Vvu.Vyg]="\ue010\ue026";V3bq[CB.Vvu.Vyh]="\ue010\ue026";V3bq[CB.Vvu.Vyi]="";V3bq[CB.Vvu.Vyj]="";V3bq[CB.Vvu.Vyk]="\ue010\ue025";V3bq[CB.Vvu.Vyl]="\ue010\ue025";V3bq[CB.Vvu.Vym]="";V3bq[CB.Vvu.Vyn]="";V3bq[CB.Vvu.Vyo]="";V3bq[CB.Vvu.Vyp]="";V3bq[CB.Vvu.Vyq]="";V3bq[CB.Vvu.Vyr]="";V3bq[CB.Vvu.Vys]="";
V3bq[CB.Vvu.Vyt]="";V3bq[CB.Vvu.Vyu]="";V3bq[CB.Vvu.Vyv]="";V3bq[CB.Vvu.Vyw]="";V3bq[CB.Vvu.Vyx]="";V3bq[CB.Vvu.Vyy]="";V3bq[CB.Vvu.Vyz]="";V3bq[CB.Vvu.Vz0]="";V3bq[CB.Vvu.Vz1]="";V3bq[CB.Vvu.Vz2]="";V3bq[CB.Vvu.Vz3]="";V3bq[CB.Vvu.Vz4]="";V3bq[CB.Vvu.Vz5]="";V3bq[CB.Vvu.Vz6]="";V3bq[CB.Vvu.Vz7]="";V3bq[CB.Vvu.Vz8]="\ue010\ue01f";V3bq[CB.Vvu.Vz9]="\ue010\ue01f";V3bq[CB.Vvu.Vza]="\ue010\ue01f";V3bq[CB.Vvu.Vzb]="\ue010\ue01f";V3bq[CB.Vvu.Vzc]="";V3bq[CB.Vvu.Vzd]="";V3bq[CB.Vvu.Vze]="";
V3bq[CB.Vvu.Vzf]="";V3bq[CB.Vvu.Vzg]="\ue017";V3bq[CB.Vvu.Vzh]="\ue017";V3bq[CB.Vvu.Vzi]="\ue017";V3bq[CB.Vvu.Vzj]="\ue017";V3bq[CB.Vvu.Vzk]="\ue017";V3bq[CB.Vvu.Vzl]="\ue017";V3bq[CB.Vvu.Vzm]="\ue01c";V3bq[CB.Vvu.Vzn]="\ue01c";V3bq[CB.Vvu.Vzo]="\ue01c";V3bq[CB.Vvu.Vzp]="\ue01c";V3bq[CB.Vvu.Vzq]="\u2206";V3bq[CB.Vvu.Vzr]="\ue022";V3bq[CB.Vvu.Vzs]="\ue020";V3bq[CB.Vvu.Vzt]="\u2264";V3bq[CB.Vvu.Vzu]="=";V3bq[CB.Vvu.Vzv]="RR";V3bq[CB.Vvu.Vuj]="N";V3bq[CB.Vvu.Vzw]="\ue010";V3bq[CB.Vvu.Vv2]="\ue01f";
V3bq[CB.Vvu.Vgw]="\ue018";V3bq[CB.Vvu.Vzx]="\ue019";V3bq[CB.Vvu.Vzy]="\ue001";V3bq[CB.Vvu.Vzz]="\ue001";V3bq[CB.Vvu.V100]="\ue002";V3bq[CB.Vvu.V101]="\ue003";V3bq[CB.Vvu.V102]="\ue02b";V3bq[CB.Vvu.V103]="\ue02b";V3bq[CB.Vvu.V104]="\ue02c";V3bq[CB.Vvu.V105]="\ue02c";V3bq[CB.Vvu.V106]="\ue007";V3bq[CB.Vvu.V107]="\ue007";V3bq[CB.Vvu.V108]="\ue008";V3bq[CB.Vvu.V109]="\ue008";V3bq[CB.Vvu.V10a]=">";V3bq[CB.Vvu.V10b]=">";V3bq[CB.Vvu.V10c]="*";V3bq[CB.Vvu.Vuc]="**";V3bq[CB.Vvu.WHITE]="";
V3bq[CB.Vvu.BLACK]="";V3bq[CB.Vvu.Vud]="";var PieceGlyphs={};PieceGlyphs[CB.Piece.PAWN]="\ue029";PieceGlyphs[CB.Piece.KNIGHT]="\ue028";PieceGlyphs[CB.Piece.BISHOP]="\ue027";PieceGlyphs[CB.Piece.ROOK]="\ue026";PieceGlyphs[CB.Piece.QUEEN]="\ue025";PieceGlyphs[CB.Piece.KING]="\ue024";var V3b3={};V3b3[CB.Piece.PAWN]="\u2659";V3b3[CB.Piece.KNIGHT]="\u2658";V3b3[CB.Piece.BISHOP]="\u2657";V3b3[CB.Piece.ROOK]="\u2656";V3b3[CB.Piece.QUEEN]="\u2655";V3b3[CB.Piece.KING]="\u2654";V3bq.getText=function(c){return V3bq[c]};
V3bq.addTexts=function(c,b){var d={};d[GlyphType.MOVE_GLYPH]=d[GlyphType.PRE_GLYPH]=d[GlyphType.POST_GLYPH]="";for(var e=0,g=b.length;e<g;++e){var f=b[e],h=V3bq.getText(f);d[GlyphType.getType(f)]+=h}return d[GlyphType.PRE_GLYPH]+c+d[GlyphType.MOVE_GLYPH]+d[GlyphType.POST_GLYPH]};CB.V3b5=ObjUtil.clone(CB.V3b2);CB.V3b5.arrStrPieces[CB.Piece.Vn]=CB.V3b5.arrStrPieces[CB.Piece.Vo]=PieceGlyphs[CB.Piece.KING];CB.V3b5.arrStrPieces[CB.Piece.Vp]=CB.V3b5.arrStrPieces[CB.Piece.Vq]=PieceGlyphs[CB.Piece.QUEEN];
CB.V3b5.arrStrPieces[CB.Piece.Vr]=CB.V3b5.arrStrPieces[CB.Piece.Vs]=PieceGlyphs[CB.Piece.ROOK];CB.V3b5.arrStrPieces[CB.Piece.Vt]=CB.V3b5.arrStrPieces[CB.Piece.Vu]=PieceGlyphs[CB.Piece.BISHOP];CB.V3b5.arrStrPieces[CB.Piece.Vv]=CB.V3b5.arrStrPieces[CB.Piece.Vw]=PieceGlyphs[CB.Piece.KNIGHT];CB.V3b5.arrStrPieces[CB.Piece.Vx]=CB.V3b5.arrStrPieces[CB.Piece.Vy]="";CB.UnicodeV3b5=ObjUtil.clone(CB.V3b2);CB.UnicodeV3b5.arrStrPieces[CB.Piece.Vn]=CB.UnicodeV3b5.arrStrPieces[CB.Piece.Vo]=V3b3[CB.Piece.KING];
CB.UnicodeV3b5.arrStrPieces[CB.Piece.Vp]=CB.UnicodeV3b5.arrStrPieces[CB.Piece.Vq]=V3b3[CB.Piece.QUEEN];CB.UnicodeV3b5.arrStrPieces[CB.Piece.Vr]=CB.UnicodeV3b5.arrStrPieces[CB.Piece.Vs]=V3b3[CB.Piece.ROOK];CB.UnicodeV3b5.arrStrPieces[CB.Piece.Vt]=CB.UnicodeV3b5.arrStrPieces[CB.Piece.Vu]=V3b3[CB.Piece.BISHOP];CB.UnicodeV3b5.arrStrPieces[CB.Piece.Vv]=CB.UnicodeV3b5.arrStrPieces[CB.Piece.Vw]=V3b3[CB.Piece.KNIGHT];CB.UnicodeV3b5.arrStrPieces[CB.Piece.Vx]=CB.UnicodeV3b5.arrStrPieces[CB.Piece.Vy]="";
var GlyphType={PRE_GLYPH:0,MOVE_GLYPH:1,POST_GLYPH:2,getType:function(c){return c<=CB.Vvu.Vw3||c>=CB.Vvu.V10c&&c<=CB.Vvu.Vud||c===CB.Vvu.Vwg||c===CB.Vvu.Vwh?GlyphType.MOVE_GLYPH:c<=CB.Vvu.Vzp||c>=CB.Vvu.Vuj?GlyphType.POST_GLYPH:GlyphType.PRE_GLYPH}};NotationLocalizations.glyphs=CB.V3b5;NotationLocalizations.uglyphs=CB.UnicodeV3b5;"use strict";
CB.TokenType={V5l:0,UNKNOWN:1,V10d:2,V10e:3,V10f:4,V10g:5,V10h:6,V10i:7,V10j:8,V10k:9,V10l:10,V10m:11,V10n:12,V10o:13,V10p:14,V10q:15,V3o:16,MOVE:17,V10r:18,V10s:19,V5n:20,V10t:21,V10u:22,V10v:23,Vlr:24,Vlt:25,Vlq:26,Vls:27,V10w:28,V10x:29};function Token(c,b){this.type=c;b&&(this.str=b)}Token.prototype.type=CB.TokenType.UNKNOWN;Token.prototype.str="";Token.prototype.toString=function(){var c=EnumToString(CB.TokenType,this.type);this.str&&(c+="("+this.str+")");return c};
function V3ba(c){this.m_it=new StringIterator(c);this.m_it.Next()}V3ba.prototype.m_it=new StringIterator("");V3ba.prototype.m_inHeader=!1;
V3ba.prototype.nextToken=function(){this.m_it.skipWhile(Char.IsWhiteSpace,!0);if(this.m_it.isEOF())return new Token(CB.TokenType.V10d);var c=this.m_it.Current();this.m_it.Next();switch(c){case "X":case "#":return new Token(CB.TokenType.V3o);case "+":return new Token(CB.TokenType.V10q);case "$":return new Token(CB.TokenType.V10p);case "*":return new Token(CB.TokenType.V10l,c);case "[":return this.m_inHeader=!0,new Token(CB.TokenType.V10e);case "]":return this.m_inHeader=!1,new Token(CB.TokenType.V10f);
case "(":return new Token(CB.TokenType.V10j);case ")":return new Token(CB.TokenType.V10k);case ".":return new Token(CB.TokenType.V10t)}if(this.m_inHeader){if(Char.IsLetterOrDigit(c))return c+=this.m_it.AcceptWhile(Char.IsLetterOrDigit,!0),new Token(CB.TokenType.V10g,c);if('"'===c)return c=this.m_it.AcceptUntil(Char.getIsChar("]"),!0),c=c.trim(),'"'===c.charAt(c.length-1)&&(c=c.slice(0,c.length-1)),new Token(CB.TokenType.V10h,c)}if("{"===c)return c=this.m_it.AcceptUntil(Char.getIsChar("}"),!0),this.m_it.skipWhile(Char.getIsChar("}"),
!0),new Token(CB.TokenType.V10i,c);if("0"===c){if(this.m_it.AcceptStr("-0-0",!0))return new Token(CB.TokenType.V10u);if(this.m_it.AcceptStr("-0",!0))return new Token(CB.TokenType.V10v);if(this.m_it.AcceptStr("-1",!0))return new Token(CB.TokenType.V10n)}if("O"===c){if(this.m_it.AcceptStr("-O-O",!0))return new Token(CB.TokenType.V10u);if(this.m_it.AcceptStr("-O",!0))return new Token(CB.TokenType.V10v)}if("1"===c){if(this.m_it.AcceptStr("-0",!0))return new Token(CB.TokenType.V10m);if(this.m_it.AcceptStr("/2-1/2",
!0))return new Token(CB.TokenType.V10o)}return Char.IsDigit(c)?(c+=this.m_it.AcceptWhile(Char.IsDigit,!0),new Token(CB.TokenType.V5n,c)):"-"===c&&this.m_it.AcceptChar("-",!0)?new Token(CB.TokenType.V10s):"?"===c?this.m_it.AcceptChar("?",!0)?new Token(CB.TokenType.Vlt):this.m_it.AcceptChar("!",!0)?new Token(CB.TokenType.V10w):new Token(CB.TokenType.Vlr):"!"===c?this.m_it.AcceptChar("?",!0)?new Token(CB.TokenType.V10x):this.m_it.AcceptChar("!",!0)?new Token(CB.TokenType.Vls):new Token(CB.TokenType.Vlq):
V3ba.isMoveChar(c)?(c+=this.m_it.AcceptWhile(V3ba.isMoveChar,!0),new Token(CB.TokenType.MOVE,c)):new Token(CB.TokenType.UNKNOWN,c)};V3ba.isMoveChar=function(c){return"a"<=c&&"h">=c||"1"<=c&&"8">=c||"x"===c||"="===c||Char.IsUpperCaseLetter(c)&&CB.Piece.fromString(c)!==CB.Piece.V5l};
CB.V10y=function(){var c=function(b){this.V10z=new V3ba(b);this.V110=null};c.prototype.V111=function(b){this.V110||(this.V110=this.V10z.nextToken());return b&&b(this.V110.type)?this.V110:null};c.V112=function(b){return function(d){return d===b}};c.prototype.pop=function(b){if(b=this.V111(b))this.V110=null;return b};c.prototype.V113=function(b){return this.pop(c.V112(b))};c.prototype.V114=function(b){return this.V111(c.V112(b))};return c}();"use strict";function PGNSubLine(){}
PGNSubLine.prototype=[];
CB.V115=function(){var c=function(b){this.V116=null;this.V11c=this.V11b=this.V11a=this.V119=this.V118=this.V117=!1;this.V11e=this.V11d=CB.Piece.V5l;this.V11j=this.V11i=this.V11h=this.V11g=this.V11f=-1;b&&(this.V116=b,this.init(b))};c.g_regex=/^(K|Q|R|N|B)?([a-h]?)([1-8]?)(x?)([a-h])([1-8])(?:=(K|Q|R|N|B))?$/;c.prototype.init=function(b){c.g_regex.exec(b)&&(this.V11d=CB.Piece.fromString(RegExp.$1),this.V11d=CB.Piece.Vb3(this.V11d),RegExp.$2&&(this.V11f=CB.Vbf.Vdx(RegExp.$2)),RegExp.$3&&(this.V11g=
CB.Vbf.Vdy(RegExp.$3)),RegExp.$4&&(this.V11c=!0),RegExp.$5&&(this.V11h=CB.Vbf.Vdx(RegExp.$5)),RegExp.$6&&(this.V11i=CB.Vbf.Vdy(RegExp.$6)),RegExp.$7&&(this.V11e=CB.Piece.fromString(RegExp.$7),this.V11e=CB.Piece.Vb3(this.V11e)),0>this.V11g&&this.V11d===CB.Piece.V5l&&(this.V11d=CB.Piece.PAWN),0<=this.V11h&&0<=this.V11i&&(this.V11j=CB.Vbf.Vdz(this.V11h,this.V11i)))};c.prototype.V11k=function(){this.V11b=!0};c.prototype.isNullMove=function(){return this.V11b};c.prototype.V11l=function(){this.V11a=!0};
c.prototype.isLongCastling=function(){return this.V11a};c.prototype.V11m=function(){this.V119=!0};c.prototype.isShortCastling=function(){return this.V119};c.prototype.setCheck=function(b){this.V117=b};c.prototype.setMate=function(b){this.V118=b};c.prototype.isTake=function(){return this.V11c};c.prototype.matches=function(b){var d=b.from;return this.V11j!==b.to||this.V11d!==CB.Piece.V5l&&(b=b.getMoved(),CB.Piece.Vb3(b)!==this.V11d)?!1:this.matchesFrom(d)};c.prototype.matchesFrom=function(b){return 0<=
this.V11f&&this.V11f!==CB.Vbf.Ve1(b)||0<=this.V11g&&this.V11g!==CB.Vbf.Ve0(b)?!1:!0};c.prototype.getMoved=function(){return this.V11d};c.prototype.getTo=function(){return this.V11j};c.prototype.getProm=function(){return this.V11e};return c}();CB.V11n=function(){var c=function(b){this.m_strComment=b};c.prototype.m_strComment="";c.prototype.getComment=function(){return this.m_strComment};return c}();function PGNGlyph(c){this.m_glyph=c}PGNGlyph.prototype.m_glyph=0;PGNGlyph.prototype.getGlyph=function(){return this.m_glyph};
function PGNMoveNum(c,b){this.m_num=c;this.m_isBlack=b}function PGNGame(){this.m_hdrs={};this.m_mainLine=new PGNSubLine}PGNGame.prototype.m_hdrs={};PGNGame.prototype.m_mainLine=new PGNSubLine;PGNGame.prototype.getHeaders=function(){return this.m_hdrs};PGNGame.prototype.getMainLine=function(){return this.m_mainLine};
CB.V11o=function(){function c(b){switch(b){case CB.TokenType.Vlr:return CB.Vvu.Vvw;case CB.TokenType.V10w:return CB.Vvu.Vw0;case CB.TokenType.Vlq:return CB.Vvu.Vvv;case CB.TokenType.V10x:return CB.Vvu.Vvz;case CB.TokenType.Vls:return CB.Vvu.Vvx;case CB.TokenType.Vlt:return CB.Vvu.Vvy;default:return CB.Vvu.V5l}}function b(b){return c(b)!==CB.Vvu.V5l}var d=function(b){this.V11p=b?b:new CB.V10y("")};d.prototype.V11q=function(){var b=new PGNGame;return this.V11r(b.m_hdrs)&&this.V11s(b)?b:null};d.prototype.V11s=
function(b){this.V11t(b.m_mainLine);var d=this.V11u();null!=d&&(b.m_hdrs.result=d);return!0};d.V11v=function(b){return b===CB.TokenType.V10n||b===CB.TokenType.V10m||b===CB.TokenType.V10o||b===CB.TokenType.V10l};d.prototype.V11u=function(){var b=this.V11p.pop(d.V11v);if(b)switch(b.type){case CB.TokenType.V10n:return CB.Vgu.BLACK_WINS;case CB.TokenType.V10m:return CB.Vgu.WHITE_WINS;case CB.TokenType.V10o:return CB.Vgu.DRAW;case CB.TokenType.V10l:return CB.Vgu.Vgw}return null};d.prototype.V11t=function(b){for(var d=
this.V11w();null!=d;d=this.V11w())b.push(d);return!0};d.prototype.V11w=function(){var b=this.V11x();return b||(b=this.V11y())||(b=this.V11z())||(b=this.V120())?b:(b=this.V121())?b:null};d.prototype.V11z=function(){if(this.V11p.V113(CB.TokenType.V10p)){var d=this.V11p.V113(CB.TokenType.V5n);return new PGNGlyph(Number(d.str))}return(d=this.V11p.pop(b))?(d=c(d.type),new PGNGlyph(d)):null};d.prototype.V120=function(){if(this.V11p.V113(CB.TokenType.V10j)){var b=new PGNSubLine;this.V11t(b);this.V11p.V113(CB.TokenType.V10k);
return b}return null};d.prototype.V121=function(){var b=this.V11p.V113(CB.TokenType.V10i);return b?new CB.V11n(b.str):null};d.prototype.V11x=function(){var b=this.V11p.V113(CB.TokenType.V5n);if(b){for(var d=0;this.V11p.V113(CB.TokenType.V10t);)++d;return new PGNMoveNum(Number(b.str),1<d)}return null};d.V122=function(b){return b===CB.TokenType.MOVE||b===CB.TokenType.V10u||b===CB.TokenType.V10v||b===CB.TokenType.V10s};d.prototype.V11y=function(){var b=this.V11p.pop(d.V122);if(b){var c=new CB.V115;switch(b.type){case CB.TokenType.MOVE:c.init(b.str);
break;case CB.TokenType.V10u:c.V11l();break;case CB.TokenType.V10v:c.V11m();break;case CB.TokenType.V10s:c.V11k()}if(b.type!==CB.TokenType.V10s){var b=null!=this.V11p.V113(CB.TokenType.V10q),e=!1;b||(e=null!=this.V11p.V113(CB.TokenType.V3o));c.setCheck(b);c.setMate(e)}return c}return null};d.prototype.V11r=function(b){for(;this.V123(b););return!0};d.prototype.V123=function(b){if(this.V11p.V113(CB.TokenType.V10e)){var d=this.V11p.V113(CB.TokenType.V10g),c=this.V11p.V113(CB.TokenType.V10h);this.V11p.V113(CB.TokenType.V10f);
d=d.str.toLowerCase();b[d]=c.str;return!0}return!1};d.V124=function(b){for(var d=new CB.ColSqAnno,c=0,e=b.length;c<e;++c){var q=b[c],r=new CB.ColSq;r.init(q);d.push(r)}return d};d.V125=function(b){for(var d=new CB.ColArrowAnno,c=0,e=b.length;c<e;++c){var q=b[c],r=new CB.ColArrow;r.init(q);d.push(r)}return d};d.V126=function(b){var d="";0<b.length&&(d=b[0]);return new CB.Vgi(d)};d.V127=function(b){b=b[0].split(":");b=3600*Number(b[0])+60*Number(b[1])+Number(b[2]);var d=new CB.Vpb;d.Vvf(100*b);return d};
d.V128=function(b){var d=.01*Number(b[0]),c=0;1<b.length&&(c=Number(b[1]));return new CB.Vve(d,c)};d.V129=function(b){var d=new CB.Vvn;if(7<=b.length&&2==b[0].length){d.move=b[4];for(var c=0;c<b.length/7;c++)2==b[7*c].length&&(d.Vvo[b[7*c].toLowerCase()]={question:b[7*c+1],help:b[7*c+2]})}else d.move=b[3],d.Vvo.en={question:b[0],help:b[1]};d.fromPGN=!0;return d};d.V12a=function(b){var d=[];if(3<b.length){for(var c=parseInt(b[0]),e=parseInt(b[1]),q=0;q<e-c+1;q++)d.push(parseInt(b[q+2]));b=new CB.EvalProfileAnno(c,
e,d);b.fromPGN=!0;return b}};d.V12b=function(b){return new CB.Vvi(parseInt(b[0]))};var e={cal:{func:d.V125,type:CB.AnnoType.ARROW_LIST},csl:{func:d.V124,type:CB.AnnoType.SQUARE_LIST},dia:{func:d.V126,type:CB.AnnoType.DIAGRAM},eval:{func:d.V128,type:CB.AnnoType.Vu2},emt:{func:d.V127,type:CB.AnnoType.TIME},tqu:{func:d.V129,type:CB.AnnoType.Vf6},mdl:{func:d.V12b,type:CB.AnnoType.Vu3},evp:{func:d.V12a,type:CB.AnnoType.Vib}};d.V12c=/(-?(?:\d?\d\.\s?\d\d?)|(?:#\d+))\/\s?(\d+)/;d.V12d=function(b,c){if(0<=
c.indexOf("/")){var h=c.replace(/\r/g," "),h=h.replace(/\n/g," "),h=h.replace(/\s\s/g," "),l=d.V12c.exec(h);if(l){var q=l[1],q=q.replace(/\s/g,"");0!==q.indexOf("#")&&q.indexOf("-#");q=new CB.Vve(eval,Number(l[2]));b.setAnnoItem(CB.AnnoType.Vu2,q);q=l.index;l=l[0].length;c=h.substring(0,q)+h.substring(q+l)}}if(0<=c.indexOf("[%"))for(h=[],c=PGNCommand.process(c,h),q=0,l=h.length;q<l;++q){var r=h[q];if(r.m_cmd in e){var t=e[r.m_cmd],w=t.type;(r=t.func(r.m_args))&&b.setAnnoItem(w,r)}}c&&b.setAnnoItem(CB.AnnoType.Vgj,
new CB.Vgi(c))};return d}();
CB.PGN=function(){function c(b){return void 0===b?"":"?"===b?"":b}function b(b){return b&&"?"!==b}function d(d){var g=new CB.Vh0;g.Vh2(c(d.white));g.Vh3(c(d.black));g.Vh6(c(d.event));g.Vh8(c(d.site));g.Vh7(c(d.annotator));g.Vh5(c(d.eco));var f=d.result;"string"===typeof f?g.setResult(CB.Vgu.fromString(f)):g.setResult(f);g.Vh9(c(d.round));b(d.whiteelo)&&g.Vha(parseInt(d.whiteelo));b(d.blackelo)&&g.Vhb(parseInt(d.blackelo));b(d.date)&&g.Vhd(d.date);b(d.timecontrol)&&g.Vh1(e(d.timecontrol));b(d.plycount)&&
(g.plyCount=parseInt(d.plycount)+1>>1);return g}function e(b){return(b=q.exec(b))?new CB.Vl4(Number(b[1])/60,Number(b[2])):new CB.Vl4}function g(b,d){if(b.isLongCastling()){var c=d.isWTM()?CB.Vei.g_mvW000:CB.Vei.g_mvB000;if(l.V12e||d.isLegalMove(c))return ObjUtil.clone(c)}if(b.isShortCastling()&&(c=d.isWTM()?CB.Vei.g_mvW00:CB.Vei.g_mvB00,l.V12e||d.isLegalMove(c)))return ObjUtil.clone(c);if(b.isNullMove())return new CB.Vei;var e=b.getTo(),g=b.getMoved(),f=d.getSideToMove(),h=b.getProm();g!==CB.Piece.PAWN&&
(h=CB.Piece.V5l);c=[];switch(g){case CB.Piece.KNIGHT:d.getKnightAttacksTo(e,f,c);break;case CB.Piece.BISHOP:d.getBishopAttacksTo(e,f,c);break;case CB.Piece.ROOK:d.getRookAttacksTo(e,f,c);break;case CB.Piece.QUEEN:d.getQueenAttacksTo(e,f,c);break;case CB.Piece.KING:d.getKingAttacksTo(e,f,c);break;case CB.Piece.PAWN:b.isTake()?(g=d.getPiece(e),g===CB.Piece.V5l&&e===d.getEPField()&&(g=d.getEPVictimField(),g=d.getPiece(g)),g!==CB.Piece.V5l&&CB.Piece.side(g)!==f&&d.getPawnAttacksTo(e,f,c)):(g=d.getPiece(e),
g===CB.Piece.V5l&&d.getPawnMovesTo(e,f,c));break;default:return null}if(!c.length)return null;if(1===c.length&&l.V12e)return new CB.Vei(c[0],e,h);f=b.matchesFrom.bind(b);c=c.filter(f);if(!c.length)return null;if(1===c.length&&l.V12e)return new CB.Vei(c[0],e);c=c.map(function(b){return new CB.Vei(b,e)});c=d.filterLegals(c);return c.length?1===c.length?c[0]:null:null}function f(b){for(var d=["\r\n","\n","\r"],c=0,e=d.length;c<e;++c){var g=d[c];if(0<=b.indexOf(g))return g}return null}function h(b,d){for(var c=
ObjUtil.clone(b),e=new CB.Vep,f=null,l=null,q=null,r=0,t=d.length;r<t;++r){var G=d[r];if(!(G instanceof PGNMoveNum))if(G instanceof CB.V115){G=g(G,c);if(!G)break;f=c.makeMove(G);l=G;e.push(G);q&&(q.m_strComment&&0==q.m_strComment.indexOf("[%")?CB.V11o.V12d(l,q.getComment()):l.setAnnoItem(CB.AnnoType.Vgh,new CB.Vgi(q.getComment())),q=null)}else if(G instanceof PGNSubLine){if(l){c.unmakeMove(l,f);G=h(c,G);l.addLine(G);var H=e.length-1;G.setParentLine(e);G.setParentMoveIndex(H);c.makeMove(l)}}else G instanceof
CB.V11n?l?(G=G.getComment(),CB.V11o.V12d(l,G)):q=G:G instanceof PGNGlyph&&l&&((H=l.getAnnoItem(CB.AnnoType.Vgp))||(H=new CB.Vgq),H.push(G.getGlyph()),l.setAnnoItem(CB.AnnoType.Vgp,H))}for(c=0;c<e.length-1;c++)e[c].hasAnno()&&e[c].getAnno().hasTraining()&&(f=e[c].getAnno().getTraining(),l=e[c+1],f.move=new CB.Vei(l.from,l.to,l.prom));return e}var l={},q=/^(\d+)(?:\+(\d+))?$/;l.V12f=function(b){var d=b.indexOf("[");-1==d&&(d=b.indexOf("1."));0<d&&(b=b.slice(d));var d=[],c=f(b);if(null==c)return[b];
if("\r\n"===c){var e=b;if(0<=e.indexOf("\r\r")||0<=e.indexOf("\n\n"))b=b.replace(/\r\n/g,"\n"),b=b.replace(/\r/g,"\n"),c="\n"}for(var e=c+c+"[",c=2*c.length,g=0,h=b.indexOf(e,g);-1!=h&&g<b.length;h=b.indexOf(e,g))g=b.substring(g,h),d.push(g),g=h+c;g<b.length&&(b=b.substring(g),d.push(b));return d};var r=/\[(\w+)\s+\"([\s\S]*?)\"\]/g,t=/^\s*$/;l.V12g=function(b){var d=f(b);d||(d="\r\n");for(var c=new StringBuilder,e=r.lastIndex=0,g;g=r.exec(b);){var h=g.index,e=b.substring(e,h);t.test(e)||(c.append(d),
c.append(e.trim()),c.append(d),c.append(d));var e=g[1],l=g[2],l=l.replace(/\r/g," "),l=l.replace(/\n/g," ");c.appendFormat('[{0} "{1}"]',e,l);c.append(d);e=h+g[0].length}b=b.substring(e);t.test(b)||(c.append(d),c.append(b.trim()),c.append(d),c.append(d));return c.toString()};l.V12e=!0;l.Vka=function(b){if(b){b=new CB.V10y(b);var c=(new CB.V11o(b)).V11q();if(!c)return null;var e=null;b=c.getHeaders();b.fen&&(e=b.fen);b=d(b);e=new CB.Position(e);c=c.getMainLine();c=h(e,c);c=new CB.Game(e,c);c.setHeader(b);
return c}return new CB.Game};l.V12h=function(b){b=new CB.V10y(b);var c={};(new CB.V11o(b)).V11r(c);return c?d(c):null};return l}();var PGN=CB.PGN;function PGNCommand(c,b){c||(c="");b||(b=[]);this.m_cmd=c;this.m_args=b}PGNCommand.prototype.init=function(c,b){this.m_cmd=c;PGNCommand.initArgs(b,this.m_args)};
PGNCommand.initArgs=function(c,b){c=c.replace(/[\n]/g," ");c=c.replace(/[\r]/g,"");var d=/(\".*?\")|([-\w\n]+),|([-:\w\n]+)$/g;d.lastIndex=0;var e;do if(e=d.exec(c)){var g=e[1]||e[2]||e[3];if(g)'"'===g[0]&&(g=g.substring(1),'"'===g[g.length-1]&&(g=g.substring(0,g.length-1))),b.push(g),d.lastIndex===e.index&&++d.lastIndex,e=0<=e.index;else break}else break;while(e)};PGNCommand.g_regexWhole=/\[%(\w+)((?:\"[^\"]*\"|[^\"\]]*)*)\]/;
PGNCommand.process=function(c,b){for(;c;){var d=PGNCommand.g_regexWhole.exec(c);if(d){var e=new PGNCommand,g=d[0];e.init(d[1],d[2]);b.push(e);c=c.substring(0,d.index)+c.substring(d.index+g.length)}else break}return c};"use strict";CB.V12i=ObjUtil.copyTo(CB.V3b2,{strProm:"="},!0);
CB.V12j=function(){function c(b,d){b.appendFormat("[%{0}",d);if(arguments.length-2){b.append(" ");for(var c=2;c<arguments.length;++c){var e=arguments[c];2<c&&b.append(",");b.append(e)}}b.appendFormat("]")}function b(d,e,l){for(var q=0;q<e.length;++q){var r=e[q],t=r.getMoved(),w=d,z=l,B=0==q,v=r.getAnno();if(r.hasAnno()){var y=w,C=v[CB.AnnoType.Vgh];C&&(y.append("{"),y.append(C.getString()),y.append("} "))}y=r.getMoved();if(B||CB.Piece.side(y)===CB.Vaz.WHITE)w.append(z),w.append("."),CB.Piece.side(y)===
CB.Vaz.BLACK&&w.append(".."),w.append(" ");B=g.getMoveNota(r);w.append(B);w.append(" ");if(r.hasAnno()){B=w;if(y=v.getItem(CB.AnnoType.Vgp))for(var C=0,D=y.length;C<D;++C)B.appendFormat("${0} ",y[C]);y=v.count();v.hasItem(CB.AnnoType.Vgp)&&--y;v.hasItem(CB.AnnoType.Vgh)&&--y;if(y){B.append("{");if(C=v[CB.AnnoType.TIME]){var y=B,C=C.getTimeIn100th(),D=Math.floor(C/36E4),C=C-36E4*D,E=Math.floor(C/6E3);c(y,"emt",String.formatEx("{0}:{1}:{2}",D,E,Math.round((C-6E3*E)/100,1)))}(v=v[CB.AnnoType.Vgj])&&
B.append(v.getString());B.append("} ")}}if(r.hasLines())for(B=0;B<r.getSubLinesCount();++B)w.append("("),v=r.getLine(B),b(w,v,z),w.append(")");CB.Piece.side(t)===CB.Vaz.BLACK&&++l}}function d(b,d,c){b.appendFormat('[{0} "{1}"]',d,c);b.append("\r\n")}var e={},g=new CB.Vie(CB.V12i);e.V12k=function(c){var e=new StringBuilder,g=c.getHeader();d(e,"Event",g.getEvent());d(e,"White",g.getWhite());d(e,"Black",g.getBlack());d(e,"Site",g.getSite());d(e,"Round",g.getRoundStr());d(e,"Annotator",g.getAnnotator());
d(e,"Result",g.getCBResult().toPGNString());d(e,"Date",g.getDateStr());g.getEloWhite()&&d(e,"WhiteElo",g.getEloWhite());g.getEloBlack()&&d(e,"BlackElo",g.getEloBlack());d(e,"PlyCount",c.getMainLine().length);if(!c.isNormalInit()){d(e,"Setup",1);var q=c.getStartPos().toFEN();d(e,"FEN",q)}if(g=g.getClockParams())q=g.getStartSecs().toString(),g.incSecs&&(q+="+"+g.incSecs),d(e,"TimeControl",q);e.append("\r\n");g=1;c.isNormalInit()||(g=c.getStartPos().getMoveNum());b(e,c.getMainLine(),g);e.append(c.hdr.getCBResult().toPGNString());
e.append("\r\n");e.append("\r\n");return e.toString()};e.V12l=function(b){b=this.V12k(b);for(var d=['Site "?"','Round "?"','Date "????.??.??"','Result "*"'],c=0;c<d.length;c++)b=b.replace("/["+d[c]+"/]/ig","");b=encodeURI(b);b=b.replace(/\.%20/ig,".");b=b.replace(/%0D%0A/ig,"%20");b=b.replace(/%20%20/ig,"%20");return b=b.replace(/%20%20/ig,"%20")};return e}();"use strict";
CB.V12m=function(){var c=function(){this.nGames=0;this.games=[];this.headers=[];this.V12n=0};c.prototype.V12o=function(b){};c.prototype.incUsers=function(){this.V12n++};c.prototype.decUsers=function(){this.V12n--};c.prototype.getNUsers=function(){return this.V12n};c.prototype.V12p=function(){};c.prototype.V12q=function(){this.V12r&&this.V12r.V12q(this)};c.prototype.V12s=function(){this.V12r&&this.V12r.V12s(this)};c.prototype.V12t=function(b,d){alert("not implemented")};c.prototype.V12u=function(){return!0};
c.prototype.V12v=function(){return!1};c.prototype.V12w=function(){return!1};c.prototype.getGameCount=function(){return this.nGames};c.prototype.V12x=function(){return"Database"};c.prototype.V12y=function(){return this.V12u()};c.prototype.getHeaderJson=function(b){return{gameNo:b,white:"Not available",black:"",event:"",date:new CB.Date(0),result:"",eco:""}};c.prototype.V12z=function(b,d,c){for(var g=[];d<=c&&d<=this.getGameCount();d++){var f=this.getHeaderJson(d);g.push(f)}(new Ext.util.DelayedTask).delay(100,
function(){b(g)})};c.prototype.getGame=function(b){return new CB.Game};c.prototype.loadGameAsync=function(b,d){var c=this.getGame(d);(new CB.Timer(function(){b(c)})).runOnce(10)};c.prototype.V130=function(b){};c.prototype.V131=function(){};c.prototype.setSubSet=function(b){this.V132=b};c.prototype.V133=function(){delete this.V132};c.prototype.V134=function(){return this.V132?this.V132.length:this.getGameCount()};c.prototype.getGameNoInSet=function(b){return this.V132&&b<=this.V132.length&&0<b?this.V132[b-
1]:b};c.prototype.getSetInxOfGameNo=function(b){if(this.V132)for(var d=0;d<this.V132.length;d++){if(this.V132[d]==b)return d+1}else return b};c.prototype.V135=function(b){this.headers.filter(function(b){return void 0!==b}).length==this.nGames?this.V136(b):this.V12r&&this.V12r.V137(this.V12p(),b)};c.prototype.clearFilter=function(){this.V133()};c.prototype.V136=function(b){CB.V138.V139("Searching locally ... ",null,2E4);b=new RegExp(b,"i");for(var d=[],c=1;c<this.headers.length;c++)this.headers[c].matchesFilterVal(b)&&
d.push(this.headers[c].nGame);CB.V138.V13a();this.setSubSet(d)};return c}();"use strict";
CB.V13b=function(){var c=function(b,d){this.pgn="";this.V13c=[];this.headers=[];this.games=[];this.V13d=!1;this.V13e=d;"string"==typeof b?this.V13f(b):(this.V13g(b),this.V13h=b.name)};CB.inherit(c,CB.V12m);c.prototype.getGameCount=function(){return this.V13c.length};c.prototype.V12x=function(){return this.V13h};c.prototype.V12p=function(){return function(b){for(var d=[],c=0;c<b.length;c++){var g=this.getGame(b[c]);d.push(g)}return d}.bind(this)};c.prototype.getHeaderJson=function(b){if(0>=b)return null;
void 0===this.headers[b]&&b<this.V13c.length+1&&(this.headers[b]=PGN.V12h(this.V13c[b-1]));var d=this.headers[b];return d?(d.nGame=b,d.toJson()):this.superClass.getHeaderJson(b)};c.prototype.V12z=function(b,d,c){if(this.V13d)this.V13i(b,d,c);else{var g=this.V13e;this.V13e=function(){g&&g(this);this.V13i(b,d,c)}.bind(this)}};c.prototype.V13i=function(b,d,c){for(var g=[];d<=c&&d<=this.getGameCount();d++){var f=this.getHeaderJson(d);g.push(f)}(new Ext.util.DelayedTask).delay(100,function(){b(g)})};c.prototype.getGame=
function(b){return b?PGN.Vka(this.V13c[b-1]):new CB.Game};c.prototype.V12t=function(b,d){alert("Sorry, you cannot save into a PGN database.")};c.prototype.toString=function(){for(var b="",d=1;d<=this.getGameCount();d++)var c=this.getGame(d),c=CB.V12j.V12k(c),b=b+c;return b};c.prototype.V13f=function(b){this.V13c=PGN.V12f(b);void 0!==this.V13e&&this.V13e(this);this.V13d=!0};c.prototype.V13g=function(b){if("function"==typeof FileReader){var d=new FileReader;d.onloadend=function(){this.V13j(d)}.bind(this);
d.onerror=function(){this.V13k(d)}.bind(this);d.onprogress=function(){}.bind(this);d.onload=function(){}.bind(this);d.readAsText(b)}};c.prototype.V13j=function(b){b.result&&(this.V13c=PGN.V12f(b.result),void 0!==this.V13e&&this.V13e(this));this.V13d=!0};c.prototype.V13k=function(b){alert("Could not load file, sorry");this.V13d=!0};return c}();"use strict";CB.V13l={V5l:0,V13m:1,V13n:2,V13o:4,V13p:8,V13q:16,V13r:32,V13s:64,V13t:128,V13u:256};
CB.V13v=function(){var c=function(b,d){this.strUrl=b;this.type=d};c.prototype.fromDataBuf=function(b){this.strUrl=b.V3br(2048);this.type=b.V3c1()};return c}();"use strict";CB.V13w={V5l:0,LIVE:1};
CB.V13x=function(){var c=function(){this.items=[]};c.prototype.add=function(b){this.items.push(b)};c.prototype.fromDataBuf=function(b){this.V13y=b.V3c1();for(var d=b.V3c1(),c=0;c<d;c++){var g=new CB.V13v;g.fromDataBuf(b);this.items.push(g)}this.nFlags=b.V3c1();this.V13z=b.V3c1()};c.prototype.isLive=function(){return this.nFlags&CB.V13w.LIVE};c.prototype.getURL=function(b){for(var d="",c=0;c<this.items.length;c++)b&this.items[c].type&&(d=this.items[c].strUrl);return d};return c}();"use strict";
CB.V140=function(){var c=function(){};c.prototype.read=function(b){b.rewind();try{this.strMsg=b.V3b7(4096)}catch(d){CB.V46("ChatStreamData Msg Len exception")}this.V141=b.V3c2();this.V142=b.V3c2();this.V143=b.V3c2();this.V144=b.V3c2();this.m_nFlags=b.V3c1();this.V145=b.V3c1();this.V146=b.V3c1();this.V147=b.V3c1();this.V148=b.V3b7(50)};return c}();"use strict";var RecorderState={RecordStopped:0,RecordNormal:1,RecordSolution:2,RecordGoodMove:3,RecordOtherMoves:4,RecordOtherMovesNoVideo:5};
CB.V149={V14a:0,V14b:1,V14c:2,V14d:3,V14e:4,V14f:5,V14g:6};
CB.V14h=function(){var c=CB.V149.V14a,b=0,d=function(b,d,f,h,l){this.playerInstance=b;this.V14k=!1;this.V14l=h;this.V14m=l;this.gameActions=[];this.V14n=[];this.el=f;this.V14o="";CB.$(this.el).html("<div id='wmpHolder"+b+"'></div>");this.V14p=V3c6.config.V14q()[0];c=d;this.V14r()};d.prototype.V14s=function(){this.remove("MediaPlayer1")};d.prototype.remove=function(b){(b=document.getElementById(b))&&b.parentNode.removeChild(b)};d.prototype.V14t=function(){return c};d.prototype.V14u=function(){};d.prototype.getWidth=
function(){if(c==CB.V149.V14g){var b=amp("azuremediaplayer");if(b)return b.width()}return 0};d.prototype.getHeight=function(){if(c==CB.V149.V14g){var b=amp("azuremediaplayer");if(b)return b.height()}return 0};d.prototype.V14r=function(){switch(c){case CB.V149.V14g:this.V14v();break;case CB.V149.V14a:this.V14w()}};d.prototype.V14v=function(){c==CB.V149.V14g&&this.V14x()};d.prototype.V14w=function(){window.chrome&&window.chrome.webstore?this.V14y():CB.V5t.V64()?this.V14z():!this.V5y()&&CB.V5t.V6v()?
this.V14z():this.V5y()?CB.V5t.V6u()?(this.V14u(),null!=this.V150&&this.V150.version?this.V151():this.V152()):this.V14y():this.V14z()};d.prototype.V153=function(){var b=!1;CB.V5t.V6u()&&(this.V14u(),null!=this.V150&&this.V150.version&&(b=!0));return!b};d.prototype.V154=function(b,d,c,h){b=document.getElementById(b);h='<video src="'+h+'" controls autoplay></video>';b&&(b.innerHTML=h);h=document.getElementsByTagName("video")[0];h.addEventListener("loadeddata",function(){}.bind(this));h.addEventListener("ended",
function(){setTimeout(this.V155.bind(this),500)}.bind(this));return b};d.prototype.V156=function(b,d,c){};d.prototype.V8r=function(){alert("onError")};d.prototype.V157=function(b){if(b=document.getElementById(b))b.innerHTML='For instructions click on the <a href="http://play.chessbase.com/js/apps/playchess/playchesscms.html">link</a>';return b};d.prototype.stop=function(){if(c==CB.V149.V14b){var b=document.getElementById("MediaPlayer1");null!=b&&null!=b.controls&&b.controls.stop()}};d.prototype.V5y=
function(){return-1!=navigator.appVersion.indexOf("Win")};d.prototype.V158=function(){var b=CB.V4a.V4l("autoplay"),d=!0;null!=b&&(d="false"!=b);return d};d.prototype.V159=function(b,d,c,h){var l=this.V158();CB.V5t.V6c()&&(l=!1);var q=CB.V7a.V7b();b=document.getElementById(b);var r=document.getElementById("azuremediaplayer"+this.playerInstance);if(h&&0<h.length){if(null==r){var t={nativeControlsForTouch:!1,language:q,autoplay:l,controls:!0,width:c,height:d,poster:"",logo:{enabled:!1}};CB.V5t.V6v()&&
(t={nativeControlsForTouch:!1,language:q,techOrder:["azureHtml5JS","html5","flashSS","silverlightSS"],controls:!0,autoplay:l,width:c,height:d,poster:"",logo:{enabled:!1}});d="azuremediaplayer"+this.playerInstance;b.innerHTML=l?"<video id='"+d+"' class='azuremediaplayer amp-default-skin' controls autoplay amp-big-play-centered tabindex='0'> </video>":"<video id='"+d+"' class='azuremediaplayer amp-default-skin' controls amp-big-play-centered tabindex='0'> </video>";r=amp("azuremediaplayer"+this.playerInstance,
t);amp("azuremediaplayer"+this.playerInstance).src([{src:h,type:"application/vnd.ms-sstr+xml"}]);amp("azuremediaplayer"+this.playerInstance).ready(function(){CB.$(".amp-logo")&&CB.$(".amp-logo").remove();CB.V5t.V69()||CB.V5t.V6a()||CB.V5t.V6c()||r.play()});r.addEventListener("error",function(){var b=r.error();if(b){var d=b.code>>28,b=(b.code&8388607)>>23;if(!CB.V5t.V69()&&!CB.V5t.V6a()){var c=this.V15a(r);alert("Sorry, There is a problem with the Video Player: "+c+d+","+b)}}}.bind(this));amp("azuremediaplayer"+
this.playerInstance).removeEventListener("loadeddata");amp("azuremediaplayer"+this.playerInstance).addEventListener("loadeddata",function(){this.V15b();this.V15c()}.bind(this));amp("azuremediaplayer"+this.playerInstance).removeEventListener("loadedmetadata");amp("azuremediaplayer"+this.playerInstance).addEventListener("loadedmetadata",function(){}.bind(this));amp("azuremediaplayer"+this.playerInstance).isLive()||(amp("azuremediaplayer"+this.playerInstance).removeEventListener("ended"),amp("azuremediaplayer"+
this.playerInstance).addEventListener("ended",function(){this.V14m(this.playerInstance,this.V15d)}.bind(this)))}amp("azuremediaplayer"+this.playerInstance).src([{src:h,type:"application/vnd.ms-sstr+xml"}]);CB.V5t.V69()||CB.V5t.V6a()||l&&(CB.V5t.V6c()||amp("azuremediaplayer"+this.playerInstance).play());amp("azuremediaplayer"+this.playerInstance).controls(!0);amp("azuremediaplayer"+this.playerInstance).options({logo:{enabled:!1}})}return b};d.prototype.V15a=function(b){var d="Unknown Error: ";b.error().code&
amp.errorCode.abortedErrStart?d="MEDIA_ERR_ABORTED: ":b.error().code&amp.errorCode.networkErrStart?d="MEDIA_ERR_NETWORK: ":b.error().code&amp.errorCode.decodeErrStart?d="MEDIA_ERR_DECODE: ":b.error().code&amp.errorCode.srcErrStart?d="MEDIA_ERR_SRC_NOT_SUPPORTED: ":b.error().code&amp.errorCode.encryptErrStart?d="MEDIA_ERR_ENCRYPTED errors: ":b.error().code&amp.errorCode.srcPlayerMismatchStart&&(d="SRC_PLAYER_MISMATCH error: ");return d};d.prototype.V14x=function(){c=CB.V149.V14g};d.prototype.V15e=
function(){this.V15f("wmpHolder",240,320)};d.prototype.V14z=function(){c=CB.V149.V14d};d.prototype.V15g=function(b){};d.prototype.V15h=function(b){var d=320,c=320;if(!CB.$.get("azuremediaplayer"+this.playerInstance)){var h=this.V157("wmpHolder"+this.playerInstance);h.offsetParent&&(c=h.offsetParent.clientWidth,d=h.offsetParent.clientHeight)}CB.V5t.V6q()&&(b=b.replace("http://","https://"));this.V15i=this.V159("wmpHolder"+this.playerInstance,d,c,b)};d.prototype.V152=function(){this.V157("wmpHolder")};
d.prototype.V15j=function(b){c==CB.V149.V14d?(this.V15i=this.V154("wmpHolder",240,320,"http://video.chessbase.com/js/hls"+b.sChannel+"/hls0.m3u8"),document.getElementsByTagName("video")[0].play()):c==CB.V149.V14c&&(this.V15k=b.sChannel,jwplayer("wmpHolder").load([{file:"http://video.chessbase.com/js/hls"+b.sChannel+"/hls2.m3u8"}]))};d.prototype.V15l=function(b){b=JSON.parse(b);if(b.length)for(var d=0;d<b.length;d++){var c=b[d],h=new CB.Vpc;h.time=c.Time;h.type=c.GameActionType;h.action=c.GameActionContent;
this.V14n.push(h)}};d.prototype.V15m=function(){var b=this.gameKernel.getCurPos();if(this.V15n)for(var d=0;d<this.V15n.length;d++)if(b.equals(this.V15n[d])){this.V15o(this.V15p[d]);break}};d.prototype.V15q=function(b){return decodeURIComponent(escape(window.atob(b)))};d.prototype.V15r=function(b){if(c==CB.V149.V14b){b=b.getURL(CB.V13l.V13m);var d=document.getElementById("MediaPlayer1");d&&(d.URL=b,d.data=b)}else if(c==CB.V149.V14g)b=b.getURL(CB.V13l.V13o),0<b.length&&this.V15h(b);else if(c!=CB.V13l.V13o)if(c==
CB.V149.V14d){b=b.getURL(CB.V13l.V13n);this.V15i=this.V154("wmpHolder",240,320);if(d=document.getElementsByTagName("video")[0])d.src=b;d.play();this.doResize(d.offsetParent.clientWidth,d.offsetParent.clientHeight)}else c==CB.V149.V14c&&(b=b.getURL(CB.V13l.V13n),jwplayer("wmpHolder").setup({file:b,image:"http://shop.chessbase.com/pics/p_6251",autostart:!0,width:"100%",height:"90%"}))};d.prototype.doResize=function(b,d){if(c==CB.V149.V14g){if(document.getElementById("azuremediaplayer"+this.playerInstance)){var f=
amp("azuremediaplayer"+this.playerInstance);f&&(f.height(),f.height(d),f.width(b))}}else if(c==CB.V149.V14d){if(f=document.getElementsByTagName("video")[0])f.height=d,f.width=b}else if(f=document.getElementById("MediaPlayer1"))f.width=b,f.height=d;c==CB.V149.V14c&&jwplayer("wmpHolder").resize(b,d-40)};d.prototype.onSync=function(b){document.getElementById("MediaPlayer1")};d.prototype.V15s=function(b,d){null!=this.gameKernel&&this.gameKernel.executeGameAction(b,d);null!=this.V14i&&this.V14i.V15t(b,
d)};d.prototype.play=function(){if(this.V158()&&c==CB.V149.V14g){var b=amp("azuremediaplayer"+this.playerInstance);b&&b.play()}};d.prototype.V15u=function(){if(c==CB.V149.V14g)try{var b=amp("azuremediaplayer"+this.playerInstance);if(b&&b.currentTime)return b.currentTime()}catch(d){return-1}else if(c==CB.V149.V14b){if(b=document.getElementById("MediaPlayer1"),b.controls&&b.controls.currentPosition)return b.controls.currentPosition}else{if(c==CB.V149.V14d)return document.getElementsByTagName("video")[0].currentTime;
if(c!=CB.V149.V14e&&c==CB.V149.V14c)return this.V15v=jwplayer("wmpHolder").getPosition()}return 0};d.prototype.V15w=function(b,d){return b>=d&b<d+1};d.prototype.V15x=function(d){d=this.V15u();this.V14l(this.playerInstance,d);var c=!1;if(!this.endEventFired){for(l=0;l<this.V14n.length;l++)if(this.V15w(this.V14n[l].time,d)){var f=this.V14n[l].action;if(f){var h=new CB.V9z;h.Vae(f,!0);h.rewind();(new CB.V140).read(h)}}for(var l=0;l<this.gameActions.length;l++)if(this.V15w(this.gameActions[l].time,d)){if(0!=
d&&this.V15s(this.gameActions[l].type,this.gameActions[l].action),c=!0,60<=d-b){if(f=CB.$.get("videoid")){f=f.innerHTML;h=Math.floor(d)/60;h=Math.floor(h);this.endEventFired=!1;var q="",r=CB.$.get("userid");r&&(q=encodeURIComponent(r.innerHTML));1<h&&(CB.V15y.load(this.V14p+"Replay/AddSnippetViewed?id="+encodeURIComponent(f)+"&time="+h+"&user="+q,this.V15z.bind(this),{responseType:"text"}),0!=this.V14o.localeCompare(this.gameKernel.game.hdr.toString())&&(this.V14o=this.gameKernel.game.hdr.toString(),
this.gameKernel.V3bl.saveToCloud(!0)))}b=d}}else if(c)break}};d.prototype.saveToCloud=function(){V3c6.cloudMgr&&V3c6.cloudMgr.isLoggedIn()&&V3c6.cloudMgr.Vri(this.gameKernel.game)};d.prototype.V160=function(b,d){V3c6.panelMgr.showMessage(b);this.gameKernel.boardWin.addMessage(b,!0);(new CB.Timer(function(){this.gameKernel.boardWin.destroyMessage()}.bind(this))).runOnce(d)};d.prototype.showMessage=function(b){V3c6.panelMgr.showMessage(b);this.gameKernel.boardWin.addMessage(b,!0);(new CB.Timer(function(){this.gameKernel.boardWin.destroyMessage()}.bind(this))).runOnce(3E3)};
d.prototype.V161=function(b){b=JSON.parse(b);var d=b.ID,c=b.MSG;2<c.length?this.showMessage(c):(b=b.STATE,"3"==b?(this.showMessage("please try again"),this.gameKernel.V3bl.V162()):2<d.length&&("5"==b?window.location.href=this.V14p+"Replay/Video?id="+d:(CB.$.set("videoid",d),this.loadVideoFromId(d))))};d.prototype.V163=function(b){this.showMessage("Solution");b=this.V14p+"Replay/GetSolution?id="+encodeURIComponent(b);CB.V15y.load(b,this.V164.bind(this),{responseType:"text"})};d.prototype.V164=function(b){b=
JSON.parse(b);var d=b.ID;b=b.MSG;2<b.length?this.showMessage(b):this.loadVideoFromId(d)};d.prototype.disable=function(){amp("azuremediaplayer"+this.playerInstance).pause();amp("azuremediaplayer"+this.playerInstance).controls(!1)};d.prototype.V15z=function(b){b=JSON.parse(b);c!=CB.V149.V14g||this.V14k||(0!=b.localeCompare("Ok")?(CB.$.set("videoid",""),0==b.localeCompare("Expert")?this.gameKernel.boardWin.addMessage("You have to purchase this video in order to watch it",!0):this.gameKernel.boardWin.addMessage("Please login with your Premium account",
!0)):this.V14k=!0)};d.prototype.V165=function(b){b="Replay/RenderPartial?id="+encodeURIComponent(b);var d=new XMLHttpRequest;d.open("POST",this.V14p,!0);d.setRequestHeader("Content-type","application/x-www-form-urlencoded");d.setRequestHeader("X-Requested-With","XMLHttpRequest");d.onload=function(){};d.send(b)};d.prototype.restart=function(){var b=amp("azuremediaplayer"+this.playerInstance);b&&b.currentTime(0)};d.prototype.V15o=function(b){if("0"!=b)if(c==CB.V149.V14g){var d=amp("azuremediaplayer"+
this.playerInstance);d&&d.currentTime(1*b)}else c==CB.V149.V14b?(d=document.getElementById("MediaPlayer1"),d.controls&&d.controls.currentPosition&&(d.controls.currentPosition=b)):c==CB.V149.V14d&&(document.getElementsByTagName("video")[0].currentTime=b);c==CB.V149.V14g&&this.play()};d.prototype.loadVideoFromId=function(b){this.V15d=b;$.get(this.V14p+"Replay/GetAllSmoothStreaming?id="+b,function(b){if(b){for(var d=new CB.V13x,c=0;c<b.length;c++){var e=b[c].URLType,q=b[c].URL;"SS"==e?(e=CB.V4a.base64.V4i(q),
e=new CB.V13v(e,CB.V13l.V13o),d.add(e)):"WMV"==e?(e=CB.V4a.base64.V4i(q),e=new CB.V13v(e,CB.V13l.V13m),d.add(e)):"MP4"==e?(e=CB.V4a.base64.V4i(q),e=new CB.V13v(e,CB.V13l.V13n),d.add(e)):"GA"==e&&(e=CB.V4a.base64.V4i(q),e=new CB.V13v(e,CB.V13l.V13r),d.add(e))}"function"==typeof getAllFinished&&getAllFinished();this.V15r(d)}}.bind(this)).fail(function(){}.bind(this))};d.prototype.V167=function(){var b=CB.$.get("videoid");b&&encodeURIComponent(b.innerHTML)};d.prototype.V168=function(b){b=JSON.parse(b);
for(var d=[],c=0;c<b.length;c++){var h=new CB.Vei(b[c].From,b[c].To,0);h.fen=b[c].Fen;d.push(h)}this.Vkt(d)};d.prototype.Vkt=function(b){null!=V3c6.panelMgr.V169&&V3c6.panelMgr.V169.Vkt(b)};d.prototype.V15b=function(){this.V15v=0;null==this.V16a&&(this.V16a=setInterval(this.V15x.bind(this),1E3))};d.prototype.V15c=function(){var b=CB.$.get("gotopos");if(b&&"0"!=b.innerHTML){var d=CB.$.get("videoid");d&&this.V15d===d&&(new CB.Timer(function(){this.V15o(b.innerHTML)}.bind(this))).runOnce(1E3)}else if(this.V15d){var d=
this.V15d,c="";if(c=CB.$.get("userid"))c=c.innerHTML,d=this.V14p+"Replay/GetStartTime?id="+encodeURIComponent(d)+"&user="+encodeURIComponent(c),$.get(d,function(b){b&&this.V15o(b)}.bind(this)).fail(function(){}.bind(this))}};d.prototype.V16b=function(b){b=b.substring(1,b.length-2);alert(b);b=CB.V4a.base64.V4i(b);var d=new CB.V13x;b=new CB.V13v(b,CB.V13l.V13m);d.add(b);this.V15r(d)};d.prototype.V16c=function(b){b=b.substring(1,b.length-2);alert(b);b=CB.V4a.base64.V4i(b);var d=new CB.V13x;b=new CB.V13v(b,
CB.V13l.V13r);d.add(b);this.V15r(d)};d.prototype.V16d=function(b){b=b.substring(1,b.length-2);alert(b);b=CB.V4a.base64.V4i(b);var d=new CB.V13x;b=new CB.V13v(b,CB.V13l.V13n);d.add(b);this.V15r(d)};d.prototype.pause=function(){amp("azuremediaplayer"+this.playerInstance).pause()};d.prototype.play=function(){amp("azuremediaplayer"+this.playerInstance).play()};d.prototype.V16e=function(){amp("azuremediaplayer"+this.playerInstance).pause();this.V16e=new CB.V16f(this.gameKernel);this.V16e.start()};return d}();
"use strict";
CB.VideoElement=function(){var c=function(b,d,c,g,f){this.V16g=CB.V149.V14g;this.V16h=b;this.V16i=!1;this.fnGetKernel=d;this.ticket=c;this.V16j=g;this.V16k=f;this.V16l()};c.prototype.V16m=function(b){this.videoManager=new CB.V14h(this.V16h,this.V16g,b,this.V16j,this.V16k)};c.prototype.V16l=function(){};c.prototype.clear=function(){};c.prototype.V16n=function(){};c.prototype.resize=function(b,d){this.videoManager.doResize(b,d)};c.prototype.disable=function(){this.videoManager.disable()};V3bf.initForListeners(c);
return c}();CB.VideoElement.factory=function(c,b,d,e,g,f){b=new CB.VideoElement(b||0,d,e,g,f);b.V16m(c);return b};"use strict";
CB.V16o=function(){var c="",b=function(b,c,g){this.V14l=g;this.el=c;c=CB.$(this.el);this.V14j=b;b="wmpHolder"+b;c.html("<div id='"+b+"' style='width:100%;height:100%;'></div>");this.name=b};b.prototype.setUrl=function(b){c=b;this.player&&this.player.pause();b="wmpHolder"+this.V14j;this.remove(b);CB.$(this.el).html("<div id='"+b+"' style='width:100%;height:100%;'></div>");this.player=null;(new CB.Timer(function(){this.V16p(this.name,200,200)}.bind(this))).runOnce(500)};b.prototype.V14s=function(){this.remove(this.V16q)};
b.prototype.remove=function(b){(b=document.getElementById(b))&&b.parentNode.removeChild(b)};b.prototype.V16p=function(b,c,g){this.V15f(b,c,g)};b.prototype.V15f=function(b,e,g){e={source:{bintu:{apiurl:"https://bintu.nanocosmos.de:443",streamid:c}},playback:{autoplay:!0,muted:!1,metadata:!0},events:{onReady:function(b){},onPlay:function(b){},onPause:function(b){},onLoading:function(b){},onStartBuffering:function(b){},onStopBuffering:function(b){},onStats:function(b){},onError:function(b){try{b&&b.data&&
b.data.message||JSON.stringify(b)}catch(d){}},onMetaData:function(b){if(b.data.handlerName&&"onCuePoint"===b.data.handlerName)this.onMetaData(b.data.message)}.bind(this)}};this.player||(this.player=new NanoPlayer(this.name));this.player.instance=this;this.player.setup(e).then(function(b){try{JSON.stringify(b)}catch(d){alert(d)}},function(b){alert(b);try{var d=JSON.stringify(b);"{}"===d&&(d=b.message);b=d}catch(c){}document.getElementById("status").innerText="Setup Error: "+b});return b};b.prototype.onMetaData=
function(b){if(b.GA){b=b.GA;var c=new CB.V9z;c.Vag(b);c.rewind();b=c.Vab();this.V14l(b)}};b.prototype.V15m=function(){var b=this.gameKernel.getCurPos();if(this.V15n)for(var c=0;c<this.V15n.length;c++)b.equals(this.V15n[c])&&this.V15o(this.V15p[c])};b.prototype.V15q=function(b){return decodeURIComponent(escape(window.atob(b)))};b.prototype.doResize=function(b,c){var g=document.getElementById("wmpHolder0");g&&(g.style.height=c+"px",g.style.width=b+"px")};b.prototype.onSync=function(b){document.getElementById("MediaPlayer1")};
b.prototype.V15s=function(b,c){null!=this.gameKernel&&this.gameKernel.executeGameAction(b,c);null!=this.V14i&&this.V14i.V15t(b,c)};b.prototype.play=function(){this.player&&this.player.play()};b.prototype.stop=function(){this.player?this.player.pause():alert("player not found (stop)")};b.prototype.showMessage=function(b){V3c6.panelMgr.showMessage(b);this.gameKernel.boardWin.addMessage(b,!0);(new CB.Timer(function(){this.gameKernel.boardWin.destroyMessage()}.bind(this))).runOnce(3E3)};b.prototype.V16r=
function(b){};return b}();"use strict";
CB.LiveVideoElement=function(){var c=function(b,d,c,g,f){this.V16g=CB.V149.V14g;this.V16h=b;this.V16i=!1;this.fnGetKernel=d;this.ticket=c;this.V16j=g;this.V16k=f;this.V16l()};c.prototype.V16m=function(b){this.videoManager=new CB.V16o(this.V16h,b,this.V16j)};c.prototype.V16l=function(){};c.prototype.clear=function(){};c.prototype.V16n=function(){};c.prototype.resize=function(b,d){this.videoManager.doResize(b,d)};c.prototype.disable=function(){this.videoManager.disable()};c.prototype.setUrl=function(b){this.videoManager.setUrl(b)};
V3bf.initForListeners(c);return c}();CB.LiveVideoElement.factory=function(c,b,d,e,g){b=new CB.LiveVideoElement(b||0,d,e,g);b.V16m(c);return b};"use strict";CB.namespace("CB.V16s");
CB.V16s=function(){var c,b,d,e=function(b,d,c,e){this.V16t=localforage.createInstance({name:"Textures"});this.V16u=this.V16v(b);this.V16w=this.V16v(d);this.margin=this.V16v(c);this.background=this.V16v(e);this.V16x=function(){};this.V16y=function(){};this.V16w.V8n=this.V16z.bind(this);this.V16u.V8n=this.V16z.bind(this);this.margin.V8n=this.V16z.bind(this);this.background.V8n=this.V170.bind(this);this.V171=0;this.V172=Array(64);this.V173=Array(64)};e.prototype.destroy=function(){this.V16x=this.V16y=
null;this.removeAllListeners();this.V174();e.clearCache()};e.clearCache=function(){b=c=0;d={}};e.prototype.V175=function(){return this.V16w.loaded&&this.V16u.loaded&&this.margin.loaded};e.prototype.V176=function(b,d){try{var c=CB.Vbf.Ve5(b);if(!(0>b||63<b))return d==this.V171?c?void 0===this.V172[b]&&(this.V172[b]=this.V177(b,d,c)):void 0===this.V173[b]&&(this.V173[b]=this.V177(b,d,c)):(this.V171=d,this.V172=Array(64),this.V173=Array(64),c?this.V172[b]=this.V177(b,d,c):this.V173[b]=this.V177(b,d,
c)),c?this.V172[b]:this.V173[b]}catch(e){CB.V46("Tex:getSquare",e)}};e.prototype.V178=function(b,d,c,e){(d=this.V176(d,c))&&d.draw(b,e.x,e.y)};e.prototype.V179=function(b,d){var c=document.createElement("canvas");c.width=c.height=d;c=c.getContext("2d");this.V176(b,d).draw(c,0,0);c.lineWidth=Math.max(1,d/16);c.strokeStyle=this.V17a();var e=d-c.lineWidth;CB.V88.V8d(c,c.lineWidth/2,c.lineWidth/2,e,e,Math.max(1,e/4));e=new CB.V8m;e.V8u(c,0,0,d,d);return e};e.prototype.V17a=function(){return"hsla( 0, 10%, 10%, 0.4 )"};
var g={};CB.V17b&&(g=new CB.V17b);b=c=0;d={};e.prototype.V17c=function(e,h,l){V3c6.panelMgr.V17d()&&g&&600<h&&500<l&&this.background.loaded&&(this.background.V8x(e,0,0,h,l),e=e.getImageData(0,0,h,l),g.darkenCorners(e,function(e){c=e.width;b=e.height;d=e;this.fireOnBGReady()}.bind(this)))};e.prototype.V174=function(){g&&g.Vpn&&g.abort()};e.prototype.V17e=function(e,g,l){this.background.loaded&&(c==g&&b==l?e.putImageData(d,0,0):this.background.V8x(e,0,0,g,l))};e.prototype.V17f=function(b){switch(b){default:return CB.Vm1.V17g;
case CB.Vm1.V17h:return CB.Vm1.V17i;case CB.Vm1.V17j:return CB.Vm1.V17k;case CB.Vm1.V17l:return CB.Vm1.V17m;case CB.Vm1.V17n:return CB.Vm1.V17o;case CB.Vm1.V17p:return CB.Vm1.V17q;case CB.Vm1.V17r:return CB.Vm1.V17s}};e.prototype.V16v=function(b){return CB.V8m.V8s(this.V16t,b)};e.prototype.V17t=function(b){if(!b.url||0!=b.url.search("blob:")){var d=CB.V88.V8f(b.image,b.width,b.height);if(d)try{this.V16t.setItem(b.url,d)}catch(c){CB.V46("Tex::_storeInLocalDB",c)}}};e.prototype.V177=function(b,d,c){try{var e=
Math.min(this.V16w.width,this.V16w.height),g=d,t=55;CB.V5t.V64()&&(t=10);d<t?g=2*d:128<d&&(g=.5*d);if(this.V16w&&this.V16w.isValid()){var w=Math.floor((e-g)/7),z=83*CB.Vbf.Ve3(b)%7*w,B=41*CB.Vbf.Ve2(b)%7*w;0>z&&(z=0);0>B&&(B=0);var v=c?this.V17u:0,y=new CB.V8m;this.ctx&&(d==g?y.V8u(this.ctx,z,B+v,d,d):y.V8v(this.ctx,z,B+v,d,d,g,g));return y}}catch(C){CB.V46("Tex:cutSquare",C)}};e.prototype.V16z=function(){this.V16u.loaded&&this.V16w.loaded&&this.margin.loaded&&(this.canvas=document.createElement("canvas"),
this.canvas.width=Math.max(this.V16u.width,this.V16w.width),this.canvas.height=this.V16u.height+this.V16w.height,this.ctx=this.canvas.getContext("2d"),this.V16u.draw(this.ctx,0,0),this.V17u=this.V16u.height,this.V16w.draw(this.ctx,0,this.V17u),this.V16x&&this.V16x(),this.V17t(this.V16u),this.V17t(this.V16w),this.V17t(this.margin))};e.prototype.V170=function(){this.V16y&&this.V16y();this.V17t(this.background)};V3bf.initForListeners(e);V3bf.addEvent(e,"BGReady");return e}();"use strict";
CB.V17v=function(){var c,b=function(b,c,g){this.V16t=localforage.createInstance({name:"Pieces"});b||(b="DiagramTTFritz");this.loaded=!1;this.sqSidePix=g;this.V17w=new CB.V8m;this.V8n=function(){};this.V17w=CB.V8m.V8s(this.V16t,V3c6.V17x+"Pieces/"+b+c+".png");this.V17w.V8n=this.V17y.bind(this);this.V17z=Array(6);this.V180=Array(6);this.name=b};b.prototype.destroy=function(){};b.prototype.isValid=function(){return void 0!==this.V17z[0]};b.prototype.createSprite=function(b){if(CB.Piece.side(b)==CB.Vaz.BLACK){var c=
new CB.V8z;c.V8o(this.V180[CB.Piece.Vb3(b)-1]);c.piece=b;return c}c=new CB.V8z;c.V8o(this.V17z[CB.Piece.Vb3(b)-1]);c.piece=b;return c};b.prototype.V181=function(){this.ctx.clearRect(0,0,this.sqSidePix,this.sqSidePix);this.V17w.draw(this.ctx,(CB.Piece.Vp-1)*this.sqSidePix,0,this.sqSidePix,this.sqSidePix,0,0,this.sqSidePix,this.sqSidePix);this.V17w.draw(this.ctx,(CB.Piece.Vv-1)*this.sqSidePix,0,this.sqSidePix,this.sqSidePix,.7*this.sqSidePix,0,.3*this.sqSidePix,.3*this.sqSidePix);this.V17w.draw(this.ctx,
(CB.Piece.Vt-1)*this.sqSidePix,0,this.sqSidePix,this.sqSidePix,.7*this.sqSidePix,.3*this.sqSidePix,.3*this.sqSidePix,.3*this.sqSidePix);this.V17w.draw(this.ctx,(CB.Piece.Vr-1)*this.sqSidePix,0,this.sqSidePix,this.sqSidePix,.7*this.sqSidePix,.6*this.sqSidePix,.3*this.sqSidePix,.3*this.sqSidePix);this.V182=new CB.V8z(this.ctx);this.V182.V8o(this.canvas.toDataURL());this.ctx.clearRect(0,0,this.sqSidePix,this.sqSidePix);this.V17w.draw(this.ctx,(CB.Piece.Vq-3)*this.sqSidePix,0,this.sqSidePix,this.sqSidePix,
0,0,this.sqSidePix,this.sqSidePix);this.V17w.draw(this.ctx,(CB.Piece.Vw-3)*this.sqSidePix,0,this.sqSidePix,this.sqSidePix,.7*this.sqSidePix,0,.3*this.sqSidePix,.3*this.sqSidePix);this.V17w.draw(this.ctx,(CB.Piece.Vu-3)*this.sqSidePix,0,this.sqSidePix,this.sqSidePix,.7*this.sqSidePix,.3*this.sqSidePix,.3*this.sqSidePix,.3*this.sqSidePix);this.V17w.draw(this.ctx,(CB.Piece.Vs-3)*this.sqSidePix,0,this.sqSidePix,this.sqSidePix,.7*this.sqSidePix,.6*this.sqSidePix,.3*this.sqSidePix,.3*this.sqSidePix);this.V183=
new CB.V8z(this.ctx);this.V183.V8o(this.canvas.toDataURL())};b.prototype.getPromoSprite=function(b){return b==CB.Vaz.BLACK?this.V183:this.V182};b.prototype.V17y=function(){void 0===c&&(c=document.createElement("canvas"));this.canvas=c;this.canvas.width=this.sqSidePix;this.canvas.height=this.sqSidePix;this.ctx=this.canvas.getContext("2d");for(var b=0;6>b;b++)this.ctx.clearRect(0,0,this.sqSidePix,this.sqSidePix),this.V17w.draw(this.ctx,b*this.sqSidePix,0,this.sqSidePix,this.sqSidePix,0,0,this.sqSidePix,
this.sqSidePix),this.V17z[b]=this.canvas.toDataURL();for(b=6;12>b;b++)this.ctx.clearRect(0,0,this.sqSidePix,this.sqSidePix),this.V17w.draw(this.ctx,b*this.sqSidePix,0,this.sqSidePix,this.sqSidePix,0,0,this.sqSidePix,this.sqSidePix),this.V180[b-6]=this.canvas.toDataURL();this.loaded=!0;this.V181();this.V8n();this.V17t(this.V17w)};b.prototype.V17t=function(b){if(!b.url||0!=b.url.search("blob:")){var c=CB.V88.V8f(b.image,b.width,b.height);if(c)try{this.V16t.setItem(b.url,c)}catch(g){CB.V46("PieceFact::_storeInLocalDB",
g)}}};return b}();"use strict";var spriteCache=[];
CB.V184=function(){var c=function(){this.V185=[];this.V186=[];this.V187=[]};c.clearCache=function(){spriteCache=[]};c.prototype.V188=function(b){for(var d=[0,1,2,3,3,3,10,0,0,1,2,3,3,3,10,0,0],c=CB.Piece.Vn;c<=CB.Piece.Vy;c++){void 0==this.V186[c]&&(this.V186[c]=[]);for(var g=0;g<d[c];g++)this.V186[c].push(b.createSprite(c))}this.V182=b.getPromoSprite(CB.Vaz.WHITE);this.V183=b.getPromoSprite(CB.Vaz.BLACK);this.sqSidePix=b.sqSidePix;this.name=b.name};c.prototype.create=function(b){this.V188(b)};c.prototype.destroy=
function(){this.V189()&&(void 0==spriteCache[this.name]&&(spriteCache[this.name]=[]),void 0==spriteCache[this.name][this.sqSidePix]&&(spriteCache[this.name][this.sqSidePix]=[]))};c.prototype.copy=function(b){for(var d in b)b.hasOwnProperty(d)&&(this[d]=b[d])};c.prototype.setup=function(b,d,c){if(void 0!==b){if(this.V185.length)for(var g=0;64>g;g++)void 0!==this.V185[g]&&g!==c&&(this.V186[this.V185[g].piece]&&this.V186[this.V185[g].piece].push(this.V185[g]),delete this.V185[g]);for(g=0;64>g;g++){var f=
d[g];f&&g!==c&&(this.V185[g]=this.createSprite(b,f,g),this.V185[g].deleteBackground())}}};c.prototype.V18a=function(b,d,c){if(void 0!==b&&0!=this.V186.length){for(var g=[],f=[],h=0;64>h;h+=1)0==d[h]||d[h]!=c[h]||void 0!==this.V185[h]&&this.V185[h].piece===d[h]||(void 0!==this.V185[h]&&this.V18b(this.V185[h]),this.V185[h]=this.createSprite(b,d[h],h));for(h=0;64>h;h+=1)if(0!=d[h]&&d[h]!=c[h]){var l=this.V185[h];l||(l=this.createSprite(b,d[h],h));f.push({square:h,piece:d[h],sprite:l});delete this.V185[h]}for(var l=
[],q=1;2>=q;q++)for(h=0;64>h;h+=1)if(0!=c[h]&&d[h]!=c[h]&&!l[h]){for(var r=!1,t=-1,w=99999,z=0;z<f.length&&!r;z++)if(void 0!=f[z]&&f[z].piece==c[h]&&(2==q||CB.Vbf.Ve3(f[z].square)==CB.Vbf.Ve3(h))){var B=CB.Vbf.V7n(f[z],h);B<w&&(w=B,t=z)}0<=t&&(this.V185[h]=f[t].sprite,g.push(new CB.V18c(c[h],this.V185[h],f[t].square,h,V3c6.V3bc.V176(f[t].square,b.sqSidePix))),delete f[t],r=!0,l[h]=!0);r||2!=q||(this.V185[h]=this.createSprite(b,c[h],h),g.push(new CB.V18c(c[h],this.V185[h],-1,h,V3c6.V3bc.V176(h,b.sqSidePix))))}for(z=
0;z<f.length;z++)void 0!=f[z]&&(g.push(new CB.V18c(f[z].piece,f[z].sprite,f[z].square,-1,V3c6.V3bc.V176(f[z].square,b.sqSidePix))),this.V18b(f[z].sprite),delete f[z]);return g}};c.prototype.set=function(b,d){this.V185[d]&&this.V18b(this.V185[d]);b?this.V185[d]=b:delete this.V185[d]};c.prototype.V18d=function(b){this.V18b(b)};c.prototype.createSprite=function(b,d,c){if(this.V186[d]&&0<this.V186[d].length){for(var g,f=!1,h=0;h<this.V186[d].length;h++)c==this.V186[d][h].lastSq&&((g=this.V186[d][h])&&
(f=!0),this.V186[d].splice(h,1));f||((g=this.V186[d][0])||(g=b.createSprite(d)),this.V186[d].shift());g.piece=d;return g}return b.createSprite(d)};c.prototype.getPromoSprite=function(b){return b==CB.Vaz.BLACK?this.V183:this.V182};c.prototype.V18e=function(b,d){this.V187[d]||(this.V187[d]=b.createSprite(d));return this.V187[d]};c.prototype.V189=function(){for(var b=0;64>b;b++)if(void 0!==this.V185[b]&&!this.V185[b].loaded)return!1;if(0==this.V186.length)return!1;for(b=CB.Piece.Vn;b<=CB.Piece.Vy;b++)for(var d=
0;d<this.V186[b].length;d++)if(!this.V186[b][d]||!this.V186[b][d].loaded)return!1;return!0};c.prototype.change=function(b,d){void 0!==this.V185[d]&&this.V18b(this.V185[d]);this.V185[d]=this.V185[b];delete this.V185[b]};c.prototype.Veb=function(b,d,c,g){void 0!==this.V185[d]&&this.V18b(this.V185[d]);this.V185[d]=this.createSprite(g,c);this.V185[b].deleteBackground();this.V18b(this.V185[b]);delete this.V185[b]};c.prototype.Vec=function(b,d,c){this.V185[d]=this.V185[b];this.V18b(this.V185[c]);delete this.V185[c];
delete this.V185[b]};c.prototype.V18f=function(){for(var b=0;64>b;b++)void 0!==this.V185[b]&&this.V185[b].deleteBackground();this.V182&&this.V182.deleteBackground();this.V183&&this.V183.deleteBackground()};c.prototype.getPiece=function(b){return this.V185[b]};c.prototype.V18b=function(b){this.V186[b.piece].push(b)};c.prototype.V18g=function(b,d){return new CB.V7q(Math.floor(b.x-d/2),Math.floor(b.y-d/2),Math.floor(b.x+d/2),Math.floor(b.y+d/2))};return c}();
CB.V18c=function(){var c=function(b,d,c,g,f){CBDebug.assert(void 0!==d);this.piece=b;this.sprite=d;this.sqFrom=c;this.sqTo=g;this.V18h=f;this.ptFrom=this.ptTo=new CB.V6e(0,0)};c.prototype.V18i=function(){return!1};c.prototype.deleteBackground=function(){this.sprite.deleteBackground()};c.prototype.startAnimation=function(b,d){this.debug="started";this.sprite.hide(b);var c=this.ptTo.subtract(this.ptFrom),g=new CB.V83(c.x,c.y);this.V18j=Math.floor(g.getLength()/this.sprite.w*d+.5);this.V18k=!0;5>this.V18j&&
(this.V18j=5);this.V18l=new CB.V83(c.x/this.V18j,c.y/this.V18j);this.currPos=this.ptFrom;if(-1==this.sqFrom||-1==this.sqTo)this.V18j=0};c.prototype.loaded=function(){return this.sprite&&this.sprite.loaded};c.prototype.hide=function(b){if(this.sprite){var d=!1,c=Math.floor(this.sprite.w/2);this.V18k&&-1!=this.sqFrom?void 0!==this.V18h&&(this.V18h.draw(b,this.ptFrom.x-c,this.ptFrom.y-c),this.sprite.saveBeforeMove(b,this.currPos),d=!0):-2==this.V18j&&-1==this.sqFrom&&void 0!==this.V18h&&(this.V18h.draw(b,
this.ptTo.x-c,this.ptTo.y-c),this.sprite.saveBeforeMove(b,this.currPos),d=!0);d||this.sprite.hide(b)}};c.prototype.moveToNoSave=function(b,d){this.sprite.moveToNoSave(b,d)};c.prototype.moveTo=function(b,d){this.sprite.moveTo(b,d)};c.prototype.saveBeforeMove=function(b,d){this.sprite.saveBeforeMove(b,d)};c.prototype.getMoveClipRect=function(){return this.sprite.getMoveClipRect()};c.prototype.deleteBackground=function(){this.sprite.deleteBackground()};c.prototype.displace=function(b){b=this.V18m(b);
this.currPos.x+=b*this.V18l.x;this.currPos.y+=b*this.V18l.y};c.prototype.prepNextStep=function(b){b=this.V18m(b);this.V18j-=b;this.V18k=!1;return-2>this.V18j};c.prototype.canDelete=function(){return-2>this.V18j};c.prototype.V18m=function(b){1>=this.V18j?b=1:b>this.V18j&&(b=this.V18j);return b};c.prototype.V18n=function(){return-1===this.sqTo};c.prototype.shouldHideInThisStep=function(){return-3<=this.V18j&&void 0!==this.sprite};c.prototype.hasReachedEndPos=function(){return 0>=this.V18j};c.prototype.isImmobileInThisStep=
function(){return-1>=this.V18j};c.prototype.getsInvisibleAtEnd=function(){return-2>=this.V18j&&this.V18n()};c.prototype.isStillMoving=function(){return 0<=this.V18j};return c}();"use strict";
CB.Vjn=function(){function c(b){return 0<b?1:0>b?-1:0}var b=function(b,d,c){this.from=b;this.to=d;this.rgba=c};b.prototype.draw=function(b){b.save();var d=this.boardControl.V18o(this.from),f=this.boardControl.V18o(this.to),h=CB.Vbf.Ve3(this.from),l=CB.Vbf.Ve2(this.from),q=CB.Vbf.Ve3(this.to),r=CB.Vbf.Ve2(this.to),l=c(r-l),h=c(q-h);this.boardControl.V18p?(f.x+=h*this.boardControl.nSqPix/4,f.y-=l*this.boardControl.nSqPix/4):(f.x-=h*this.boardControl.nSqPix/4,f.y+=l*this.boardControl.nSqPix/4);b.lineWidth=
Math.max(1,.09*this.boardControl.nSqPix);b.lineCap="round";this.rgba?this.V18q(b,this.rgba,d.x,d.y,f.x,f.y):(h=this.V18r(),b.strokeStyle=(new CB.HSLColor(h.h,h.s,h.l,.75)).toString(),b.fillStyle=(new CB.HSLColor(h.h,h.s,h.l,.9)).toString());this.drawArrow(b,d.x,d.y,f.x,f.y,3,1,Math.PI/8,.5*this.boardControl.nSqPix,.8*b.lineWidth);b.restore();return this.V18s()};b.prototype.V18q=function(b,d,c,h,l,q){if(d&&(d.alpha||d.hue)){c=b.createLinearGradient(c,h,l,q);var r=d.alpha;d.alpha=.15;c.addColorStop(0,
d);d.alpha=.4;c.addColorStop(.4,d);d.alpha=.55;c.addColorStop(.6,d);d.alpha=r;c.addColorStop(1,d);b.strokeStyle=c;b.fillStyle=d}else d&&0==d.search("hsla")?(r=/hsla\(\s*(\d{1,3}),\s*(\d{1,3})\%,\s*(\d{1,3})\%,\s(.+)\)/g.exec(this.rgba),c=b.createLinearGradient(c,h,l,q),h=String.f("hsla( {0}, {1}%, {2}%, {3} )",r[1],r[2],r[3],"0.15"),l=String.f("hsla( {0}, {1}%, {2}%, {3} )",r[1],r[2],r[3],"0.4"),q=String.f("hsla( {0}, {1}%, {2}%, {3} )",r[1],r[2],r[3],.55*r[4]),r=String.f("hsla( {0}, {1}%, {2}%, {3} )",
r[1],r[2],r[3],r[4]),c.addColorStop(0,h),c.addColorStop(.4,l),c.addColorStop(.6,q),c.addColorStop(1,r),b.strokeStyle=c,b.fillStyle=d):(b.fillStyle=d,b.strokeStyle=d)};b.prototype.undo=function(b){for(var d=CB.Vbf.Ve3(this.from),f=CB.Vbf.Ve2(this.from),h=CB.Vbf.Ve3(this.to),l=CB.Vbf.Ve2(this.to),q=c(l-f),r=c(h-d);d!=h||f!=l;){this.boardControl.V18t(b,CB.Vbf.Vdz(d,f));if(0!=r&&0!=q){var t=CB.Vbf.Vdz(d+r,f),w=CB.Vbf.Vdz(d,f+q);0<=t&&64>t&&this.boardControl.V18t(b,t);0<=w&&64>w&&this.boardControl.V18t(b,
w)}d!=h&&(d+=r);f!=l&&(f+=q)}0<=d&&0<=f&&this.boardControl.V18t(b,CB.Vbf.Vdz(d,f));return this.V18s()};b.prototype.V18s=function(){var b=this.boardControl.V18u(this.from);return b=b.getUnion(this.boardControl.V18u(this.to))};b.prototype.toString=function(){return"Arrow: "+CB.Vbf.toString(this.from)+"-"+CB.Vbf.toString(this.to)};var d=function(b,d,c,h,l,q,r,t){b.beginPath();b.moveTo(d,c);b.lineTo(h,l);b.lineTo(q,r);switch(t){case 0:t=Math.sqrt((q-d)*(q-d)+(r-c)*(r-c));b.arcTo(h,l,d,c,.55*t);b.fill();
break;case 1:b.lineTo(d,c);b.fill();break;case 2:b.stroke();break;case 3:b.quadraticCurveTo((d+h+q)/3,(c+l+r)/3,d,c);b.fill();break;case 4:if(q==d)t=r-c,q=(h+d)/2,h=(h+d)/2,r=l+t/5,t=l-t/5;else{t=Math.sqrt((q-d)*(q-d)+(r-c)*(r-c));h=((d+q)/2+h)/2;l=((c+r)/2+l)/2;q=(r-c)/(q-d);t=t/(2*Math.sqrt(q*q+1))/5;var w=q*t;q=h-t;r=l-w;h+=t;t=l+w}b.bezierCurveTo(q,r,h,t,d,c);b.fill()}},d=function(b,d,c,h,l,q,r,t){b.beginPath();b.moveTo(d,c);b.lineTo(h,l);b.lineTo(q,r);switch(t){case 0:t=Math.sqrt((q-d)*(q-d)+
(r-c)*(r-c));b.arcTo(h,l,d,c,.55*t);b.fill();break;case 1:b.lineTo(d,c);b.fill();break;case 2:b.stroke();break;case 3:b.quadraticCurveTo((d+h+q)/3,(c+l+r)/3,d,c);b.fill();break;case 4:if(q==d)t=r-c,q=(h+d)/2,h=(h+d)/2,r=l+t/5,t=l-t/5;else{t=Math.sqrt((q-d)*(q-d)+(r-c)*(r-c));h=((d+q)/2+h)/2;l=((c+r)/2+l)/2;q=(r-c)/(q-d);t=t/(2*Math.sqrt(q*q+1))/5;var w=q*t;q=h-t;r=l-w;h+=t;t=l+w}b.bezierCurveTo(q,r,h,t,d,c);b.fill()}};b.prototype.drawArrow=function(b,c,f,h,l,q,r,t,w,z){q="undefined"!=typeof q?q:3;
r="undefined"!=typeof r?r:1;t="undefined"!=typeof t?t:Math.PI/8;w="undefined"!=typeof w?w:10;z=z||0;var B="function"!=typeof q?d:q,v=h-c,y=l-f,C=Math.sqrt(v*v+y*y);if(0!=C){var D=Math.atan2(l-f,h-c),E=z*Math.cos(D);z*=Math.sin(D);C=(C-.76*w)/C;r&1?(v=c+v*C-E,y=f+y*C-z):(v=h,y=l);r&2?(E=c+(h-c)*(1-C),C=f+(l-f)*(1-C)):(E=c,C=f);b.save();if(this.rgba)this.V18q(b,this.rgba,E,C,v,y);else{z=b.createLinearGradient(E,C,v,y);var F=this.V18r();z.addColorStop(0,(new CB.HSLColor(F.h,F.s,F.l,.2)).toString());
z.addColorStop(.2,(new CB.HSLColor(F.h,F.s,F.l,.35)).toString());z.addColorStop(.65,(new CB.HSLColor(F.h,F.s,F.l,.55)).toString());z.addColorStop(1,(new CB.HSLColor(F.h,F.s,F.l,.9)).toString());b.strokeStyle=z}b.beginPath();b.moveTo(E,C);b.lineTo(v,y);b.stroke();b.restore();w=Math.abs(w/Math.cos(t));r&1&&(y=D+Math.PI+t,v=h+Math.cos(y)*w,y=l+Math.sin(y)*w,E=D+Math.PI-t,C=h+Math.cos(E)*w,E=l+Math.sin(E)*w,B(b,v,y,h,l,C,E,q));r&2&&(y=D+t,v=c+Math.cos(y)*w,y=f+Math.sin(y)*w,E=D-t,C=c+Math.cos(E)*w,E=
f+Math.sin(E)*w,B(b,v,y,c,f,C,E,q))}};b.prototype.V18r=function(){return{h:40,s:90,l:60}};return b}();
CB.V18v=function(){var c=function(b,d){this.sq=b;this.rgba=d};c.prototype.draw=function(b){var d=this.boardControl.V18o(this.sq);b.strokeStyle=this.rgba?b.fillStyle=this.rgba.toString():b.fillStyle="rgba( 255, 220, 10, 0.5 )";b.lineWidth=Math.max(1,this.boardControl.nSqPix/16);this.boardControl.V178(b,this.sq);var c=this.boardControl.nSqPix-b.lineWidth,g=c-0;CB.V88.V8d(b,d.x-c/2+0,d.y-c/2+0,g,g,Math.max(1,g/3.5));this.boardControl.V18w(b,this.sq);return this.V18s()};c.prototype.undo=function(b){var d=
CB.Vbf.Ve3(this.sq),c=CB.Vbf.Ve2(this.sq);this.boardControl.V18t(b,CB.Vbf.Vdz(d,c));return this.V18s()};c.prototype.V18s=function(){return this.boardControl.V18u(this.sq)};c.prototype.toString=function(){return"Sq="+CB.Vbf.toString(this.sq)+", Clr="+this.rgba};return c}();"use strict";
CB.Vkk=function(){function c(b,c,g,f){var h=!1,l=g.event;void 0===l&&(l=g);for(g=0;g<b.length;g++)b[g]&&b[g].isInMyArea(f.x,f.y)&&(c.call(b[g],l,f),h=!0);return h}var b=function(b,c,g,f){this.cbcanvas=b;this.width=c;this.height=g;this.options=f;this.boards=[];this.V18x=[];b=CB.V5t.V6x()||CB.V5t.V6w()||CB.V5t.V6c();if(!b&&!this.V18y()){for(c=0;4>c;c++)this.V18x[c]=new CB.V18z(this.cbcanvas.canvas.parentElement,"BAreaShadow"+c),this.V18x[c].setVisible(!b&&0==c&&!V3c6.V190());this.V18x[0].setCssClass("BoardAreaShadowT");
this.V18x[1].setCssClass("BoardAreaShadowR");this.V18x[2].setCssClass("BoardAreaShadowB");this.V18x[3].setCssClass("BoardAreaShadowL")}f&&f.suppressCalcGeometry||this.Vmi();this.V191=glSettings.addOnBoardStyleListener(function(){(new CB.Timer(function(){this.Vmi()}.bind(this))).runOnce(300)}.bind(this));V3c6.V3bc.V16y=this.V192.bind(this)};b.prototype.addBoard=function(b){this.boards.push(b);b.idBoardAreaHandler=b.onReadyHandlers.add(this.onBoardReady.bind(this))};b.prototype.V193=function(b){b=this.V194(b);
void 0!==b&&(b=this.boards.splice(b,1),b[0]&&b[0].destroy(),this.V17e(this.cbcanvas.V9r),this.cbcanvas.requestRedraw())};b.prototype.V195=function(){return this.width/this.height};b.prototype.V196=function(){this.V197()};b.prototype.V197=function(){for(var b=0;b<this.boards.length;b++)this.boards[b]&&this.boards[b].destroy();this.boards=[];this.Vmi()};b.prototype.Vmg=function(b){this.boards=[];this.addBoard(b);this.V17e(this.cbcanvas.V9r);this.Vmi()};b.prototype.Vmk=function(b){this.boards=[];this.boards.push(b);
this.Vmi();this.V17e(this.cbcanvas.V9r);this.Vmi();this.cbcanvas.requestRedraw()};b.prototype.V194=function(b){for(var c=0;c<this.boards.length;c++)if(this.boards[c]&&this.boards[c].uniqueId==b.uniqueId)return c};b.prototype.draw=function(b){try{this.V198(b),this.V199=!1}catch(c){CB.V46("AreaDraw",c)}};b.prototype.V19a=function(){this.cbcanvas.canvas.style.backgroundImage="url( '"+V3c6.V3bc.background.url+"' )"};b.prototype.drawWood=function(b){for(var c=0;c<this.boards.length;c++)this.boards[c]&&
this.boards[c].drawWood(b,this.V19b())};b.prototype.V198=function(b){for(var c=0;c<this.boards.length;c++)this.boards[c]&&this.boards[c].draw(b,this.V19b())};b.prototype.V17e=function(b){this.V18y()?this.V199=!0:void 0!==b&&V3c6.V3bc.background&&V3c6.V3bc.background.loaded&&(V3c6.V3bc.V17e(b,this.width,this.height),this.V199=!0)};b.prototype.beforeResize=function(){for(var b=0;b<this.boards.length;b++)this.boards[b]&&this.boards[b].beforeResize()};b.prototype.resize=function(b,c){this.width=b;this.height=
c;this.Vmi()};b.prototype.Vl0=function(){this.resize(this.width,this.height)};b.prototype.Vmi=function(){this.cbcanvas&&(this.V19c&&V3c6.V3bc.removeOnBGReadyListener(this.V19c),this.V19c=V3c6.V3bc.addOnBGReadyListener(this.V19d.bind(this)),V3c6.V3bc.V17c(this.cbcanvas.ctx,this.width,this.height));this.boards.forEach(function(b){b.setTitleVisible(!1)});this.V19e=this.boards.length;this.V19f();this.cbcanvas.V19g(!1);0===this.boards.length&&void 0!==this.cbcanvas.control&&this.cbcanvas.requestRedraw();
var b=this.cbcanvas.pixToZoom(this.width),c=this.cbcanvas.pixToZoom(this.height),g=Math.min(c/50,10),f=Math.min(b/50,10);this.V18x&&4==this.V18x.length&&(this.V18x[0].setPosSize(0,0,b,f),this.V18x[1].setPosSize(b-f,g,g,c-2*g),this.V18x[2].setPosSize(0,c-g,b,g),this.V18x[3].setPosSize(0,g,f,c-2*g))};b.prototype.onMouseDown=function(b,e){this.boards.length&&c(this.boards,this.boards[0].onMouseDown,b,e)};b.prototype.onContextMenu=function(b,e){this.boards.length&&c(this.boards,this.boards[0].onContextMenu,
b,e)};b.prototype.onMouseUp=function(b,e){if(this.boards.length&&!c(this.boards,this.boards[0].onMouseUp,b,e)&&1==this.boards.length)this.boards[0].onMouseUp(b,e)};b.prototype.onMouseWheel=function(b,e){this.boards.length&&c(this.boards,this.boards[0].onMouseWheel,b,e)};b.prototype.onMouseMove=function(b,e){if(this.boards.length)if(1==this.boards.length)this.boards[0].onMouseMove(b,e);else c(this.boards,this.boards[0].onMouseMove,b,e)};b.prototype.onMouseEnter=function(b,e){this.boards.length&&c(this.boards,
this.boards[0].onMouseEnter,b,e)};b.prototype.onMouseLeave=function(b,e){this.boards.length&&c(this.boards,this.boards[0].onMouseLeave,b,e)};b.prototype.V19h=function(b,c){};b.prototype.V192=function(){this.width&&this.cbcanvas&&V3c6.V3bc.V17c(this.cbcanvas.ctx,this.width,this.height);this.cbcanvas.V19i();void 0!==this.V19j&&this.V19j()};b.prototype.V19k=function(b){var c=this.cbcanvas.canvas.getBoundingClientRect();return new CB.V6e(b.getX()-c.left,b.getY()-c.top)};b.prototype.V19l=function(b,c,
g){var f={w:10,nX:b,nY:1};if(0==b)return f;var h=Math.max(c,g);f.w=Math.round(Math.min(Math.min(c,g)-0,Math.floor(h/b-0)));if(0==f.w)return f;h==c?(f.nX=b,f.nY=1):(f.nX=1,f.nY=b);for(var h=b,l=1;l<=b;){var q=Math.floor(Math.min(c/h-0,g/l-0));f.w<q&&(f.w=q,f.nX=h,f.nY=l);l++;h=Math.floor(b/l);b!=h*l&&h++}1==h&&1<l&&1==b?(f.h=g,f.w=c):f.h=f.w;return f};b.prototype.V19f=function(){if(0!=this.boards.length){var b=this.width,c=this.height,g=0,f=0,h=0;if(1<this.boards.length&&this.options.splitLayout){var l=
this.width-this.height-0;if(Math.abs(l)>.2*Math.max(this.width,this.height)&&0<l)var f=this.width-l,q=Math.min(f,this.height),b=l,h=6,c=q-2*h,g=1}l=this.V19l(this.boards.length-g,b,c);if(0!=l.w){var b=Math.floor((b-l.nX*l.w)/(l.nX+1)),c=Math.floor((c-l.nY*l.h)/(l.nY+1)),r=new CB.Size(l.w,l.h);if(1==this.boards.length)this.boards[0].setLeftSpace(b),this.boards[0].setPosSize(new CB.V6e(b,0),r);else for(0<g&&(this.boards[0].setLeftSpace(b),this.boards[0].setTitleVisible(!0),this.boards[0].setPosSize(new CB.V6e(0,
0),new CB.Size(q,q))),q=0;q<l.nX;q++)for(var t=f+b+q*(b+l.w),w=0;w<l.nY;w++){var z=h+c+w*(c+l.w);g<this.boards.length&&(z=new CB.V6e(t,z),this.boards[g].setLeftSpace(b),this.boards[g].setTitleVisible(!0),this.boards[g].setPosSize(z,r),g++)}}}};b.prototype.V19m=function(){this.V17e(this.cbcanvas.V9r);this.cbcanvas.requestRedraw()};b.prototype.onBoardReady=function(b){--this.V19e;0>=this.V19e&&(this.V17e(this.cbcanvas.V9r),this.cbcanvas.requestRedraw(),this.boards.forEach(function(b){b.setTitleVisible(!0);
void 0!==b.rightWin&&b.rightWin.setVisible(!0)}),this.V19e=this.boards.length)};b.prototype.V19d=function(){this.V17e(this.cbcanvas.V9r);this.cbcanvas.requestRedraw()};b.prototype.V18y=function(){return this.options?this.options.transparent:!1};b.prototype.V19b=function(){return this.options?this.options.boardShadow&&this.V199:this.V199};return b}();"use strict";
CB.V19n=function(){var c=1,b=function(){this.options={}};b.prototype.init=function(b,d,e,l){this.cbcanvas||(this.cbcanvas=b,this.V19o={x:0,y:0},this.y=0,this.width=this.V19p=d,this.height=this.V19q=e,this.debugName=l,this.V18p=!1,this.allowInput=!0,this.V19r=!1,this.evaluation=0,this.V19s=!0,this.Vmi(),this.board=new CB.Ve8,this.Vkd=new CB.Vj9(this),this.V19t={},this.V19u="DiagramTTFritz",this.V19v=new CB.V184,this.animation=new CB.Animation(this.cbcanvas),this.V19w=[],this.onReadyHandlers=new CB.V47(this),
this.nMarginW=1,V3c6.V3bc.V16x=this.V19x.bind(this),this.uniqueId=c++,this.animSteps={forMove:.6,forPosition:1},this.V19y=new CB.Timer(this.V19z.bind(this)),this.animation.V9x=function(){this.currPiece&&this.V1a0&&(this.currPiece.show(this.cbcanvas.V9r),this.cbcanvas.V1a1(this.currPiece.getMoveClipRect()));this.V1a2(!0)}.bind(this),this.animation.V9q=function(){this.currPiece&&this.V1a0&&(this.currPiece.hide(this.cbcanvas.V9r),this.cbcanvas.V9s(this.currPiece.getMoveClipRect()))}.bind(this),this.animation.V9u=
function(){this.currPiece&&this.V1a0&&(this.currPiece.show(this.cbcanvas.V9r),this.cbcanvas.V9s(this.currPiece.getMoveClipRect()))}.bind(this))};b.prototype.destroy=function(){this.Vme();this.destroyMessage();this.V1a3();this.V1a4();this.V1a5();this.onReadyHandlers.remove(this.idBoardAreaHandler);this.onReadyHandlers.empty();this.V191&&glSettings.removeOnBoardStyleListener(this.V191);this.V19v.destroy();this.V1a6&&this.V1a6.destroy();this.setGame(null);this.V19r=!1;this.shouldAnimatePosChange=this.fnBoardClick=
this.fnSquareRelease=this.fnSquareChangeInMouseMove=this.fnMarkSquaresOnButtonDown=this.fnSquareClick=null};b.prototype.V1a7=function(){};b.prototype.Vkm=function(){this.V191=glSettings.addOnBoardStyleListener(this.onBoardStyle.bind(this))};b.prototype.onBoardStyle=function(b,d){V3c6.V1a8(CB.V16s.prototype.V17f(b));this.changeBoardStyle(b,d)};b.prototype.changeBoardStyle=function(b,d){this.V19u=d;this.nSqPix=0};b.prototype.setPosSize=function(b,d){var c=new CB.Size(0,0),e=new CB.Size(0,0);if(void 0!==
this.titleWin){var q=this.titleWin.V1a9(d.h);c.h=this.cbcanvas.pixToZoom(q)}void 0!==this.V1aa&&(e.h=this.cbcanvas.pixToZoom(7));c.h=this.options?c.h+(this.options.topDist||0):c.h+V3c6.config.V1ab;e.h=this.options?e.h+(this.options.bottomDist||0):e.h+V3c6.config.V1ac;this.V19o=new CB.V6e(Math.round(b.x+c.w),Math.round(b.y+c.h));this.width=Math.round(d.w-c.w);this.height=Math.round(d.h-c.h-e.h);this.resize(this.width,this.height)};b.prototype.beforeResize=function(){this.titleWin&&this.titleWin.setVisible(!1)};
b.prototype.resize=function(b,d){this.V1ad();this.width=b;this.height=d;b&&d?this.V19y.runOnce(10):this.V19y.stop();this.currPiece&&this.currPiece.deleteBackground()};b.prototype.V19z=function(){this.V19y.stop();this.V1ad();this.attributes=[];var b=this.nSqPix;this.Vmi();b!=this.nSqPix||void 0===this.V1a6||this.rightWin?(this.V19v.destroy(),this.V19v=new CB.V184,this.V1a6&&this.V1a6.destroy(),this.V1a6=new CB.V17v(this.V19u,this.nSqPix,this.nSqPix),this.V1a6.V8n=this.V1ae.bind(this)):this.V19v.V189()&&
(this.V19v.V18f(),this.onReadyHandlers.count()?this.onReadyHandlers.execute():this.cbcanvas.requestRedraw());this.V1af()?(this.titleWin.V1ag(this),this.titleWin.setVisible(!0)):this.titleWin&&this.titleWin.setVisible(!1);void 0!==this.messageWin&&this.messageWin.V1ag(this);void 0!==this.rightWin&&this.rightWin.V1ag(this);void 0!==this.bottomWin&&(this.bottomWin.V1ah(this.height,this.cbcanvas)?(this.bottomWin.setVisible(!0),this.bottomWin.V1ag(this)):this.bottomWin.setVisible(!1));this.V1aa&&(this.V1aa.V1ag(this),
this.V1aa.setVisible(!0))};b.prototype.Vmi=function(){var b=this.height,d=0;this.V1af()&&(d=this.titleWin.V1a9(this.height,this.cbcanvas)+2,this.titleWin.V1ai&&(d+=this.titleWin.V1ai(this.height,this.cbcanvas)));var b=b-d,c=0;void 0!==this.bottomWin&&this.bottomWin.V1ah(this.height,this.cbcanvas)&&(c=this.bottomWin.V1a9(b,this.cbcanvas),this.bottomWin.V1aj(c,this.cbcanvas),c+=this.bottomWin.V1ai(this.height,this.cbcanvas),b-=c);var b=Math.round(b),e=this.width,q=0;void 0!==this.rightWin&&(q=this.rightWin.V1ak(this.width,
this.height));e-=q;this.V19p=Math.min(e-.056*e,b);this.options&&this.options.marginDistDivisor?this.V19p-=Math.floor(this.V19p/this.options.marginDistDivisor):(window.V3c6&&V3c6.V190(),this.V19p-=Math.floor(this.V19p/50));this.V19s=480<=this.V19p;this.options&&this.options.minWForCoordinates&&(this.V19s=this.V19p>=this.options.minWForCoordinates);this.nMarginW=this.V1al();this.V1am=this.V19p-2*this.nMarginW;this.V1an=this.nSqPix=Math.floor(this.V1am/8);this.nSqPix=CB.V19n.V1ao(this.V1an);1>this.nSqPix&&
(this.nSqPix=1);this.V1am=8*this.nSqPix;this.V19p=this.V1am+2*this.nMarginW;this.V1ap=0;this.x0=Math.floor(this.V19o.x+(this.width-this.V19p-q)/2+.5);b=d?Math.min(this.cbcanvas.zoomToPix(.8*d),(this.height-this.V19p-c)/2):(this.height-this.V19p-c)/2;this.y0=Math.floor(this.V19o.y+b);this.options&&this.options.shiftXPercent&&(this.x0=Math.floor(this.x0+this.V19p*this.options.shiftXPercent/100))};b.V1ao=function(b){var d=[160,152,144,138,132,126,120,114,110,106,102,98,94,90,88,84,82,80,78,76,74,72,
70,68,66,64,62,60,58,56,54,52,50,48,46,44,42,41,40,39,38,37,36,35,34,33,32,31,30,29,28,27,26,25,24,23,22,21,20,19,18,17,16,15,12,10,8],c;for(c=0;c<d.length;c++)if(b>=d[c]){b=d[c];break}c>=d.length&&(b=8);return b};b.prototype.V1al=function(){return this.V19s?Math.max(6,Math.round(Math.min(16,this.V19p/40))):Math.round(Math.min(12,this.V19p/60))};b.prototype.setTitleText=function(b){this.titleWin&&this.titleWin.setText(b);this.debugName=b};b.prototype.addTitle=function(b,d,c){void 0===this.titleWin&&
(this.titleWin=new CB.V1aq(this,b,function(b){this.fnBoardClick(this.uniqueId);b.preventDefault()}.bind(this),"",d,function(b){c(b)}));return this.titleWin};b.prototype.V1ar=function(b){this.Vme();this.titleWin=b;this.V19z()};b.prototype.V1as=function(b,d){this.Vme();this.V1a4();this.titleWin=b;this.bottomWin=d};b.prototype.V1af=function(){return window.V3c6&&V3c6.V190()?this.titleWin&&210<Math.min(this.height,this.width):this.titleWin&&100<Math.min(this.height,this.width)};b.prototype.setTitleVisible=
function(b){this.V1af()&&this.titleWin.setVisible(b)};b.prototype.V1at=function(){this.V1aa||(this.V1aa=new CB.V1au(this),this.V19y.runOnce(10));return this.V1aa};b.prototype.setLeftSpace=function(b){this.nLeftSpace=b};b.prototype.V1av=function(b){return this.V1ax=this.titleWin=new CB.V1aw(this,this.getOuterRect().h/16,b)};b.prototype.V1ay=function(){this.V1ax&&(this.V1ax.destroy(),this.V1ax=null,this.Vme(),this.titleWin=null)};b.prototype.Vme=function(){this.titleWin&&this.titleWin.destroy();delete this.titleWin};
b.prototype.V1a5=function(){this.V1aa&&(this.V1aa.destroy(),delete this.V1aa)};b.prototype.destroyMessage=function(){this.messageWin&&this.messageWin.destroy();delete this.messageWin};b.prototype.V1a3=function(){this.rightWin&&this.rightWin.destroy();delete this.rightWin};b.prototype.V1a4=function(){this.bottomWin&&this.bottomWin.destroy();delete this.bottomWin};b.prototype.Vrx=function(){return this.titleWin&&this.titleWin.V1az()};b.prototype.Vrv=function(){if(this.titleWin)return this.titleWin.V1az()};
b.prototype.V1b0=function(b){this.destroyMessage();return this.addMessage(b,!0,!0)};b.prototype.addMessage=function(b,d,c){if(this.messageWin||d)this.messageWin?this.messageWin.setText(b):(this.messageWin=new CB.V1b1(this,b,c),this.messageWin.setVisible(!0)),this.messageWin.V1ag(this)};b.prototype.V1b2=function(b){this.rightWin=b;this.rightWin.V1ag(this)};b.prototype.V1b3=function(b){(this.bottomWin=b)&&this.bottomWin.V1ag(this)};b.prototype.markAsSelected=function(b){V3c6.V190()||this.titleWin&&
this.titleWin.markAsSelected(b)};b.prototype.onMouseEnter=function(b,d){this.V19k(d)};b.prototype.onContextMenu=function(b,d){};b.prototype.onMouseLeave=function(b,d){this.V19k(d)};var d=new CB.V3bs,e=new CB.V3bs;b.prototype.onMouseMove=function(b,c){var h=this.V19k(c);if(this.V19r&&this.evaluation)if(this.V1b4&&this.V1b4.V80(h.x,h.y)){var l=this.evaluation.strEval+"<br/><em>"+this.evaluation.strLine+"</em>";d.exec(function(){this.V1b5(new CB.V6e(b.clientX,b.clientY),l)}.bind(this),200)}else this.V1b6();
this.V1b7&&this.V1b7.V80(h.x,h.y)&&this._game?(l=this._game.getCurPos().getBTM()?"Black's move":"White's move",l+=", click to flip board",e.exec(function(){this.V1b8||this.V1b9(new CB.V6e(b.clientX,b.clientY),l);this.V1b8=!0}.bind(this),200)):this.V1ba()};b.prototype.onMouseUp=function(b,d){var c=this.V19k(d);this.V1b7&&this.V1b7.V80(c.x,c.y)&&this.flipBoard()};b.prototype.V1b5=function(b,d){this.V1bb("Eval",b,d,new CB.Size(190,40),e)};b.prototype.V1b6=function(){this.hideToolTip("Eval",d)};b.prototype.V1b9=
function(b,d){this.V1bb("ToMove",b,d,new CB.Size(140,35),e,2500)};b.prototype.V1bb=function(b,d,c,e,q,r){var t=this;!t[b]&&c&&(V3c6.V190()&&(d.x=d.x-e.w-5),t[b]=new CB.V1bc,t[b].setText(c),t[b].setPosSize(d,e),t[b].setVisible(!0),(new CB.Timer(function(){t.hideToolTip(b,q)}.bind(t))).runOnce(r||6E3))};b.prototype.V1ba=function(){this.hideToolTip("ToMove",e)};b.prototype.hideToolTip=function(b,d){d.stop();this[b]&&(this[b].destroy(),delete this[b])};b.prototype.V1bd=function(b,d){this.V1be(b,this.V18o(d));
b.lastSq=d};b.prototype.V1be=function(b,d){b.moveTo(this.cbcanvas.V9r,d);this.cbcanvas.V1a1(b.getMoveClipRect())};b.prototype.V1bf=function(b){b&&(b.hide(this.cbcanvas.V9r),this.cbcanvas.V1a1(b.getMoveClipRect()))};b.prototype.V1bg=function(b,d){var c=this.V1bh(b);return d.x<c.x+.7*this.nSqPix?CB.Piece.QUEEN:d.y<c.y+.3*this.nSqPix?CB.Piece.KNIGHT:d.y<c.y+.6*this.nSqPix?CB.Piece.BISHOP:CB.Piece.ROOK};b.prototype.V1bi=function(b,d){for(var c=0;c<b.length;c++);c=this.V1bj(b);b.length&&d&&this.cbcanvas.V1a1(c)};
b.prototype.V1bj=function(b,d){this.attributes=this.attributes?this.attributes.concat(b):b;for(var c=null,e=0;e<b.length;e++){b[e].boardControl=this;var q=b[e].draw(d||this.cbcanvas.V9r),c=c?c.getUnion(q):q}return c};b.prototype.undoAttributes=function(){if(void 0!==this.attributes&&this.attributes.length){for(var b=null,d=0;d<this.attributes.length;d++)var c=this.attributes[d].undo(this.cbcanvas.V9r,function(b){return this.V1bh(nSq)}.bind(this)),b=b?b.getUnion(c):c;this.cbcanvas.V1a1(b);this.attributes=
[]}};b.prototype.queueBoardAttributes=function(b,d){this.V1bk=!this.V1bk||d&&d.eraseQueue?b:this.V1bk.concat(b);d.renderNow&&!this.V1bl()&&this.V1a2(d.requestAnimInRender,d.ctx)};b.prototype.V1a2=function(b,d){if(this.V1bk&&this.V1bk.length){var c=this.V1bj(this.V1bk,d);b&&this.cbcanvas.V1a1(c,!0);this.V1bk=[]}};b.prototype.Vmm=function(){this.V1bk=[]};b.prototype.V1bl=function(){return this.V19w.length||this.animation.jobs.length||this.animation.V9j};b.prototype.V1bm=function(b){this.V1bf(this.currPiece);
0<=b&&(this.V178(this.cbcanvas.V9r,b),this.currPiece.V99(this.cbcanvas.V9r),this.V1be(this.currPiece,this.V18o(b)))};b.prototype.V1bn=function(b,d,c,e){if(void 0!==b){var q=c.subtract(d);this.V1bo=e;this.V1bp=c;this.V1bq=new CB.V83(q.x/this.V1bo,q.y/this.V1bo);this.V1br=b;this.V1bs=d;b=new CB.V7q;b.V7u(d.x,d.y,c.x,c.y);this.cbcanvas.V9s(b);this.V1bt=window.requestAnimationFrame(this.V1bu.bind(this))}};b.prototype.V1bu=function(){this.V1br.moveTo(this.cbcanvas.V9r,this.V1bs);this.V1bs=0===this.V1bo?
this.V1bp:this.V1bs.add(this.V1bq);this.cbcanvas.V9s(this.V1br.getMoveClipRect());this.cbcanvas.V9v();0<this.V1bo&&(this.V1bt=window.requestAnimationFrame(this.V1bu.bind(this)));this.V1bo--};b.prototype.V1bv=function(){return void 0!==this.V1a6&&this.V1a6.loaded&&this.V19v.V189()&&V3c6.V3bc.V175()?!0:!1};b.prototype.V1bw=function(b,d){if(this.V1bx)this.V1by=b;else if(this.undoAttributes(),!ObjUtil.equals(b,this.board.sqs)&&1<this.nSqPix)if(this.V1bv()){var c=!1;if(d&&this.V1bz()){var e=this.V19v.V18a(this.V1a6,
this.board.sqs,b);e&&e.length?(this.board.copyFrom(b),this.V19w=e,this.V1c0(),this.V1c1(),c=this.V1c2=!0):this.V1c3=b}c||(d&&this.animation.currFPS&&this.animation.currFPS++,this.board.copyFrom(b),this.V1bk=[],this.V1c4(),this.V1c2=!1);this.V1c5(this.cbcanvas.V9r,!1)}else this.board.copyFrom(b)};b.prototype.prepareFullRedraw=function(){delete this.currPiece;this.V1a0=!1;this.V1ad();this.cbcanvas.V1c6()};b.prototype.V1c4=function(b){try{if(!(1>=this.nSqPix)){var d=-1;this.currPiece&&this.V1a0&&-1!=
this.fromSq&&(d=this.fromSq);this.V19v.setup(this.V1a6,this.board.sqs,d);this.V1ad();this.V19w=[];this.currPiece&&this.V1a0&&this.currPiece.deleteBackground();delete this.V1c7;if(!this.draw(this.cbcanvas.V9r))return!1;this.currPiece&&this.V1a0&&(-1!=this.fromSq&&this.V178(this.cbcanvas.V9r,this.fromSq),this.currPiece.moveTo(this.cbcanvas.V9r,this.clickPos.add(this.V1c8)));this.V1c9(!0);this.V1a2(!1);if(!b){var c=this.getOuterRect();this.currPiece&&(c=c.getUnion(this.currPiece.getMoveClipRect()));
this.cbcanvas.V1a1(c,!0)}this.V1c3=null;return!0}}catch(e){CB.V46("BoardRedraw",e)}};b.prototype.V1c1=function(){this.currPiece&&-1!=this.fromSq&&this.board.sqs[this.fromSq]!=this.currPiece.piece&&(delete this.currPiece,this.fromSq=-1)};b.prototype.V1bz=function(){return!this.animation.currFPS||this.animation.currFPS>V3c6.V1ca};b.prototype.V1ad=function(){this.animation.V9h();this.V1bt&&(window.cancelAnimationFrame(this.V1bt),this.V1bt=0)};b.prototype.V1c0=function(){function b(d,c,e){return 40>d.currFPS?
30>d.currFPS?20>d.currFPS?.25:.5:Math.min(1,c.forMove):3>e?c.forMove:c.forPosition}for(var d=!0,c=0;c<this.V19w.length;c++)this.V19w[c].loaded||(d=!1);if(d){for(c=0;c<this.V19w.length;c++){var e,d=-1==this.V19w[c].sqFrom?this.V1cb(this.V19w[c].piece):this.V18o(this.V19w[c].sqFrom);e=-1==this.V19w[c].sqTo?this.V1cb(this.V19w[c].piece):this.V18o(this.V19w[c].sqTo);this.V19w[c].ptFrom=d;this.V19w[c].ptTo=e}c=this.V19w;c.length&&this.animation.V9k(c,b(this.animation,this.animSteps,c.length),this.getOuterRect());
this.V19w=[]}else setTimeout(function(){this.V1c0()}.bind(this),100)};b.prototype.draw=function(b,d){if(!isNaN(this.x0)&&1<this.nSqPix&&1<this.V1an){if(this.V198(b,d))this.V1c9(!1,this.cbcanvas.V9r);else return!1;void 0!==this.V1cc&&this.V1cc(this.getOuterRect())}return!0};b.prototype.drawWood=function(b,d){return this.V1cd(b,d)?this.V1ce(b):!1};b.prototype.V198=function(b,d){if(this.drawWood(b,d)&&this.V1a6&&this.V1a6.loaded)return this.V1cf(b),!0};b.prototype.V1cg=function(){return new CB.V7q(this.x0+
this.nMarginW,this.y0+this.nMarginW,this.x0+this.nMarginW+this.V1am,this.y0+this.nMarginW+this.V1am)};b.prototype.getOuterRect=function(){return new CB.V7q(this.x0,this.y0,this.x0+this.V19p,this.y0+this.V19p)};b.prototype.V1cd=function(b,d){if(4>this.V19p)return!0;try{return this.V1bv()?(b.save(),d&&this.V1ch(b,.6),V3c6.V3bc.margin.V8x(b,this.x0,this.y0,this.V19p,this.V19p),b.restore(),this.V19r&&this.V1ci(b,d,this.evaluation),this.V19s&&this.V1cj(b),this.V1c5(b),!0):!1}catch(c){CB.V46("RawB:DrawMargin",
c)}};b.prototype.V1cj=function(b){b.save();var d=Math.round(.8*this.nMarginW);b.font=d+"px Roboto, sans-serif";b.fillStyle="yellow";var c=b.measureText("A").width,e=this.x0+(this.nMarginW-c)/2,q=this.y0+this.nSqPix/2+d/2+this.nMarginW-.2*d;V3c6.panelMgr&&V3c6.panelMgr.viewport&&V3c6.panelMgr.viewport.rtl&&(e+=8*this.nSqPix+this.nMarginW);for(var r=0;8>r;r++)this.V18p?b.fillText(r+1,e,q+r*this.nSqPix):b.fillText(8-r,e,q+r*this.nSqPix);e=this.x0+(this.nSqPix-c)/2+this.nMarginW+.1*c;q=this.y0+this.V1am+
this.nMarginW+(this.nMarginW-d)/2+d-.2*d;for(r=0;8>r;r++)this.V18p?b.fillText(String.fromCharCode(104-r),e+r*this.nSqPix,q):b.fillText(String.fromCharCode(97+r),e+r*this.nSqPix,q);b.restore()};b.prototype.V1c5=function(b){if(this._game){this.V1ck(b);b.save();var d=.34*this.V1cl(this.getOuterRect().w),c=this.x0+2*this.nMarginW+this.V1am+.9*d,e=this.y0+this.V1am+2*this.nMarginW-d-.02*this.V1am;b.beginPath();b.arc(c,e,d,0,2*Math.PI,!1);var q=b.createRadialGradient(c-.3*d,e-.2*d,.1*d,c-.2*d,e-.2*d,d);
this._game.getCurPos().getBTM()?(q.addColorStop(0,"rgba( 150, 150, 160, 1.0 )"),q.addColorStop(1,"rgba( 60, 30, 30, 1.0 )")):(q.addColorStop(0,"rgba( 250, 250, 255, 1.0 )"),q.addColorStop(1,"rgba( 220, 220, 225, 1.0 )"));b.fillStyle=q;b.lineWidth=0;this.V1ch(b,.8,2,3);b.fill();b.restore();this.V1b7=new CB.V7q(c-d,e-d,c+2*d,e+2*d);this.cbcanvas.V1a1(this.V1b7)}};b.prototype.V1cl=function(b){return Math.min(Math.max(.054*b,5),30)};b.prototype.V1ck=function(b){var d=this.getOuterRect(),c=.09*d.h,e=this.V1cl(d.w),
q=.4*c,r=new CB.V81,t=d.bottom-c,w=d.bottom,d=d.right;this.V1cm=new CB.V7q(d,t,d+e,t-c);r.push(new CB.V6e(d,t));r.push(new CB.V6e(e/8+d,q/4+t));r.push(new CB.V6e(e/2+d,q/2+t));r.push(new CB.V6e(3*e/4+d,3*q/4+t));r.push(new CB.V6e(e+d,q+t));r.push(new CB.V6e(e+d,w));r.push(new CB.V6e(d,w));b.save();r.V86(b);c=V3c6.V3bc.margin.V8t(b);b.fillStyle=c||"brown";b.fill();b.restore()};b.prototype.V1ch=function(b,d,c,e){c=c||Math.max(1,Math.min(4,Math.round(Math.sqrt(this.V19p/60))));b.shadowOffsetX=c;b.shadowOffsetY=
c;b.shadowBlur=e||3*c;b.shadowColor="rgba( 60, 30, 15, "+d+" )";return c};b.prototype.displayEvaluation=function(b,d){var c=b!=this.V19r;this.V19r=b;this.evaluation=d;b&&c?(new CB.Timer(function(){this.V19z();delete this.V1c7;this.markLastMove(!0)}.bind(this))).runOnce(500):b&&(this.V1ci(this.cbcanvas.V9r,!1,this.evaluation),delete this.V1c7,this.cbcanvas.V1a1())};b.prototype.setEvaluationInvalid=function(){this.V19r&&this.evaluation&&(this.evaluation.isInvalid=!0,(new CB.Timer(function(){this.V19z();
delete this.V1c7;this.markLastMove(!0)}.bind(this))).runOnce(200))};b.prototype.V1cn=function(b){this.V19s=b};b.prototype.V1ci=function(b,d,c){var e=this.getOuterRect();if(!(50>e.width)){this.evaluation=c;var q=.5*e.h,r=this.V1cl(e.w),t=.15*q,w=new CB.V81,z=e.top+(e.h-q)/2,e=e.right;this.V1b4=new CB.V7q(e,z,e+r,z+q);w.push(new CB.V6e(e,z));w.push(new CB.V6e(r/8+e,t/4+z));w.push(new CB.V6e(r/2+e,t/2+z));w.push(new CB.V6e(7*r/8+e,3*t/4+z));w.push(new CB.V6e(r+e,t+z));var B=z+(q-t);w.push(new CB.V6e(r+
e,B));w.push(new CB.V6e(7*r/8+e,t/4+B));w.push(new CB.V6e(r/2+e,t/2+B));w.push(new CB.V6e(r/8+e,3*t/4+B));w.push(new CB.V6e(e,B+t));b.save();w.V86(b);w=V3c6.V3bc.margin.V8t(b);b.fillStyle=w||"brown";d&&this.V1ch(b,1);this.V1co=new CB.V7q(e,z,e+r,z+q-2*t);b.fill();d=z+t+2;z=.35*r;e+=(r-z)/5;q=new CB.V7q(e,d,e+z,d+(q-2*t-4));t=b.createLinearGradient(q.left,q.top,q.right,q.top);this.V1cp(c.value,.3,143);e=new CB.Color(216.75,216.75,216.75,1);d=new CB.Color(255,255,255,1);z=new CB.Color(191.25,191.25,
191.25,1);t.addColorStop(0,e.toString());t.addColorStop(.3,d.toString());t.addColorStop(1,z.toString());b.lineWidth=q.w;b.strokeStyle=t;b.lineCap="round";this.V1ch(b,1,2,3);CB.V88.V8c(b,q.left+q.w/2,q.top,q.left+q.w/2,q.bottom);b.shadowColor="black";this.V1ch(b,0,0,0);this.V1cq(b,0,"black",q);c.isInvalid||(c=-this.V1cp(c.value,.7,333)*q.h/2+q.h/2+q.top,t=b.createLinearGradient(q.left+q.w/2,c-2,q.left+q.w/2,c+2),t.addColorStop(0,"rgba( 0, 220, 0, 1.0 )"),t.addColorStop(.4,"rgba( 0, 235, 0, 1.0 )"),
t.addColorStop(1,"rgba( 0, 200, 0, 1.0 )"),b.strokeStyle=t,b.lineCap="round",b.lineWidth=Math.min(Math.max(2,r/2),7),this.V1ch(b,.6,1,2),CB.V88.V8c(b,q.left+1,c,q.right+1,c));b.restore()}};b.prototype.V1cq=function(b,d,c,e){d=-this.V1cp(100*d,.7,333)*e.h/2+e.h/2+e.top;b.strokeStyle=c;b.lineWidth=1;b.lineCap="";CB.V88.V8c(b,e.left,d,e.right+1,d)};b.prototype.V1cp=function(b,d,c){d=(Math.pow(d,.01*Math.abs(b))-1)/(d-1)*100;d>c&&(d=c);0>b&&(d=-d);return d/c};b.prototype.V1ce=function(b){if(V3c6.V3bc.V175()){for(var d=
0;64>d;d++)V3c6.V3bc.V178(b,d,this.nSqPix,this.V1bh(d));return!0}return!1};b.prototype.V1cf=function(b){for(var d=0;64>d;d++){var c=this.V19v.getPiece(d);!c&&0<this.board.sqs[d]&&this.V1a6&&(c=this.V19v.createSprite(this.V1a6,this.board.sqs[d],d));if(c){var e=this.V18o(d);c.moveToNoSave(b,e)}}};b.prototype.V18w=function(b,d){var c=this.V19v.getPiece(d);if(c){var e=this.V18o(d);c.moveToNoSave(b,e)}};b.prototype.V18t=function(b,d){if(this.board.sqs[d]){var c=this.V19v.getPiece(d);c&&(V3c6.V3bc.V178(b,
d,this.nSqPix,this.V1bh(d)),c.moveToNoSave(b,this.V18o(d)),c.setBackground(V3c6.V3bc.V176(d,this.nSqPix)))}else V3c6.V3bc.V178(b,d,this.nSqPix,this.V1bh(d))};b.prototype.V178=function(b,d){V3c6.V3bc.V178(b,d,this.nSqPix,this.V1bh(d))};b.prototype.V19x=function(){};b.prototype.V1ae=function(){void 0!==this.V1a6&&this.V1a6.isValid()&&this.V19v.sqSidePix!==this.nSqPix&&(this.V19v.destroy(),this.V19v.create(this.V1a6),this.V19v.setup(this.V1a6,this.board.sqs,this.V1bh.bind(this)),setTimeout(this.V1cr.bind(this),
300))};b.prototype.V1cr=function(){V3c6.V3bc.V175()&&this.V19v.V189()?(this.V1c3&&this.V1bw(this.V1c3,!1),this.onReadyHandlers.count()?this.onReadyHandlers.execute():this.cbcanvas.requestRedraw()):setTimeout(this.V1cr.bind(this),500)};b.prototype.isReady=function(){return V3c6.V3bc.V175()&&this.V19v&&this.V19v.V189()};b.prototype.V1bh=function(b){var d=Math.floor(b/8);b%=8;this.V18p?(d=Math.floor(this.x0+this.nMarginW+this.V1ap+(7-d)*this.nSqPix),b=Math.floor(this.y0+this.nMarginW+this.V1ap+b*this.nSqPix)):
(d=Math.floor(this.x0+this.nMarginW+this.V1ap+d*this.nSqPix),b=Math.floor(this.y0+this.nMarginW+this.V1ap+(7-b)*this.nSqPix));return new CB.V6e(d,b)};b.prototype.V18u=function(b){b=this.V1bh(b);return new CB.V7q(b.x,b.y,b.x+this.nSqPix,b.y+this.nSqPix)};b.prototype.V18o=function(b){return this.V1bh(b).add(this.V1cs())};b.prototype.isInMyArea=function(b,d){var c=new CB.V7q,e=this.V1b7?this.V1b7.w:0;c.V7s(new CB.V6e(this.x0,this.y0),new CB.Size(this.width+e,this.height));return b>=c.left&&b<=c.right&&
d>=c.top&&d<=c.bottom};b.prototype.V19k=function(b){ASSERT(void 0!==b.x);return new CB.V6e(b.x,b.y)};b.prototype.V1ct=function(b){var d=b.x-this.nMarginW-this.V1ap-this.x0;b=b.y-this.nMarginW-this.V1ap-this.y0;this.V18p?(d=7-Math.floor(d/this.nSqPix),b=Math.floor(b/this.nSqPix)):(d=Math.floor(d/this.nSqPix),b=7-Math.floor(b/this.nSqPix));return 0<=d&&8>d&&0<=b&&8>b?8*d+b:-1};b.prototype.V1cu=function(b,d){var c=CB.Vbf.Ve3(b),e=CB.Vbf.Ve2(b),q=CB.Vbf.Ve3(d),r=CB.Vbf.Ve2(d),t=Math.max(c,q),w=Math.min(e,
r),c=CB.Vbf.Vdu(Math.min(c,q),Math.max(e,r)),w=CB.Vbf.Vdu(t,w),t=this.V1bh(c),w=this.V1bh(w);w.add(new CB.V6e(this.nSqPix,this.nSqPix));c=new CB.V7q;c.V7u(t.x,t.y,w.x,w.y);c.expand(this.nSqPix,this.nSqPix);return c};b.prototype.V1cs=function(){return new CB.V6e(Math.floor(this.nSqPix/2),Math.floor(this.nSqPix/2))};b.prototype.V1cv=function(b){return this.V1bh(this.V1ct(b)).add(this.V1cs()).subtract(b)};b.prototype.V1cb=function(b){return new CB.V6e(-500,-500)};b.prototype.V1cw=function(b,d){this.V1bx&&
(this.V1cx=this.board.sqs.slice(),this.board.copyFrom(this.V1by),this.V1c4(!1),this.board.copyFrom(this.V1cx))};b.prototype.V1cy=function(b,d){this.V1c4(!1)};b.prototype.flipBoard=function(){this.setBlackIsBottom(!this.V18p,!0)};b.prototype.setBlackIsBottom=function(b,d){b!=this.V18p&&(this.V18p=b,this.V1ad(),this.V19v.V18f(),d&&(this.destroyMessage(),this.prepareFullRedraw(),this.V1c4(!0)),this.cbcanvas.requestRedraw(),this.titleWin&&this.titleWin.V1cz&&this.titleWin.V1cz(this),this.bottomWin&&this.bottomWin.V1cz&&
this.bottomWin.V1cz(this))};b.prototype.V1d0=function(){return this.V18p?CB.Vaz.BLACK:CB.Vaz.WHITE};b.prototype.V1d1=function(b){b!==this.V1d0()&&this.flipBoard()};b.prototype.V1d2=function(b){this.V19t=b};b.prototype._game=null;b.prototype.setGame=function(b){this._game&&(this._game.removeOnCurPosChangedListener(this.Vmv),this._game.removeOnChangedListener(this.Vms),this._game.removeOnNavigateListener(this.V1d3),this._game.removeOnMoveListener(this.V1d4),this._game.removeOnHeaderChangedListener(this.V1d5));
if(this._game=b){b=this.Vmw.bind(this);var d=this.V1d6.bind(this),c=this.Vmu.bind(this),e=this.V1d7.bind(this),q=this.V1d8.bind(this);this.Vmv=this._game.addOnCurPosChangedListener(b);this.Vms=this._game.addOnChangedListener(d);this.V1d3=this._game.addOnNavigateListener(e);this.V1d4=this._game.addOnMoveListener(q);this.V1d5=this._game.addOnHeaderChangedListener(c);this.Vmw(this._game,this._game.getCurPos(),!1);this.Vmu()}};b.prototype.getGame=function(){return this._game};b.prototype.Vmw=function(b,
d,c){"undefined"==typeof c&&this.shouldAnimatePosChange&&(c=this.shouldAnimatePosChange());this.nextCurPosNoAnim&&(this.nextCurPosNoAnim=c=!1);b=!1;this.V1bl()?(this._game&&this.V1bw(this._game.getCurPos().board,!1),b=!0):this._game&&this.V1bw(this._game.getCurPos().board,c);this.V1c9();b&&this.markLastMove(!1)};b.prototype.shouldAnimatePosChange=function(){return!0};b.prototype.V1d6=function(){this.Vkd.Vji();this.V1c9()};b.prototype.Vmu=function(){this.titleWin&&this.titleWin.V1d9&&this.setTitleText(this._game.hdr.getStrPlayers(this.nSqPix>
this.cbcanvas.zoomToPix(42)))};b.prototype.V1d8=function(b){this.Vkd&&this.Vkd.Vjd()};b.prototype.V1d7=function(){this.markLastMove(!1)};b.prototype.V1c9=function(b,d){var c=[];if(this._game){var e=this._game.getAnno(CB.AnnoType.SQUARE_LIST);if(e)for(var q=0;q<e.length;q++){var r=new CB.V18v(e[q].field,e[q].getColour());r.fromAnno=!0;c.push(r)}if(e=this._game.getAnno(CB.AnnoType.ARROW_LIST))for(q=0;q<e.length;q++)r=new CB.Vjn(e[q].from,e[q].to,e[q].getColour()),r.fromAnno=!0,c.push(r)}0<c.length&&
(q=!1,b||(q=!0,this.shouldAnimatePosChange&&(q=!this.shouldAnimatePosChange())),d&&(q=!0),this.V1da(),this.V1a6&&this.V1a6.loaded||(q=!1,d=null),this.queueBoardAttributes(c,{eraseQueue:!1,renderNow:q,requestAnimInRender:q,ctx:d}))};b.prototype.markLastMove=function(b,d){if(this._game&&this._game.mainLine.length){var c=this._game.getLastMove();c&&(c!=this.V1c7||d)&&(this.V1c7=c,c=new CB.Vjn(c.from,c.to),c.lastMove=!0,this.V1db(),this.queueBoardAttributes([c],{eraseQueue:!1,renderNow:b||!this.V1bz(),
requestAnimInRender:!0}))}};b.prototype.V1db=function(){if(this.V1bk){var b=this.V1bk.find(function(b){return b.lastMove}),b=this.V1bk.indexOf(b);0<=b&&this.V1bk.splice(b,1)}};b.prototype.V1da=function(){if(this.V1bk){var b;do{b=this.V1bk.find(function(b){return b.fromAnno});var d=this.V1bk.indexOf(b);0<=d&&this.V1bk.splice(d,1)}while(b)}};b.prototype.Vnf=function(b,d){this.queueBoardAttributes([new CB.V18v(b,d)],{eraseQueue:!1,renderNow:!0,requestAnimInRender:!0})};b.prototype.drawArrow=function(b,
d,c){this.queueBoardAttributes([new CB.Vjn(b,d,c)],{eraseQueue:!0,renderNow:!0,requestAnimInRender:!0})};b.prototype.Vtk=function(b){this.currPiece&&(this.currPiece.hide(this.cbcanvas.V9r),this.currPiece.deleteBackground());for(var d=0;d<b.length;d++)this.queueBoardAttributes([new CB.V18v(b[d].sq,b[d].clr)],{eraseQueue:!1,renderNow:d==b.length-1,requestAnimInRender:d==b.length-1});this.currPiece&&this.currPiece.moveTo(this.cbcanvas.V9r,this.currPiece.pos)};b.prototype.V1dc=function(b){b.forEach(function(b){this.V18t(this.cbcanvas.V9r,
b.sq);this.V18t(this.cbcanvas.ctx,b.sq)}.bind(this))};return b}();"use strict";
CB.Vkl=function(){var c=function(b,d,c,g,f){this.init(b,d,c,g);this.V19u=CB.V1dd[glSettings.pieceStyleId];this.V1de=[];this.options=f;this.V1df=-1};CB.inherit(c,CB.V19n);c.prototype.onMouseDown=function(b,d){if(this._game){V3c6.V3bc.V174();try{if(2==b.button)this.V1cw(b,d);else if(!this.V1a0&&(this.V1ad(),this.destroyMessage(),new CB.V4z,this.V1a0=!0,this.clickPos=this.V19k(d),this.V1c8=this.V1cv(this.clickPos),void 0!==this.fnBoardClick&&this.fnBoardClick(this.uniqueId,this.clickPos,b),this.allowInput)){var c=
this.V1ct(this.clickPos);this.Vkd.Vjr(c);-1!=c&&(this.V1bx?this.V1dg(c):(this.currPiece=this.V1dh(c,this.clickPos.add(this.V1c8)),this.Vkd.Vjh(c)),this.fromSq=c,this.V1de=[],this.fnMarkSquaresOnButtonDown&&(this.V1de=this.V1de.concat(this.fnMarkSquaresOnButtonDown(c))),this.Vtk(this.V1de),this.fnSquareClick&&this.fnSquareClick(c),this.currPiece&&b.preventDefault())}}catch(g){CB.V46("BoardDown",g)}}};c.prototype.onMouseUp=function(b,d){if(this._game)try{if(2==b.button)this.V1cy(b,d);else if(this.V19k(d),
this.V1a0){this.V1a0=!1;var c=this.clickPos=this.V19k(d),g=!1;if(this.allowInput){new CB.V4z;var f=this.V1ct(c);if(-1==f){void 0!==this.currPiece&&(this.V1bn(this.currPiece,c,this.V18o(this.fromSq),2),delete this.currPiece);this.fromSq=-1;this.superClass.onMouseUp.call(this,b,d);return}if(this.V1bx)f!=this.fromSq&&(this.toSq=f,this.prom=0,this.V1di(this.fromSq,this.toSq,c,!1),this.Vkd.Vjo(this.fromSq,this.toSq,this.prom));else if(void 0!==this.currPiece||this.fromSq===this.Vkd.Vjg()||0==this.board.get(f)||
0<=this.fromSq&&0==this.board.get(this.fromSq)){this.Vkd.Vjj(f);if(f!==this.fromSq){this.V1df=-1;var h=this.Vkd.isLegal(this.board,this.fromSq,f);if(!h&&this.Vkd.isLegal(this.board,f,this.fromSq)&&this.Vkd.Vk2(this.board,f)){var l=f,f=this.fromSq;this.fromSq=l;h=!0;this.currPiece=this.V1dh(this.fromSq,this.V18o(this.fromSq))}h?(this.toSq=f,this.prom=0,g=this.Vkd.isPremove(this.board,this.fromSq,this.toSq),this.Vkd.Vjp(this.board.get(this.fromSq))&&(this.board.get(f)&&!g&&this.V1bm(f),this.V1di(this.fromSq,
this.toSq,c,g)||this.V1dj(this.fromSq,this.toSq,g)||(g||(this.V19v.change(this.fromSq,f),this.board.change(this.fromSq,f)),this.currPiece&&this.V1bd(this.currPiece,f))),this.Vkd.Vjo(this.fromSq,this.toSq,this.prom)||(this.currPiece&&(this.currPiece.moveTo(this.cbcanvas.V9r,this.V18o(this.fromSq)),this.currPiece.lastSq=this.fromSq),g=!0,this.cbcanvas.V1a1(this.V1cu(this.fromSq,this.toSq),!0))):this.currPiece&&this.V1bn(this.currPiece,c,this.V18o(this.fromSq),5);delete this.fromSq}else this.currPiece?
(this.V1bd(this.currPiece,f),this.Vkd.Vju(f)?this.V1df=f:this.Vkd.Vjv(f)&&(this.Vkd.Vjw(this.V1df,f),this.V1df=-1)):(this.Vkd.Vjw(this.V1df,f)||this.V1dk||(l=this.Vkd.Vjs(this.board,f),l.ok&&this.Vkd.Vjo(l.from,f,0)),this.V1df=-1);delete this.currPiece}b.preventDefault();this.fnSquareRelease&&this.fnSquareRelease(f)}else this.currPiece&&(this.V1bn(this.currPiece,c,this.V18o(this.fromSq),5),delete this.currPiece);this.fromSq=-1;this.V1de.length&&(this.V1dc(this.V1de),this.V1de=[]);this.V1c4();g&&this.Vkd.Vjm()}}catch(q){CB.V46("BoardUp",
q)}};c.prototype.onMouseWheel=function(b,d){};c.prototype.onMouseMove=function(b,d){try{if(this.allowInput){this.clickPos=this.V19k(d);var c=this.V1ct(this.clickPos);this.V1dl=c;var g,f;this.isWhitePromoPawn(this.fromSq)?(f=c,7==CB.Vbf.Ve2(f)&&(g=this.V1bx||this.Vkd.isLegal(this.board,this.fromSq,f))):this.isBlackPromoPawn(this.fromSq)&&(f=c,0==CB.Vbf.Ve2(f)&&(g=this.V1bx||this.Vkd.isLegal(this.board,this.fromSq,f)));g?(this.currPiece&&(this.V1bf(this.currPiece),this.currPiece.V99(this.cbcanvas.V9r)),
this.V1dm(f)):(void 0!==this.V1dn&&(this.V1bf(this.V1dn),delete this.V1dn,this.currPiece&&this.currPiece.deleteBackground()),this.currPiece&&this.V1be(this.currPiece,this.clickPos.add(this.V1c8)));if(void 0!==this.currPiece)b.preventDefault(),c!=this.fromSq&&this.fnSquareChangeInMouseMove&&this.fnSquareChangeInMouseMove(c);else if(!this.V1bx){g=!1;if(0<=c){var h=this.board.get(c);h===CB.Piece.V5l||!this.Vkd||this.Vkd.Vje()!=CB.Piece.side(h)&&null!==this.Vkd.Vje()||(b.target.style.cursor=this.V1do?
"wait":"pointer",g=!0)}g||(b.target.style.cursor=this.V1do?"wait":"default")}}this.superClass.onMouseMove.call(this,b,d)}catch(l){CB.V46("BMMove",l)}};c.prototype.isWhitePromoPawn=function(b){return(this.board.get(b)==CB.Piece.Vx||this.V1bx&&this.V1by&&this.V1by[b]==CB.Piece.Vx)&&6==CB.Vbf.Ve2(b)};c.prototype.isBlackPromoPawn=function(b){return(this.board.get(b)==CB.Piece.Vy||this.V1bx&&this.V1by&&this.V1by[b]==CB.Piece.Vy)&&1==CB.Vbf.Ve2(b)};c.prototype.V1di=function(b,d,c,g){this.isWhitePromoPawn(b)?
this.prom=this.V1bg(d,c):this.isBlackPromoPawn(b)&&(this.prom=this.V1bg(d,c)+CB.Vaz.Vb1);return this.prom?(g?(this.V178(this.cbcanvas.V9r,this.toSq),this.currPiece.deleteBackground(),this.cbcanvas.V1a1(this.V18u(this.toSq))):(this.V1bx||(this.V19v.Veb(this.fromSq,this.toSq,this.prom,this.V1a6),this.board.Veb(this.fromSq,this.toSq,this.prom)),this.V178(this.cbcanvas.V9r,this.toSq),this.V1bx||(this.V1bd(this.V19v.getPiece(this.toSq),this.toSq),this.V178(this.cbcanvas.V9r,this.fromSq))),delete this.V1dn,
!0):!1};c.prototype.V1dm=function(b){void 0===this.V1dn&&(this.V1dn=this.V19v.getPromoSprite(CB.Piece.side(this.board.sqs[this.fromSq])));this.V1bd(this.V1dn,b)};c.prototype.V1dj=function(b,d,c){var g;this.board.get(b)==CB.Piece.Vx&&4==CB.Vbf.Ve2(b)&&this.Vkd.Vk1(b,d)?g=CB.Vbf.Vdu(CB.Vbf.Ve3(d),4):this.board.get(b)==CB.Piece.Vy&&3==CB.Vbf.Ve2(b)&&this.Vkd.Vk1(b,d)&&(g=CB.Vbf.Vdu(CB.Vbf.Ve3(d),3));return void 0!==g?(c||(this.V19v.Vec(b,d,g),this.board.Vec(b,d,g),this.V1bd(this.currPiece,this.toSq),
this.V178(this.cbcanvas.V9r,g),this.cbcanvas.V1a1(this.V18u(g))),!0):!1};c.prototype.V1dp=function(b,d){this.queueBoardAttributes([new CB.Vjn(b,d,this.Vkd.Vjl())],{eraseQueue:!0,renderNow:!0,requestAnimInRender:!1})};c.prototype.V1dh=function(b,d){var c=this.V19v.getPiece(b);c&&(c.fromSq=b);void 0===c&&b!==this.Vkd.Vjg()||!c||(c.pieceName=CB.Piece.toString(this.board.get(b)),c.hasBackground()?this.V1be(c,this.clickPos.add(this.V1c8)):(c.pos=d,c.setBackground(V3c6.V3bc.V176(b,this.nSqPix))));return c};
c.prototype.V1dg=function(b){this.V1dq=this.V19v.V18e(this.V1a6,this.V1by?this.V1by[b]:this.board.sqs[b]);var d=this.V18o(b);this.V1dq.moveTo(this.cbcanvas.V9r,d);this.cbcanvas.V1a1(this.V18u(b));(new CB.Timer(function(){d.x+=2;d.y+=2;this.V1dq.moveTo(this.cbcanvas.V9r,d);this.cbcanvas.V1a1(this.V18u(b));this.V1bf(this.V1dq);this.V1dq=null}.bind(this))).runOnce(100)};c.prototype.V1dr=function(b){this.V1do=b;this.cbcanvas.canvas.style.cursor=this.V1do?"wait":"default"};c.prototype.test=function(){var b=
["rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1","rnbqk2r/1p2bppp/p2p1n2/4p1B1/4P3/1NN5/PPP1BPPP/R2QK2R b KQkq - 0 8","4rk1r/pppb1ppp/2np4/8/3P4/2PBP3/PP1N2PP/R4RK1 w - - 0 15","b4rk1/p1p1qpp1/3p1n1p/4p3/4P2B/3P1N2/PRPQ1PPP/6K1 w - - 0 16","7r/3kp3/1p6/p1p1p3/3nP1p1/PPKPB1P1/5P2/R7 b - - 0 29"];this.V1ds=void 0===this.V1ds?0:this.V1ds+1;this.V1ds>b.length-1&&(this.V1ds=0);this.V1dt(b[this.V1ds])};c.prototype.refreshMarkedSquares=function(){this.V1a0&&this.fromSq&&this.fromSq==this.V1dl&&
(this.V1de&&this.V1de.length&&this.V1dc(this.V1de),this.V1de=[],this.fnMarkSquaresOnButtonDown&&(this.V1de=this.V1de.concat(this.fnMarkSquaresOnButtonDown(this.fromSq,!0))),this.Vtk(this.V1de))};c.prototype.V1dt=function(b){b=new CB.Position(b);this.V1bw(b.board)};return c}();"use strict";
CB.V1du=function(){var c=new CB.Color(220,250,190);new CB.Color(220,250,190);var b=new CB.Color(50,110,0),d=new CB.Color(140,140,100),e=function(b,d){this.background=new CB.V18z(b,"clockBG");this.V1dv=new CB.V18z(this.background,"clockW");this.V1dw=new CB.V18z(this.background,"clockB");this.config=d?d:{V1dx:1,V1dy:"black"};this.V1dz(this.V1dv);this.V1dz(this.V1dw);this.V1e0=!1;this.Vra=!0;this.V1dv.setText("0:00:00");this.V1dw.setText("0:00:00");this.V1e1=new CB.Timer(this.V1e2.bind(this));this.V1e3=
0};e.prototype.destroy=function(){this.background.destroy()};e.prototype.Vr9=function(b){this.V1e0=b};e.prototype.Vqr=function(b){this.Vra=b};e.prototype.setText=function(b,d){d?this.V1dw.setText(b):this.V1dv.setText(b)};e.prototype.V1e4=function(b){this.V1dv.setText(b)};e.prototype.V1e5=function(b){this.V1dw.setText(b)};e.prototype.setVisible=function(b){this.background.setVisible(b)};e.prototype.V1dz=function(b){b.setBackgroundColor(new CB.Color(0,0,0,.5));b.setColor(new CB.Color(255,255,255,.9));
b.setBorder(this.config.V1dx,this.config.V1dy);b.setTextAlign("center");b.setFontFamily("Roboto, Helvetica, sans-serif");b.elDOM.addEventListener("mousedown",function(b){b.preventDefault()})};e.prototype.setPosSize=function(b,d,c,e){var q=new CB.V7q(0,0,Math.round(c/2),e-1),r=new CB.V7q(Math.round(c/2),0,c,e-1);this.background.setPos(b,d);this.background.setSize(c,e);this.V1dv.setPos(q.left,q.top);this.V1dv.setSize(q.getSize().w,q.getSize().h);this.V1dw.setPos(r.left,r.top);this.V1dw.setSize(r.getSize().w,
r.getSize().h);b=Math.round(.7*e);do this.V1dv.V1e6(b),this.V1dw.V1e6(b),--b,this.V1dv.V1e7((q.h-b)/2+2),this.V1dw.V1e7((q.h-b)/2+1);while(3<b&&(this.V1dv.V1e8()>q.w-5||this.V1dv.V1e9()>q.h-2));c=Math.max(1,Math.min(4,Math.round(Math.sqrt(c/100))));this.background.V1ea(c,5*c,"rgba( 60, 30, 20, 0.6 )")};e.prototype.Vqy=function(b){this.V1dv.setText(lm.RESULT+":");b==CB.Vgu.Vgx?this.V1dw.setText(lm.ABORTED):this.V1dw.setText(CB.Vgu.toString(b));this.V1dv.setColor(c);this.V1dw.setColor(c)};e.prototype.Vpl=
function(b){this.V1dv.setText("TIME")};e.prototype.Vpo=function(b){b?(this.V1dv.setColor(d),this.V1dw.setColor(c)):(this.V1dv.setColor(c),this.V1dw.setColor(d))};e.prototype.Vqq=function(b,d){var c=this.Vr7(b);d?this.V1dw.setText(c):this.V1dv.setText(c)};e.prototype.Vr3=function(b,d){};e.prototype.Vqt=function(b){this.Vqh=b};e.prototype.V1ec=function(d){this.V1e1.runOnce(d||8E3);this.V1dv.setBackgroundColor(b);this.V1dw.setBackgroundColor(b)};e.prototype.V1e2=function(){this.V1dv.setBackgroundColor(new CB.Color(0,
0,0,.5));this.V1dw.setBackgroundColor(new CB.Color(0,0,0,.5))};e.prototype.Vr7=function(b){0>b&&(b=new Date(0));var d="";this.Vra&&(d=b.getUTCHours()+":");if(4E3>b.valueOf()&&!this.Vqh){var c=b.getUTCSeconds();b=Math.floor(b.getUTCMilliseconds()/100);1<b.toString().length&&(b="0");d=c+"."+b}else c=b.getUTCMinutes(),1==c.toString().length&&(c="0"+c),d+=c,c=Math.floor(b.getUTCSeconds()),1==c.toString().length&&(c="0"+c),d+=":"+c;return d};return e}();"use strict";
function LineStackItemHash(c){var b=c.getLine();c=c.getMovesToGo()|b.length<<8;0<b.length&&(c|=b[0].from<<16|b[0].to<<24);return c}function LineStackItemEq(c,b){return c.getLine()===b.getLine()&&c.getMovesToGo()===b.getMovesToGo()}CB.cbNotationDefaults={game:null,useMatBalance:!0,useDiagrams:!0,V1ed:!0,useResult:!0,V1ee:!0,useHeader:!0,V1ef:"",V1eg:"",V1eh:"",V1ei:"",V1ej:"",V1ek:"",isActive:!0,notationLocalization:null,V1el:!0};
CB.NotaElement=function(){function c(b,d,c){d.append("<span class='");d.append(c);d.append("'>");d.append(b);d.append("</span>")}var b=function(b,d,c){this.notaHeaderElement=new CB.V1em(d);this.V1en=new CB.V1eo(d,c);this.V1ep=0;this.panel=b;this.Vt8=new CB.V3bs;this.V1eq=[];this.V16h=d;this.V1er=[];this.V1es=[]};b.prototype.panel=null;b.prototype.V1et=null;b.prototype.m_selElem=null;b.prototype.V1eu=!0;b.prototype.notaHeaderElement=null;b.prototype.V16m=function(b,d){var c;this.V1ep=c="string"==typeof b?
b:b.id;c=CB.$("#"+c);if(this.elem=c.single()){c.parent();c.addClass("cbnota-container");this.V1ev();this.V1ew(d);this.V1ex=CB.$(".nota-game",this.elem).single();c.on("dragover",this.V1ey.bind(this)).on("dragenter",this.V1ez.bind(this)).on("drop",this.V1f0.bind(this)).on("mousewheel",this.onMouseWheel.bind(this)).on("DOMMouseScroll",this.onMouseWheel.bind(this));CB.V1f1.V1f2("touchstart")&&(c.on("touchstart",this.V1f3.bind(this)).on("touchend",this.V1f4.bind(this)).on("touchmove",this.onMouseMove.bind(this)).on("touchleave touchcancel",
this.onMouseLeave.bind(this)),this.V1f5=!0);if(CB.V1f1.V1f2("mousedown"))c.on("mousedown",this.V1f3.bind(this)).on("mouseup",this.V1f4.bind(this)).on("mousemove",this.onMouseMove.bind(this)).on("mouseleave",this.onMouseLeave.bind(this)).on("dblclick",this.V19h.bind(this));CB.V5t.V6w()&&$(".nota-game").css("padding-right","50px");if(CB.V1f1.V1f2("contextmenu"))c.on("contextmenu",this.onContextMenu.bind(this));c=CB.$("#nota-head-"+this.V16h).single();this.header=new CB.V18z(c,this.V1f6(),{append:!1});
this.header.setVisible(!0);this.notaHeaderElement.V16m(this.V1f6(),d,null,this.V16h);d.useMatBalance&&this.createMatBalance()}};b.prototype.destroy=function(){alert("NOTIMPL NotaEl")};b.prototype.createMatBalance=function(){if(null===CB.$.get(this.V1f7())){var b=CB.$.get(this.V1ep);if(b){var d=CB.$("#nota-foot-"+this.V16h).single();this.V1f8=new CB.V18z(d,this.V1f7());this.V1f8.setVisible(!0);this.V1en.V16m(this.V1f7())}}d=CB.$("#"+this.V1ep);b&&d.removeClass("nomat")};b.prototype.V1f6=function(){return"theheader-"+
this.V16h};b.prototype.V1f7=function(){return"thefooter-"+this.V16h};b.prototype.destroyMatBalance=function(){var b=CB.$("#"+this.V1f7()).single();b&&0<b.childNodes.length&&(b.removeChild(b.childNodes[0]),this.V1f8=null,CB.$("#"+this.V1ep).addClass("nomat"))};b.prototype.V1f9=function(b){(this.useMatBalance=b)?CB.$("#"+this.V1f7()).show():CB.$("#"+this.V1f7()).hide()};b.prototype.V1ew=function(b){b.notationLocalization=b.notationLocalization||lm.NOTA_LOCALIZATION;this.V1et=new CB.Vie(b.notationLocalization);
this.V1fa=b.useDiagrams;void 0!==b.diagramOptions&&(this.V1fb=b.diagramOptions);this.V1fc=b.useHeader;void 0!==b.useMatBalance&&(this.useMatBalance=b.useMatBalance);void 0!==b.useResult&&(this.V1fd=b.useResult);this.V1eu=b.isActive;this.V1fe=b;b.game&&this.setGame(b.game)};b.prototype.setOptions=function(b){this.V1ew(b)};b.prototype.m_game=null;b.prototype.setGame=function(b){this.notaHeaderElement.setGame(b);this.m_game&&(this.m_game.removeOnMoveListener(this.V1ff),this.m_game.removeOnNavigateListener(this.V1fg),
this.m_game.removeOnChangedListener(this.V1fh),this.m_game.removeOnHeaderChangedListener(this.V1fi),this.m_game.removeOnAnnoChangedListener(this.V1fj),this.m_game.removeOnEvalListener(this.V1fk));this.m_game=b;this.V1ff=this.m_game.addOnMoveListener(this.Vjd.bind(this));this.V1fg=this.m_game.addOnNavigateListener(this.V1fl.bind(this));this.V1fh=this.m_game.addOnChangedListener(this.V1fm.bind(this));this.V1fi=this.m_game.addOnHeaderChangedListener(this.V1fn.bind(this));this.V1fj=this.m_game.addOnAnnoChangedListener(this.V1fm.bind(this));
this.V1fk=this.m_game.addOnEvalListener(this.onEval.bind(this));this.V1fo();this.useMatBalance&&this.V1en.setGame(b);this.notaHeaderElement.setGame(b);this.evProfileControl&&this.evProfileControl.setEvalArr(b.getEvaluationProfile())};b.prototype.setSize=function(b,d){this.notaHeaderElement.V1ag(b,d);this.V1fp();this.V1fq(b);this.V1fl(!0)};b.prototype.getGame=function(){return this.m_game};b.prototype.Vjd=function(){this.V1fo();this.V1fr()};b.prototype.V1fn=function(){};b.prototype.V1fm=function(){this.V1fo();
this.V1fr()};b.prototype.onEval=function(b,d,c){var e;CB.V1fs&&(e=CB.V1fs.V1ft(d));this.evProfileControl||this.V1en.setText(e+".")};b.prototype.V1fl=function(b){b=b||!1;var d=this.V1fu();this.V1fv(d,b);this.V1fr();this.V1fw(this);this.evProfileControl&&this.m_game.isOnMainLine()&&this.evProfileControl.V1fx(this.m_game.getPlyNum())};b.prototype.V1fy=function(b){return CB.Vgu.toString(b)};b.prototype.V1fz=function(d,e){var h=b.prototype.V1fy(d);h&&c(h,e,"cbgame-result")};b.prototype.V1fw=function(b){this.Vt8.exec(function(){b.matcontrol&&
(b.matcontrol.setPos(b.m_game.getCurPos()),b.matcontrol.render())}.bind(this),200)};b.prototype.V1g0=function(){return String.formatEx("<div class='nota-container'><div class='nota-head-container'><div class='nota-head' id='nota-head-{0}'></div></div><div class='nota-game-container'><div class='nota-ogame'><div class='nota-igame'><div class='nota-game' data-inx-game='{0}'></div></div></div></div><div class='nota-foot-container'><div class='nota-foot' id='nota-foot-{0}'></div></div></div>",this.V16h)};
b.prototype.V1ev=function(){CB.$(this.elem).html(this.V1g0())};b.prototype.V1fo=function(){this.V1er&&this.V1er.forEach&&this.V1er.forEach(function(b){b.boardArea.changeParentElDOM(null)});this.V1es=this.V1es.concat(this.V1er);this.V1er=[];"undefined"==typeof this.m_game&&(this.m_game=new CB.Game);var d=new StringBuilder,c=this.m_game.getHeader(),e=this.m_game.getMainLine(),l=this.m_game.getStartPos().getMoveNum(),q={lineCnt:0,nodeCnt:0,breakForTraining:!1};b.Vi2(this,e,0,0,l,0,d,q,0,0);this.V1fd&&
!q.breakForTraining&&this.V1fz(c.getResult(),d);CB.$(".nota-game",this.elem).html(d.toString());this.V1g1();(new CB.Timer(function(){this.V1g2()}.bind(this))).runOnce(30);this.V1fl(!0)};b.Vi2=function(b,d,c,e,q,r,t,w,z,B){var v=++w.lineCnt,y=0;r||d.isAnnotated()&&(y=1);0==r&&(b.useMatBalance?b.createMatBalance():b.destroyMatBalance());t.appendFormat("<span class='cbline' data-inx-line='{0}' data-inx-mv-parent = '{1}' data-level='{2}' data-commented='{3}' data-linecnt-this='{4}' data-nodecnt-this='{5}'>",
c,e,r,y,z,B);0==r&&b.createMovelessAnnoElement(d,t);c=!1;0<d.length&&(c=d[0].getSide()===CB.Vaz.WHITE);e=!0;var C=!1;z=0;for(y=d.length;z<y;++z)if(b.shouldStop(d,z)){C=!0;break}if(!C)for(z=0,y=d.length;z<y;++z){C=d[z];b.CreateMoveElements(C,z,d,q,c||e,r,t,w,v,B);if(w.breakForTraining)break;(c=!c)&&++q;e=C.hasLines()}t.append("</span>")};b.prototype.Vkt=function(b){this.V1eq=b};b.prototype.shouldStop=function(b,d){for(var c=b[d],e=0;e<this.V1eq.length;e++)if(c.from==this.V1eq[e].from&&c.to==this.V1eq[e].to){var q=
this.m_game.Vi5(b,d).toFEN(),r=q.indexOf(" "),t=this.V1eq[e].fen.indexOf(" ");if(r==t&&(q=q.substr(0,r),t=this.V1eq[e].fen.substr(0,t),q==t))return!0}return!1};b.prototype.createMovelessAnnoElement=function(b,d){var c=b.getAnno();c&&(c[CB.AnnoType.Vgj]||c[CB.AnnoType.Vgh])&&c[CB.AnnoType.Vgj]&&(c=c[CB.AnnoType.Vgj].getString(),this.V1g3(c,0,0,d,0))};b.Vgd="[#]";b.prototype.V1g4=function(d,c,e,l,q,r,t){if(d){if(0>d.indexOf(b.Vgd))return this.V1g3(d,c,e,r,t);for(var w=0,z=d.indexOf(b.Vgd);0<=z;z=d.indexOf(b.Vgd,
w))0<z-w&&(w=d.substring(w,z),this.V1g3(w,c,e,r,t)),this.V1g6=this.V1g7("",c,e,l,q,r,t),w=z+b.Vgd.length;w<d.length&&(w=d.substring(w),this.V1g3(w,c,e,r,t))}};b.prototype.V1g8=function(b,d,c,e,q){b&&(e.appendFormat("<span class='cbcomment cbmedal medal-{2}' data-inx-mv='{0}' data-linecnt='{1}'>",d,q,b),e.append("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp</span>"),e.append(" "))};b.prototype.V1g3=function(b,d,c,e,q){e.appendFormat("<span class='cbcomment' data-inx-mv='{0}' data-linecnt='{1}'>",d,q);e.append(CB.V4a.V4o(b));
e.append("</span>");e.append(" ")};b.prototype.V1g9=function(b,d,c,e,q,r){c=CB.V7a.V7c();e.appendFormat("<span class='cbcomment cbtraining' data-inx-mv='{0}' data-linecnt='{1}'>",d,q);e.append(CB.V4a.V4o(b.getQuestion(c)||lm.TRAINING_QUESTION));b.solved||(e.append('<div class="cbTrainingLinks">'),e.append(String.f('<span class="cbTrainingLink cbTrainingSolution" data-inx-mv="{0}" data-linecnt="{1}">{2}</span>',d,q,lm.TRAINING_SOLUTION)),1<=b.nHelpClicked?(e.appendFormat("<span class='cbcomment cbtraining cbtraininghelptext' data-inx-mv='{0}' data-linecnt='{1}'>",
d,q),e.append(CB.V4a.V4o(b.getHelp(c)||"No help available")),e.append("</span>")):b.getHelp(c)&&e.append(String.f('<span class="cbTrainingLink cbTrainingHelp" data-inx-mv="{0}" data-linecnt="{1}">{2}</span>',d,q,lm.TRAINING_HELP)),e.append("</div>"));e.append("</span>");e.append(" ");return!b.solved};b.V1ga=function(b,d,e){if(b.length){for(var l=!0,q=0,r=b.length;q<r;++q)if(57344<=b.charCodeAt(q)){l=!1;break}if(l)d.append(b);else{for(var l=!1,t="",q=0,r=b.length;q<r;++q){var w=b[q],z="\ue000"<=w;
z===l?t+=w:(l?c(t,d,e):d.append(t),t=w,l=z)}t&&(l?c(t,d,e):d.append(t))}}};b.prototype.V1gb=function(d,c){var e=document.createElement("span");b.V1ga(d,e,"cbspec-glyph");return e};b.prototype.CreateMoveElements=function(d,c,e,l,q,r,t,w,z,B){var v=d.getAnno();v&&v[CB.AnnoType.Vgh]&&this.V1g4(v[CB.AnnoType.Vgh].getString(),c,e,v,!1,t,z);var y=l;q||this.V1g6||(y=null);this.V1g6=!1;q=this.V1et.getMoveNota(d,y);if(v&&v[CB.AnnoType.Vgp]){for(var y=v[CB.AnnoType.Vgp],C=0;C<y.length;C++);q=V3bq.addTexts(q,
y)}0==c?t.appendFormat("<span class='cbmove' data-inx-mv = '{0}' data-linecnt = '{1}' data-nodecnt = '{2}'>",c,z,B):t.appendFormat("<span class='cbmove' data-inx-mv = '{0}' data-linecnt = '{1}'>",c,z);b.V1ga(q,t,"cbspec-glyph");t.append("</span>");t.append(" ");v&&(v[CB.AnnoType.SQUARE_LIST]||v[CB.AnnoType.ARROW_LIST]?t.appendFormat("<span class='cbcol-marker' data-inx-mv='{0}'> </span>",c):v[CB.AnnoType.Vu3]&&t.appendFormat("<span class='cbmedal-marker' data-inx-mv='{0}'> </span>",c));t.append(" ");
v&&v[CB.AnnoType.TIME]&&this.V1g4(v[CB.AnnoType.TIME].getString(),c,e,v,!0,t,z);v&&v[CB.AnnoType.Vu3]&&this.V1g8(v[CB.AnnoType.Vu3].getOneMedal(),c,e,t,z);v&&v[CB.AnnoType.Vgj]&&this.V1g4(v[CB.AnnoType.Vgj].getString(),c,e,v,!0,t,z);if(d.hasLines())for(d=d.getSubLines(),B=++w.nodeCnt,q=0,y=d.length;q<y;++q)b.Vi2(this,d[q],q,c,l,r+1,t,w,z,B);v&&v[CB.AnnoType.Vf6]&&(this.V1g7("Find the next move",c,e,v,!0,t,z),w.breakForTraining=this.V1g9(v[CB.AnnoType.Vf6],c,e,t,z,w));v&&v[CB.AnnoType.DIAGRAM]&&(l=
v[CB.AnnoType.DIAGRAM].getString(),this.V1g7(l,c,e,v,!0,t,z))};b.prototype.V1g7=function(d,c,e,l,q,r,t){if(this.V1fa)return q||--c,e=this.m_game.Vi5(e,c+1),this.V1fe.V1el||(l=null),l=b.V1gc(e,l),r.appendFormat("<span class='cbdia' data-fen='{0}' data-legend='{1}' data-inx-mv='{2}' data-linecnt='{3}'>",l,d,c,t),r.append("</span>"),!0};b.V1gc=function(b,d){var c=b.toFEN();d&&d[CB.AnnoType.ARROW_LIST]&&(c=c+";"+d[CB.AnnoType.ARROW_LIST].toString(";"));d&&d[CB.AnnoType.SQUARE_LIST]&&(c=c+";"+d[CB.AnnoType.SQUARE_LIST].toString(";"));
return c};b.V1gd=function(b){b=b.split(";");for(var d=new Position(b[0]),c=new Annotation,e=new ColSqAnno,q=new ColArrowAnno,r=1,t=b.length;r<t;++r){var w=b[r];if(w.length==ColSq.STRING_LEN){var z=new ColSq;z.init(w);e.push(z)}else w.length==ColArrow.STRING_LEN&&(z=new ColArrow,z.init(w),q.push(z))}0<e.length&&c.setItem(AnnoType.SQUARE_LIST,e);0<q.length&&c.setItem(AnnoType.ARROW_LIST,q);return{anno:c,position:d}};b.prototype.removeClass=function(b){for(var d=Array.prototype.slice.call(document.getElementsByClassName(b)),
c=0,e=d.length;c<e;c++){var q=d[c];q.className=q.className.replace(new RegExp("(^|\\s+)"+b+"(\\s+|$)","g"),"$1")}};b.prototype.V1fv=function(b,c){if(null!==b){this.m_selElem&&(CB.$(this.m_selElem).removeClass("cbcur-move"),this.m_selElem=null);var e=CB.$(this.elem);c||b?(this.m_selElem=b,CB.$(this.m_selElem).addClass("cbcur-move"),d||this.m_selElem&&(this.IsInPageVisible(this.m_selElem)||this.scrollIntoView(this.m_selElem)),d=!1):"scroll"!==e.css("overflow-y")&&window.scrollTo(notaElm.getX(),notaElm.getY())}};
b.prototype.scrollCurElemIntoView=function(){if(this.m_selElem)return this.scrollIntoView(this.m_selElem)};b.prototype.blinkCurrElem=function(){this.V1ge(this.m_selElem,"blinkShort")};b.prototype.V1gf=function(){this.V1ge(this.m_selElem,"blinkMedium")};b.prototype.V1ge=function(b,d){b&&($(b).addClass(d),(new CB.Timer(function(){$(d).removeClass(d)}.bind(this))).runOnce(600))};b.prototype.emphasizeMove=function(){this.scrollCurElemIntoView();this.V1ge(this.m_selElem,"blinkAnimation")};b.prototype.scrollIntoView=
function(b){var d=b.offsetTop;b=d+b.offsetHeight;var c=this.V1ex.scrollTop,e=this.V1ex.clientHeight,q=c+e,r=this.V1ex.scrollTop;d<c?this.V1ex.scrollTop=Math.max(0,d-30):b>q&&(this.V1ex.scrollTop=b-e);d=Math.abs(this.V1ex.scrollTop-r);300<d&&this.blinkCurrElem();return 0<d};b.prototype.IsInPageVisible=function(b){var d=b.offsetTop;b=d+b.offsetHeight;var c=this.V1ex.scrollTop,e=c+this.V1ex.clientHeight;return d>=c&&b<=e};b.prototype.handleCursorDown=function(){var b=this.V1gg(this.m_selElem,!1);b&&
(this.V1fv(b),this.V1gh(b))};b.prototype.handleCursorUp=function(){var b=this.V1gg(this.m_selElem,!0);b&&(this.V1fv(b),this.V1gh(b))};b.prototype.V1gg=function(b,d){if("undefined "!=typeof $&&b){var c=$(b),e=c.data("linecnt"),q=c.data("inx-mv"),e=c.parent().find(String.f('[data-linecnt-this="{0}"][data-inx-mv-parent="{1}"]',e,q));if(e.length&&!d&&(q=$(e[0]).data("nodecnt-this"),e=$(e[0]).find(String.f('[data-nodecnt="{0}"][data-inx-mv="0"]',q)),e.length))return e[0];var r=c.offset().top,t=[],w=1E7;
$(this.elem).find(".cbmove, .cbtraininghelptext");e=function(b,c){var e=$(c).offset().top-r;(d?0>e:0<e)&&Math.abs(e)<=w&&(w=Math.abs(e),t.push(c))};d?$($(this.elem).find(".cbmove").get().reverse()).each(e):$(this.elem).find(".cbmove, .cbtraininghelptext").each(e);t.sort(function(b,d){return Math.abs($(b).offset().top-r)-Math.abs($(d).offset().top-r)});for(e=1;e<t.length;e++)if(d){if($(t[e]).offset().top<$(t[0]).offset().top){t.length=e;break}}else if($(t[e]).offset().top>$(t[0]).offset().top){t.length=
e;break}c.offset();c.width();t.sort(function(b,d){return $(b).offset().left-$(d).offset().left});return t[0]}};b.prototype.V1gi=function(b,d){if("undefined "!=typeof $&&b){var c=null,e=1E7,q=0,r=$(b);$(b).prevAll().find(".cbmove").each(function(b,d){var f=$(d).offset().top-r.offset().top;if(0>f){var g=Math.abs($(d).offset().left-r.offset().left);g<e&&(f==q||!c)&&(e=g,c=d,q=f)}}.bind(this));return c}};b.prototype.V1gj=null;b.prototype.onMouseWheel=function(b){if(this.m_game&&this.V1eu){var d="undefined"!=
typeof b.wheelDelta?-b.wheelDelta:b.detail;"undefined"==typeof $&&(0>d?this.m_game.gotoPrev():this.m_game.gotoNext(),b.preventDefault())}};b.prototype.V1f3=function(b){this.V1gk=this.V1gl=new CB.V6e(b);this.V1a0=!0;this.V1gm="touchstart"==b.type};var d;b.prototype.V1f4=function(b){this.V1a0=!1;this.V1gl&&2!=b.button&&10>this.V1gl.V7n(this.V1gk)&&(d=!0,this.focus(),this.V1gn(b)&&this.fireOnMoveTouched())};b.prototype.V19h=function(b){this.m_game.fireOnNotaDoubleClick()};b.prototype.onContextMenu=function(b){this.V1gn(b);
V3c6.panelMgr.execNotaContextMenu&&(V3c6.panelMgr.execNotaContextMenu(b),b.preventDefault())};b.prototype.focus=function(){V3c6.panelMgr&&V3c6.panelMgr.notaPanel&&V3c6.panelMgr.notaPanel.focus();var b=this.V1ex;b?b.focus():alert("no parent for focus")};b.prototype.V1go=function(b){return b?0>b?-1:1:0};var e=0<CB.V5t.V6l()&&!CB.V5t.V64();b.prototype.onMouseMove=function(b){if(this.V1a0&&!e){var d=(new CB.V6e(b)).subtract(this.V1gl);d.y/=Math.min(2,window.devicePixelRatio);this.V1ex.scrollTop-=this.V1go(d.y)*
Math.pow(Math.abs(d.y),1.7)*.7;this.V1gl=new CB.V6e(b);if(0<d.y&&0==this.V1ex.scrollTop||0>d.y&&this.V1ex.scrollTop+this.V1ex.clientHeight>=this.V1ex.scrollHeight)return}b.preventDefault()};b.prototype.onMouseLeave=function(b){this.V1a0=!1};b.prototype.V1gn=function(b){if(!this.V1eu||!this.m_game)return!1;var d=this.V1gh(b.target);b.preventDefault();return d};b.prototype.V1gh=function(b){var d=b;if(!$(d).is("[data-inx-mv]")&&((d=$(d).parents("[data-inx-mv]"))&&(d=d[0]),!d))return;this.V1gj=d;var c=
$(d).data("inx-mv"),e=0;++c;var q=[],r=!0,t=d.parentNode,w=b=!1;$(t).is(".cbLine ")||(t=$(d).parents(".cbline")[0]);$(d).is(".cbTrainingLink")&&(b=$(d).is(".cbTrainingSolution"),w=$(d).is(".cbTrainingHelp"));for(d=t;r;d=d.parentNode)e=Number(e),c=Number(c),q.push({inxLine:e,mvsToGo:c}),d&&d.getAttribute&&(r=CB.$(d),e=r.data("inx-line"),c=r.data("inx-mv-parent"),r=0!=r.data("level"));c=[];for(e=q.length-1;0<=e;--e)c.push(q[e]);this.m_game.gotoSimplePath(c);this.m_game.triggerOnClickInNotation();if(b||
w)if(q=this.m_game.getAnno(CB.AnnoType.Vf6)){b&&(q.solved=!0,CB.V1gp("Solution: "+this.m_game.hdr.getStrPlayers(!1,0)));w&&q.nHelpClicked++;this.V1fm();b&&this.m_game.gotoNext();if(w)for(b=0;3>b;b++)this.handleCursorDown();this.V1ex.scrollTop+=60}return!0};b.prototype.V1fr=function(){var b=this.m_selElem;if(b){var d=CB.$(b);if(!CB.$.is(b,"[data-inx-mv]")){b=d.parent("[data-inx-mv]");if(!b)return;d=CB.$(b)}var c=$("#"+this.V1ep);this.V1gq(c);d=d.data("linecnt");1<d&&(c=c.find(String.formatEx('[data-linecnt="{0}"]',
d)),c.addClass("cbcurline"),this.V1gr(c,0));this.V1gs($(b))}};b.prototype.V1gq=function(b){b.find(".cbcurAlternative").removeClass("cbcurAlternative");b.find(".cbcurline").removeClass("cbcurline");b.find(".cbcurlineparent").removeClass("cbcurlineparent");for(var d=1;6>=d;d++)b.find(".cbcurnode"+d).removeClass("cbcurnode"+d)};b.prototype.V1gr=function(b,d){if(b.length){var c=$(b[0]).parent("[data-inx-mv-parent]");if(c){var e=parseInt($(c).data("inx-mv-parent")),q=$(c).data("linecnt-this"),r=$(c).data("nodecnt-this"),
t=$(c).data("level");if(0<q){var w=$("#"+this.V1ep),r=w.find(String.formatEx('[data-nodecnt="{0}"]',r));1<=r.length&&(6>t?r.addClass("cbcurnode"+t):r.addClass("cbcurnode6"));q=String.formatEx('[data-linecnt="{0}"]',q);w=w.find(q);for(q=0;q<w.length;q++){var r=$(w[q]),z=parseInt(r.data("inx-mv"));z<=e&&1<t&&(z<=e-1?r.addClass("cbcurlineparent"):r.addClass("cbcurnode"+t))}this.V1gr($(c),++d)}}}};b.prototype.V1gs=function(b){var d=b.data("linecnt"),c=b.data("inx-mv");b.parent().find(String.f('[data-linecnt-this="{0}"][data-inx-mv-parent="{1}"]',
d,c)).each(function(b,d){var c=$(d).data("nodecnt-this");$(d).find(String.f('[data-nodecnt="{0}"][data-inx-mv="0"]',c)).addClass("cbcurAlternative")})};b.prototype.V1fu=function(b){if(this.m_game){var d=this.m_game.Vf8();b="";for(var c=0,e=0,q=d.length;e<q;++e){b&&(b+=">");var r=d[e],t=r.mvsToGo;b+=String.formatEx("span.cbline[data-level='{2}'][data-inx-line='{0}'][data-inx-mv-parent='{1}']",r.inxLine,c,e);e===q-1&&(b+=String.formatEx(">span.cbmove[data-inx-mv ='{0}']",t-1));c=t}d=0==b.length;b=String.f("div.nota-game[data-inx-game='{0}']>",
this.V16h)+b;return this.V1gj&&CB.$.is(this.V1gj,b)?this.V1gj:!d&&(b=CB.$(b))&&1==b.length?b[0]:null}};b.prototype.V1g1=function(){if("undefined"!=typeof $&&V3c6.panelMgr.V1gt){var b=180;V3c6.panelMgr.getDiagHeight&&(b=V3c6.panelMgr.getDiagHeight($(this.elem).width()));var d=0;$("#"+this.V1ep).find(".cbdia").each(function(c,e){if(0==$(e).find("div").length){$(e).width(1.1*b);$(e).height(b);var q=this.V1es.pop();this.gameKernel=new CB.Vk3(V3c6.panelMgr);var r={kernel:this.gameKernel,diagramDiv:e};
r.kernel.setPlayingMode(V3c6.panelMgr.V1gt(r.kernel));r.kernel.fnInitGame=function(){return function(b,d){d.boardWin&&(d.boardWin.allowInput=!1);b.reset();if(e){var c=e.dataset.fen;c&&(c=new CB.Position(c),b.assign(new CB.Game(c)))}}}();var t=this.V1gu("diagarea",d);$(t).width(b);$(t).height(b);e.appendChild(t);q?(r.boardArea=q.boardArea,r.boardArea.changeParentElDOM(t),r.kernel.setBoardWin(r.boardArea.canvas.control.boards[0]),r.kernel.initGame()):(r.boardArea=new CB.V1gv(t),r.boardArea.createCanvas(r.kernel,
{topDist:0,bottomDist:0,marginDistDivisor:26,shiftXPercent:-1.65,minWForCoordinates:220,transparent:!0,boardShadow:!1}),r.kernel.releaseCommandHandlers());r.boardArea.setSize(t.offsetWidth,t.offsetHeight);r.boardArea.setVisible(!0);this.V1er.push(r);this.V1gw(e,c);d++}}.bind(this))}};b.prototype.V1fp=function(){"undefined"!=typeof $&&$("#"+this.V1ep).find(".cbdia").each(function(b,d){this.V1gw(d,b)}.bind(this))};b.prototype.V1gw=function(b,d){if(b&&"undefined"!=typeof $){var c=$(b).find("#diagarea"+
d),e=c[0],q=c.width(),c=c.height();e&&this.V1er[d]&&this.V1er[d].boardArea&&this.V1er[d].boardArea.setSize(q-1,c)}};b.prototype.V1g2=function(){if(CB.V1gx){var b=$("#"+this.V1ep),d=$("#idEvCanvas-"+this.V16h),c=this.m_game.getEvaluationProfile();if(c&&c.isValid())if(d.length)this.evProfileControl.setEvalArr(c);else{var d=b.find(".nota-game"),e=d.height();0==e&&(e=b.height());b.find(".nota-foot-container");var q=document.createElement("div");q.id="idEvCanvas-"+this.V16h;q.className="cbevprofile";450<
CB.V5t.zoomToPix(e)||CB.V5t.V64()&&CB.V5t.V6h()||900<window.innerHeight?($(q).insertBefore(b.find(".nota-foot-container")),q.style.margin="0",q.style.boxShadow=""):d.append(q);this.V1gy=b=new CB.V1gv(q);b.setVisible(!0);var r=this;b.createCanvas({createControl:function(b,d,e,f){r.evProfileControl=new CB.V1gx(b,d,e,"EvlProfile",f,function(b){r.m_game.gotoIndex(Math.min(b,r.m_game.mainLine.length));r.IsInPageVisible(r.m_selElem)||r.scrollIntoView(r.m_selElem)});r.evProfileControl.setEvalArr(c);return r.evProfileControl}},
{});this.evProfileControl&&this.V1gy&&this.V1gy.setSize(this.V1gz,this.V1h0())}else this.evProfileControl&&this.evProfileControl.reset()}};b.prototype.V1h0=function(){var b=66;1150<window.innerHeight?b=80:800>window.innerHeight&&(b=600>window.innerHeight?45:55);return b};b.prototype.V1fq=function(b){this.V1gz=b-26;b=$("#idEvCanvas-"+this.V16h).width();this.V1gy&&(this.V1gy.setSize(b,this.V1h0()),this.V1gz=b)};b.prototype.V1gu=function(b,d){var c=document.createElement("div");c.id=b+d;c.className=
b;return c};b.prototype.isActive=function(){return this.V1eu};b.prototype.V1h1=function(b){this.V1eu=b};b.prototype.V1ey=function(b){b.preventDefault()};b.prototype.V1ez=function(b){b.preventDefault()};b.prototype.V1f0=function(b){if(this.V1eu){b.preventDefault();b=b.dataTransfer;var d=b.files;d.length?this.V1h2(d[0]):(b=b.getData("text"))&&this.V1h3(b)}};b.prototype.V1h2=function(b){if("function"==typeof FileReader){var d=new FileReader;d.onloadend=function(){this.V1h4(d)}.bind(this);d.readAsText(b)}};
b.prototype.V1h4=function(b){this.V1h3(b.result)};b.prototype.V1h3=function(b){this.m_game.merge&&this.m_game.merge(PGN.Vka(b))};V3bf.initForListeners(b);V3bf.addEvent(b,"MoveTouched");return b}();CB.NotaElement.factory=function(c,b,d,e,g){b=new CB.NotaElement(b,e||0,g);null==d&&(d=CB.cbNotationDefaults,d.useMatBalance=V3c6.panelMgr.useMatBalanceDefault());b.V16m(c,d);V3c6.panelMgr&&(V3c6.panelMgr.V169=b);return b};"use strict";
CB.V1em=function(){var c={},b=function(b){this.w=500;this.h=400;this.V1h5(300,200);this.V1ep=0;this.Vt8=new CB.V3bs;this.V1h6=V3c6.V1h7+"Buttons/Person.jpg";this.V1h8=V3c6.V1h7+"Flags/Flags16/United nations.png";this.V1ha=this.V1h9="";this.V16h=b;this.V1hb="";this.V1hc="<a href='http://pbserver.chessbase.com/Player?name={4},{5}&year={6}&ref=JSReader' target='_blank'><img class = 'cbplayerimage' src='{0}' alt='{4}' height='{2}' width='{3}'  playid='{1}' ></a>";V3c6.config.playerPicLink&&(this.V1hc=
"<a href='"+V3c6.config.playerPicLink+"' target='_blank'><img class = 'cbplayerimage' src='{0}' alt='{4}' height='{2}' width='{3}'  playid='{1}' ></a>")};b.prototype.V1hd=null;b.prototype.panel=null;b.prototype.V1et=null;b.prototype.m_selElem=null;b.prototype.V1eu=!0;b.prototype.arrPlayer=[null,null];b.prototype.V1he=[null,null];b.prototype.V1hf=function(b,d){return 380>b||240>d};b.prototype.V1hg=function(b,d){return 300>b||150>d&&500>b};b.prototype.V1hh=function(b,d){return 290>b||130>d&&360>b||
80>d};b.prototype.V1hi=function(b,d){return 220>b||90>d&&300>b||70>d};b.prototype.V1hj=function(b,d){return 140>b||70>d};b.prototype.V1hk=function(){return!this.V1hh(this.w,this.h)};b.prototype.resetPlayerCache=function(){};b.prototype.V1h5=function(b,c){this.w=b;this.h=c;var f;if(this.V1hb)if(this.V1hl){var h=String.formatEx(d,this.V1hl);f='<div class="cbgame-header" id="ourheaderinside" ><table class="scroll notaTable" id="ourheader"><td width="0%"><span class="cbplayerportrait">'+h+'</span></td><td width="0%"><span class="cbnota-title">'+
this.V1hb+'</span></td><td width="0%"><span class="cbplayerportrait">'+h+"</span></td></table></div>"}else f='<div class="cbgame-header" id="ourheaderinside" ><span class="cbnota-title">'+this.V1hb+"</span></div>";else f=this.V1hj(b,c)?'<div class="cbgame-header-tiny" id="ourheaderinside"  style="visibility:hidden;display:none;" ></div>':this.V1hi(b,c)?'<div class="cbgame-header-tiny" id="ourheaderinside" ><table class="notaTable" id="ourheader"><tr><span class="cbmain-header-verycompact"><td width="45%" class="cbplayerwhite"><span class="cbplayertiny">{white.list}</span></td><tpl if="{black}"><td width="10%" class="cbresult"><span >{resultStr}</span></td><td width="45%" class="cbplayerblack"><span class="cbplayertiny">{black.list}</span></td></tpl></tr></table></div>':
this.V1hh(b,c)?'<div class="cbgame-header-verycompact" id="ourheaderinside" ><table class="notaTable" id="ourheader"><tr><span class="cbmain-header-verycompact"><td width="45%" class="cbplayerwhite"><span class="cbplayer">{white.list}</span><tpl if="{eloWhStr}"><span class="cbelocompact">{eloWhStr}</span></tpl></td><tpl if="{black}"><td width="10%" class="cbresult"><span >{resultStr}</span></td><td width="45%" class="cbplayerblack"><span class="cbplayer">{black.list}</span><tpl if="{eloBlStr}"><span class="cbelocompact">{eloBlStr}</span></tpl></td></tpl></tr></table></div>':
this.V1hg(b,c)?'<div class="cbgame-header-morecompact" id="ourheaderinside" ><table class="scroll notaTable" style="table-layout:fixed" id="ourheader"><tr><span class="cbmain-header"><td colspan="2"class="cbflagwhite-morecompact"><span class="cbplayernation">{country[0]}</span></td><td colspan="9" class="cbplayerwhite"><span class="cbplayer" >{white.list}</span><tpl if="{eloWhStr}"><span class="cbelocompact">{eloWhStr}</span></tpl></td><tpl if="{black}"><td colspan="2" class="cbresult"><span >{resultStr}</span></td><td colspan="9"  class="cbplayerblack"><span class="cbplayer">{black.list}</span><tpl if="{eloBlStr}"><span class="cbelocompact">{eloBlStr}</span></tpl></td></tpl><td colspan="2" class="cbflagblack-morecompact"><span class="cbplayernation">{country[1]}</span></td></tr></table></div>':
this.V1hf(b,c)?'<div class="cbgame-header-compact" id="ourheaderinside" ><table class="scroll notaTable" style="table-layout:fixed" id="ourheader"><tr><span class="cbmain-header"><td colspan="9"class="cbplayerwhite"><span class="cbplayer" >{white.list}</span><tpl if="{eloWhStr}"><span class="cbelocompact">{eloWhStr}</span></tpl></td><tpl if="{black}"><td colspan="2" class="cbresult"><span >{resultStr}</span></td><td colspan="9"  class="cbplayerblack"><span class="cbplayer">{black.list}</span><tpl if="{eloBlStr}"><span class="cbelocompact">{eloBlStr}</span></tpl></td></tpl></tr><tr><td colspan="2" class="cbflagwhite"><span class="cbplayernation">{country[0]}</span></td><td colspan="1" class="cbfide cbfidecompact"><span>{titleWhStr}</span></td><td colspan="14" style="text-align:center"><tpl if="{event.event}"><span class="cbevent">{event.event}</span></tpl></td><td colspan="1" class="cbfide cbfidecompact"><span>{titleBlStr}</span></td><td colspan="2" class="cbflagblack"><span class="cbplayernation">{country[1]}</span></td></tr></table></div>':
'<div class="cbgame-header" id="ourheaderinside" ><table class="scroll notaTable" id="ourheader" style="table-layout:fixed" ><tr><span class="cbmain-header"><td  class="cbplayerportrait" colspan="3" rowspan="2"><span >{portrait[0]}</span></td><td class="cbplayerwhite" colspan="8"><span class="cbplayer">{white}</span><tpl if="{eloWhStr}"><span class="cbelo">{eloWhStr}</span></tpl></td><tpl if="{black}"><td colspan="2" class="cbresult"><span >{resultStr}</span></td><td class="cbplayerblack" colspan="8"><span class="cbplayer">{black}</span><tpl if="{eloBlStr}"><span class="cbelo">{eloBlStr}</span></tpl></td><td class="cbplayerportrait" colspan="3" rowspan="2"><span>{portrait[1]}</span></td></tpl></tr><tr><td colspan="2" class="cbflagwhite" ><span class="cbplayernation">{country[0]}</span></td><td colspan="1" class="cbfide"><span>{titleWhStr}</span></td><td colspan="12" class="cbtourndata"><tpl if="{event.event}"><span class="cbevent">{event.event}</span></tpl><tpl if="{uniquePlace}"><br/><span class="cbsite">{uniquePlace}</span></tpl><tpl if="{event.dt}"><span class="cbeventdate">{dateStr}</span></tpl><tpl if="{annotator}"><span class="cbannotator">{annotatorStr}</span></tpl></td><td colspan="1" class="cbfide"><span>{titleBlStr}</span></td><td colspan="2" class="cbflagblack"<span class="cbplayernation">{country[1]}</span></td></tr></table></div>';
this.headerTemplate=function(){return String.formatEx(f,this)}};var d="<img src='{0}' alt='' height='24' width='24'>";b.prototype.V1hm=function(d){d=d||new CB.Vh0;this.V1hn=ObjUtil.clone(d);this.V1hn.resultStr=b.V1fy(this.V1hn.getResult());this.V1hn.portrait=[null,null];this.V1hn.country=[null,null];this.V1hn.V1ho=[0,0];this.V1hn.title=[null,null];d.nationWhite&&(this.V1hn.V1ho[0]=d.nationWhite);d.nationBlack&&(this.V1hn.V1ho[1]=d.nationBlack);return this.headerTemplate&&this.headerTemplate.apply?
this.headerTemplate.apply(this.V1hn):" --- "};b.prototype.V1hp=function(b,d){this.V1hq("");-1==this.V1hn.event.event.search(this.V1hn.event.site)&&(this.V1hn.uniquePlace=this.V1hn.event.site);-1!=this.V1hn.annotator.search("Robot");this.V1hn.annotator="";this.V1hk()&&b&&(this.V1hq(b.eco),this.V1hn.eloWhStr=0<b.eloWh?b.eloWh:"",this.V1hn.eloBlStr=0<b.eloWh?b.eloBl:"",this.V1hn.annotatorStr=b.annotator?"["+b.annotator+"]":"","[ChessBase]"==this.V1hn.annotatorStr&&(this.V1hn.annotatorStr=""),this.V1hn.annotatorStr||
(this.V1hn.dateStr=b.date.toLocaleString()),this.V1hr(this.V1hn),this.V1hs(),this.V1hn.titleWhStr=this.V1ht(this.V1hn,0),this.V1hn.titleBlStr=this.V1ht(this.V1hn,1),this.V1hu=!1);if(d){if(this.headerTemplate&&this.headerTemplate.apply)return this.headerTemplate.apply(this.V1hn)}else if(this.V1hv.apply)return this.V1hv.apply(this.V1hn);return b?b.toString():null};b.prototype.V1ht=function(b,d){if(b.title&&CB.V1hw)return CB.V1hw.Vds(b.title[d])};b.prototype.V1hs=function(){if(CB.LoginMode){for(var b=
!1,d=this.V1hn.getBlackKey(),d=[this.V1hn.getWhiteKey(),d],f=CB.Vaz.WHITE;f<=CB.Vaz.BLACK;++f){var h=c[d[f]];h&&h.answered?(this.V1hn.country[f]=h["country"+this.V1hx()],this.V1hn.title[f]=h.title,f==CB.Vaz.WHITE?this.V1h9=this.V1hn.white:this.V1ha=this.V1hn.black):(this.V1hn.V1ho[f]?(b=new CB.V5o(this.V1hn.V1ho[f]),this.V1hy(d[f],b,f)):this.V1hn.country[f]=String.formatEx("<img src='{0}' alt='' height='16' width='16'>",this.V1h8),b=this.V1hu&&(!h||!h.requested));h&&h.answered?(this.V1hn.portrait[f]=
h["portrait"+this.V1hz()],!this.V1hn.portrait[f]&&h.portrait32&&(this.V1hn.portrait[f]=h.portrait32)):this.V1hn.portrait[f]=String.formatEx("<img src='{0}' alt='' height='24' width='24' style='display:none'>",this.V1h6)}b&&this.Vt8.exec(function(){this.V1i0()}.bind(this),500)}};b.prototype.V1hr=function(b){b.white.last=b.white.last.replace("-"," ");b.black.last=b.black.last.replace("-"," ");var d=b.white.first.search(/\./);0<d&&b.white.first&&(b.white.first=b.white.first.slice(0,d));d=b.black.first.search(/\./);
0<d&&b.black.first&&(b.black.first=b.black.first.slice(0,d));b.getWhiteKey=function(){var b=this.white.last;this.white.first&&(b+=this.white.first.slice(0,1));return b};b.getBlackKey=function(){var b=this.black.last;this.black.first&&(b+=this.black.first.slice(0,1));return b}};b.prototype.V1i0=function(){var b=this.m_game.getHeader();this.V1hr(b);var d=function(){if(V3c6.playerLobby&&V3c6.playerLobby.isLoggedIn()){this.V1h9=b.getWhite();this.V1ha=b.getBlack();var d=b.date.getYear();d||(d=CB.Date.getThisYear());
b.white.last&&(V3c6.playerLobby.V1i1(b.white.first,b.white.last,b.eloWh,d,this.V1i2.bind(this)),c[b.getWhiteKey()]||(c[b.getWhiteKey()]={}),c[b.getWhiteKey()].requested=!0);b.black.last&&(V3c6.playerLobby.V1i1(b.black.first,b.black.last,b.eloBl,d,this.V1i3.bind(this)),c[b.getBlackKey()]||(c[b.getBlackKey()]={}),c[b.getBlackKey()].requested=!0)}else console.log("NoPB: "+b.white.last+"-"+b.black.last)}.bind(this);V3c6.playerLobby&&V3c6.playerLobby.isLoggedIn()?d():(new CB.Timer(d)).runOnce(4E3)};b.prototype.V1i4=
function(d,g){if(d&&d.player){var f=d.player.getFirstName(),h=d.player.getLastName(),l=this.V1i5(h,f);c[l]||(c[l]={});c[l].answered=!0;var q=d.player,r=new CB.V5o(0);this.arrPlayer[g]=q;q.m_NewCBPlayer&&(r=q.m_NewCBPlayer.m_HighData.m_aNation,r=new CB.V5o(r),q=q.m_NewCBPlayer.m_HighData.m_aTitle,this.V1hn.title[g]=q,c[l].title=q,this.V1hn.V1ho[g]||this.V1hy(l,r,g));(q=d.pic)?(this.V1he[g]="string"===typeof q?q:b.V1i6(q),[34,40,48,64,80,100,120].forEach(function(b){var d=this.V1hn.date.year;d||(d=
CB.Date.getThisYear());d=String.formatEx(this.V1hc,this.V1he[g],g,b*Math.SQRT2,b,h,f,d);b==this.V1hz()&&(this.V1hn.portrait[g]=d);c[l]["portrait"+b]=d}.bind(this))):this.V1hf(this.w,this.h)||this.V1hg(this.w,this.h)||(q=this.V1hz(),34==q||40==q?q=32:64<q&&(q=64),r=V3c6.V1h7+String.formatEx("Flags/Flags{0}/{1}.png",q,r.getStrFlag()),r=String.formatEx("<img src='{1}' alt='' height='{0}' width='{0}' style='vertical-align: {2};border:none;box-shadow:none' >",q,r,"top"),this.V1hn.portrait[g]=c[l]["portrait"+
q]=r,this.V1hn.country[g]="",this.V1i7().forEach(function(b){this.V1hn.country[g]=" ";c[l]["country"+b]=" "}.bind(this)))}};b.prototype.V1i5=function(b,d){var c=b;if(d){var h=d.charAt(d.length-1);"0"<=h&&"9">=h&&(d=d.slice(0,firtsName.length-1));c+=d.slice(0,1)}return c};b.prototype.V1hy=function(b,d,f){if(d){var h=this.V1i7();c[b]||(c[b]={});h.forEach(function(h){var q;q=V3c6.V1h7+String.formatEx("Flags/Flags{0}/{1}.png",h,d.getStrFlag());q=String.formatEx("<img src='{1}' alt='' height='{0}' width='{0}' style='vertical-align: {2};border:none;box-shadow:none' >",
h,q,"middle");h==this.V1hx()&&(this.V1h8=V3c6.V1h7+String.formatEx("Flags/Flags{0}/United nations.png",h),this.V1hn.country[f]=q);c[b]["country"+h]=q}.bind(this))}};b.prototype.V1hx=function(){return 500>this.w||400>this.h?400>this.w||300>this.h?16:24:750<this.w&&560<this.h?48:32};b.prototype.V1i7=function(){return[16,24,32,48,64]};b.prototype.V1hz=function(){return 380<this.w&&260<this.h?450<this.w&&360<this.h?550<this.w&&450<this.h?650<this.w&&520<this.h?900<this.w?1E3<this.w?120:100:80:64:48:40:
34};b.prototype.V1i2=function(b){this.V1i4(b,CB.Vaz.WHITE);this.V1fw(100)};b.prototype.V1i3=function(b){this.V1i4(b,CB.Vaz.BLACK);this.V1fw(100)};b.V1i6=function(b){return CB.Vac.V1i8(b,"image/jpeg")};b.prototype.V16m=function(b,d){this.V1ep=b;this.V1ew(d);var c=CB.$("#"+b);if(CB.V1f1.V1f2("touchstart"))c.on("touchend",this.V1f4.bind(this));if(CB.V1f1.V1f2("mousedown"))c.on("mouseup",this.V1f4.bind(this));this.V1fo()};b.prototype.V1ew=function(b){b.notationLocalization||(b.notationLocalization=CB.V3b2);
this.V1et=new CB.Vie(b.notationLocalization);this.V1fc=b.useHeader;this.V1fd=b.useResult;this.V1eu=b.isActive;this.V1fe=b;b.game&&this.setGame(b.game)};b.prototype.setOptions=function(b){this.V1ew(b)};b.prototype.m_game=null;b.prototype.setGame=function(b){this.m_game&&(this.m_game.removeOnMoveListener(this.V1ff),this.m_game.removeOnNavigateListener(this.V1fg),this.m_game.removeOnChangedListener(this.V1fh),this.m_game.removeOnHeaderChangedListener(this.V1fi));if(this.m_game=b)this.V1ff=this.m_game.addOnMoveListener(this.Vjd.bind(this)),
this.V1fg=this.m_game.addOnNavigateListener(this.V1i9.bind(this)),this.V1fh=this.m_game.addOnChangedListener(this.V1ia.bind(this)),this.V1fi=this.m_game.addOnHeaderChangedListener(this.V1fn.bind(this)),this.V1hu=!0;this.V1fo()};b.prototype.getGame=function(){return this.m_game};b.prototype.Vjd=function(){};b.prototype.V1ia=function(){};b.prototype.V1fn=function(b){var d=null;this.m_game&&(d=this.m_game.getHeader());if(this.V1h9!==d.getWhite()||this.V1ha!==d.getBlack())this.V1hu=!0;b&&b.recalc&&(b=
$("#notaEl").width(),d=$("#notaEl").height(),null==b&&(b=$("#notaEl"+this.V16h).width(),d=$("#notaEl"+this.V16h).height()),this.V1h5(b,d));this.V1fo()};b.prototype.V1i9=function(b){};b.V1fy=function(b){return b==CB.Vgu.Vgx?"-":CB.Vgu.toString(b)};b.prototype.V1hq=function(b){3==b.length&&(this.V1hn.eco=lm[b+"_ECO"])};b.prototype.V1fw=function(b){this.Vt8.exec(function(){this.V1ib();delete this.V1hu}.bind(this),b)};b.prototype.V1fo=function(){var b=null;this.m_game&&(b=this.m_game.getHeader(),b.white.list=
b.white.getListStr(1),b.black.list=b.black.getListStr(1));this.V1hm(b,!0);b=this.V1hp(b,!0);CB.$("#theheader-"+this.V16h).html(b)};b.prototype.V1ib=function(){var b=null;this.m_game&&(b=this.m_game.getHeader());b=this.V1hp(b,!0);CB.$("#theheader-"+this.V16h).html(b)};b.prototype.focus=function(){};b.prototype.onMouseMove=function(b){b.preventDefault()};b.prototype.V1ic=function(b,d,c){"undefined"!==typeof Ext&&b&&!glSettings.inDialog()&&CB.Vnc&&CB.Vnc.V1id(b,d,c)};b.prototype.V1f4=function(b){};b.prototype.V1gn=
function(b){if(!(!this.V1eu||600>window.innerHeight||700>window.innerWidth)){var d=b.target;CB.$.is(d,"[playid]")&&(d=CB.$(d).attr("playid"),this.V1ic(this.arrPlayer[d],0,this.V1he[d]));b.preventDefault()}};b.prototype.isActive=function(){return this.V1eu};b.prototype.V1h1=function(b){this.V1eu=b};b.prototype.V1ey=function(b){b.preventDefault()};b.prototype.V1ez=function(b){b.preventDefault()};b.prototype.resize=function(b,d){CB.DOM.resize(this.V1ep,b,d)};b.prototype.V1ie=function(b,d){this.V1hb=
b;this.V1hl=d;this.V1h5(this.w,this.h);this.V1ib()};b.prototype.V1ag=function(b,d){this.w=b;this.h=d;this.V1h5(b,d);this.V1hu=!0;this.V1ib()};return b}();CB.V1em.factory=function(c,b){var d=new CB.V1em(b);d.V16m(c,CB.cbNotationDefaults);return V3c6.panelMgr.notaHeaderElement=d};"use strict";
CB.V1eo=function(){var c=function(b,d){this.V1ep=0;this.Vt8=new CB.V3bs;this.V1if=[];this.V16h=b;this.ticket=d};c.prototype.panel=null;c.prototype.V1ig=function(b){return this.V1ih(b)};c.prototype.getPiece=function(b){return(CB.Vaz.toString(CB.Piece.side(b))+CB.Piece.toString(b)).toLowerCase()};c.V1ii='<span class="piece-{0}"></span>';c.V1ij="</div>";c.prototype.V1ik=function(){var b;b='<a href="'+(V3c6?V3c6.V1il(V3c6.V3bp.V1im):"https://database.chessbase.com")+'" class="footer-book" id="footer-book{0}"></a><div class="footer-eval" id="footer-eval{0}"></div>';
return b+'<div class="mat-balance">'};c.prototype.V1ih=function(b){V3c6&&V3c6.config.V8p&&(c.V1ii='<span style="background-image: url( {1}Media/Buttons/{0}-16px.png );"></span>');for(b=0;6>b;b++);var d=String.formatEx(this.V1ik(),this.V16h);for(b=0;6>b;b++)if(0<this.V1if[b+1])for(var e=0;e<this.V1if[b+1];e++)d+=String.formatEx(c.V1ii,this.getPiece(b+1),CB.V5p());for(b=0;6>b;b++)if(0>this.V1if[b+1])for(e=0;e<Math.abs(this.V1if[b+1]);e++)d+=String.formatEx(c.V1ii,this.getPiece(b+9),CB.V5p());return d+=
c.V1ij};c.prototype.V1in=function(){CB.$("#thefooter-"+this.V16h).addClass("notafooter-container")};c.prototype.V1io=function(){CB.$("#thefooter-"+this.V16h).addClass("notafooter-container")};c.prototype.V16m=function(b){this.V1in();this.V1ep=b;this.update()};c.prototype.V1ew=function(b){this.V1fe=b;b.game&&this.setGame(b.game)};c.prototype.setOptions=function(b){this.V1ew(b)};c.prototype.m_game=null;c.prototype.setText=function(b){CB.$("#footer-eval"+this.V16h).text(b)};c.prototype.setGame=function(b){this.m_game&&
(this.m_game.removeOnMoveListener(this.V1ff),this.m_game.removeOnNavigateListener(this.V1fg),this.m_game.removeOnChangedListener(this.V1fh));if(this.m_game=b)this.V1ff=this.m_game.addOnMoveListener(this.Vjd.bind(this)),this.V1fg=this.m_game.addOnNavigateListener(this.V1i9.bind(this)),this.V1fh=this.m_game.addOnChangedListener(this.V1ia.bind(this))};c.prototype.getGame=function(){return this.m_game};c.prototype.Vjd=function(){this.update()};c.prototype.V1ia=function(){this.update()};c.prototype.V1i9=
function(b){!this.V1ip&&V3c6.aTBLobby&&(this.V1ip=V3c6.aTBLobby.addOnLiveBookDisplayListener(this.liveBookListener.bind(this)));this.update()};c.prototype.update=function(){for(var b=[],d=0;16>d;d++)b[d]=0;if(null!==this.getGame())for(var c=this.getGame().getCurPos(),d=0;64>d;d++)b[c.board[d]]++;for(d=1;7>d;d++)this.V1if[d]=b[d]-b[d+8];this.V1fo()};c.prototype.V1fw=function(){this.Vt8.exec(function(){this.V1fo()}.bind(this),200)};c.prototype.V1fo=function(){var b=new StringBuilder;this.V1iq()&&CB.$(".footer-eval").text("");
var d=this.V1ig(!1);d.length&&b.append(d);CB.$("#thefooter-"+this.V16h).html(b.toString());b=(b=CB.$("#notaparent"+this.V16h))&&b.single()&&360<b.single().clientHeight;this.V1iq()||b?CB.$("#thefooter-"+this.V16h).show():CB.$("#thefooter-"+this.V16h).hide()};c.prototype.V1iq=function(){for(var b=0;6>b;b++)if(0!=this.V1if[b+1])return!0;return!1};c.prototype.focus=function(){};c.prototype.V1ey=function(b){b.preventDefault()};c.prototype.V1ez=function(b){b.preventDefault()};c.prototype.resize=function(b,
d){CB.DOM.resize(this.V1ep,b,d)};c.prototype.liveBookListener=function(b){if(b&&(!this.ticket||this.ticket==b.ticket)){for(var d=0,c=0;c<b.moves.length;c++)d+=b.moves[c].getNGames();d?CB.$("#footer-book"+this.V16h).text(lm.LIVE_BOOK+": "+d+" "+lm.GAMES):CB.$("#footer-book"+this.V16h).text("")}};return c}();CB.V1eo.factory=function(c,b){var d=new CB.V1eo(b);d.V16m(c,CB.cbNotationDefaults);return V3c6.panelMgr.V1eo=d};"use strict";
CB.V1b1=function(){var c=new CB.Color(0,0,0,.25),b=new CB.Color(255,255,250,.95),d=1,e=function(b,c,e){e=e||!1;this.uniqueId=d++;this.background=new CB.V18z(document.body,"bMessageBG"+this.uniqueId);this.background.V1ir(99999);this.V1is=new CB.V18z(this.background,"bMessageText"+this.uniqueId);CB.$(this.background.elDOM).addClass("board-msg");e&&CB.$(this.background.elDOM).addClass("modal");b.messageWin=this;this.V1is.setText(c||"Empty Board Message");this.background.elDOM.addEventListener("mousedown",
function(d){e||(b.destroyMessage(),d.preventDefault())});this.V1is.elDOM.addEventListener("mousemove",function(b){b.preventDefault()})};e.prototype.destroy=function(){this.background.destroy()};e.prototype.setText=function(b){this.V1is.setText(b)};e.prototype.setVisible=function(b){this.background.setVisible(b)};e.prototype.V1ag=function(d){var e=d.cbcanvas.getBoundingClientRect(),h=new CB.V7q(e.left,e.top,e.left+e.width,e.top+e.height);d.cbcanvas.pixToZoomRect&&(h=d.cbcanvas.pixToZoomRect(d.getOuterRect()));
var l=2;d.nSqPix&&(l=d.nSqPix);var q=Math.round(.7*h.w),r=Math.round(q/11),t=1;50<this.V1is.getText().length&&(r*=2.1,t=2);this.background.setPos((h.w-q)/2+h.left+e.left,(h.h-r)/2+h.top+e.top-r/2-(l-r)/2+window.pageYOffset);this.background.setSize(q,r);this.V1is.setPos(0,0);this.V1is.setSize(q,r);d.cbcanvas.pixToZoom&&this.V1is.setBorder(d.cbcanvas.pixToZoom(2),new CB.Color(0,0,0,.7));this.V1is.setBackgroundColor(c);this.V1is.setColor(b);400<q?this.V1is.setFontFamily("Roboto, Merriweather, Helvetica, sans-serif; font-stretch: expanded"):
250>q&&this.V1is.setFontFamily("Roboto, Merriweather, Helvetica, sans-serif; font-stretch: condensed");d=Math.max(5,.9*r/t);do this.V1is.V1e6(d),--d;while(5<d&&this.V1is.V1e8()>.95*q&&this.V1is.V1e9()>.95*r);this.V1is.V1it()};return e}();"use strict";
CB.Vk9=function(){var c=function(){this.enabled=!0};c.prototype._game=null;c.prototype.setGame=function(b){this._game&&this._game.removeOnMoveListener(this.V1iu);(this._game=b)&&!V3c6.config.isSilentBoard&&(this.V1iu=this._game.addOnMoveListener(this.V1d8.bind(this)))};c.prototype.getGame=function(){return this._game};c.prototype.enable=function(b){this.enabled=b};c.prototype.V1iv={};c.prototype.V1iv[CB.Vaz.WHITE]=!0;c.prototype.V1iv[CB.Vaz.BLACK]=!0;c.prototype.V1iw=function(b,d){this.V1iv[b]=d};
c.prototype.V1d8=function(){var b=this._game.getCurPos(),d=this._game.getLastMove();d&&this.enabled&&V3c6.V1ix.Vjd(d,b)};return c}();"use strict";
CB.ChessAudio=function(){var c=function(b,d){this.V1iz=d;this.V1iy=b;this.queue=new CB.V1j0;this.V1j1=[];this.loaded=!1;this.newGame=this.V1j2("Board/newgame");this.V1j3=[];this.V1j4=[];this.V1j5=[];this.V1j6=[];this.V1j6.push(this.V1j2("Board/CaptStrong"));this.V1j7=this.V1j2("Board/castle");this.V1j8=[];this.V1j9=this.V1j2("Server/clapping");this.V1ja=this.V1j2("Server/draw");this.V1jb=this.V1j2("Server/remis");this.V1jc=this.V1j2("Server/ping2");this.V1jd=this.V1j2("Server/ringbellonce");this.V1je=
this.V1j2("Server/ChallengeBell");this.V1jf=this.V1j2("Server/Feedback/faster");this.V1jg=[];this.V1jh=[];this.V1ji=[];this.V1jj=[];this.V1jk=[];this.punishCap=[];this.punishNoCap=[];this.bestCap=[];this.bestNoCap=[];this.V1jl=[];this.V1jm=this.V1j2("Server/Aooga")};c.prototype.Vsa=function(){this.queue.Vsa()};c.prototype.V1jn=function(){new CB.V4z;this.V1jo=this.V1j2("Server/IndividualApplause");for(var b=1;11>=b;b++)this.V1j3.push(this.V1j2("Board/move"+b));for(b=1;15>=b;b++)this.V1j5.push(this.V1j2("Board/capture"+
b));for(b=1;5>=b;b++)this.V1j8.push(this.V1j2("Server/winapplause"+b));this.V1j8.push(this.V1j2("Server/cheer1"));this.V1j8.push(this.V1j2("Server/cheer2"));this.V1j8.push(this.V1j2("Server/cheer3"));this.V1j8.push(this.V1j2("Server/cheer5"));if(this.V1iz){for(b=1;16>=b;b++)this.V1jg.push(this.V1j2("Server/punch"+b));for(b=1;8>=b;b++)this.V1jh.push(this.V1j2("Server/grunt"+b));for(b=1;9>=b;b++)this.V1ji.push(this.V1j2("Server/MyError"+b));for(b=1;5>=b;b++)this.V1jk.push(this.V1j2("Server/Cheer"+b))}if(V3c6.config.Vrt||
this.V1iz)for(b=1;5>=b;b++)this.V1jj.push(this.V1j2("Server/OppError"+b));if(V3c6.config.Vrt){for(var d=["Plop","CluckCluck","FistInHand","Snap"],c=["Marseillaise","Yes","SoftClapClap"],g=["Cluck","DoubleSnap","Drawlips"],f=["CuckooWhistle","Moan","Moan2"],h=["Exhale","sharpinhale","sssinhale"],b=0;b<d.length;b++)this.punishCap.push(this.V1j2("Server/Feedback/"+d[b]));for(b=0;b<c.length;b++)this.punishNoCap.push(this.V1j2("Server/Feedback/"+c[b]));for(b=0;b<g.length;b++)this.bestCap.push(this.V1j2("Server/Feedback/"+
g[b]));for(b=0;b<f.length;b++)this.bestNoCap.push(this.V1j2("Server/Feedback/"+f[b]));for(b=0;b<h.length;b++)this.V1jl.push(this.V1j2("Server/Feedback/"+h[b]));for(b=1;2>=b;b++)this.V1j4.push(this.V1j2("Board/moveStrong"+b))}(new CB.Timer(function(){new CB.V4z;this.V1j1.forEach(function(b){b.load()});this.V1j1=[];this.loaded=!0}.bind(this))).runOnce(1E3)};c.prototype.Vjd=function(b,d){this.queue.Vsa();b.isTake()?b.isStrong?this.V1jp():this.V1jq():b.isCastling()?this.V1jr():b.isStrong?this.V1js():
this.V1jt()};c.prototype.V1jt=function(){this.queue.push(this.V1j3[Math.floor(Math.random()*this.V1j3.length)])};c.prototype.V1js=function(){this.queue.push(this.V1j4[Math.floor(Math.random()*this.V1j4.length)])};c.prototype.V1jq=function(){this.queue.push(this.V1j5[Math.floor(15*Math.random())])};c.prototype.V1jp=function(){this.queue.push(this.V1j6[Math.floor(Math.random()*this.V1j6.length)])};c.prototype.V1jr=function(){this.queue.push(this.V1j7)};c.prototype.V1ju=function(){this.queue.push(this.V1j8[Math.floor(9*
Math.random())])};c.prototype.V1jv=function(){this.queue.push(this.V1j9)};c.prototype.V1jw=function(){this.queue.push(this.V1jc)};c.prototype.V1jx=function(){this.V1jo&&this.queue.push(this.V1jo)};c.prototype.V1jy=function(){this.queue.push(this.V1je)};c.prototype.V1jz=function(){this.queue.push(this.V1jd)};c.prototype.V1k0=function(){this.queue.push(this.V1jg[Math.floor(14*Math.random())])};c.prototype.V1k1=function(){this.queue.push(this.V1jh[Math.floor(Math.random()*this.V1jh.length)])};c.prototype.V1k2=
function(){this.queue.push(this.V1ji[Math.floor(Math.random()*this.V1ji.length)])};c.prototype.V1k3=function(){this.queue.push(this.V1jj[Math.floor(Math.random()*this.V1jj.length)])};c.prototype.V1k4=function(){this.queue.push(this.V1jk[Math.floor(Math.random()*this.V1jk.length)])};c.prototype.V1k5=function(){this.queue.push(this.V1jf)};c.prototype.V1k6=function(){this.queue.push(this.punishCap[Math.floor(Math.random()*this.punishCap.length)])};c.prototype.V1k7=function(){this.queue.push(this.punishNoCap[Math.floor(Math.random()*
this.punishNoCap.length)])};c.prototype.V1k8=function(){this.queue.push(this.bestCap[Math.floor(Math.random()*this.bestCap.length)])};c.prototype.V1k9=function(){this.queue.push(this.bestNoCap[Math.floor(Math.random()*this.bestNoCap.length)])};c.prototype.V1ka=function(){this.queue.push(this.V1jl[Math.floor(Math.random()*this.V1jl.length)])};c.prototype.V1kb=function(){CB.V7a.V7d()==CB.V7a.DEU?this.queue.push(this.V1jb):this.queue.push(this.V1ja)};c.prototype.V16n=function(){this.queue.push(this.newGame)};
c.prototype.V1kc=function(){this.queue.push(this.V1jm)};c.prototype.V1kd=function(){this.queue.push(this.V1je)};c.prototype.V1j2=function(b){b=new CB.V1ke(this.V1iy+b,null,!0);this.V1j1.push(b);return b};return c}();"use strict";
CB.V1kf=function(){var c=function(b){this.config=b||{};this.config.V1kg=150;this.height=20};c.prototype.V1a9=function(b,d){return this.V1kh(b,d)};c.prototype.V1kh=function(b,d){var c=d.zoomToPix(this.config.hMax);return Math.min(c,b/this.config.hScale)};c.prototype.V1aj=function(b,d){this.height=d.pixToZoom(b)};c.prototype.V1ah=function(b,d){return b>d.pixToZoom(this.config.V1kg)};c.prototype.V1ai=function(b,d){return d?d.zoomToPix(this.config.spacing):0};c.prototype.V1ki=function(b){var d=b.cbcanvas.canvas.getBoundingClientRect(),
c=b.cbcanvas.pixToZoomRect(b.getOuterRect());c.h=this.height;var g=b.cbcanvas.pixToZoom(b.getOuterRect().h);c.move(d.left,d.top+g+b.cbcanvas.pixToZoom(this.config.spacing)-1);return c};return c}();
CB.BoardURL=function(){var c=1,b=function(d,e){b.superClass.call(this,e);this.uniqueId=c++;this.background=new CB.V18z(document.body,"bBottomBG"+this.uniqueId);this.url=new CB.V18z(this.background,"bBottomURL"+this.uniqueId);this.url.V1kj(d.url,d.linkText,"BoardBottomURL",!0)};CB.inherit(b,CB.V1kf);b.prototype.V1ag=function(b){var c=this.V1ki(b),g=c.w;this.config.rightAlign&&(g-=b.nMarginW);this.background.setPos(c.left,c.top);this.background.setSize(g,c.h);this.url.setPos(0,0);this.url.setSize(g,
c.h);this.url.elDOM.className="BoardBottomURL";this.url.V1e6(c.h);this.url.V1e6(Math.max(3,c.h));this.config.rightAlign?this.url.V1kk():this.url.V1it();V3c6.config.V1kl&&(this.url.V1km.style.color="Black")};b.prototype.destroy=function(){this.background.destroy()};b.prototype.setVisible=function(b){this.background.setVisible(b)};return b}();
CB.BoardDoubleURL=function(){var c=1,b=function(d,e){b.superClass.call(this,e);this.uniqueId=c++;this.background=new CB.V18z(document.body,"bBottomURLBG"+this.uniqueId);this.urlLeft=new CB.V18z(this.background,"bBottomURLLeft"+this.uniqueId);this.urlLeft.V1kj(d.urlLeft,d.linkTextLeft,"BoardBottomURL",!0);this.urlRight=new CB.V18z(this.background,"bBottomURLRight"+this.uniqueId);this.urlRight.V1kj(d.urlRight,d.linkTextRight,"BoardBottomURL",!0)};CB.inherit(b,CB.V1kf);b.prototype.V1ag=function(b){var c=
this.V1ki(b);b=b.cbcanvas.pixToZoom(b.nMarginW);var g=c.w,g=g-2*b;this.background.setPos(c.left,c.top);this.background.setSize(g,c.h);g/=2;this.urlLeft.setPos(b,0);this.urlLeft.setSize(g,c.h);this.urlLeft.elDOM.className="BoardBottomURL";this.urlLeft.V1e6(Math.max(4,c.h));this.urlLeft.V1kn();this.urlRight.setPos(g+b,0);this.urlRight.setSize(g,c.h);this.urlRight.elDOM.className="BoardBottomURL";this.urlRight.V1e6(Math.max(4,c.h));this.urlRight.V1kk();if(V3c6.config.V1kl||V3c6.config.transparent)this.urlLeft.V1km.style.color=
"Black",this.urlRight.V1km.style.color="Black"};b.prototype.destroy=function(){this.background.destroy()};b.prototype.setVisible=function(b){this.background.setVisible(b)};return b}();"use strict";
CB.V1aq=function(){var c=new CB.Color(0,0,0,.3),b=new CB.Color(210,255,170,.75),d=new CB.Color(255,255,220,.9),e=1,g=function(b,g,l,q,r,t){this.board=b;this.uniqueId=e++;this.background=new CB.V18z(b.cbcanvas.canvas.parentNode,"bTitleBG"+this.uniqueId);r||(this.clock=new CB.V1du(this.background));this.V1is=new CB.V18z(this.background,"bTitleText"+this.uniqueId);CB.V138&&!V3c6.V190()&&(this.V1ko=new CB.CloseButton(this.background,"bCloseBtn"+this.uniqueId,this.V1kp.bind(this)));b.titleWin=this;this.V1kq=
g;this.V1is.setText(q||"Waiting for game...");$(this.V1is.elDOM).on("click",l);$(this.V1is.elDOM).on("dblclick",t);this.clock&&($(this.clock.background.elDOM).on("click",l),$(this.clock.background.elDOM).on("dblclick",t));this.V1is.setBackgroundColor(c);this.V1is.setColor(d);this.V1is.setFontFamily('"Roboto Condensed", "Roboto", "Arial Narrow", sans-serif');$(this.V1is).css("cursor","pointer");this.h=Math.round(b.cbcanvas.pixToZoom(this.V1kh(b.height)))};g.prototype.destroy=function(){this.background.destroy()};
g.prototype.V1d9=!0;g.prototype.setText=function(b){this.V1is.setText(b);if(this.textW){b=this.V1kr();do this.V1is.V1e6(b),--b,this.V1is.V1e8(),this.V1is.V1e9();while(4<b&&(this.V1is.V1e8()>this.textW-4||this.V1is.V1e9()>this.h-2))}};g.prototype.setVisible=function(b){this.background.setVisible(b)};g.prototype.V1ks=!1;g.prototype.markAsSelected=function(e){this.V1ks!=e&&((this.V1ks=e)?(this.V1is.setBackgroundColor(b),this.V1is.setColor("black")):(this.V1is.setBackgroundColor(c),this.V1is.setColor(d)))};
g.prototype.V1az=function(){return this.clock};g.prototype.V1kr=function(){if(this.board){var b=Math.round(this.board.cbcanvas.pixToZoom(this.V1kh(this.board.height))),b=Math.round(.65*b);8>b&&(b=8);return b}return 16};g.prototype.V1a9=function(b,d){return this.V1kh(b)};g.prototype.V1kh=function(b){var d=this.board?this.board.cbcanvas.zoomToPix(36):36;return Math.min(d,b/16)};g.prototype.V1ag=function(b){this.board=b;b.cbcanvas.canvas.getBoundingClientRect();var d=b.cbcanvas.pixToZoomRect(b.getOuterRect()),
c=Math.round(b.cbcanvas.pixToZoom(this.V1kh(b.height))),e=c+1,g=this.V1kr();this.h=c;d.move(-1,-this.h);d.h=this.h;this.btnW=this.V1ko?e:0;CB.V5t.V64()&&this.V1ko&&this.btnW<CB.V5t.pixToZoom(26)&&(this.btnW=CB.V5t.pixToZoom(26));this.V1ku=this.clock?Math.min(260,.4*d.w):0;d.w--;this.textW=d.w-this.V1ku-this.btnW;this.background.setPos(d.left,d.top);this.background.setSize(d.w,d.h);c=Math.max(1,Math.min(4,Math.round(Math.sqrt(d.w/100))));this.background.V1ea(c,8*c,"rgba( 60, 30, 20, 0.5 )");this.clock&&
this.clock.setPosSize(0,0,this.V1ku,this.h);this.V1is.setPos(this.V1ku,0);this.V1is.setSize(this.textW,this.h);this.V1is.setBorder(b.cbcanvas.pixToZoom(1),new CB.Color(0,0,0,1));this.markAsSelected(this.V1ks);this.V1is.V1it();do this.V1is.V1e6(g),--g,this.V1is.V1e8(),this.V1is.V1e9();while(4<g&&(this.V1is.V1e8()>this.textW||this.V1is.V1e9()>this.h-2));this.V1is.V1e7(!0);this.V1ko&&(this.V1ko.setPos(d.w-this.btnW,this.h-this.btnW),this.V1ko.setSize(this.btnW,this.btnW))};g.prototype.V1kp=function(b){void 0!==
this.V1kq&&this.V1kq(b)};return g}();"use strict";
CB.V1kv=function(){var c=function(b,d,c,g){this.cbcanvas=b;this.boardArea=new CB.Vkk(b,d,c,g);this.width=d;this.height=c;this.V191=glSettings.addOnBoardStyleListener(this.onBoardStyle.bind(this));this.Vkg=V3c6.commands.Vkh(this)};c.prototype.destroy=function(){glSettings.removeOnBoardStyleListener(this.V191);V3c6.commands.Vkj(this.Vkg)};c.prototype.onKeyDown=function(b){var d=!0;switch(b.getKey()){default:d=!1;break;case b.TAB:this.V1kw()}return d};c.prototype.onBoardStyle=function(b,d){V3c6.V1a8(CB.V16s.prototype.V17f(b));
for(var c=0;c<this.boardArea.boards.length;c++)this.boardArea.boards[c].onBoardStyle(b,d);this.boardArea.Vmi()};c.prototype.addBoard=function(b,d,c){0==this.boardArea.boards.length&&this.boardArea.V19m();c||b.addTitle(function(){return this.V1kq(b,d)}.bind(this),!1,function(b){return this.V19h(b)}.bind(this));V3c6.V190()&&V3c6.useBottomURL&&V3c6.GetBottomURLData&&100<window.innerHeight&&(b.bottomWin=new CB.BoardDoubleURL(V3c6.GetBottomURLData(),{hScale:25,hMax:16,spacing:3,rightAlign:!0}));b.fnBoardClick=
this.V1kx.bind(this);c=!1;if(null!=d){b.idGame=d;for(var g=0;!c&&g<this.boardArea.boards.length;g++)c=this.boardArea.boards[g].idGame==d}c||this.boardArea.addBoard(b)};c.prototype.V193=function(b){b&&(this.cbcanvas.V19g(!0),this.boardArea.V193(b),this.boardArea.Vmi(),this.V1ky())};c.prototype.V196=function(){this.V197()};c.prototype.V197=function(){this.boardArea.V197();this.cbcanvas.requestRedraw();this.V17e(this.cbcanvas.V9r)};c.prototype.V1kz=function(b){this.notation=b};c.prototype.beforeResize=
function(){this.boardArea.beforeResize()};c.prototype.resize=function(b,d){this.width=b;this.height=d;this.boardArea.resize(b,d);this.V1ky()};c.prototype.V1ky=function(){if(this.V1l0){var b=this.V1l1(this.V1l0);b&&b.markAsSelected(!0)}};c.prototype.draw=function(b){this.boardArea.draw(b)};c.prototype.V198=function(b){this.boardArea.V198(b)};c.prototype.V17e=function(b){this.boardArea.V17e(b)};c.prototype.V19m=function(){};c.prototype.V1l2=function(){this.boardArea.Vmi();this.V1ky()};c.prototype.Vmi=
function(){this.boardArea.Vmi()};c.prototype.onMouseDown=function(b,d){if(!V3c6.lobby.boardAreaClickHandler||0!=b.button&&"undefined"!=typeof b.button)this.boardArea.onMouseDown(b,d);else V3c6.lobby.boardAreaClickHandler(b)};c.prototype.onMouseUp=function(b,d){this.boardArea.onMouseUp(b,d)};c.prototype.onMouseMove=function(b,d){this.boardArea.onMouseMove(b,d)};c.prototype.onMouseWheel=function(b,d){};c.prototype.onMouseEnter=function(b,d){this.boardArea.onMouseEnter(b,d)};c.prototype.onMouseLeave=
function(b,d){this.boardArea.onMouseLeave(b,d)};c.prototype.V19h=function(b){if(this.V1l3){var d=this.V1l1(this.V1l0);this.V1l3(d.idGame,b)}V3c6.lobby.boardAreaDClickHandler&&0==b.button&&V3c6.lobby.boardAreaDClickHandler(b)};c.prototype.Vo0=function(){};c.prototype.Vo1=function(){};c.prototype.Vo2=function(){};c.prototype.Vo4=function(){};c.prototype.Vo5=function(b){};c.prototype.V1l4=function(b,d){};c.prototype.V1kq=function(b,d){this.V193(b);void 0!==this.V1l5&&this.V1l5(d)};c.prototype.V1kx=function(b,
d,c){b!=this.V1l6&&(c=this.V1l1(b),this.V1l7(c),void 0!==this.V1l8&&this.V1l8(c.idGame,d),this.V1l6=b)};c.prototype.V1l9=function(b){b<this.boardArea.boards.length&&this.V1l7(this.boardArea.boards[b])};c.prototype.V1l7=function(b){var d=this.V1l1(this.V1l0);d&&d!==b&&d.markAsSelected(!1);b?(b.markAsSelected(!0),this.V1l0=b.uniqueId):this.V1l0=-1};c.prototype.markBoardByGameId=function(b){b=this.V1la(b);this.V1l7(b)};c.prototype.V1kw=function(){var b=this.V1l0,d=this.boardArea.boards.findIndex(function(d){return d.uniqueId==
b});0<=d&&(d+=1,d>=this.boardArea.boards.length&&(d=0));this.V1l9(d);this.V1l8&&this.boardArea.boards[d]&&this.V1l8(this.boardArea.boards[d].idGame)};c.prototype.V1la=function(b){return this.boardArea.boards.find(function(d){return d.idGame==b})};c.prototype.V1l1=function(b){if(b)return this.boardArea.boards.find(function(d){return d.uniqueId==b})};return c}();"use strict";
CB.V1lb=function(){var c=function(b,d){this.V16h=b;this.fnOnEnter=d;this.V1lc=1};c.prototype.V16m=function(b,d){this.options=d;var c;this.V1ep=c="string"==typeof b?b:$(b).attr("id");c=$("#"+c);c.addClass("cbChatContainer");c[0].style.position="relative";this.elem=c[0];var g=document.createElement("div");g.id=this.V1ep+"-out";var f=document.createElement("input");f.id=this.V1ep+"-in";f.placeholder="Please log in with your ChessBase Account to type chat here.";this.V1ld();c.append(g);c.append(f);g=
$(g);f=$(f);g[0].style.width="calc( 100% - 2px )";g[0].style.height="100%";g.addClass("cbChatOut");f.addClass("cbChatInp");g[0].style.width="calc( 100% - 8px) ";if(this.options.toolbar){var h=$(String.f('<div class="{0}" id="{1}-tb"></div>',"cbChatToolBar",this.V1ep));c.append(h);this.V1le(h)}f.keypress(this.V1lf.bind(this));f.focus(this.onFocus.bind(this));f.blur(this.onBlur.bind(this));if(this.elem&&(g.on("mousewheel",this.onMouseWheel.bind(this)).on("DOMMouseScroll",this.onMouseWheel.bind(this)),
CB.V1f1.V1f2("touchstart")&&(g.on("touchstart",this.V1f3.bind(this)).on("touchend",this.V1f4.bind(this)).on("touchleave touchcancel",this.onMouseLeave.bind(this)),this.V1f5=!0),CB.V1f1.V1f2("mousedown")))g.on("mousedown",this.V1f3.bind(this)).on("mouseup",this.V1f4.bind(this)).on("mouseleave",this.onMouseLeave.bind(this)).on("dblclick",this.V19h.bind(this));c.resize(this.resize.bind(this));var l;this.options&&this.options.noInvite||(l=this.V1lg()?this.V1lh():"Click <a href=https://live.chessbase.com/Logon?returnurl="+
encodeURIComponent(document.location)+' target="_blank">here to login</a> with your free ChessBase Account and type chat below.');this.V1li(l,"cbChatLine cbChatSeparator")};c.prototype.V1lj=function(b){this.V1lk=this.nReceivers=b;this.V1ll()};c.prototype.V1lm=function(b){this.V1ln=this.nReceivers=b;this.V1ll()};c.prototype.V1ld=function(){var b=$(String.f('<div id="{0}-title" class="cbChatTitle">Chat And Info</div>',this.V1ep));$(this.elem).append(b)};c.prototype.setTitle=function(b){$("#"+this.V1ep+
"-title").text(b)};c.prototype.V1lo=function(b){this.fnOnEnter=b};c.prototype.V1lh=function(){return'<a href="https://live.chessbase.com/logon?returnurl='+encodeURIComponent(document.location)+'">Log in</a> with your free ChessBase Account and type chat below.'};c.prototype.V1lg=function(){return-1!=document.URL.search(/live.chessbase.com/i)||-1!=document.URL.search(/live.playchess.com/i)};c.prototype.V1lp=function(){return $("#"+this.V1ep+"-out")};c.prototype.V1lq=function(){return $("#"+this.V1ep+
"-in")};c.prototype.V1lr=function(){this.setTitle("Chat To All");this.options.toolbar&&$("#radBtnall"+this.V16h).length&&($("#radBtnall"+this.V16h).jqxRadioButton("check"),$("#radBtnopp"+this.V16h).jqxRadioButton("uncheck"),$("#radBtnSpanopp"+this.V16h).text("To Opponent"),$("#radBtnSpanopp"+this.V16h).jqxRadioButton("disable"))};c.prototype.V1ls=function(){this.setTitle("Chat To Kibitzers");this.options.toolbar&&$("#radBtnall"+this.V16h).length&&(this.V1lt=!0,this.V1lv=this.V1lu=!1,$("#radBtnopp"+
this.V16h).jqxRadioButton("check"),$("#radBtnSpanopp"+this.V16h).text("To Kibitzers"),$("#radBtnall"+this.V16h).jqxRadioButton("uncheck"))};c.prototype.V1lw=function(b){this.V1lu=this.V1lt=!1;this.V1lv=!0;this.V1lx(b);this.fnOnEnter=this.options.V1ly};c.prototype.V1lx=function(b){this.setTitle("Chat with "+b);this.options.toolbar&&$("#radBtnall"+this.V16h).length&&($("#radBtnopp"+this.V16h).jqxRadioButton("check"),$("#radBtnSpanopp"+this.V16h).text("To "+b),$("#radBtnall"+this.V16h).jqxRadioButton("uncheck"),
this.V1lz=b)};c.prototype.V1m0=function(b,d){var c=d||V3c6.lobby.lists.V1m1[b];c&&(this.V1lt=!1,this.V1lu=!0,this.V1lv=!1,this.V1lx(c),this.fnOnEnter=this.options.V1m2,this.Vaw=b)};c.prototype.V1m3=function(b,d){this.V1lu&&this.Vaw?(this.V1m4(d),V3c6.lobby.V1m5(d,this.Vaw,b)):this.V1lv&&(this.V1m4(d),V3c6.lobby.playingSession.V1m3(b,d))};c.prototype._fnReceiverClick=function(b,d){this.fnOnEnter=null;if(d)switch(b){case "opp":case "one":this.V1lt?(this.nReceivers=this.V1ln,this.fnOnEnter=this.options.V1m6):
(this.nReceivers=1,this.V1lu?this.fnOnEnter=this.options.V1m2:this.V1lz&&(this.fnOnEnter=this.options.V1ly));this.fnOnEnter?this.V1ll():this.V1m7("Please select a receiver in the community or play against somebody.");break;case "all":this.nReceivers=this.V1lk,this.V1ll(),this.fnOnEnter=this.options.V1m8}return null!=this.fnOnEnter};c.prototype.resize=function(){var b=0;this.options.toolbar&&(b=32);var d=$("#"+this.V1ep),c=$("#"+this.V1ep+"-title"),g=$("#"+this.V1ep+"-in"),f=$("#"+this.V1ep+"-out");
g[0].style.width=h-8+"px";g.height(20);d=d.height();g=g.outerHeight(!0);c=c.outerHeight(!0);c=d-c-g-b;0>c&&(c=10);f[0].style.height=c+"px";f[0].style.width="100%";var h;f.width();f=$("#"+this.V1ep+"-tb");f.length&&(f[0].style.height=b+"px")};c.prototype.hasFocus=function(){return $("#"+this.V1ep+"-in").is(":focus")};c.prototype.onFocus=function(b){this.V1m9=!0};c.prototype.onBlur=function(b){this.V1m9=!1};c.prototype.V1lf=function(b){13==b.keyCode&&(b=this.V1lq().val())&&(this.fnOnEnter&&this.fnOnEnter(this.V16h,
b),this.V1lq().val(""))};c.prototype.V1f3=function(b){this.V1a0=!0};c.prototype.V1f4=function(b){this.V1a0=!1};c.prototype.V19h=function(b){};c.prototype.onMouseWheel=function(b){};c.prototype.onMouseLeave=function(b){this.V1a0=!1};c.prototype.out=function(b,d,c){"string"===typeof b?this.add(b,d,c):b.isToChannel()?this.V1ma(b):b.isOpponentChat?this.V1mb(b):b.isToSession()?this.V1mc(b):b.isPrivate()||b.isToIndividuals()?this.V1mb(b):this.add(b.toString(),d)};c.prototype.V1md=function(b){this.V1li(b);
this.V1me()};c.prototype.V1mf=function(b){b=String.formatEx('<span class="cbChannelSender">-> To All:</span><span class="cbChannelChat cbMyChat">{0}</span>',b);this.V1li(b);this.V1me()};c.prototype.V1m4=function(b){b=String.formatEx('<span class="cbGameChatSender">-> {1}</span><span class="cbGameChat cbMyChat">{0}</span>',b,this.V1lz);this.V1li(b);this.V1me()};c.prototype.V1ma=function(b){b=String.formatEx('<span class="cbChannelSender">{0}: (To All)</span><span class="cbChannelChat">{1}</span>',
b.V1mg,b.strMsg);this.V1li(b);this.V1me()};c.prototype.V1mc=function(b){b=String.formatEx('<span class="cbGameChatSender">{0}:</span><span class="cbGameChat">{1}</span>',b.V1mg,b.strMsg);this.V1li(b);this.V1me()};c.lineId=0;c.prototype.V1mb=function(b){var d="chatLine"+(++c.lineId).toString(),e=String.formatEx('<span id="{2}"><span class="cbGameChatSender">{0}:</span><span class="cbGameChat">{1}</span></span>',b.V1mg,b.strMsg,d);this.V1li(e);this.V1me();$("#"+d).click(function(){V3c6.lobby.lists.registerClientName(b.Vav,
b.V1mg);this.V1m0(b.Vav)}.bind(this));V3c6.panelMgr.signalIncomingChat(b.V1mg)};c.prototype.V1me=function(){var b=$("#"+this.V1ep+"-out"),d=b.offset().top,c=b.scrollTop(),g=b.find("div").last().offset().top;b.scrollTop(g-d+c)};c.prototype.add=function(b,d,c){if(b){var g=$("#"+this.V1ep+"-out"),f=!1;c&&(c=g.find("div").last(),c.length&&(c.text(c.text()+b),f=!0));f||(f=document.createElement("div"),$(f).text(b),$(f).addClass("cbChatLine"),$(f).addClass(d),g.append(f));this.V1me()}};c.prototype.addKibitzChat=
function(b,d,c,g,f,h){if(b||f)this.V1mh(b,d,g,f),b=$($.parseHTML(c)).text(),g=this.V1li(b,"cbChatLine"),$(g).addClass("cbChatSeparator"),b=$("#"+this.V1ep+"-out"),d=b.offset().top,c=b.scrollTop(),h&&(h=$(g).offset().top,b.scrollTop(h-d+c))};c.prototype.V1mh=function(b,d,c,g){var f="";d&&d.white?(f=d.white.getListStr(1),(d=d.black.getListStr(1))&&(f+="-"+d)):"String "==typeof d&&(f=d);d="";var h="cbSessionName";c&&c.idGame&&(d=String.formatEx('onClick = "V3c6.panelMgr.addGameById( {0}, {1}, {2} );"',
this.V16h,c.idGame,c.mvInx),h="cbChatGameLink");c="cbSender";b==this.user&&(c+=" cbChatUserName cbBigUserName");b=g?String.formatEx('<span class="cbSessionName {2}"{1}>{0}:</span>',f,d,h):String.formatEx('<span class="{4}">{0}:</span><span class="cbSessionName {3}"{2}>({1})</span>',b,f,d,h,c);f="cbChatOrigin";g&&(f+=" cbAutoChat");this.V1li(b,f)};c.prototype.clear=function(){$("#"+this.V1ep+"-out").html("")};c.prototype.outLoginOk=function(b){this.out("");this.user=b;b=String.formatEx("{0}<span class='cbChatUserName'>{1}</span>",
"Hello, ",b);this.V1li(b,"cbChatLoginOk cbChatSeparator");this.V1ll()};c.prototype.V1ll=function(){var b="Type Chat Here And Press Enter";this.nReceivers&&(b+=" ("+this.nReceivers+" receivers)");this.V1m7(b)};c.prototype.V1m7=function(b){var d=$("#"+this.V1ep+"-in");d&&d.attr("placeholder",b)};c.prototype.inviteLogin=function(){var b=this.V1lh();this.V1li(b,"cbChatLine")};c.prototype.V1li=function(b,d){var c=$("#"+this.V1ep+"-out"),g=document.createElement("div");d&&$(g).addClass(d);$(g).html(b);
c.append(g);return g};c.prototype.V1le=function(b){var d=this;$(b).jqxToolBar({width:"100%",tools:"custom | custom | button",theme:"chessbase",initTools:function(b,c,f){switch(c){case 0:return d._createRadioButton(f,"To Opponent","opp",160,22,!1);case 1:return d._createRadioButton(f,"To All","all",160,22,!0);case 2:f.jqxButton({width:130,height:22}),f.text("Shortcuts"),f.click(function(b){d._fnReceiverClick("opp",!0)&&V3c6.panelMgr.openChatMenu(b,f,50)})}}})};c.prototype._createRadioButton=function(b,
d,c,g,f,h){d=$(String.f("<div id={1}><span id={2}>{0}</span></div>",d,"radBtn"+c+this.V16h,"radBtnSpan"+c+this.V16h));b.append(d);d.jqxRadioButton({width:g,height:f,checked:h});var l=this;d.on("change",function(b){l._fnReceiverClick(c,b.args.checked)})};c.prototype.V1mi=function(b){b.args.item==this.V1lc&&this.V1me()};return c}();CB.V1lb.factory=function(c,b,d,e){b=new CB.V1lb(b||0,d);b.V16m(c,e);return b};"use strict";
CB.V1mj=function(){var c=function(b,d,c){this.V16h=b;this.V16i=!1;this.fnGetKernel=d;this.ticket=c;this.stampToday=CB.V1mk.V1ml();this.entries=[];this.config={minVisits:5};this.curMove=0;this.V1mm()};c.prototype.V16m=function(b,d){var c;this.V1ep=c="string"==typeof b?b:b.id;c=$("#"+c);c.addClass("cbBookContainer");this.elem=c[0];this.V1mn()};c.prototype.resize=function(){$(this.elem).jsGrid("option","fields",this.V1mo($(this.elem).width()));$(this.elem).jsGrid("option","height","100%");$(this.elem).jsGrid("option",
"width","100%");this.V16i||this.V1mm();$(this.elem).jsGrid("refresh")};c.prototype.V1mn=function(){$(this.elem).jsGrid({width:"400px",height:"100%",heading:!0,filtering:!1,editing:!1,inserting:!1,updateOnResize:!0,sorting:!0,autoload:!0,noDataContent:"Replay and check the LiveBook here",rowClick:function(b){},controller:{loadData:function(b){b=[];for(var d=0;d<this.entries.length;d++){var c={Move:this.entries[d].line,N:this.entries[d].getStrNGames(),Visits:this.entries[d].getStrNVisits(),Players:this.entries[d].getPlayers(),
Result:this.entries[d].getStrResult(),Elo:this.entries[d].getStrElo()};b.push(c)}return b}.bind(this)},fields:this.V1mo()});this.V1mp=!0};c.prototype.V1mq=function(d,c){if(this.curMove<b||this.isStandard)return"-"==d?String.formatEx('<span class="jsg-liveVisits">({0})</span>',c.Visits):d;var f="https://live.chessbase.com/logon?returnurl="+encodeURIComponent(document.location);return String.formatEx('<a class="jsg-premiumRequired" href="{0}">Login</a>',f)};c.prototype.V1mr=function(b,c){if(this.curMove<
d||this.isPremium)return b;if(this.isStandard)return String.formatEx('<a class="jsg-premiumRequired" href="{0}">Premium Required</a>',"https://account.chessbase.com/en/matrix");var f="https://live.chessbase.com/logon?returnurl="+encodeURIComponent(document.location);return String.formatEx('<a class="jsg-premiumRequired" href="{0}">Premium Required</a>',f)};c.prototype.V1mo=function(b){if(380>(b||400))return[{name:"Move",type:"text",width:30,css:"jsg-liveMove"},{name:"N",type:"number",width:25,css:"jsg-liveNGames",
itemTemplate:this.V1mq.bind(this)},{name:"Result",type:"number",width:25,css:"jsg-liveResult"},{name:"Elo",type:"number",width:20,css:"jsg-liveElo"}];b=[{name:"Move",type:"text",width:18,css:"jsg-liveMove"},{name:"N",type:"number",width:16,css:"jsg-liveNGames",itemTemplate:this.V1mq.bind(this)},{name:"Result",type:"number",width:10,css:"jsg-liveResult"},{name:"Elo",type:"number",width:8,css:"jsg-liveElo"}];return b=b.concat([{name:"Players",type:"text",width:50,css:"jsg-livePlayers",itemTemplate:this.V1mr.bind(this)}])};
c.prototype.isVisible=function(){return $(this.elem).is(":visible")};var b=12,d=7;c.prototype.liveBookListener=function(b){if(!this.ticket||this.ticket==b.ticket)if(this.entries=[],$(this.elem).jsGrid("option","noDataContent","Position not in LiveBook"),!this.isVisible())this.lbInfo=b;else if(this.fnGetKernel()&&this.fnGetKernel().getCurPos){if(b.moves.length){var d=b.moves,c=this.fnGetKernel().getCurPos(),h=c.getSideToMove();6>=c.getPieces().length&&(b.sorted||CB.V1ms.V1mt(d,h==CB.Vaz.BLACK));if(!this.fnGetKernel())return;
this.curMove=this.fnGetKernel().getCurPos().getPlyNum();for(d=c=0;d<b.moves.length;d++)c+=b.moves[d].getNVisits();this.stampToday=CB.V1mk.V1ml();c=6>=this.fnGetKernel().getCurPos().getPieces().length;this.entries=[];for(d=0;d<b.moves.length;d++)if(h=b.moves[d],c||this.passesMoveFilter(h)){var l=h.getMoveRecord(),h={line:this.generateLine(b.position,l),nGames:h.m_performanceStats.getNGames(),Result:Math.round(h.m_performanceStats.getFPercent(b.position.isBTM()))+"%",elo:Math.round(h.m_performanceStats.getSortEloAv()),
from:l.from,to:l.to,players:[],eval:h.getNEval(),nVisits:h.getNVisits(),getStrElo:function(){return this.elo?this.elo:""},getStrNGames:function(){return this.nGames?this.nGames.toLocaleString(CB.V7a.V7b(),{maximumFractionDigits:0}):"-"},getStrNVisits:function(){return this.nVisits?this.nVisits.toLocaleString(CB.V7a.V7b(),{maximumFractionDigits:0}):""},getPlayers:function(){for(var b=[],d=0;d<this.players.length&&4>d;d++){var c=this.players[d].name;1600<window.innerWidth&&0==b.length&&this.players[d].year&&
(c+=" ("+this.players[d].year+")");b.push(c)}return b.join(", ")},getStrResult:function(){if(this.nGames)return this.Result;var b=this.eval;if(29750<Math.abs(b)){var d="#"+(3E4-Math.abs(b));0>b&&(d="-"+d);return d}d="";0<b&&(d="+");return d+(.01*b).toFixed(2)}};this.entries.push(h)}this.entries=this.entries.sort(function(b,d){return d.nGames==b.nGames?d.nVisits-b.nVisits:d.nGames-b.nGames});this.searchOnlineDB()}$(this.elem).jsGrid("loadData")}};c.prototype.passesMoveFilter=function(b){var d=this.config.minVisits||
2;return(0<b.getNGames()||300>this.stampToday-b.m_nTimeStamp||b.isMyMove)&&(b.getNVisits()>=d||b.hasEval())};c.prototype.searchOnlineDB=function(){if(V3c6.onlineLobby&&V3c6.panelMgr.V1mu&&V3c6.panelMgr.V1mu()){var b=new CB.V1mv;b.setSearchBoard(this.fnGetKernel().game.getCurPos().board,this.fnGetKernel().game.getCurPos().getSideToMove());b.setUseBoard(!0);V3c6.onlineLobby.search(b,100,this.fnGetKernel().game.getMoveNo())}};c.prototype.onDBGamesListener=function(b){if(this.isVisible()){for(var d=!1,
c=0;c<this.entries.length;c++)this.entries[c].players=[];for(var h=0;h<b.length;h++)if(b[h].nFlags&CB.OnlineEntryEnum.V1mw&&V3c6.onlineLobby.V1mx<b[h].aGame.getCurLine().length)for(var l=b[h].aGame.getCurLine()[V3c6.onlineLobby.V1mx],c=0;c<this.entries.length;c++)if(this.entries[c].from==l.from&&this.entries[c].to==l.to){var q="",r=0,t=b[h].aGame.hdr.date.year;V3c6.onlineLobby.V1mx&1?(q=b[h].aGame.hdr.black.getListStr(0),r=b[h].aGame.hdr.eloWh):(q=b[h].aGame.hdr.white.getListStr(0),r=b[h].aGame.hdr.eloBl);
for(var w=!1,z=0;!w&&z<this.entries[c].players.length;z++)w=this.entries[c].players[z].name==q;if(!w){this.entries[c].players.push({name:q,elo:r,year:t});d=!0;break}}if(d){for(c=0;c<this.entries.length;c++)this.entries[c].players=this.entries[c].players.sort(function(b,d){return d.elo-b.elo}).filter(function(b){return 2400<b.elo}),8<this.entries[c].players.length&&(this.entries[c].players.length=8),this.entries[c].players=this.entries[c].players.sort(function(b,d){return d.year==b.year?d.elo-b.elo:
d.year-b.year});$(this.elem).jsGrid("render")}}};c.prototype.generateLine=function(b,d){for(var c=this.convertJSONLine(ObjUtil.clone(b),d),h=new CB.Vie(CB.V3b2),l="",q=this.fnGetKernel().game.getStartPos().getBTM(),r=0;r<c.length;r++){var t=h.getMoveNota(c[r]),w=h.getStrMoveNumInLine(r,this.fnGetKernel().getCurPos().getPlyNum(),q),l=l+(w+t);r<c.length-1&&(l+=" ")}return l};c.prototype.convertJSONLine=function(b,d){var c=[];b.isLegalMove(d)&&(b.preCalcCtx(d),b.makeMove(d),b.postCalcCtx(d,!0),c.push(d));
return c};c.prototype.V1my=function(b){};c.prototype.onAccountTypeListener=function(b){this.isPremium=3==b.type;this.isStandard=2==b.type||3==b.type};c.prototype.V1mm=function(){V3c6.aTBLobby&&(this.V16i=!0,V3c6.aTBLobby.addOnLiveBookDisplayListener(this.liveBookListener.bind(this)));V3c6.onlineLobby&&V3c6.onlineLobby.addOnGamesListener(this.onDBGamesListener.bind(this));V3c6.addOnAccountTypeListener(this.onAccountTypeListener.bind(this))};return c}();
CB.V1mj.factory=function(c,b,d,e){b=new CB.V1mj(b||0,d,e);b.V16m(c);return b};"use strict";
CB.V1gx=function(){var c=function(b,c,g,f,h,l){this.init(b,c,g,f);this.options=h;this.gotoMove=l;this.nMove=0},b=1;c.prototype.V196=function(){};c.prototype.reset=function(){this.evArr&&(this.evArr.first=0,this.evArr.last=1,this.evArr.Vvk=[CB.EvalProfileAnno.Vvm,CB.EvalProfileAnno.Vvm]);this.V1c4()};c.prototype.V1c4=function(){this.cbcanvas.requestRedraw()};c.prototype.setEvalArr=function(b){b?(this.evArr=ObjUtil.clone(b),this.cbcanvas.requestRedraw()):this.reset()};c.prototype.init=function(d,c,
g,f){this.debugName=f;this.cbcanvas=d;this.Vmi();this.uniqueId=b++;this.V19y=new CB.Timer(this.V19z.bind(this))};c.prototype.resize=function(b,c){this.width=b;this.height=c;b&&c?this.V19y.runOnce(5):this.V19y.stop()};c.prototype.Vmi=function(){};c.prototype.V19z=function(){this.width&&this.height&&this.cbcanvas.requestRedraw()};c.prototype.onMouseDown=function(b,c){};c.prototype.onMouseUp=function(b,c){var g=(c.x-this.V7n())/this.V1mz();this.gotoMove(Math.floor(g))};c.prototype.onMouseWheel=function(b,
c){};c.prototype.onMouseMove=function(b,c){};c.prototype.V19h=function(b,c){};c.prototype.onMouseEnter=function(b,c){};c.prototype.onMouseLeave=function(b,c){};c.prototype.V198=function(b){};c.prototype.V1fx=function(b){this.nMove=b;this.width&&this.height&&this.cbcanvas.requestRedraw()};c.prototype.draw=function(b){this.evArr&&(this.V1n0(b),this.V1n1(b),this.V1n2(b),this.V1n3(b),this.V1n4(b))};c.prototype.V7n=function(){return Math.max(2,this.height/16)};c.prototype.V1n5=function(){return Math.ceil((this.height-
2*this.V7n())/2)};c.prototype.V1n6=function(){var b=this.evArr.range()/2,b=Math.floor(100*(b/100+1));200>b&&(b=200);1200<b&&(b=1200);return b};c.prototype.V1n7=function(b){if(32767==b)return 0;var c=this.V1n6(),g=0<b?1:0>b?-1:0;Math.abs(b)>c&&(b=c);b=0==b?0:Math.abs(b);c=Math.abs(c);return(this.height-2*this.V7n())/2*(b/c)*g};c.prototype.V1n0=function(b){if(this.width&&this.height){var c=b.createLinearGradient(0,0,this.width,this.height);c.addColorStop(0,"hsla( 0, 0%,  97%, 1.0 )");c.addColorStop(1,
"hsla( 0, 0%, 99%, 1.0 )");b.fillStyle=c;CB.V88.fillRect(b,new CB.V7q(0,0,this.width,this.height))}};c.prototype.V1n1=function(b){var c=this.V7n(),g=this.V1n5()+1,f=this.width-this.V7n();b.strokeStyle="black";b.lineWidth=2;b.lineCap="round";CB.V88.V8c(b,c,g,f,g)};c.prototype.V1n2=function(b){var c=this.V7n()-2,g=this.V7n(),f=g+this.height-2*this.V7n();b.strokeStyle="black";b.lineWidth=2;b.lineCap="round";CB.V88.V8c(b,c,g,c,f)};c.prototype.V1mz=function(){if(!this.evArr)return 1;var b=Math.max(30,
this.evArr.last+1);return Math.max(1,(this.width-2*this.V7n())/b)};c.prototype.V1n4=function(b){var c=(this.nMove+0)*this.V1mz()+this.V7n(),g=new CB.V7q(c,0,c+this.V1mz(),0+this.height);b.fillStyle="hsla( 30, 3%, 30%, 0.16 )";CB.V88.fillRect(b,g);g=this.cbcanvas.zoomToPix(10);b.font=String.formatEx("{0}px Roboto",g);b.fillStyle="black";var f=this.evArr.Vvk[this.nMove-this.evArr.first],h=.27*this.height,g=this.V1n5()-h;0<=f&&(g=this.V1n5()+h);h="";"undefined"!=typeof f&&f!=CB.EvalProfileAnno.Vvm&&
(h=(f/100).toFixed(2),h+=", "+CB.V1fs.V1ft(f));if(h){var f=b.measureText(h).width,l=-this.V1mz();c+l+f>this.width&&(l=this.width-f-c-5);b.fillText(h,c+l,g)}};c.prototype.V1n3=function(b){var c=this.V1mz();b.strokeStyle="hsla( 0, 0%, 0%, 0.4 )";b.fillStyle="green";b.lineWidth=1;for(var g=0;g<this.evArr.last-this.evArr.first+1;g++){var f=Math.round((this.evArr.first+g)*c+this.V7n()),h=Math.round(f+c),l=this.V1n5(),q=this.evArr.Vvk[g],r=this.V1n7(q);r&&(b.fillStyle=0>r?28E3<Math.abs(q)?"hsla( 0, 30%, 30%, 1.0 )":
"red":28E3<Math.abs(q)?"hsla( 120, 30%, 25%, 1.0 )":"green",q=Math.round(this.V1n5()-r),q<l&&(r=q,q=l,l=r),f=new CB.V7q(f,l,h,q),CB.V88.fillRect(b,f),b.strokeStyle="black",CB.V88.V8b(b,f))}};return c}();CB.V1n8={V1n9:1101,V1na:1102,V1nb:1103,V1nc:1104,V1nd:1105,V1ne:1106,V1nf:1107,V1ng:1108,V1nh:1109,V1ni:1110,V1nj:1111,V1nk:1112,V1nl:1113,V1nm:1114,V1nn:1115,V1no:1116,V1np:1117,toString:function(c){for(a in CB.V1n8)if(CB.V1n8[a]==c)return a;return c}};
CB.V1nq=function(){var c=function(b,d,c,g){this.V1nr=void 0!==b?b:CB.V1n8.V1n9;this.V1ns=void 0!==d?d:0;this.V1nt=void 0!==c?c:0;this.V1nu=void 0!==g?g:0};c.prototype.V3c0=function(b){b.V3bw(this.V1nr);b.V3bw(this.V1ns);b.V3bw(this.V1nt);b.V3bw(this.V1nu);b.V3bw(83);b.V3bw(0);b.V3by(0);b.V3bw(0);b.V3bw(0)};c.prototype.toString=function(){return this.V1nv(this.V1nr)+" "+this.V1nw()};c.prototype.V1nw=function(){var b=this.V1ns+"."+this.V1nt;this.V1nu&&(b+="."+this.V1nu);CB.V5t.V63()&&(b+="c");CB.V5t.V6y()&&
(b+="e");CB.V5t.V64()&&(b+="m");return b};c.prototype.V1nv=function(b){switch(b){default:return CB.V1n8.toString(b);case CB.V1n8.V1n9:return"Playchess";case CB.V1n8.V1na:return"LiveBlitz";case CB.V1n8.V1nb:return"OnlineDB";case CB.V1n8.V1nc:return"Openings";case CB.V1n8.V1ne:return"Fritz";case CB.V1n8.V1ng:return"MyGames";case CB.V1n8.V1nx:return"Training";case CB.V1n8.V1nm:return"Endgames";case CB.V1n8.V1nn:return"Live";case CB.V1n8.V1no:return"Reader";case CB.V1n8.V1np:return"Play"}};c.prototype.V1ny=
function(){return this.V1nr<<48|this.V1ns<<32|this.V1nt<<16|this.V1nu};return c}();
CB.V1nz={V5l:0,V1o0:17,V1o1:42,V1o2:7001,V1o3:7002,V1o4:7003,V1o5:7004,V1o6:7005,V1o7:7006,V1o8:7007,V1o9:7008,V1oa:7009,V1ob:7010,V1oc:7011,V1od:7012,V1oe:7013,V1of:7014,V1og:7015,V1oh:7016,V1oi:7017,V1oj:7018,V1h:7020,V1ok:7021,V1ol:7022,V1om:7023,V1on:7024,Vix:7030,V1oo:7040,V1op:7041,V1oq:7042,V1or:7050,V1os:7051,V1ot:7052,V1ou:7053,V1ov:7054,V1ow:7055,V1ox:7056,V1oy:7057,V1oz:7058,V1p0:7060,V1p1:7061,V1p2:7062,V1p3:7070,V1p4:7071,V1p5:7072,V1p6:7073,V1p7:7074,V1p8:7075,V1p9:7076,V1pa:7077,V1pb:7078,
V1pc:7079,V1pd:7080,V1pe:7081,V1pf:7082,V1pg:7083,V1ph:7084,V1pi:7085,V1pj:7086,V1pk:7087,V1pl:7088,V1pm:7089,V1pn:7090,V1po:7091,V1pp:7092,V1pq:7100,V1pr:7101,V1ps:7102,V1pt:7103,V1pu:7104,V1pv:7105,V1pw:7106,V1px:7107,V1py:7108,V1pz:7109,V1q0:7110,V1q1:7111,V1q2:7112,V1q3:7113,V1q4:7200,TERABRAIN_USER:7300,V1q5:7301,V1q6:7302,V1q7:7303,V1q8:7304,V1q9:7305,TERABRAIN_BOOKINFO:7306,V1qa:7307,V1qb:7400,V1qc:7401,V1qd:7402,V1qe:7403,toString:function(c){for(var b in this)if(this[b]==c)return"SockMsg:"+
b;return"Unknown SockMsg: "+c},Vlz:function(c){return"SockMsgId="+c}};
CB.Vat=function(){var c=function(b){this.type=b||CB.V1nz.V5l;this._init()};c.prototype.getType=function(){return this.type};c.prototype.setType=function(b){this.type=b};c.prototype.getUserType=function(){return this.userType};c.prototype.setUserType=function(b){this.userType=b};c.prototype.getIdReceiver=function(){return this.Vaw};c.prototype.setIdReceiver=function(b){this.Vaw=b};c.prototype.V3bk=function(){return this.Vav};c.prototype.V3bn=function(b){this.Vav=b};c.prototype.setVal=function(b){this.nVal=
b};c.prototype.getVal=function(){return this.nVal};c.prototype.address=function(b,d){this.Vav=b;this.Vaw=d};c.prototype.getBuf=function(){return this.buf};c.prototype.fillSendArrBuf=function(b){var d=16;b&&(d+=4);var d=new ArrayBuffer(d+this.buf.Va2()),c=new DataView(d);c.setInt16(0,this.type);c.setInt32(2,this.nVal);c.setInt32(6,this.Vav);c.setInt16(10,this.userType);c.setInt32(12,this.Vaw);b?(c.setInt32(16,this.msgId),this.buf.Va3(c,20)):this.buf.Va3(c,16);return d};c.prototype.V1qf=function(b){if(16<=
b.byteLength){var d=new DataView(b);this.type=d.getInt16(0);this.nVal=d.getInt32(2);this.Vav=d.getInt32(6);this.userType=d.getInt16(10);this.Vaw=d.getInt32(12);20<=b.byteLength&&(this.buf.Va5(d,16),this.buf.rewind())}else throw Error("Illegal Message received");};c.prototype.toString=function(){var b="",d;for(d in CB.V1nz)if(this.type==CB.V1nz[d]){b+=d;break}this.userType&&(b+=", usr="+this.userType);b+=", sender="+this.Vav+", receiver="+this.Vaw;this.buf.getSize()&&(b+=", bufsize="+this.buf.getSize());
return b};c.prototype._init=function(){this.nVal=this.Vav=this.Vaw=this.userType=0;this.buf=new CB.V9z;this.msgId=0};return c}();CB.LoginMode={NORMAL:1,GUEST:2};CB.V1qg={V1qh:0,V1qi:1,V10:2,V1qj:3};CB.V1qk={V1ql:32,V1qm:128};
CB.V1qn=function(){var c=function(b,d,c,g,f,h){this.strName=b;this.strPass=d;this.V1qo=c;this.version=V3c6.versionCode;this.guid=g;this.language=CB.V7a.V7b();this.V1qp=CB.V5t.V6i();this.V1qq="";this.V1qr=document.referrer;this.token=f||"";this.app=h||"";this.flags=0;this.documentUrl=""};c.prototype.V3bd=function(b){var d=new CB.Vat(CB.V1nz.V1o3);d.address(CB.V1qt.UNKNOWN,CB.V1qt.V1qu);d.getBuf().V3by(this.V1qo);this.version.V3c0(d.getBuf());var c=this.strName;CB.V4a.V4f(c)&&!CB.V4a.V4e(c)&&(c=CB.V4a.V4b(c));
var g=this.strPass;CB.V4a.V4f(g)&&!CB.V4a.V4e(g)&&(c=CB.V4a.V4b(g));d.getBuf().V3b9(c);d.getBuf().V3b9(g);this.guid.V3c0(d.getBuf());d.getBuf().V3b6(this.language);d.getBuf().V3b6(navigator.platform);d.getBuf().V3by(this.V1qp);d.getBuf().V3b9(this.V1qq);d.getBuf().V3b6(this.token);d.getBuf().V3b9(0<this.V1qq.length?this.V1qr:"");d.getBuf().V3b6(this.app);b&&(this.flags|=CB.V1qk.V1qm);d.getBuf().V3by(this.flags);d.getBuf().V3b6(navigator.appVersion);d.getBuf().V3b6(this.documentUrl);return d};return c}();
"use strict";CB.V1qv=function(){var c=function(){this.nId=CB.V1qt.V5l;this.V1qy=this.V1qx=this.V1qw=0;this.strUserId=this.strToken="";this.V3bm=0};c.prototype.fromSocketsMsg=function(b){b.getBuf().rewind();this.V1qw=b.getBuf().V3c1();this.V1qx=b.getBuf().V3c1();this.nId=b.getBuf().V3c1();this.V1qz=b.getBuf().V3c1();this.strToken=b.getBuf().V3b7(200);this.V3bm=b.getBuf().V3c2();this.strUserId=b.getBuf().V3b7(200)};return c}();
CB.ChatData=function(){var c=function(){this.Vaw=this.Vav=CB.V1qt.V5l;this.V1r1=this.V1r0=0;this.strMsg="";this.V1r2=0;this.V1mg="";this.V1r3=this.flags=this.V15k=0;this.V1r4=[];this.token=0};c.prototype.V1r5={ITALIC:1,UNDERLINE:2,UTF8:256,AUTOMATIC:4096,TO_GROUP:8192,TO_OBSERVERS:16384,TO_CHANNEL:32768,TO_INDIVIDUALS:65536,TO_OBSERVERSANDPLAYERS:131072,TO_SESSION:262144};c.YELLOW=14;c.prototype.V3bd=function(){var b=new CB.Vat(CB.V1nz.V1h);b.address(this.Vav,this.Vaw);var d=b.getBuf();d.V3bw(this.V1r0);
d.V3bw(this.V1r1);d.V3b6(this.strMsg);d.V3bw(this.V1r2);d.V3b6(this.V1mg);d.V3by(this.V15k);d.V3by(this.V1r3);d.V3by(this.flags);if(this.isToIndividuals()){d.V3by(this.V1r4.length);for(var c=0;c<this.V1r4.length;c++)d.V3by(this.V1r4[c])}d.V3bi(this.token);return b};c.prototype.fromSocketsMsg=function(b){var d=b.getBuf();this.Vaw=b.getIdReceiver();this.Vav=b.V3bk();d.rewind();this.V1r0=d.V3c2();this.V1r1=d.V3c2();try{this.strMsg=d.V3b7(1E3)}catch(c){CB.V46("Chat Msg Len exception, sender="+this.Vav)}this.V1r2=
d.V3c2();try{this.V1mg=d.V3b7(210)}catch(c){CB.V46("Chat Sender exception, msg="+this.strMsg+", sender="+this.Vav)}this.V15k=d.V3c1();this.V1r3=d.V3c1();this.flags=d.V3c1();if(this.isToIndividuals()){b=d.V3c1();for(var e=0;e<b&&500>e;e++)this.V1r4.push(d.V3c1())}this.token=d.V3bx()};c.prototype.toString=function(){var b="";0<this.V1mg.length&&(b+="<em>"+this.V1mg+":</em> ");return b+=this.strMsg};c.prototype.isPrivate=function(){return 0==this.flags};c.prototype.isToIndividuals=function(){return 0!=
(this.flags&this.V1r5.TO_INDIVIDUALS)};c.prototype.V1r6=function(b){CB.V4s(this,this.V1r5.TO_INDIVIDUALS,b)};c.prototype.isToChannel=function(){return 0!=(this.flags&this.V1r5.TO_CHANNEL)};c.prototype.V1r7=function(b){CB.V4s(this,this.V1r5.TO_CHANNEL,b)};c.prototype.isToSession=function(){return CB.V4t(this.flags,this.V1r5.TO_SESSION)};c.prototype.V1r8=function(b){CB.V4s(this,this.V1r5.TO_SESSION,b)};c.prototype.V1r9=function(){return CB.V4t(this.flags,this.V1r5.TO_OBSERVERS)};c.prototype.V1ra=function(b){CB.V4s(this,
this.V1r5.TO_OBSERVERS,b)};c.prototype.V1rb=function(){return this.V15k};c.prototype.V1rc=function(b){this.V15k=b};c.prototype.V1rd=function(b){this.V15k=b;this.V1r7(!0)};c.prototype.V1re=function(b){CB.V4s(this,this.V1r5.AUTOMATIC,b)};c.prototype.V1rf=function(){return 0!=(this.flags&this.V1r5.AUTOMATIC)};c.prototype.V1rg=function(b){b.length?(this.Vaw=b[0],this.V1r4=b):(this.Vaw=b,this.V1r4.push(b))};c.prototype.V1rh=function(){window.chat=new c;chat.V1r1=2;chat.V1r0=1;chat.V1r2=3;chat.V15k=4;chat.V1r3=
5;chat.strMsg="Hello World!";chat.V1mg="Doktor Schiwago";var b=chat.V3bd();window.chat2=new c;chat2.fromSocketsMsg(b);return chat2.strMsg!==chat.strMsg?"test failed":"test OK"};return c}();CB.V1qt={V5l:0,UNKNOWN:0,V1qu:1};CB.V1ri={CONNECTING:0,V1rj:1,V1rk:2,V1rl:3};
CB.V1rm=function(){var c=function(b,d){this.connectId=CB.V1qt.V5l;this.uris=[].concat(d);this.V1rn=0;V3c6&&void 0!=V3c6.config.nBridge&&V3c6.config.nBridge<this.uris.length&&(this.V1rn=V3c6.config.nBridge);this.wsUri=this.uris[this.V1rn];this.msgsWaitingToSend=new CB.V1ro;this.msgsWaitingToSendNoId=new CB.V1ro;this.V1rp=function(b){};this.onClose=function(b){};this.isFirstConnect=!0;this.firstConnectTries=0;this.V1rq=function(){};this.onServerDown=function(){};this.lobby=b;this.V3bb=0;this.error=
!1;this.V1rr=new CB.V4z;this.weAreAliveTicker=new CB.V4z;this.tryTimer=new CB.Timer(this.V1rs.bind(this));this.V1rt=200;this.V1ru=0};c.prototype.open=function(){try{this.socket=new WebSocket(this.wsUri);var b=this;this.error=!1;this.socket.onopen=function(){for(;!b.msgsWaitingToSendNoId.empty();)b.socket.readyState==CB.V1ri.V1rj?b.sendMessage(b.msgsWaitingToSendNoId.pop(),!0):b.msgsWaitingToSendNoId.pop();for(;!b.msgsWaitingToSend.empty();)b.socket.readyState==CB.V1ri.V1rj?b.sendMessage(b.msgsWaitingToSend.pop(),
!1):b.msgsWaitingToSend.pop();this.V1rt=200;(new CB.Timer(function(){b.lobby.onConnect()})).runOnce(20)};this.socket.onclose=function(d){5;b.onClose(b);if(void 0!==b.onBroken)b.onBroken();1E3<d.Code&&(V3c6.V1rv(b.lobby.getName()+"-Close="+d.Code),console.log("Close: "+closeCodes[d.Code]))};this.socket.onerror=function(d){console.log(b.wsUri);b.isFirstConnect&&1<b.uris.length&&4>++b.firstConnectTries?(b.switchConnection(),b.open()):(b.error=!0,b.onSocketError(b))};this.socket.onmessage=function(d){b.tryTimer.stop();
if(d.data instanceof ArrayBuffer){var c=new CB.Vat;try{c.V1qf(d.data)}catch(g){EXCEPTION(g.toString())}b.V3b1(c);b.weAreAliveTicker.start()}else console.log("RESPONSE: "+d.data);b.V3bb=0}}catch(d){CB.V46("Conn",d)}};c.prototype.close=function(){this.socket&&this.socket.close();this.tryTimer.stop()};c.prototype.Vrg=function(){return this.socket&&this.socket.readyState==CB.V1ri.V1rj};c.prototype.V1rw=function(){return this.socket&&this.socket.readyState==CB.V1ri.CONNECTING};c.prototype.onSocketError=
function(){this.isFirstConnect?(this.onServerDown(),this.lobby.V1rx&&this.lobby.V1rx.stop(),this.tryTimer.runPeriodic(3E4)):(this.V1rq(),this.tryTimer.runPeriodic(this.V1rt))};c.prototype.V3b1=function(b){this.isFirstConnect=!1;var d=!0;switch(b.getType()){default:d=!1;break;case CB.V1nz.V1o5:this.V1ry(b);break;case CB.V1nz.V1o2:d=!1}d||this.lobby.V1rz(b)};c.prototype.V1ry=function(b){var d=new CB.V1qv;d.fromSocketsMsg(b);this.connectId=d.nId;this.lobby.V1s0(d);this.V1rp(this)};c.prototype.sendMessage=
function(b,d){if(!b.getType()||!this.socket)throw Error("Sending invalid sockMsg");b.msgId=d?0:++this.V1ru;b.getIdReceiver()==CB.V1qt.V5l&&b.setIdReceiver(CB.V1qt.V1qu);b.V3bn(this.connectId);if(this.socket.readyState==CB.V1ri.V1rj){this.socket.binaryType="arraybuffer";var c=b.fillSendArrBuf(!d);this.socket.send(c)}else this.socket.readyState==CB.V1ri.CONNECTING?d?this.msgsWaitingToSendNoId.push(b):this.msgsWaitingToSend.push(b):this.socket.readyState!=CB.V1ri.V1rk&&this.socket.readyState!=CB.V1ri.V1rl&&
(this.error=!0,this.onSocketError())};c.prototype.V1s1=function(b){this.socket&&1==this.socket.readyState&&(console.log("SENT: "+b),this.socket.send(b))};c.prototype.V1s2=function(){this.close()};c.prototype.V1rs=function(){this.tryTimer.runPeriodic(1E4);this.socket&&this.socket.readyState!=CB.V1ri.V1rj&&this.error&&(this.V3bb+=1,1<=this.V3bb&&(this.isFirstConnect||6<this.V3bb)&&this.switchConnection(),this.lobby.V1s3&&this.lobby.V1s3(!0,1==this.V3bb?2E3:6E3,!0),5<this.V3bb&&this.tryTimer.runPeriodic(5E4+
3E4*Math.random()))};c.prototype.switchConnection=function(){this.V1rn++;this.V1rn>=this.uris.length&&(this.V1rn=0);this.wsUri=this.uris[this.V1rn];console.log("Switch Conn: "+this.wsUri);this.lobby.V1s4&&this.lobby.V1s4(this.V1rn)};return c}();
CB.V1s5=function(){var c=function(b){this.guid=new CBGuid;this.password=this.userName="";this.V1s6=!0;var d="ClientGUID"+b,c=null,g=window;g.localStorage?c=g.localStorage:g.sessionStorage&&(c=g.sessionStorage);if(c&&c[d]){b=JSON.parse(c[d]);for(var f in b)this.guid[f]=b[f]}else this.guid=new CBGuid,this.guid.fromRandom(b),c&&(c[d]=JSON.stringify(this.guid))};c.prototype.toString=function(){return"User="+this.userName+", mode="+this.loginMode};c.prototype.V1s8=function(){this.save("user",this.userName)};
c.prototype.V1s9=function(){this.userName=this.load("user")};c.prototype.V1sa=function(){var b=null,d=window;d.sessionStorage?b=d.sessionStorage:d.localStorage&&(b=d.localStorage);return b};c.prototype.V1sb=function(b,d,c){this.room=b;this.set("room",b);this.set("roomurl",d);this.set("banner",c)};c.prototype.V1sc=function(){this.room="";this.set("room","");this.set("roomurl","");this.set("banner","");this.set("gradient","")};c.prototype.V1sd=function(b,d){this.set("banner",b);this.set("gradient",
d)};c.prototype.V1se=function(b){this.set("seek",b)};c.prototype.store=function(b,d){this.V1sa()[d]=b};c.prototype.get=function(b){return this.V1sa()[b]||""};c.prototype.set=function(b,d){this.V1sa()[b]=d};c.prototype.load=function(b){return window.localStorage?window.localStorage[b]||"":""};c.prototype.save=function(b,d){window.localStorage&&(window.localStorage[b]=d)};c.prototype.V1sf=function(){return this.get("kibitz")};c.prototype.V1sg=function(){if(!CB.V5t.V64()){var b=this.get("layout");return b&&
0<=b.search("engine")}};c.prototype.V1sh=function(){return this.get("layout")};c.prototype.V1si=function(){return this.V1sf()&&this.V1sj()};c.prototype.V1sj=function(){var b=this.get("layout");return b&&0<=b.search("nomenu")};c.prototype.V1sk=function(){var b=this.get("layout");return b&&0<=b.search("noplayers")};c.prototype.V1sl=function(){var b=this.get("layout");return b&&0<=b.search("nolists")};c.prototype.V1sm=function(){return!1};c.prototype.V1sl=function(){var b=this.get("layout");return b&&
0<=b.search("nolists")};c.prototype.V1sn=function(){var b=this.get("layout");return b&&0<=b.search("nochat")};c.prototype.noBook=function(){var b=this.get("layout");return b&&0<=b.search("nobook")};c.prototype.V1so=function(){var b=this.get("layout");return b&&0<=b.search("nonota")};c.prototype.V1sp=function(){return this.get("room")};c.prototype.V1sq=function(){return this.get("roomurl")};c.prototype.V1sr=function(){return this.get("banner")};c.prototype.V1ss=function(){return this.get("gradient")};
c.prototype.V1st=function(){return this.get("play")};c.prototype.V1su=function(){return this.get("play")};c.prototype.V1sv=function(){var b={banner:this.V1sr(),gradient:this.V1ss(),room:this.V1sp(),roomUrl:this.V1sq()};this.V1sw(b)};c.prototype.V1sx=function(){var b=this.V1sy();b&&(this.V1sz(),this.V1sd(b.banner,b.gradient))};c.prototype.V1sw=function(b){b=JSON.stringify(b);window.localStorage&&(window.localStorage.AcrossLogin=b)};c.prototype.V1sz=function(b){window.localStorage&&delete window.localStorage.AcrossLogin};
c.prototype.V1sy=function(){if(window.localStorage){var b=window.localStorage.AcrossLogin;if(b)return JSON.parse(b)}};c.prototype.V1t0=function(b){this.V1t1="";b||CB.DOM.V1t2("AccountName64");CB.DOM.V1t2("AccountToken");CB.DOM.V1t2("AccountMode");CB.DOM.V1t3("CBCOMMON","")};c.prototype.V1t4=function(){CB.DOM.V1t3("CBCOMMON","")};c.prototype.V1t5=function(){this.V1s6&&this.V1t1&&CB.DOM.V1t3("AccountToken",this.V1t1)};c.prototype.V1t6=function(){CB.DOM.V1t2("AccountToken");this.V1t1=""};c.prototype.V1t7=
function(){return this.userName&&"guest"!=this.userName&&(this.V1t1||this.password)};c.prototype.V1t8=function(b){!this.V1t1&&this.password&&this.loginMode==CB.LoginMode.NORMAL&&(new CB.Timer(function(){(new CB.V1t9(b)).pwLogin(this.userName,this.password,function(b){b&&b.Token&&(this.V1t1=unescape(b.Token),this.V1t5(),CB.DOM.V1ta(this.userName),CB.DOM.V1t3("AccountMode",CB.LoginMode.NORMAL))}.bind(this))}.bind(this))).runOnce(100)};return c}();"use strict";CB.namespace("CB.Server.V1tb");
CB.Server.V1tb={V1tc:0,V1td:1,V1te:2,V1tf:3};CB.namespace("CB.Server.V1tg");
CB.Server.V1tg=function(){var c=function(){this.Vtf=!1;this.V1th=12E3;this.V1ti=5E3;this.V1tj=[];this.V1tk=!0;this.name="...";this.V1tm=this.V1tl=0;this.V1to=this.V1tn=!0};c.prototype.create=function(b,d,c,e,q){this.V1tp=new CB.Timer(this.V1tq.bind(this));this.user=d;this.V1tr=CB.V4a.V4b(d);this.pass=c;this.conn=new CB.V1rm(this,b);this.loginMode=e;this.token=q;this.V1ts=CB.V57();this.V3bb=0;this.V1tt=new CB.Timer;this.V1tu=3E3;this.conn.V1rq=this.V1tv.bind(this);this.conn.onServerDown=this.V1tw.bind(this);
this.V1tx=!1;e!=CB.LoginMode.GUEST&&CB.DOM.V1ta(d);this.V1rx=new CB.Timer(this.V1ty.bind(this))};c.prototype.V1tw=function(b){if(void 0!==this.onServerDown)this.onServerDown();this.Vtf=!1};c.prototype.V1tv=function(b){void 0!==this.V1tz&&this.V1tz();this.Vtf=!1;this.V1u0()};c.prototype.getName=function(){return"Connector"};c.prototype.V1u1=function(b,d,c,e){this.V1tp&&this.V1tp.stop();this.V1u3=this.V1u2=!1;this.V1tp=new CB.Timer(this.V1tq.bind(this));this.Vrg()&&this.Vtf&&this.logOff();this.V1u4();
this.user=b;this.V1tr=CB.V4a.V4b(this.user);this.pass=d;this.token=e;this.loginMode=c;this.V1ts=CB.V57();this.V3bb=0;this.V1tt=new CB.Timer;this.V1tu=3E3;(new CB.Timer(this.V1u5())).runOnce(100);c!=CB.LoginMode.GUEST&&CB.DOM.V1ta(b)};var b=new CB.V3bs;c.prototype.V1u6=function(){b.exec(function(){this.loginMode=this.pass?CB.LoginMode.NORMAL:CB.LoginMode.GUEST;this.V1u1(this.user,this.pass,this.loginMode,this.token);this.V3bb++;this.V1tt.stop()}.bind(this),10*this.V3bb)};c.prototype.V1u5=function(){this.conn.close();
this.Vtf=!1;this.V1u7()};c.prototype.V1u7=function(){this.conn&&(this.V1tx=this.Vtf=!1,this.conn.open(),this.V1u8()||this.V1u9(lm.CONNECTING,"LogBold"),this.V1rx.runPeriodic(this.V1th),this.V1tl++)};c.prototype.Vrg=function(){return this.conn?this.conn.Vrg():!1};c.prototype.V1rw=function(){return this.conn?this.conn.V1rw():!1};c.prototype.isLoggedIn=function(){return this.V1tx&&this.Vrg()};c.prototype.wasLoggedIn=function(){return!this.V1tk&&!this.Vrg()};c.prototype.V1qs=function(){return!1};c.prototype.V1ua=
function(){this.V1u8()||(this.V1ub(this.V1uc(),"LogGreen","conn"),this.V1u9(this.V1uc(),"LogGreen","conn"));var b=V3c6.V3bg.guid;CB.V5t.V6c()&&b.fromRandom(10);b=this.V1ud(b,!0);this.V1ue(b);this.V1uf(b.V3bd(this.V1qs()));this.V1u3=!1};c.prototype.V1ug=function(){if(!this.Vtf){this.V1tx=!1;this.V1u8()||(this.V1ub(this.V1uc(),"LogGreen","conn"),this.V1u9(this.V1uc(),"LogGreen","conn"));var b=this.V1ud(V3c6.V3bg.guid,!1);this.V1ue(b);this.V1uf(b.V3bd(this.V1qs()));this.V1u3=!1}};c.prototype.V1ue=function(b){};
c.prototype.V1ud=function(b,d){return d?new CB.V1qn("Guest","Pass",CB.LoginMode.GUEST,b):new CB.V1qn(this.user,this.pass,CB.LoginMode.NORMAL,b,this.token)};c.prototype.V1t0=function(){V3c6.V3bg&&V3c6.V3bg.V1t0(!0)};c.prototype.V1uc=function(){return"Waiting for Server"};c.prototype.logOff=function(){this.V1rx&&this.V1rx.stop();if(this.Vtf&&this.Vrg()){var b=new CB.Vat(CB.V1nz.V1o4);b.address(this.conn.connectId,CB.V1qt.V1qu);b.buf.V3by(0);this.send(b);this.loginMode=CB.LoginMode.GUEST}this.V1ui()};
c.prototype.V1ui=function(){this.V1rx&&this.V1rx.stop();this.Vtf=this.V1tx=!1;this.V1u3=!0};c.prototype.V1u4=function(){};c.prototype.V1uj=function(){V3c6.V3bg&&V3c6.V3bg.V1sv&&V3c6.V3bg.V1sv();this.logOff(!0);window.location.replace(V3c6.V1uk())};c.prototype.V1ul=function(){this.V1ub("Sorry, cannot reach the "+this.name+"V1um. It is in maintenance. Please try again in 15 minutes.","LogBold");this.conn.close();this.V1t0()};var d=new CB.V3bs;c.prototype.V1s3=function(b,c,e){if(this.V1u2)this.V1u9(lm.PLEASE_LOGIN_SHORT);
else if(this.conn&&this.conn.error&&!this.conn.Vrg()&&this.V1u7(),this.Vtf||e)50<this.V1tm++||d.exec(function(){this.V1un(CB.V1nz.V1oo);b||this.V1ub("Testing Connection to Server");this.V1ts=CB.V57();this.V1tp.isActive()||this.V1tp.runOnce(c||6E3);this.V1tn=b;this.V1rx.runPeriodic(this.V1th)}.bind(this),500)};c.prototype.V1tq=function(){this.V1u8()||this.V1u9(lm.RECONNECT);this.V1u7()};c.prototype.V1ty=function(){var b=this.conn.weAreAliveTicker.V50();b>this.V1uo()&&(this.V1s3(!0,this.V1up(),!0),
b>this.V1uo()+this.V1rx.V51()&&this.V1u0(b))};c.prototype.V1u0=function(b){};c.prototype.V1up=function(){return 6E3};c.prototype.V1uo=function(){return 2E4};c.prototype.V1uq=function(b){b=CB.V57()-this.V1ts;this.V1tu=b/2;this.V1tn||(this.V1ub("Ping="+b+"ms"),V3c6.V1ix&&V3c6.V1ix.V1jw(),this.V1u8()||this.V1u9("Server OK"));this.V1ur&&this.V1ur(b);this.V1tp.stop();this.V1tm=0};c.prototype.V1us=function(){this.V1un(CB.V1nz.V1og)};c.prototype.V1ut=function(b){this.V1un(CB.V1nz.V1o8,b);this.V1ts=CB.V57()};
c.prototype.V1uu=function(b){var d=new CB.Vat(CB.V1nz.V1om);d.address(this.conn.connectId,CB.V1qt.V1qu);d.buf.V3b6(b);this.send(d);this.V1ts=CB.V57()};c.prototype.V1uv=function(b){b.getBuf().V3b7(200);b.getBuf().readInt()};c.prototype.V1uw=function(b){this.conn.tryTimer.stop();var d="Possibly for maintenance.";switch(b.getBuf().V3c1()){case CB.Server.V1tb.V1td:d="Administrator action.";break;case CB.Server.V1tb.V1tc:d="Planned server maintenance in progress.";break;case CB.Server.V1tb.V1te:d="Double Login.";
break;case CB.Server.V1tb.V1tf:d="User inactive."}V3c6.config.V1ux||this.V1uy(d);this.V1u2=!0;this.V1ui()};c.prototype.V1uy=function(b){this.V1u9("Server logged you off: "+b,"LogForceLogOff")};c.prototype.V1uz=function(){};c.prototype.V1v0=function(){return this.conn.connectId};c.prototype.V1v1=function(){return void 0!==this.V1v2?this.V1v2:0};c.prototype.V1uh=function(){return this.V1v3?this.V1v3.V1uh():this.loginMode==CB.LoginMode.NORMAL&&this.Vtf?!1:!0};c.prototype.isPremium=function(){return this.V1uh?
!1:this.V1v3.isPremium()};c.prototype.V1v4=function(){};c.prototype.onConnect=function(){this.V1v4();this.V1ti=5E3;this.V1tp.stop();this.loginMode!=CB.LoginMode.NORMAL||V3c6.V1v5()?this.V1ua():this.V1ug()};c.prototype.V1s0=function(b){this.Vtf=!0;this.V3bb=0;this.V1tt.stop();this.V1tk=!1;this.V3bm=b.V3bm;b.strToken&&!V3c6.V3bg.V1t1&&(V3c6.V3bg.V1t1=b.strToken,V3c6.V3bg.V1t5());b.strUserId&&"guest"!=b.strUserId.toLowerCase()&&(this.user=CB.V4a.V4c(b.strUserId),V3c6.V3bg.userName=this.user,this.V1tr=
b.strUserId,this.loginMode==CB.LoginMode.NORMAL&&CB.DOM.setCodedCookie("AccountBackName64",this.user));this.V1v6(b);if(V3c6.panelMgr.onLoggedIn)V3c6.panelMgr.onLoggedIn(this.loginMode==CB.LoginMode.NORMAL);this.V1tj.forEach(function(b){this.send(b)}.bind(this));this.V1tj=[]};c.prototype.V1v6=function(){};c.prototype.V1v7=function(b){var d=!0;switch(b.getType()){default:d=!1;break;case CB.V1nz.V1o2:this.V1us(b);break;case CB.V1nz.V1oa:this.V1ul();break;case CB.V1nz.V1o6:case CB.V1nz.V1od:this.V1v8();
break;case CB.V1nz.V1of:this.V1v9();break;case CB.V1nz.V1ob:this.V1va();break;case CB.V1nz.V1oh:this.V1vb();break;case CB.V1nz.V1oi:this.V1vc();break;case CB.V1nz.V1op:this.V1uq(b);break;case CB.V1nz.V1o8:this.V1vd(b);break;case CB.V1nz.V1o9:this.V1ve(b);break;case CB.V1nz.V1on:this.V1uv(b);break;case CB.V1nz.V1oc:this.V1uw(b);break;case CB.V1nz.V1oe:this.V1vf(b);case CB.V1nz.V1oj:}return d};c.prototype.V1v8=function(){this.V1u9("Sorry, your account '"+this.user+"' or your password is not valid.",
"LogError");this.Vtf=!1;this.V1t0();this.V1tp.stop();this.V1rx.stop();if(this.onInvalidPassword)this.onInvalidPassword();else alert("Sorry, your password is not valid")};c.prototype.V1v9=function(){this.V1u9("Sorry, your account is currently locked. Please wait one hour...","LogError");this.Vtf=!1;this.V1t0();alert("Account currently locked.")};c.prototype.V1vf=function(b){b.getBuf().V3c1();var d=b.getBuf().V3b7(200);this.token=d;this.V3bm=b.getBuf().V3c1();b=b.getBuf().V3b7(200);V3c6.V3bg.V1t1=d;
b&&(this.user=V3c6.V3bg.userName=CB.V4a.V4c(b),this.V1tr=b);V3c6.V3bg.V1t5();CB.DOM.V1t3("AccountMode","1");this.V1vg&&this.V1vg()};c.prototype.V1va=function(){this.V1u9("Already logged on: "+this.user+". Please log off or wait a few minutes.","LogBold");alert("Already logged on: "+this.user);CB.V138&&CB.V138.V13a()};c.prototype.V1vc=function(){CB.V138&&CB.V138.V13a()};c.prototype.V1vb=function(){CB.V138&&CB.V138.V13a();this.V1tt.stop();this.V1rx.stop()};c.prototype.V1vh=function(){this.Vtf&&(this.logOff(),
window.location.replace(V3c6.V1vi()+"?user="+V3c6.V3bg.userCoded+"&token="+V3c6.V3bg.V1t1))};c.prototype.V1u8=function(){return!0};c.prototype.V1ub=function(b,d,c){this.V1u8()||(void 0===d&&(d="LogIntoChat"),V3c6.panelMgr.V1vj&&b&&V3c6.panelMgr.V1vj(b.toString(),d,c))};c.prototype.V1u9=function(b,d,c){V3c6.panelMgr.V1u9?V3c6.panelMgr.V1u9(b):this.V1ub(b,d,c)};c.prototype.V1vd=function(b){this.V1un(CB.V1nz.V1o9,b.V3bk())};c.prototype.V1ve=function(b){var d=CB.V57()-this.V1ts;this.V1to&&this.V1ub("Ping "+
this.lists.V1m1[b.V3bk()]+"="+d+"ms");this.V1tp.stop();this.V1vk&&b.V3bk()!=this.V1v1()&&this.V1vk(b.V3bk());return d};c.prototype.V1vl=function(b){};var e={};c.prototype.V1un=function(b,d){e=new CB.Vat(b);var c=d;c||(c=CB.V1qt.V1qu);e.address(this.V1v0(),c);this.send(e)};c.prototype.send=function(b,d){if(!this.V1u2&&!this.V1u3)try{0==b.V3bk()&&b.V3bn(this.V1v0()),0==b.getIdReceiver()&&b.setIdReceiver(CB.V1qt.V1qu),this.conn.sendMessage(b,!this.V1qs()),this.conn.error&&this.V1u9(this.name+" not connected...",
"LogCAPError"),this.conn.error&&d&&this.V1tj.push(b),this.conn.Vrg()||this.V1vm()}catch(c){this.V1vm()}};c.prototype.V1uf=function(b){try{0==b.V3bk()&&b.V3bn(this.V1v0()),0==b.getIdReceiver()&&b.setIdReceiver(CB.V1qt.V1qu),this.conn.sendMessage(b,!0),this.conn.Vrg()||this.V1vm()}catch(d){this.V1vm()}};c.prototype.V1vm=function(){this.V1tt.isActive()||this.V1vn||(this.V1tt.runOnce(Math.min(6E4,this.V1ti+1E3*this.V3bb),function(){this.V1s3(!0)}.bind(this)),this.V3bb++,3==this.V3bb&&this.V1vo())};c.prototype.V1vo=
function(){};return c}();"use strict";
CB.V1vp=function(){var c=function(b,d,c){this.cloudId=b;this.V12r=this.V1vq=c;this.nGames=d;this.V1vr=[];this.V1vs=[];this.V1vt=[];this.idHeaderListener=this.V1vq.addOnHeadersChangedListener(this.V1vu.bind(this));this.V1vv=this.V1vq.addOnGameChangedListener(this.V1vw.bind(this));this.V1vx=this.V1vq.addOnGamesChangedByGameNoListener(this.V1vy.bind(this));this.V1vz=this.V1vq.addOnHeadersChangedByGameNoListener(this.V1vy.bind(this));this.V1w0=this.V1vq.addOnGameAppendedListener(this.V1w1.bind(this));this.V1w2=
this.V1vq.addOnChangeLoginListener(this.V1u4.bind(this));this.V1w3=this.V1vq.addOnReorganizedListener(this.V1w4.bind(this));this.V1w5=this.V1vq.addOnDeletedListener(this.V1w6.bind(this));this.V1w7=this.V1vq.V1w8(this.cloudId)};CB.inherit(c,CB.V12m);c.prototype.destroy=function(){this.V1vq.removeOnHeadersChangedListener(this.idHeaderListener);this.V1vq.removeOnGameChangedListener(this.V1vv);this.V1vq.removeOnGamesChangedByGameNoListener(this.V1vx);this.V1vq.removeOnHeadersChangedByGameNoListener(this.V1vz);
this.V1vq.removeOnGameAppendedListener(this.V1w0);this.V1vq.removeOnChangeLoginListener(this.V1w9);this.V1vq.removeOnReorganizedListener(this.V1wa);this.V1vq.removeOnDeletedListener(this.V1wb);this.V1vr=[]};c.prototype.toString=function(){return this.V1w7.title+"/"+this.cloudId};c.prototype.V12u=function(){return!1};c.prototype.V12v=function(){return!0};c.prototype.V12w=function(){return this.V1w7&&this.V1w7.type==CB.V1wc.V1wd};c.prototype.V12o=function(b){void 0===b.idHeaderListener&&(b.idHeaderListener=
this.addOnGameHeadersChangedListener(b.onGameHeadersChanged.bind(b)));void 0===b.idDBLengthListener&&(b.idDBLengthListener=this.addOnDBLengthListener(b.onDBLengthListener.bind(b)));void 0===b.idDBDeletedListener&&(b.idDBDeletedListener=this.addOnDBDeletedListener(b.onDBDeletedListener.bind(b)));b.removeListeners=function(){this.removeOnGameHeadersChangedListener(b.idHeaderListener);this.removeOnDBLengthListener(b.idDBLengthListener);this.removeOnDBDeletedListener(b.idDBDeletedListener);delete b.idHeaderListener;
delete b.idDBLengthListener;delete b.idDBDeletedListener}.bind(this)};c.prototype.V1we=function(){this.headers=[];this.V1vr=[];this.V1vs=[];this.V1vt=[]};c.prototype.getGameCount=function(){return this.nGames};c.prototype.setSubSet=function(b){this.superClass.setSubSet.call(this,b);this.fireOnDBLength(this.V134())};c.prototype.V133=function(){this.superClass.V133.call(this,arguments);this.fireOnDBLength(this.getGameCount())};c.prototype.V12p=function(){return this.cloudId};c.prototype.V12x=function(){return"Cloud: "+
CB.V4a.V4c(this.V1w7.owner+" - "+this.V1w7.title)};c.prototype.getHeaderJson=function(b){if(1>b||b>this.nGames)ASSERT(0);else{var d;void 0===this.headers[b]?(this.V1vr[b]||(this.V1vr[b]=1,this.V1vq.V1wf(this.cloudId,b)),d=new CB.Vh0,this.fillPlaceHolderHeader(d,b),d.nGame=b,this.headers[b]=d,void 0===this.headers[b].loadCnt?this.headers[b].loadCnt=0:this.headers[b].loadCnt++):d=this.headers[b];return d.toJson()}};c.prototype.V12z=function(b,d,c){c>this.V134()&&(c=this.V134());if(!this.V1wg(d,c)){var g=
this;b={first:d,last:c,jsons:[],callback:b,count:0,calls:1,complete:function(){return this.count==this.last-this.first+1},addHeader:function(b){var d=g.getSetInxOfGameNo(b.nGame);d>=this.first&&d<=this.last&&!this.jsons[d-this.first]&&(this.jsons[d-this.first]=b.toJson(),this.count++)},timeOut:function(){for(var b=0;b<this.last-this.first+1;b++)if(!this.jsons[b]){var d=new CB.Vh0;g.fillPlaceHolderHeader(d,g.getGameNoInSet(b+1));this.jsons[b]=d.toJson()}try{for(b=0;b<this.calls;b++)this.callback(this.jsons)}catch(c){}this.timeout=
!0}};this.V1vs.push(b);b.timer=new CB.Timer(b.timeOut.bind(b));for(c<d?b.timer.runOnce(100):b.timer.runOnce(1E4);d<=c&&d<=this.V134();d++)if(b=this.getGameNoInSet(d)){if(!this.V1vr[b]&&(this.V1vr[b]=1,this.V1vq.V1wf(this.cloudId,b),void 0===this.headers[b])){var f=new CB.Vh0;this.fillPlaceHolderHeader(f);f.nGame=b;this.headers[b]=f}this.headers[b].loadCnt=0}}};c.prototype.V1wg=function(b,d){for(var c=0;c<this.V1vs.length;c++){var g=this.V1vs[c];if(g&&g.first<=b&&g.last>=d&&!g.timeout)return this.V1vs[c].calls++,
!0}return!1};c.prototype.V1vu=function(b){for(var d=0;d<b.length;d++)b[d].header.loadCnt=void 0!==this.headers[b[d].nGame]?++this.headers[b[d].nGame].loadCnt:0,this.headers[b[d].nGame]=b[d].header,this.V1vr[b[d].nGame]=0;for(var c=0;c<this.V1vs.length;c++)if(this.V1vs[c])for(d=0;d<b.length;d++)this.V1vs[c].addHeader(b[d].header);for(c=0;c<this.V1vs.length;c++)if(this.V1vs[c]&&this.V1vs[c].complete()){d=this.V1vs[c];this.V1vs[c].timer.stop();try{for(var g=0;g<d.calls;g++)this.V1vs[c].callback(this.V1vs[c].jsons)}catch(f){}delete this.V1vs[c]}d=
!1;for(c=0;d&&c<this.V1vs.length;c++)this.V1vs[c]&&this.V1vs[c].timeout&&(d=!1);d&&(this.V1vs=[]);this.fireOnGameHeadersChanged(b)};c.prototype.fillPlaceHolderHeader=function(b,d){b.white=new CB.PlayerData("Waiting for Server...");b.loadCnt=0;b.nGame=d};c.prototype.getGame=function(b){return new CB.Game};c.prototype.loadGameAsync=function(b,d){if(!(d>this.getGameCount())){var c=this,g={gameNo:d,game:new CB.Game,callback:b,loaded:!1,setGame:function(b){b.getGameNo()==d&&(this.game=b,this.loaded=!0)},
timeOut:function(){for(var b=0;b<this.last-this.first+1;b++)if(!this.jsons[b]){var d=new CB.Vh0;c.fillPlaceHolderHeader(d);this.game.setHeader(d);this.loaded=!0}this.callback(this.game);this.timeout=!0}};g.timer=new CB.Timer(g.timeOut.bind(g));g.timer.runOnce(1E4);this.V1vt.push(g);this.V1vq.loadGame(this.cloudId,d)}};c.prototype.V1vw=function(b){if(b.cloudId==this.cloudId){for(var d=0;d<this.V1vt.length;d++)this.V1vt[d]&&this.V1vt[d].setGame(b.game);for(d=0;d<this.V1vt.length;d++)this.V1vt[d]&&this.V1vt[d].loaded&&
(this.V1vt[d].timer.stop(),this.V1vt[d].callback(this.V1vt[d].game),delete this.V1vt[d]);this.V9w(this.V1vt)}};c.prototype.V1vy=function(b){if(b.cloudId==this.cloudId){for(var d=this.nGames,c=0;c<b.gameNos.length;c++)b.gameNos[c]>this.nGames&&(this.nGames=b.gameNos[c]);this.nGames>d&&this.V133();for(c=0;c<b.gameNos.length;c++)b.gameNos[c]<=this.nGames&&this.V1vq.V1wf(this.cloudId,b.gameNos[c])}};c.prototype.V1w1=function(b){b.cloudId==this.cloudId&&(this.nGames++,this.V1vr=[],this.V133())};c.prototype.V1u4=
function(){this.fireOnDBDeleted()};c.prototype.V1w4=function(b){b.cloudId==this.cloudId&&(this.nGames=b.nNewLen,this.V1vr=[],this.fireOnDBLength(this.nGames))};c.prototype.V1w6=function(b){b.cloudId==this.cloudId&&this.fireOnDBDeleted()};c.prototype.V130=function(b){if(this.headers[b]){var d=!this.headers[b].deleted;this.headers[b].setDeleted(d);void 0===this.headers[b].loadCnt?this.headers[b].loadCnt=0:this.headers[b].loadCnt++;var c=new CB.Server.V1wh(this.cloudId,b,0,this.headers[b]);this.fireOnGameHeadersChanged([c]);
this.V1vq.V1wi(this.cloudId,[b],[d])}};c.prototype.V1wj=function(b){for(var d=[],c=[],g=0;g<b.length;g++){var f=b[g];if(this.headers[f]){var h=!this.headers[f].deleted;this.headers[f].setDeleted(h);void 0===this.headers[f].loadCnt?this.headers[f].loadCnt=0:this.headers[f].loadCnt++;var l=new CB.Server.V1wh(this.cloudId,f,0,this.headers[f]);this.fireOnGameHeadersChanged([l]);d.push(f);c.push(h)}}this.V1vq.V1wi(this.cloudId,d,c)};c.prototype.V131=function(){this.V1we();this.V1vq.V1wk(this.cloudId)};
c.prototype.V9w=function(b){for(var d=!1,c=0;d&&c<b.length;c++)b[c]&&b[c].timeout&&(d=!1)};c.prototype.V12t=function(b,d){if("number"==typeof b)this.V1vq.V1wl(b,this.cloudId,d);else if("function"==typeof b){var c=b(d);this.V1vq.V1wm(this.cloudId,c)}};V3bf.initForListeners(c);V3bf.addEvent(c,"GameHeadersChanged");V3bf.addEvent(c,"DBLength");V3bf.addEvent(c,"DBDeleted");return c}();"use strict";CB.V1wc={V5l:0,V1wn:1,V1wo:2,V1wp:3,V1wq:4,V1wr:5,V1ws:6,V1wt:7,V1wu:8,V1wd:9};
CB.V1wv=function(){var c=function(){this.V1ww.V1wx=this.V1ww.CLOUDDBITEM_MAY_VIEW|this.V1ww.CLOUDDBITEM_MAY_LOAD|this.V1ww.CLOUDDBITEM_MAY_SAVE|this.V1ww.CLOUDDBITEM_MAY_ADMIN|this.V1ww.CLOUDDBITEM_OWNER};c.prototype.V1ww={CLOUDDBITEM_SHARED:1,CLOUDDBITEM_MAY_VIEW:131072,CLOUDDBITEM_MAY_LOAD:262144,CLOUDDBITEM_MAY_SAVE:524288,CLOUDDBITEM_MAY_ADMIN:1048576,CLOUDDBITEM_OWNER:2097152};c.prototype.fromDataBuf=function(b){b.beginSizedRead();this.name=b.V3b7(100);this.title=b.V3b7(200);this.owner=b.V3b7(100);
this.nGames=b.V3c1();this.V1wy=b.V3bt();this.V1wz=b.V3c1();this.cloudId=b.readUint64();this.V1x0=b.V3bz();this.V1x1=b.V3bt();this.flags=b.V3c1();this.type=b.V3c1();b.endSizedRead()};c.prototype.toString=function(){return this.name+", "+this.title+", "+this.owner+", nGames="+this.nGames+", type="+this.type};c.V1x2=-1;c.V1x3=-2;c.V1x4=-3;c.V1x5=0;c.V1x6=8;return c}();
CB.V1x7=function(){var c=function(){this.items=[]};c.prototype.size=function(){return this.items.length};c.prototype.fromDataBuf=function(b){this.items=[];for(var d=b.V3bx(),c=0;c<d&&200>c;c++){var g=new CB.V1wv;g.fromDataBuf(b);this.items.push(g)}};c.prototype.getById=function(b){for(var d=0;d<this.items.length;d++)if(this.items[d].cloudId==b)return this.items[d]};c.prototype.V1x8=function(b){for(var d=0;d<this.items.length;d++)if(this.items[d].type==b)return this.items[d].cloudId;return 0};c.prototype.V1x9=
function(b){for(var d=0;d<this.items.length;d++)if(this.items[d].cloudId==b){this.items.splice(d,1);break}};c.prototype.V1xa=function(b){for(var d=0;d<this.items.length;d++)if(this.items[d].name.toLowerCase()==b.toLowerCase())return!0;return!1};return c}();CB.V1xb=function(){var c=function(b){this.game=b;this.time=new CB.V5i(0)};c.prototype.V3c0=function(b){this.game.hdr.compactToDataBuf(b);b.V3by(0);this.game.writeGameOnly2(b);this.time.V3c0(b)};return c}();"use strict";CB.namespace("CB.Server.V1xc");
CB.Server.V1xc=function(){var c=function(b,d,c){this.cloudId=b;this.nGame=d;this.dateAndTime=c};c.prototype.fromDataBuf=function(b){b.beginSizedRead();this.cloudId=b.V3bx();b.V3bx();this.nGame=b.V3c1();this.dateAndTime=new CB.V5i;this.dateAndTime.fromDataBuf(b);b.endSizedRead()};c.prototype.V3c0=function(b){b.beginSizedWrite();b.V3bi(this.cloudId);b.V3bi(0);b.V3by(this.nGame);void 0===this.dateAndTime&&(this.dateAndTime=new CB.V5i(0));this.dateAndTime.V3c0(b);b.endSizedWrite()};c.prototype.setEquals=
function(b){return this.cloudId==b.cloudId&&this.nGame==b.nGame&&this.dateAndTime==b.dateAndTime};c.prototype.setGreater=function(b){return this.cloudId==b.cloudId?this.nGame==b.nGame?this.dateAndTime>b.dateAndTime:this.nGame>b.nGame:this.cloudId>b.cloudId};return c}();CB.Server.V1xd={V1xe:0,V1xf:1,V1xg:2,V1xh:3};
CB.Server.V1wh=function(){var c=function(b,d,c,g){this.cloudId=b;this.nGame=d;this.eType=c;this.header=g};c.prototype.fromDataBuf=function(b){b.beginSizedRead();this.cloudId=b.V3c1();this.nGame=b.V3c1();this.eType=b.V3c1();switch(this.eType){case CB.Server.V1xd.V1xe:this.header=new CB.Vh0,this.header.compactFromDataBuf(b),(new CB.V5i).fromDataBuf(b)}b.endSizedRead()};return c}();"use strict";CB.namespace("CB.Server.CloudManager");
CB.V1xi={V5l:0,V1xj:1600,V1xk:1601,V1xl:1602,V1xm:1603,V1xn:1604,V1xo:1605,V1xp:1606,V1xq:1607,V1xr:1608,V1xs:1609,V1xt:1610,V1xu:1611,V1xv:1612,V1xw:1613,V1xx:1614,V1xy:1615,V1xz:1616,V1y0:1617,V1y1:1618,V1y2:1619,V1y3:1620,V1y4:1621,V1y5:1622,V1y6:1623,V1y7:1624,V1y8:1625,V1y9:1626,V1ya:1627,V1yb:1628,V1yc:1629,V1yd:1630,V1ye:1631,V1yf:1632,V1yg:1633,V1yh:1634,V1yi:1635,V1yj:1636,V1yk:1637,V1yl:1638,V1ym:1639,UPLOAD_GAME:1640,V1yn:1641,V1yo:1642,V1yp:1643,V1yq:1644,V1yr:1645,V1ys:1647,V1yt:1648,
V1yu:1649,V1yv:1650,toString:function(c){for(var b in this)if(this[b]==c)return b;return"Unknown CloudUserMsgId: "+c},Vlz:function(c){return"CloudId="+c}};CB.V1yw={V1yx:1,V1yy:2,V1yz:4,V1z0:8,V1z1:16,V1z2:32,V1z3:64,V1z4:128,V1z5:256,WHITE:6,BLACK:9,MOVE:12,Vub:3};
CB.Server.CloudManager=function(){var c=function(){this.V1z6=new CB.Vak;this.V1z7=new CB.Timer;this.V1z8=0;this.V1z9={};this.V1za=new CB.Vao(function(b){this.send(b)}.bind(this));this.V1zb=new CB.Vao(function(b){this.send(b)}.bind(this));this.V1zc=!1;this.V1zf=this.V1zd=CB.V1ze.V5l;this.name="cloud"};CB.inherit(c,CB.Server.V1tg);c.prototype.V1zg=function(b,c,g,f,h){this.create(b,c,g,f,h)};c.prototype.getName=function(){return"CloudMgr"};c.prototype.V1u4=function(){this.fireOnChangeLogin();this.V1zh();
V3c6.setLoggedIn(this.isLoggedIn())};c.prototype.V1vg=function(){this.V1ub("Connected to CloudServer","","conn");this.V1tx=!0;V3c6.shouldRequestCloudDBsOnLogin()?this.V1zi():CB.V138&&CB.V138.V13a();this.loginMode!=CB.LoginMode.GUEST&&(V3c6.setLoggedIn(!0),V3c6.panelMgr.getKernel()&&this.V1zj(V3c6.panelMgr.getKernel().getCurPos()),V3c6.config.V1zk||V3c6.panelMgr.showMessage(String.formatEx(lm.LOGIN_WELCOME,this.user),2E3));V3c6.V1zl(this.V3bm)};c.prototype.V1v6=function(){!V3c6.config.V1zk&&CB.V138&&
CB.V138.V139("Requesting databases ... ",null,5E3)};c.prototype.V1ui=function(){this.superClass.V1ui.apply(this,arguments)};c.prototype.V1ub=function(b,c,g){5};c.prototype.V1zm=function(b){};c.prototype.test=function(){};c.prototype.V1rz=function(b){if(!this.V1v7(b))try{switch(b.getType()){default:TRACE("Unhandled: "+b.toString());break;case CB.V1nz.V1p2:this.V1ub("Connected to CloudServer");this.V1tx=!0;alert("Default Groups not expected...");break;case CB.V1nz.V1qb:this.V1zn(b);break;case CB.V1nz.V1od:this.V1t0()}}catch(c){b=
CB.V1nz.Vlz(b.getType()),CB.V46(b,c)}};c.prototype.V1zo=function(b){V3c6.panelMgr.V1vj(chat.toString())};c.prototype.isLoggedIn=function(){return this.V1tx&&this.Vrg()};c.prototype.V1zn=function(b){try{switch(b.getUserType()){default:TRACE("Unhandled Cloud Msg: "+b.toString());break;case CB.V1xi.V1xk:this.V1zp(b);break;case CB.V1xi.V1xm:this.V1zq(b);break;case CB.V1xi.V1xo:this.V1zr(b);break;case CB.V1xi.V1xr:this.V1zs(b);break;case CB.V1xi.V1xq:this.V1zt(b);break;case CB.V1xi.V1xs:case CB.V1xi.V1y7:this.V1zu(b);
break;case CB.V1xi.V1y8:this.V1zv(b);break;case CB.V1xi.V1xt:this.V1zw(b);break;case CB.V1xi.V1xu:this.V1zx(b);break;case CB.V1xi.V1xw:break;case CB.V1xi.V1yc:this.V1zy(b);break;case CB.V1xi.V1xx:this.V1zz(b);break;case CB.V1xi.V1y0:this.V200(b);break;case CB.V1xi.V1y2:this.V201(b);break;case CB.V1xi.V1y5:this.V202(b);break;case CB.V1xi.V1ya:this.V203(b);break;case CB.V1xi.V1yf:this.V204(b);break;case CB.V1xi.V1yi:this.V205(b);break;case CB.V1xi.V1yk:this.V206(b);break;case CB.V1xi.V1yr:this.V207(b);
break;case CB.V1xi.V1ys:this.V208(b);break;case CB.V1xi.V1yt:this.notifyMyMovesChanged(b)}}catch(c){b=CB.V1xi.Vlz(b.getUserType()),CB.V46(b,c)}};c.prototype.V209=function(b){};c.prototype.V1zi=function(){var b=new CB.Vat(CB.V1nz.V1qb);b.setUserType(CB.V1xi.V1xj);var c=this.user;this.loginMode==CB.LoginMode.GUEST&&(c="Guest");b.getBuf().V3b6(c);b.getBuf().V3by(CB.V5t.V6i());this.send(b)};c.prototype.V1zp=function(b){CB.V138&&CB.V138.V13a();this.cloudDBItemList=new CB.V1x7;this.cloudDBItemList.fromDataBuf(b.getBuf());
var c=b.getBuf().V3bx(),g=b.getBuf().V3bx(),f=b.getBuf().V3bx(),h=b.getBuf().V3bx();b.getBuf().V3bx();this.V1ub("Received Databases... qKB="+c+", siz= "+g+", maxDB="+f+", lastDBId="+h);V3c6.config.V1zk||(0!=h&&this.V1zc?this.V20a(h,!0):V3c6.panelMgr.openDatabasePanel&&V3c6.panelMgr.selectCloudDatabase(this.user,this.cloudDBItemList,this.V20a.bind(this)));this.V1zc=!1};c.prototype.V1w8=function(b){return this.cloudDBItemList.getById(b)};c.prototype.V20a=function(b,c){if(0<=b){this.V1z8&&this.V12s(this.V1z8);
var g=this.cloudDBItemList.getById(b);if(g){var f=this.openCloudDatabase(g);V3c6.panelMgr.V20b(f);c&&("Clipboard"==g.name||"CloudClip"==g.name)&&V3c6.panelMgr.gameKernel&&V3c6.panelMgr.gameKernel.Vn3(f,f.nGames);this.V20c&&((new CB.Timer(this.V20c)).runOnce(100),this.V20c=null)}this.V1z8=b;this.V20d(b)}else this.V1z8=0};c.prototype.V20e=function(b){this.V20c=b};c.prototype.V20f=function(b){if(b=this.cloudDBItemList.getById(b))return this.openCloudDatabase(b)};c.prototype.openCloudDatabase=function(b){if(void 0!==
this.V1z9[b.cloudId])return this.V12q(this.V1z9[b.cloudId]),this.V1z9[b.cloudId];b=new CB.V1vp(b.cloudId,b.nGames,this);this.V12q(b);return b};c.prototype.V12q=function(b){void 0==this.V1z9[b.cloudId]&&(this.V1z9[b.cloudId]=b);this.V1z9[b.cloudId].incUsers()};c.prototype.V12s=function(b){"object"===typeof b?b=b.cloudId:ASSERT("number"===typeof b);void 0!==this.V1z9[b]&&(this.V1z9[b].decUsers(),0>=this.V1z9[b].getNUsers()&&(this.V1z9[b].destroy(),delete this.V1z9[b]))};c.prototype.V1zh=function(){for(var b in this.V1z9)this.V1z9.hasOwnProperty(b)&&
(this.V1z9[b].destroy(),delete this.V1z9[b])};c.prototype.V20d=function(b){var c=new CB.Vat(CB.V1nz.V1qb);c.setUserType(CB.V1xi.V1xv);c.getBuf().V3bi(b);c.getBuf().V3bi(0);this.send(c)};c.prototype.V20g=function(b){if(this.cloudDBItemList.V1xa(b))alert(b+" exists.");else if(!this.V1uh()){var c=new CB.Vat(CB.V1nz.V1qb);c.setUserType(CB.V1xi.V1xz);c.getBuf().V3b6(b);c.getBuf().V3by(CB.V5t.V6i());V3c6.V3bg.guid.V3c0(c.getBuf());this.send(c)}};c.prototype.V200=function(b){var c=b.getBuf().V3c1();b.getBuf().V3bx();
b.getBuf().V3bx();b.getBuf().V3b7(100);switch(c){case CB.V1wv.V1x2:alert("Name Exists");break;case CB.V1wv.V1x3:alert("Disk Space insufficient");break;case CB.V1wv.V1x4:alert("Too many databases ");break;case CB.V1wv.V1x5:this.V1zi()}};c.prototype.deleteDatabase=function(){V3c6.panelMgr.selectCloudDatabase(this.user,this.cloudDBItemList,this.V20h.bind(this))};c.prototype.V20h=function(b){if(b&&CB.Vnc){var c=this.V1w8(b);if(c){var g="<strong>"+CB.V4a.V4c(c.title)+"</strong>",g=g+("</br></br>"+c.nGames+
" games"),g=g+("</br></br> Owner="+CB.V4a.V4c(c.owner));CB.Vnc.V20i("Please confirm deletion of this database:",g,function(c){if("yes"==c||"ok"==c)c=new CB.Vat(CB.V1nz.V1qb),c.setUserType(CB.V1xi.V1y1),c.getBuf().V3bi(b),c.getBuf().V3bi(0),this.send(c),this.V20j=!1,this.fireOnDeleted({cloudId:b}),this.V12s(b),this.V1z8==b&&(this.V1z8=0)}.bind(this))}}};c.prototype.V201=function(b){var c=b.getBuf().V3bx();b.getBuf().V3bx();b.getBuf().V3b7(100);this.cloudDBItemList.V1x9(c)};c.prototype.V1zq=function(b){b=
this.V1za.Vas(b,CB.V1nz.V1qb,CB.V1xi.V1xy,function(b){var d=new CB.Server.V1wh;d.fromDataBuf(b);return d});b.overhead.V3c5();this.V1ub("Received Multiple Headers: "+b.vec.length);for(var c=[],g=0;g<b.vec.length;g++)for(var f=0;f<b.vec.length&&1E3>f;f++){var h=b.vec[f];switch(h.eType){default:throw"URTyp";case CB.Server.V1xd.V1xe:c.push(h);case CB.Server.V1xd.V1xg:case CB.Server.V1xd.V1xf:case CB.Server.V20k:}}c.length&&this.fireOnHeadersChanged(c)};c.prototype.V1wf=function(b,c,g){void 0==c&&alert("nGame");
this.V1z6.insert(new CB.Server.V1xc(b,c,g));40<this.V1z6.size()?this.V20l():this.V1z7.runOnce(500,this.V20l.bind(this))};c.prototype.V20l=function(){var b=new CB.Vat(CB.V1nz.V1qb);b.setUserType(CB.V1xi.V1xl);b.getBuf().V3by(this.V1z6.size());for(var c=0;c<this.V1z6.size()&&100>c;c++)this.V1z6.Val()[c].V3c0(b.getBuf());this.send(b);this.V1z6.clear()};c.prototype.loadGame=function(b,c,g){g=new CB.Vat(CB.V1nz.V1qb);g.setUserType(CB.V1xi.V1xn);g.getBuf().V3bi(b);g.getBuf().V3bi(0);g.getBuf().V3by(c);
(new CB.V5i(0)).V3c0(g.getBuf());this.send(g)};c.prototype.V1zr=function(b){var c=b.getBuf().V3bx();b.getBuf().V3bx();var g=b.getBuf().V3c1();b=this.V20m(b.getBuf());b.replaceDBId=c;b.replaceGameNo=g;this.fireOnGameChanged({cloudId:c,game:b})};c.prototype.V1zs=function(b){var c=b.getBuf().V3bx();b.getBuf().V3bx();for(var g=b.getBuf().V3c1(),f=[],h=0;h<g&&1E3>h;h++){var l=b.getBuf().V3c1();f.push(l)}this.fireOnGamesChangedByGameNo({cloudId:c,gameNos:f})};c.prototype.V1zt=function(b){var c=b.getBuf().V3bx();
b.getBuf().V3bx();for(var g=[],f=b.getBuf().V3c1(),h=0;h<f&&100>h;h++)g.push(b.getBuf().V3c1());this.fireOnHeadersChangedByGameNo({cloudId:c,gameNos:g})};c.prototype.V1zu=function(b){CB.V138&&CB.V138.V13a();var c=b.getBuf().V3bx();b.getBuf().V3bx();if(b.getBuf().V3c1()){b=b.getBuf().V3c1();var g=this.cloudDBItemList.getById(c);g&&(g.nGames=b);this.fireOnReorganized({cloudId:c,nNewLen:b})}};c.prototype.V1zv=function(b){CB.V138&&CB.V138.V13a();var c=b.getBuf().V3bx();b.getBuf().V3bx();b.getBuf().V3b7(100);
b=b.getBuf().V3c1();this.V20c=null;var g=this.cloudDBItemList.getById(c);g&&(g.nGames=b);this.fireOnReorganized({cloudId:c,nNewLen:b})};c.prototype.V1zw=function(b){var c=b.getBuf().V3bx();b.getBuf().V3bx();this.fireOnDeleted({cloudId:c});this.V12s(c)};c.prototype.V1wi=function(b,c,g){var f=new CB.Vat(CB.V1nz.V1qb);f.setUserType(CB.V1xi.V1y3);f.getBuf().V3bi(b);f.getBuf().V3bi(0);f.getBuf().V3by(c.length);for(b=0;b<c.length;b++)f.getBuf().V3by(c[b]),f.getBuf().V3c4(g[b]);V3c6.V3bg.guid.V3c0(f.getBuf());
(new CB.V5i(0)).V3c0(f.getBuf());this.send(f)};c.prototype.V1wk=function(b){if(!this.V1uh()){var c=new CB.Vat(CB.V1nz.V1qb);c.setUserType(CB.V1xi.V1y4);c.getBuf().V3bi(b);c.getBuf().V3bi(0);V3c6.V3bg.guid.V3c0(c.getBuf());this.send(c);(b=this.cloudDBItemList.getById(b))&&CB.V138&&CB.V138.V139("Cleaning Up "+b.name,null,2E4)}};c.prototype.V202=function(b){CB.V138&&CB.V138.V13a();var c=b.getBuf().V3bx();b.getBuf().V3bx();b.getBuf().V3b7(100);b=b.getBuf().V3c1();this.V20c=null;var g=this.cloudDBItemList.getById(c);
g&&(g.nGames=b);this.fireOnReorganized({cloudId:c,nNewLen:b})};c.prototype.V1wl=function(b,c,g){var f=new CB.Vat(CB.V1nz.V1qb);f.setUserType(CB.V1xi.V1y6);f.getBuf().V3bi(b);f.getBuf().V3bi(0);f.getBuf().V3bi(c);f.getBuf().V3bi(0);V3c6.V3bg.guid.V3c0(f.getBuf());f.getBuf().V3by(g.length);for(b=0;b<g.length;b++)f.getBuf().V3by(g[b]);this.send(f);CB.V138&&CB.V138.V139("Copying games ... ",null,2E4)};c.prototype.V137=function(b,c){var g=new CB.Vat(CB.V1nz.V1qb);g.setUserType(CB.V1xi.V1y9);g.getBuf().V3bi(b);
g.getBuf().V3bi(0);g.getBuf().V3bo(c);V3c6.V3bg.guid.V3c0(g.getBuf());this.send(g);CB.V138&&CB.V138.V139("Searching on Server ... ",null,2E4)};c.prototype.V203=function(b){CB.V138&&CB.V138.V13a();var c=b.getBuf().V3bx();b.getBuf().V3bx();for(var g=b.getBuf().V3c1(),f=[],h=0;h<g&&1E4>h;h++){var l=b.getBuf().V3c1();f.push(l)}(b=this.cloudDBItemList.getById(c))&&this.openCloudDatabase(b).setSubSet(f)};c.prototype.V1zx=function(b){b.getBuf().V3bx();b.getBuf().V3bx()};c.prototype.V1zz=function(b){b.getBuf().V3bx();
b.getBuf().V3bx();this.V1zi()};c.prototype.V20m=function(b){var c=new CB.Game,g=new CB.Vh0;g.compactFromDataBuf(b);b.V3c1();c.readGameOnly2(b);c.setHeader(g);return c};c.prototype.V20n=function(b,c){c.hdr.compactToDataBuf(b);b.V3by(0);c.writeGameOnly2(b);return c};c.prototype.V20o=function(b,c){if(this.V1z8){var g=new CB.Vat(CB.V1nz.V1qb);g.setUserType(CB.V1xi.V1xp);g.getBuf().V3bi(this.V1z8);g.getBuf().V3bi(0);void 0!==c?g.getBuf().V3by(c):g.getBuf().V3by(0);V3c6.V3bg.guid.V3c0(g.getBuf());(new CB.V5i(0)).V3c0(g.getBuf());
this.V20n(g.getBuf(),b);if(void 0===c){var f=this.V20f(this.V1z8);f&&(b.replaceDBId=this.V1z8,b.replaceGameNo=f.getGameCount()+1)}this.send(g);void 0!==c?this.fireOnGamesChangedByGameNo({cloudId:this.V1z8,gameNos:[c]}):this.fireOnGameAppended({cloudId:this.V1z8})}};c.prototype.V20p=function(b){this.V20q(b)?this.V20o(b,b.replaceGameNo):this.V20o(b)};c.prototype.V20q=function(b){return b.replaceDBId&&b.replaceDBId==this.V1z8&&0<b.replaceGameNo};c.prototype.V1wm=function(b,c){for(var g=[],f=0;f<c.length;f++)g.push(new CB.V1xb(c[f]));
f=new CB.V9z;f.writeFakeInt64(b);V3c6.V3bg.guid.V3c0(f);c.length&&(CB.V138&&CB.V138.V139("Saving Games ... ",null,1E3),this.V1zb.Vau(this.V1v0(),CB.V1qt.V1qu,g,2E4,CB.V1nz.V1qb,CB.V1xi.V1yb,f,function(b,d){d.V3c0(b)}))};var b=new CB.V3bs;c.prototype.V1zy=function(d){d=this.V1zb.Vay(d);var c=this.cloudDBItemList.getById(this.V1z8);c&&(c.nGames+=d,b.exec(function(){CB.V138&&CB.V138.V13a();this.fireOnReorganized({cloudId:this.V1z8,nNewLen:c.nGames})}.bind(this),2E3))};c.prototype.V20r=function(b,c){var g=
this.V20s(CB.V1xi.V1yd);this.V20n(g.getBuf(),b);g.getBuf().V3by(c);g.getBuf().V3by(CB.V5t.V6i());this.send(g)};c.prototype.V20t=function(b,c){var g=this.V20s(CB.V1xi.V1ym);this.V20n(g.getBuf(),b);g.getBuf().V3by(c);var f=CB.V1yw.V1yz;this.V20u(!0)&&(f=CB.V1yw.V1z0);g.getBuf().V3by(f);g.getBuf().V3by(CB.V5t.V6i());this.send(g)};c.prototype.V20v=function(b,c){var g=this.V20s(CB.V1xi.V1yn);this.V20n(g.getBuf(),b);g.getBuf().V3b6(CB.V4a.V4b(c));var f=CB.V1yw.V1yz;this.V20u(!0)&&(f=CB.V1yw.V1z0);g.getBuf().V3by(f);
g.getBuf().V3by(CB.V5t.V6i());this.send(g)};c.prototype.V20w=function(b,c,g){var f=this.V20s(CB.V1xi.V1yo);b.write(f.getBuf());c.write2(f.getBuf());f.getBuf().V3c4(g);f.getBuf().V3by(CB.V5t.V6i());this.send(f)};c.prototype.uploadToMyMoves=function(b){var c=this.V20s(CB.V1xi.UPLOAD_GAME);this.V20n(c.getBuf(),b);c.getBuf().V3by(CB.V5t.V6i());this.send(c)};c.prototype.makeMainMoveOrder=function(b){var c=this.V20s(CB.V1xi.V1yl);this.V20n(c.getBuf(),b);c.getBuf().V3by(CB.V5t.V6i());this.send(c)};c.prototype.removeFromMyMoves=
function(b,c){var g=this.V20s(CB.V1xi.V1yg);b.write(g.getBuf());delete c.annos;(new CB.Vei(c.from,c.to,c.prom)).write2(g.getBuf());g.getBuf().V3by(CB.V5t.V6i());this.send(g)};c.prototype.V20x=function(b,c,g){var f=this.V20s(CB.V1xi.V1yj);b.write(f.getBuf());c.write2(f.getBuf());f.getBuf().V3by(g);f.getBuf().V3by(CB.V5t.V6i());this.send(f)};c.prototype.V206=function(b){var c=b.getBuf().V3bx();b.getBuf().V3c1();this.V20y();V3c6.panelMgr.blockLiveBookUpdates(CB.V20z.V210);1<c&&V3c6.panelMgr.showMessage(c+
" "+lm.MOVES_UNMARKED,4E3)};c.prototype.V207=function(b){var c=b.getBuf().V3bx();b.getBuf().V3c1();V3c6.panelMgr.showMessage(c+" "+lm.MOVES_UNLEARNED,4E3)};c.prototype.V211=function(b,c,g){var f=this.V20s(CB.V1xi.V1yq);b.write(f.getBuf());c.write2(f.getBuf());f.getBuf().V3by(g);f.getBuf().V3by(CB.V5t.V6i());this.send(f)};c.prototype.V208=function(b){};c.prototype.V1zj=function(b,c,g){var f=this.V20s(CB.V1xi.V1ye);b.write(f.getBuf());f.getBuf().V3c4(c?!0:!1);f.getBuf().writeInt(g||0);f.getBuf().V3by(CB.V5t.V6i());
this.send(f,!0)};c.prototype.V204=function(b){var c=new CB.Position;c.read(b.getBuf());for(var g=b.getBuf().V3c1(),f=[],h=[],l=0;l<g&&200>l;l++){var q=new CB.Vei;q.read2(b.getBuf());var h=b.getBuf().V3bx(),r=b.getBuf().V3c1(),t=b.getBuf().readUint8(),w=b.getBuf().V3b7(300),z=b.getBuf().readUint8(),B=b.getBuf().V3bv(),v=b.getBuf().readUint8();f.push({move:q,visits:h,flags:r,eval:t,correct:z,txt:w,date:B,learnPercent:v})}g={count:0,total:0,drilled:0,learned:0,quote:0,toString:function(){return"Stats: cnt="+
this.count+", total="+this.total+", drilled="+this.drilled+", learned="+this.learned},getPercent:function(){return this.total?Math.round(100*this.quote/this.total):0}};g.count=b.getBuf().V3bx();g.total=b.getBuf().V3bx();g.drilled=b.getBuf().V3bx();g.learned=b.getBuf().V3bx();g.quote=b.getBuf().readFloat64();this.fireOnMyMoves({position:c,moves:f,stats:g})};c.prototype.loadMyMoves=function(b,c){this.V212=c;V3c6.panelMgr.blockLiveBookUpdates&&V3c6.panelMgr.blockLiveBookUpdates(CB.V20z.V213);var g=this.V20s(CB.V1xi.V1yh);
g.getBuf().V3by(b);this.V20n(g.getBuf(),c);g.getBuf().V3by(CB.V5t.V6i());this.send(g)};c.prototype.V20y=function(){this.V212||(this.V212=new CB.Game);this.loadMyMoves(this.V1zf,this.V212)};c.prototype.V205=function(b){var c=this.V20m(b.getBuf()),g=b.getBuf().V3bx();5;b=b.getBuf().V3c1();var f;switch(b){case CB.V1ze.Vbe:f="Both Colors";break;case CB.V1ze.WHITE:f="White";break;case CB.V1ze.BLACK:f="Black"}c.hdr.white=new CB.PlayerData("","My Moves");c.hdr.black=new CB.PlayerData("",f);0==g?(c="No Marked Moves Found.",
b!=CB.V1ze.Vbe&&(c=f+" - "+c),V3c6.panelMgr.showMessage(c,5E3),V3c6.panelMgr.shakeMarkButton(),c=new CB.Game):V3c6.panelMgr.stopShakeMarkButton();V3c6.panelMgr.loadGame(c);V3c6.panelMgr.setLayoutMyMoves(!0,b==CB.V1ze.BLACK);this.V1zf=this.V1zd=b;V3c6.panelMgr.blockLiveBookUpdates(CB.V20z.V214)};c.prototype.notifyMyMovesChanged=function(b){V3c6.notifyMyMovesChanged()};c.prototype.V215=function(b,c){var g=this.V20s(CB.V1xi.V1yp);b.write(g.getBuf());g.getBuf().V3by(c);g.getBuf().V3by(CB.V5t.V6i());this.send(g)};
c.prototype.V216=function(){var b=this.V20s(CB.V1xi.V1yu);b.getBuf().V3by(CB.V5t.V6i());this.send(b)};c.prototype.Vri=function(b){var c=this.V20s(CB.V1xi.V1yv);this.V20n(c.getBuf(),b);c.getBuf().V3by(CB.V5t.V6i());this.send(c)};c.prototype.V20s=function(b){var c=new CB.Vat(CB.V1nz.V1qb);c.setUserType(b);b=this.user;this.loginMode==CB.LoginMode.GUEST&&(b="Guest");c.getBuf().V3b6(CB.V4a.V4b(b));return c};c.prototype.Vny=function(){this.V1zd=-1};c.prototype.V217=function(){return 0<=this.V1zd};c.prototype.V20u=
function(b){switch(this.V1zd){default:return!1;case CB.V1ze.Vbe:return!0;case CB.V1ze.BLACK:return b;case CB.V1ze.WHITE:return!b}};c.prototype.V1uy=function(b){var c=V3c6.panelMgr.getKernel();c&&c.boardWin&&c.boardWin.addMessage("Server logged you off: "+b,!0)};V3bf.initForListeners(c);V3bf.addEvent(c,"HeadersChanged");V3bf.addEvent(c,"HeadersChangedByGameNo");V3bf.addEvent(c,"GameChanged");V3bf.addEvent(c,"GamesChangedByGameNo");V3bf.addEvent(c,"GameAppended");V3bf.addEvent(c,"ChangeLogin");V3bf.addEvent(c,
"Reorganized");V3bf.addEvent(c,"Deleted");V3bf.addEvent(c,"MyMoves");return c}();"use strict";CB.namespace("CB.DOM");CB.DOM.get=function(c){return document.getElementById(c)};CB.DOM.V218=function(c,b){var d=document.createTextNode(c),e=document.createElement("div");void 0!==b&&(e.className=b);document.body.appendChild(e);e.appendChild(d);void 0!==CB.input?document.body.insertBefore(e,CB.input):document.body.appendChild(e)};
CB.DOM.add=function(c,b,d){var e=document.createElement("div");b&&b.length?(b=document.createElement(b),b.innerText=c):b=document.createTextNode(c);void 0!==d&&(e.className=d);e.appendChild(b);document.body.appendChild(e)};CB.DOM.V219=function(c,b,d){var e=document.createElement("div"),g=document.createElement("a");g.href=c;g.target="_blank";b&&b.length&&(g.textContent=b);void 0!==d&&(e.className=d);e.appendChild(g);document.body.appendChild(e)};
CB.DOM.V21a=function(){var c=document.createElement("br");document.body.appendChild(c)};CB.DOM.insertBefore=function(c,b,d){c=document.createTextNode(c);var e=document.createElement("div");e.className=void 0!==d?d:"Text";document.body.appendChild(e);e.appendChild(c);void 0!==document.getElementById(b)?document.body.insertBefore(e,document.getElementById(b)):document.body.appendChild(e)};
CB.DOM.V21b=function(c){for(var b=document.cookie.split(";"),d=0;d<b.length;d++){var e=b[d].split("="),g=e[0].trim(),e=1<e.length?e[1]:"";if(g==c)return decodeURIComponent(e)}return""};CB.DOM.codeAccountName=function(c){return CB.V4a.base64.encode(CB.V4a.V4p(c))};CB.DOM.V1ta=function(c){"guest"!=c&&this.setCodedCookie("AccountName64",c)};CB.DOM.V21c=function(c){return this.getCodedCookie("AccountName64",c)};CB.DOM.setCodedCookie=function(c,b){CB.DOM.V1t3(c,this.codeAccountName(b))};
CB.DOM.getCodedCookie=function(c,b){var d=CB.DOM.V21b(c),d=CB.V4a.base64.V4i(d);b&&(d=CB.V4a.V4q(d),d=d.replace("%25","%"),d=d.replace("%20"," "));return d};CB.DOM.V1t3=function(c,b){var d=new Date,e;b?(d.setYear(d.getFullYear()+1),e=d.toGMTString()):e="Thu, 01 Jan 1970 00:00:01 GMT";d=".chessbase.com";-1!=document.URL.search(/localhost/i)&&(d="localhost");e=c+"="+encodeURIComponent(b)+";expires="+e+";path=/;";d.length&&(e+="domain="+d+";");document.cookie=e};
CB.DOM.V1t2=function(c){CB.DOM.V1t3(c,"")};CB.DOM.V21d=function(c,b){void 0!==c&&(c.className=0<c.className.length?c.className+(" "+b):b)};CB.DOM.V21e=function(c,b){void 0!==c&&(c.className=c.className.replace(new RegExp("\b"+b+"\b"),""))};CB.DOM.resize=function(c,b,d){if("string"===typeof c||"number"===typeof c)c=document.getElementById(c);void 0!==c&&(c.style.width=b,c.style.height=d)};CB.DOM.setText=function(c,b){c&&("undefined"==typeof c.textContent?c.innerText=b:c.textContent=b)};
function textOut(c,b){CB.V21f||(CB.DOM.add(c,"",b),void 0!==CB.input&&CB.input.scrollIntoView())}function TRACE(c){V3c6.config.debug&&textOut(c,"LogTrace")}function EXCEPTION(c,b){var d=c;void 0!==b&&(d+=" ("+b+")");textOut(d,"LogException")}function CHAT(c){textOut(c,"LogChat")}
CB.V5q=function(){var c={},b;c.V21g=function(){if(void 0===b){var d=document.createElement("style");d.setAttribute("media","screen");d.appendChild(document.createTextNode(""));document.head.appendChild(d);b=d.sheet}return b};c.V21h=function(b){var d=document.createElement("style");d.id=b;d.setAttribute("media","screen");d.appendChild(document.createTextNode(""));document.head.appendChild(d);return d.sheet};c.V5r=function(b,d){try{void 0!==c.V21g().addRule?c.V21g().addRule(b,d):c.V21g().insertRule(b+
" { "+d+" }",c.V21g().cssRules.length)}catch(f){CB.V46("CSS:addRules",f)}};c.V21i=function(b,d){return"background-image:linear-gradient( to right,"+b+","+d+")"};c.V21j=function(){return"display:block;margin-left:auto;margin-right:auto;text-align:center"};c.getHeader=function(b,d,c){return c?"<"+b+' style="'+c+'">'+d+"</"+b+">":"<"+b+">"+d+"</"+b+">"};c.V21k=function(b){for(var d=c.V21g(),f=0;f<d.cssRules.length;++f)if(d.cssRules[f].type==window.CSSRule.KEYFRAMES_RULE&&d.cssRules[f].name==b)return d.cssRules[f];
f=CB.V5t.V6v()?"-webkit-":"";void 0===d.insertRule?d.addRule("@"+f+"keyframes "+b+"{ 0% { top: 10px } 100% { top: 30px } }"):d.insertRule("@"+f+"keyframes "+b+"{ 0% { top: 10px } 100% { top: 30px } }",d.cssRules.length);for(f=0;f<d.cssRules.length;++f)if(d.cssRules[f].type==window.CSSRule.KEYFRAMES_RULE&&d.cssRules[f].name==b)return d.cssRules[f];return null};var d={};c.V21l=function(b){b=[].concat(b);for(var c=0;c<b.length;c++)1<b[c].length&&void 0==d[b[c]]&&(CB.V5q.V21g().insertRule("."+b[c]+"{ background-image: url( "+
V3c6.config.Vh()+b[c]+".png ) !important; }",0),d[b[c]]=1)};return c}();"use strict";
CB.$=function(){function c(b){var d=document.createElement("div");d.innerHTML=b;return d.childNodes}function b(b){q.prototype[b]=function(){return this.arr[b].apply(this,arguments)}}function d(b){q.prototype[b]=function(d){this.on(b,d)}}var e=/^#(\w|-)+$/,g=/^.(\w|-)+$/,f=/^\w+$/,h=/^\[(\w|-)+\]$/,l=/^<.*>$/,q=function(b,d){var g=[];if(null!=b&&""!=b)if("string"===typeof b){d=d||document;var h=(new q(d)).single();b=b.trim();b.startsWith(">")?(g=b.replace(">","").trim(),g=(new q(g,h)).arr.filter(function(b){return b.parentNode==
h})):e.test(b)?(b=b.substring(1),g=(g=document.getElementById(b))?[g]:[]):f.test(b)?g=h.getElementsByTagName(b):l.test(b)?g=c(b):h&&(g=h.querySelectorAll(b,h))}else"object"===typeof b&&(g=b.proloJQ?b.arr:[b]);this.length=g.length;this.arr=[];for(var r=0;r<g.length;++r)this[r]=g[r],this.arr.push(g[r]);this.proloJQ=!0};b("indexOf");b("find");b("findIndex");b("find");b("some");b("every");b("map");b("filter");b("reduce");b("forEach");q.prototype.single=function(){return 1===this.arr.length?this.arr[0]:
null};q.prototype.first=function(){return this.arr[0]};q.prototype.last=function(){return this.arr[this.arr.length-1]};q.prototype.addClass=function(b){this.forEach(function(d){d.classList&&d.classList.add(b)});return this};q.prototype.removeClass=function(b){b?this.forEach(function(d){d.classList&&d.classList.remove(b)}):this.forEach(function(b){b.className=""});return this};q.prototype.toggleClass=function(b){this.forEach(function(d){d.classList&&d.classList.toggle(b)});return this};q.prototype.hide=
function(){this.forEach(function(b){if("none"!==b.style.display){var d=b.style.display;b.oldDisplay="none"!=d?d:"block";b.style.display="none"}})};q.prototype.show=function(){this.forEach(function(b){b.style.display&&"none"!==b.style.display||(b.style.display=b.oldDisplay||"block",delete b.oldDisplay)})};q.prototype.V21m=function(b){this.forEach(function(d){d.style.display=b})};q.prototype.toggle=function(b){b?this.show():this.hide()};q.prototype.parent=function(b){for(var d=this.single().parentNode;null!=
d;d=d.parentNode)if(w.is(d,b))return d;return null};q.prototype.on=function(b,d){this.forEach(function(c){c.addEventListener(b,d)});return this};q.prototype.off=function(b,d){this.forEach(function(c){c.removeEventListener(b,d)});return this};d("mousemove");d("mousedown");d("mouseup");d("click");q.prototype.html=function(b){if(void 0===b)return this.single().innerHTML;this.forEach(function(d){d.innerHTML=b});return this};q.prototype.text=function(b){if(void 0===b)return this.single().textContent?this.single().textContent:
this.single().innerHTML;this.forEach(function(d){d.textContent?d.textContent=b:d.innerText=b});return this};q.prototype.prependTo=function(b){var d=(new q(b)).single();this.forEach(function(b){d.insertBefore(b,d.firstChild)})};q.prototype.prepend=function(b){var d=new q(b);this.forEach(function(b){d.prependTo(b)})};q.prototype.appendTo=function(b){var d=(new q(b)).single();this.forEach(function(b){d.appendChild(b)});return this};q.prototype.append=function(b){var d=new q(b);this.forEach(function(b){d.appendTo(b)});
return this};q.prototype.insertBefore=function(b){var d=new q(b);this.forEach(function(b){d.forEach(function(d){d.parentNode&&d.parentNode.insertBefore(b,d)})});return this};q.prototype.empty=function(){this.html("");return this};q.prototype.remove=function(){this.forEach(function(b){b.parentNode&&b.parentNode.removeChild(b)});return this};q.prototype.attr=function(b,d){if(void 0===d){var c=this.single().attributes[b];return c?c.value:null}this.forEach(function(c){c.setAttribute(b,d)});return this};
q.prototype.data=function(b,d){return this.attr("data-"+b,d)};var r=/^[+-]?(([0-9]*\.[0-9]+)|[0-9]+)/,t="marginTop marginBottom marginLeft marginRight paddingTop paddingBottom paddingLeft paddingRight height width minHeight minWidth maxHeight maxWidth borderWidth left top bottom right".split(" ");q.prototype.css=function(b,d){if(b&&"object"==typeof b&&!d){for(var c in b)b.hasOwnProperty(c)&&this.css(c,b[c]);return this}var e=minusToCamel(b);if(void 0===d)return this.arr.length?getComputedStyle(this.arr[0])[e]:
null;this.forEach(function(b){var c=d;null==c&&(c="");var c=c.toString(),f;f=c;var g=r.exec(f);g?(g=g[0],f=f.substring(g.length),f={val:parseFloat(g),unit:f}):f=null;f&&!f.unit&&(c+=0<=t.indexOf(e)?"px":"");b.style[e]=c});return this};q.prototype.position=function(){return{top:parseFloat(this.css("top")),left:parseFloat(this.css("left"))}};var w=function(b,d){return ObjUtil.isFunction(b)&&!d?(w.addOnReadyListener(b),null):new q(b,d)};V3bf.initInstForListeners(w);V3bf.addInstEvent(w,"Ready");(new q(document)).on("DOMContentLoaded",
function(b){w.fireOnReady()});w.is=function(b,d,c){return b?d?g.test(d)?(d=d.replace(".",""),b.classList&&b.classList.contains(d)):e.test(d)?(d=d.replace("#",""),b.id===d):f.test(d)?b.tagName==d:h.test(d)?(d=d.replace("[",""),d=d.replace("]",""),b.attributes&&b.hasAttribute(d)):0<=w(d,c).indexOf(b):!0:!1};w.get=function(b){return w("#"+b).single()};w.set=function(b,d){w("#"+b).single().innerHTML=d};w.fn=q.prototype;return w}();"use strict";
CB.V1f1=function(){var c=0,b={append:!0},d=function(d,e,h,l){d&&(void 0===this.elDOM&&(this.elDOM=document.createElement(d)),d=l||{},d=ObjUtil.copyTo(b,d,!0),this.uniqueId||(this.uniqueId=++c),this.V21o=[],this.V21p=!1,void 0!==e?e instanceof CB.V1f1?(this.V21q=e.elDOM,e.addChild(this),this.V21p=!0):this.V21q=e:this.V21q=document.body,this.elDOM.id=h?h:"CBEl"+this.uniqueId,this.debug=this.elDOM.id,e=d.append,this.V21q&&(e?this.V21q.appendChild(this.elDOM):this.V21q.insertBefore(this.elDOM,this.V21q.firstChild)),
this.style=this.elDOM.style,this.setVisible(!1))};d.prototype.destroy=function(){this.V21r||(this.V21o.forEach(function(b,d){this.V21o[d]&&this.V21o[d].destroy()}.bind(this)),void 0!==this.V21s&&this.elDOM.removeChild(this.V21s.getEl().dom),this.V21q.removeChild(this.elDOM),this.V21r=!0)};d.prototype.changeParentElDOM=function(b){if(this.V21p)throw"!Change parent ElDom on Child El ";this.V21q&&this.V21q.contains(this.elDOM)&&this.V21q.removeChild(this.elDOM);(this.V21q=b)&&this.V21q.appendChild(this.elDOM)};
d.prototype.addChild=function(b){this.V21o[b.uniqueId]=b};d.prototype.removeChild=function(b){delete this.V21o[b.uniqueId]};d.prototype.V21t=function(){this.V21o.forEach(function(b,d){this.V21o[d]&&this.V21o[d].destroy()}.bind(this));this.V21o=[]};d.prototype.setVisible=function(b){this.style.visibility=b?"visible":"hidden";this.V21o.forEach(function(d,c){this.V21o[c]&&this.V21o[c].setVisible(b)}.bind(this));void 0!==this.V21s&&(b?this.V21s.show():this.V21s.hide())};d.prototype.isVisible=function(){return"visible"==
this.style.visibility};d.prototype.V21u=function(b){this.setPos(b.topLeft.x,b.topLeft.y);this.setSize(b.w,b.h)};d.prototype.V21v=function(){this.style.position="relative"};d.prototype.setPos=function(b,d){b=Math.floor(b);d=Math.floor(d);this.x=b;this.y=d;this.style.position="absolute";this.style.left=Math.round(b)+"px";this.style.top=Math.round(d)+"px"};d.prototype.setSize=function(b,d){b=Math.floor(b);d=Math.floor(d);this.w=b;this.h=d;this.elDOM.width=b;this.elDOM.height=d;this.style.width=b+"px";
this.style.height=d+"px";void 0!==this.V21s&&(this.V21s.V21w(b),this.V21s.setHeight(d));this.V21x&&(this.style.lineHeight=d+"px");this.V1ag()};d.prototype.V1ag=function(){};d.prototype.setHeight=function(b){this.h=b=Math.floor(b);this.style.height=b+"px";void 0!==this.V21s&&this.V21s.setHeight(b)};d.prototype.setPosSize=function(b,d,c,e){this.setPos(b,d);this.setSize(c,e)};d.prototype.V1ir=function(b){this.style.zIndex=b};d.prototype.setBorder=function(b,d,c){b=Math.floor(b);this.style.borderWidth=
b+"px";void 0!==d&&(this.style.borderColor=d);this.style.borderStyle=void 0!==c?c:"solid"};d.prototype.setCssClass=function(b){this.elDOM.className=b};d.prototype.V1ea=function(b,d,c){this.style.boxShadow=b+"px "+b+"px "+d+"px 0px "+c};d.prototype.V21y=function(b){b=Math.floor(b);this.style.borderRadius=b+"px"};d.prototype.setBackgroundColor=function(b){this.backgroundColor=b.toString();this.style.backgroundColor=b.toString()};d.prototype.setColor=function(b){this.style.color=b.toString()};d.prototype.V21z=
function(b){this.style.margin=b+"px"};d.prototype.V220=function(b){this.style.padding=b+"px"};d.prototype.V1ir=function(b){this.style.zIndex=b};d.prototype.V221=function(b){this.V21s=b};d.V222=function(b,d){b.style.pointerEvents=d?"all":"none"};d.prototype.V223=function(b){this.elDOM.addEventListener("click",b)};d.prototype.V224=function(b,d){this.elDOM.addEventListener(b,d)};d.addClass=function(b,d){if(!b.className||0>b.className.indexOf(d))b.className+=" "+d};d.removeClass=function(b,d){b.className=
b.className.replace(d,"");b.className=b.className.replace(/\s+/g," ")};var e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};d.V1f2=function(b){var d=document.createElement(e[b]||"div");b="on"+b;var c=b in d;c||(d.setAttribute(b,"return;"),c="function"==typeof d[b]);return c};d.prototype.V225=function(){this.elDOM.style.background="#101010";this.elDOM.style.backgroundImage="url( "+CB.V5p()+"Media/Chess/OrangeBrighterSoft.jpg )";this.elDOM.style.backgroundSize=
"100% 100%";this.elDOM.style.backgroundRepeat="no-repeat";this.elDOM.style.backgroundPosition="bottom left"};return d}();"use strict";
CB.V18z=function(){var c=function(b,d,c){CB.V18z.superClass.call(this,"div",b,d,c)};CB.inherit(c,CB.V1f1);c.prototype.V226=function(b,d,c){void 0===this.V227?(this.V227=document.createElement("img"),this.V227.setAttribute("src",b),this.V227.setAttribute("flag","alternate text"),this.V227.setAttribute("height",c+"px"),this.V227.setAttribute("width",d+"px"),this.elDOM.appendChild(this.V227)):this.V227.setAttribute("src",b)};c.prototype.setCssClass=function(b){this.elDOM.className=b};c.prototype.setText=
function(b){"undefined"!=typeof b&&(void 0===this.V228&&(this.V228=document.createElement("span"),this.V228.style.display="inline-block",this.elDOM.appendChild(this.V228),this.V228.style.cursor="pointer"),b=b.toString(),b.replace(/</g,"("),b.replace(/>/g,")"),this.V228.textContent?this.V228.textContent=b:this.V228.innerText?this.V228.innerText=b:this.V228.innerHTML=b)};c.prototype.setTextAlign=function(b){this.style.textAlign=b;this.V228&&(this.V228.textAlign=b)};c.prototype.getText=function(){if(this.V228){if(this.V228.textContent)return this.V228.textContent;
if(this.V228.innerText)return this.V228.innerText}return""};c.prototype.V1ir=function(b){this.style.zIndex=b};c.prototype.V1e6=function(b){if(b)void 0!==this.V1km?this.V1km.style.fontSize=Math.round(b)+"px":(this.V228&&(this.V228.style.fontSize=Math.round(b)+"px"),this.style.fontSize=Math.round(b)+"px",this.V1kt=Math.round(b),this.V229&&this.V1it());else throw Error("FontSize = 0");};c.prototype.setFontFamily=function(b){this.style.fontFamily=b;this.V228&&(this.V228.style.fontFamily=b)};c.prototype.V22a=
function(b){this.style.fontWeight=b};c.prototype.V1e7=function(b){void 0===this.V228&&this.setText(" ");void 0!==this.V228&&(this.V228.style.verticalAlign=b,this.V228.style.display="inline-block",this.V228.style.lineHeight="normal",void 0!==this.h&&(this.style.lineHeight=this.h+"px"))};c.prototype.V1it=function(){this.setTextAlign("center");this.V1e7("middle");this.V229=!0;this.style.display="block";this.V21x=!0};c.prototype.V1kk=function(){this.V22b("right")};c.prototype.V1kn=function(){this.V22b("left")};
c.prototype.V22b=function(b){this.setTextAlign(b);this.V1e7("middle");this.V229=!1;this.style.display="block"};c.prototype.V1e8=function(){return void 0!==this.V228?this.V228.clientWidth:0};c.prototype.V1e9=function(){return void 0!==this.V228?this.V228.clientHeight:0};c.prototype.V22c=function(){$(this.elDOM).hover(function(){$(this).css("filter","brightness(108%)")},function(){$(this).css("filter","brightness(100%)")})};c.prototype.V1kj=function(b,d,c,g){void 0===this.V1km&&(this.V1km=document.createElement("a"),
this.elDOM.appendChild(this.V1km));this.V1km.href=b;this.V1km.target="_blank";d&&d.length&&(this.V1km.textContent?this.V1km.textContent=d:this.V1km.innerText=d);c&&c.length&&(this.V1km.className=c);g&&this.V1km.setAttribute("onclick","if ( typeof ( ga ) !== 'undefined' && CB.V5t.runsOnChessBaseDomain() ) ga( 'send', 'event', 'link', "+('"'+d+'"')+");")};return c}();"use strict";
CB.V1bc=function(){var c=new CB.Color(255,255,248,.95),b=new CB.Color(0,0,0,.9),d=1,e=function(){this.uniqueId=d++;this.background=new CB.V18z(document.body,"bTTipBG"+this.uniqueId);this.V1is=new CB.V18z(this.background,"bSTTipText"+this.uniqueId);this.background.elDOM.style.zIndex=99999;this.V1is.setBackgroundColor(c);this.V1is.setColor(b);this.V1is.setFontFamily("Roboto, Helvetica, sans-serif")};e.prototype.destroy=function(){this.background.destroy()};e.prototype.setText=function(b){this.V1is.setText(b)};
e.prototype.setVisible=function(b){this.background.setVisible(b)};e.prototype.setPosSize=function(b,d){var c=Math.max(8,Math.round(.4*d.h)),e=new CB.V7q(b.x,b.y,b.x+d.w,b.y+d.h),q=d.w,r=(e.w-q)/2;e.w=q;e.move(r,0);this.background.setPos(b.x,b.y);this.background.setSize(d.w,d.h);e=Math.max(1,Math.min(4,Math.round(Math.sqrt(d.w/100))));this.background.V1ea(e,8*e,"rgba( 60, 30, 20, 0.3 )");this.V1is.setPos(0,0);this.V1is.setSize(d.w,d.h);this.V1is.setBorder(1,new CB.Color(0,0,0,.5));this.V1is.V21y(4);
this.V1is.V1it();do this.V1is.V1e6(c),--c;while(4<c&&(this.V1is.V1e8()>q||this.V1is.V1e9()>d.h-3))};return e}();"use strict";
CB.CanvasElement=function(){var c=function(b,d){CB.CanvasElement.superClass.call(this,"canvas",b,d);this._uniqueId=d};CB.inherit(c,CB.V1f1);c.prototype.setCssClass=function(b){this.elDOM.className=b};c.prototype.V22d=function(b,d){this.elDOM.width=b;this.elDOM.height=d};c.prototype.render=function(){};c.prototype.V225=function(){this.elDOM.style.background="#101010";this.elDOM.style.backgroundImage="url( "+CB.V5p()+"Media/Chess/OrangeBrighterSoft.jpg )";this.elDOM.style.backgroundSize="100% 100%";
this.elDOM.style.backgroundRepeat="no-repeat";this.elDOM.style.backgroundPosition="bottom left"};return c}();"use strict";
CB.V1gv=function(){var c=1,b=function(b){this.uniqueId=c++;this.background=new CB.V18z(b,"aCanvParentBG"+this.uniqueId);this.background.V21v();this.V22e=new CB.CanvasElement(this.background,"aCanvParentCanvas"+this.uniqueId)};b.prototype.createCanvas=function(b,c){return this.canvas=new CB.V22f(this.V22e.elDOM.id,b,c)};b.prototype.V22g=function(b){this.background.elDOM.parentElement.removeChild(this.background.elDOM);b&&b.appendChild(this.background.elDOM)};b.prototype.V22h=function(){return this.background.elDOM};
b.prototype.changeParentElDOM=function(b){this.background.changeParentElDOM(b)};b.prototype.setVisible=function(b){this.background.setVisible(b)};b.prototype.setPosSize=function(b,c,g,f){this.background.setPosSize(b,c,g,f);this.V22e.setPosSize(0,0,g,f);this.canvas&&this.canvas.resize(g,f)};b.prototype.setSize=function(b,c){this.background.setSize(b,c);this.V22e.setSize(b,c);this.canvas&&this.canvas.resize(b,c)};b.prototype.V225=function(){this.background.V225()};return b}();"use strict";
CB.V22i=function(){var c=function(b,d){this.div=new CB.V18z(b,"boardarea");CB.$("#boardarea").css("visibility","visible");this.canvasId=d};c.prototype.createCanvas=function(b,d){CB.$("#3d").css("visibility","visible");this.canvas=new CB.V22j(this.div.elDOM.id,b,function(){d&&d()}.bind(this));return this};c.prototype.V22k=function(){this.canvas.canvas.addEventListener("mousedown",this.onMouseDown.bind(this),!1);this.canvas.canvas.addEventListener("mousemove",this.onMouseMove.bind(this),!1);this.canvas.canvas.addEventListener("mouseup",
this.onMouseUp.bind(this),!1);this.control=new CB.BoardArea3D(this.canvas,1,1)};c.prototype.onMouseDown=function(b){this.control.onMouseDown(b)};c.prototype.onMouseUp=function(b){this.control.onMouseUp(b)};c.prototype.onMouseMove=function(b){this.control.onMouseMove(b)};c.prototype.setVisible=function(b){};c.prototype.setPosSize=function(b,d,c,g){this.canvas&&this.canvas.resize(c,g)};c.prototype.V225=function(){};c.prototype.resize=function(b,d){this.canvas&&this.canvas.resize(b,d)};c.prototype.V22l=
function(b,d){};c.prototype.V22m=function(b){};return c}();"use strict";CB.namespace("CB.UIElement");
CB.UIElement=function(){var c=function(b,d,c){CB.UIElement.superClass.call(this,b,d,c);this.elDOM&&(this.elDOM.className="cb-button",this.elDOM.addEventListener("mousedown",this.onMouseDown.bind(this)),this.elDOM.addEventListener("mouseup",this.onMouseUp.bind(this)),this.elDOM.addEventListener("mouseover",this.V22n.bind(this)),this.elDOM.addEventListener("mouseleave",this.onMouseLeave.bind(this)))};CB.inherit(c,CB.V1f1);c.prototype.setText=function(b){b.replace(/</g,"(");b.replace(/>/g,")");this.elDOM.innerHTML=
b};c.prototype.V22o=function(b){this.elDOM.disabled=!b};c.prototype.V22p=function(){return!this.elDOM.disabled};c.prototype.V224=function(b){this.elDOM.addEventListener("click",function(d){b(d)})};c.prototype.setBackgroundColor=function(b){this.backgroundColor=b.toString();this.style.backgroundColor=b.toString()};c.prototype.V22q=function(b){this.V22r=b.toString()};c.prototype.V22s=function(b){this.V22t=b.toString()};c.prototype.onMouseDown=function(){this.V22t&&(this.style.backgroundColor=this.V22t)};
c.prototype.onMouseUp=function(){this.V22r?this.style.backgroundColor=this.V22r:this.backgroundColor&&(this.style.backgroundColor=this.backgroundColor)};c.prototype.V22n=function(){this.V22r&&(this.style.backgroundColor=this.V22r)};c.prototype.onMouseLeave=function(){this.backgroundColor&&(this.style.backgroundColor=this.backgroundColor)};c.prototype.setColor=function(b){this.style.color=b.toString()};return c}();"use strict";CB.namespace("CB.Button");
CB.Button=function(){var c=function(b,d,c){b&&(CB.Button.superClass.call(this,"button",b,d),this.elDOM.className=c||"cb-button")};CB.inherit(c,CB.V1f1);c.prototype.V226=function(b){this.style.backgroundImage="url( "+b+")";this.style.backgroundRepeat="no-repeat";this.style.backgroundPosition="center"};c.prototype.V224=function(b){this.elDOM.addEventListener("click",b)};c.prototype.setText=function(b){var d=this.elDOM;d&&("undefined"==typeof d.textContent?d.innerText=b:d.textContent=b)};c.prototype.V22o=
function(b){this.elDOM.disabled=!b};return c}();
CB.CloseButton=function(){var c=function(b,d,c){CB.CloseButton.superClass.call(this,b,d,"cb-CloseButton");this.V228=document.createElement("span");this.V228.style.display="inline-block";"undefined"!=typeof this.V228.textContent?this.V228.textContent="X":this.V228.innerText="X";this.V228.style.textAlign="centered";this.V228.style.verticalAlign="middle";this.V228.style.cursor="default";this.V228.style.fontFamily="Roboto, Helvetica, sans-serif";this.elDOM.appendChild(this.V228);c&&this.V224(c)};CB.inherit(c,
CB.Button);c.prototype.V1ag=function(){var b=Math.round(.8*this.h);this.style.fontSize=b+"px";this.V228.style.fontSize=b+"px";this.V228.style.lineHeight=this.h+"px"};return c}();"use strict";CB.namespace("CB.CheckBox");
CB.CheckBox=function(){var c=function(b,d){CB.CheckBox.superClass.call(this,"form",b,d);this.V22u=this.elDOM.id+"-chk";this.V22v='<input type="checkbox" id='+this.V22u+" />";this.elDOM&&(this.elDOM.innerHTML=this.V22v)};CB.inherit(c,CB.V1f1);c.prototype.V22w=function(b){var d=document.getElementById(this.V22u);d.checked=d.defaultChecked=b};c.prototype.V22x=function(){return document.getElementById(this.V22u).checked};c.prototype.V22o=function(b){document.getElementById(this.V22u).disabled=!b};c.prototype.V22p=
function(){return!document.getElementById(this.V22u).disabled};c.prototype.setText=function(b){b.replace(/</g,"(");b.replace(/>/g,")");this.elDOM&&(this.elDOM.innerHTML=this.V22v+b)};return c}();"use strict";
CB.V22f=function(){var c=function(b,d,c){this.canvas=document.getElementById(b);if(null===this.canvas)throw Error("ID "+b+" not found.");this.ctx=this.canvas.getContext("2d");this.V22y(b);this.V22z(b);this.idDOM=b;this.V230=this.V231();this.control=d.createControl(this,this.canvas.width,this.canvas.height,c);if(d.onControlReady)d.onControlReady(this.control);this.V19y=new CB.Timer(this.V19z.bind(this))};c.prototype.V232=function(){this.V19y.stop();this.el&&null!=this.el.destroy&&this.el.destroy();
this.control.V196()};c.prototype.V8c=function(b,d){this.ctx.beginPath();this.ctx.moveTo(b.x,b.y);this.ctx.lineTo(d.x,d.y);this.ctx.stroke()};c.prototype.V233=function(b,d,c,g){void 0!==g&&(this.ctx.fillStyle=g);void 0!==c&&(this.ctx.font=c+"px sans serif");this.ctx.fillText(d,b.x,b.y)};c.drawEllipse=function(b,d,c,g,f){b.save();b.beginPath();b.translate(d-g,c-f);b.scale(g,f);b.arc(1,1,1,0,2*Math.PI,!1);b.restore();b.lineWidth=5;b.stroke()};c.prototype.resize=function(b,d){5>b&&(b=5);5>d&&(d=5);this.V234||
(this.control&&this.control.beforeResize&&this.control.beforeResize(),this.V19y.runOnce(10,function(){this.V19z(b,d)}.bind(this)))};c.prototype.V235=function(b){this.V234=b};c.prototype.onMouseDown=function(b){var d=this.V236(b);(new CB.V7q).V7r(this.canvas.getBoundingClientRect());this.control.onMouseDown(b,d);return!1};c.prototype.onContextMenu=function(b){var d=this.V236(b);(new CB.V7q).V7r(this.canvas.getBoundingClientRect());if(this.control.onContextMenu)this.control.onContextMenu(b,d);b.preventDefault();
return!1};c.prototype.onMouseUp=function(b){var d=this.V236(b);this.control.onMouseUp(b,d);return!1};c.prototype.onMouseMove=function(b){var d=this.V236(b);this.control.onMouseMove(b,d);return!1};c.prototype.onMouseWheel=function(b){var d=this.V236(b);this.control.onMouseWheel(b,d)};c.prototype.V19h=function(b){var d=this.V236(b);this.V19k(d);this.control.V19h(b,d)};c.prototype.onMouseEnter=function(b){var d=this.V236(b);this.control.onMouseEnter(b,d)};c.prototype.onMouseLeave=function(b){var d=this.V236(b);
this.control.onMouseLeave(b,d)};c.prototype.V237=function(b){if(!this.isDefaultPrevented(b)){b.touches&&(this.V238=b.touches[0].clientX,this.V239=b.touches[0].clientY);var d=this.V236(b);this.control.onMouseDown(b,d)}};c.prototype.V23a=function(b){if(!this.isDefaultPrevented(b)){delete this.V238;var d=this.V236(b);this.control.onMouseUp(b,d)}};c.prototype.V23b=function(b){if(!this.isDefaultPrevented(b)){var d=this.V236(b);this.control.onMouseMove(b,d);delete this.V238}};c.prototype.isDefaultPrevented=
function(b){return void 0!==b.parentEvent&&void 0!==b.parentEvent.browserEvent?b.parentEvent.browserEvent.defaultPrevented:b.defaultPrevented};c.prototype.V23d=function(b){delete this.V238};c.prototype.V23e=function(b){delete this.V238};c.prototype.onKeyDown=function(b){};c.prototype.V23f=function(b){};c.prototype.V23g=function(b){};c.prototype.V236=function(b){return b.touches&&b.touches.length?new CB.V6e(this.V23h(b.touches[0].pageX),this.V23i(b.touches[0].pageY)):b.changedTouches&&b.changedTouches.length?
new CB.V6e(this.V23h(b.changedTouches[0].pageX),this.V23i(b.changedTouches[0].pageY)):new CB.V6e(this.V23h(b.pageX),this.V23i(b.pageY))};c.prototype.V23h=function(b){return(b-this.canvas.getBoundingClientRect().left-window.pageXOffset)*this.V230};c.prototype.V23i=function(b){return(b-this.canvas.getBoundingClientRect().top-window.pageYOffset)*this.V230};c.prototype.V23j=function(b){return this.canvas.getBoundingClientRect().left-window.pageXOffset+b/this.V230};c.prototype.V23k=function(b){return this.canvas.getBoundingClientRect().top-
window.pageYOffset+x/this.V230};c.prototype.zoomToPix=function(b){return this.V230?b/this.V23l:b};c.prototype.pixToZoom=function(b){return this.V230?b/this.V230:b};c.prototype.zoomToPix=function(b){return this.V230?b*this.V230:b};c.prototype.V23m=function(b){var d=this.zoomToPix(b.left),c=this.zoomToPix(b.top);return new CB.V7q(d,c,d+b.w*this.V230,c+b.h*this.V230)};c.prototype.pixToZoomRect=function(b){var d=this.pixToZoom(b.left),c=this.pixToZoom(b.top);return new CB.V7q(d,c,d+b.w/this.V230,c+b.h/
this.V230)};c.prototype.V19k=function(b){var d=this.canvas.getBoundingClientRect();return new CB.V6e(b.getX()-d.left,b.getY()-d.top)};c.prototype.getBoundingClientRect=function(){var b=this.canvas.getBoundingClientRect();return new CB.V7q(b.left,b.top,b.right,b.bottom)};c.prototype.V1dt=function(b){};c.prototype.V22z=function(b){b=CB.$.get(b);b=CB.$(b);CB.V1f1.V1f2("touchstart")&&(b.on("touchstart",this.V237.bind(this)),b.on("touchend",this.V23a.bind(this)),b.on("touchmove",this.V23b.bind(this)),
b.on("touchcancel",this.V23e.bind(this)),b.on("touchleave",this.V23d.bind(this)));CB.V1f1.V1f2("mousedown")&&(b.on("mousedown",this.onMouseDown.bind(this)),b.on("mouseup",this.onMouseUp.bind(this)),b.on("mousemove",this.onMouseMove.bind(this)),b.on("mousewheel",this.onMouseWheel.bind(this)),b.on("mouseenter",this.onMouseEnter.bind(this)),b.on("mouseleave",this.onMouseLeave.bind(this)),b.on("dblclick",this.V19h.bind(this)));if(CB.V1f1.V1f2("contextmenu"))b.on("contextmenu",this.onContextMenu.bind(this));
b.on("keydown",this.onKeyDown.bind(this));b.on("keyup",this.V23f.bind(this));b.on("keypress",this.V23g.bind(this))};c.prototype.V22y=function(b){this.buffer=document.createElement("canvas");this.buffer.width=this.canvas.width;this.buffer.height=this.canvas.height;this.V9r=this.buffer.getContext("2d")};c.prototype.V9t=function(b){this.clipRect=this.clipRect?this.clipRect.V7z(b):b};c.prototype.V9v=function(){this.ctx.save();this.clipRect?CB.V88.clipRect(this.ctx,this.clipRect):CB.V88.clipRect(this.ctx,
new CB.V7q(1,1,this.canvas.width-1,this.canvas.height-1));this.ctx.globalCompositeOperation="copy";try{this.ctx.drawImage(this.buffer,0,0)}catch(b){}this.ctx.restore();delete this.clipRect;this.V23n=!1};c.prototype.V23o=function(){var b=this.ctx.globalCompositeOperation;this.ctx.globalCompositeOperation="copy";this.ctx.drawImage(this.buffer,0,0);this.ctx.globalCompositeOperation=b;this.V23n=!1;delete this.clipRect};c.prototype.V9s=function(b){this.clipRect=this.clipRect?this.clipRect.getUnion(b):
b};c.prototype.V1c6=function(){this.V23p&&window.cancelAnimationFrame(this.V23p);this.V23q&&window.cancelAnimationFrame(this.V23q)};c.prototype.V19g=function(b){this.V23r=b};c.prototype.V1a1=function(b,d){if(!(this.V23r||1>this.canvas.width||1>this.canvas.height))if(b){if(this.V9s(b),!this.V23n||d)this.V23n=!0,this.V23p=window.requestAnimationFrame(this.V9v.bind(this))}else if(!this.V23n||d)this.V23n=!0,d&&window.cancelAnimationFrame(this.V23q),this.V23p&&window.cancelAnimationFrame(this.V23p),this.clipRect=
new CB.V7q(1,1,this.canvas.width,this.canvas.height),this.V23q=window.requestAnimationFrame(this.V9v.bind(this))};c.prototype.V23s=function(){this.control.V198(this.V9r)};c.prototype.V19i=function(){this.control&&this.control.drawWood&&this.control.drawWood(this.V9r)};c.prototype.V19z=function(b,d){b=Math.floor(b);d=Math.floor(d);this.V23t(b,d)||(this.clipRect=this.V23u=new CB.V7q(0,b,0,d),this.V230=1,this.V23v(this.canvas,b,d),this.V23v(this.buffer,b,d),this.control&&this.control.resize(b,d))};c.prototype.V23v=
function(b,d,c){b.width=d;b.height=c;b.style.width=d+"px";b.style.height=c+"px"};c.prototype.V23t=function(b,d){return 1!=this.V231()?(this.clipRect=this.V23u=new CB.V7q(0,b,0,d),this.V230=this.V231(),this.V23w(this.canvas,this.ctx,b,d,this.V230),this.V23w(this.buffer,this.V9r,b,d,this.V230),this.control.resize(b*this.V230,d*this.V230),!0):!1};c.prototype.V231=function(){var b=window.devicePixelRatio,b=Math.min(3,b);CB.V5t.V75(b);return b};c.prototype.V23w=function(b,d,c,g,f){b.width=Math.round(c*
f);b.height=Math.round(g*f);b.style.width=c+"px";b.style.height=g+"px"};c.prototype.V23x=function(){return this.ctx.webkitBackingStorePixelRatio||this.ctx.mozBackingStorePixelRatio||this.ctx.msBackingStorePixelRatio||this.ctx.oBackingStorePixelRatio||this.ctx.backingStorePixelRatio||1};c.prototype.V74=function(){alert(0);return window.devicePixelRatio};c.prototype.hide=function(){this.canvas.style.visibility="hidden"};c.prototype.show=function(){this.canvas.style.visibility="visible"};c.prototype.requestRedraw=
function(){this.V23r||(delete this.clipRect,this.control&&this.control.draw(this.V9r),this.V1a1(new CB.V7q(1,1,this.canvas.width-1,this.canvas.height-1),!0))};return c}();
(function(){for(var c=0,b=["ms","moz","webkit","o"],d=0;d<b.length&&!window.requestAnimationFrame;++d)window.requestAnimationFrame=window[b[d]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[d]+"CancelAnimationFrame"]||window[b[d]+"CancelRequestAnimationFrame"];for(d=0;d<b.length&&!window.cancelAnimationFrame;++d)window.cancelAnimationFrame=window[b[d]+"CancelAnimationFrame"]||window[b[d]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,
d){var f=(new Date).getTime(),h=Math.max(0,16-(f-c)),l=window.setTimeout(function(){b(f+h)},h);c=f+h;return l});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(b){clearTimeout(b)})})();"use strict";
CB.Vam=function(){var c=function(){window.localStorage?this.V1s7=window.localStorage:window.sessionStorage&&(this.V1s7=window.sessionStorage)};c.prototype.save=function(b,d){d&&void 0!==this.V1s7&&(this.V1s7[b]=JSON.stringify(d))};c.prototype.load=function(b){if(void 0!==this.V1s7&&this.V1s7[b]&&"undefined"!==this.V1s7[b])return JSON.parse(this.V1s7[b])};return c}();"use strict";
CB.V1ke=function(){var c=1,b=function(b,e,g){this.audio=document.createElement("audio");var f=this.V23z();this.ok=!1;f?(this.url=b+f,this.audio.addEventListener("canplay",this.V240.bind(this),!1),this.audio.addEventListener("canplaythrough",this.V241.bind(this),!1),this.audio.addEventListener("ended",this.V242.bind(this),!1),this.audio.addEventListener("error",this.V8r.bind(this),!1),this.audio.addEventListener("abort",this.V8r.bind(this),!1),this.audio.src=b+f,this.V23y=e,this.V244=this.V243=!1,
this.uniqueId=c++,g?this.audio.preload="none":(this.audio.preload="metadata",this.audio.load(),this.ok=!0)):this.url="!format!"};b.prototype.load=function(){this.audio.load();this.ok=!0};b.prototype.toString=function(){return this.url};b.prototype.play=function(){this.audio.play()};b.prototype.pause=function(){this.audio.pause()};b.prototype.V240=function(){};b.prototype.V241=function(){};b.prototype.V242=function(){this.V23y&&this.V23y(this.uniqueId)};b.prototype.V8r=function(){};b.prototype.V23z=
function(){if(this.audio.canPlayType){var b=this.audio.canPlayType("audio/mpeg");if(""!=b)return".mp3";b=this.audio.canPlayType("audio/ogg");if(""!=b)return".ogg"}return""};return b}();
CB.V1j0=function(){var c=function(){this.queue=[];this.Vpi=0};c.prototype.push=function(b){if(b){var d=b;"string"==typeof b&&(d=new CB.V1ke(b));d.V23y=this.V245.bind(this);d.ok&&this.queue.push(d);1==this.queue.length&&d.play()}};c.prototype.Vsa=function(){this.V246&&this.V246.pause();for(var b=0;b<this.queue.length;b++)this.queue[b]&&this.queue[b].pause();this.queue=[];delete this.V246};Object.defineProperty(c.prototype,"length",{get:function(){return this.queue.length},set:function(b){this.queue.length>
b&&this.queue.splice(0,this.queue.length-b)},enumerable:!0});c.prototype.V245=function(b){for(var d=0;d<this.queue.length;d++)if(this.queue[d]&&this.queue[d].uniqueId==b){d<this.queue.length-1&&this.queue[d+1].play();this.queue.splice(d,1);break}};return c}();"use strict";
CB.V247=function(){var c=function(b,d){this.control=d.createControl3D(b,0,0);if(d.onControlReady)d.onControlReady(this.control);this.V22z(b);this.V19y=new CB.Timer(this.V19z.bind(this))};c.prototype.V248=function(b,d){this.control.V248(b,d)};c.prototype.dispose=function(){this.control.dispose()};c.prototype.V8c=function(b,d){};c.prototype.V233=function(b,d,c,g){};c.prototype.resize=function(b,d){this.width=b;this.height=d;this.V234||this.V19y.runOnce(100,function(){this.V19z(b,d)}.bind(this))};c.prototype.V249=
function(){};c.prototype.V19z=function(b,d){b=Math.floor(b);d=Math.floor(d);this.control.resize(b,d)};c.prototype.V19g=function(b){this.V23r=b};c.prototype.V235=function(b){this.V234=b};c.prototype.V237=function(b){this.control.V237(b)};c.prototype.V23a=function(b){this.control.V23a(b)};c.prototype.V23b=function(b){this.control.V23b(b)};c.prototype.V23e=function(b){this.control.V23e(b)};c.prototype.V23d=function(b){this.control.V23d(b)};c.prototype.onMouseDown=function(b){this.control.onMouseDown(b)};
c.prototype.onMouseUp=function(b){this.control.onMouseUp(b)};c.prototype.onMouseMove=function(b){this.control.onMouseMove(b)};c.prototype.onMouseWheel=function(b){};c.prototype.V19h=function(b){this.V19k(b);this.control.V19h(b)};c.prototype.onMouseEnter=function(b){this.control.onMouseEnter(b)};c.prototype.onMouseLeave=function(b){this.control.onMouseLeave(b)};c.prototype.onKeyDown=function(b){};c.prototype.V23f=function(b){};c.prototype.V23g=function(b){};c.prototype.V19k=function(b){var d=this.canvas.getBoundingClientRect();
return new CB.V6e(b.getX()-d.left,b.getY()-d.top)};c.prototype.getBoundingClientRect=function(){var b=this.canvas.getBoundingClientRect();return new CB.V7q(b.left,b.top,b.right,b.bottom)};c.prototype.V1dt=function(b){};c.prototype.V22z=function(b){CB.V1f1.V1f2("touchstart")&&(b.canvas.addEventListener("touchstart",this.V237.bind(this),!1),b.canvas.addEventListener("touchend",this.V23a.bind(this),!1),b.canvas.addEventListener("touchmove",this.V23b.bind(this),!1),b.canvas.addEventListener("touchcancel",
this.V23e.bind(this),!1),b.canvas.addEventListener("touchleave",this.V23d.bind(this),!1));b.canvas.addEventListener("mousedown",this.onMouseDown.bind(this),!1);b.canvas.addEventListener("mousemove",this.onMouseMove.bind(this),!1);b.canvas.addEventListener("mouseup",this.onMouseUp.bind(this),!1)};c.prototype.V9t=function(b){this.clipRect=this.clipRect?this.clipRect.V7z(b):b};c.prototype.V9s=function(b){this.clipRect=this.clipRect?this.clipRect.getUnion(b):b};c.prototype.V1a1=function(b,d){};c.prototype.V23s=
function(){this.control.V198(this.ctx);this.control.V198(this.V9r)};c.prototype.V19i=function(){this.control.draw(this.ctx);this.control.draw(this.V9r)};c.prototype.requestRedraw=function(){this.V249()};c.prototype.pixToZoom=function(b){return this.V230?b/this.V230:b};c.prototype.zoomToPix=function(b){return this.V230?b*this.V230:b};c.prototype.V23m=function(b){var d=this.zoomToPix(b.left),c=this.zoomToPix(b.top);return new CB.V7q(d,c,d+b.w*this.V230,c+b.h*this.V230)};c.prototype.pixToZoomRect=function(b){var d=
this.pixToZoom(b.left),c=this.pixToZoom(b.top);return new CB.V7q(d,c,d+b.w/this.V230,c+b.h/this.V230)};return c}();
(function(){for(var c=0,b=["ms","moz","webkit","o"],d=0;d<b.length&&!window.requestAnimationFrame;++d)window.requestAnimationFrame=window[b[d]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[d]+"CancelAnimationFrame"]||window[b[d]+"CancelRequestAnimationFrame"];for(d=0;d<b.length&&!window.cancelAnimationFrame;++d)window.cancelAnimationFrame=window[b[d]+"CancelAnimationFrame"]||window[b[d]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,
d){var f=(new Date).getTime(),h=Math.max(0,16-(f-c)),l=window.setTimeout(function(){b(f+h)},h);c=f+h;return l});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(b){clearTimeout(b)})})();"use strict";
CB.V1ro=function(){var c=function(){this.V24a=0;this.queue=[]};c.prototype={getLength:function(){return this.queue.length-this.V24a},empty:function(){return 0==this.queue.length},push:function(b){this.queue.push(b)},pop:function(){if(0!=this.queue.length){var b=this.queue[this.V24a];2*++this.V24a>=this.queue.length&&(this.queue=this.queue.slice(this.V24a),this.V24a=0);return b}},front:function(){return 0<this.queue.length?this.queue[this.V24a]:void 0}};return c}();"use strict";
CB.Vac={Vaf:function(c,b){for(var d=0,e=0,g=0,f=0;f<b.length;f++){var h=b[f].charCodeAt(0);if(63>h||126<h)return 1;h-=63;2>=e?(g|=h<<2-e,e+=6,8<=e&&(e-=8,c[d++]=g&255,g=0)):(e-=2,g|=h>>e,c[d++]=g&255,g=h<<8-e)}return d},Vad:function(c,b){var d="";if(0<b){for(var e=[],g=0,f=0,h=0;f<b;)2>=h?(e[g++]=63+(c[f]>>2-h&63)&255,h+=6,8<=h&&(f++,h-=8)):(h-=2,e[g]=c[f]<<h&63,f++,f<b?e[g]|=c[f]>>8-h&63:h=0,e[g++]+=63);for(f=e[g]=0;f<g;f++)d+=String.fromCharCode(e[f])}else d="";return d},V24b:function(c){for(var b=
"",d,e,g,f,h,l,q=0;q<c.length;)d=c[q++],e=c[q++],g=c[q++],f=d>>2,d=(d&3)<<4|e>>4,h=(e&15)<<2|g>>6,l=g&63,isNaN(e)?h=l=64:isNaN(g)&&(l=64),b=b+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(h)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(l);return b},V1i8:function(c,b){var d=this.V24b(c);
return"data:"+b+";charset=utf-8;base64,"+d}};"use strict";CB.V24c={V24d:1,V24e:2,V24f:3};CB.V24g=function(){var c={MATE_VALUE:3E4,MATE_THRESHOLD:28E3,MOVE_VALUE:28E3,MOVE_THRESHOLD:26E3};c.V24h=-c.MATE_VALUE;c.MAX_VALUE=c.MATE_VALUE;c.V24i=function(b){return 0>b?-c.MATE_VALUE-b:c.MATE_VALUE-b};c.V24j=function(b){return b>-c.MATE_THRESHOLD||b<c.MATE_THRESHOLD?-1:0>b?b-c.MATE_THRESHOLD:c.MATE_THRESHOLD-b};return c}();
CB.V24k=function(){var c={EV_TOTALLY_WINNING:200,EV_WINNING:140,EV_ADVANTAGE:70,EV_SLIGHT_ADVANTAGE:25};c.EV_TOTALLY_LOSING=-c.EV_TOTALLY_WINNING;c.EV_LOSING=-c.EV_WINNING;c.EV_DISADVANTAGE=-c.EV_ADVANTAGE;c.EV_SLIGHT_DISADVANTAGE=-c.EV_SLIGHT_ADVANTAGE;c.getGlyph=function(b){return b>=c.EV_WINNING?CB.Vvu.Vwc:b>=c.EV_ADVANTAGE?CB.Vvu.Vwa:b>c.EV_SLIGHT_ADVANTAGE?CB.Vvu.Vw8:b>=c.EV_SLIGHT_DISADVANTAGE?CB.Vvu.Vw6:b>c.EV_DISADVANTAGE?CB.Vvu.Vw9:b>c.EV_LOSING?CB.Vvu.Vwb:CB.Vvu.Vwd};return c}();
CB.V24l={V24m:"Clear Hash",V24n:"MultiPV",V24o:"Ponder"};
CB.Vs9=function(){var c={getPosString:function(b){var c="position startpos ";b.isNormalInit()||(c="position fen "+b.getStartPos().toFEN());b=b.getCurLineCut();0<b.length&&(c+=" moves ");for(var g=0;g<b.length;++g)c+=b[g].toString()+" ";return c},getGoString:function(b){var c=new StringBuilder;c.append("go ");b=b||{};b.depth?c.appendFormat("depth {0} ",b.depth):b.moveTime&&c.appendFormat("movetime {0} ",Math.round(b.moveTime));b.wTime&&c.appendFormat("wtime {0} ",Math.round(b.wTime));b.bTime&&c.appendFormat("btime {0} ",
Math.round(b.bTime));(b.infinite||ObjUtil.isEmpty(b))&&c.appendFormat("infinite ");return c.toString()},getSetOptionString:function(b,c){var g=String.formatEx("setoption name {0}",b);"undefined"!==typeof c&&(g+=String.formatEx(" value {0}",c));return g}},b=function(d,c,g,f){this.url=d;this.worker=null;this.V24p=!1;this.V24q=g||null;this.name=f;this.Vs5=c;this.V24r=[];this.cur=null;this.lines=[];this.meta={name:"",author:""};this.V24s=!1;this.Vs5&&(this.V24t=setInterval(this.V24u.bind(this),b.POOL_TIMEOUT));
this.V24v=CB.Vs9._createPreDefaultOptions();this.id=++b.engineCount};b.engineCount=0;b._createPreDefaultOptions=function(){var b={};b[CB.V24l.V24n]=1;b[CB.V24l.V24o]="false";return b};b.prototype.V24w=function(){return this.V24q};b.prototype.setTag=function(b){this.V24q=b};b.prototype.V24x=function(){CBDebug.assert(null!=this.worker);CBDebug.assert(this.V24p);this.V24p=!1;this.worker.terminate();this.worker=null;this.V24y=!1};b.prototype.V24z=function(b){b=b.split(" ");var c=CB.Vei.fromString(b[1]),
g;"ponder"==b[2]&&(g=CB.Vei.fromString(b[3]));this.V24p=!1;this.fireOnBestMove(this,{move:c,ponder:g})};b.prototype.V250=function(b){for(var c=b.split(" "),g=b=null,f=null,h=1,l=null,q=null,r=null,t=null,w=null,z=null,B=CB.V24c.V24f,v=!1,y=1;y<c.length;++y)switch(c[y]){case "depth":b=parseInt(c[++y]);break;case "seldepth":g=parseInt(c[++y]);break;case "nps":q=parseInt(c[++y]);break;case "nodes":r=parseInt(c[++y]);break;case "score":var C=c[++y],f=parseInt(c[++y]);switch(C){case "mate":v=!0}break;
case "time":t=parseInt(c[++y]);break;case "currmovenumber":z=parseInt(c[++y]);break;case "currmove":C=c[++y];w=CB.Vei.fromString(C);break;case "lowerbound":B=CB.V24c.V24d;break;case "upperbound":B=CB.V24c.V24e;break;case "multipv":h=parseInt(c[++y]);break;case "pv":for(l=[],++y;y<c.length;++y)if(C=c[y],CB.Vei.isValidString(C))l.push(CB.Vei.fromString(C));else{--y;break}}g=g||b;b&&this.fireOnInfo(this,b,g,r,q,t);w&&this.fireOnCurMove(this,z,w);l&&(this.lines[h-1]=l,c=ObjUtil.clone(l),this.fireOnLine(this,
b,g,B,v,f,h,c,{handicap:0,analysis:this.V251&&this.V251.infinite}))};b.g_regexMeta=/^id (\w+) (.*)$/i;b.prototype.V252=function(d){this.V24s||(d=b.g_regexMeta.exec(d))&&d.length&&(this.meta[d[1]]=d[2])};b.prototype.V253=function(b){this.V24s||(this.V24s=!0,this.fireOnUCIInfo(this))};b.prototype.V254=function(b){"readyok"!==b&&("uciok"===b?this.V253():b.startsWith("id")?this.V252(b):b.startsWith("option")||(b.startsWith("bestmove")?this.V24z(b):b.startsWith("info")&&this.V250(b)))};b.prototype.V255=
function(b){this.V24y=!1;this.V254(b.data)};b.prototype.V1g5=function(b){try{this.worker&&this.worker.postMessage(b)}catch(c){CB.V46("Post",c)}};b.POOL_TIMEOUT=2E3;b.prototype.V24r=[];b.prototype.V256=function(){if(0==this.V24r.length)try{return new Worker(this.url)}catch(b){alert("Engine: "+b)}return this.V24r.pop()};b.prototype.V24u=function(){this.V24r.length>=this.Vs5||this.V257()};b.prototype.V257=function(){try{CB.Vs9.V258?this.V259(function(b){this.V24r.push(b)}.bind(this)):this.V24r.push(new Worker(this.url))}catch(b){CB.V46("Engine "+
this.url,b)}};b.prototype.V25a=function(){try{if(this.worker=this.V256())this.worker.onmessage=this.V255.bind(this),this.V1g5("uci"),this.V1g5("isready"),this.V25b()}catch(b){CB.V46("Start this.url",b)}};b.prototype.go=function(b,e){this.V251=e||{infinite:!0};this.stop();this.V24p=!0;this.fireOnSearchStart();if(!this.worker&&!this.V24y){this.V24y=!0;if(CB.Vs9.V258){this.V259(function(b){return function(d){this.V24y=!1;this.worker=d;this.worker.onmessage=this.V255.bind(this);this.V1g5("uci");this.V1g5("isready");
this.V25b();d=c.getPosString(b);var e=c.getGoString(this.V251);this.cur=ObjUtil.clone(b.getCurPos());this.lines=[];this.V1g5(d);this.V1g5(e)}.bind(this)}.call(this,b));return}this.V25a()}var g=c.getPosString(b),f=c.getGoString(this.V251);this.cur=ObjUtil.clone(b.getCurPos());this.lines=[];this.V1g5(g);this.V1g5(f)};b.prototype.getCurPos=function(){return this.cur};b.prototype.V25c=function(){return this.lines};b.prototype.getBestMove=function(){return 0==this.lines.length||0==this.lines[0].length?
null:this.lines[0][0]};b.prototype.stop=function(){this.worker&&this.V24p&&this.V24x()};b.prototype.getName=function(){return this.meta.name};b.prototype.isCalculating=function(){return this.V24p};b.prototype.V25d=function(){};b.prototype.newGame=function(){this.worker&&!this.V24p&&this.V1g5("ucinewgame");this.fireOnNewGame()};b.prototype.dispose=function(){if(this.Vs5){if(this.V24r.length)for(var b=0;b<this.V24r.length;++b)this.V24r[b].terminate();clearInterval(this.V24t)}this.removeAllListeners()};
b.prototype.exit=function(){this.stop();this.dispose();this.fireOnExit()};b.prototype.V24v=null;b.prototype.V25e=function(b,e){this.V24v[b]=e;this.worker&&this.V1g5(c.getSetOptionString(b,e))};b.prototype.V25f=function(b){return this.V24v[b]};b.prototype.setMultiPV=function(b){this.V25e(CB.V24l.V24n,b)};b.prototype.getMultiPV=function(){return this.V25f(CB.V24l.V24n)};b.prototype.V25g=function(){this.V25e(CB.V24l.V24m)};b.prototype.V25h=function(b){this.V25e(CB.V24l.V24o,b?"true":"false")};b.prototype.V25i=
function(){return!1};b.prototype.V25b=function(){for(var b in this.V24v)this.V24v.hasOwnProperty(b)&&this.V1g5(c.getSetOptionString(b,this.V24v[b]))};b.prototype.V259=function(b){$.ajax({url:"https://pgn.chessbase.com/common/chess/engine/webasm/fritzajax.js",type:"GET",data:{},async:!0,cache:!0,processData:!1,success:function(c){c=new Blob([c],{type:"application/javascript"});c=new Worker(URL.createObjectURL(c));b(c)}})};V3bf.initForListeners(b);V3bf.addEvent(b,"Line");V3bf.addEvent(b,"LosingLine");
V3bf.addEvent(b,"CurMove");V3bf.addEvent(b,"CurLine");V3bf.addEvent(b,"Info");V3bf.addEvent(b,"BestMove");V3bf.addEvent(b,"UCIInfo");V3bf.addEvent(b,"NewGame");V3bf.addEvent(b,"SearchStart");V3bf.addEvent(b,"Exit");V3bf.addEvent(b,"Threat");return b}();"use strict";
CB.AnalysisEngine=function(){var c={},b=function(d){d=d||{};this.options=ObjUtil.copyTo(c,d,!0);this.Vs5=0;this.Vs8();this.id=++b.engineCount};b.engineCount=0;b.prototype.destroy=function(){};b.prototype.Vs8=function(){this.engine=new CB.Vs9(V3c6.config.getEngineUrl()[0],this.Vs5,1,"Analysis");this.V25j=this.engine.addOnLineListener(this.V25k.bind(this))};b.prototype.Vnu=function(){};b.prototype.Vsp=function(b){this.V25l();this.kernel=b;this.engine.setMultiPV(this.V25m());this.engine.go(this.kernel.game,
{infinite:!0});this.engine.fireOnThreat(!1);this.Vtm=!0};b.prototype.Vt5=function(){this.engine.stop();this.Vtm=!1};b.prototype.Vt6=function(){this.V25l()};b.prototype.dispose=function(){this.engine.exit()};b.prototype.Vt4=function(b){b.getMarkedSquaresOnButtonDown&&(b.clickHintTimer||(b.clickHintTimer=new CB.Timer),b.kernel.boardWin.fnMarkSquaresOnButtonDown=b.getMarkedSquaresOnButtonDown.bind(b),b.startClickHintTimer&&(b.kernel.boardWin.fnSquareClick=b.startClickHintTimer.bind(b)),b.kernel.boardWin.fnSquareChangeInMouseMove=
function(){b.clickHintTimer.stop()}.bind(b),b.kernel.boardWin.fnSquareRelease=function(){b.clickHintTimer.stop()}.bind(b),b.idOnLineListener||(b.idOnLineListener=this.addOnLineListener(b.onAnalysisLine.bind(b)),b.kernel.boardWin.idOnLineListener||(b.kernel.boardWin.idOnLineListener=this.addOnLineListener(b.kernel.boardWin.refreshMarkedSquares.bind(b.kernel.boardWin)))))};b.prototype.Vt1=function(b){b.clickHintTimer&&b.clickHintTimer.stop();b.kernel.boardWin&&(b.kernel.boardWin.fnSquareClick=null,
b.kernel.boardWin.fnMarkSquaresOnButtonDown=null,this.removeOnLineListener(b.kernel.boardWin.idOnLineListener),b.kernel.boardWin.idOnLineListener=null);this.removeOnLineListener(b.idOnLineListener);b.idOnLineListener=null};b.prototype.V25m=function(){return this.V25n?this.V25n:this.kernel.game.getCurPos().V3b8().length};b.prototype.Vtl=function(b){var c=[],g=CB.AnalysisEngine.linesToArray(this.V25o);g.sort(function(b,d){return d.getEval()-b.getEval()});if(!g.length)return c;var f=g[0].getEval();g.forEach(function(g){var l=
g.getEval();g.getMove().from==b&&c.push({sq:g.getMove().to,clr:this.V25p(l,f),txt:f-l})}.bind(this));return c};b.prototype.V25p=function(b,c){if(23E3<Math.abs(b))return new CB.HSLColor(0,0,0,.6);for(var g=c-b,f=.55+.15,f=[[2E4,0,95,55,1],[1E3,3,95,50,.9],[700,4,95,48,.9],[400,12,95,47,.9],[300,14,95,46,.9],[250,18,95,46,f],[200,19,95,45,.9],[170,20,90,60,.9],[140,24,90,60,.9],[120,28,90,60,.9],[100,30,90,60,.9],[90,34,90,45,.9],[80,38,90,45,f],[70,46,90,45,f],[60,50,90,45,f],[50,65,90,45,f],[40,70,
90,45,.55],[30,75,90,45,.55],[20,80,90,45,.55],[15,90,90,45,.55],[10,100,90,45,.55],[7,110,90,45,.55],[5,115,90,42,.7],[0,120,90,42,.74]],h=0;h<f.length;h++)if(g>=f[h][0])return new CB.HSLColor(f[h][1],f[h][2],f[h][3],f[h][4]);return new CB.HSLColor(CB.HSLColor.GREEN,90,40,.6)};b.prototype.V25l=function(){this.V25o={};this.V25q={};this.V25r=[];this.V25s=[];this.V25t=1;this.V25u=null};b.prototype.V25k=function(b,c,g,f,h,l,q,r){if(f==CB.V24c.V24f){if(c>this.V25t){this.V25v=0;this.V25w(ObjUtil.clone(this.V25o),
this.V25t);if(this.V25t&&this.V25s[this.V25t].length){var t,w;1<this.V25s[this.V25t].length&&(t=this.V25s[this.V25t][1],w=this.V25s[this.V25t][1].getEval());this.fireOnLine(this.V25t,this.V25s[this.V25t][0].getEval(),this.V25s[this.V25t][0],w,t)}this.V25t=c;(18<=c||(CB.V5t.V64()||CB.V5t.V6c())&&8<=c)&&this.Vt5()}h&&(l=CB.V24g.V24i(l));b=new CB.V25x(r,l);this.V25o[b.key()]=b}};b.prototype.V25w=function(b,c){this.V25r[c]=b;this.V25s[c]=CB.AnalysisEngine.linesToArray(b)};b.linesToArray=function(b){var c=
[],g;for(g in b)b.hasOwnProperty(g)&&c.push(b[g]);c.sort(function(b,d){return d.getEval()-b.getEval()});for(b=0;b<c.length;b++)c[b].lineNumber=b;c.getNLinesInEvalRange=function(b){for(var d=0,c=this[0].getEval(),e=1;e<this.length&&!(c-this[e].getEval()>b);e++)d++;return d};c.hasClearlyBest=function(b){return 1==c.length?!0:c[0].getEval()-c[1].getEval()>=b};return c};b.prototype.getBestMove=function(){if(3<this.V25t){var b=CB.AnalysisEngine.linesToArray(this.V25o);b.sort(function(b,d){return d.getEval()-
b.getEval()});return b[0].getMove()}};V3bf.initForListeners(b);V3bf.addEvent(b,"Line");return b}();"use strict";
CB.V1fs=function(){var c=function(b){this.val=b};c.V1ft=function(b){return 2E4<b?lm.WHITE_MATES:420<b?lm.WHITE_CLEARLY_WINNING:350<b?lm.WHITE_WINNING:250<b?lm.WHITE_DECISIVE:130<b?lm.WHITE_CLEARLY_BETTER:80<b?lm.WHITE_BETTER:40<b?lm.WHITE_SLIGHTLY:22<b?lm.WHITE_EDGE:-2E4>b?lm.BLACK_MATES:-420>b?lm.BLACK_CLEARLY_WINNING:-350>b?lm.BLACK_WINNING:-250>b?lm.BLACK_DECISIVE:-130>b?lm.BLACK_CLEARLY_BETTER:-80>b?lm.BLACK_BETTER:-40>b?lm.BLACK_SLIGHTLY:-22>b?lm.BLACK_EDGE:lm.EQUAL_POS};c.prototype.toString=
function(){return c.V1ft(this.val)};return c}();CB.V25x=function(){var c=function(b,d){this.line=b;this.eval=d};c.prototype.getEval=function(){return this.eval};c.prototype.getLine=function(){return this.line};c.prototype.length=function(){return this.line.length};c.prototype.getMove=function(b){return this.line[b||0]};c.prototype.key=function(){return this.getMove().toString()};c.prototype.toString=function(){return String.formatEx("{eval}: {line}",this)};return c}();"use strict";
CB.EngineLinesElement=function(){function c(b){if(b.handicap){var d=CB.V26q.V26r(b.handicap);return String.formatEx("Handicap: {0}, {1} {2} {3}={4}s",d,lm.DEPTH,b.depth,lm.TIME,idiv(b.totalTime,1E3))}return String.formatEx(lm.ENG_SEARCH_INFO_FMT,b.depth,b.maxDepth,idiv(b.nps,1E3),idiv(b.totalTime,1E3))}function b(b){var d=CB.$(b.target),c=d.data("pv"),c=c.trim(),c=c.split(" ").map(CB.Vei.fromString),d=d.parent("[data-pos]"),d=CB.$(d),d=new CB.Position(d.data("pos")),c=new CB.Game(d,c),c=CB.V12j.V12k(c);
b.dataTransfer.setData("text",c)}function d(d,e,h){if(CB.$(".pv",d)){d.on("dragstart",b);CB.$(".pv",d).text(e.pv.lineStr);CB.$(".pvnum",d).text(e.num);if(e.evalStr&&e.handicap)CB.$(".evStr",d).text(e.evalStr);else{var l=new StringBuilder;CB.NotaElement.V1ga(e.symbol,l,"cbspec-glyph");h=l.toString();CB.$(".symbol",d).html(h)}d.data("pvnum",e.num);d.data("depth",e.depth);d.data("mv",e.pv[0].toString());l=new StringBuilder;e.handicap?l.appendFormat("{0}",e.pv[0]):e.pv.forEach(function(b){l.appendFormat("{0} ",
b)});d.data("pv",l.toString());d.removeClass("outdated");CB.$(".engine-info-text").hide();e=c(e);CB.$(".data",d).text(e)}}var e=function(b){this.V16h=b||0;this.V16l()};e.V25y=e.V25z="<div class='line'><div class='nota'><span class='pvnum'></span><span class='symbol'></span><span class='pv'></span></div><div class='data'></div><div class='evStr'></div></div>";e.V21n={scrollLines:!0};e.prototype.V260=function(b){return String.f("<div class='lines-container' id='lines-container-{0}'><div class='engine-lines' id='engine-lines-{0}' ><div class='data-common' id='data-common-{0}'></div></div></div><div class='engine-info-text' id='engine-info-text-{0}'></div>",
b)};e.prototype.V16m=function(b,d){this.options=ObjUtil.copyTo(e.V21n,d||{},!0);this.el=b;CB.$(this.el).html(this.V260(this.V16h));var c=CB.$("#engine-lines-"+this.V16h,this.el);this.V261=c.single();this.V262=CB.$("#lines-container-"+this.V16h,this.el).single();CB.$("#data-common-"+this.V16h).html(this.options.V263||"<br/>"+lm.LOADING_ENGINE);c.on("click",this.V264.bind(this));this.V1ex=this.V262};e.prototype.V16l=function(){this.V25t=this.V96=this.lastTime=this.V266=this.V265=null};e.prototype.setEngine=
function(b){if(this.engine){var d=this.engine;d.engine&&(d=d.engine);this.V25j&&(d.removeOnLineListener(this.V25j),d.removeOnLosingLineListener(this.V267),d.removeOnInfoListener(this.V268),d.removeOnNewGameListener(this.V269),d.removeOnSearchStartListener(this.V26a),d.removeOnExitListener(this.V26b),d.removeOnThreatListener(this.V26c))}if(this.engine=b)d=this.engine,d.engine&&!d.addOnLosingLineListener&&(d=d.engine),d&&d.addOnLineListener&&(this.V25j=d.addOnLineListener(this.V26d.bind(this)),this.V267=
d.addOnLosingLineListener(this.V26e.bind(this)),this.V268=d.addOnInfoListener(this.V26f.bind(this)),this.V269=d.addOnNewGameListener(this.V16n.bind(this)),this.V26a=d.addOnSearchStartListener(this.V26g.bind(this)),this.V26b=d.addOnExitListener(this.onExit.bind(this)),this.V26c=d.addOnThreatListener(this.V26h.bind(this)))};e.prototype.V264=function(b){b.preventDefault();var d=b.target;b=CB.$(d);CB.$.is(d,".line")||(d=b.parent(".line"));d&&(b=CB.$(d).data("mv"),CB.Vei.isValidString(b)&&(b=CB.Vei.fromString(b),
this.fireOnMoveEntered(b)))};e.prototype.clear=function(){CB.$(".line",this.V261).remove();CB.$("#data-common-"+this.V16h,this.V261).empty()};e.prototype.V16n=function(){this.clear()};e.prototype.displayInfo=function(b,d){this.clear();this.V26i();this.V26j(b,d)};e.prototype.V26g=function(b){this.clear();this.V26i();this.V26j("Calculating ...","startSearch")};e.prototype.onExit=function(b){this.clear();this.V26i();this.V26j("Engine Stopped.","engineStopped")};e.prototype.V26h=function(b){b?$("#engine-lines-"+
this.V16h).addClass("cbEngineThreat"):$("#engine-lines-"+this.V16h).removeClass("cbEngineThreat")};e.prototype.V26f=function(b,d,c,e,q,r){this.V265=q||this.V265;this.V266=e||this.V266;this.lastTime=r||this.lastTime};e.prototype.V26d=function(b,d,c,e,q,r,t,w,z){this.V26k();this.V26l();if(e===CB.V24c.V24f){e=b.getMultiPV();CB.$(this.V261).data("lines",e);e=1<e;b=b.getCurPos();var B=b.toFEN();CB.$(this.V261).data("pos",B);(this.V96&&!b.equals(this.V96)||this.V25t&&this.V25t>d)&&this.clear();e||this.options.scrollLines||
this.clear();e&&1==t&&CB.$(".line",this.V261).addClass("outdated");this.V96=b;this.V25t=d;CB.Game.Vi2(b,w);var v=new CB.Vie(lm.NOTA_LOCALIZATION);z.analysis||(w=w.slice(0,1));var B=v.Vio(b,w),y=r;q?(0>y&&(y=-y),y=v.Vin().strMate+y):(b.isWTM()||(y=-y),y=(y/100).toFixed(2));B=z.analysis?"("+y+") "+B:" "+B;c={id:"pv",line:w,pv:w,eval:r,evalStr:CB.V1fs?CB.V1fs.V1ft(100*y)+".":"",nps:this.V265,depth:d,maxDepth:c,totalTime:this.lastTime,handicap:z.handicapStyle,analysis:z.analysis,num:t};c.pv.lineStr=B;
b.isBTM()&&(r=-r);r=CB.V24k.getGlyph(r);r=V3bq.getText(r);c.symbol=r;this.V26m(c);this.V26n(c,e,d);e||this.V26o()}};e.prototype.V26e=function(b,d){this.V26p();this.V26j("Your Chance!","findStrong")};e.prototype.V26o=function(){this.V1ex&&(this.V1ex.scrollTop=this.V1ex.scrollHeight)};e.prototype.V26m=function(b){CB.$("#data-common-"+this.V16h,this.V261).text(c(b))};e.prototype.V26p=function(){CB.$("#engine-info-text-"+this.V16h).show()};e.prototype.V26l=function(){CB.$("#engine-info-text-"+this.V16h).hide()};
e.prototype.V26k=function(){CB.$("#engine-info-text-"+this.V16h).hide();CB.$("#lines-container-"+this.V16h).show()};e.prototype.V26i=function(){CB.$("#engine-info-text-"+this.V16h).show();CB.$("#lines-container-"+this.V16h).hide()};e.prototype.V26j=function(b,d){CB.$("#engine-info-text-"+this.V16h).text(b);CB.$("#engine-info-text-"+this.V16h).removeClass("findStrong");d&&CB.$("#engine-info-text-"+this.V16h).addClass(d)};e.prototype.V26n=function(b,c){var h=CB.$("#data-common-"+this.V16h,this.V261);
if(c){var l=String.formatEx(".line[data-pvnum='{0}']",b.num),l=CB.$(l);0==l.length&&(l=CB.$(e.V25z),l.insertBefore(h));d(l,b)}else l=CB.$(e.V25z),d(l,b),l.insertBefore(h)};V3bf.initForListeners(e);V3bf.addEvent(e,"MoveEntered");return e}();"use strict";
CB.V26s=function(){return{autoEngPanel:null,_autoShowEngine:!1,V26t:function(){return this.autoEngPanel},V26u:function(c){this._autoShowEngine!==c&&(this._autoShowEngine=c,this.toggleEnginePanel(c))},getAutoShowEngine:function(){return this._autoShowEngine},V26v:function(){this._autoShowEngine=!this._autoShowEngine;this.toggleEnginePanel(this._autoShowEngine);return this._autoShowEngine},toggleEnginePanel:function(c){V3c6.commands.Vt2(CB.Vm1.V26w,c);var b=this.V26x(),d=b.region,b=b.container;c?(this.autoEngPanel||
(this.autoEngPanel=CB.V26y.V26z(0,{h:CB.V5t.pixToZoom(.26*window.innerHeight),region:d,autoInit:!0,active:!0})),this.beforeShowAutoEngPanel(),b.contains(this.autoEngPanel)||(b.add(this.autoEngPanel),b.updateLayout())):this.autoEngPanel&&(b.remove(this.autoEngPanel,!0),this.afterHideAutoEngPanel(),this.autoEngPanel.setGame(null),this.autoEngPanel.V270(),this.autoEngPanel=null);return this.autoEngPanel},beforeShowAutoEngPanel:function(){},afterHideAutoEngPanel:function(){}}}();CB.V271=function(){}();
CB.V272=function(){return{createAutoEngineBtn:function(c){return CB.V138.V273(c,lm.ANALYSIS_ENGINE,"Engine",CB.Vm1.V26w,lm.ANALYSIS_ENGINE,CB.V274(4),"RunningEngine")},createToolBarEngineBtn:function(){return CB.V138.V275("","Engine16",CB.Vm1.V26w,lm.ANALYSIS_ENGINE)}}}();"use strict";
CB.Commands=function(){var c=function(){this.V277=this.V276=0;this.V278=[];this.V279=[];this.V27a={};this.V27b=0;this.V27c={}};c.prototype.Vkf=function(b){this.V276+=1;this.V278[this.V276]=b;return this.V276};c.prototype.Vki=function(b){delete this.V278[b]};c.prototype.V27d=function(b,d){try{for(var c=0;c<this.V278.length&&(void 0===this.V278[c]||!this.V278[c].execCommand(b,d));c++);}catch(g){c=V3c6.V3bp.Vlz(b),CB.V46(c,g)}};c.prototype.onFileSelect=function(b,d){for(var c=0;c<this.V278.length;c++)if(void 0!==
this.V278[c]&&this.V278[c].onFileSelect)this.V278[c].onFileSelect(b,d)};c.prototype.onTextFieldChange=function(b,d){for(var c=0;c<this.V278.length;c++)if(void 0!==this.V278[c]&&this.V278[c].onTextFieldChange)this.V278[c].onTextFieldChange(b,d)};c.prototype.onRegisterField=function(b,d){for(var c=0;c<this.V278.length;c++)if(void 0!==this.V278[c]&&this.V278[c].onRegisterField)this.V278[c].onRegisterField(b,d)};c.prototype.V27e=function(b,d){};c.prototype.V27f=function(b){};c.prototype.Vkh=function(b){this.V277+=
1;this.V279[this.V277]=b;return this.V277};c.prototype.Vkj=function(b){delete this.V279[b]};c.prototype.handleKeyDown=function(b){try{if(0>=this.V27b)for(var d=0;d<this.V279.length;d++)if(void 0!==this.V279[d]&&this.V279[d].onKeyDown(b)){b.stopEvent();break}}catch(c){CB.V46("KeyDown="+b.getKey(),c)}return!0};c.prototype.execCommandLine=function(b){for(var d=0;d<this.V278.length&&(void 0===this.V278[d]||!this.V278[d].execCommandLine||!this.V278[d].execCommandLine(b));d++);};c.prototype.V27g=function(){--this.V27b;
0>this.V27b&&CBDebug.assert("Shortcut counter")};c.prototype.V27h=function(){this.V27b+=1};c.prototype.V27i=function(){return this.V27c};c.prototype.Vt2=function(b,d){this.V27c={id:b,state:d};this.fireOnChecked()};c.prototype.V27j=function(b,d){this.V27c={id:b,state:d};this.fireOnEnabledChanged()};c.prototype.V27k=function(b,d){this.V27c={id:b,state:d};this.fireOnVisibleChanged()};V3bf.initForListeners(c);V3bf.addEvent(c,"Checked",function(){return[this.V27i()]});V3bf.addEvent(c,"EnabledChanged",
function(){return[this.V27i()]});V3bf.addEvent(c,"VisibleChanged",function(){return[this.V27i()]});return c}();
CB.Vm1={V5l:0,FLIP_BOARD:1,V1w:2,Vl7:3,Vl9:4,Vm6:5,V3q:6,Vm5:7,V26w:8,V27l:9,ADD_POST_TEXT:10,Vlc:11,PROMOTE_LINE:12,DELETE_LINE:13,CUT_LINE:14,MARK_GOOD:15,MARK_BAD:16,MARK_VERYGOOD:17,MARK_VERYBAD:18,MARK_INTERESTING:19,MARK_DUBIOUS:20,WHITE_WINS:30,WHITE_BETTER:31,WHITE_SLIGHTLY:32,EQUAL:33,UNCLEAR:34,BLACK_WINS:36,BLACK_BETTER:37,BLACK_SLIGHTLY:38,COMPENSATION:35,INSERT_DIAGRAM:39,Vla:40,OPEN_PGN_DATABASE:60,Vli:63,Vlf:70,Vlh:71,V27m:75,V30:80,V27n:100,V17j:101,V17l:115,V17n:102,V17h:103,V17p:104,
V17r:105,V27o:106,V27p:107,V27q:108,V27r:109,V27s:110,V27t:111,V27u:112,V27v:113,V27w:114,V27x:120,V17g:200,V17k:201,V17m:202,V17o:203,V17i:204,V17q:205,V17s:206,V27y:210,V27z:211,V280:212,V281:213,V282:214,V283:215,Vlk:231,V2d:240,Vll:250,Vln:251,V284:260,V285:261,V1im:262,V286:263,V287:264,V288:265,V289:266,V28a:267,V28b:268,V28c:269,LOGIN:300,LOGOUT:301,CHANGE_PASSWORD:302,V28d:303,V3a:304,INVITE_FRIEND:305,V3m:306,V28e:400,V28f:400,V28g:401,V28h:402,V28i:403,V28j:404,V28k:405,V28l:406,V28m:407,
V28n:408,V28o:409,V28p:410,V28q:411,V28r:412,V28s:413,V28t:414,V28u:415,V28v:416,V28w:417,V28x:418,V28y:419,V28z:420,V290:421,V291:422,V292:423,V293:424,V294:425,V295:426,V296:500,V1oq:9999,Vlz:function(c){return"CommandId="+c}};CB.V5p=function(){return"/Common/"};
CB.V297={V8p:!1,getEngineUrl:function(){5;return CB.V5t.V6t()?(CB.Vs9.V258=!0,["https://pgn.chessbase.com/common/chess/engine/webasm/fritzajax.js"]):["/Common/Chess/Engine/df14/df14.js"]},V298:function(){return"https://pgn.chessbase.com/common/"},Vh:function(){return CB.V5p()+"Media/Ribbons/"},getPlaychessUris:function(){return CB.V5t.V6q()?["wss://cbridge2.chessbase.com:6008","wss://cbridge3.chessbase.com:6008","wss://cbridge4.chessbase.com:6008"]:["ws://cbridge2.chessbase.com:7000","ws://cbridge3.chessbase.com:7000",
"ws://cbridge4.chessbase.com:7000"]},getLiveUris:function(){return https?["wss://liveserver.chessbase.com:443"]:["ws://liveserver.chessbase.com:7001"]},getLiveResult:function(){var c=CB.V5t.V6q();return[(c?"https":"http")+"://liveserver.chessbase.com:"+(c?6009:80)]},getDBBridgeUris:function(){return CB.V5t.V6q()?["wss://dbserver.chessbase.com:6008"]:["ws://dbserver.chessbase.com:7000"]},getCloudServerUris:function(){return CB.V5t.V6q()?["wss://cloudserver.chessbase.com:6008"]:["ws://cloudserver.chessbase.com:7000"]},
getTrainingUris:function(){return CB.V5t.V6q()?["wss://trainingserver.chessbase.com:443"]:["ws://trainingserver.chessbase.com:7000","wss://trainingserver.chessbase.com:6008"]},V299:function(){return CB.V5t.V6q()?["wss://pbridge.chessbase.com:6008"]:["ws://pbridge.chessbase.com:7000"]},V29a:function(){return CB.V5t.V6q()?["wss://tbridge2.chessbase.com:6008","wss://tbridge.chessbase.com:6008"]:["ws://tbridge.chessbase.com:7000","ws://tbridge2.chessbase.com:7000"]},getAccountUris:function(){return CB.V5t.V6q()?
["https://users.chessbase.com"]:["http://users.chessbase.com"]},V14q:function(){return CB.V5t.V6q()?["https://videos.chessbase.com/"]:["http://videos.chessbase.com/"]},loginWebUrl:"http://account.chessbase.com",createAccountWebUrl:"http://account.chessbase.com/en/create-account",resetPasswordWebUrl:"http://account.chessbase.com/en/pwd-recovery",V1kl:!1,editAccountUrl:"http://account.chessbase.com/{0}/me",V29b:"http://help.chessbase.com/Apps/{0}/index.html",V29c:function(c){return CB.V5p()+"Media/FlagsIso/"+
c+"/"},V29d:!1,V1ab:0,V1ac:0,Vrt:!0,debug:!0};
CB.V29e=ObjUtil.copyTo(CB.V297,{release:!0,loginWebUrl:"http://account.chessbase.com",getEngineUrl:function(){return CB.V5t.V6t()?(CB.Vs9.V258=!0,["https://pgn.chessbase.com/common/chess/engine/webasm/fritzajax.js"]):["/Common/Chess/Engine/df14/df14.js"]},getPlaychessUris:function(){return CB.V5t.V6q()?["wss://cbridge2.chessbase.com:6008","wss://cbridge3.chessbase.com:6008","wss://cbridge4.chessbase.com:6008"]:["ws://cbridge2.chessbase.com:7000","ws://cbridge3.chessbase.com:7000","ws://cbridge4.chessbase.com:7000"]},
getTrainingUris:function(){return CB.V5t.V6q()?["wss://trainingserver.chessbase.com:443","wss://trainingserver.chessbase.com:6008"]:["wss://trainingserver.chessbase.com:443","wss://trainingserver.chessbase.com:6008","ws://trainingserver.chessbase.com:7000"]},getDBBridgeUris:function(){return CB.V5t.V6q()?["wss://dbserver.chessbase.com:6008"]:["ws://dbserver.chessbase.com:7000"]},getCloudServerUris:function(){return CB.V5t.V6q()?["wss://cloudserver.chessbase.com:6008"]:["ws://cloudserver.chessbase.com:7000"]},
getAccountUris:function(){return CB.V5t.V6q()?["https://users.chessbase.com"]:["http://users.chessbase.com"]},getLiveUris:function(){return["wss://liveserver.chessbase.com:443"]},getLiveResult:function(){var c=CB.V5t.V6q();return[(c?"https":"http")+"://liveserver.chessbase.com:"+(c?6009:80)]},createAccountWebUrl:"https://account.chessbase.com/en/create-account",resetPasswordWebUrl:"http://account.chessbase.com/en/pwd-recovery",editAccountUrl:"http://account.chessbase.com/{0}/me",debug:!1},!0);
CB.ChessApp=function(){var c=function(){void 0===this.config&&(this.config=CB.V29e);this.V1h7=CB.V5p()+"Media/";this.V17x=this.V1h7+"Chess/";this.V1ca=16;document.onmousemove=this.V29f.bind(this);document.onkeypress=this.V29f.bind(this);this.V29g=new CB.Timer;this.V29h=new CB.V4z;this.V29i=!1;this.appName=this.V29j="ChessBase App";Window.localforage&&localforage.config({driver:localforage.INDEXEDDB,name:"ChessBase",version:1,storeName:"CBCache"})};c.prototype.V29k=function(){this.commands=new CB.Commands;
glSettings=new CB.GlobalSettings;this.V29l();this.V29g.runPeriodic(6E4,this.V29m.bind(this));this.V29n(CB.Vm1,this.V29o());this.Vke=this.commands.Vkf(this);var b=CB.V4a.V4l("lang");b&&(b=CB.V7a.V7e(b),glSettings.languageCommandId=glSettings.getCommandIdOfLanguage(b));"undefined"!=typeof glSettings.languageCommandId?glSettings.changeLanguage(glSettings.languageCommandId):this.changeLanguage(CB.V7a.V7d());CB.V5t.V64()||V3c6.V29p();window.onerror=function(b,d,c,h,l){var q="Main";0<=d.search("df14")&&
(q="Engine");d=String.formatEx("line={0}, col={1}, typ={2}",c,h,q);l&&l.stack&&(d+="/"+l.stack);CB.V46(b,d);"Engine"==l&&V3c6&&V3c6.panelMgr&&V3c6.panelMgr.showMessage("Sorry, cannot load the engine, please use the Chrome Browser or Firefox")}};c.prototype.V29q=function(){glSettings.destroy()};c.prototype.V190=function(){return!1};c.prototype.V1uk=function(){return this.config.loginWebUrl};c.prototype.V1vi=function(){return this.config.loginWebUrl+"en/me"};c.prototype.V29l=function(){glSettings.boardTextureId||
(glSettings.boardTextureId=this.V29r());var b=glSettings.boardTextureId;glSettings.boardTextureId=void 0;this.V1a8(b);this.config.V29s||(this.V1ix=new CB.ChessAudio(V3c6.config.V298()+"Media/Sounds/",!0))};c.prototype.V29r=function(){return CB.Vm1.V17g};c.prototype.V1a8=function(b){this.V3bc&&this.V3bc.destroy();if(glSettings.boardTextureId!=b)switch(b){default:b=CB.Vm1.V17g;case CB.Vm1.V17g:case CB.Vm1.V17m:case CB.Vm1.V17o:case CB.Vm1.V17i:this.V3bc=new CB.V16s(this.V17x+"LightSquaresCoolerBrighterSofter.jpg",
this.V17x+"DarkSquaresLessSatur.png",this.V17x+"MarginBrighter.jpg",this.V17x+"OrangeBrighterSoftBacklightLessSatur.jpg");break;case CB.Vm1.V17k:this.V3bc=new CB.V16s(this.V17x+"WhiteMarbleCut.jpg",this.V17x+"GreyMarble.jpg",this.V17x+"DarkMarginCut.jpg",this.V17x+"WhiteMarbleBack.jpg");break;case CB.Vm1.V17q:this.V3bc=new CB.V16s(this.V17x+"LightSquaresCooler.png",this.V17x+"DarkSquaresOrange.png",this.V17x+"MarginBrighter.jpg",this.V17x+"OrangeBrighterSoftBacklight.jpg");break;case CB.Vm1.V17s:this.V3bc=
new CB.V16s(this.V17x+"LightSquaresFFTex.png",this.V17x+"DarkSquaresFFTex.png",this.V17x+"MarginFF.png",this.V17x+"BackgroundFF.png")}glSettings.boardTextureId=b};c.prototype.V29t=function(b){return V3c6.config.V29d?CB.V138.V29u(b,lm.BOARDS,"Board2DSquares",[lm.BOARD_FRITZ,lm.BOARD_CRYSTALS,lm.BOARD_CRYSTALS+" (Wood)",lm.BOARD_USCF,lm.BOARD_OLDSTYLE,lm.BOARD_HABSBURG,"-",lm.BOARD3D_FRITZ,lm.BOARD3D_MODERN,lm.BOARD3D_ROOM,lm.BOARD3D_BALLOON,lm.BOARD3D_METAL,lm.BOARD3D_FUTURE,lm.BOARD3D_BLACKWHITE],
"wQFritz16 wQCrystals16 wQCrystals16 wQUSCF16 wQOldstyle16 wQHabsburg16  Fritz16 Modern16 Room16 Balloon16 Metal16 Future16 BlackWhite16".split(" "),[CB.Vm1.V27n,CB.Vm1.V17j,CB.Vm1.V17l,CB.Vm1.V17n,CB.Vm1.V17h,CB.Vm1.V17p,null,CB.Vm1.V27o,CB.Vm1.V27p,CB.Vm1.V27q,CB.Vm1.V27r,CB.Vm1.V27s,CB.Vm1.V27t,CB.Vm1.V27u],void 0,"",CB.V274(8)):CB.V138.V29u(b,lm.BOARDS,"Board2DSquares",[lm.BOARD_FRITZ,lm.BOARD_CRYSTALS,lm.BOARD_CRYSTALS+"(Wood)",lm.BOARD_USCF,lm.BOARD_OLDSTYLE,lm.BOARD_HABSBURG],"wQFritz16 wQCrystals16 wQCrystals16 wQUSCF16 wQOldstyle16 wQHabsburg16".split(" "),
[CB.Vm1.V27n,CB.Vm1.V17j,CB.Vm1.V17l,CB.Vm1.V17n,CB.Vm1.V17h,CB.Vm1.V17p],void 0,"",CB.V274(12))};c.prototype.V29v=function(b){return!CB.V5t.V64()||1E3<window.innerWidth||1E3<window.innerHeight?CB.V138.V29u(b,lm.OTHER_TOOLS,"SwitchApp",[lm.MENU_PLAYCHESS_TOOL,"Live Chess",lm.MENU_TACTICS_TOOL,lm.MENU_VIDEO_TOOL,lm.MENU_FRITZ_TOOL,lm.MENU_OPENINGS_TOOL,lm.MENU_DATABASE_TOOL,lm.MENU_MYGAMES_TOOL,lm.MENU_FRITZ_CHESSTER_TOOL,"News"],"WebAppPlay16 WebAppLive16 WebAppTactics16 WebAppVideos16 WebAppFritz16 WebAppOpenings16 WebAppDatabase16 WebAppMyGames16 WebAppFF16 WebAppNews16".split(" "),
[CB.Vm1.V284,CB.Vm1.V285,CB.Vm1.V289,CB.Vm1.V28b,CB.Vm1.V287,CB.Vm1.V28a,CB.Vm1.V1im,CB.Vm1.V286,CB.Vm1.V288,CB.Vm1.V28c],void 0,"",CB.V274(1)):CB.V138.V29u(b,lm.OTHER_TOOLS,"SwitchApp",[lm.MENU_PLAYCHESS_TOOL,lm.MENU_TACTICS_TOOL,lm.MENU_DATABASE_TOOL,lm.MENU_OPENINGS_TOOL,lm.MENU_VIDEO_TOOL,lm.MENU_FRITZ_TOOL],"WebAppPlay16 WebAppTactics16 WebAppDatabase16 WebAppOpenings16 WebAppVideos16 WebAppFritz16".split(" "),[CB.Vm1.V284,CB.Vm1.V289,CB.Vm1.V1im,CB.Vm1.V28a,CB.Vm1.V28b,CB.Vm1.V287],void 0,"",
CB.V274(1))};c.prototype.V29w=function(b){return CB.V138.V29u(b,lm.LOGIN,"Login",[lm.LOGIN,lm.LOGOUT,lm.CHANGE_PASSWORD,lm.ACCOUNT,lm.INVITE_FRIEND],["Login16","Logout16","ChangePassword16","Account16","MailGames16"],[CB.Vm1.LOGIN,CB.Vm1.LOGOUT,CB.Vm1.CHANGE_PASSWORD,CB.Vm1.V28d,CB.Vm1.INVITE_FRIEND],void 0,"",CB.V274(16))};c.prototype.V29x=function(){return[CB.V7a.ENG,CB.V7a.DEU,CB.V7a.ESP,CB.V7a.NED,CB.V7a.ROM,CB.V7a.CHN,CB.V7a.FRA,CB.V7a.RUS,CB.V7a.NOR,CB.V7a.POL,CB.V7a.ITA,CB.V7a.HEB,CB.V7a.CAT,
CB.V7a.TRK,CB.V7a.SLO,CB.V7a.GRK,CB.V7a.UKR,CB.V7a.VIE,CB.V7a.ARA,CB.V7a.SER,CB.V7a.LIT,CB.V7a.BRA,CB.V7a.FAR,CB.V7a.GAL,CB.V7a.CRO,CB.V7a.CZE,CB.V7a.HIN]};c.prototype.languageBtn=function(b){var c=this.V29x(),g=CB.V7a.V7i(c);g.push("Your Language Here!");var f=CB.V7a.V7j(c);f.push(CB.V7a.getRibbonFlagName(CB.V7a.UN));c=glSettings.getLanguageCommandIds(c);c.push(CB.Vm1.V296);b=CB.V138.V29u(b,lm.LANGUAGE,"",g,f,c,void 0,"",CB.V274(14),!0);glSettings.languageBtn=b;glSettings.languageCommandId?glSettings.changeLangButtonFlag(glSettings.languageCommandId):
b.changeFlagIcon(CB.V7a.getRibbonFlagName(CB.V7a.V7d()));return b};c.prototype.V29y=function(b){var c=[];CB.Vz.V29z&&(CB.Vz.V29z[b]?c.push(CB.Vz.V29z[b]):c.push(CB.Vz.V29z.ENG));CB.Vz.Chess[b]?c.push(CB.Vz.Chess[b]):c.push(CB.Vz.Chess.ENG);return c};c.prototype.changeLanguage=function(b){glLoc=new CB.Vm(this.V29y(CB.V7a.V7h(b)))};c.prototype.V29f=function(){this.V29h.start()};c.prototype.V2a0=function(){return 12E4<this.V29h.V50()};c.prototype.Vru=function(){return!1};var b=!1;c.prototype.V29m=function(){this.V2a0()?
(this.V2a1&&this.V2a1(),b=!0):(b&&this.V2a2&&this.V2a2(),b=!1)};c.prototype.V29p=function(){"undefined"!==typeof Ext&&Ext.QuickTips.init()};c.prototype.V2a3=function(){var b=0;switch(V3c6.versionCode.V1nr){case CB.V1n8.V1n9:b=V3c6.V3bp.V284;break;case CB.V1n8.V1no:b=V3c6.V3bp.V285;break;case CB.V1n8.V1nb:b=V3c6.V3bp.V1im;break;case CB.V1n8.V1nd:b=V3c6.V3bp.V284;break;case CB.V1n8.V1ne:b=V3c6.V3bp.V287;break;case CB.V1n8.V1ng:b=V3c6.V3bp.V286;break;case CB.V1n8.V1nx:b=V3c6.V3bp.V289;break;case CB.V1n8.V1nc:b=
V3c6.V3bp.V28a}return b};c.prototype.V1il=function(b){var c="http://www.chessbase.com";switch(b){case V3c6.V3bp.V284:c="http://play.chessbase.com";break;case V3c6.V3bp.V285:c="http://live.chessbase.com";break;case V3c6.V3bp.V289:c="http://tactics.chessbase.com";break;case V3c6.V3bp.V1im:c="https://database.chessbase.com";break;case V3c6.V3bp.V286:c="http://mygames.chessbase.com";break;case V3c6.V3bp.V28a:c="http://openings.chessbase.com";break;case V3c6.V3bp.V287:c="http://fritz.chessbase.com";break;
case V3c6.V3bp.V28b:c="http://videos.chessbase.com";break;case V3c6.V3bp.V288:c=CB.V7a.V7d()==CB.V7a.DEU?"http://fritzundfertig.chessbase.com":"http://fritzandchesster.chessbase.com";break;case V3c6.V3bp.V28c:c=CB.V7a.V7d()==CB.V7a.DEU?"http://de.chessbase.com":"http://en.chessbase.com"}return c};c.prototype.execCommand=function(b){try{var c=!0,g;switch(b){default:c=!1;break;case void 0:break;case V3c6.V3bp.V284:case V3c6.V3bp.V285:case V3c6.V3bp.V1im:case V3c6.V3bp.V286:case V3c6.V3bp.V287:case V3c6.V3bp.V288:case V3c6.V3bp.V289:case V3c6.V3bp.V28a:case V3c6.V3bp.V28b:case V3c6.V3bp.V28c:g=
this.V1il(b);break;case V3c6.V3bp.LOGOUT:this.setLoggedIn(!1);break;case CB.Vm1.CHANGE_PASSWORD:this.V2a4();break;case CB.Vm1.V28d:g=String.formatEx(this.config.editAccountUrl,CB.V7a.V7f(glSettings.getLanguageId()));break;case CB.Vm1.V3a:this.V2a5();break;case CB.Vm1.INVITE_FRIEND:this.V2a6();break;case CB.Vm1.V3m:this.V2a7()}g&&(window.location=g+"?ref="+this.appName+"&lang="+CB.V7a.V7f(glSettings.getLanguageId()))}catch(f){b=V3c6.V3bp.Vlz(b),CB.V46(b,f)}return c};c.prototype.V29n=function(b,c){if(c){for(var g in b)b.hasOwnProperty(g)&&
void 0===c[g]&&(c[g]=b[g]);this.V3bp=c}};c.prototype.setLoggedIn=function(b){this.V29i=b;b||(V3c6.V3bg.V1t1="",V3c6.V3bg.loginMode=CB.LoginMode.GUEST,CB.DOM.V1t2("AccountToken"),CB.DOM.V1t2("AccountMode"),V3c6.V3bg.V1t4());b||V3c6.V1zl(0);this.fireOnLogin(b)};c.prototype.V2a4=function(){V3c6.V3bg.userName?CB.Vnc.V2a4(V3c6.V3bg.userName,this.V2a8.bind(this),{}):alert("Please Login First")};c.prototype.V2a8=function(b,c){(new CB.V1t9(V3c6.V2a9)).V2a4(V3c6.V3bg.userName,b,c,V3c6.V3bg.V1t1,this.V2aa)};
c.prototype.V2aa=function(b){b&&1==b.ResultType?alert("Password changed."):alert("Could not change password")};c.prototype.V2ab=function(){var b=CB.DOM.V21c(!0)||V3c6.V3bg.userName;return 0<b.length&&"guest"!=b};c.prototype.V2a5=function(){(new CB.V1t9(V3c6.V2a9)).getFriends(V3c6.V3bg.userName,V3c6.V3bg.V1t1,"0",this.V2ac)};c.prototype.V2ac=function(b){if(b&&"OK"==b.Result){for(var e=new CB.V1t9(V3c6.V2a9),g=[],f=0;f<b.users.length;f++){var h=new CB.V2ad(b.users[f]);g.push(h)}CB.Vnc.V2ae(e,"Friends",
g,c.prototype.setFriends)}};c.prototype.setFriends=function(b,e){b.setFriends(V3c6.V3bg.userName,V3c6.V3bg.V1t1,"0",e,c.prototype.V2af)};c.prototype.V2af=function(b){};c.prototype.V2a6=function(){var b=this.V2a3(V3c6.versionCode.V1nr),b=c.prototype.V1il(b),b="mailto:%20&subject="+escape(this.V2a9)+"&body="+escape("Join me using "+this.appName+" "+b);window.location.href=b};c.prototype.V2ag=function(){};c.prototype.V2a7=function(){var b=String.formatEx(this.config.V29b,CB.V7a.V7g(glSettings.getLanguageId()));
window.open(b,"_blank")};c.prototype.V2ah=function(){return this.V2ai&&this.V2ai.type?this.V2ai.type:0};c.prototype.isPremium=function(){return 3<=this.V2ah()};c.prototype.isLoggedIn=function(){return 2<=this.V2ah()};c.prototype.Vkn=function(){return!0};c.prototype.V2aj=function(){return"undefined"!=typeof Ext};c.prototype.Vru=function(){return this.V2aj()};c.prototype.V1v5=function(){return CB.V5t.V6c()||V3c6.V3bg.V1sj()};c.prototype.V1zl=function(b){this.V2ai={name:"",type:b};switch(b){case 0:case 1:this.V2ai.name=
"Free";break;case 2:this.V2ai.name="Standard";break;case 3:this.V2ai.name="Premium"}this.fireOnAccountType(this.V2ai)};c.prototype.V2ak=function(b){V3c6.V2al();var c=ObjUtil.clone(b);c.deleteRemaining();c.unAnnotate();c=CB.V12j.V12l(c);b=2E3<c.length?"?fen="+b.getCurPos().toFEN():"?pgn="+c;window.location="http://fritz.chessbase.com"+b+"&ref=pgn"};c.prototype.V2al=function(b){if(this.panelMgr.getKernel&&this.panelMgr.getKernel()&&CB.V12j){var c=this.panelMgr.getKernel().game,g=CB.V12j.V12k(c);if(3E3<
g.length||b)b=ObjUtil.clone(c),b.unAnnotate(),g=CB.V12j.V12k(b);CB.DOM.V1t3("CBLastGame",g);CB.DOM.V1t3("CBLastMoveIndex",c.getMoveIndex());c.replaceGameNo&&(CB.DOM.V1t3("CBLastGameNo",c.replaceGameNo),CB.DOM.V1t3("CBLastGameDBId",c.replaceDBId));V3c6.V3bg.save("CBLastGame",g)}};c.prototype.V2am=function(){if((!V3c6.urlParams||!V3c6.urlParams.pgn&&!V3c6.urlParams.buf64)&&this.panelMgr.getKernel&&this.panelMgr.getKernel()&&PGN){var b=CB.DOM.V21b("CBLastGame"),c="",g="";b?(c=CB.DOM.V21b("CBLastGameNo"),
g=CB.DOM.V21b("CBLastGameDBId")):b=V3c6.V3bg.load("CBLastGame");if(b)return b=PGN.Vka(b),"My Moves"!=b.hdr.white.last&&(c&&g&&(b.replaceGameNo=parseInt(c),b.replaceDBId=parseInt(g)),this.panelMgr.getKernel().game.assign(b),(c=CB.DOM.V21b("CBLastMoveIndex"))&&this.panelMgr.getKernel().game.gotoIndex(c)),!0}};c.prototype.V2an=function(b){V3c6.V3bg.userName=CB.DOM.V21c(!0)||V3c6.V3bg.userName;V3c6.V3bg.V1t1=CB.DOM.V21b("AccountToken");if(V3c6.V3bg.V1t1&&V3c6.V3bg.userName&&"guest"!=V3c6.V3bg.userName)return(new CB.V1t9(V3c6.V2a9)).tokenLogin(V3c6.V3bg.userName,
V3c6.V3bg.V1t1,b),!0;V3c6.V3bg.V1t4();5;return!1};c.prototype.V2ao=function(b){return V3c6.V3bg.V1t7()?((new CB.V1t9(V3c6.V2a9)).pwLogin(V3c6.V3bg.userName,V3c6.V3bg.password,b),!0):!1};c.prototype.V2ap=function(){5};c.prototype.V2aq=function(){V3c6.playerLobby=new CB.Server.PlayerLobby;V3c6.playerLobby.create(V3c6.config.V299(),"Guest","",CB.LoginMode.GUEST);V3c6.playerLobby.V1u7()};c.prototype.V2ar=function(){V3c6.playerLobby&&V3c6.playerLobby.logOff()};c.prototype.V2as=function(){V3c6.aTBLobby=
new CB.Server.TeraBrainLobby;V3c6.aTBLobby.create(V3c6.config.V29a(),"Guest","",CB.LoginMode.GUEST);V3c6.aTBLobby.V1u7()};c.prototype.V2at=function(){V3c6.aTBLobby&&V3c6.aTBLobby.logOff()};c.prototype.V2au=function(){V3c6.onlineLobby=new CB.Server.OnlineLobby;V3c6.onlineLobby.V1zg(V3c6.config.getDBBridgeUris(),"Guest","",CB.LoginMode.GUEST);V3c6.onlineLobby.V1u7()};c.prototype.V2av=function(){V3c6.onlineLobby&&V3c6.onlineLobby.logOff()};c.prototype.V2aw=function(b){CB.V5p=function(){return"https://pgn.chessbase.com/common/"};
this.config.V8p=!0;this.V1h7=CB.V5p()+"Media/";this.V17x=this.V1h7+"Chess/";b.engine&&(b=CB.V5t.V6l(),CB.Vs9.V258=12<=b||!b,this.config.getEngineUrl=function(){if(CB.Vs9.V258)return CB.V5t.V6t()?["https://pgn.chessbase.com/Common/Chess/Engine/WebAsm/FritzAjax.js"]:["https://pgn.chessbase.com/Common/Chess/Engine/df14/df14ajaxdata.js"];if(!CB.V5t.V6t())return["/Common/Chess/Engine/df14/df14.js"]})};c.prototype.V2ax=function(){var b=CB.V4a.V4l("user"),c=CB.V4a.V4l("pass");return b.length&&c.length?(V3c6.V3bg.userCoded=
b,b=CB.V4a.base64.V4i(b),c=CB.V4a.base64.V4i(c),b=CB.V4a.V4q(b),V3c6.V3bg.userName=b,V3c6.V3bg.password=c,V3c6.V3bg.loginMode=CB.LoginMode.NORMAL,!0):!1};c.prototype.V2ay=function(){return!1};V3bf.initForListeners(c);V3bf.addEvent(c,"Login");V3bf.addEvent(c,"AccountType");return c}();CB.V1dd={};CB.V1dd[CB.Vm1.V27n]="DiagramTTFritz";CB.V1dd[CB.Vm1.V17j]="DiagramTTCrystals";CB.V1dd[CB.Vm1.V17l]="DiagramTTCrystals";CB.V1dd[CB.Vm1.V17n]="DiagramTTUSCF";CB.V1dd[CB.Vm1.V17h]="DiagramTTOldstyle";
CB.V1dd[CB.Vm1.V17p]="DiagramTTHabsburg";CB.V1dd[CB.Vm1.V17r]="DiagramTTFF";CB.V1dd[CB.Vm1.V27o]="Fritz";CB.V1dd[CB.Vm1.V27p]="Modern";CB.V1dd[CB.Vm1.V27q]="Room";CB.V1dd[CB.Vm1.V27r]="Balloon";CB.V1dd[CB.Vm1.V27s]="Metal";CB.V1dd[CB.Vm1.V27t]="Future";CB.V1dd[CB.Vm1.V27u]="BlackWhite";CB.V1dd[CB.Vm1.V27v]="Character";
function buildOldBrowserLandingPage(){CB.V2az("Old");CB.DOM.add("www.playchess.com","h1","NonMobiH1");CB.DOM.add("Play chess and kibitz grand master games","h3","NonMobiH3");CB.DOM.V21a();CB.DOM.add("We are sorry, your browser needs an update.","","NonMobiBody");CB.DOM.add("Please install the latest version.","","NonMobiBody");CB.DOM.V21a();CB.DOM.add("We recommend using Chrome or Firefox. Thank you!","","NonMobiBody");CB.DOM.V21a();CB.DOM.V21a();CB.DOM.V219("http://www.playchess.com","www.playchess.com",
"NonMobiLink");CB.DOM.V21a();CB.DOM.V21a();CB.DOM.V21a();CB.DOM.V21a();CB.DOM.V21a();CB.DOM.V21a();CB.DOM.V21a();CB.DOM.V21a();navigator.userAgent&&CB.DOM.add(navigator.userAgent,"","NonMobiBody")}
CB.V46=function(c,b,d){if("undefined"!==typeof ga&&CB.V5t.runsOnChessBaseDomain()){CB.V5t.V64()&&(b+=" (mob)",CB.V5t.V5x()?b+=", andr="+CB.V5t.V5x():CB.V5t.V5w()&&(b+=", ios="+CB.V5t.V5w()));var e="catch";V3c6&&(b+=", ver="+V3c6.versionCode.V1nw(),e+=V3c6.versionCode.V1nw());var g=c+", "+b;b&&(b.lineNumber&&(g+=", line="+b.lineNumber),b.columnNumber&&(g+=", line="+b.columnNumber),b.stack&&(d=b.stack));ga("send","event",e,g,d)}console.log(c+", "+b)};
CB.V1gp=function(c){"undefined"!==typeof ga&&CB.V5t.runsOnChessBaseDomain()&&ga("send","event","Stats",c)};function padInt(c,b){var d="000000000"+c;return d.substr(d.length-b)}CB.V2b0=function(c,b){"undefined"!==typeof ga&&CB.V5t.runsOnChessBaseDomain()&&ga("send","event","Replayed",c,"",padInt(b,6))};CB.V2az=function(c){5;"undefined"!==typeof ga&&CB.V5t.runsOnChessBaseDomain()&&ga("send","event","Browser",c)};
CB.V1rv=function(c){5;"undefined"!==typeof ga&&CB.V5t.runsOnChessBaseDomain()&&ga("send","event","Connect",c)};CB.V2b1=function(){if("undefined"!==typeof ga&&CB.V5t.runsOnChessBaseDomain()&&(ga("send","event","Version",V3c6.versionCode.toString()),glSettings&&"undefined"!=typeof glSettings.languageCommandId)){var c=glSettings.getLanguageIdOfCommandId(glSettings.languageCommandId);ga("send","event","Lang",CB.V7a.V7f(c))}};
CB.V2b2=function(c){"undefined"!==typeof ga&&CB.V5t.runsOnChessBaseDomain()&&ga("send","pageview","Goal/"+c)};"use strict";
CB.GlobalSettings=function(){var c=function(){this.Vke=V3c6.commands.Vkf(this);this.Vkg=V3c6.commands.Vkh(this);this.boardTextureId=CB.Vm1.V17g;this.pieceStyleId=CB.Vm1.V27n;this.V2b3=CB.Vm1.V27o;this.load();this.V2b4=!1};c.prototype.destroy=function(){V3c6.commands.Vki(this.Vke);V3c6.commands.Vkj(this.Vkg);this.save()};c.prototype.save=function(){var b=new CB.Vam;b.save("pieceStyleId",this.pieceStyleId);b.save("boardTextureId",this.boardTextureId);b.save("pieceStyleId3D",this.V2b3);b.save("langCommandId",
this.languageCommandId)};c.prototype.load=function(){var b=new CB.Vam;this.pieceStyleId=b.load("pieceStyleId");this.V2b3=b.load("pieceStyleId3D");this.boardTextureId=b.load("boardTextureId");this.languageCommandId=b.load("langCommandId")};c.prototype.sendFeedback=function(b,c){(new CB.V2b5).send(b,c)};var b=new CB.V3bs;c.prototype.execCommand=function(d){try{switch(d){case CB.Vm1.V2d:glSettings.inDialog()||CB.Vnc.V2b6(this.sendFeedback);break;case CB.Vm1.V28f:case CB.Vm1.V28g:case CB.Vm1.V28h:case CB.Vm1.V28i:case CB.Vm1.V28j:case CB.Vm1.V28k:case CB.Vm1.V28l:case CB.Vm1.V28m:case CB.Vm1.V28n:case CB.Vm1.V28o:case CB.Vm1.V28p:case CB.Vm1.V28q:case CB.Vm1.V28r:case CB.Vm1.V28s:case CB.Vm1.V28t:case CB.Vm1.V28u:case CB.Vm1.V28v:case CB.Vm1.V28w:case CB.Vm1.V28x:case CB.Vm1.V28y:case CB.Vm1.V28z:case CB.Vm1.V290:case CB.Vm1.V291:case CB.Vm1.V292:case CB.Vm1.V293:case CB.Vm1.V294:case CB.Vm1.V295:this.changeLanguage(d);
break;case CB.Vm1.V296:window.open("https://docu.chessbase.com/translate.html","_blank");break;case CB.Vm1.V27n:case CB.Vm1.V17j:case CB.Vm1.V17l:case CB.Vm1.V17n:case CB.Vm1.V17h:case CB.Vm1.V17p:case CB.Vm1.V17r:this.changeBoardStyle(d);break;case CB.Vm1.V27x:b.exec(this.V2b7(),3E3);break;case CB.Vm1.V27o:case CB.Vm1.V27p:case CB.Vm1.V27q:case CB.Vm1.V27r:case CB.Vm1.V27s:case CB.Vm1.V27t:case CB.Vm1.V27u:case CB.Vm1.V27v:CB.V5t.V70()?this.V2b8(d):(alert(lm.BROWSER_DOESNT_SUPPORT_3D),this.changeBoardStyle(CB.Vm1.V27n))}}catch(c){d=
V3c6.V3bp.Vlz(d),CB.V46(d,c)}};c.prototype.onKeyDown=function(b){return!1};c.prototype.onFileSelect=function(b,c){return!1};c.prototype.V2b9=function(b){V3c6.panelMgr.setIsFormOpen(b)};c.prototype.inDialog=function(){return V3c6.panelMgr.V2ba()};c.prototype.V2b8=function(b){V3c6.panelMgr.deleteCanvasPanel&&(this.V2b4?V3c6.panelMgr.deleteCanvasPanel3D():V3c6.panelMgr.deleteCanvasPanel(),this.V2b4=!0,this.V2bb=CB.V1dd[b],this.V2b3=b,V3c6.panelMgr.addCanvasPanel3D())};c.prototype.changeBoardStyle=function(b){this.V2b4&&
(this.V2b4=!1,V3c6.panelMgr.deleteCanvasPanel3D(),V3c6.panelMgr.addCanvasPanel());CB.V184.clearCache();this.V19u=CB.V1dd[b];this.pieceStyleId=b;this.fireOnBoardStyle(b,this.V19u)};c.prototype.V2b7=function(){this.pieceStyleId=this.pieceStyleId?this.pieceStyleId+1:CB.Vm1.V27n+1;this.pieceStyleId>=CB.Vm1.V27w&&(this.pieceStyleId=CB.Vm1.V27n);!V3c6.config.V29d&&this.pieceStyleId>=CB.Vm1.V27o&&(this.pieceStyleId=CB.Vm1.V27n);this.pieceStyleId>=CB.Vm1.V27o?CB.V5t.V70()?this.V2b8(this.pieceStyleId):this.changeBoardStyle(this.pieceStyleId):
this.changeBoardStyle(this.pieceStyleId)};c.prototype.changeLanguage=function(b){var c=this.languageCommandId;this.changeLangButtonFlag(b);this.languageCommandId=b;V3c6.changeLanguage(this.getLanguageIdOfCommandId(b));V3c6.V2bc&&c!=b&&(this.save(),window.location=V3c6.V2bc+"?lang="+CB.V7a.V7f(glSettings.getLanguageId()))};c.prototype.changeLangButtonFlag=function(b){this.languageBtn&&this.languageBtn.changeFlagIcon(CB.V7a.getRibbonFlagName(this.getLanguageIdOfCommandId(b)))};c.prototype.getLanguageIdOfCommandId=
function(b){switch(b){default:alert("languageId: "+b);case CB.Vm1.V28f:return CB.V7a.ENG;case CB.Vm1.V28g:return CB.V7a.GER;case CB.Vm1.V28h:return CB.V7a.ESP;case CB.Vm1.V28i:return CB.V7a.NED;case CB.Vm1.V28j:return CB.V7a.ROM;case CB.Vm1.V28k:return CB.V7a.CHN;case CB.Vm1.V28l:return CB.V7a.FRA;case CB.Vm1.V28m:return CB.V7a.RUS;case CB.Vm1.V28n:return CB.V7a.NOR;case CB.Vm1.V28o:return CB.V7a.POL;case CB.Vm1.V28p:return CB.V7a.ITA;case CB.Vm1.V28q:return CB.V7a.HEB;case CB.Vm1.V28r:return CB.V7a.CAT;
case CB.Vm1.V28s:return CB.V7a.TRK;case CB.Vm1.V28t:return CB.V7a.SLO;case CB.Vm1.V28u:return CB.V7a.GRK;case CB.Vm1.V28v:return CB.V7a.UKR;case CB.Vm1.V28w:return CB.V7a.VIE;case CB.Vm1.V28x:return CB.V7a.ARA;case CB.Vm1.V28y:return CB.V7a.SER;case CB.Vm1.V28z:return CB.V7a.LIT;case CB.Vm1.V290:return CB.V7a.BRA;case CB.Vm1.V291:return CB.V7a.FAR;case CB.Vm1.V292:return CB.V7a.GAL;case CB.Vm1.V293:return CB.V7a.CRO;case CB.Vm1.V294:return CB.V7a.CZE;case CB.Vm1.V295:return CB.V7a.HIN}};c.prototype.getCommandIdOfLanguage=
function(b){switch(b){default:case CB.V7a.ENG:return CB.Vm1.V28f;case CB.V7a.GER:return CB.Vm1.V28g;case CB.V7a.ESP:return CB.Vm1.V28h;case CB.V7a.NED:return CB.Vm1.V28i;case CB.V7a.ROM:return CB.Vm1.V28j;case CB.V7a.CHN:return CB.Vm1.V28k;case CB.V7a.FRA:return CB.Vm1.V28l;case CB.V7a.RUS:return CB.Vm1.V28m;case CB.V7a.NOR:return CB.Vm1.V28n;case CB.V7a.POL:return CB.Vm1.V28o;case CB.V7a.ITA:return CB.Vm1.V28p;case CB.V7a.HEB:return CB.Vm1.V28q;case CB.V7a.CAT:return CB.Vm1.V28r;case CB.V7a.TRK:return CB.Vm1.V28s;
case CB.V7a.SLO:return CB.Vm1.V28t;case CB.V7a.UKR:return CB.Vm1.V28v;case CB.V7a.GRK:return CB.Vm1.V28u;case CB.V7a.VIE:return CB.Vm1.V28w;case CB.V7a.ARA:return CB.Vm1.V28x;case CB.V7a.SER:return CB.Vm1.V28y;case CB.V7a.LIT:return CB.Vm1.V28z;case CB.V7a.BRA:return CB.Vm1.V290;case CB.V7a.FAR:return CB.Vm1.V291;case CB.V7a.GAL:return CB.Vm1.V292;case CB.V7a.CRO:return CB.Vm1.V293;case CB.V7a.CZE:return CB.Vm1.V294;case CB.V7a.HIN:return CB.Vm1.V295}};c.prototype.getLanguageCommandIds=function(b){var c=
[];b.forEach(function(b){c.push(this.getCommandIdOfLanguage(b))}.bind(this));return c};c.prototype.V2bd=function(){return this.languageCommandId&&(this.languageCommandId==CB.Vm1.V28q||this.languageCommandId==CB.Vm1.V28x||this.languageCommandId==CB.Vm1.V291)};c.prototype.getLanguageId=function(){return this.languageCommandId?this.getLanguageIdOfCommandId(this.languageCommandId):CB.V7a.V7d()};V3bf.initForListeners(c);V3bf.addEvent(c,"BoardStyle");V3bf.addEvent(c,"BoardStyle3D");return c}();var glSettings;
"use strict";CB.V2b5=function(){var c=function(){};c.prototype.send=function(b,d){this.strAddress=b;this.strComment=d;var c=CB.LoginMode.GUEST;CB.Server.PlayerLobby?(this.aPlayerLobby=new CB.Server.PlayerLobby(V3c6.config.V299(),"Guest","",c),this.aPlayerLobby.V1u7(this.V2be,this)):alert("Thank you")};c.prototype.V2be=function(b){b.aPlayerLobby&&(b.aPlayerLobby.sendFeedback(b.strAddress,b.strComment,this.V2bf),b.aPlayerLobby.logOff(),alert("Thank you"))};c.prototype.V2bf=function(b){};return c}();
CB.V2bg=function(){return{onLogin:function(){this.gameKernel&&this.gameKernel.game.fireOnChanged({forceUpdate:!0});this.setLoginHtml(V3c6.isLoggedIn())},setLoginHtml:function(c){if(this.V2bh){if(c)this.V2bh.setHeight(450<window.innerHeight?28:20),Ext.apply(this.V2bh,{overflowY:"auto"}),this.V2bh.update('<div class="CBInfoLoggedIn">'+this.getLoggedInHtml()+"</div>"),this.V2bh.V2bi(this.getLoginInfoGradient()+";color:white;text-transform:uppercase");else{var b=window.innerHeight/3;this.V2bj&&this.V2bj.el&&
(b=this.V2bj.getHeight());CB.V5t.V64()&&900>window.innerHeight?this.V2bh.setHeight(Math.min(b,120)):this.V2bh.setHeight(Math.min(b,160));Ext.apply(this.V2bh,{overflowY:"scroll"});this.V2bh.update('<div class="CBInfoNotLoggedIn">'+this.getPleaseLoginHtml()+"</div>");this.V2bh.V2bi(CB.V5q.V21i("rgba(254, 254,252,255)","rgba( 251, 251,247,255)")+";color:black;text-transform:none;")}this.V2bh.V29i=c;V3c6.V3bg.V1sl()&&this.V2bh.el&&this.V2bh.setVisible(!1)}},getLoginInfoGradient:function(){return CB.V5q.V21i("rgba(6, 216,19,255)",
"rgba(24, 147,23,255)")},getPleaseLoginHtml:function(c){c=CB.V5q.getHeader("h3",lm.LOGIN_PLEASE_LOGIN,"margin-top:4px");c+=this.getLoginInviteHeader()+"<br/>";if(!CB.V5t.V64()||900<window.innerHeight)c+=this.getFunctionalityText()+"<br/>",c+=lm.LOGIN_ACCOUNT_FREE+"<br/><br/>";return c+=this.genCreateAccountLink()},genCreateAccountLink:function(){return'<a href="'+V3c6.config.createAccountWebUrl+'" style="color:#8B0A16">'+lm.LOGIN_CREATE_LINK+"</a>"},getLoggedInHtml:function(){return String.f(lm.LOGIN_WELCOME,
V3c6.V3bg.userName)},getLoginInviteHeader:function(){return String.f(lm.GENERAL_INVITE,V3c6.V29j)},getFunctionalityText:function(){return lm.PLEASE_LOGIN},resizeInfoPanel:function(){var c=!1;if(this.V2bh&&this.V2bh.el)if(this.V2bh.V29i){var b=22;450<window.innerHeight&&(b=650<window.innerHeight?30:26);this.V2bh.setHeight(b);c=!0}else this.V2bj&&(b=Math.min(220,Math.max(20,.3*this.V2bj.getHeight())),this.V2bh.setHeight(b));return c}}}();
CB.V2bk=function(){return{accountLogin:function(c){V3c6.V3bg.userName=CB.DOM.V21c(!0)||V3c6.V3bg.userName;V3c6.V3bg.V1t1=CB.DOM.V21b("AccountToken");if(!c&&V3c6.V3bg.V1t1&&V3c6.V3bg.userName&&"guest"!=V3c6.V3bg.userName)c=new CB.V1t9(V3c6.V2a9),V3c6.V3bg.userName&&"guest"!=V3c6.V3bg.userName&&V3c6.V3bg.password?c.pwLogin(V3c6.V3bg.userName,V3c6.V3bg.password,this.receiveTokenHandler.bind(this)):c.tokenLogin(V3c6.V3bg.userName,V3c6.V3bg.V1t1,this.tokenLoginHandler.bind(this));else this.onRequestLogin()},
onRequestLogin:function(){this.enterLoginForm()},enterLoginForm:function(c){var b=this.V29i;CB.Vnc?CB.Vnc.V2bl(V3c6.appName,V3c6.V3bg,function(){this.setLoggedIn(!1);(new CB.V1t9(V3c6.V2a9)).pwLogin(V3c6.V3bg.userName,V3c6.V3bg.password,this.receiveTokenHandler.bind(this))}.bind(this),function(){CB.V138&&CB.V138.V13a();b||this.setLoggedIn(!1)}.bind(this),{infoMsg:c,guestBtn:!1,createBtn:!0,forgotBtn:!0}):b||this.setLoggedIn(!1)},tokenLoginHandler:function(c){c&&1!=c.ResultType&&!c.timeout?(this.setLoggedIn(!1),
this.enterLoginForm()):c.timeout?(CB.DOM.V1t2("AccountToken"),this.setLoggedIn(!1)):(this.setLoggedIn(!0),this.onTokenLoginOk());this.V2bm=!1},onTokenLoginOk:function(){},receiveTokenHandler:function(c){if(c&&c.Token){var b=unescape(c.Token);V3c6.V3bg.V1t1=b;V3c6.V3bg.V1t5();c.userId&&1==c.ResultType&&(V3c6.V3bg.userName=c.userId);CB.DOM.V1ta(V3c6.V3bg.userName);this.setLoggedIn(!0);CB.V138&&CB.V138.V139("Logged in OK: "+V3c6.V3bg.userName);CB.Timer.V4w(function(){CB.V138&&CB.V138.V13a()},600);this.onTokenLoginOk()}else{if(c&&
1!=c.Result&&!c.timeout)this.onInvalidToken();c.timeout&&CB.DOM.V1t2("AccountToken","");this.setLoggedIn(!1);this.V2bm=!1}},onInvalidToken:function(){this.enterLoginForm(String.formatEx(lm.PW_INVALID,V3c6.V3bg.userName))},isLoggedIn:function(){return this.V29i||this.V2bm},setLoggedIn:function(c){this.superClass.setLoggedIn.apply(this,arguments);c?document.title=this.V29j+" - "+V3c6.V3bg.userName:(document.title=this.V29j+" - not logged in",this.V2bm=!1)}}}();"use strict";
CB.V2bn={V2bo:0,V2bp:1,V2bq:16,V2br:32,V2bs:64,V2bt:128,V2bu:256,V2bv:512,V2bw:1024,V2bx:4096};
CB.V1mv=function(){var c=function(){this.init()};c.prototype.V2by=0;c.prototype.V2bz=0;c.prototype.V2c0="";c.prototype.V2c1="";c.prototype.V2c2="";c.prototype.V2c3="";c.prototype.V2c4="";c.prototype.freeText="";c.prototype.V2c5=0;c.prototype.V2c6=65535;c.prototype.V2c7=0;c.prototype.V2c8=3E3;c.prototype.V2c9=0;c.prototype.V2ca=0;c.prototype.m_board=new CB.Ve8;c.prototype.V2cb=0;c.prototype.m_nFlags=CB.V2bn.V2bq|CB.V2bn.V2br|CB.V2bn.V2bs|CB.V2bn.V2bu|CB.V2bn.V2bv;c.prototype.init=function(b){};c.prototype.writeToDataBuffer=
function(b){b.beginSizedWrite();b.writeByte(1);b.V3b6(this.V2c0);b.V3b6(this.V2c1);b.V3b6(this.V2c3);b.V3b6(this.V2c4);b.writeInt(this.V2c7);b.writeInt(this.V2c8);b.writeInt(this.V2c9);b.writeInt(this.V2ca);b.V3bj(this.V2c5);b.V3bj(this.V2c6);b.writeInt(this.m_nFlags);if(this.V2cc()){b.writeByte(this.V2cb);for(var d=0;64>d;d++)b.writeByte(this.m_board[d])}b.V3b6(this.freeText);b.endSizedWrite()};c.prototype.setSearchBoard=function(b,d,c){this.m_board=b;this.V2cb=d};c.prototype.SETFLAG=function(b,
d){this.m_nFlags=d?this.m_nFlags|b:this.m_nFlags&~b};c.prototype.V2cd=function(b){return 0!=(this.m_nFlags&b)};c.prototype.V2ce=function(b){this.SETFLAG(CB.V2bn.V2bw,b)};c.prototype.setUseBoard=function(b){this.SETFLAG(CB.V2bn.V2bp,b)};c.prototype.V2cc=function(){return this.V2cd(CB.V2bn.V2bp)};c.prototype.V2cf=function(b){this.SETFLAG(CB.V2bn.V2bq,b)};c.prototype.V2cg=function(b){this.SETFLAG(CB.V2bn.V2br,b)};c.prototype.V2ch=function(b){this.SETFLAG(CB.V2bn.V2bs,b)};c.prototype.Vh2=function(b){this.SETFLAG(CB.V2bn.V2bu,
b)};c.prototype.Vh3=function(b){this.SETFLAG(CB.V2bn.V2bv,b)};c.prototype.V2ci=function(b){this.SETFLAG(CB.V2bn.V2bx,b)};c.prototype.V2cj=function(b){this.freeText=b};c.prototype.parseFreeText=function(){var b="",d=this.freeText.split(" "),c=0;if(1<d.length)for(var g=0;g<d.length;g++)d[g].replace(" ",""),isNaN(d[g])?(b&&(b+=" "),b+=d[g]):c=d[g];0<c&&(this.freeText=b,this.V2c7=this.V2c8=c)};c.prototype.toString=function(){return"searchmask="+this.freeText+" board= "+m_board.toString()};return c}();
"use strict";
CB.V2ck=function(){var c=function(){this.clear()},c=function(b){this.moves=[];this.V2cn=this.V2cm=this.V2cl="";this.V2co=0;null!=b&&(this.V2cp=b.nota,this.aMove=new CB.Vei(b.from,b.to,b.prom))};c.prototype.V2co;c.prototype.nWhiteEloSum=0;c.prototype.nBlackEloSum=0;c.prototype.nWhiteEloCount=0;c.prototype.nBlackEloCount=0;c.prototype.nLosses=0;c.prototype.nDraws=0;c.prototype.nWins=0;c.prototype.nGames=0;c.prototype.nDate=0;c.prototype.V2cq=0;c.prototype.V2cp="?";c.prototype.moves=[];c.prototype.aMove=
new CB.Vei;c.prototype.clear=function(){nGames=nDate=nLosses=nDraws=nWins=nWhiteEloCount=nBlackEloCount=nWhiteEloSum=nBlackEloSum=0;this.moves=[]};c.prototype.getMove=function(b){return b<this.moves.length?this.moves[b]:new CB.Vei};c.prototype.V2cr=function(){return this.moves.length};c.prototype.V2cs=function(){return 0<this.nWhiteEloCount?Math.round(this.nWhiteEloSum/this.nWhiteEloCount):0};c.prototype.V2ct=function(){return 0<this.nBlackEloCount?Math.round(this.nBlackEloSum/this.nBlackEloCount):
0};c.prototype.V2cu=function(b){return b==CB.Vaz.WHITE?this.V2cs():this.V2ct()};c.prototype.V3b4=function(b,d){b.beginSizedRead();this.nGames=b.V3bx();this.V2cm=this.nGames.toString();this.nDate=b.V3bx();this.V2co=(new CB.Date(this.nDate)).year>>9;this.nLosses=b.V3bx();this.nDraws=b.V3bx();this.nWins=b.V3bx();b.V3bx();this.nWhiteEloCount=b.V3bx();this.nWhiteEloSum=b.V3bz();this.nBlackEloCount=b.V3bx();this.nBlackEloSum=b.V3bz();var c=b.readUint8();if(0<c){var g=new CB.V2cv;g.init(d.board,g.FORMAT_1);
for(var f=new CB.Vie(lm.NOTA_LOCALIZATION),h=new CB.V2cw,l=0;l<c;++l){var q=h.V4i(b.readUint8(),l);if(0<q&&q<g.FULL_MOVE_INFO){var r=new CB.Position;d.copyTo(r);var t=new CB.Vei;g.V4i(t,q,r.getBTM());r.isLegalMove(t)&&(r.preCalcCtx(t),r.makeMove(t),r.postCalcCtx(t,!0),q=f.getMoveNota(t),t.nota=q,this.moves.push(t))}}}b.endSizedRead();return!0};return c}();"use strict";
CB.V2cx=function(){var c=function(){this.V2cy=[]};c.prototype.clear=function(){this.V2cy=[]};c.prototype.V3b4=function(b,d){this.clear();var c=b.V3bx(),g=d.toFEN(),f=new CB.Position(g);if(0<c&&(g=new CB.V2ck,g.V3b4(b,f),--c,0<c))for(f=0;f<g.V2cr()&&0<c;++f,--c){var h=d.toFEN(),h=new CB.Position(h),l=g.getMove(f);h.preCalcCtx(l);h.makeMove(l);h.postCalcCtx(l,!0);l=new CB.V2ck(l);l.V3b4(b,h);this.V2cy.push(l)}return!0};c.prototype.V2cz=function(b){return this.V2cy[b]};c.prototype.Count=function(){return this.V2cy.length};
return c}();"use strict";CB.OnlineEntryEnum={V2d0:0,V2d1:1,FLAGS_ONLINE_HEADER:2,V1mw:2,toString:function(c){for(var b in this)if(this[b]==c)return"OnlneEntryId: "+b;return"Unknown OnlineEntryId: "+c}};CB.V2d2=function(){var c=function(){this.aGame=new CB.Game};c.prototype.aGame;c.prototype.V2d3;c.prototype.aDB;c.prototype.V2d4;c.prototype.nFlags;return c}();"use strict";
CB.V2d5=function(){var c=function(){};c.prototype.numBits=[1,6,6,5,5,5,3,1,1,6,6,5,5,5,3,1];c.prototype.theBits=[0,32,34,18,20,22,6,0,0,33,35,19,21,23,7,0];c.prototype.isUniqe=[0,255,255,255,255,255,6,14,255,255,255,255,255,255,255,255,255,255,3,11,4,12,5,13,255,255,255,255,255,255,255,255,1,9,2,10,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255];c.prototype.V2d6=[90,170,153,97,156,120,48,246,217,33,251,89,244,117,179,207,138,229,61,
134,20,71,41,42,47,157,19,128,51,253,27,168,57,178,205,242,200,185,0,139,132,58,106,30,59,86,194,64,214,53,10,84,5,186,72,131,85,11,100,103,243,191,212,6,29,225,177,38,227,180,160,143,215,122,95,187,199,236,226,88,175,119,218,184,209,222,98,163,62,83,142,112,65,166,174,167,16,197,137,189,66,32,107,255,74,79,123,155,34,46,75,76,196,245,249,173,221,210,198,39,223,44,224,4,231,9,111,109,96,182,146,70,94,69,23,254,172,145,93,234,56,36,102,148,115,55,108,105,21,220,40,77,150,99,114,181,37,63,144,110,235,
158,202,211,240,101,91,149,12,43,15,68,248,125,219,7,49,67,17,206,203,193,1,171,104,232,228,113,26,247,28,129,204,147,216,80,195,165,3,140,161,116,208,183,31,241,22,130,118,78,151,82,87,121,8,252,35,192,213,133,14,45,54,50,250,176,73,126,60,201,169,25,13,92,190,233,81,230,127,135,162,152,164,141,124,154,238,239,24,136,188,237,159,52,2,18];c.prototype.HUFF_960=128;c.prototype.HUFF_CASTLE=64;c.prototype.V2d7=32;c.prototype.decodeMove2=function(b,d){var c=[];c[0]=CB.Piece.QUEEN;c[1]=CB.Piece.ROOK;c[2]=
CB.Piece.BISHOP;c[3]=CB.Piece.KNIGHT;b.From=d>>6&63;b.To=d>>0&63;b.SetProm(c[d>>12&3]);b.SetMoveType(0);return!0};c.prototype.V4i=function(b,d){var c=!1,g=d.getPos()-4;d.rewind();for(var f=[],h=0;h<g;h++)f[h]=d.readUint8();if(0<g&&f[0]<=g){c=new CB.Position;0<f[0]?(HuffToPos3(c,f,g),b.setStartPosition(c),h=f[0],CBDebug.assert(!1)):(b.getStartPos().NormalInit=!0,h=1);var l=new CB.V2cv;for(l.init(c.board,l.FORMAT_1);h<g;){var q=new CB.Vei,r=this.V2d6[f[h]]-h;++h;if(r>=l.FULL_MOVE_INFO)if(r==l.FULL_MOVE_INFO){if(h+
2>g)break;r=this.V2d6[f[h]]-h;++h;r|=this.V2d6[f[h]]-h<<8;++h;decodeMove2(q,r)}else break;else 0<r&&l.V4i(q,r,c.getBTM());this.V2d8(c,q);b.makeMove(q);l.execute(q,c)}c=!0}return c};c.prototype.V2d9=function(b,d,c){var g,f,h;varindex=0;d[index]=0;index++;d[index]=0;b.GetBTM()&&(d[index]=128);g=0;f=1;for(h=2;64>g;g++){var l=b[g]&15;f+=numBits[l];if(8<f){d[index]|=theBits[l]>>f-8;if(++h>c)return ERRCODE.EC_CANCEL;index++;d[index]=0;f-=8}d[index]|=theBits[l]<<8-f;if(8<=f){f=0;if(++h>c)return ERRCODE.EC_CANCEL;
index++;d[index]=0}}l=g=0;0<b.GetCastleRights()&&(l|=HUFF_CASTLE,g+=4);0<b.GetCPPEPFile()&&(l|=V2d7,g+=3);if(0<g){if(8<f+g){if(++h>c)return ERRCODE.EC_CANCEL;index++;d[index]=0}0<b.GetCastleRights()?(d[index]|=b.GetCastleRights()&15,0<b.GetCPPEPFile()&&(d[index]|=(b.GetCPPEPFile()-1&7)<<4)):0<b.GetCPPEPFile()&&(d[index]|=b.GetCPPEPFile()-1&7)}else 0==f&&--h;d[index]=h|l;return ERRCODE.EC_OK};c.prototype.V2da=function(b,d,c){var g,f,h=0,l;for(g=0;64>g;g++)b[g]=0;g=d[h]&(HUFF_960|HUFF_CASTLE|V2d7);
f=d[h]&31;if(8<f&&f<c){0<(g&HUFF_CASTLE)?(b.SetCastleRights(d[f-1]&15),0<(g&V2d7)?b.setCPPEPFile((d[f-1]>>4&7)+1):b.setCPPEPFile(0)):(b.SetCastleRights(CB.Vb7.V5l),0<(g&V2d7)?b.setCPPEPFile((d[f-1]&7)+1):b.setCPPEPFile(0));h++;b.SetSideToMove(0<(d[h]&128)?CB.Vaz.BLACK:CB.Vaz.WHITE);g=0;c=1;for(l=64;64>g&&c<f;g++){var q=0,r=0;do q<<=1,0<(d[h]&l)&&(q|=1),r++,l>>=1,0==l&&(l=128,h++,c++);while(255==isUniqe[q]&&6>r);if(255==isUniqe[q])break;b[g]=CB.Piece(isUniqe[q])}if(64>g)return b.SetGroundPos(),ERRCODE.EC_CANCEL}else return b.SetGroundPos(),
ERRCODE.EC_CANCEL;b.FindKings();return ERRCODE.EC_OK};c.prototype.V2d8=function(b,d){b.preCalcCtx(d);b.makeMove(d);b.postCalcCtx(d,!0)};return c}();CB.V2db=function(){var c=function(){};c.prototype.numBoard=[];c.prototype.piecePos=[];return c}();
CB.V2cv=function(){var c=function(){this.numBoard=this.V2dc.numBoard;this;piecePos=this.V2dc.piecePos};c.prototype.V2dd=16;c.prototype.V2de=32;c.prototype.V2df=64;c.prototype.V2dg=[0,0,0,0,0,0,0,4,2,1,0,0,0,0,0,3,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,0,0,0,0,0,0,0,6,7,0,0,0,0,0,5,0,0,1,2,3,4,5,6,7,14,1,0,0,0,6,21,8,0,15,0,0,0,22,7,9,0,0,16,0,23,0,0,10,0,0,0,17,0,0,0,11,0,0,25,0,18,0,0,12,3,26,0,0,0,19,4,13,27,2,0,0,0,5,20,0,0,1,0,0,0,1,0,0,2,0,0,0,0,0,3,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,2];c.prototype.V2dh=[0,0,0,0,0,0,0,4,2,1,0,0,0,0,0,3,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,0,0,0,0,0,0,0,6,7,0,0,0,0,0,5,0,0,1,2,3,4,5,6,7,14,1,0,0,0,6,21,8,0,15,0,0,0,22,7,9,0,0,16,0,23,0,0,10,0,0,0,17,0,0,0,11,0,0,25,0,18,0,0,12,3,26,0,0,0,19,4,13,27,2,0,0,0,5,20,0,0,1,0,0,0,1,0,0,2,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,2];
c.prototype.V2di=[0,0,1,1,1,1,2,0,0,0,1,1,1,1,2,0];c.prototype.V2dj=[0,0,1,1,1,1,2,0,0,0,1,1,1,1,2,0];c.prototype.V2dk=111;c.prototype.V2dl=[0,1,9,8,15,7,63,56,57,16,48,1,2,3,4,5,6,7,8,16,24,32,40,48,56,9,18,27,36,45,54,63,15,22,29,36,43,50,57,1,2,3,4,5,6,7,8,16,24,32,40,48,56,1,2,3,4,5,6,7,8,16,24,32,40,48,56,9,18,27,36,45,54,63,15,22,29,36,43,50,57,9,18,27,36,45,54,63,15,22,29,36,43,50,57,17,10,58,49,55,62,14,23,17,10,58,49,55,62,14,23,1,2,9,57,1,2,9,57,1,2,9,57,1,2,9,57,1,2,9,57,1,2,9,57,1,2,9,
57,1,2,9,57,1,2,3,4,5,6,7,8,16,24,32,40,48,56,9,18,27,36,45,54,63,15,22,29,36,43,50,57,1,2,3,4,5,6,7,8,16,24,32,40,48,56,9,18,27,36,45,54,63,15,22,29,36,43,50,57,1,2,3,4,5,6,7,8,16,24,32,40,48,56,9,18,27,36,45,54,63,15,22,29,36,43,50,57,17,10,58,49,55,62,14,23,0,0,1,9,8,15,7,63,56,57,16,48];c.prototype.V2dm=[7,6,63,15,7,6,63,15,7,6,63,15,7,6,63,15,7,6,63,15,7,6,63,15,7,6,63,15,7,6,63,15];c.prototype.V2dn=[0,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,5,5,5,5,5,5,5,
5,5,5,5,5,5,5,21,21,21,21,21,21,21,21,21,21,21,21,21,21,4,4,4,4,4,4,4,4,4,4,4,4,4,4,20,20,20,20,20,20,20,20,20,20,20,20,20,20,3,3,3,3,3,3,3,3,19,19,19,19,19,19,19,19,6,6,6,6,22,22,22,22,38,38,38,38,54,54,54,54,70,70,70,70,86,86,86,86,102,102,102,102,118,118,118,118,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,37,37,37,37,37,37,37,37,37,37,37,37,37,37,36,36,36,36,36,36,36,36,36,
36,36,36,36,36,35,35,35,35,35,35,35,35,0,0,17,17,17,17,17,17,17,17,17,17];c.prototype.V2do=[0,1,11,95,53,39,111,0,0,1,11,95,53,39,111,0,0,237,143,103,67,53,115,0,0,237,143,103,67,53,115,0,0,0,171,227,199,199,119,0,0,0,171,227,199,199,119,0,0,0,0,0,0,0,123,0,0,0,0,0,0,0,123,0,0,0,0,0,0,0,127,0,0,0,0,0,0,0,127,0,0,0,0,0,0,0,131,0,0,0,0,0,0,0,131,0,0,0,0,0,0,0,135,0,0,0,0,0,0,0,135,0,0,0,0,0,0,0,139,0,0,0,0,0,0,0,139,0];c.prototype.V2dp=[0,24,0,1,2,3,26,0,0,25,12,13,14,15,27,0,0,42,4,5,6,7,28,0,0,43,
16,17,18,19,29,0,0,0,8,9,10,11,30,0,0,0,20,21,22,23,31,0,0,0,0,0,0,0,32,0,0,0,0,0,0,0,33,0,0,0,0,0,0,0,34,0,0,0,0,0,0,0,35,0,0,0,0,0,0,0,36,0,0,0,0,0,0,0,37,0,0,0,0,0,0,0,38,0,0,0,0,0,0,0,39,0,0,0,0,0,0,0,40,0,0,0,0,0,0,0,41,0];c.prototype.V2dq=[0,16,48,48,48,48,128,0,0,16,48,48,48,48,128,0];c.prototype.V2dr=[0,32,48,48,48,48,128,0,0,32,48,48,48,48,128,0];c.prototype.moveOffs=[];c.prototype.tableOffs=[];c.prototype.V2ds=[];c.prototype.V2dt=[];c.prototype.V2du=[];c.prototype.pieceOffs=[];c.prototype.pieceInx=
[];c.prototype.maxPiece=[];c.prototype.V2dv=0;c.prototype.V2dw=0;c.prototype.FORMAT_1=1;c.prototype.FULL_MOVE_INFO=235;c.prototype.V2dx=236;c.prototype.KING2_START=237;c.prototype.KING2_END=246;c.prototype.V2dy=254;c.prototype.V2dz=255;c.prototype.V2e0=function(b){return b==FULL_MOVE_INFO};c.prototype.V2dc=new CB.V2db;c.prototype.numBoard=[];c.prototype.piecePos=[];c.prototype.V2e1=function(b,d){b&&b<this.maxPiece[b&CB.Piece.Vb2]&&(this.piecePos[this.pieceInx[b]]=d)};c.prototype.init=function(b,d){var c=
[],g;this.moveOffs=this.V2dg;this.tableOffs=this.V2di;this.V2ds=this.V2dl;this.V2dt=this.V2dn;this.V2du=this.V2dm;this.pieceOffs=this.V2do;this.pieceInx=this.V2dp;this.maxPiece=this.V2dq;this.V2dv=this.V2dk;for(g=0;48>g;g++)this.piecePos[g]=255;for(g=0;16>g;g++)c[g]=g;switch(d){case this.FORMAT_1:for(g=63;0<=g;g--){var f=b[g]&15;0<f?(this.numBoard[g]=c[f],c[f]<this.maxPiece[f&CB.Piece.Vb2]&&(this.piecePos[this.pieceInx[c[f]]]=g,c[f]+=16),CBDebug.assert(0<this.numBoard[g])):this.numBoard[g]=0}break;
default:for(g=0;64>g;g++)f=b[g],0<f?(this.numBoard[g]=c[f],c[f]<maxPiece[f&CB.Piece.Vb2]&&(this.piecePos[pieceInx[c[f]]]=g,c[f]+=16),CBDebug.assert(0<this.numBoard[g])):this.numBoard[g]=0}};c.prototype.V2e2=function(b,d){for(d|=uint(b&Chess.COLOUR);d<maxPiece[d&15];){if(255==piecePos[pieceInx[d]]){piecePos[pieceInx[d]]=piecePos[pieceInx[b]];break}d+=16}numBoard[piecePos[pieceInx[b]]]=d;piecePos[pieceInx[b]]=255;return 0};c.prototype.V2e3=function(b){if(b)if((b&CB.Piece.Vb2)==CB.Piece.PAWN)this.V2e1(b,
255);else if(b<this.maxPiece[b&15]){this.V2e1(b,255);for(var d=this.maxPiece[b&15]-16,c=b;c<d;c+=16){this.piecePos[this.pieceInx[c]]=this.piecePos[this.pieceInx[c+16]];if(255==this.piecePos[this.pieceInx[c]])break;this.numBoard[this.piecePos[this.pieceInx[c]]]=c;this.piecePos[this.pieceInx[c+16]]=255}if(255!=this.piecePos[this.pieceInx[d|b&15]])for(b=this.maxPiece[b&15]|b&15,c=0;64>c;c++)if(this.numBoard[c]==b){this.piecePos[this.pieceInx[b-16]]=c;this.numBoard[c]=b-16;break}}return 0};c.prototype.execute=
function(b,d){if(!b.IsNullMove){var c=b.from,g=b.to,f=this.numBoard[c],h=this.numBoard[g];f||CBDebug.assert("no piece to move");this.numBoard[g]=this.numBoard[c];this.numBoard[c]=0;this.V2e1(f,g);h&&(h&CB.Piece.Vb2)!=CB.Piece.KING&&this.V2e3(h);if(b.isCastling()||b.isProm())b.isProm()?b.IsProm()&&this.V2e2(f,b.prom):b.isCastling()&&(d.getBTM()?b.isLongCastling()?(this.V2e1(this.numBoard[CB.Vbf.Vbr],g+(CB.Vbf.Vbz-CB.Vbf.Vbr)),this.numBoard[g+(CB.Vbf.Vbz-CB.Vbf.Vbr)]=this.numBoard[CB.Vbf.Vbr],this.numBoard[CB.Vbf.Vbr]=
0):b.isShortCastling()&&(this.V2e1(this.numBoard[CB.Vbf.Vda],CB.Vbf.Vcu),this.numBoard[CB.Vbf.Vcu]=this.numBoard[CB.Vbf.Vda],this.numBoard[CB.Vbf.Vda]=0):b.isLongCastling()?(this.V2e1(this.numBoard[CB.Vbf.Vbk],g+(CB.Vbf.Vbs-CB.Vbf.Vbk)),this.numBoard[g+(CB.Vbf.Vbs-CB.Vbf.Vbk)]=this.numBoard[CB.Vbf.Vbk],this.numBoard[CB.Vbf.Vbk]=0):b.isShortCastling()&&(this.V2e1(this.numBoard[CB.Vbf.Vd3],CB.Vbf.Vco),this.numBoard[CB.Vbf.Vco]=this.numBoard[CB.Vbf.Vd3],this.numBoard[CB.Vbf.Vd3]=0));for(c=0;64>c;c++)this.numBoard[c]&&
this.numBoard[c]<this.maxPiece[this.numBoard[c]&7]&&this.piecePos[this.pieceInx[this.numBoard[c]]]!=c&&DUMP("(1) Inx corrupted: "+String(c))}};c.prototype.encode=function(b,d){CBDebug.assert(0<numBoard[b.from]);if(0<numBoard[b.from]&&numBoard[b.from]<maxPiece[b.CB.Piece.Nominal()]){var c=(b.to&56)-(b.from&56)&56|(b.To&7)-(b.From&7)&7;d=pieceOffs[numBoard[b.from]]+moveOffs[64*tableOffs[b.CB.Piece.Nominal()]+c];CBDebug.assert(d<FULL_MOVE_INFO||16<maxPiece[CB.Piece.KING]&&d>=KING2_START&&d<=KING2_END);
c=new CB.Vei;Decode(c,d,(numBoard[b.fr]&Chess.COLOUR)==Chess.COLOUR);CBDebug.assert(c.From==b.From&&c.To==b.To)}};c.prototype.V4i=function(b,d,c){CBDebug.assert(d<this.FULL_MOVE_INFO||16<this.maxPiece[CB.Piece.KING]&&d>=this.KING2_START&&d<=this.KING2_END);var g=this.V2ds[d],f=this.V2dt[d];c&&(f|=CB.Vaz.Vb1,(f&CB.Piece.Vb2)==CB.Piece.PAWN&&(g=this.V2du[d-this.V2dv]));b.from=this.piecePos[this.pieceInx[f]]&63;b.to=(b.from&56)+(g&56)&56|b.from+g&7;b.prom=0;for(b=b.type=0;64>b;b++)0!=this.numBoard[b]&&
this.numBoard[b]<this.maxPiece[this.numBoard[b]&CB.Piece.Vb2]&&this.piecePos[this.pieceInx[this.numBoard[b]]]!=b&&CBDebug.assert(!1)};return c}();
CB.V2cw=function(){var c=function(){};c.prototype.V2e5=[115,113,245,122,119,36,91,210,93,137,56,239,159,205,160,142,246,17,125,46,62,241,57,130,39,88,11,70,204,118,173,135,54,30,199,68,154,186,55,27,168,53,175,123,52,49,129,221,206,1,73,169,18,209,58,165,183,72,31,198,251,6,63,2,101,229,136,32,60,71,41,37,110,250,197,51,43,150,105,163,238,26,191,116,249,207,208,75,215,40,158,111,120,134,234,67,176,86,121,185,124,83,240,24,89,244,13,196,223,78,38,231,103,79,171,145,184,151,149,69,188,181,161,0,195,
44,5,178,172,174,66,133,80,217,254,236,146,132,157,235,96,242,140,87,74,247,100,219,95,99,187,224,85,255,155,22,237,192,148,126,141,167,189,139,180,20,47,23,182,222,179,131,220,3,253,200,127,7,16,33,214,152,211,42,14,97,64,45,77,227,19,29,248,153,156,112,147,109,61,233,225,218,81,144,213,59,84,9,166,104,76,194,228,232,212,48,177,252,203,143,34,10,162,35,98,106,65,90,25,190,193,138,128,92,230,4,15,107,21,243,201,108,102,12,202,114,94,28,216,164,117,82,226,170,8,50];c.prototype.V2e6=[123,49,63,173,
235,126,61,177,254,207,221,26,243,106,184,236,178,17,52,190,165,238,155,167,103,228,81,39,247,191,33,58,67,179,220,223,5,71,110,24,89,70,183,76,125,187,19,166,215,45,255,75,44,41,32,38,10,22,54,205,68,198,20,62,186,226,130,95,35,119,27,69,57,50,144,87,210,188,109,113,132,202,251,101,206,152,97,143,25,104,227,6,233,8,246,148,140,185,224,149,146,64,242,112,209,78,225,237,241,197,72,91,195,1,245,0,83,250,29,4,92,98,3,43,100,18,159,176,232,46,23,171,137,131,93,31,66,9,231,163,142,160,15,219,203,115,136,
196,158,118,77,117,181,193,36,154,194,138,90,12,14,122,222,79,249,55,208,161,40,51,253,114,128,30,129,42,96,216,127,170,164,121,168,56,116,99,37,150,120,162,229,82,157,230,211,124,107,74,59,34,175,240,244,218,28,13,48,85,86,53,7,182,214,204,180,88,248,133,201,147,172,47,169,108,151,200,252,189,212,65,234,111,213,199,94,139,135,156,80,11,102,21,141,239,105,2,16,145,192,84,73,60,217,174,134,153];c.prototype.V4i=function(b,d){return this.V2e5[b-d]};c.prototype.V4i=function(b,d){return this.V2e6[b]+d};
return c}();"use strict";CB.namespace("CB.Server.OnlineLobby");CB.V2e7={V5l:0,V2e8:1350,V2e9:1351,toString:function(c){for(var b in this)if(this[b]==c)return b;return"Unknown OnlineDBUserMsgId: "+c}};
CB.Server.OnlineLobby=function(){var c=function(){this.idGroup=0;this.maxGames=100;this.V1mx=0;this.name="OnlineDB"};CB.inherit(c,CB.Server.V1tg);c.prototype.V1zg=function(b,c,g,f){this.create(b,c,g,f)};c.prototype.V1zm=function(b){};c.prototype.games=[];c.prototype.statboard=new CB.Ve8;c.prototype.statside=0;var b;c.prototype.V2ea=function(d,c){if(0<this.V1v0()){V3c6.panelMgr.dbBook&&V3c6.panelMgr.dbBook.startupdate();b=this;b.statboard=new CB.Ve8;for(var g=0;64>g;g++)b.statboard[g]=d[g];this.statside=
c;g=new CB.Vat(CB.V1nz.V1pt);g.buf.beginSizedWrite();g.buf.writeByte(c);for(var f=0;64>f;f++)g.buf.writeByte(d[f]);g.buf.endSizedWrite();this.send(g)}};c.prototype.search=function(b,c,g){V3c6.panelMgr.dbGames&&V3c6.panelMgr.dbGames.startupdate();var f=new CB.Vat(CB.V1nz.V1pq);this.games=[];this.games.length=0;b.parseFreeText();b.writeToDataBuffer(f.buf);this.maxGames=c||50;this.V1mx=g||0;this.send(f)};c.prototype.getHeaders=function(b){var c=new CB.Vat(CB.V1nz.V1ps);c.buf.V3bi(b.length);for(var g=
0;g<b.length;g++)c.buf.V3bi(b[g]);this.send(c)};c.prototype.V2eb=function(b){var c=new CB.Vat(CB.V1nz.V1pr);c.setVal(1);c.buf.V3bi(1);c.buf.V3bi(b);this.send(c)};c.prototype.V2ec=function(b){var c=new CB.Vat(CB.V1nz.V1pr);c.setVal(2);c.buf.V3bi(b.length);for(var g=0;g<b.length;g++)c.buf.V3bi(b[g]);this.send(c)};c.prototype.V2ed=function(){var b=new CB.Vat(CB.V1nz.V1pu);this.send(b)};c.prototype.V1rz=function(b){if(!this.V1v7(b))try{switch(b.getType()){default:TRACE("Unhandled: "+b.toString());break;
case CB.V1nz.V1p2:this.V2ed();break;case CB.V1nz.V1pz:this.V2ee(b);break;case CB.V1nz.V1q1:this.V2ef(b);break;case CB.V1nz.V1pw:this.V2eg(b);break;case CB.V1nz.V1px:this.V2eh(b);break;case CB.V1nz.V1py:this.V2ei(b);break;case CB.V1nz.Vix:this.V2ej(b)}}catch(c){CB.V46(CB.V1nz.Vlz(b.getType()),c)}};c.prototype.V2ei=function(b){b=b.getBuf();for(var c=[],g=b.V3bx(),f=0;f<g;f++){b.beginSizedRead();var h=b.V3bx(),l=new CB.V9z;if(0<h){for(var q=b.V3bx(),r=0;r<q;r++)l.writeUint8(b.readUint8());q=new CB.Game;
if(!this.V1wf(q,l))break;for(l=0;l<this.games.length;l++)if(this.games[(l+f)%this.games.length].aGameNr==h){this.games[(l+f)%this.games.length].aGame.hdr=q.hdr;this.games[(l+f)%this.games.length].nFlags=CB.OnlineEntryEnum.FLAGS_ONLINE_HEADER;c.push(this.games[(l+f)%this.games.length]);break}}b.endSizedRead()}this.fireOnGames(c)};c.prototype.V2eh=function(b){var c=b.getBuf(),g=c.V3bx();if(1==g&&1==b.getVal())c.beginSizedRead(),b=c.V3bx(),0<b&&(g=new CB.Game,this.V2ek(g,c)&&V3c6.panelMgr.loadGame(g)),
c.endSizedRead();else{for(var f=[],h=0;h<g;h++){c.beginSizedRead();b=c.V3bx();if(0<b){var l=new CB.Game;if(this.V2ek(l,c,b))f.push({aGame:l,aGameNr:b,nFlags:CB.OnlineEntryEnum.FLAGS_ONLINE_HEADER|CB.OnlineEntryEnum.V1mw});else break}c.endSizedRead()}this.fireOnGames(f)}};c.prototype.V2eg=function(b){b=b.getBuf();var c=b.V3bx();b.V3bx();for(var g=0;g<c&&g<this.maxGames;g++){var f=b.V3bx();if(0<f){var h=new CB.V2d2;h.nFlags=CB.OnlineEntryEnum.V2d1;h.aGameNr=f;this.games.push(h)}}if(V3c6.panelMgr&&V3c6.panelMgr.setGames)V3c6.panelMgr.setGames(this.games);
else if(V3c6.panelMgr.V1mu&&V3c6.panelMgr.V1mu()){b=[];for(c=0;c<this.games.length;c++)this.games[c].nFlags==CB.OnlineEntryEnum.V2d1&&b.push(this.games[c].aGameNr);0<b.length&&V3c6.onlineLobby.V2ec(b)}};c.prototype.V2ee=function(d){d=d.getBuf();for(var c=new CB.Position,g=0;64>g;g++)c.board[g]=b.statboard[g];c.sd=b.statside;g=new CB.V2cx;g.V3b4(d,c);this.fireOnStatistics(g)};c.prototype.V2ef=function(b){this.V2el=b.getBuf().V3bx();b=new CB.V1mv;var c,g=0;this.V2em?(c=this.V2em(),g=c.getCurPos().getPlyNum()):
c=new CB.Game;var f=decodeURIComponent(CB.V4a.V4n(CB.V4a.V4l("search")));f?b.freeText=f:(b.setSearchBoard(c.getCurPos().board,c.getCurPos().getSideToMove()),b.setUseBoard(!0));this.search(b,50,g)};c.prototype.V2ej=function(b){try{switch(b.getUserType()){case CB.V2e7.V2e9:this.V2en(b)}}catch(c){CB.V46(CB.V2eo.Vlz(b.getUserType()),c)}};c.prototype.V2ep=function(b,c,g){this.V2er=c;this.V2eq=g;b=new CB.V2es(b,CB.V2et.V2eu);c=new CB.Vat(CB.V1nz.Vix);b.write(c.buf);c.setUserType(CB.V2e7.V2e8);this.send(c)};
c.prototype.V2en=function(b){var c=new CB.V2ev;c.read(b.getBuf());this.V2er(this.V2eq,c)};c.prototype.V2ek=function(b,c,g){try{return b.read2(c)}catch(f){console.log(f)}return!1};c.prototype.V1wf=function(b,c){try{return c.rewind(),b.hdr.read(c),!0}catch(g){CB.V46("OL-LH:"+g)}return!1};c.prototype.V1zo=function(b){V3c6.panelMgr.V1vj(chat.toString())};c.prototype.V209=function(b){};V3bf.initForListeners(c);V3bf.addEvent(c,"Statistics");V3bf.addEvent(c,"Games");return c}();"use strict";
CB.V2et={V2ew:0,V2eu:1,V2ex:2,V2ey:4,V2ez:8,toString:function(c){for(var b in this)if(this[b]==c)return"GameAutoCompleteId: "+b;return"Unknown GameAutoCompleteId: "+c}};CB.V2es=function(){var c=function(b,d){this.V2f0=b;this.m_nFlags=d};c.prototype.write=function(b){b.beginSizedWrite();b.V3by(this.m_nFlags);b.V3bo(this.V2f0);b.endSizedWrite()};return c}();
CB.V2ev=function(){var c=function(){};c.prototype.read=function(b){this.data=[];b.beginSizedRead();for(var d=b.V3c1(),c=0;c<d;c++){var g=b.V3br(80);this.data.push(g)}b.endSizedRead()};return c}();
CB.V2f1=function(){var c=function(){this.instance=localforage.createInstance({name:"Player"})};c.prototype.instance=null;c.prototype.V20g=function(){};c.prototype.V2f2=function(b,d,c){c?d=this.V2f3(c)+","+this.V2f4(d):(d=b.player.player.m_NewCBPlayer.m_aKey,d=this.V2f3(d.m_sLastName)+","+this.V2f4(d.m_sFirstName));this.instance.setItem(d,b)};c.prototype.V2f5=function(b,d,c,g,f,h){b=this.V2f4(b);d=this.V2f3(d);this.instance.getItem(d+","+b).then(function(b){b?f(b):h("Player not found")})};c.prototype.V2f4=
function(b){return b?b.split(/[\s-]/gi)[0]:""};c.prototype.V2f3=function(b){return b.replace(/[\s-]/gi,"")};return c}();"use strict";CB.namespace("CB.Server.PlayerLobby");
CB.Server.PlayerLobby=function(){var c=function(){this.name="Players";this.V2f9=this.V2f8=this.V2f7=0;this.V2fa={};this.V1ti=3E4;this.V2fb=new CB.V2f1;this.V2fc=[]};CB.inherit(c,CB.Server.V1tg);c.prototype.V2fc=null;c.prototype.V1u7=function(b,c){this.V2fd=b;this.superClass.V1u7.apply(this,arguments)};c.prototype.V1ug=function(){if(!this.Vtf){var b=new CB.V1qn(this.user,this.pass,CB.LoginMode.NORMAL,V3c6.V3bg.guid);this.send(b.V3bd())}};c.prototype.logOff=function(){if(this.Vtf&&!this.V2fe){var b=
new CB.Vat(CB.V1nz.V1o4);b.address(this.conn.connectId,CB.V1qt.V1qu);b.buf.V3by(0);this.send(b);this.V1tp.stop();this.V2fe=!0}};new CB.V3bs;c.prototype.V1uz=function(){};c.prototype.V1v0=function(){return this.conn.connectId};c.prototype.V1v1=function(){return this.V1v2};c.prototype.V1uh=function(){return this.V1v3?this.V1v3.V1uh():!0};c.prototype.onConnect=function(){this.V1tp.stop();this.loginMode==CB.LoginMode.GUEST?this.V1ua():this.V1ug()};c.prototype.sendFeedback=function(b,c,g){this.callbackFeedback=
g;g=new CB.Vat(CB.V1nz.V1q4);g.setUserType(CB.V2ff.V2d);g.buf.V3bo(b);g.buf.V3bo(c);g.buf.V3by(V3c6.versionCode.V1nr);g.buf.V3bo(CB.V7a.V7b());this.send(g)};c.prototype.V2fb=null;c.prototype.V2fg=function(b){var c="";b=new Uint8Array(b);for(var g=b.byteLength,f=0;f<g;f++)c+=String.fromCharCode(b[f]);return window.btoa(c)};c.prototype.V2fh=function(b){b=window.atob(b);for(var c=b.length,g=new Uint8Array(c),f=0;f<c;f++)g[f]=b.charCodeAt(f);return g.buffer};c.prototype.addToStorage=function(b,c,g){this.V2fb.V2f2({player:b,
created:new Date},c,g)};var b=function(b,c){var g=b.player,f=new CB.V2fi;f.m_NewCBPlayer=new CB.V2fj;f.m_NewCBPlayer.m_aKey=new CB.V2fk;f.m_NewCBPlayer.m_HighData=new CB.V2fl;f.setFirstName(g.player.m_NewCBPlayer.m_aKey.m_sFirstName);f.setLastName(g.player.m_NewCBPlayer.m_aKey.m_sLastName);f.setNation(g.player.m_NewCBPlayer.m_HighData.m_aNation);f.setTitle(g.player.m_NewCBPlayer.m_HighData.m_aTitle);c({player:f,pic:g.pic})};c.prototype.V2fm=function(d,c,g,f){this.V2fb.V2f5(d,c,0,0,function(d){var c=
d.created;c.setDate(c.getDate()+1);c>new Date?b(d,g):f()},f)};c.prototype.V1i1=function(d,c,g,f,h,l){var q=function(b){this.V2fo(d,c,g,f,function(b){this.addToStorage(b,d,c);h(b)}.bind(this));l&&l()}.bind(this);this.V2fb.V2f5(d,c,g,f,function(d){var c=d.created;c.setMonth(c.getMonth()+1)>new Date?b(d,h):q()}.bind(this),q.bind(this))};c.prototype.V2fp=function(){for(;0<this.V2fc.length;)this.V2fc.pop()()};c.prototype.V2fq=function(b,c,g){if(this.V1tx){this.V2f7++;var f=this;this.V2fa[this.V2f7]={fnCallback:function(g){for(var h=
0;h<g.length;h++)g[h].found&&f.addToStorage(g[h],b[h].firstName,b[h].lastName);c(g)}};var h=new CB.Vat(CB.V1nz.V1q4);g?h.setUserType(CB.V2ff.V2fr):h.setUserType(CB.V2ff.V2fs);h.buf.V3bi(this.V2f7);var l=new CB.V9z;l.V3bi(b.length);for(var q=0;q<b.length;q++)l.V3bo(String.formatEx("{0}#{1}",b[q].lastName,b[q].firstName)),l.V3bi(b[q].elo);h.buf.writeDataBuffer(l);this.send(h)}else this.V2fc.push(function(){this.V2fq(b,c,g)}.bind(this))};c.prototype.V2fo=function(b,c,g,f,h){if(this.V1tx){this.V2f7++;
this.V2fa[this.V2f7]={fnCallback:h,elo:g,year:f,player:{},pic:null};var l=new CB.Vat(CB.V1nz.V1q4);l.setUserType(CB.V2ff.V2ft);l.buf.V3bi(this.V2f7);l.buf.V3bo(b);l.buf.V3bo(c);l.buf.V3bi(g);l.buf.V3bi(f);this.send(l)}else this.V2fc.push(function(){this.V2fo(b,c,g,f,h)}.bind(this))};c.prototype.V1rz=function(b){if(!this.V1v7(b))try{switch(b.getType()){default:TRACE("Unhandled: "+b.toString());break;case CB.V1nz.V1p2:this.V1tx=!0;this.V2fd&&this.V2fd();this.V2fp();this.fireOnConnected();break;case CB.V1nz.V1oa:break;
case CB.V1nz.V1od:break;case CB.V1nz.V1ob:break;case CB.V1nz.V1h:this.V1zo(b);break;case CB.V1nz.V1o7:this.V209(b);break;case CB.V1nz.V1q4:this.V2ej(b)}}catch(c){b=CB.V1nz.Vlz(b.getType()),CB.V46(b,c)}};c.prototype.V2ej=function(b){try{switch(b.getUserType()){case CB.V2ff.V2fu:this.V2fv(b);break;case CB.V2ff.V2fw:this.V2fx(b);break;case CB.V2ff.V2fy:this.V2fz(b);break;case CB.V2ff.V2g0:this.V2g1(b)}}catch(c){b=CB.V2ff.Vlz(b.getUserType()),CB.V46(b,c)}};c.prototype.V2g2=function(b){this.V2g3(b)};c.prototype.V2g4=
function(b){this.V2g3(b)};c.prototype.V2g5=function(b){this.V2g3(b)};c.prototype.V2g6=function(b){this.V2g3(b)};c.prototype.V2g7=function(b){b.getBuf().V3bx()};c.prototype.V2g8=function(b){this.V2g3(b)};c.prototype.V2fv=function(b){b=b.getBuf();var c=b.V3bx(),g=new CB.V2fi;g.m_NewCBPlayer=new CB.V2fj;g.m_NewCBPlayer.m_aKey=new CB.V2fk;g.m_NewCBPlayer.m_HighData=new CB.V2fl;if(b.V3c5())if(g.setFirstName(b.V3br(100)),g.setLastName(b.V3br(100)),b.readInt(),g.setNation(b.readInt()),g.setTitle(b.readShort()),
0!=b.readInt()){for(var f=b.V3bx(),h=[],l=0;l<f;l++)h.push(b.readUint8());this.V2fa[c].fnCallback({player:g,pic:h})}else this.V2fa[c].fnCallback({player:g})};c.prototype.V2fz=function(b){b=b.getBuf();var c=b.V3bx();b.V3c1();for(var g=[];b.nPos<b.nSize;){var f=new CB.V2fi;f.m_NewCBPlayer=new CB.V2fj;f.m_NewCBPlayer.m_aKey=new CB.V2fk;f.m_NewCBPlayer.m_HighData=new CB.V2fl;var h=b.V3c5();f.setLastName(b.V3br(100));f.setFirstName(b.V3br(100));b.V3bx();f.setNation(b.V3bx());f.setTitle(b.readShort());
g.push({found:h,player:f})}this.V2fa[c].fnCallback(g)};c.prototype.V2g1=function(b){b=b.getBuf();var c=b.V3bx();b.V3bx();for(var g=[];b.nPos<b.nSize;){var f=new CB.V2fi;f.m_NewCBPlayer=new CB.V2fj;f.m_NewCBPlayer.m_aKey=new CB.V2fk;f.m_NewCBPlayer.m_HighData=new CB.V2fl;var h=b.V3c5();f.setLastName(b.V3br(100));f.setFirstName(b.V3br(100));b.V3bx();f.setNation(b.V3bx());f.setTitle(b.readShort());var l=null;if(0!=b.V3c1())for(var q=b.V3bx(),l=[],r=0;r<q;r++)l.push(b.readUint8());g.push({found:h,player:f,
pic:l})}this.V2fa[c].fnCallback(g)};c.prototype.V2g3=function(b){b=b.getBuf();if(1==b.V3bx()){b.V3bx();b.V3bx();var c=new CB.V2fi;c.V3b4(b);this.V2fn(c,this.me)}else{b.V3bx();if(2==b.V3bx())for(var g=b.V3bx(),c=[],f=0;f<g;f++)c.push(b.ReadByte());this.V2g9(c,this.me)}};c.prototype.V2fx=function(b){alert("thanks")};c.prototype.V1zo=function(b){var c=new CB.ChatData;c.fromSocketsMsg(b);c.isToSession()?(b=this.V14i.V2ga(c.V1rb()),b.length&&(c.strMsg="("+b+"): "+c.strMsg),V3c6.panelMgr.V1vj(c.toString(),
"LogKibitzChat")):V3c6.panelMgr.V1vj(c.toString())};c.prototype.V209=function(b){b.getBuf().readInt();this.fireOnConnected()};c.prototype.V1ub=function(){};c.prototype.send=function(b){try{0==b.V3bk()&&b.V3bn(this.V1v0()),0==b.getIdReceiver()&&b.setIdReceiver(CB.V1qt.V1qu),this.conn.sendMessage(b,!0)}catch(c){this.V1tt.isActive()||this.V1vn||(this.V1tt.runOnce(Math.min(6E4,5E3+1E3*this.V3bb),function(){this.V1s3(!0)}.bind(this)),this.V3bb++)}};V3bf.initForListeners(c);c.prototype.V2gb=function(){for(var b=
0;10>b;b++)switch(Math.floor(15*Math.random())){case 0:this.V1s3();break;case 1:this.V2gc(13);break;case 2:this.V2gc(14);break;case 3:this.V2gd();break;case 4:this.V2ge();break;case 5:this.lists.V2gf(!0);break;case 7:this.lists.V2gg();this.lists.V2gh();break;case 8:this.lists.V2gi();this.lists.V2gj();break;case 9:case 10:case 11:case 12:var c=new CB.Vat(7E3+Math.floor(100*Math.random()));c.address(this.V1v0(),CB.V1qt.V1qu);c.getType()!=CB.V1nz.V1o4&&c.getType()!=CB.V1nz.V1o3&&this.send(c);break;case 13:case 14:c=
new CB.Vat(CB.V1nz.Vix),c.setUserType(1E3+Math.floor(100*Math.random())),c.address(this.V1v0(),CB.V1qt.V1qu),this.send(c)}};V3bf.initForListeners(c);V3bf.addEvent(c,"Connected");return c}();"use strict";CB.V2gk=function(){var c=function(){};c.prototype.read=function(b){this.V2gl=b.V3br(100);this.V2gm=b.V3br(100);this.V2gn=b.V3bx();this.V2go=b.V3bx()};return c}();"use strict";
CB.V2fl=function(){var c=function(){};c.prototype.V3b4=function(b){this.setDeathDate(b.V3bt());this.setCurrentTitle(new CB.V1hw(b.V3bv()));this.setNation(b.V3bv());this.V2gp(b.V3bv());this.setIsMale(b.V3c5())};c.prototype.setDeathDate=function(b){this.V2gq=b};c.prototype.V2gr=function(){return this.V2gq};c.prototype.getCurrentTitle=function(){return this.m_aTitle};c.prototype.setCurrentTitle=function(b){this.m_aTitle=b};c.prototype.V2gs=function(){return this.m_aNation};c.prototype.setNation=function(b){this.m_aNation=
b};c.prototype.getBornNation=function(){return this.V2gt};c.prototype.V2gp=function(b){this.V2gt=b};c.prototype.getIsMale=function(){return this.V2gu};c.prototype.setIsMale=function(b){this.V2gu=b};return c}();"use strict";
CB.V2gv=function(){var c=function(){};c.prototype.read=function(b){this.m_Titles=[];this.m_TitleDate=[];this.m_OtherNations=[];this.m_ChangeDate=[];for(var d=0;5>d;d++){var c=new CB.V1hw(b.V3bv());this.m_Titles.push(c);c=b.V3bt();this.m_TitleDate.push(c)}this.m_ChangedBornNation=b.V3bt();for(d=0;10>d;d++)c=b.V3bv(),this.m_OtherNations.push(c),c=b.V3bt(),this.m_ChangeDate.push(c)};c.prototype.V2gw=function(b){return m_Titles[b]};c.prototype.V2gx=function(b,d){m_Titles[b]=d};c.prototype.V2gy=function(b){return m_TitleDate[b]};
c.prototype.V2gz=function(b,d){m_TitleDate[b]=d};c.prototype.V2h0=function(){return m_ChangedBornNation};c.prototype.V2h1=function(b){m_ChangedBornNation=b};c.prototype.V2h2=function(b){return m_OtherNations[b]};c.prototype.V2h3=function(b,d){m_OtherNations[b]=d};c.prototype.V2h4=function(b){return m_ChangeDate[b]};c.prototype.V2h5=function(b,d){m_ChangeDate[b]=d};c.prototype.getMaxTitles=function(){return 5};c.prototype.getMaxNations=function(){return 10};return c}();"use strict";
CB.V2fj=function(){var c=function(){this.m_aKey=new CB.V2fk};c.prototype.V3b4=function(b,d){this.m_aKey=new CB.V2fk;if(0<(d&CB.V2fi.prototype.V2f6.PL_DATA_KEY)&&!this.m_aKey.V3b4(b))return!1;this.m_HighData=new CB.V2fl;0<(d&CB.V2fi.prototype.V2f6.PL_DATA_HIGH)&&this.m_HighData.V3b4(b);this.V2h6=new CB.V2gv;0<(d&CB.V2fi.prototype.V2f6.PL_DATA_LOW)&&this.V2h6.read(b);return!0};c.prototype.getLastName=function(){return this.m_aKey.getLastName()};c.prototype.setLastName=function(b){this.m_aKey.setLastName(b)};
c.prototype.getFirstName=function(){return this.m_aKey.getFirstName()};c.prototype.setFirstName=function(b){this.m_aKey.setFirstName(b)};c.prototype.V2h7=function(b){this.m_aKey=b};c.prototype.getKey=function(){return this.m_aKey};c.prototype.V2h8=function(){return this.m_HighData};c.prototype.V2h9=function(){return this.V2h6};c.prototype.getMaxTitles=function(){return this.V2ha().getMaxTitles()};c.prototype.getMaxNations=function(){return this.V2ha().getMaxNations()};return c}();"use strict";
CB.V2fi=function(){var c=function(){};c.prototype.V2hb={PFN_RAW:0,PFN_ARR:1,PFN_BMP:2};c.prototype.V2f6={PL_DATA_KEY:1,PL_DATA_HIGH:2,PL_DATA_LOW:4,PL_DATA_ELO:8,PL_DATA_ONE_ELO:16,PL_DATA_PICS:32,PL_DATA_ONE_PIC:64};c.prototype.V2hc=c.prototype.V2f6.PL_DATA_KEY+c.prototype.V2f6.PL_DATA_HIGH+c.prototype.V2f6.PL_DATA_LOW+c.prototype.V2f6.PL_DATA_ELO+c.prototype.V2f6.PL_DATA_PICS;c.prototype.V3b4=function(b){try{b.beginSizedRead(),this.V2hd=b.V3c1(),this.m_NewCBPlayer=new CB.V2fj,this.m_NewCBPlayer.V3b4(b,
this.V2hd),this.V2he=new CB.V2hf,0<(this.V2hd&this.V2f6.PL_DATA_ELO)?this.V2he.V3b4(b):0<(this.V2hd&this.V2f6.PL_DATA_ONE_ELO)&&this.V2he.V2hg(b),this.V2hh=new CB.V2hi,0<(this.V2hd&this.V2f6.PL_DATA_PICS)?this.V2hh.V3b4(b):0<(this.V2hd&this.V2f6.PL_DATA_ONE_PIC)&&this.V2hh.V3b4(b),this.V2hj(b.V3bt()),b.endSizedRead()}catch(d){return!1}return!0};c.prototype.V2hk=function(){return this.m_NewCBPlayer.V2hl()};c.prototype.V2hm=function(){return this.m_NewCBPlayer.V2hl().GetCBId()};c.prototype.V2hn=function(b){this.m_NewCBPlayer.V2hl().SetCBId(b)};
c.prototype.V2ho=function(){return this.V2hp};c.prototype.V2hq=function(b){this.V2hp=b};c.prototype.V2hr=function(){return this.m_NewCBPlayer.V2hl()};c.prototype.V2hs=function(){return this.m_NewCBPlayer};c.prototype.V2ht=function(){return this.V2he};c.prototype.V2hu=function(){return this.V2hh};c.prototype.V2hv=function(){return 0<this.V2hh.Count()};c.prototype.getFirstName=function(){return this.m_NewCBPlayer.getFirstName()};c.prototype.setFirstName=function(b){this.m_NewCBPlayer.setFirstName(b)};
c.prototype.V2hw=function(b){this.m_NewCBPlayer.setFirstName(b)};c.prototype.getLastName=function(){return this.m_NewCBPlayer.getLastName()};c.prototype.setLastName=function(b){this.m_NewCBPlayer.setLastName(b)};c.prototype.V2hx=function(){return this.V2hk().GetBirthDate()};c.prototype.setBirthDate=function(b){this.V2hk().setBirthDate(b)};c.prototype.getIdenticalCount=function(){return this.V2hk().getIdenticalCount()};c.prototype.V2hy=function(){return this.m_NewCBPlayer.V2h8().getCurrentTitle()};
c.prototype.setTitle=function(b){this.m_NewCBPlayer.V2h8().setCurrentTitle(b)};c.prototype.V2gs=function(){return this.m_NewCBPlayer.V2h8().GetNation()};c.prototype.setNation=function(b){this.m_NewCBPlayer.V2h8().setNation(b)};c.prototype.getBornNation=function(){return this.m_NewCBPlayer.V2h8().getBornNation()};c.prototype.V2gr=function(){return this.m_NewCBPlayer.V2h8().GetDeathDate()};c.prototype.setDeathDate=function(b){this.m_NewCBPlayer.V2h8().setDeathDate(b)};c.prototype.V2hz=function(){return this.m_NewCBPlayer.V2h8().getIsMale()};
c.prototype.setIsMale=function(b){this.m_NewCBPlayer.V2h8().setIsMale(b)};c.prototype.V2i0=function(b){this.V2hd=b};c.prototype.V2i1=function(){return this.V2hd};c.prototype.V2i2=function(){return this.V2i3};c.prototype.V2i4=function(b){this.V2i5=b};c.prototype.V2i6=function(){return this.V2i5};c.prototype.V2hj=function(b){this.V2i7=b};c.prototype.V2i8=function(){return this.V2i7};return c}();"use strict";
CB.V2fk=function(){var c=function(b,d){this.m_nIdenticalCount=0;this.V2i9=-1;this.m_sFirstName=b;this.m_sLastName=d};c.prototype.write=function(b){b.V3bo(this.m_sLastName);b.V3bo(this.m_sFirstName);b.V3bh(this.m_aBirthDate);b.V3bj(this.m_nIdenticalCount);b.V3bi(this.V2i9)};c.prototype.V3b4=function(b){this.m_sLastName=b.V3br(100);this.m_sFirstName=b.V3br(100);this.m_aBirthDate=b.V3bt();this.m_nIdenticalCount=b.V3bv();this.V2i9=b.V3bx();return!0};c.prototype.Vds=function(){var b=m_sLastName;return b+=
", "+m_sFirstName};c.prototype.V2ia=function(){for(var b=0,d=0;d<m_sLastName.Length;d++)b+=m_sLastName[d];for(d=0;d<m_sFirstName.Length;d++)b+=m_sFirstName[d];b+=m_aBirthDate.GetYear();return b+=m_nIdenticalCount};c.prototype.getFirstName=function(){return this.m_sFirstName};c.prototype.setFirstName=function(b){this.m_sFirstName=b};c.prototype.getLastName=function(){return this.m_sLastName};c.prototype.setLastName=function(b){this.m_sLastName=b};c.prototype.V2hx=function(){return this.m_aBirthDate};
c.prototype.setBirthDate=function(b){this.m_aBirthDate=b};c.prototype.getIdenticalCount=function(){return this.m_nIdenticalCount};c.prototype.V2ib=function(b){this.m_nIdenticalCount=b};c.prototype.V2ic=function(){this.m_nIdenticalCount++};c.prototype.V2hm=function(){return this.V2i9};c.prototype.V2hn=function(b){this.V2i9=b};c.prototype.m_aBirthDate=new CB.Date;return c}();
CB.V2ff={V2id:1300,V2ie:1301,V2if:1302,V2ig:1303,V2ih:1304,V2ii:1305,V2ij:1306,V2ik:1307,V2il:1308,V2im:1309,V2in:1310,V2io:1311,V2ip:1312,V2iq:1313,V2ir:1314,V2is:1315,V2it:1316,V2iu:1317,V2d:1320,V2fw:1321,V2ft:1322,V2fu:1323,V2fs:1324,V2fy:1325,V2fr:1326,V2g0:1327,toString:function(c){for(var b in this)if(this[b]==c)return b;return"Unknown PBUserMsgId: "+c},Vlz:function(c){return"PlUserMsgId="+c}};"use strict";
CB.V2hf=function(){var c=function(){};c.prototype.V3b4=function(b){b.beginSizedRead();this.clear();var d=b.V3bx();if(4096<d)return!1;if(0<d)for(var c=b.V3c5(),g=0;g<d;g++){var f=new CB.V2iv(c);f.V3b4(b);this.V2iw.push(f)}b.endSizedRead();return!0};c.prototype.V2hg=function(b){return this.ReadFromDataBuffer(b)};c.prototype.clear=function(){this.V2iw?this.V2iw.clear():this.V2iw=[]};c.prototype.V2ix=function(b){for(var d=this.count()-1,c="",g=0;g<b;g++){var f=d-1;if(0<=f){for(var h=this.V2iw[d].getDate().month;0<=
f&&6>Math.abs(h-this.V2iw[f].getDate().month);)f--;0<=f&&(d=this.V2iw[d].getNElo()-this.V2iw[f].getNElo(),c=10<=Math.abs(d)?0<d?"+"+c:"-"+c:"0"+c);d=f}}return c.length==b?c:""};c.prototype.V2iy=function(b){b=this.V2iw[0].getNElo();this.V2iw[0].getDate();for(var d=0;d<this.V2iw.length;d++){var c=this.V2iw[d];c.getNElo()>b&&(b=c.getNElo(),c.getDate())}return b};c.prototype.V2iz=function(b){b=this.V2iw[0].getNElo();this.V2iw[0].getDate();for(var d=0;d<this.V2iw.length;d++){var c=this.V2iw[d];c.getNElo()<
b&&(b=c.getNElo(),c.getDate())}return b};c.prototype.V2j0=function(b,d){for(var c=0,g=0,f=0;f<this.V2iw.length;f++){var h=this.V2iw[f];h.getDate().getYear()>=b&&h.getDate().getYear()<=d&&(c+=h.getNElo(),g++)}return 0<g?c/g:0};c.prototype.V2j1=function(b){b=0;0<this.V2iw.length&&(b=this.V2iw[this.V2iw.length-1].getNElo());return b};c.prototype.count=function(){return this.V2iw.length};c.prototype.get=function(b){return b<this.V2iw.length?this.V2iw[b]:new V2iv};return c}();"use strict";
CB.V2iv=function(){var c=function(b){this.bOld=b};c.prototype.V3b4=function(b){b.beginSizedRead();this.V2j2=b.V3bx();this.V2go=b.V3bv();this.aDate=b.V3bt();this.V2j3=b.V3c5();this.V2j4=new CB.V2j5;this.V2j4.V3b4(b);this.V2j6=b.V3bx();b.endSizedRead()};c.prototype.getDate=function(){return this.aDate};c.prototype.getNElo=function(){return this.V2j4.V2j7()};return c}();"use strict";
CB.V2j5=function(){var c=function(){};c.prototype.V3b4=function(b){this.nFlags=b.V3bv();this.V2j8=b.V3bv();this.V2gn=b.readUint8();this.V2j9=b.V3bv();return!0};c.prototype.V2j7=function(){return this.V2j8};return c}();"use strict";
CB.V2hi=function(){var c=function(){};c.prototype.V3b4=function(b){var d=b.V3bv();this.clear();for(var c=0;c<d;c++){var g=new CB.V2ja;g.V3b4(b);this.append(g)}};c.prototype.V2jb=function(b){return this.V2jc[b]};c.prototype.append=function(b){this.V2jc.push(b)};c.prototype.count=function(){return this.V2jc.Count};c.prototype.clear=function(){this.V2jc?this.V2jc.clear():this.V2jc=[]};return c}();"use strict";
CB.V2ja=function(){var c=function(){};c.prototype.V3b4=function(b){this.V2jd=b.V3bx();this.aDate=b.V3bt();this.V2je=b.V3bv();this.sName=b.V3b7(100);this.V2jf=b.V3b7(100);this.V2jg=b.V3b7(100);this.V2jh=b.V3c5()};c.prototype.writeToDataBuffer=function(b){b.V3bi(this.V2jd);b.V3bh(this.aDate);b.V3bj(this.V2je);b.V3b6(this.sName);b.V3b6(this.V2jf);b.V3b6(this.V2jg);b.V3c4(this.V2jh)};return c}();"use strict";
CB.V1hw=function(){var c=function(b){this.eTitleCode=b};c.prototype.Code={CBTC_NONE:0,CBTC_MARKED:1,CBTC_HGM:2,CBTC_WFM:4,CBTC_WIM:8,CBTC_FM:16,CBTC_IM:32,CBTC_WWCH:64,CBTC_WCH:128};c.prototype.Code.V2ji=c.prototype.Code.CBTC_WIM|c.prototype.Code.CBTC_WFM;c.prototype.Code.V2jj=c.prototype.Code.CBTC_IM|c.prototype.Code.CBTC_FM;c.Vds=function(b){if((b&c.prototype.Code.V2jj)==c.prototype.Code.V2jj)return"GM";if((b&c.prototype.Code.V2ji)==c.prototype.Code.V2ji)return"WGM";if(b&c.prototype.Code.CBTC_WCH)return"WCH";
if(b&c.prototype.Code.CBTC_WWCH)return"WWCH";if(b&c.prototype.Code.CBTC_WIM)return"WIM";if(b&c.prototype.Code.CBTC_WFM)return"WFM";if(b&c.prototype.Code.CBTC_IM)return"IM";if(b&c.prototype.Code.CBTC_FM)return"FM"};c.prototype.V2jk=function(){var b="";0<(eTitleCode&c.prototype.Code.CBTC_WCH)&&(b+="WCH, ");0<(eTitleCode&c.prototype.Code.CBTC_WWCH)&&(b+="WWCH, ");(eTitleCode&c.prototype.Code.V2jj)==c.prototype.Code.V2jj?b+="GM, ":0<(eTitleCode&c.prototype.Code.CBTC_IM)?b+="IM, ":0<(eTitleCode&c.prototype.Code.CBTC_FM)&&
(b+="FM, ");(eTitleCode&c.prototype.Code.V2ji)==c.prototype.Code.V2ji?b+="WGM, ":0<(eTitleCode&c.prototype.Code.CBTC_WIM)?b+="WIM, ":0<(eTitleCode&c.prototype.Code.CBTC_WFM)&&(b+="WFM, ");0<(eTitleCode&c.prototype.Code.CBTC_HGM)&&(b+="HGM, ");0<(eTitleCode&c.prototype.Code.CBTC_MARKED)&&(b+="VIP, ");return b};return c}();"use strict";
CB.V2jl=function(){var c=function(){this.V2jp=this.V2jo=this.V2jn=this.V2jm=0};c.prototype.writeToDataBuffer=function(b){b.beginSizedWrite();b.V3bi(this.V2jq);b.V3bi(this.V2jn);b.V3bi(this.V2jo);b.V3bi(this.V2jp);b.endSizedWrite();return!0};return c}();
CB.V2jr=function(){var c=function(){};c.prototype.numBits=[1,6,6,5,5,5,3,1,1,6,6,5,5,5,3,1];c.prototype.theBits=[0,32,34,18,20,22,6,0,0,33,35,19,21,23,7,0];c.prototype.isUniqe=[0,255,255,255,255,255,6,14,255,255,255,255,255,255,255,255,255,255,3,11,4,12,5,13,255,255,255,255,255,255,255,255,1,9,2,10,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255];c.prototype.HUFF_960=128;c.prototype.HUFF_CASTLE=64;c.prototype.V2d7=32;c.prototype.V2d9=
function(b,d,c){var g,f,h,l=0;d[l]=0;l++;d[l]=0;b.getBTM()&&(d[l]=128);g=0;f=1;for(h=2;64>g;g++){var q=b.board[g]&15;f+=this.numBits[q];if(8<f){d[l]|=this.theBits[q]>>f-8;if(++h>c)return 1;l++;d[l]=0;f-=8}d[l]|=this.theBits[q]<<8-f;if(8<=f){f=0;if(++h>c)return 1;l++;d[l]=0}}q=g=0;0<b.getCastleRights()&&(q|=this.HUFF_CASTLE,g+=4);0<b.getCPPEPFile()&&(q|=this.V2d7,g+=3);if(0<g){if(8<f+g){if(++h>c)return 1;l++;d[l]=0}0<b.getCastleRights()?(d[l]|=b.getCastleRights()&15,0<b.getCPPEPFile()&&(d[l]|=(b.getCPPEPFile()-
1&7)<<4)):0<b.getCPPEPFile()&&(d[l]|=b.getCPPEPFile()-1&7)}else 0==f&&--h;d[0]=h|q;for(b=0;b<=l;b++)d[b]&=255;return 0};c.prototype.V2js=function(b,d,c){var g,f,h=0,l;b.ep=CB.Position.NOEP;for(g=0;64>g;g++)b.board[g]=0;g=d[h]&(this.HUFF_960|this.HUFF_CASTLE|this.V2d7);f=d[h]&31;if(8<f&&f<c){0<(g&this.HUFF_CASTLE)?(b.setCastleRights(d[f-1]&15),b.ep=0<(g&this.V2d7)?d[f-1]>>4&7:CB.Position.NOEP):(b.setCastleRights(CB.Vb7.V5l),b.ep=0<(g&this.V2d7)?d[f-1]&7:CB.Position.NOEP);h++;0<(d[h]&128)?b.setBTM(!0):
b.setBTM(!1);g=0;c=1;for(l=64;64>g&&c<f;g++){var q=0,r=0;do q<<=1,0<(d[h]&l)&&(q|=1),r++,l>>=1,0==l&&(l=128,h++,c++);while(255==this.isUniqe[q]&&6>r);if(255==this.isUniqe[q])break;b.board[g]=this.isUniqe[q]}if(64>g)return b.initStartPos(),1}else return b.initStartPos(),1;return 0};return c}();"use strict";
CB.HashPosition=function(){var c=function(b){this.m_cPos=[];for(var d=0;24>d;d++)this.m_cPos.push(0);b&&(new CB.V2jr).V2d9(b,this.m_cPos,this.m_cPos.length)};c.prototype.V2jt=function(){return this.m_cPos[0]&31};c.prototype.IsSet=function(){return 0!=this.m_cPos[0]};c.prototype.Clear=function(){for(var b=0;b<m_cPos.Length;b++)this.m_cPos[b]=0};c.prototype.GetBTM=function(){return 0!=(this.m_cPos[1]&128)};c.prototype.HashPosition=function(b,d){};c.prototype.writeToDataBuffer=function(b){b.beginSizedWrite();
b.writeByteArray(this.m_cPos,this.m_cPos.length);b.endSizedWrite();return!0};c.prototype.V3b4=function(b){b.beginSizedRead();for(var d=0;d<this.m_cPos.length;d++)this.m_cPos[d]=b.readByte();b.endSizedRead();return!1};c.prototype.getPosition=function(){var b=new CB.V2jr,d=new CB.Position;b.V2js(d,this.m_cPos,this.m_cPos.length);return d};c.prototype.FillPos=function(b){};c.prototype.V2ju=function(b){};c.prototype.V2jv=function(b){};c.prototype.V2jw=function(b){};c.prototype.IsStartPosition=function(){return!1};
c.prototype.IsFinalPosition=function(){return!1};c.prototype.V2jx=function(){return m_sStartPosition};return c}();"use strict";
CB.V2jy=function(){var c=function(){this.m_nIdDiscoverer=0;this.pos=new CB.HashPosition;this.move=[]};c.V2jz=function(){for(var b=new CB.V2jy,d=0;d<CB.TBRAIN.HASH_LINE_CNT;d++)b.move.push(new CB.V2k0);return b};c.prototype.writeToDataBuffer=function(b){b.beginSizedWrite();pos.writeToDataBuffer(b);b.writeUShort(CB.TBRAIN.HASH_LINE_CNT);for(var d=0;d<CB.TBRAIN.HASH_LINE_CNT;++d)m_aMove[d].writeToDataBuffer(b);b.V3bu(m_nPopularity);b.writeUnsigned(m_nIdDiscoverer);b.writeInt(m_nFlags);b.writeUnsigned(TBrainConstants.CALCTIME_REASONABLE_THRESH);
b.writeUnsigned(TBrainConstants.CALCTIME_DISCOVERY);b.writeUnsigned(TBrainConstants.CALCTIME_DONATION);b.writeUnsigned(TBrainConstants.CALCTIME_DEEP);b.writeUnsigned(m_nGames);b.wndSizedWrite();return!0};c.prototype.V3b4=function(b){b.beginSizedRead();this.pos.V3b4(b);for(var d=b.V3bv(),c=0;c<CB.V1mk.prototype.HASH_LINE_CNT&&c<d;++c)null==this.move[c]&&(this.move[c]=new CB.V2k0),this.move[c].V3b4(b);this.m_nPopularity=b.readUint64();this.m_nIdDiscoverer=b.V3bx();this.m_nFlags=b.V3bx();this.V2k1=b.V3bx();
this.V2k2=b.V3bx();this.V2k3=b.V3bx();this.V2k4=b.V3bx();0==this.V2k4&&(this.V2k4=V1mk.prototype.CALCTIME_DEEP);this.m_nGames=b.V3bv();b.endSizedRead();return!0};c.prototype.clear=function(){for(var b=0;b<TBRAIN.HASH_LINE_CNT;++b)m_aMove[b].clear();pos.Clear();m_nGames=m_nPopularity=m_nFlags=m_nIdDiscoverer=0};c.generateLine=function(b,d,c,g){g=g||3;var f="",h=[];if(d&&d.m_aLine){h=this.V2k5(ObjUtil.clone(b),d.m_aLine);b=new CB.Vie(CB.V3b2);d=c.game.getStartPos().getBTM();for(var l=0;l<h.length&&
l<g;l++)if(h[l].from!=h[l].to){var q=b.getMoveNota(h[l]),r=b.getStrMoveNumInLine(l,c.getCurPos().getPlyNum(),d),f=f+(r+q);l<h.length-1&&(f+=" ")}}return{line:h,lineNota:f}};c.V2k5=function(b,d){for(var c=[],g=0;g<d.length;g++){var f=new CB.Vei(d[g]&63,d[g]>>6&63,d[g]>>12&7);b.isLegalMove(f)&&(b.preCalcCtx(f),b.makeMove(f),b.postCalcCtx(f,!0),c.push(f))}return c};c.prototype.V2k6=function(){};c.prototype.Count=function(){return TBRAIN.HASH_LINE_CNT};c.prototype.Empty=function(){return m_aMove[0].Empty()};
c.prototype.FillPos=function(b){pos.FillPos(b)};c.prototype.V2k7=function(){return pos};c.prototype.GetMove=function(b){CBDebug.assert(b<TBRAIN.HASH_LINE_CNT);return b<TBRAIN.HASH_LINE_CNT?m_aMove[b]:m_aMove[0]};c.prototype.V2k8=function(b,d){CBDebug.assert(d<TBRAIN.HASH_LINE_CNT);d<TBRAIN.HASH_LINE_CNT&&(m_aMove[d]=b)};c.prototype.V2k9=function(){return m_nPopularity};c.prototype.V2ka=function(b){m_nPopularity=b};c.prototype.V2kb=function(){return m_nGames};c.prototype.V2kc=function(){return m_nIdDiscoverer};
c.prototype.V2kd=function(b){m_nIdDiscoverer=b};c.prototype.V2ke=function(){return V2cd(1)};c.prototype.V2kf=function(b){SETFLAG(1,b)};c.prototype.V2kg=function(){return V2k1};c.prototype.V2kh=function(){return V2k2};c.prototype.V2ki=function(){return V2k3};c.prototype.V2kj=function(){return V2k4};return c}();"use strict";
CB.V2kk=function(){var c=function(){this.V2kl=new CB.V2jl;this.m_nFlags=this.m_nSpeed=0};c.prototype.read=function(b){};c.prototype.V2km=function(){return this.V2kl};c.prototype.V2kn=function(){return 0<this.m_nSpeed};c.prototype.V2ko=function(){return m_nSpeed};c.prototype.V2kp=function(b){m_nSpeed=b};c.prototype.V2kq=function(){return V2cd(1)};c.prototype.writeToDataBuffer=function(b){b.beginSizedWrite();this.V2kl.writeToDataBuffer(b);b.V3bi(this.m_nSpeed);b.V3bi(this.m_nFlags);b.endSizedWrite();
return!0};c.prototype.ReadFromDataBuffer=function(b){return!0};c.prototype.V2kr=function(){var b=new CBGuid;b.CreateFromHardware();return b};return c}();"use strict";
CB.ClientMachineInfo=function(){var c=function(){};CB.inherit(c,CB.V2kk);c.prototype.read=function(b){this.V2gl=b.V3br(100);this.V2gm=b.V3br(100);this.V2gn=b.V3bx();this.V2go=b.V3bx()};c.prototype.Init=function(){m_nSpeed=s_nSpeed;s_bInited=!0};c.prototype.V2ko=function(){s_bInited&&0!=s_nSpeed||(Init(),0==s_nSpeed&&(s_nSpeed=1E5));return s_nSpeed};return c}();"use strict";
CB.GamePerformanceStats=function(){var c=function(){};c.prototype.Vfe=function(){this.V2gm=this.V2gl="";this.m_nResultSum=this.m_nResultCount=this.m_nEloSum=this.m_nEloCount=this.V2go=this.V2gn=0};c.prototype.read=function(b){this.V2gl=b.V3br(100);this.V2gm=b.V3br(100);this.V2gn=b.V3bx();this.V2go=b.V3bx()};c.prototype.V2ks=function(b,d){var e=new c(b);e.m_nEloCount+=d.m_nEloCount;var g=e.m_nEloSum+d.m_nEloSum;g>uint.MaxValue-1E4?(e.m_nEloSum=uint(g/2),e.m_nEloCount/=2):e.m_nEloSum=g;var g=e.m_nResultSum+
d.m_nResultSum,f=e.m_nResultCount+d.m_nResultCount;g>uint.MaxValue-1E4||f>uint.MaxValue-1E4?(e.m_nResultSum=g/2,e.m_nResultCount=f/2):(e.m_nResultSum=g,e.m_nResultCount=f);return e};c.prototype.writeToDataBuffer=function(b){b.WriteUnsigned(m_nEloSum);b.WriteUnsigned(m_nEloCount);b.WriteUnsigned(m_nResultSum);b.WriteUnsigned(m_nResultCount)};c.prototype.V3b4=function(b){this.m_nEloSum=b.V3bx();this.m_nEloCount=b.V3bx();this.m_nResultSum=b.V3bx();this.m_nResultCount=b.V3bx();return!0};c.prototype.V2kt=
function(){return 0!=m_nResultCount?500*m_nResultSum/m_nResultCount:0};c.prototype.getSortEloAv=function(){return 0!=this.m_nEloCount?this.m_nEloSum/this.m_nEloCount:0};c.prototype.getFPercent=function(b){return 0!=this.m_nResultCount?b?100-50*this.m_nResultSum/this.m_nResultCount:50*this.m_nResultSum/this.m_nResultCount:0};c.prototype.getNGames=function(){return Math.max(this.m_nEloCount,this.m_nResultCount)};return c}();"use strict";
CB.V2k0=function(){var c=function(){this.m_aLine=[0]};c.prototype.read=function(b){};c.prototype.WriteToDataBuffer=function(b){return!0};c.prototype.V3b4=function(b){b.beginSizedRead();this.m_nConfidence=b.V3bx();this.m_nEval=b.V3c2();this.m_nDepth=b.readByte();this.m_nFlags=b.readByte();for(var d=b.V3bv(),c=0;c<CB.V1mk.prototype.HASH_LINE_LEN&&c<d;++c)this.m_aLine[c]=b.V3bv();this.m_nEngineId=b.V3bx();this.m_nUserId=b.V3bx();this.m_nTimeStamp=b.V3bv();this.m_nCalcDepth=b.V3bv();this.m_bReasonableDepth=
b.V3c5();this.m_nRankingListWeight=b.V3bx();b.endSizedRead();return!0};c.prototype.Empty=function(){return!0};c.prototype.V2ku=function(b){return!1};c.prototype.V2kv=function(){for(var b=0;b<HASH_LINE_LEN;++b);return"??"};c.prototype.V2kw=function(b){m_nTimeStamp=TBrainTimeStamp.DateToUShort(b)};c.prototype.V2kx=function(){return TBrainTimeStamp.UShortToDate(m_nTimeStamp)};c.prototype.V2ky=function(b,d){return!1};c.prototype.V2kz=function(b,d){return!1};c.prototype.V2l0=function(b,d){return!0};c.prototype.V2k8=
function(b,d){return!1};c.prototype.V2l1=function(b,d){return!1};c.prototype.V2l2=function(){return 29E3<Math.Abs(m_nEval)};c.prototype.V2l3=function(b){return 0!=V2l4()?100*b/V2l4()+.5:0};c.prototype.Count=function(){return TBRAIN.HASH_LINE_LEN};c.prototype.Clear=function(){};c.prototype.GetNEval=function(){return 0};c.prototype.V2l5=function(b){m_nEval=b;SETFLAG(TBRAIN.EVAL_MOVE_NO,!1)};c.prototype.GetNMoveNo=function(){return 0};c.prototype.V2l6=function(b){m_nEval=b;SETFLAG(TBRAIN.EVAL_MOVE_NO,
!0)};c.prototype.GetNDepth=function(){return m_nDepth};c.prototype.V2l7=function(b){m_nDepth=b};c.prototype.V2l8=function(){return m_nConfidence};c.prototype.V2l9=function(b){m_nConfidence=b};c.prototype.GetMove=function(b){return 0};c.prototype.V2k8=function(b,d){};c.prototype.IsEval=function(){return!V2cd(TBRAIN.EVAL_MOVE_NO)};c.prototype.IsMoveNo=function(){return V2cd(TBRAIN.EVAL_MOVE_NO)};c.prototype.V2la=function(){return m_nEngineId};c.prototype.V2lb=function(b){m_nEngineId=b};c.prototype.V2lc=
function(){return m_nUserId};c.prototype.V2ld=function(b){m_nUserId=b};c.prototype.V2le=function(){return V2cd(TBRAIN.USER_IS_LOGIN)};c.prototype.V2lf=function(b){SETFLAG(TBRAIN.USER_IS_LOGIN,b)};c.prototype.V2lg=function(b){m_nTimeStamp=b};c.prototype.V2l4=function(){return m_nCalcDepth};c.prototype.V2lh=function(){return m_bReasonableDepth};c.prototype.V2li=function(b){m_bReasonableDepth=b};c.prototype.V2lj=function(){return m_nCalcDepth>=TBrainConstants.CALCTIME_DISCOVERY};c.prototype.V2lk=function(){return m_nCalcDepth>=
TBrainConstants.CALCTIME_DEEP};c.prototype.V2ll=function(){return m_nRankingListWeight};c.prototype.V2lm=function(b){m_nRankingListWeight=b};return c}();"use strict";
CB.V2ln=function(){var c=function(){this.m_aMachineGuid=new CBGuid;this.m_nCpus=this.m_nSecs=this.m_nFlags=0;this.m_nVariations=1;this.m_nNodes=this.m_nMoveNo=this.m_nHashSize=0;this.m_fMachineFact=this.m_fEngineFact=1};c.prototype.V2lo=function(){return 0};c.prototype.GetFCalcDepth=function(b){return 0};c.prototype.V2lp=function(){return TBServerBinder(GetFCalcDepth(uint(m_nSecs+1))*m_fEngineFact*m_fMachineFact)};c.prototype.GetNTodaysTimeStamp=function(){return TBrainTimeStamp.GetNTodaysTimeStamp()};
c.prototype.WriteToDataBuffer=function(b){b.BeginSizedWrite();m_aMachine.WriteToDataBuffer(b);b.WriteString(m_strEngine);b.WriteUnsigned(m_nFlags);pos.WriteToDataBuffer(b);m_aMove.WriteToDataBuffer(b);b.WriteUnsigned(m_nSecs);b.WriteUnsigned(m_nCpus);b.WriteUnsigned(m_nVariations);m_aMachineGuid.WriteToDataBuffer(b);b.WriteUnsigned(m_nHashSize);b.WriteData(m_cCheckSum,m_cCheckSum.Length);b.WriteInt(m_nMoveNo);b.WriteInt64(m_nNodes);b.EndSizedWrite();return!0};c.prototype.V3b4=function(b){b.BeginSizedRead();
m_aMachine.ReadFromDataBuffer(b);m_strEngine=b.ReadString();m_nFlags=b.ReadUnsigned();pos.ReadFromDataBuffer(b);m_aMove.ReadFromDataBuffer(b);m_nSecs=b.ReadUnsigned();m_nCpus=b.ReadUnsigned();16<m_nCpus&&(m_nCpus=16);m_nVariations=Math.Min(64,Math.Max(1,b.ReadUnsigned()));1>m_nVariations&&(m_nVariations=1);m_aMachineGuid.ReadFromDataBuffer(b);m_nHashSize=b.ReadUnsigned();m_nMoveNo=b.ReadInt();m_nNodes=b.ReadInt64();b.EndSizedRead();return!0};c.prototype.V2lq=function(){return new CBGame};c.prototype.V2lr=
function(){return m_aMachine};c.prototype.V2ls=function(b){m_aMachine=b};c.prototype.V2lt=function(){return m_strEngine};c.prototype.V2lu=function(b){m_strEngine=b};c.prototype.V2lv=function(){return m_aMachineGuid};c.prototype.V2lw=function(b){m_aMachineGuid=b};c.prototype.V2lx=function(b){m_nSecs=b};c.prototype.V2ly=function(){return m_nSecs};c.prototype.V2lz=function(){return pos};c.prototype.V2m0=function(){return new V2m1(pos,GetNMoveNo())};c.prototype.V2m2=function(b){pos.FillPos(b);b.SetMoveNo(GetNMoveNo())};
c.prototype.V2m3=function(b){pos=new HashPosition(b);m_nMoveNo=b.GetMoveNo()};c.prototype.GetMove=function(b){return TBServerBinderm_aMove.GetMove(b)};c.prototype.GetNEval=function(){return m_aMove.GetNEval()};c.prototype.GetNMoveNo=function(){return m_nMoveNo};c.prototype.V2l6=function(b){m_nMoveNo=b};c.prototype.GetNDepth=function(){return m_aMove.GetNDepth()};c.prototype.IsEval=function(){return m_aMove.IsEval()};c.prototype.IsMoveNo=function(){return m_aMove.IsMoveNo()};c.prototype.V2m4=function(){return m_nCpus};
c.prototype.V2m5=function(b){m_nCpus=TBServerBinderr};c.prototype.V2m6=function(){return m_nVariations};c.prototype.V2m7=function(b){m_nVariations=TBServerBinderr};c.prototype.V2m8=function(b){m_fEngineFact=b};c.prototype.V2m9=function(b){m_fMachineFact=b};c.prototype.V2ma=function(b){SETFLAG(1,b)};c.prototype.V2mb=function(){return V2cd(1)};c.prototype.V2mc=function(b){SETFLAG(2,b)};c.prototype.V2md=function(){return V2cd(2)};c.prototype.V2me=function(b){SETFLAG(65536,b)};c.prototype.V2mf=function(){return V2cd(TBServerBinderHTR.HTR_UCI_ENGINE)};
c.prototype.V2mg=function(b){SETFLAG(256,b)};c.prototype.V2mh=function(){return V2cd(TBServerBinderHTR.HTR_UNRELIABLE_DATA)};c.prototype.V2mi=function(){return V2cd(TBServerBinderHTR.HTR_EVAL_NORMED)};c.prototype.V2mj=function(b){SETFLAG(TBServerBinderHTR.HTR_EVAL_NORMED,b)};c.prototype.V2mk=function(b){};return c}();"use strict";CB.V2ml=function(){return function(c,b){this.aBoard=c;this.sMove=b}}();"use strict";
CB.V2m1=function(){var c=function(b,d,c){this.pos=new CB.HashPosition(b);this.m_nMoveNo=d;this.V2mo=this.V2mn=this.V2mm=0;this.m_strTag=c};c.prototype.IsSet=function(){return pos.IsSet()};c.prototype.IsStartPosition=function(){return pos.IsStartPosition()};c.prototype.IsFinalPosition=function(){return pos.IsFinalPosition()};c.prototype.V2mp=function(){return m_strTag};c.prototype.V2mq=function(b){m_strTag=b};c.prototype.WriteToDataBuffer=function(b){pos.WriteToDataBuffer(b);b.BeginSizedWrite();b.WriteInt(m_nMoveNo);
b.WriteString(m_strTag);b.EndSizedWrite()};c.prototype.ReadFromDataBuffer=function(b){if(!pos.ReadFromDataBuffer(b))return!1;b.BeginSizedRead();m_nMoveNo=b.ReadInt();m_strTag=b.ReadString();var d=0<=m_nMoveNo;b.EndSizedRead();return d};c.prototype.CreatePosition=function(){var b=pos.CreatePosition();b.SetMoveNo(m_nMoveNo);return b};return c}();"use strict";CB.TBRAIN={HASH_LINE_LEN:3,HASH_LINE_CNT:3,V2mr:63,EVAL_MOVE_NO:1,USER_IS_LOGIN:2,V2ms:4,V2mt:8,V2mu:16};
CB.V1mk=function(){var c=function(){this.move=new CB.Vei;this.m_performanceStats=new CB.GamePerformanceStats;this.m_nFlags=0};c.prototype.HASH_LINE_LEN=3;c.prototype.HASH_LINE_CNT=3;c.prototype.CALCTIME_DEEP=370;c.prototype.getMoveRecord=function(){return this.move};c.prototype.getLine=function(b){CBDebug.assert(b<CB.TBRAIN.HASH_LINE_LEN);return b<CB.TBRAIN.HASH_LINE_LEN?m_aLine[b]:0};c.prototype.getLine=function(b,d){CBDebug.assert(d<CB.TBRAIN.HASH_LINE_LEN);m_aLine[d]=b};c.prototype.getNEval=function(){return this.m_nEval};
c.prototype.V2mv=function(){return this.m_nTimeStamp};c.prototype.V2mw=function(b){m_nTimeStamp=b};c.prototype.hasEval=function(){return CB.V4t(this.m_nFlags,1)||0!=this.m_nEval};c.prototype.V2mx=function(b){this.m_nFlags=b?this.m_nFlags|1:this.m_nFlags&-2};c.prototype.V2my=function(){};c.prototype.V2mz=function(b){};c.prototype.V2n0=function(){return m_performanceStats};c.prototype.getNGames=function(){return this.m_performanceStats.getNGames()};c.prototype.V2n1=function(){return this.m_performanceStats.getSortEloAv()};
c.prototype.V2n2=function(b){this.move=b;this.m_nFlags=this.m_nTimeStamp=this.m_nEval=0;this.m_aLine=[];this.m_performanceStats.Vfe()};c.prototype.writeToDataBuffer=function(b){b.BeginSizedWrite();b.WriteInt64(m_nVisits);b.WriteBYTE(this.move.V2e4);b.WriteBYTE(this.move.toSq);b.WriteBYTE(this.move.V2n3);b.WriteBYTE(this.move.V2n4);b.WriteShort(this.m_nEval);b.WriteUShort(this.m_nTimeStamp);b.WriteShort(this.m_nFlags);this.m_performanceStats.WriteToDataBuffer(b);b.EndSizedWrite()};c.prototype.V3b4=
function(b){b.beginSizedRead();this.m_nVisits=b.V3bz();this.move.from=b.readUint8();this.move.to=b.readUint8();this.move.V2n3=b.readUint8();this.move.prom=b.readUint8();this.m_nEval=b.V3c2();this.m_nTimeStamp=b.V3bv();this.m_nFlags=b.V3c2();this.m_performanceStats.V3b4(b);this.m_aLine=[];for(var d=0;d<CB.V1mk.prototype.HASH_LINE_LEN;++d){var c=b.V3bv();this.m_aLine.push(c)}b.endSizedRead();return!0};c.prototype.V2n5=function(){return TBrainTimeStamp.UShortToDate(m_nTimeStamp)};c.prototype.getNVisits=
function(){return this.m_nVisits};c.V1ml=function(){var b=new CB.Date;b.V5f();b.setYear(b.getYear()-1945);return b.V5g()};c.prototype.toString=function(){return this.move.toString()+", N="+this.getNGames()+",ev="+this.m_nEval};return c}();"use strict";
CB.V1ms=function(){var c=function(){this.moves=[]};c.prototype.writeToDataBuffer=function(b){b.BeginSizedWrite();b.WriteInt(GetNFormat());b.WriteUnsigned(Count);for(var d=0;d<Count;d++)this[d].WriteToDataBuffer(b);b.EndSizedWrite()};c.prototype.V3b4=function(b){b.beginSizedRead();b.readInt();this.clear();for(var d=b.readInt(),c=0;c<d;c++){var g=new CB.V1mk;g.V3b4(b);this.add(g)}b.endSizedRead();return!0};c.prototype.clear=function(){this.moves=[]};c.prototype.count=function(){return this.moves.length};
c.prototype.add=function(b){this.moves.push(b)};c.prototype.get=function(b){return this.moves[b]};c.prototype.V2n6=function(){return 2};c.prototype.V2n7=function(){for(var b=0,d=0;d<this.moves.length;d++)this.moves[d].getNGames()>b&&(b=this.moves[d].getNGames());return b};c.V1mt=function(b,d){b.sort(function(b,c){return d?b.m_nEval-c.m_nEval:c.m_nEval-b.m_nEval})};c.prototype.V2n8=function(b){if(0==this.moves.length)return b;for(var d=this.moves[0].m_nEval,c=0;c<this.moves.length;c++)if(50>Math.abs(this.moves[c].m_nEval-
d)){if(this.moves[c].move.equals(b))return b}else break;return this.moves[0].move};return c}();"use strict";
CB.V2n9=function(){var c=function(){};c.prototype.V2na=function(){return m_strName};c.prototype.V2nb=function(){return m_aRank};c.prototype.V2nc=function(b){m_aRank=b};c.prototype.V2nd=function(){return m_nAccountAgeDays};c.prototype.V2ne=function(b){m_nAccountAgeDays=b};c.prototype.V2nf=function(){return V2cd(1)};c.prototype.V2ng=function(){return V2cd(2)};c.prototype.V2nh=function(){return V2cd(4)};c.prototype.V2ni=function(){return m_aGeoCoords};c.prototype.V2nj=function(){return m_nFlags};c.prototype.V2nk=
function(){return m_nUFDFlags};return c}();"use strict";
CB.V2nl=function(){var c=function(){this.pos=new CB.HashPosition;this.moveList=new CB.V1ms};c.prototype.read=function(){};c.prototype.V2nm=function(b){b=b.GetPDataBuf();b.Rewind();ReadFromDataBuffer(b)};c.prototype.writeToDataBuffer=function(b){b.beginSizedWrite();pos.writeToDataBuffer(b);b.V3bu(m_nVisits);moveList.writeToDataBuffer(b);b.wndSizedWrite()};c.prototype.V3b4=function(b){b.beginSizedRead();this.pos.V3b4(b);this.m_nVisits=b.V3bz();this.moveList.V3b4(b);b.endSizedRead();return!0};c.prototype.toString=
function(){return""};c.prototype.V2nn=function(){var b=new TeraBrainMessage(SocketsMessageType.TERABRAIN_BOOKINFO);WriteToDataBuffer(b.GetPDataBuf());return b};c.prototype.getNVisits=function(){return m_nVisits};c.prototype.V2no=function(){return this.moveList};c.prototype.V2np=function(b){moveList=b};c.prototype.V2nq=function(){return pos};return c}();"use strict";CB.namespace("CB.Server.TeraBrainLobby");
CB.Server.TeraBrainLobby=function(){var c=function(){this.V2nr=this.idGroup=0;this.V2ns=!1;this.V2nt=0;this.V2nv=this.V2nu=!1;this.V2nw=0;this.V2nz=this.V2ny=this.V2nx=!1;this.V2o0=1;this.V2o1=!1;this.m_nEngineId=this.V2o2=0;this.V2o3=[];this.V2o4={};this.V2o5=new CB.Timer(function(){this.V2o6()}.bind(this),2E3);this.name="TBrain";this.V2o7=new CB.V2o8};CB.inherit(c,CB.Server.V1tg);c.prototype.execCommand=function(b){if(!this.Vtf)return!1;switch(b){case CB.V2o9.V2oa:this.V1s3(!0)}};c.prototype.V1uz=
function(){};c.prototype.V1ue=function(b){b.documentUrl=document.URL;V3c6.isAnyPlugin||(b.documentUrl+=" (off)")};c.prototype.V1v6=function(b){this.V2oc&&this.V2oc()};c.prototype.request=function(b,d,c,g,f,h,l){this.V2nx||(this.V2od=new CB.ClientMachineInfo,d=new CB.V2oe(d,c,this.V2od),d.setIsNormedEval(!0),d.setCountVisit(!g),d.setConfirmRequested(f),d.setIsHumanServerGame(h),d.setIsMultiRequest(l),g=d.V2nn(),g.setVal(b),this.send(g))};c.prototype.Vtd=function(b){this.Vtf&&(this.request(1,b,3,!0,
!1,!0),this.V2o5.runOnce(2E3))};c.prototype.V2fo=function(b,d,c){this.Vtf&&(this.V2o4[b]=c,this.request(b,d,3,!0,!1,!0))};c.prototype.Vta=function(b,d,c,g,f){if(this.Vtf){var h=this.V2o7.track(b);this.request(g||1,b,2,h,c,d,f)}};c.requestHotPosition=function(){var b=new CB.TeraBrainMessage(SocketsMessageType.TERABRAIN_USER);b.setUserType(TeraBrainUserMsgType.TBUSER_REQ_HOTPOSITION);this.send(b)};c.prototype.V2of=function(b){var d=new CB.Vat(CB.V1nz.TERABRAIN_USER);d.setUserType(CB.TeraBrainUserMsgType.V2og);
d.buf.V3bi(b.length);for(var c=0;c<b.length;c++)d.buf.V3bi(b[c]);this.send(d)};c.prototype.V1rz=function(b){if(!this.V1v7(b))switch(b.getType()){default:TRACE("Unhandled: "+b.toString());break;case CB.V1nz.V1p2:this.V2oh();break;case CB.V1nz.V1h:break;case CB.V1nz.TERABRAIN_BOOKINFO:this.V2oi(b);break;case CB.V1nz.V1qa:this.V2oj(b);break;case CB.V1nz.TERABRAIN_USER:this.V2ej(b)}};c.prototype.V2ej=function(b){switch(b.getUserType()){case CB.TeraBrainUserMsgType.V2ok:this.V2ol(b);break;case CB.TeraBrainUserMsgType.V2oo:this.V2op(b)}};
c.prototype.V2oi=function(b){this.V2p4=new CB.V2nl;this.V2p4.V3b4(b.getBuf());var d=this.V2p4.pos.getPosition();this.fireOnLiveBook({position:d,moves:this.V2p4.moveList.moves,ticket:b.getVal(),tbInfo:this.V2p4})};c.prototype.V2op=function(b){this.fireOnLiveBook({moves:[],ticket:b.getVal()})};c.prototype.V2oh=function(){this.V1tx=!0;this.V2p5?(this.V2p5(),this.V2p5=null):this.Vtd(new CB.Position)};c.prototype.V2oj=function(b){this.V2o5.stop();this.V2p6=new CB.V2jy;this.V2p6.V3b4(b.getBuf());for(var d=
[],c=0;c<CB.V1mk.prototype.HASH_LINE_CNT;++c)null==this.V2o3[this.V2p6.move[c].m_nEngineId]?d.push(this.V2p6.move[c].m_nEngineId):this.V2p6.move[c].EngineName=this.V2o3[this.V2p6.move[c].m_nEngineId];0<d.length?this.V2of(d):(d=this.V2p6.pos.getPosition(),V3c6.panelMgr.tbPanel&&V3c6.panelMgr.tbPanel.update(d,this.V2p6),this.V2o4[b.getVal()]&&(this.V2o4[b.getVal()](b.getVal(),this.V2p6),delete this.V2o4[b.getVal()]),this.fireOnTBData({position:d,table:this.V2p6}))};c.prototype.V2o6=function(){this.V2p6||
(this.V2p6=new CB.V2jy);var b=CB.V2jy.V2jz();V3c6.panelMgr.tbPanel&&V3c6.panelMgr.tbPanel.update(this.V2p6.pos.getPosition(),b)};c.prototype.V2ol=function(b){for(var d=b.getBuf().V3bx(),c=0;c<d;c++){b.getBuf().beginSizedRead();var g=b.getBuf().V3b7(255),f=b.getBuf().V3bx();this.V2o3[f]=g;b.getBuf().readFloat64();b.getBuf().endSizedRead()}for(b=0;b<CB.V1mk.prototype.HASH_LINE_CNT;++b)this.V2p6.move[b].EngineName=this.V2o3[this.V2p6.move[b].m_nEngineId];b=this.V2p6.pos.getPosition();V3c6.panelMgr.tbPanel&&
(V3c6.panelMgr.tbPanel.update(b,this.V2p6),this.V2o5.stop(),this.fireOnTBData({position:b,table:this.V2p6}))};c.prototype.V2p7=function(){var b=new TeraBrainMessage(SocketsMessageType.TERABRAIN_USER);b.SetUserType(TeraBrainUserMsgType.TBUSER_CHESSSERVER_LOGIN);var d=b.GetPDataBuf();d.WriteString(m_strUsername);d.WriteString(m_strPassword);V2p8();m_sMachineGuid.IsZero()?CBDebug.assert(!1):(this.m_sMachineGuid.WriteToDataBuffer(d),this.send(b))};c.prototype.V2p9=function(b){b=new TeraBrainMessage(SocketsMessageType.TERABRAIN_USER);
b.SetUserType(TeraBrainUserMsgType.TBUSER_CHESSSERVER_LOGOUT);var d=b.GetPDataBuf();this.V2p8();m_sMachineGuid.IsZero()?CBDebug.assert(!1):(this.m_sMachineGuid.WriteToDataBuffer(d),Send(b));this.V2ns=!1;V2pa()};c.prototype.V2pa=function(){this.V2nt=0;this.V2nu=!1;this.m_nUserId=0};c.prototype.V2p8=function(){m_sMachineGuid.IsZero();return m_sMachineGuid};c.prototype.V2lc=function(){return m_nUserId};c.prototype.V2pb=function(){return m_nEngineId};c.prototype.V2pc=function(){return!0};c.prototype.V2pd=
function(){return!1};c.prototype.V2pe=function(){return 30};c.prototype.V1zo=function(b){var d=new CB.ChatData;d.fromSocketsMsg(b);d.isToSession()?(b=this.V14i.V2ga(d.V1rb()),b.length&&(d.strMsg="("+b+"): "+d.strMsg),V3c6.panelMgr.V1vj(d.toString(),"LogKibitzChat")):V3c6.panelMgr.V1vj(d.toString())};V3bf.initForListeners(c);c.prototype.V2gb=function(){for(var b=0;10>b;b++);};V3bf.initForListeners(c);V3bf.addEvent(c,"LiveBook");V3bf.addEvent(c,"TBData");V3bf.addEvent(c,"LiveBookDisplay");return c}();
CB.TeraBrainUserMsgType={V2og:1400,V2ok:1401,V2pf:1402,V2om:1403,V2pg:1404,V2ph:1420,TBUSER_CHESSSERVER_LOGIN:1421,TBUSER_CHESSSERVER_LOGOUT:1422,V2ou:1423,V2on:1424,TBUSER_REQ_HOTPOSITION:1425,V2oo:1426,V2pi:1427,V2ow:1428,V2pj:1429,V2pk:1430,V2ox:1431,V2pl:1432,V2oy:1433,V2pm:1434,V2oz:1435,V2pn:1436,V2p0:1437,V2po:1438,V2p1:1439,V2or:1440,V2pp:1441,V2os:1442,V2pq:1443,V2ot:1444,V2oq:1445,V2pr:1460,V2ov:1461,V2ps:1462,V2pt:1463,V2pu:1464,V2pv:1465,V2pw:1466,V2p2:1467,V2px:1468,V2p3:1469,V2py:1480,
V2pz:1481,V2q0:1481,V2q1:1482,toString:function(c){for(var b in this)if(this[b]==c)return b;return"Unknown TBUserMsgId: "+c}};"use strict";
CB.V2oe=function(){var c=function(b,d,c){this.V2q2=d;this.V2q3=new CB.HashPosition(b);this.V2q4=c;this.m_nMoveNo=b.getMoveNum();this.V2q5=!0;this.V2q7=this.V2q6=!1;this.m_nFlags=0};c.V2q8=function(){return this.V2q2==TeraBrainRequestType.TBREQUEST_LB_POSINFO};c.prototype.V2q9=function(){return this.V2q2==TeraBrainRequestType.TBREQUEST_LB_ALLMOVES};c.prototype.V2qa=function(){return this.V2q2==TeraBrainRequestType.TBREQUEST_SEARCH_INFO};c.prototype.V2qb=function(){return this.V2q2==TeraBrainRequestType.TBREQUEST_LB_UPLOADONLY};
c.prototype.V2qc=function(){return this.V2q3};c.prototype.getMoveNo=function(){return this.m_nMoveNo};c.prototype.V2qd=function(b){this.m_nMoveNo=b};c.prototype.V2qe=function(){return new CB.V2m1(GetHashPos(),GetMoveNo())};c.prototype.V2qf=function(){return this.V2q5};c.prototype.setCountVisit=function(b){this.V2q5=b||!1};c.prototype.V2qg=function(){return this.V2q6};c.prototype.setConfirmRequested=function(b){this.V2q6=b||!1};c.prototype.V2qh=function(){return this.V2q7};c.prototype.setIsHumanServerGame=
function(b){this.V2q7=b||!1};c.prototype.V2qi=function(){return this.V2cd(1)};c.prototype.setIsNormedEval=function(b){this.SETFLAG(1,b)};c.prototype.setIsMultiRequest=function(b){this.SETFLAG(2,b)};c.prototype.SETFLAG=function(b,d){this.m_nFlags=d?this.m_nFlags|b:this.m_nFlags&~b};c.prototype.V2cd=function(b){return 0!=(this.m_nFlags&b)};c.prototype.V2nm=function(b){b=b.getPDataBuf();b.rewind();this.V3b4(b)};c.prototype.V2nn=function(){var b=new CB.Vat(CB.V1nz.V1q8);this.writeToDataBuffer(b.buf);
return b};c.prototype.writeToDataBuffer=function(b){b.beginSizedWrite();b.V3bi(this.V2q2);this.V2q3.writeToDataBuffer(b);this.V2q4.writeToDataBuffer(b);b.V3bi(this.m_nMoveNo);b.V3c4(this.V2q5);b.V3c4(this.V2q6);b.V3c4(this.V2q7);b.V3bi(this.m_nFlags);b.endSizedWrite()};c.prototype.V3b4=function(b){b.BeginSizedRead();this.V2q2=TeraBrainRequestType(b.ReadInt());this.V2q3.ReadFromDataBuffer(b);this.V2q4.ReadFromDataBuffer(b);this.m_nMoveNo=b.ReadUint32();this.V2q5=b.ReadBool();this.V2q6=b.ReadBool();
this.V2q7=b.ReadBool();this.m_nFlags=b.ReadUint32();b.EndSizedRead();return!0};return c}();"use strict";
CB.TBrainTimeStamp=function(){var c=function(){};c.prototype.UShortToDate=function(b){var d=b&31,c=b>>5&15;b=1945+(b>>9&127);return new CBDate(Math.Min(CBDate.Today().GetDate(),(new CBDate(b,c,d)).GetDate()))};c.prototype.DateToUShort=function(b){var d=Math.Max(1945,b.GetYear());return ushort(b.GetDay()|b.GetMonth()<<5|d-1945<<9)};c.prototype.GetNTodaysTimeStamp=function(){return DateToUShort(CBDate.Today())};return c}();"use strict";CB.namespace("CB.V26y");
CB.V26y.V2qj=function(c,b){CB.namespace("ExtDataModels");CB.V2qk.V2ql=Ext.define("tbItem",{extend:"Ext.data.Model",fields:["m_nEval","line","m_nDepth","EngineName"]});var d,e=[],g=null,f=Ext.create("Ext.data.Store",{model:"tbItem",sorters:[{property:"m_nGames",direction:"DESC"}]});f.applyAdd=function(b){g&&(g.hide(),g=null);f.add(e);e=[]};f.onGameRemoved=function(b){b=f.getById(b);null!==b&&f.remove([b])};c.game.addOnResetGameListener(function(){e=[]});var h=0;d=Ext.create("Ext.grid.Panel",{title:lm.LETS_CHECK,
id:"tbPanelGrid",store:f,heigth:150,width:350,split:!0,region:b.region,multiSelect:!1,collapsible:!0,animCollapse:!1,plugins:b.responsiveConfig?"responsive":null,responsiveConfig:b.responsiveConfig,viewConfig:{trackOver:!1},columns:[{text:lm.EVAL,flex:1,minWidth:30,maxWidth:80,sortable:!0,dataIndex:"m_nEval",tdCls:"gmBlackCell",renderer:function(b,d,c,e,f,g){return c.data.m_aLine[0]?c.data.m_nEval/100:"--"}},{text:lm.VARIATION,flex:1,minWidth:100,maxWidth:120,sortable:!0,dataIndex:"line",tdCls:"gmLine",
renderer:function(b,d,c,e,f,g){return V3c6.isLoggedIn()||12>h?c.data.line:lm.PLEASE_LOGIN_SHORT}},{text:lm.DEPTH,flex:3,minWidth:30,maxWidth:60,sortable:!0,dataIndex:"m_nDepth",tdCls:"gmBlackCell",renderer:function(b,d,c,e,f,g){return c.data.m_aLine[0]?c.data.m_nDepth:""}},{text:lm.ENGINE,flex:2,minWidth:130,maxWidth:200,sortable:!0,dataIndex:"EngineName",tdCls:"gmClock",renderer:function(b,d,c,e,f,g){return c.data.EngineName}}]});d.onCellClick=function(b,d,c,e,f,g,h,v){};d.on("cellclick",d.onCellClick);
d.clear=function(b){f.removeAll()};d.startupdate=function(){null===g&&d.isVisible()&&(g=d.createMask());null!==g&&g.show()};d.update=function(b,d){f.removeAll();for(var g=0;g<CB.V1mk.prototype.HASH_LINE_CNT;++g){d.move[g].line=CB.V2jy.generateLine(b,d.move[g],c).lineNota;var t=new CB.V2qk.V2ql(d.move[g]);0==t.data.m_aLine[0]&&(t.data.line="---",t.data.EngineName="---");e.push(t)}0==f.count()&&f.applyAdd(!0);h=c.getCurPos().getPlyNum()};d.createMask=function(){return new Ext.LoadMask(d.getEl(),{msg:lm.LOADING_STATISTICS})};
return d};"use strict";CB.namespace("CB.V26y");
CB.V26y.V2qm=function(c,b){function d(){if(320>e.getWidth())return"font-size:96%"}CB.namespace("ExtDataModels");CB.V2qk.V2qn=Ext.define("tbBookItem",{extend:"Ext.data.Model",fields:[{name:"id",type:"int"},"line","Games",{name:"Result",sortType:function(b,d,c){return b}},"EloAvg","m_nVisits","m_nEval","m_nDepth","fPercent","to","fr","pr","players"]});var e,g=null,f=Ext.create("Ext.data.Store",{model:"tbBookItem",sorters:[{property:"m_nVisits",direction:"DESC"}]});f.applyAdd=function(b){g&&(g.hide(),
g=null);f.add(b)};f.onGameRemoved=function(b){b=f.getById(b);null!==b&&f.remove([b])};var h=0,l=[{text:lm.MOVE,flex:4,minWidth:50,maxWidth:250,sortable:!1,dataIndex:"line",tdCls:"liveBookMove",renderer:function(b,c,f,g,l,q){b=e.getMyMoveDecoration(f);c.tdCls=b.cls;c.tdStyle=d();if(V3c6.config.freeLiveBook||!V3c6.config.V2qo||r||10>h){c=f.data.line.split(" ");if(1<c.length){f=c[0];f+='<span class="liveBookMoreMoves">';for(g=1;g<c.length;g++)f+=" "+c[g];return f+="<span>"+b.suffix}return f.data.line+
b.suffix}c.tdCls="gmPremiumOnly";if(t)return String.formatEx('<a class="gmPremiumOnly" href="{0}">{1}</a>',"https://account.chessbase.com/en/matrix",lm.PREMIUM_ONLY);f="https://live.chessbase.com/logon?returnurl="+encodeURIComponent(document.location);return String.formatEx('<a class="gmPremiumOnly" href="{0}">{1}</a>',f,lm.PREMIUM_ONLY)}},{text:lm.GAMES,flex:3,minWidth:40,maxWidth:140,sortable:!0,dataIndex:"Games",align:"right",tdCls:"liveBookGames",renderer:function(b,c,e,f,g,l){c.tdStyle=d();return V3c6.config.freeLiveBook||
V3c6.isLoggedIn()||10>h?e.data.Games.toLocaleString(CB.V7a.V7b(),{maximumFractionDigits:0}):lm.PLEASE_LOGIN_SHORT}},{text:lm.RESULT,flex:2.3,minWidth:55,maxWidth:130,sortable:!0,dataIndex:"Result",tdCls:"liveBookResult",renderer:function(b,c,e,f,g,h){c.tdStyle=d();if(0<e.data.Games)return Math.round(e.data.Result)+"%";if(V3c6.config.freeLiveBook||V3c6.isLoggedIn()){if(c.tdCls="liveBookEval",e.data.hasEval()){b=e.data.m_nEval;e=e.data.m_nDepth;if(29750<Math.abs(b))return e="#"+(3E4-Math.abs(b)),0>
b&&(e="-"+e),e;c="";0<b&&(c="+");b=c+(.01*b).toFixed(2);e&&(b+="/"+e);return b}}else return"";return"---"}},{text:lm.ELO_AVG,flex:2,minWidth:35,maxWidth:60,sortable:!0,dataIndex:"EloAvg",align:"center",tdCls:"liveBookEloAvg",renderer:function(b,c,e,f,g,h){c.tdStyle=d();if(!isNaN(e.data.EloAvg))return Math.round(e.data.EloAvg)}},{text:"%",flex:1,minWidth:30,maxWidth:50,sortable:!0,align:"center",dataIndex:"fPercent",renderer:function(b,c,e,f,g,h){c.tdStyle=d();if(!isNaN(e.data.fPercent))return Math.round(e.data.fPercent)}},
{text:lm.VISITS,flex:3,minWidth:50,maxWidth:120,sortable:!0,dataIndex:"m_nVisits",tdCls:"liveBookVisits",align:"right",renderer:function(b,c,e,f,g,l){c.tdStyle=d();if(!isNaN(e.data.m_nVisits))return V3c6.config.freeLiveBook||V3c6.isLoggedIn()||10>h?e.data.m_nVisits.toLocaleString(CB.V7a.V7b(),{maximumFractionDigits:0}):lm.PLEASE_LOGIN_SHORT}}],q=!1,r=!1,t=!1,w={id:"tbBookGrid",title:750<window.innerHeight||b.forceTitle?lm.LIVE_BOOK:0,region:b.region,store:f,heigth:b.height,width:b.width,minHeight:b.minHeight,
autoScroll:!0,closable:b.closable,split:!0,viewConfig:{emptyText:lm.REQUESTING_MOVES},animCollapse:!1,plugins:b.responsiveConfig?"responsive":null,responsiveConfig:b.responsiveConfig,listeners:{beforeItemKeyDown:function(b,d,f,g,h){b=!0;switch(h.getKey()){default:b=!1;break;case h.UP:case h.DOWN:case h.PAGE_DOWN:case h.PAGE_UP:break;case h.LEFT:e.myFocus=!0;c().game.gotoPrev();break;case h.RIGHT:e.myFocus=!0;c().game.gotoNext();break;case h.ENTER:e.loadMove(d.data),b=!1}return b?b:(h.stopEvent(),
V3c6.panelMgr.V2ba()||V3c6.commands.handleKeyDown(h),!1)}},columns:l,tools:800<window.innerHeight&&b.helpBtn?[{type:"help",tooltip:"Get Help",callback:function(b,d,c){V3c6.panelMgr.V1bb({x:c.touch.pageX-200,y:c.touch.pageY-30},lm.LIVE_BOOK_HELP,4E3)}}]:null};b.toolbar&&CB.V5t.V68()&&(w.bbar={items:[CB.V138.btn(lm.LOAD_WHITE,"White16","small",function(){c().boardWin.setBlackIsBottom(!1,!0);V3c6.loadMyMoves(CB.V1ze.WHITE,new CB.Game)}.bind(e)),CB.V138.btn(lm.LOAD_BLACK,"Black16","small",function(){c().boardWin.setBlackIsBottom(!0,
!0);V3c6.loadMyMoves(CB.V1ze.BLACK,new CB.Game)}.bind(e)),CB.V138.btn("Restore Game","RestoreGameNew16","small",function(){V3c6.restorePrevGame()}.bind(e))]});e=Ext.create("Ext.grid.Panel",w);e.myMoves=[];e.onCellClick=function(b,d,c,f,g,h,l,q){6>c&&e.loadMove(f.data)};e.loadMove=function(b){b=new CB.Vei(b.fr,b.to,b.pr);c().getCurPos().isLegalMove(b)&&c().game.makeMove(b,c().V3bl.getMoveEnterType());(new CB.Timer(function(){V3c6.panelMgr.refreshOnlineDBGames&&V3c6.panelMgr.refreshOnlineDBGames()})).runOnce(400);
e.myFocus=!0};e.onContextMenu=function(b,d,c,f,g,h){if(V3c6.cloudMgr){g.preventDefault();if(V3c6.cloudMgr&&V3c6.checkCloudLoggedIn())var l=new CB.Vei(d.data.fr,d.data.to,d.data.pr),q=function(b){e.removeFromMyMoves(l)},r=function(b){e.addMoveToMyMoves(l,!1)},t=function(b){e.addMoveToMyMoves(l,!0)},w=function(b){e.unmarkTree(l,!1)},z=function(b){e.unmarkTree(l,!0)},O=function(b){e.unlearnTree(l,!1)},W=function(b){e.unlearnTree(l,!0)};CB.V5q.V21l("MyMove16");CB.V5q.V21l("ImportantMove16");CB.V5q.V21l("EraseMove16");
CB.V5q.V21l("ResetLearning16");CB.V5q.V21l("Cutline16");Ext.create("Ext.menu.Menu",{items:[{text:lm.MARK_MOVE,iconCls:"MyMove16",handler:r,activated:e.isRepertoireMove(l)},{text:lm.MARK_IMPORTANT,iconCls:"ImportantMove16",handler:t},{text:lm.UNMARK_MOVE,iconCls:"Erase16",handler:q,enabled:e.isRepertoireMove(l)},"-",{text:lm.UNMARK_TREE_WHITE,iconCls:"Cutline16",handler:w},{text:lm.UNMARK_TREE_BLACK,iconCls:"Cutline16",handler:z},"-",{text:lm.RESET_LEARNING_WHITE,iconCls:"ResetLearning16",handler:O},
{text:lm.RESET_LEARNING_BLACK,iconCls:"ResetLearning16",handler:W}]}).showAt(g.getXY())}};e.isRepertoireMove=function(b){if(b)for(var d=0;d<e.myMoves.length;d++)if(e.myMoves[d].move.equals(b))return!0;return!1};e.getMoveFlags=function(b){for(var d=0;d<e.myMoves.length;d++)if(e.myMoves[d].move.equals(b))return e.myMoves[d].flags;return 0};e.getMyMove=function(b){for(var d=0;d<e.myMoves.length;d++)if(e.myMoves[d].move.equals(b))return e.myMoves[d];return{eval:0}};e.removeMyMove=function(b){for(var d=
!1,c=-1,f=0;!d&&f<e.myMoves.length;f++)e.myMoves[f].move.equals(b)&&(c=f,d=!0);0<=c&&e.myMoves.splice(c,1);return d};e.removeFromMyMoves=function(b){V3c6.cloudMgr&&V3c6.cloudMgr.isLoggedIn()&&e.removeMyMove(b)&&(V3c6.cloudMgr.removeFromMyMoves(c().game.getCurPos(),b),V3c6.cloudMgr.V20u(c().game.getCurPos().getBTM())&&V3c6.cloudMgr.V20y(),e.getView().refresh())};e.unmarkTree=function(b,d){if(V3c6.cloudMgr&&V3c6.cloudMgr.isLoggedIn()){var f=V3c6.cloneGameToCurPos(c().game);f.getCurPos().preCalcCtx(b);
f.makeMove(b);V3c6.cloudMgr.V20x(c().game.getCurPos(),b,d?CB.V1ze.BLACK:CB.V1ze.WHITE);e.removeMyMove(b);e.getView().refresh()}};e.unlearnTree=function(b,d){if(V3c6.cloudMgr&&V3c6.cloudMgr.isLoggedIn()){var f=V3c6.cloneGameToCurPos(c().game);f.getCurPos().preCalcCtx(b);f.makeMove(b);V3c6.cloudMgr.V211(c().game.getCurPos(),b,d?CB.V1ze.BLACK:CB.V1ze.WHITE);e.getView().refresh()}};e.updateOrAddMove=function(b){for(var d=0;d<e.myMoves.length;d++)if(e.myMoves[d].move.equals(b.move)){e.myMoves[d].flags=
b.flags;return}e.myMoves.push({move:b.move,visits:0,flags:b.flags})};e.addMoveToMyMoves=function(b,d){if(V3c6.cloudMgr&&V3c6.cloudMgr.isLoggedIn()){var f=c().game.getCurPos().getBTM()?1:2;d&&(f|=16);e.getMoveFlags(b)!=f&&(e.updateOrAddMove({move:b,flags:f}),f=V3c6.cloneGameToCurPos(c().game),f.getCurPos().preCalcCtx(b),f.makeMove(b),V3c6.cloudMgr.V20r(f,d?3:2),e.getView().refresh());V3c6.cloudMgr.V20u(c().game.getCurPos().getBTM())&&V3c6.cloudMgr.V20y()}};e.getMyMoveDecoration=function(b){var d={suffix:"",
cls:""};if(CB.V1yw){var c=new CB.Vei(b.data.fr,b.data.to,b.data.pr);b=e.getMoveFlags(c);c=e.getMyMove(c).eval;b&CB.V1yw.Vub?(b&16?(d.cls+=" liveBookMoveImportant",d.suffix="**"):(d.cls+=" liveBookMoveInRep",d.suffix="*"),d.cls=b&CB.V1yw.V1yy?b&CB.V1yw.BLACK?d.cls+" liveBookBoth":d.cls+" liveBookWhite":d.cls+" liveBookBlack"):b&CB.V1yw.MOVE?(d.cls+=" liveBookMyLine",d.suffix="",d.cls=b&CB.V1yw.V1yz?b&CB.V1yw.BLACK?d.cls+" liveBookBoth":d.cls+" liveBookWhite":d.cls+" liveBookBlack"):(d.cls+=" liveBookMove",
d.suffix="");c&&(d.suffix+="<span class='CBSymbol'>"+V3bq.getText(c)+"</span>")}return d};e.on("cellclick",e.onCellClick);e.on("itemcontextmenu",e.onContextMenu);e.startupdate=function(){null===g&&e.isVisible()&&(g=e.createMask());null!==g&&g.show()};e.clear=function(b){e.isVisible()&&(b&&this.setEmptyText(b),b=e.getHeight(),0<f.count()&&f.removeAll(),e.setHeight(b))};e.setEmptyText=function(b){Ext.apply(e.getView(),{emptyText:'<div class = "gridEmptyText">'+b+"</div>"})};var z=CB.V1mk.V1ml();e.refreshAfterShow=
function(){this.lbInfo&&this.liveBookListener(this.lbInfo);this.repPosInfo&&this.myMovesListener(this.repPosInfo)};e.liveBookListener=function(b){if(!e.isVisible())e.lbInfo=b;else if(c()&&c().getCurPos){var d=b.moves,g=c().getCurPos(),l=g.getSideToMove();6>=g.getPieces().length&&(b.sorted||CB.V1ms.V1mt(d,l==CB.Vaz.BLACK));e.setEmptyText(lm.FRESH_POSITION);d=e.getHeight();if(c()){h=c().getCurPos().getPlyNum();for(l=g=0;l<b.moves.length;l++)g+=b.moves[l].getNVisits();z=CB.V1mk.V1ml();for(var q=6>=c().getCurPos().getPieces().length,
r=[],l=0;l<b.moves.length;l++){var t=b.moves[l];if(q||e.passesMoveFilter(t)){var w=t.getMoveRecord();t.line=e.generateLine(b.position,w);t.fPercent=100;g&&(t.fPercent=100*t.getNVisits()/g);t.m_nEval=t.getNEval();t.Games=t.m_performanceStats.getNGames();t.Result=t.m_performanceStats.getFPercent(b.position.isBTM());t.EloAvg=t.m_performanceStats.getSortEloAv();t.fr=w.from;t.to=w.to;t.players=[];delete t.id;t=new CB.V2qk.V2qn(t);t.id=e.calcId(w);r.push(t)}}0<f.count()&&f.removeAll();f.applyAdd(r);e.setHeight(d);
e.myFocus&&(e.myFocus=!1,e.focus());r.length?e.setEmptyText("Requesting moves..."):e.getView().refresh()}}};e.calcId=function(b){return"TBBook"+((b.prom<<12)+(b.from<<8)+b.to)};e.passesMoveFilter=function(d){var c=b.minVisits||2;return(0<d.getNGames()||300>z-d.m_nTimeStamp||d.isMyMove)&&(d.getNVisits()>=c||d.hasEval())};e.tbDataListener=function(b){if(e.isVisible()&&c()&&c().getCurPos&&b.position.equals(c().getCurPos())){f.beginUpdate();for(var d=[],g=0;g<CB.V1mk.prototype.HASH_LINE_CNT;++g){var h=
CB.V2jy.generateLine(b.position,b.table.move[g],c(),3);if(h.line.length){var l=new CB.V1mk;l.line=h.lineNota;for(var q=!1,r=0;r<f.getCount();r++){var t=f.getAt(r);h.line[0].equals(t.data.move)&&(t.data.m_nEval=b.table.move[g].m_nEval,t.data.m_nDepth=b.table.move[g].m_nDepth,0==t.data.Games&&(t.data.line=h.lineNota),q=!0)}if(!q&&(l.players=[],l.to=h.line[0].to,l.from=h.line[0].from,l.Games=0,l.EloAvg=0,l.to!=l.from&&(l.move=h.line[0],150<b.table.move[g].m_nCalcDepth))){l.m_nEval=b.table.move[g].m_nEval;
l.m_nDepth=b.table.move[g].m_nDepth;l.V2mx(!0);l=new CB.V2qk.V2qn(l);l.id=e.calcId(h.line[0]);l.data.line=h.lineNota;h=!1;for(q=0;!h&&q<d.length;q++)h=d[q].id==l.id;h||d.push(l)}}}f.add(d);f.endUpdate();e.getView().refresh()}};e.onDBGamesListener=function(b){if(e.isVisible()){f.beginUpdate();for(var d=0;d<b.length;d++)if(b[d].nFlags&CB.OnlineEntryEnum.V1mw&&V3c6.onlineLobby.V1mx<b[d].aGame.getCurLine().length){var c=b[d].aGame.getCurLine()[V3c6.onlineLobby.V1mx];if((c=f.getById(e.calcId(c)))&&2>c.data.players.length){var g=
V3c6.onlineLobby.V1mx&1?b[d].aGame.hdr.black.getListStr(0):b[d].aGame.hdr.white.getListStr(0);c.data.players[0]!=g&&c.data.players.push(g);e.getView().refreshNode(c)}}f.endUpdate()}};e.generateLine=function(b,d){for(var e=this.convertJSONLine(ObjUtil.clone(b),d),f=new CB.Vie(CB.V3b2),g="",h=c().game.getStartPos().getBTM(),l=0;l<e.length;l++){var q=f.getMoveNota(e[l]),r=f.getStrMoveNumInLine(l,c().getCurPos().getPlyNum(),h),g=g+(r+q);l<e.length-1&&(g+=" ")}return g};e.convertJSONLine=function(b,d){var c=
[];b.isLegalMove(d)&&(b.preCalcCtx(d),b.makeMove(d),b.postCalcCtx(d,!0),c.push(d));return c};e.myMovesListener=function(b){this.repPosInfo=b;for(var d=0;d<b.moves.length;d++);e.myMoves=b.moves;e.getView().refresh()};e.createMask=function(){return new Ext.LoadMask({msg:lm.LOADING_STATISTICS,target:e})};e.initCloudListener=function(b){b.addOnMyMovesListener(e.myMovesListener)};e.onLoginListener=function(){e.myMoves=[];e.setTitle(lm.LIVE_BOOK);e.getView().refresh()};e.onAccountTypeListener=function(d){t=
(r=3==d.type)||2==d.type;!q&&0<=d.type&&b.players&&(l.push({text:"Players",flex:3,minWidth:50,maxWidth:220,sortable:!0,dataIndex:"players",tdCls:"liveBookVisits",align:"left",renderer:function(b,d,c,e,f,g){if(r)return d.tdCls="liveBookPlayers",b.join("/");d.tdCls="gmPremiumOnly";if(t)return String.formatEx('<a class="gmPremiumOnly" href="{0}">{1}</a>',"https://account.chessbase.com/en/matrix",lm.PREMIUM_ONLY);b="https://live.chessbase.com/logon?returnurl="+encodeURIComponent(document.location);return String.formatEx('<a class="gmPremiumOnly" href="{0}">{1}</a>',
b,lm.PREMIUM_ONLY)}}),e.reconfigure(f,l),q=!0);d.name&&e.setTitle(lm.LIVE_BOOK+" ("+d.name+")");e.getView().refresh()};b.suppressLiveBookListener||V3c6.aTBLobby.addOnLiveBookListener(e.liveBookListener);V3c6.aTBLobby.addOnLiveBookDisplayListener(e.liveBookListener);V3c6.aTBLobby.addOnTBDataListener(e.tbDataListener);V3c6.addOnLoginListener(e.onLoginListener.bind(e));V3c6.addOnAccountTypeListener(e.onAccountTypeListener.bind(e));V3c6.onlineLobby&&V3c6.onlineLobby.addOnGamesListener(e.onDBGamesListener.bind(e));
return e};"use strict";
CB.V2o8=function(){var c=function(){this.set=new CB.Vak;this.V2qp=0;this.enabled=!0};c.prototype.save=function(){(new CB.Vam).save("posns_trackCnt",this.V2qp);this.set.save("posns",function(b){return 200>this.V2qp-b.lastSeenAt}.bind(this))};c.prototype.load=function(){this.V2qp=(new CB.Vam).load("posns_trackCnt")||0;this.set.load("posns",function(b){if(b){var d=new CB.Position;d.copy(b.pos);d=new CB.V2qq(d);d.cnt=b.cnt;d.lastSeenAt=b.lastSeenAt;return d}})};c.prototype.track=function(b){if(this.enabled){this.V2qp++;
if(this.set.contains(new CB.V2qq(b)))return b=this.set.get(new CB.V2qq(b)),b.inc(),b.lastSeenAt=this.V2qp,!0;b=new CB.V2qq(b);b.lastSeenAt=this.V2qp;this.set.insert(b)}return!1};c.prototype.V2qr=function(b){b=this.set.get(new CB.V2qq(b));return void 0!==b&&0!=b.cnt?this.V2qp-b.lastSeenAt:-1};return c}();
CB.V2qq=function(){var c=function(b){this.pos=ObjUtil.clone(b);this.lastSeenAt=this.cnt=0};c.prototype.setEquals=function(b){return this.pos.setEquals(b.pos)};c.prototype.setGreater=function(b){return this.pos.setGreater(b.pos)};c.prototype.inc=function(){this.cnt++};return c}();CB.namespace("CB.Server.V2qs");CB.Server.V2qt={V2qu:1,V2qv:2,V2qw:4,V2qx:8};
CB.Server.V2qs=function(){var c=function(){this.V2r5=this.V2r4=this.V2r3=this.V2r2=this.V2r1=this.V2r0=this.V2qz=this.V2j6=this.V2qy=this.nId=0;this.strText=this.strName="";this.V2r8=this.V2r7=this.V2qy=this.V2r6=this.V2j8=0;this.V2r9=new CB.V7k;this.V2ra=new CB.Server.Vpz};c.prototype.fromDataBuf=function(b){this.nId=b.V3c1();this.V2qy=b.V3c1()&65535;this.V2j6=b.V3c1();this.V2qz=b.readUint8();this.V2rb=b.readUint8();this.V2r1=b.readUint8();this.V2r2=b.readUint8();this.V2r3=b.readUint8();this.V2r4=
b.readUint8();this.V2r5=b.V3c2();this.strName=b.V3b7(200);this.strText=b.V3b7(200);this.V2j8=b.V3c1();this.V2r6=b.V3c1();b.V3c1();this.V2r9.fromDataBuf(b);this.V2r7=b.V3c2();this.V2r8=b.V3c2();b.beginSizedRead();this.V2ra.fromDataBuf(b);b.endSizedRead();return!0};c.prototype.V1uh=function(){return(this.V2j6&15)==CB.Server.V2rc.GUEST};c.prototype.isPremium=function(){return this.V2r7==CB.Server.V2qt.V2qw};return c}();CB.namespace("CB.Server.V2rd");
CB.Server.V2rd=function(){var c=function(){this.items=[]};c.prototype.fromSocketsMsg=function(b){b=b.getBuf();for(var d=b.V3c1(),c=0;c<d;c++){var g=new CB.Server.V2qs;g.fromDataBuf(b)&&this.items.push(g)}};c.prototype.get=function(b){return this.items[b]};c.prototype.count=function(){return this.items.length};c.prototype.V1rh=function(){return"NOTIMPL"};return c}();"use strict";CB.namespace("CB.Server.V2re");CB.namespace("CB.Server.V2rc");CB.namespace("CB.Server.V2rf");
CB.Server.V2rc={V5l:-1,GUEST:0,PAWN:1,KNIGHT:2,BISHOP:3,ROOK:4,QUEEN:5,KING:6,V2rg:7,V2rh:8,V2ri:9,V2rj:10,V5n:11,V5s:function(c){switch(c&15){default:case this.GUEST:return"Guest";case this.PAWN:return"Pawn";case this.KNIGHT:return"Knight";case this.BISHOP:return"Bishop";case this.ROOK:return"Rook";case this.QUEEN:return"Queen";case this.KING:return"King";case this.V2rh:return"VIP";case this.V2rg:return"topGM";case this.V2ri:return"Sysop";case this.V2rj:return"ChessBase"}},V2rk:function(c){switch(c&
15){default:case this.GUEST:return lm.GUEST;case this.PAWN:return lm.PAWN;case this.KNIGHT:return lm.KNIGHT;case this.BISHOP:return lm.BISHOP;case this.ROOK:return lm.ROOK;case this.QUEEN:return lm.QUEEN;case this.KING:return lm.KING;case this.V2rh:return"VIP";case this.V2rg:return"Top-GM";case this.V2ri:return"Sysop";case this.V2rj:return"ChessBase"}}};CB.Server.V2rf={V2rl:1,V2rm:2,V2rn:16,V2ro:32,V2rp:64,V2rq:128,V2rr:256};
CB.Server.V2re=function(){function c(b,d,c,h){1<c.length&&CB.V5q.V5r(".rnk-"+d+c,"background-image: url( ../../common/media/server/ranks"+h+"/"+d+c+h+".png ) !important;background-repeat:no-repeat; background-position:center;")}var b=!1,d=function(d,g){this.rank=d;this.flags=g;if(!b){for(var f=CB.Server.V2rc.PAWN;f<=CB.Server.V2rc.KING;f++)c(void 0,"w",CB.Server.V2rc.V5s(f),16),c(void 0,"b",CB.Server.V2rc.V5s(f),16);c(void 0,"","Guest",16);for(f=CB.Server.V2rc.V2rg;f<CB.Server.V2rc.V5n;f++)c(void 0,
"",CB.Server.V2rc.V5s(f),16);c(void 0,"","Helper",16);b=!0}};d.prototype.V2rs=function(b){this.rank=b&255;this.flags=b>>16};d.prototype.V2rt=function(){return this.flags<<16+rank};d.prototype.V2ru=function(){return 0!==(this.flags&CB.Server.V2rf.V2rl)||0!==(this.flags&CB.Server.V2rf.V2rm)};d.prototype.V2rv=function(){return 0!=(this.flags&CB.Server.V2rf.V2rp)};d.prototype.isPremium=function(){return 0!=(this.flags&CB.Server.V2rf.V2rq)};d.prototype.V5s=function(){return CB.Server.V2rc.V5s(this.rank)};
d.prototype.V2rw=function(){var b=CB.Server.V2rc.V2rk(this.rank);return b+=this.V2rx()};d.prototype.V2rx=function(){var b="";this.flags&CB.Server.V2rf.V2rl&&(b+="+");this.flags&CB.Server.V2rf.V2rm&&(b+="+");this.flags&CB.Server.V2rf.V2rn&&(b+="*");this.flags&CB.Server.V2rf.V2ro&&(b+="*");this.flags&CB.Server.V2rf.V2rq&&(b+="!");return b};d.prototype.Vpw=function(){return this.rank==CB.Server.V2rc.V2rj?0:this.V2rv()?256*CB.Server.V2rc.V2rh+this.flags+1:256*this.rank+this.flags+1};d.prototype.V2ry=
function(){var b;if(this.V2rv())b="rnk-Helper";else switch(this.rank){default:case CB.Server.V2rc.GUEST:b="rnk-Guest";break;case CB.Server.V2rc.PAWN:case CB.Server.V2rc.KNIGHT:case CB.Server.V2rc.BISHOP:case CB.Server.V2rc.ROOK:case CB.Server.V2rc.QUEEN:case CB.Server.V2rc.KING:b="rnk-"+(this.V2ru()?"b":"w")+this.V5s();break;case CB.Server.V2rc.V2rg:case CB.Server.V2rc.V2rh:case CB.Server.V2rc.V2ri:case CB.Server.V2rc.V2rj:b="rnk-"+this.V5s()}return b};return d}();"use strict";CB.namespace("CB.Server.V2rz");
CB.Server.V2s0={GONE:1,V2s1:2,V2s2:4,V2s3:8,V2s4:16,CHAIRMAN:32,V2s5:8192,V2s6:32768,V2s7:65536,V2s8:131072,V2s9:262144,V2sa:524288,V2sb:16777216,IDLE:64,V2sc:128,V2sd:1048576,V2se:256,V2sf:512,V2sg:1024,ENGINE:2048,V2sh:4096,VIDEO:16384,V2si:4194304,V2sj:8388608,V2sk:2097152,V2sl:4194304,toString:function(c){var b;if(c&this.GONE)b=lm.GONE;else if(c&this.V2sl)b="Offline";else switch(c&this.V2sm&~this.V2s5){default:case this.V2s1:b="";break;case this.V2s2:b=lm.PLAYING;break;case this.V2s3:b=lm.KIBITZING;
break;case this.CHAIRMAN:b=lm.CHAIRMAN;break;case this.V2sb:b=lm.TACTICS;break;case this.V2sa:b="Registered"}c&this.V2s5&&(b.length&&(b+="/"),b+=lm.SEEKS);c&this.GONE||(c&this.IDLE&&(b.length&&(b+="/"),b+=lm.IDLE),c&this.V2sf&&!(c&this.V2s2)&&(b.length&&(b+="/"),b+=lm.PAUSE),c&this.V2sh&&(b.length&&(b+="/"),b+="Centaur"),c&this.ENGINE&&(b.length&&(b+="/"),b+="Engine"),c&this.V2s6&&(b=lm.TOURN_DIRECTOR),c&this.V2s7&&(b="Simul Master"),c&this.V2s8&&(b="wants in"),c&this.V2s9&&(b="wants out"),c&this.V2sa&&
(b="registered"),c&this.V2sd&&(b+="disconnected"));return b}};(function(){var c=CB.Server.V2s0;c.V2sm=c.V2s1|c.V2s2|c.V2s3|c.V2sb|c.V2s5|c.V2s4|c.CHAIRMAN|c.V2s8|c.V2s9|c.V2sa|c.V2s7|c.V2s6;c.PLAYERTYPE=c.V2sg|c.ENGINE|c.V2sh;c.IDLETYPE=c.IDLE|c.V2sc|c.VIDEO|c.V2sd|c.V2si|c.V2sj;c.PROMINENTTYPE=c.CHAIRMAN|c.V2s6|c.V2s7;c.NOGAMETYPE=c.V2se|c.V2sf})();
CB.Server.V2rz=function(){var c=CB.Server.V2s0,b=!1,d=function(d){this.flags=d;if(!b){d="Idle Pause Playing Kibitzing Seeking Tactics Chairman".split(" ");for(var c=0;c<d.length;c++){var f=d[c];if(1<f.length){var h="background-image: url( ../../common/media/server/status/"+f+16+".png ) !important;",h=V3c6&&V3c6.panelMgr&&V3c6.panelMgr.viewport&&V3c6.panelMgr.viewport.rtl?h+"background-repeat:no-repeat; background-position:right center;":h+"background-repeat:no-repeat; background-position:left center;";
CB.V5q.V5r(".stat-"+f,h)}}b=!0}};d.prototype.toString=function(){return CB.Server.V2s0.toString(this.flags)};d.prototype.Vpw=function(){var b=0;if(this.flags&c.GONE)return b;b++;if(this.flags&c.CHAIRMAN)return b;b++;if(this.flags&c.V2s7)return b;b++;if(this.flags&c.V2s6)return b;b++;if(this.flags&c.V2sd)return b;b++;if(this.flags&c.V2sa)return b;b++;if(this.flags&c.V2s8)return b;b++;if(this.flags&c.V2s9)return b;b++;if(this.flags&c.V2sb)return b;b++;if(this.flags&c.V2s2)return b;b++;if(this.flags&
c.V2s3)return b;b++;if(this.flags&c.V2s5)return b;b++;if(this.flags&c.V2se)return b;b++;if(this.flags&c.V2sf)return b;b++;if(this.flags&c.V2sk)return b;b++;if(this.flags&c.IDLE)return b;b++;return b};d.prototype.V2sn=function(b){b.isStatusChange()&&(b.status&c.V2sm&&(this.flags&=~c.V2sm),b.status&c.PLAYERTYPE&&(this.flags&=~c.PLAYERTYPE),b.status&c.IDLETYPE&&(this.flags&=~c.IDLETYPE),b.status&c.NOGAMETYPE&&(this.flags&=~c.NOGAMETYPE),this.flags|=b.status)};d.prototype.V2so=function(){return 0!=(this.flags&
c.V2s2)};d.prototype.V2ry=function(){var b="";if(!(this.flags&c.GONE))if(this.flags&c.IDLE)b="stat-Idle";else if(this.flags&c.V2sf&&!(this.flags&c.V2s2))b="stat-Pause";else if(this.flags&c.V2s5)b="stat-Seeking";else switch(this.flags&c.V2sm){case c.V2s2:b="stat-Playing";break;case c.V2s3:b="stat-Kibitzing";break;case c.CHAIRMAN:b="stat-Chairman";break;case c.V2sb:b="stat-Tactics"}return b};return d}();"use strict";CB.namespace("CB.Server.V2sp");
CB.Server.V2sq={STATUS:1,V2sr:2,V2ss:4,V2st:8,V2su:16,V2sv:32};
CB.Server.V2sp=function(){var c=CB.Server.V2sq,b=function(){};b.prototype.init=function(b){this.V2sx=this.V2sw=this.flags=0;this.id=b;this.status=this.V2sz=this.V2sy=0};b.prototype.fromDataBuf=function(b){this.flags=b.V3c1();this.V2sw=b.V3c2();this.V2sx=b.V3c2();this.id=b.V3c1();this.V2cd(c.V2ss)?this.V2sy=b.V3c1():this.V2sy=0;this.V2cd(c.V2st)?this.V2sz=b.V3c1():this.V2sz=0;this.V2cd(c.STATUS)&&(this.status=b.V3c1());this.V2cd(c.V2sr)&&(this.text=b.V3b7(65))};b.prototype.V3c0=function(b){b.V3by(this.flags);
b.V3bw(this.V2sw||0);b.V3bw(this.V2sx||0);b.V3by(this.id)||0;this.V2cd(c.V2ss)&&b.writeInt(this.V2sy);this.V2cd(c.V2st)&&b.writeInt(this.V2sz);this.V2cd(c.STATUS)&&b.writeInt(this.status);this.V2cd(c.V2sr)&&b.V3b6(this.text)};b.prototype.toString=function(){var b;b="id="+this.id;this.V2cd(c.V2ss)&&(b+=" val1="+this.V2sy);this.V2cd(c.V2st)&&(b+=" val2="+this.V2sz);this.V2cd(c.STATUS)&&(b+=" stat="+CB.Server.V2s0.toString(this.status));this.V2cd(c.V2sr)&&(b+=" txt="+this.text);return b};b.prototype.V2t0=
function(b){if("number"!=typeof b)throw Error("CDC.setStatusChange must pass a number");this.flags|=c.STATUS;this.status=b};b.prototype.isStatusChange=function(){return this.V2cd(c.STATUS)};b.prototype.V2t1=function(){return this.V2cd(c.V2ss)&&this.V2cd(c.V2st)&&1==this.V2sy};b.prototype.V2t2=function(){return this.V2t1()?this.V2sz&65535:0};b.prototype.V2cd=function(b){return 0!==(this.flags&b)};b.prototype.V2t3=function(){return 0!=(this.status&CB.Server.V2s0.V2s5)&&this.isStatusChange()};b.prototype.V2so=
function(){return 0!=(this.status&CB.Server.V2s0.V2s2)&&this.isStatusChange()};b.prototype.V2t4=function(){this.status|=CB.Server.V2s0.V2s2;this.flags|=CB.Server.V2sq.STATUS};b.prototype.V2t5=function(){return this.isStatusChange&&0!=(this.status&CB.Server.V2s0.V2sa)};return b}();
CB.V2eo={V5l:0,V2t6:1E3,V2t7:1001,V2t8:1002,V2t9:1003,V2ta:1004,V2tb:1005,V2tc:1100,V2td:1101,V2te:1102,V2tf:1103,V2tg:1200,V2th:1201,V2ti:1202,V2tj:1203,V2tk:1204,V2tl:1205,V2tm:1206,V2tn:1207,V2to:1208,V2tp:1209,V2tq:1210,V2tr:1211,V2ts:1212,V2tt:1213,V2tu:1214,V2tv:1215,V2tw:1250,V2tx:1251,V2ty:1260,V2tz:1261,V2u0:1262,V2u1:1263,V2u2:1270,V2u3:1271,V2u4:1272,V2u5:1273,V2u6:1274,V2u7:1275,V2u8:1276,V2u9:1277,V2ua:1278,V2ub:1280,V2uc:1281,V2ud:1282,V2ue:1283,V2uf:1284,toString:function(c){for(var b in this)if(this[b]==
c)return"UserMsg:"+b;return"Unknown UserMsgId: "+c},Vlz:function(c){return"UserMsgId="+c}};"use strict";CB.namespace("CB.Server.V2ug");
CB.Server.V2uh={Vgy:-1,BLACKWINS:100,DRAW:101,WHITEWINS:102,V1qj:103,V10:360,V2ui:361,V2uj:362,V2uk:363,V2ul:364,V2um:365,V2un:366,V2uo:370,V2up:371,V2uq:372,V2ur:373,V2us:374,V2ut:375,V2uu:376,V2uv:380,V2uw:381,V2ux:382,V2uy:383,V2uz:384,V2v0:385,V2v1:386,V2v2:388,V2v3:389,V2v4:390,V2v5:391,V2v6:500,V2v7:501,V2v8:502,V2v9:503,V2va:504,V2vb:505,V2vc:506,V2vd:507,V2ve:508,V2vf:509,V2vg:510,V2vh:511,V2vi:512,V2vj:513,V2vk:514,V2vl:600,V1qi:601,V2vm:602,V2vn:603,V2vo:604,V2vp:605,V2vq:620,V2vr:621,V2vs:622,
V2vt:650,V2vu:651,V2vv:670,V2vw:671,V2vx:672,toString:function(c){for(var b in this)if(this[b]==c)return"GChange: "+b;return"Unknown GameStatChange: "+c}};var gsEnum=CB.Server.V2uh;
CB.Server.V2ug=function(){var c=function(b,d,c){this.type=b||CB.Server.V2uh.Vgy;this.idGame=d||0;this.idPlayer=c||0;this.num=this.flags=0};c.prototype.init=function(b,d){this.idGame=b;this.idPlayer=d;this.num=this.flags=0};c.prototype.fromDataBuf=function(b){this.idGame=b.readInt();this.type=b.readInt();this.idPlayer=b.readInt();this.num=b.readInt();this.flags=b.readShort();this.V2sx=b.readShort()};c.prototype.V3c0=function(b){b.writeInt(this.idGame);b.writeInt(this.type);b.writeInt(this.idPlayer);
b.writeInt(this.num);b.writeShort(this.flags);b.writeShort(0)};c.prototype.isResult=function(){return 0<=this.type&&this.type<=CB.Server.V2uh.V1qj};c.prototype.isWatcherChange=function(){return this.type==CB.Server.V2uh.V2vl||this.type==CB.Server.V2uh.V2vo||this.type==CB.Server.V2uh.V1qi};c.prototype.isResult=function(){return this.type==CB.Server.V2uh.BLACKWINS||this.type==CB.Server.V2uh.WHITEWINS||this.type==CB.Server.V2uh.DRAW};c.prototype.getWatchersInc=function(){return this.type==CB.Server.V2uh.V2vl||
this.type==CB.Server.V2uh.V2vo?1:this.type==CB.Server.V2uh.V1qi?-1:0};c.prototype.V5g=function(){return this.num};c.prototype.toString=function(){return CB.Server.V2uh.toString(this.type)+": "+this.idGame+", player="+this.idPlayer+", flags="+this.flags};return c}();"use strict";CB.namespace("CB.Server.GameItemTypeBits");CB.Server.V2vy={UNKNOWN:0,V2th:1,V2vz:2,V2l:4,V2w0:8,ABORTED:16,V2w1:32,Vq2:64,Vq1:128,Vq0:256,ENGINE:512,V2sh:1024,V2w2:2048,Vty:4096,Vuc:8192,V2w3:16384,V2w4:32768,V2w5:65536};
CB.Server.V2vy.V2w6=CB.Server.V2vy.V2th|CB.Server.V2vy.V2vz|CB.Server.V2vy.V2l|CB.Server.V2vy.V2w1|CB.Server.V2vy.Vuc|CB.Server.V2vy.Vty;CB.Server.V2vy.V2w7=CB.Server.V2vy.ENGINE|CB.Server.V2vy.V2sh;CB.namespace("CB.Server.V2w8");
CB.Server.V2w8=function(){var c=function(){};c.prototype.fromDataBuf=function(b){this.white=b.V3b7(100);this.type=b.V3c2();this.black=b.V3b7(100);this.id=b.V3c1();this.idGroup=b.V3c1();this.result=b.V3c1();this.V166=b.V3c1();this.V2w9=b.V3c1();this.V2wa=b.V3c1();this.V2wb=b.readInt();this.flags=b.readInt();this.tourn=b.V3b7(100);this.eloWhite=b.V3c2()&8191;this.eloBlack=b.V3c2()&8191;this.round1=b.readUint8();this.round2=b.readUint8();this.V2wc=b.V3c2();b.beginSizedRead();var d=b.V3c1();this.watchers=
d&65535;this.moveLen=d>>22&511;this.eco=b.V3bv();b.endSizedRead();this.clock=new CB.Vl4;this.clock.fromDataBuf(b);this.flags&CB.Server.V2wd.V2we||delete this.clock};c.prototype.toString=function(){return this.white+"-"+this.black+", "+this.tourn+" ("+this.round1+")"};c.prototype.V2hy=function(){return this.white?this.white+" - ...":""};c.prototype.V2wf=function(b){b.isResult()&&(this.result=b.type-100);b.isWatcherChange()&&(this.watchers+=b.getWatchersInc())};c.prototype.isBlitz=function(){return 0!=
(this.type&CB.Server.V2vy.Vq1)};c.prototype.Vq4=function(){return 0!=(this.type&CB.Server.V2vy.Vq2)};c.prototype.isImportant=function(){return 0!=(this.type&CB.Server.V2vy.Vuc)};c.prototype.isAnalysis=function(){return 0!=(this.type&CB.Server.V2vy.V2l)};c.prototype.isBroadcast=function(){return 0!=(this.type&CB.Server.V2vy.V2vz)};c.prototype.isStream=function(){return 0!=(this.type&CB.Server.V2vy.Vty)};c.prototype.isHTTPStream=function(){return 0!=(this.type&CB.Server.V2vy.V2w2)};c.prototype.isPrivate=
function(){return 0!=(this.flags&CB.Server.V2wd.V2w4)};c.prototype.isPremium=function(){return 0!=(this.flags&CB.Server.V2vy.V2w3)};c.prototype.mightBeEngineGame=function(){var b=(this.white.match(/\d/g)||[]).length,d=(this.black.match(/\d/g)||[]).length,c=(this.black.match(/\./g)||[]).length,g=(this.black.match(/\./g)||[]).length,f=0<(this.white.match(/64/g)||[]).length&&0<(this.white.match(/bit/gi)||[]).length,h=0<(this.black.match(/64/g)||[]).length&&0<(this.black.match(/bit/gi)||[]).length;return 0<
c&&0<g&&1<b&&1<d||f||h};c.prototype.getWatcherSortVal=function(){return CB.Vgu.isFinished(this.result)?this.watchers/2:this.watchers};c.prototype.shouldRequestImmediatelyInLive=function(){return 2<this.result&&(300<this.watchers||2500<this.eloWhite&&2500<this.eloBlack)||2680<this.eloWhite||2680<this.eloBlack};return c}();
CB.Server.V2w8.V2wg=function(c,b){switch(c){case CB.Vgu.Vgv:case CB.Vgu.WHITE_WINS:case CB.Vgu.BLACK_WINS:case CB.Vgu.DRAW:return CB.Vgu.toString(c);case CB.Vgu.Vgx:return b&(CB.Server.V2vy.V2l|CB.Server.V2vy.V2vz)?lm.FINISHED:lm.ABORTED}};
CB.Server.V2wh=function(){function c(b,c,g){for(var f=0;f<b.length;f++)if(void 0===b[f].watchers||c.eloWhite>b[f].eloWhite){b.splice(f,0,c);b.length>g&&b.pop();return}b.length<g&&b.push(c)}var b=function(b){this.games=b?b:[]};b.prototype.fromDataBuf=function(b){for(var c=b.V3c1(),g=0;g<c;g++){var f=new CB.Server.V2w8;f.fromDataBuf(b);this.games.push(f)}};b.prototype.V2wi=function(){if(this.games.length)return this.games[0].idGroup};b.prototype.V2wj=function(b){function c(b,d,e){if(d){for(var f=0;f<
b.length;f++)if(void 0===b[f].watchers||d.getWatcherSortVal()>b[f].getWatcherSortVal()){b.splice(f,0,d);b.length>e&&b.pop();return}b.length<e&&b.push(d)}}for(var g=[],f=0;f<this.games.length;f++)!(g.length<b||this.games[f].isImportant()||g.length&&this.games[f].watchers>g[g.length-1].watchers)||this.games[f].isStream()||this.games[f].isAnalysis()||this.games[f].mightBeEngineGame()||CB.Vgu.isFinished(this.games[f].result)&&!this.games[f].isBroadcast()||!this.games[f].isBlitz()&&!this.games[f].isBroadcast()||
c(g,this.games[f],b);g.forEach(function(b,d,c){});return g};b.prototype.V2wk=function(b){for(var e=[],g=0;g<this.games.length;g++)!(e.length<b||this.games[g].isImportant()||e.length&&this.games[g].eloWhite>e[e.length-1].eloWhite)||this.games[g].isStream()||this.games[g].isAnalysis()||CB.Vgu.isFinished(this.games[g].result)&&!this.games[g].isBroadcast()||!this.games[g].isBlitz()&&!this.games[g].isBroadcast()||c(e,this.games[g],b);e.forEach(function(b,d,c){});return e};b.prototype.V2wl=function(b,e){for(var g=
[],f=0;f<this.games.length;f++)(g.length<b||this.games[f].isImportant()||g.length&&this.games[f].eloWhite>g[g.length-1].eloWhite)&&!this.games[f].isStream()&&!this.games[f].isAnalysis()&&!CB.Vgu.isFinished(this.games[f].result)&&this.games[f].isBroadcast()&&this.games[f].watchers>e&&c(g,this.games[f],b);g.forEach(function(b,d,c){});return g};b.prototype.V2wm=function(b,c){for(var g=[],f=0;f<this.games.length;f++)if((this.games[f].isStream()||this.games[f].isHTTPStream())&&this.games[f].isBroadcast()&&
-1==this.games[f].result){var h=!this.games[f].isPrivate();h&&(this.games[f].isPremium()&&(h=!1,c&&(h=!0)),h&&g.push(this.games[f]))}g.forEach(function(b,d,c){});f=[];for(h=0;h<g.length;h++){f.push(g[h]);var l=new CB.V2wn(f[h].id,f[h].white+" - "+f[h].black,f[h].tourn);b.push(l)}return f};b.prototype.isStream=function(b){for(b=0;b<this.games.length;b++)if(this.games[b].isStream())return!0;return!1};b.prototype.V2wo=function(b){for(var c=[],g=0;g<this.games.length;g++)b(this.games[g])&&c.push(this.games[g]);
return c.length?new CB.Server.V2wh(c):new CB.Server.V2wh(this.V2wj(4))};return b}();"use strict";CB.namespace("CB.Server.V2wp");
CB.Server.V2wp=function(){var c=function(){};c.prototype.fromDataBuf=function(b){this.idGame=b.readInt();this.type=b.readInt();this.V2sx=b.readInt();this.game=new CB.Game;this.game.fromDataBuf(b);b.beginSizedRead();this.strBanner=b.V3b7(255);this.strURL=b.V3b7(255);this.V2wq=b.V3b7(255);b.endSizedRead()};c.prototype.V3c0=function(b){b.writeInt(this.idGame)};c.prototype.toString=function(){return"GameData: "+this.idGame+", type="+this.type.toString(16)+", "+this.game.hdr.white+"-"+this.game.hdr.black};
c.prototype.isStream=function(){return 0!=(this.type&CB.Server.V2vy.Vty)};c.prototype.isBroadcast=function(){return 0!=(this.type&CB.Server.V2vy.V2vz)};c.prototype.isHTTPStream=function(){return 0!=(this.type&CB.Server.V2vy.V2w2)};c.prototype.V2wr=function(){return 0!=(this.type&CB.Server.V2vy.V2vz)};return c}();"use strict";
CB.Voy=function(){var c=function(b,d,c,g){b&&(this.move=[b.from,b.to,b.prom&7],this.moveNo=d,this.centiSecs=c,this.idGame=g);this.flags=0};c.prototype.toString=function(){return CB.Vbf.toString(this.move[0])+"-"+CB.Vbf.toString(this.move[1])};c.prototype.fromDataBuf=function(b){this.idGame=b.V3c1();this.move=b.readByteArray(3);this.centiSecs=b.V3c1();this.moveNo=b.V3c2();this.flags=b.V3c2();this.eval=b.V3c1()};c.prototype.V3c0=function(b){b.V3by(this.idGame);b.writeByteArray(this.move,3);b.V3by(this.centiSecs);
b.V3bw(this.moveNo);b.V3bw(this.flags||0);b.V3by(this.eval||0)};return c}();"use strict";CB.V2ws=function(){var c=function(){};c.prototype.fromDataBuf=function(b){this.V2wt=b.readInt();this.V2wu=b.readInt();this.Viv=b.readInt();this.flags=b.readInt()};c.prototype.getWhiteTime=function(){return this.V2wt};c.prototype.getBlackTime=function(){return this.V2wu};c.prototype.isBlack=function(){return 0!=(this.flags&1)};return c}();"use strict";CB.namespace("CB.Server.V2wv");
CB.Server.V2wd={V2w1:1,V2we:2,V2ww:4,Vl7:8,Vpt:16,V2l:32,V2wx:64,V2wy:128,V2wz:256,V2x0:512,V2w4:1024,V2x1:2048,V2x2:4096,V2x3:8192,V2x4:16384,V2x5:32768,V2x6:65536,V2x7:131072,V2x8:262144,V2x9:524288,V2w3:1048576,V2xa:2097152,V2vv:4194304,V2xb:8388608,V2xc:16777216,V2xd:33554432,V2xe:67108864,V2xf:134217728,V2xg:268435456,V2xh:536870912};
CB.Server.V2wv=function(){var c=1,b=function(b,e,g){this.lobby=b;this.idGame=e;this.Vk4=g;this.V2xi=!1;this.V2xk=this.V2xj=0;this.V2xl=!0;this.uniqueId=c++;this.V2xm=!0;this.V2xn=[];this.V2xo=[];this.V2xp=0};b.prototype.V2xq=function(){this.gameKernel&&(this.gameKernel.animateBoard=!1,this.gameKernel.destroy(),this.gameKernel=null);this.V2xk=this.V2xj=0;this.V2xm=this.V2xl=!0;this.board&&(this.board.allowInput=!0)};b.prototype.V1a7=function(){this.V2xq();this.board&&this.board.V1a7()};b.prototype.isFinished=
function(){return this.gameKernel.isFinished()};b.prototype.V2xr=function(){this.V2xm=!this.V2xm;this.V2xs(this.V2xm);this.V2xj=0};b.prototype.V2xs=function(b,c){if(this.V2xm=b)this.lobby.V14i.V2xt(this.idGame),this.V2xi=!0;this.board.allowInput=!0;V3c6.commands.Vt2(CB.V2o9.V2xu,this.V2xm);c||this.gameKernel&&(b?this.gameKernel.V3bl.startClock():this.gameKernel.V3bl.stopClock())};b.prototype.V2xv=function(b){this.board=new CB.BoardControl3D(b,100,100,"FritzBoard");this.V2xt();this.V2xi=!0;this.V2xl&&
this.lobby.V14i.V2xw(this.idGame);return this.board};b.prototype.V2xx=function(b){this.board=new CB.Vkl(b,100,100,this.idGame);V3c6.V190()?this.board.animSteps={forMove:2,forPosition:2}:this.board.animSteps={forMove:2,forPosition:3};CB.V5t.V64()&&(this.board.animSteps={forMove:.6,forPosition:.5});this.board.allowInput=!0;this.V49=this.board.onReadyHandlers.add(this.onBoardReady.bind(this));return this.board};b.prototype.onBoardReady=function(){this.V2xi||(this.V2xt(),this.V2xi=!0,this.board.onReadyHandlers.remove(this.V49),
this.V2xl&&this.lobby.V14i.V2xw(this.idGame))};b.prototype.onGameData=function(b){try{this.V2xy=!1;this.V2xz=new CB.V4z;this.gameKernel?this.V2xm&&(this.gameKernel.game.assign(b.game),this.gameKernel.game.gotoIndex(b.game.getMoveIndex())):(this.gameKernel=new CB.Vk3(this.Vk4,b.game),this.gameKernel.setPlayingMode(new CB.Vsq(this.gameKernel)),this.gameKernel.setBoardWin(this.board),this.gameKernel.V3bl.createGUIElements(this.board),this.gameKernel.animateBoard=!1,this.board.V1dk=!0,this.V2y0());this.clock?
this.gameKernel.V3bl.Vrn(this.clock):this.gameKernel.V3bl.Vrn(!1);this.board.debugName=b.game.hdr.getStrPlayers();this.V2xm&&(this.V2y1=this.gameKernel.game.getMoveIndex(),this.V2y2());this.board.cbcanvas?this.board.setTitleText(this.gameKernel.game.hdr.getStrPlayers(this.board.nSqPix>this.board.cbcanvas.zoomToPix(46))):this.board.setTitleText(this.gameKernel.game.hdr.getStrPlayers(20));this.V2xn=[];this.V2xk=0;this.gameKernel.animateBoard="undefined"!==typeof Ext?V3c6.Vkn()||!Ext.isIE:V3c6.Vkn();
this.strBanner=b.strBanner;if((this.strURL=b.strURL)&&(V3c6.V3bg.V1si()||V3c6.V190())&&V3c6.config.V1kl){var c=this.strURL,g="?";-1!=c.search(RegExp("\\?","g"))&&(g="&");c+=g+"ref=link_from_playchess_com";this.board.V1a4();if(V3c6.V190()){var f={urlRight:c,linkTextRight:CB.V4a.V4m(this.strURL),linkTextLeft:lm.FULL_VIEW,urlLeft:"http://live.chessbase.com"};this.board.bottomWin=new CB.BoardDoubleURL(f,{hScale:24,hMax:18,spacing:0,rightAlign:!0})}else this.board.bottomWin=new CB.BoardURL({linkText:CB.V4a.V4m(this.strURL),
url:c},{hScale:20,hMax:18,spacing:1});this.board.V19y.runOnce(500)}(b.isStream()||b.isHTTPStream())&&this.V2xs(!1);b.isStream()||b.isHTTPStream()||b.game.hdr.getCBResult().isFinished()&&this.V2xs(!1)}catch(h){CB.V46("GSess::onGameData:",h)}};b.prototype.V2y0=function(){this.gameKernel.V3bl.fnAcceptMove=function(){this.V2xm&&(this.V2y3=!0);return!0}.bind(this);this.gameKernel.V3bl.fnAfterMove=function(b){this.gameKernel.game.getMoveIndex()==this.V2y1+1&&this.gameKernel.game.isOnMainLine()&&this.gameKernel.game.setAnno(CB.AnnoType.Vgh,
new CB.Vgi("Analysis:"));return!0}.bind(this)};b.prototype.V2hy=function(){if(this.gameKernel)return this.gameKernel.game.hdr.getStrPlayers(!1)};b.prototype.V2y2=function(){for(var b=0;b<this.V2xn.length;b++)this.onSessionAction(this.V2xn[b],!0)};b.prototype.onSessionAction=function(b,c){if(this.V2xm)if(0<this.V2xp)b.timeStamp=this.V2xp,b.session=this,this.V2xo.push(b);else this.onProcessSessionAction(b,c);else if(b.gameAction.isMove()){var g=b.gameAction.moveData.toString();this.lobby.V1u9("Unplugged: "+
this.gameKernel.game.hdr.getStrPlayers()+" ("+Math.floor(b.gameAction.moveData.moveNo/2+1)+"."+g+")")}};b.prototype.onProcessSessionAction=function(b,c){if(this.V2xy)this.V2xn.push(b);else{if(!this.gameKernel)return;this.V2y1!=this.gameKernel.game.getMoveIndex()&&this.gameKernel.game.gotoIndex(this.V2y1);if(b.gameAction.execute(this.gameKernel.game,b.controlMove)){if(b.gameAction.isMove()||b.gameAction.isGame())b.gameAction.isMove()&&(this.gameKernel.V3bl.updateClockFromGame(),this.gameKernel.game.deleteAnno(CB.AnnoType.Vgh)),
this.gameKernel.markLastMove(!1,!1);this.V2xk=0;this.V2y1=this.gameKernel.game.getMoveIndex();if(this.V2y3&&this.gameKernel.game.promoteLine()){var g=this.gameKernel.game.getMoveIndex();this.gameKernel.game.unAnnotate();this.gameKernel.game.gotoIndex(g);this.V2y1=g}}else b.gameAction.isMove()&&!b.isAnEarlierMove(this.gameKernel.game)?(this.V2xk+=1,c||this.isFinished()||!(4<this.V2xk||6E3<this.V2xz.V55())||(this.V2xj++,5>this.V2xj&&this.V2xt())):b.gameAction.isMove()}b.gameAction.changesMoves()&&(this.V2y3=
!1)};b.prototype.V2xt=function(){this.V2xy=!0;this.lobby.V14i.V2xt(this.idGame)};b.prototype.V2y4=function(b){switch(b.type){case gsEnum.WHITEWINS:this.V2y5(CB.Vgu.WHITE_WINS);break;case gsEnum.DRAW:this.V2y5(CB.Vgu.DRAW);break;case gsEnum.BLACKWINS:this.V2y5(CB.Vgu.BLACK_WINS);break;case gsEnum.V2ui:if(this.gameKernel)this.gameKernel.V3bl.onTimeOverstepped(this.V2w9!==b.idPlayer)}};b.prototype.V2y5=function(b){this.isFinished()||this.gameKernel.setResult(b)};b.prototype.isFinished=function(){return!this.gameKernel||
this.gameKernel.game.hdr.getCBResult().isFinished()};b.prototype.setClock=function(b){this.gameKernel&&this.gameKernel.V3bl.setManualClock(b.getWhiteTime(),b.getBlackTime(),b.isBlack())};b.prototype.V2y6=function(){this.V2xm&&(this.V2xs(!0),this.board&&this.board.addMessage("Reconnected",!0))};b.prototype.V1tz=function(){};b.prototype.toString=function(){return this.gameKernel?this.gameKernel.game.hdr.getStrPlayers():this.idGame};b.prototype.V2y7=function(b){this.V2xp=b;0<this.V2xp&&!this.V16a&&(this.V16a=
setInterval(this.V2y8.bind(this),1E3))};b.prototype.V15w=function(b){return 0<b.timeStamp&&(b.timeStamp--,0==b.timeStamp)?!0:!1};b.prototype.execute=function(b){b.session.onProcessSessionAction(b,!0)};b.prototype.V2y8=function(){this.V2xo.forEach(function(b){CB.Server.V2wv.prototype.V15w(b)&&(CB.Server.V2wv.prototype.execute(b),b.session.gameKernel&&b.session.gameKernel.game.updateFromExtern())})};return b}();"use strict";
CB.ManualClock=function(){var c=function(b){CB.ManualClock.superClass.call(this,b)};CB.inherit(c,CB.Vph);c.prototype.Vrw=function(b,c,e){this.stop();b||c?(this.V1eb=this.startTime=(new Date).getTime(),0<=b&&(this.Vqu=b),0<=c&&(this.Vqv=c),0<=this.Vqu&&(this.isBlack=!1,this.update()),0<=this.Vqv&&(this.isBlack=!0,this.update()),this.isBlack=e,this.Vpj.Vpo(e),this.start()):this.Vpm()};c.prototype.Vnk=function(b){CB.Vgu.isFinished(b)&&(this.stop(),this.Vpj.Vqy(b))};c.prototype.Vpo=function(b){this.isBlack=
b;this.update();this.Vpj.Vpo(b);this.Vpj.V1ec(8E3)};c.prototype.start=function(){this.Vpk.runPeriodic(1E3);this.Vpj&&(this.Vpj.V1e3&&this.Vpj.V1e3!=this.id&&(CBDebug.assert(0),TRACE("Clock Collision!")),this.Vpj.V1e3=this.id)};c.prototype.stop=function(){this.Vpk.stop();this.Vpj&&(this.Vpj.V1e3=0)};c.prototype.update=function(){var b=((new Date).getTime()-this.startTime+5)/10,c=((new Date).getTime()-this.V1eb+5)/10;this.Vpj.Vr3(new Date(10*c),this.isBlack);b=this.isBlack?this.Vqv-=b:this.Vqu-=b;this.startTime=
(new Date).getTime();0>b?this.Vpj.Vqq(-1,this.isBlack):this.Vpj.Vqq(new Date(10*b),this.isBlack)};return c}();"use strict";CB.Server.V2y9=function(){var c=function(b,c){this.V2ya=b||0;this.V5c=c||0};c.prototype.fromDataBuf=function(b){this.V2ya=b.readInt();this.V5c=b.readInt()};c.prototype.V3c0=function(b){b.writeInt(this.V2ya);b.writeInt(this.V5c)};c.prototype.toString=function(){return"ClockRange"};return c}();"use strict";
CB.Server.V2yb=function(){var c=function(b){this.val=b||0};c.prototype.fromDataBuf=function(b){this.val=b.readShort()};c.prototype.V3c0=function(b){b.writeShort(this.val)};c.prototype.V2yc=function(){return 30*(this.val>>8&255)};c.prototype.V2yd=function(){return this.val&255};c.prototype.Vpw=function(){return this.val};c.prototype.toString=function(){return this.V2yc()+"ms"};return c}();"use strict";CB.namespace("CB.Server.V2ye");
CB.Server.V2ye=function(){var c=1,b=function(b,e,g,f,h){this.lobby=b;this.idGame=f;this.ticket=e;this.requestData=g;this.V2yf=this.fnGetKernel=h;this.V2xi=!1;this.V2xk=this.V2xj=0;this.V2xl=!0;this.uniqueId=c++;this.V2xm=!0;this.V2xn=[];this.V2xo=[];this.V2xp=0;this.V2yg=!1};b.prototype.getKernel=function(){return this.fnGetKernel()};b.prototype.setToBackgroundKernel=function(){this.fnGetKernel().V3bl.deleteClock();this.V2yf().game.assign(this.fnGetKernel().game);this.fnGetKernel=this.V2yf};b.prototype.isFinished=
function(){return this.getKernel().isFinished()};b.prototype.V2xr=function(){this.V2xm=!this.V2xm;this.V2xs(this.V2xm);this.V2xj=0};b.prototype.V2xs=function(b,c){if(this.V2xm=b)this.V2xt(this.idGame),this.V2xi=!0;V3c6.commands.Vt2(CB.V2yh.V2xu,this.V2xm);c||this.getKernel()&&(b?this.getKernel().V3bl.startClock():this.getKernel().V3bl.stopClock())};b.prototype.V2xt=function(b){b=new CB.Server.V2ug(CB.Server.V2uh.V2vn,b,this.lobby.V1v1());this.V2yi(b)};b.prototype.V2yi=function(b){var c=new CB.Vat(CB.V1nz.V1qe);
c.setUserType(CB.V2eo.V2tg);c.getBuf();b.V3c0(c.getBuf());this.lobby.send(c)};b.prototype.onGameData=function(b){try{this.V2xy=!1;this.V2xz=new CB.V4z;if(this.V2xm){this.getKernel();var c;this.getKernel().boardWin&&void 0!==this.getKernel().boardWin.prepareFullRedraw&&(this.getKernel().boardWin.prepareFullRedraw(),c=this.getKernel().boardWin.shouldAnimatePosChange,this.getKernel().boardWin.shouldAnimatePosChange=function(){return!1});this.V2yg=!1;this.getKernel().game.assign(b.game);this.getKernel().game.gotoIndex(b.game.getMoveIndex());
this.getKernel().idGame=b.idGame;c&&this.getKernel().boardWin&&(this.getKernel().boardWin.shouldAnimatePosChange=c);this.updateBoardAttributes()}this.V2xm&&(this.V2y1=this.getKernel().game.getMoveIndex(),this.V2y2());this.getKernel().markLastMove(!0,!0);this.V2xn=[];this.V2xk=0;this.V2yg=!0}catch(g){CB.V46("LSess::onGameData:",g)}};b.prototype.shouldAnimatePosChange=function(){return this.V2yg};b.prototype.updateBoardAttributes=function(){var b=this.getKernel().boardWin,c=this.getKernel().game;b&&
(b.cbcanvas?b.setTitleText(c.hdr.getStrPlayers(b.nSqPix>b.cbcanvas.zoomToPix(42))):b.setTitleText(c.hdr.getStrPlayers(20)),this.setClock&&this.getKernel().V3bl.setManualClock(this.setClock.getWhiteTime(),this.setClock.getBlackTime(),this.getKernel().game.getCurPos().getBTM()))};b.prototype.V2y0=function(){this.getKernel().V3bl.fnAcceptMove=function(){this.V2xm&&(this.V2y3=!0);return!0}.bind(this);this.getKernel().V3bl.fnAfterMove=function(b){this.getKernel().game.getMoveIndex()==this.V2y1+1&&this.getKernel().game.isOnMainLine()&&
this.getKernel().game.setAnno(CB.AnnoType.Vgh,new CB.Vgi("Analysis:"));return!0}.bind(this)};b.prototype.V2hy=function(){if(this.getKernel())return this.getKernel().game.hdr.getStrPlayers(!1)};b.prototype.V2y2=function(){for(var b=0;b<this.V2xn.length;b++)this.onSessionAction(this.V2xn[b],!0)};b.prototype.onSessionAction=function(b,c){if(this.V2xm)if(0<this.V2xp)b.timeStamp=this.V2xp,b.session=this,this.V2xo.push(b);else this.onProcessSessionAction(b,c);else b.gameAction.isMove()&&this.lobby.V1ub("Received a move: "+
this.getKernel().game.hdr)};b.prototype.onProcessSessionAction=function(b,c){if(this.V2xy)this.V2xn.push(b);else{if(!this.getKernel())return;this.getKernel().game.delayChangedEvents(1E3);var g=this.getKernel().game.getMoveIndex(),f=g<=this.getKernel().game.mainLine.length,h=g!=this.V2y1;this.V2y1!=this.getKernel().game.getMoveIndex()&&this.getKernel().game.gotoIndex(this.V2y1,!0);if(b.gameAction.execute(this.getKernel().game,b.controlMove)){if(b.gameAction.isMove()||b.gameAction.isGame())b.gameAction.isMove()&&
(this.getKernel().V3bl.updateClockFromGame(),this.getKernel().game.deleteAnno(CB.AnnoType.Vgh),f||g++),this.getKernel().markLastMove(!0,!0);this.V2xk=0;this.V2y1=this.getKernel().game.getMoveIndex();h&&this.getKernel().game.gotoIndex(g,!0);this.V2y3&&this.getKernel().game.promoteLine()&&(g=this.getKernel().game.getMoveIndex(),this.getKernel().game.unAnnotate(),this.getKernel().game.gotoIndex(g),this.V2y1=g)}else b.gameAction.isMove()&&!b.isAnEarlierMove(this.getKernel().game)?(this.V2xk+=1,c||this.isFinished()||
!(4<this.V2xk||this.V2xz&&6E3<this.V2xz.V55())||(this.V2xj++,5>this.V2xj&&this.V2xt())):b.gameAction.isMove();this.getKernel().game.continueChangedEvents()}b.gameAction.changesMoves()&&(this.V2y3=!1)};b.prototype.V2xt=function(){this.V2xy=!0;this.lobby.V2xt(this.idGame)};b.prototype.V2y4=function(b){switch(b.type){case gsEnum.WHITEWINS:this.V2y5(CB.Vgu.WHITE_WINS);break;case gsEnum.DRAW:this.V2y5(CB.Vgu.DRAW);break;case gsEnum.BLACKWINS:this.V2y5(CB.Vgu.BLACK_WINS);break;case gsEnum.V2ui:if(this.getKernel())this.getKernel().V3bl.onTimeOverstepped(this.V2w9!==
b.idPlayer)}};b.prototype.V2y5=function(b){this.isFinished()||this.getKernel().setResult(b)};b.prototype.isFinished=function(){return!this.getKernel()||this.getKernel().game.hdr.getCBResult().isFinished()};b.prototype.onSetClock=function(b){this.setClock=b;this.getKernel()&&this.getKernel().V3bl.setManualClock(b.getWhiteTime(),b.getBlackTime(),b.isBlack())};b.prototype.V2y6=function(){this.V2xm&&this.V2xs(!0)};b.prototype.V1tz=function(){};b.prototype.toString=function(){return this.getKernel()?this.getKernel().game.hdr.getStrPlayers():
this.idGame};b.prototype.V2y7=function(b){this.V2xp=b;0<this.V2xp&&!this.V16a&&(this.V16a=setInterval(this.V2y8.bind(this),1E3))};b.prototype.V15w=function(b){return 0<b.timeStamp&&(b.timeStamp--,0==b.timeStamp)?!0:!1};b.prototype.execute=function(b){b.session.onProcessSessionAction(b,!0)};b.prototype.V2y8=function(){this.V2xo.forEach(function(b){CB.Server.V2ye.prototype.V15w(b)&&(CB.Server.V2ye.prototype.execute(b),b.session.getKernel()&&b.session.getKernel().game.updateFromExtern())})};return b}();
"use strict";CB.namespace("CB.Server.V2yj");
CB.Server.V2yj=function(){var c=function(b,c,e){this.lobby=b;this.ticket=c;this.requestData=e;this.V2yk={};this.V2yl={}};c.prototype.onGameItemList=function(b){this.V2ym=b;this.requestData.onList(b)};c.prototype.addSession=function(b,c,e,g){if(this.V2yk[b])return!1;var f=new CB.Vk3;f.setPlayingMode(new CB.Vsq(f));this.V2yl[b]=f;f.Vkp(!1);var f=new CB.Server.V2ye(this.lobby,this.ticket,this.requestData,b,function(){return this.V2yl[b]}.bind(this)),h=this.V2yn(b);h&&(f.clock=h.clock);f.fnOnMove=c;f.fnOnRecentAnno=
e;f.fnOnGameData=g;this.V2yk[b]=f;return!0};c.prototype.V2yn=function(b){if(this.V2ym)for(var c=0;c<this.V2ym.games.length;c++)if(this.V2ym.games[c].id==b)return this.V2ym.games[c]};c.prototype.onInitKibitzing=function(b,c,e){if(this.V2yl[b]&&(e&&this.V2yl[e]&&this.V2yk[e].setToBackgroundKernel(),c)){e=this.V2yk[b];var g;c().boardWin&&void 0!==c().boardWin.prepareFullRedraw&&(c().boardWin.prepareFullRedraw(),g=c().boardWin.shouldAnimatePosChange,c().boardWin.shouldAnimatePosChange=function(){return!1});
c().V3bl.beforeGameLoad();c().game.assign(this.V2yl[b].game);c().idGame=b;c().markLastMove(!0,!0);g&&(c().boardWin.shouldAnimatePosChange=g);e.fnGetKernel=c;e.updateBoardAttributes()}};c.prototype.setSessionToBackground=function(b){b&&this.V2yk[b]&&this.V2yk[b].setToBackgroundKernel()};c.prototype.notifySessionSwap=function(b,c){if(this.V2yk[b]&&this.V2yk[c]){var e=this.V2yk[c].fnGetKernel;this.V2yk[c].fnGetKernel=this.V2yk[b].fnGetKernel;this.V2yk[b].fnGetKernel=e;this.V2yk[b].updateBoardAttributes();
this.V2yk[c].updateBoardAttributes()}};c.prototype.onGameData=function(b){this.V2yk[b.idGame]&&(this.V2yk[b.idGame].onGameData(b),b.idGame==this.V2yo&&this.V2yk[b.idGame].fnGetKernel().markLastMove(!0,!0),this.V2yk[b.idGame].fnOnMove&&this.V2yk[b.idGame].fnOnMove(b.idGame),this.V2yk[b.idGame].fnOnGameData&&this.V2yk[b.idGame].fnOnGameData())};c.prototype.onSessionAction=function(b){var c=b.idGame;this.V2yk[c]&&(this.V2yk[c].onSessionAction(b),this.V2yk[c].fnOnMove&&this.V2yk[c].fnOnMove(c,b))};c.prototype.onRecentAnno=
function(b){this.V2yk[b]&&this.V2yk[b].fnOnRecentAnno&&this.V2yk[b].fnOnRecentAnno(b)};c.prototype.onSetClock=function(b,c){if(this.V2yk[c])this.V2yk[c].onSetClock(b)};c.prototype.getPgn=function(){var b="",c;for(c in this.V2yl)this.V2yl[c].game&&this.V2yl[c].game.getMoves().length&&(b+=CB.V12j.V12k(this.V2yl[c].game));return b};return c}();"use strict";CB.namespace("CB.Server.LiveManager");
CB.V2yp={V5l:0,V2yq:801,V2yr:802,V2ys:803,V2yt:804,V2yu:805,V2yv:806,V2yw:807,V2yx:808,V2yy:820,V2yz:821,V2z0:822,V2z1:17,V2ti:200,V2z2:400,V2tj:21,Vlz:function(c){return"LiveMsgId="+c},toString:function(c){for(var b in this)if(this[b]==c)return b;return"Unknown LiveMsgId: "+c}};CB.V2z3={V5l:0,toString:function(c){switch(c){default:return"Msg="+c;case V5l:return"None"}}};CB.V2yh={V5l:0,V2oa:1E3,V2xu:2E3,Vlz:function(c){return"LiveCmdId="+c}};
CB.Server.LiveManager=function(){var c=function(b){this.V2z4=b;this.Vke=V3c6.commands.Vkf(this);this.V1th=2E4;this.V2z5=new CB.Timer};c.prototype.getName=function(){return"Live"};CB.inherit(c,CB.Server.V1tg);c.prototype.V1zg=function(b,c,d,h,l){V3c6.panelMgr.showMessage(lm.CONNECTING);this.create(b,c,d,h,"")};c.prototype.V1u4=function(){this.fireOnChangeLogin()};c.prototype.V1v4=function(){};c.prototype.V1s4=function(b){};c.prototype.V2z6=function(b){};c.prototype.V1v6=function(b){var c=String.formatEx(lm.CONNECTED_TO_SERVER,
this.getName());this.V1ub(c,"LogGreen","conn");V3c6.panelMgr.showMessage(c);this.V1tx=!0;this.loginMode!=CB.LoginMode.GUEST?(b.strUserId&&(V3c6.V3bg.userName=CB.V4a.V4c(b.strUserId),this.user=CB.V4a.V4c(b.strUserId),this.V1tr=b.strUserId,b.strToken&&(V3c6.V3bg.V1t1=b.strToken,CB.DOM.V1t3("AccountMode",CB.LoginMode.NORMAL),V3c6.V3bg.V1t5())),document.title="Live Chess For "+this.user,V3c6.setLoggedIn(!0)):(this.user="Guest"+this.V1v0(),this.V1tr="Guest"+this.V1v0());V3c6.V2a1=this.V29m.bind(this);
V3c6.V2a2=this.V29m.bind(this);this.V2z7();this.V2z8()};c.prototype.V2z7=function(){if(this.V1tx&&this.V2yk&&this.V2yk.length){var b=new CB.Vat(CB.V1nz.V1qe);b.setUserType(CB.V2yp.V2yq);var c=b.getBuf();c.writeInt(this.V2yk.length);for(var d=0;d<this.V2yk.length;d++)this.V2z9(this.V2yk[d].requestData,c),c.writeInt(this.V2yk[d].ticket),c.V3c4(!1),c.V3c4(this.V2yk[d].requestData.highestRoundOnly),this.V2yk[d].requested=!0;b.address(this.V1v0(),CB.V1qt.V1qu);this.send(b)}};c.prototype.V2za=function(b){this.requestLists=
b;this.V2zb=[];for(var c=0;c<b.length;c++){var d=new CB.Server.V2yj(this,b[c].ticket,b[c].requestData);this.V2zb.push(d)}this.V2z8()};c.prototype.V2z8=function(){if(this.V1tx&&this.V2zb&&this.V2zb.length){var b=new CB.Vat(CB.V1nz.V1qe);b.setUserType(CB.V2yp.V2ys);var c=b.getBuf();c.writeInt(this.V2zb.length);for(var d=0;d<this.V2zb.length;d++)this.V2z9(this.V2zb[d].requestData,c),c.writeInt(this.V2zb[d].ticket),c.V3c4(!1),c.V3c4(this.V2zb[d].requestData.highestRoundOnly),this.V2zb[d].requested=!0;
try{window.location?c.V3b6(window.location.hostname||""):c.V3b6("")}catch(h){}b.address(this.V1v0(),CB.V1qt.V1qu);this.send(b)}};c.prototype.V2z9=function(b,c){c.V3b6(b.event||"");c.V3b6(b.round||"");c.V3b6(b.round2||"");c.V3b6(b.player||"");c.V3b6(b.white||"");c.V3b6(b.black||"");c.V3b6(b.date||"");c.writeInt(b.kibitzRank)};c.prototype.V2zc=function(b,c){var d=new CB.Vat(CB.V1nz.V1qe);d.setUserType(CB.V2yp.V2yr);var h=d.getBuf();h.writeInt(b);h.writeInt(c);d.address(this.V1v0(),CB.V1qt.V1qu);this.send(d)};
c.prototype.V2zd=function(b,c){var d=new CB.Vat(CB.V1nz.V1qe);d.setUserType(CB.V2yp.V2yx);var h=d.getBuf();h.writeInt(b);h.writeInt(c);d.address(this.V1v0(),CB.V1qt.V1qu);this.send(d)};c.prototype.V2ze=function(b,c,d,h,l,q,r){if(this.V1tx){var t=this.V2zf(c);t&&(t.addSession(b,h,q,r)&&this.V2zc(b,c),t.onInitKibitzing(b,d,l))}};c.prototype.V2zg=function(b,c){var d=new CB.Vat(CB.V1nz.V1qe);d.setUserType(CB.V2yp.V2yz);var h=d.getBuf();h.writeInt(c);h.writeInt(b);d.address(this.V1v0(),CB.V1qt.V1qu);this.send(d)};
c.prototype.setSessionToBackground=function(b,c){if(this.V1tx){var d=this.V2zf(b);d&&d.setSessionToBackground(c)}};c.prototype.notifySessionSwap=function(b,c,d){this.V1tx&&(b=this.V2zf(b))&&b.notifySessionSwap(c,d)};c.prototype.getPgn=function(b){if(b=this.V2zf(b))return b.getPgn()};var b=!1;c.prototype.V29m=function(){V3c6.V2a0()!=b&&(this.V2ge(),b=V3c6.V2a0())};c.prototype.V2ge=function(){var b=0;if(this.Vtf){var c=new CB.Server.V2sp,b=this.V2zh().flags;c.V2t0(b);c.id=this.V1v1();var d=new CB.Vat(CB.V1nz.V1ou);
c.V3c0(d.getBuf());d.address(this.V1v0(),CB.V1qt.V1qu);this.send(d);this.fireOnClientChanges([c])}return b};c.prototype.V2zh=function(){var b=CB.Server.V2s0.KIBITZING,b=V3c6.V2a0()?b|CB.Server.V2s0.IDLE:b|CB.Server.V2s0.V2sc;return new CB.Server.V2rz(b)};c.prototype.execCommand=function(b){if(!this.Vtf&&b!=CB.Vm1.LOGIN&&b!=CB.V2yh.V2oa)return!1;try{switch(b){case CB.Vm1.LOGIN:this.V1uj();break;case CB.V2yh.V2oa:this.V1s3(!0);break;case CB.Vm1.V1oq:this.test()}}catch(c){b=CB.V2yh.Vlz(b),CB.V46(b,c)}};
c.prototype.V1ub=function(b,c,d){};c.prototype.V1zm=function(b){};c.prototype.test=function(b){};c.prototype.V2zj=function(){this.V1ub("Stop Torture");this.torturer&&this.torturer.stop()};c.prototype.V1uj=function(){V3c6.V3bg&&V3c6.V3bg.V1sv()&&V3c6.V3bg.V1sv()};c.prototype.V1rz=function(b){if(!this.V1v7(b))try{switch(b.getType()){default:console.log("Unhandled: "+b.toString());break;case CB.V1nz.V1qe:this.V2zk(b);break;case CB.V1nz.V1o7:this.V209(b);break;case CB.V1nz.V1h:this.V1zo(b)}}catch(c){b=
CB.V1nz.Vlz(b.getType()),CB.V46(b,c)}};c.prototype.V1zo=function(b){var c=new CB.ChatData;c.fromSocketsMsg(b);var d=b.getBuf().V3c1(),h=b.getBuf().V3c1(),l=new CB.Vh0;l.compactFromDataBuf(b.getBuf());b=b.getBuf().V3c1();c.isToSession()||c.V1r9()?V3c6.panelMgr.V2zl(c.V1mg,l,c.strMsg,{idGame:h,ticket:d,mvInx:b},c.V1rf(),!0):V3c6.panelMgr.V1vj(c.toString())};c.prototype.V2zm=function(b){var c=[];b=b.getBuf();var d=b.V3c1();b.V3c1();for(var h=b.V3c1(),l=0;l<h;l++){b.beginSizedRead();var q={};q.sender=
b.V3b7(200);q.txt=b.V3b7(500);q.gameId=b.V3c1();q.hdr=new CB.Vh0;q.hdr.compactFromDataBuf(b);q.mvInx=b.V3c1();q.autoChat=b.V3c5();q.txt.length&&c.push(q);b.endSizedRead()}V3c6.panelMgr.V2zn(d,c)};c.prototype.V1m5=function(b,c,d){var h=new CB.ChatData;h.Vaw=CB.V1qt.V1qu;h.Vav=this.V1v0();h.strMsg=d;h.V1mg=b;h.V15k=c;h.V1r8(!0);h.V1ra(!0);h.V1r1=14;b=h.V3bd();b.setType(CB.V1nz.V1qe);b.setUserType(CB.V2yp.V2yy);this.send(b)};c.prototype.V1uy=function(b){this.V2z4.V2zo(b)};c.prototype.V209=function(b){V3c6.panelMgr.V2zp("Reconnected OK...");
this.requestLists&&this.V2za(this.requestLists)};var d=0;c.prototype.V2zk=function(b){0<d&&CB.V46("Reenter handleLiveUserMsg: ",d);d=b.getUserType();try{switch(b.getUserType()){case CB.V2yp.V2yt:this.V2zq(b);break;case CB.V2yp.V2z1:this.V2zr(b);break;case CB.V2yp.V2ti:this.V2zs(b);break;case CB.V2yp.V2tj:this.V2zt(b);break;case CB.V2yp.V2yv:this.V2zu(b);break;case CB.V2yp.V2yy:this.V1zo(b);break;case CB.V2yp.V2z0:this.V2zm(b)}}catch(c){b=CB.V2eo.Vlz(b.getUserType()),CB.V46(b,c)}d=0};c.prototype.V2xt=
function(b){};c.prototype.V2zr=function(b){var c=new CB.Server.V2wp;c.fromDataBuf(b.getBuf());c.game.gotoIndex(c.game.getMoveIndex());b=b.getBuf().V3c1();if(b=this.V2zf(b))b.onGameData(c)};c.prototype.V2zq=function(b){var c=b.getBuf();b=new CB.Server.V2wh;b.fromDataBuf(c);c=c.readInt();if(c=this.V2zf(c))c.onGameItemList(b)};c.prototype.V2zs=function(b){var c=new CB.Viu;c.fromDataBuf(b.getBuf());b=b.getBuf().V3c1();if(b=this.V2zf(b))b.onSessionAction(c)};c.prototype.V2zu=function(b){var c=b.getBuf().V3c1();
b=b.getBuf().V3c1();if(c=this.V2zf(c))c.onRecentAnno(b)};c.prototype.V2zt=function(b){var c=new CB.V2ws;c.fromDataBuf(b.getBuf());var d=b.getBuf().V3c1();b=b.getBuf().V3c1();if(d=this.V2zf(d))d.onSetClock(c,b)};c.prototype.V2zv=function(b){};c.prototype.V2zf=function(b){if(this.V2zb)for(var c=0;c<this.V2zb.length;c++)if(this.V2zb[c].ticket==b)return this.V2zb[c]};c.prototype.V20m=function(b){var c=new CB.Game,d=new CB.Vh0;d.compactFromDataBuf(b);b.V3c1();c.readGameOnly2(b);c.setHeader(d);return c};
c.prototype.V2zw=function(){this.V2zy(this.V2zx|NaN)};c.prototype.V2zy=function(b){V3c6.gameKernel.boardWin&&V3c6.gameKernel.boardWin.addMessage(b,!0)};V3bf.initForListeners(c);V3bf.addEvent(c,"ChangeLogin");V3bf.addEvent(c,"ClientChanges");return c}();
CB.V2zz=function(){var c=function(b,c){this.wsUris=[b];this.V2zi=c;this.V300=!1;this.V301=0;this.V302=[];this.V303=30;0<=getInternetExplorerVersion()&&(this.V303=3)};c.prototype.run=function(){this.V300=!1;this.V304=new CB.Timer(function(){this.V305()}.bind(this));this.V306=new CB.Timer(function(){this.V307()}.bind(this));this.V304.runPeriodic(500);this.V306.runPeriodic(350);this.guid=new CBGuid;this.guid.fromRandom();this.V302=[]};c.prototype.stop=function(){this.V300=!0;this.V304.stop();this.V306.stop();
for(var b=0;b<this.V302.length;b++)0<this.V302[b].connectId?(this.V302[b].logOff(),this.V302[b].conn.tryTimer.stop()):this.V302[b].closeConn()};c.prototype.V305=function(){this.V302.length<this.V303&&this.V308()};c.prototype.V307=function(){if(this.V309()>this.V303/2||this.V302.length==this.V303){var b=Math.floor(Math.random()*this.V302.length);b<this.V302.length&&(0<this.V302[b].connectId?this.V302[b].logOff():this.V302[b].isTimeout()&&this.V302[b].closeConn(),this.V302.splice(b,1))}};c.prototype.V308=
function(){if(this.V302.length<this.V303){var b=new CBGuid;b.fromRandom();80<Math.floor(100*Math.random())&&(b=this.guid);b=new CB.V30a(this,b,this.V2zi);try{return b.logOn(),this.V302.push(b),!0}catch(c){for(;this.V302.length;)this.V302[0].isLoggedIn()?this.V302[0].logOff():this.V302[0].closeConn(),this.V302.splice(0,1)}}};c.prototype.V309=function(){for(var b=0,c=0;c<this.V302.length;c+=1)0<this.V302[c].connectId&&(b+=1);return b};return c}();
CB.V30a=function(){var c=function(b,c,e){this.conn=new CB.V1rm(this,b.wsUris);this.conn.tryTimer.stop();this.guid=c;this.V2zi=e};c.prototype.logOn=function(){this.Vtf||(this.tick=new CB.V4z,this.conn.open())};c.prototype.isTimeout=function(){return this.tick&&2E4<this.tick.V50()};c.prototype.logOff=function(){try{if(this.Vtf){var b=new CB.Vat(CB.V1nz.V1o4);b.address(this.connectId,CB.V1qt.V1qu);b.buf.V3by(0);this.conn.sendMessage(b,!0);this.conn.tryTimer.stop();delete this.tick}}catch(c){}};c.prototype.V1s0=
function(b){this.Vtf=!0;this.V3bb=0;this.connectId=b.nId;delete this.tick;(new CB.Timer(function(){this.V2za(this.V2zi)}.bind(this))).runOnce(500)};c.prototype.onConnect=function(){void 0===this.guid&&(this.guid=new CBGuid,this.guid.fromRandom());var b=new CB.V1qn("Guest","Guest",CB.LoginMode.GUEST,this.guid,"","robot");this.conn.sendMessage(b.V3bd(!1),!0)};c.prototype.closeConn=function(){this.conn.close()};c.prototype.V2za=function(b){this.V2zb=[];for(var c=0;c<b.length;c++){var e=new CB.Server.V2yj(this,
b[c].ticket,b[c].requestData);this.V2zb.push(e)}this.V2z8()};c.prototype.V2z8=function(){if(this.V2zb&&this.V2zb.length){var b=new CB.Vat(CB.V1nz.V1qe);b.setUserType(CB.V2yp.V2ys);var c=b.getBuf();c.writeInt(this.V2zb.length);for(var e=0;e<this.V2zb.length;e++)this.V2z9(this.V2zb[e].requestData,c),c.writeInt(this.V2zb[e].ticket),this.V2zb[e].requested=!0;b.address(this.V1v0(),CB.V1qt.V1qu);this.conn.sendMessage(b,!0)}};c.prototype.V2z9=function(b,c){c.V3b6(b.event||"");c.V3b6(b.round||"");c.V3b6(b.round2||
"");c.V3b6(b.player||"");c.V3b6(b.white||"");c.V3b6(b.black||"");c.V3b6(b.date||"");c.writeInt(b.kibitzRank)};c.prototype.V1rz=function(b){try{switch(b.getType()){case CB.V1nz.V1h:this.V1zo(b);break;case CB.V1nz.V1o2:this.V1us();break;case CB.V1nz.V1p2:this.V1v2=b.getBuf().V3c1();this.V1tx=!0;break;case CB.V1nz.V1qe:switch(b.getUserType()){case CB.V2yp.V2yt:this.V2zq(b);break;case CB.V2yp.V2z1:this.V2zr(b);break;case CB.V2yp.V2ti:this.V2zs(b)}}}catch(c){}};c.prototype.isLoggedIn=function(){return this.V1tx&&
this.conn&&this.conn.Vrg()};c.prototype.V1zo=function(b){var c=new CB.ChatData;c.fromSocketsMsg(b);V3c6.panelMgr.V1vj(c.toString())};c.prototype.V1us=function(){var b=new CB.Vat(CB.V1nz.V1og);b.address(this.connectId,CB.V1qt.V1qu);this.conn.sendMessage(b,!0)};c.prototype.V2zr=function(b){var c=new CB.Server.V2wp;c.fromDataBuf(b.getBuf());c.game.gotoIndex(c.game.getMoveIndex());b=b.getBuf().V3c1();if(b=this.V2zf(b))b.onGameData(c)};c.prototype.V2zq=function(b){var c=b.getBuf();b=new CB.Server.V2wh;
b.fromDataBuf(c);c=c.readInt();if(c=this.V2zf(c))c.onGameItemList(b)};c.prototype.V2zs=function(b){var c=new CB.Viu;c.fromDataBuf(b.getBuf());b=b.getBuf().V3c1();this.V2zv(b);if(b=this.V2zf(b))b.onSessionAction(c)};c.prototype.V2zf=function(b){if(this.V2zb)for(var c=0;c<this.V2zb.length;c++)if(this.V2zb[c].ticket==b)return this.V2zb[c]};c.prototype.V1m5=function(b){if(this.V1v2){var c=new CB.ChatData;c.strMsg=b;c.V1r6(!0);c.Vav=this.V1v2;c.V1rg(this.V1v2);c.V1re(!0);b=c.V3bd();b.address(this.V1v0(),
this.V1v0());this.conn.sendMessage(b,!0)}};c.prototype.V1v0=function(){return this.conn.connectId};return c}();
CB.Tournament=function(){var c=function(){};c.prototype.title=null;c.prototype.arcKey=null;c.prototype.player=null;c.prototype.rounds=null;c.prototype.availbeRounds=null;c.prototype.type=null;c.V30b={V30c:"ko",ko:"k.o.",V30d:"tourn",swiss:"swiss",V30e:"shev",match:"mat",team:"team"};c.prototype.getPlayerById=function(b){return this.player.filter(function(c){if(c.id==b||c.otherIds&&c.otherIds.contains(parseInt(b)))return!0})[0]};c.prototype.V30f=function(b){b=this.rounds[b-1];for(var c=[],e,g=0;g<
b.length;g++)e=b[g],0>c.indexOf(e.white)&&c.push(e.white),0>c.indexOf(e.black)&&c.push(e.black);return c.length};c.V30g=function(b){return c.V30h(JSON.parse(b))};c.V30h=function(b){var d=new c;d.title=b.Tournaments[0].t.split("_").join(" ");d.arcKey=b.Tournaments[0].k;for(var e=[],g=function(b,c){for(var d,f,g=(c.f+c.l).trim(),h=0;h<e.length;h++)if(f=e[h].lastName,d=e[h].firstName,d=(d+f).trim(),.2>CB.V5.V6(g,d,3,1,1)/Math.max(g.length,d.length))return e[h]},f=0;f<b.Players.length;f++){var h=b.Players[f],
l=g(e,h);l?(l.otherIds=l.otherIds||[],l.otherIds.push(h.i)):e.push(new CB.V30i(h.f,h.l,h.e,h.i))}d.player=e;g=b.Rounds;d.availbeRounds=g;var q=[];g.forEach(function(c,e,f){q.push([]);q[c-1]=[];rp=[];for(e=0;e<b["R-"+c+":"].length;e++){f=b["R-"+c+":"][e].b;var g=b["R-"+c+":"][e].p.split(/-|=/),h=d.getPlayerById(g[0]),l=d.getPlayerById(g[1]),g=g[2];if(0>g||2<g)g=null;var y=new CB.V30j(h,l,g);y.round=c;y.subround=f;g&&q[c-1].push(y);y=g?(2-g)/2:null;h.opponents.push(new CB.V30k(l,g?g/2:null,!0,c,f));
l.opponents.push(new CB.V30k(h,y,!1,c,f))}}.bind(this));d.rounds=q;d.type=b.Tournaments[0].tt;return d};c.V30l=function(b){return c.V30m(JSON.parse(b))};c.V30n=function(b){};return c}();
CB.V30i=function(){var c=function(b,c,e,g,f){this.firstName=b;this.lastName=c;this.elo=e;this.id=g;this.team=f;this.valuation=new CB.V30o;this.valuation.elo=this.elo;this.valuation.name=this.getPbServerUrl();this.valuation.info=$("<div>",{"class":"playerImageContainer"}).append($("<div>",{"class":"name"}).html(this.valuation.name));this.valuation.nation=$("<div>",{"class":"flag"}).append($("<img>",{"class":"flagImg",src:"https://pgn.chessbase.com/Common/Media/Flags/Flags64/United Nations.png"}));
this.valuation.title=$("<div>",{"class":"title"}).text("");this.opponents=[]};c.prototype.team=null;c.prototype.opponents=null;c.prototype.id=null;c.prototype.firstName=null;c.prototype.lastName=null;c.prototype.elo=null;c.prototype.valuation=null;c.prototype.getName=function(){return this.firstName?this.lastName+","+this.firstName:this.lastName};c.prototype.getDisplayeName=function(){return this.firstName&&this.firstName.length?this.lastName+","+this.firstName.substr(0,1):this.lastName};c.prototype.V30p=
function(b){return this.getAllOpponentEntriesForPlayer(b)[0]};c.prototype.getAllOpponentEntriesForPlayer=function(b){var c=this.opponents.filter(function(c){return c.opponent===b});return c=c||[]};c.prototype.V30q=function(){var b=[];this.opponents.forEach(function(c){0>b.indexOf(c.opponent)&&b.push(c.opponent)});return b.length};c.prototype.getPbServerUrl=function(){var b=this.getName(),c=this.getDisplayeName(),e=$("<a>");e.attr("href",String.formatEx("http://pbserver.chessbase.com/Player?name={0}",
b));e.text(c);return e.prop("outerHTML")};return c}();CB.V30r=function(){var c=function(b,c){this.tiebreakInfosArr=b;this.top=c};c.prototype.tiebreakInfosArr=null;c.prototype.top=1E4;return c}();CB.V30k=function(){var c=function(b,c,e,g,f){this.opponent=b;this.scoredPoints=c;this.isWhite=e;this.round=g;this.board=f};c.prototype.board=null;c.prototype.opponent=null;c.prototype.scoredPoints=null;c.prototype.isWhite=null;c.prototype.round=null;return c}();
CB.V30j=function(){var c=function(b,c,e){this.white=b;this.black=c;this.result=e};c.prototype.white=null;c.prototype.black=null;c.prototype.result=null;return c}();CB.V30s=function(){var c=function(b){};c.prototype.result=null;return c}();CB.V30t=function(){var c=function(b,c){this.roundNr=b;this.pairingsArr=c};c.prototype.roundNr=null;c.prototype.pairingsArr=null;return c}();
CB.V30u=function(){var c=function(b,c,e){this.propertyName=b;this.cutOffFront=this.V30v=c;this.cutOffEnd=e};c.prototype.cutOffFront=null;c.prototype.cutOffEnd=null;c.prototype.propertyName=null;c.prototype.V30v=null;c.V30w={bhz:"Buchholz",dirEnc:"Direct encounter",snb:"Sonneborn-Berger",avgElo:"Average Elo",perf:"Performance",wins:"Wins",bl:"Games with black",prog:"Comulative"};c.V30x=function(b){if(!b)return[];var c=[],e=/[a-zA-Z]+/;b.split(",").forEach(function(b){var f=e.exec(b)[0],h=b.match(/^\d+|\d+\b|\d+(?=\w)/g),
h=h?h.map(function(b){return+b}):[],l=0,q=0;0<h.length&&(l=h[0]);1<h.length&&(q=h[1]);b.replace(f,"");c.push(new CB.V30u(f,l,q))});return c};return c}();CB.V30o=function(){var c=function(){};c.prototype.points=null;c.prototype.buchholz=null;c.prototype.sonnebornberger=null;c.prototype.wins=null;c.prototype.avgElo=null;c.prototype.V30y=null;c.prototype.direkterVergleich=0;return c}();
CB.V30z=function(){var c={V310:function(b,e,g,f,h,l,q){return c.V311[e](b,e,g||function(){return!0},f,h,l,q)},V312:function(b,c,g){g=b.length-g;g=0>g?0:g;return b.sort(function(b,c){return c.opponent.valuation.points-b.opponent.valuation.points}).slice(c,g)},V313:function(d,e,g,f,h,l){l=0<=l?l:0;e=c.V312(d.opponents.filter(g),h,l);d=CB.V30z.V314(e,function(b){return b.opponent.valuation.elo});e=Math.round(CB.V30z.sum(e,function(b){return b.scoredPoints})/e.length*100);return d+b.getDiff(e)},V315:function(b,
c,g,f,h,l,q){return CB.V30z.sum(b.opponents.filter(g),function(b){return 1==b.scoredPoints?q.win:.5==b.scoredPoints?q.draw:0==b.scoredPoints?q.loss:b.scoredPoints})},V316:function(b,e,g,f,h,l){b=CB.V30z.V312(b.opponents.filter(g),h,l);return c.sum(b,CB.V30z.V317("points"))},V318:function(b,c,g,f,h,l){var q=0;CB.V30z.V312(b.opponents.filter(g),h,l).filter(g).forEach(function(b){q+=b.scoredPoints*b.opponent.valuation.points});return q},V319:function(b,e,g,f,h,l){return c.V312(b.opponents.filter(g),
h,l).filter(function(b){return 1===b.scoredPoints}).length},V31a:function(b,e,g,f,h,l){return c.V312(b.opponents.filter(g),h,l).filter(function(b){return!b.isWhite}).length},V31b:function(b,e,g,f,h,l){b=c.V312(b.opponents.filter(g),h,l);return c.V314(b,CB.V30z.V317("elo"))},V31c:function(b,c,g,f,h,l){var q=f.filter(function(c){return c.valuation.points==b.valuation.points});if(q.some(function(c){return c.opponents.map(function(b){return b.opponent}).filter(function(c){return c.valuation.points==b.valuation.points}).length!=
q.length-1}))return 0;c=b.opponents.filter(function(c){return c.opponent.valuation.points==b.valuation.points});return CB.V30z.sum(c,function(b){return b.scoredPoints})},V31d:function(b,c,g,f,h,l){b=b.opponents.filter(g);c=0;for(g=1;g<=b.length;g++)c+=g*b[b.length-g];return c},sum:function(b,c){var g=0;b.forEach(function(b){g+=c(b)});return g},V314:function(b,e){return c.sum(b,e)/b.length},V317:function(b){return function(c){return parseFloat(c.opponent.valuation[b])}},max:function(b,c){max=0;b.forEach(function(b){b=
c(b);max=b>max?b:max});return max},min:function(b,c){min=0;b.forEach(function(b){b=c(b);min=b<min?b:min});return min}};c.V311={points:c.V315,buchholz:c.V316,sonnebornberger:c.V318,wins:c.V319,avgElo:c.V31b,eloPerf:c.V313,direkterVergleich:c.V31c,blacks:c.V31a,bl:c.V31a,bhz:c.V316,snb:c.V318,perf:c.V313,dirEnc:c.V31c,prog:c.V31d};var b={100:800,99:677,98:589,97:538,96:501,95:470,94:444,93:422,92:401,91:383,90:366,89:351,88:336,87:322,86:309,85:296,84:284,83:273,82:262,81:251,80:240,79:230,78:220,77:211,
76:202,75:193,74:184,73:175,72:166,71:158,70:149,69:141,68:133,67:125,66:117,65:110,64:102,63:95,62:87,61:80,60:72,59:65,58:57,57:50,56:43,55:36,54:29,53:21,52:14,51:7,50:0,getDiff:function(b){return 50<b?this[b]:-this[100-b]}};return c}();
CB.V31e=function(){var c=function(){};c.convertToHtmlTable=function(b){var d=$("<table>"),e=$("<thead>"),g=$("<tbody>"),f=CB.V30z.max(b,function(b){return b.length});theadRow=$("<tr>");var h=0;b[0].forEach(function(b,c,d){var e=$("<th>");b.colspan&&b.str?(e.html(b.str),e.attr("colspan",b.colspan),h+=b.colspan):(e.html(b),h++);c===d.length-1&&e.attr("colspan",f-h);theadRow.append(e)});e.append(theadRow);for(var l=1;l<b.length;l++){var q=b[l],r=$("<tr>");q.forEach(function(b,d,e){var g;c.isNumberField(b)&&
(g="tdNumber");g=$("<td>",{"class":g});g.html(b);d===e.length-1&&g.attr("colspan",f-d);r.append(g)});g.append(r)}d.append(e);d.append(g);return d};c.isNumberField=function(b){if(!b)return!1;if(b instanceof Number||"number"===typeof b||!isNaN(b)||b.charCodeAt&&189==b.charCodeAt(0)||b&&$(b).text&&(b=$(b).text(),b instanceof Number||"number"===typeof b||!isNaN(b)||189==b.charCodeAt(0)))return!0};return c}();CB.Comparer=CB.Comparer||{};
CB.Comparer.V31f=function(){var c=function(b){this.V31g=_subComparer};c.prototype.V31g=null;c.prototype.compare=function(b,c){};return c}();CB.Comparer=CB.Comparer||{};CB.Comparer.V31h=function(){var c=function(b,c){this.V31g=b;this.property=c};c.prototype.V31g=null;c.prototype.property=null;c.prototype.compare=function(b,c){return b.valuation[this.property]===c.valuation[this.property]?this.V31g?this.V31g.compare(b,c):0:c.valuation[this.property]-b.valuation[this.property]};return c}();
CB.Comparer=CB.Comparer||{};
CB.Comparer.Comparer=function(){var c=function(){this.comparer=[]};c.prototype.comparer=null;c.prototype.V31i=function(b){this.comparer.push(b)};c.prototype.V31j=function(b){b=this.comparer.indexOf(b);return this.comparer.slice(b)};c.prototype.V31k=function(b){return this.comparer.slice(b,1)};c.prototype.compare=function(b,c){var e,g=0,f=this.comparer.length;do e=this.comparer[g].compare(b,c),g++;while(0==e&&g<f);return e};c.fromTiebrakeInfos=function(b){var c=new CB.Comparer.Comparer;c.V31i(new CB.Comparer.V31h(null,
"points"));b.forEach(function(b){c.V31i(new CB.Comparer.V31h(null,b.propertyName))});return c};return c}();CB.V31l=CB.V31l||{};
CB.V31l.V31m=function(){var c=function(){};c.prototype.V31n=function(b){var c=b[b.length-1];c.sort(function(b,c){return Math.max(c.white.elo,c.black.valuation.elo)-Math.max(b.white.elo,b.black.valuation.elo)});var g=0,f=[];c.forEach(function(b){var c=b.white.elo>b.black.elo?b.white:b.black;b=b.white.elo>b.black.elo?b.black:b.white;f.contains(c)||(c.sortIndex=++g,f.push(c));f.contains(b)||(b.sortIndex=++g,f.push(b))});for(var h=1/3,c=b.length-2;0<=c;c--)b[c].forEach(function(b){var c=b.white.elo>b.black.elo?
b.white:b.black;b=b.white.elo>b.black.elo?b.black:b.white;c.sortIndex&&b.sortIndex||(c.sortIndex?b.sortIndex=c.sortIndex+h:b.sortIndex?c.sortIndex=b.sortIndex-h:console.log("How?"))}),h/=3;b.forEach(function(b){b.sort(function(b,c){return Math.min(b.white.sortIndex,b.black.sortIndex)-Math.min(c.white.sortIndex,c.black.sortIndex)})})};c.prototype.toHtml=function(b,c,g,f){c=f.width;g=b.players;f=b.tournament.rounds;this.V31n(f);var h=b.tournament.availbeRounds,l=$("<div>",{"class":"koContainer"}),q=
$("<div>",{"class":"koHead"});q.append(this.V31o(h,b));for(var r=$("<div>",{"class":"koContent"}),t=0;t<h.length;t++){var w=h[t],z=$("<div>",{"class":"koRound koRound-"+w});z.append(this.V31p(f[t],w,g,b));r.append(z)}l.append(q);l.append($("<div>",{"class":"koContentContainer"}).append(r));520<=c?l.css("width",500):l.css("width","100%");return l};c.prototype.V31o=function(b,c){var g=$("<div>",{"class":"arrowContainer"}),f=$("<div>",{"class":"arrowLeftContainer arrowSideContainer"}),h=$("<img>",{src:"https://pgn.chessbase.com/Common/Media/Webimages/Arrow_left.png",
"class":"arrow arrowLeft"}),l=$("<div>",{"class":"arrowRightContainer arrowSideContainer"}),q=$("<img>",{src:"https://pgn.chessbase.com/Common/Media/Webimages/Arrow_right.png","class":"arrow arrowRight"}),r=$("<div>",{"class":"roundNrContainer"}),t=$("<div>",{"class":"roundNr"});r.append(t);f.append(h);l.append(q);g.append(f);g.append(r);g.append(l);var w=function(b){document.getElementById("koRoundSheet"+b)||(b=$("<style>",{id:"koRoundSheet"+b}).html(".cbtable .koContainer .koRound-"+b+"{display:none}"),
$(document.head).append(b))},z=function(b){document.head.removeChild(document.getElementById("koRoundSheet"+b))},B=function(b){f.next().children(".roundNr").text(b)};c.currentRoundIndex=c.currentRoundIndex||b.length-1;c.lastRoundIndex=c.lastRoundIndex||0;for(var v=c.currentRoundIndex,y=c.lastRoundIndex,C=b.length-1,h=0;h<b.length-1;h++)w(b[h]);B(b[b.length-1]);f.on("click",function(){0!=v&&(y=v,v--,B(b[v]),w(b[y]),z(b[v]),0==v&&f.children(".arrow").addClass("inactive"),v+1==C&&l.children(".arrow").removeClass("inactive"))});
l.on("click",function(){v!=C&&(y=v,v++,B(b[v]),w(b[y]),z(b[v]),0==v-1&&f.children(".arrow").removeClass("inactive"),v==C&&l.children(".arrow").addClass("inactive"))});v==C&&l.children(".arrow").addClass("inactive");0==v&&f.children(".arrow").addClass("inactive");return g};c.prototype.V31p=function(b,c,g,f){var h=$("<div>",{"class":"koRoundDiv"}),l=[],q=0;g.forEach(function(b){q=Math.max(b.opponents.filter(function(b){return b.round==c}).length,q)});for(g=0;g<b.length;g++){var r=b[g],t=r.white,w=r.black;
if(!l.contains(t)&&!l.contains(w)){l.push(t);l.push(w);r=$("<div>",{"class":"koMatch"});if(t.sortIndex<w.sortIndex)var z=this.V31q(t,w,c,f,q),t=this.V31q(w,t,c,f,q);else z=this.V31q(w,t,c,f,q),t=this.V31q(t,w,c,f,q);r.append(z);r.append(t);h.append(r)}}return h};var b=function(b,c){return b.round!=c.round?b.round-c.round:b.board-c.board};c.prototype.V31q=function(c,e,g,f,h){c.opponents.sort(b);e=$("<div>",{"class":"playerLine"});e.append(this.V31r(c));var l=[];c.opponents.filter(function(b){return b.round==
g}).forEach(function(b){l.push(f.createGameLink(c,b))});for(var q=l.length;q<h;q++)l.push("-");h=f.getResultsForPlayer(c,g);e.append(this.V31s(l,h));return e};c.prototype.V31r=function(b){var c=$("<div>",{"class":"playerDiv"});c.append($("<div>",{"class":"title"}).html($(b.valuation.title.prop("outerHTML"))));c.append($(b.valuation.info.prop("outerHTML")));c.append($("<div>",{"class":"rating"}).html(b.valuation.elo));c.append($("<div>",{"class":"nation"}).html(b.valuation.nation.prop("outerHTML")));
return c};c.prototype.V31t=function(b,c,g,f){var h=this.V31u(b),l,q;g=b.tournament.rounds;f=[];for(var r,t=0;t<b.tournament.availbeRounds.length;t++){var w=[];q=0;r=t;roundNr=b.tournament.availbeRounds[t];c=Math.pow(2,roundNr-1)-1;l=2*c;q+=c;f.push(roundNr);g[roundNr-1].forEach(function(c,e,f){e=c.white;c=c.black;if(!(0<=w.indexOf(e))){w.push(e);w.push(c);var g=b.getResultsForPlayer(e,roundNr);f=b.getResultsForPlayer(c,roundNr);g=this.V31s(g);f=this.V31s(f);h[q++][r]=e.getPbServerUrl();h[q++][r]=
g;h[q++][r]=f;h[q++][r]=c.getPbServerUrl();q+=l}}.bind(this))}h.unshift(f);c=CB.V31e.convertToHtmlTable(h);c.addClass("cbko");return c};c.prototype.V31u=function(b){var c=2*b.tournament.player.length+4;b=b.tournament.rounds.length;for(var g=[],f=0;f<c;f++){for(var h=[],l=0;l<b;l++)h.push("");g.push(h)}return g};c.prototype.V31t=function(b,c,g,f){f=b.players;var h=this.V31v(b),l,q,r;c=b.tournament.rounds;g=[];f.forEach(function(b,c,d){b.kosortrank=c});for(var t=0;t<b.tournament.availbeRounds.length;t++){var w=
[];r=0;columnNr=t;l=b.tournament.availbeRounds[t];f=Math.pow(2,l)-2;q=2*f;r+=f;g.push(l);c[l-1].forEach(function(c,e,f){e=c.white;c=c.black;if(!(0<=w.indexOf(e))){w.push(e);w.push(c);var g=b.getResultsForPlayer(e,l);f=b.getResultsForPlayer(c,l);g=this.V31s(g);f=this.V31s(f);h[r++][columnNr]=e.getPbServerUrl();h[r++][columnNr]=g;h[r++][columnNr]=f;h[r++][columnNr]=c.getPbServerUrl();r+=q}}.bind(this))}h.shift(g);return CB.V31e.convertToHtmlTable(h)};c.prototype.V31s=function(b,c){var g=$("<div>");
g.addClass("resultsBox");b.forEach(function(b){var c=$("<div>");c.html(b);c.addClass("innerResultsBox");g.append(c)}.bind(this));var f=CB.V30z.sum(c,this.V31w),h=$("<div>");h.addClass("innerResultsBox");h.html(f);g.append(h);return $("<div>").append(g.clone()).html()};c.prototype.V31x=function(b){return(b+"").split("0.5").join(".5").split(".5").join("&#189;")};c.prototype.V31w=function(b){return b};c.prototype.V31v=function(b){var c=2*Math.pow(2,b.tournament.rounds.length);b=b.tournament.rounds.length;
for(var g=[],f=0;f<c;f++){for(var h=[],l=0;l<b;l++)h.push("");g.push(h)}return g};return c}();CB.V31l=CB.V31l||{};
CB.V31l.V31y=function(){var c=function(){},b=function(b,c){var g=$("<tfoot>"),f=$("<tr>"),h=$("<td>",{"class":"tbTd",colspan:c});h.text(b);f.append(h);g.append(f);return g};c.prototype.toHtml=function(c,e,g,f){var h=f.width,l=[],q=[];e.forEach(function(b){q.push(b.headerName)});if(450<h)for(var r=1;r<=c.players.length;r++)q.push($("<div>",{"class":"crossResultHeader"}).html(r));0<g.tiebreakInfosArr.length&&q.push({str:"TB",colspan:1});q.push("Perf.");l.push(q);var t=1;c.players.forEach(function(b){var f=
[];e.forEach(function(c){f.push($("<div>",{"class":c.propertyName}).html(b.valuation[c.propertyName]).prop("outerHTML"))});450<h&&c.players.forEach(function(e){var g=$("<div>",{"class":"crossResult"}),h=b.getAllOpponentEntriesForPlayer(e);t=Math.max(t,h.filter(function(b){return b.scoredPoints}).length);if(e===b)f.push('<div class="samePlayer"></div>');else if(0<h.length){var l=[];h.forEach(function(e){e=c.createGameLink(b,e);l.push(e)});e=l.map(function(b){return b.prop("outerHTML")}).join(" ");
g.html(e);f.push(g.prop("outerHTML"))}else f.push("")});0<g.tiebreakInfosArr.length&&f.push($("<div>",{"class":"tb"}).text(b.valuation[g.tiebreakInfosArr[0].propertyName]));f.push($("<div>",{"class":"perf"}).text(b.valuation.perf));l.push(f)});r=CB.V31e.convertToHtmlTable(l);if(f.caption){f=$("<caption>");var w=String.formatEx('<a href="http://live.chessbase.com/replay/{0}/0?anno=false">{1}</a>',c.tournament.arcKey,c.tournament.title);f.html(w);r.prepend(f)}f=CB.V30z.max(l,function(b){return b.length});
w="TBs: "+g.tiebreakInfosArr.map(function(b){return CB.V30u.V30w[b.propertyName]}).join(", ");r.append(b(w,f));r.addClass("cbroundrobin");r.addClass("games-"+t);r.attr("cellpadding","0");return r};return c}();CB.V31l=CB.V31l||{};
CB.V31l.V31z=function(){var c=function(){};c.prototype.toHtml=function(b,c,e,g){var f=e.top||1E4,f=Math.min(f,b.players.length),h=e.tiebreakInfosArr;e=b.players.slice(0,f);var l=[],q=[];c.forEach(function(b){q.push(b.headerName)});q.push({str:"TB",colspan:1});q.push("Perf.");l.push(q);e.forEach(function(b){var e=[];c.forEach(function(c){b.valuation[c.propertyName]instanceof jQuery?e.push($("<div>",{"class":c.propertyName}).html($(b.valuation[c.propertyName].prop("outerHTML")))):e.push($("<div>",{"class":c.propertyName}).html(b.valuation[c.propertyName]))});
0<h.length&&e.push($("<div>",{"class":"tb"}).html(b.valuation[h[0].propertyName]));e.push($("<div>",{"class":"perf"}).text(b.valuation.perf));l.push(e)});e=CB.V31e.convertToHtmlTable(l);g.caption&&(b=String.formatEx('<a href="http://live.chessbase.com/replay/{0}/0?anno=false">{1}</a>',b.tournament.arcKey,b.tournament.title),g=$("<caption>"),g.html(b),e.prepend(g));var r=CB.V30z.max(l,function(b){return b.length});b=$("<tfoot>");g=h.map(function(b){return CB.V30u.V30w[b.propertyName]}).join(", ");
f=$("<tr>");r=$("<td>",{colspan:r});r.text("TBs: "+g);f.append(r);b.append(f);e.append(b);e.addClass("cbswiss");return e};c.prototype.V320=function(b,c,e,g){var f=e.top||1E4,h=e.tiebreakInfosArr;e=b.players;var l=$("<table>",{"class":"simple_table"});g.caption&&(g=$("<caption>"),b=String.formatEx('<a href="http://live.chessbase.com/replay/{0}/0?anno=false">{0}</a>',b.tournament.title.split(" ").join("_")),g.html(b),l.append(g));b=$("<thead>");var q=$("<tbody>"),r=$("<tr>");c.forEach(function(b){var c=
$("<th>");c.text(b.headerName);r.append(c)});g=$("<th>");g.text("Tiebrakers");g.attr("colspan",h.length);r.append(g);g=$("<tfoot>");g.text("TBs");b.append(r);l.append(b);l.append(g);var t=function(b,c){return function(d){var e=$("<td>");(b.valuation[d.propertyName]instanceof Number||"number"===typeof b.valuation[d.propertyName])&&e.addClass("tdNumber");e.html(b.valuation[d.propertyName]);c.append(e)}};e.filter(function(b){return b.valuation.rank<=f}).forEach(function(b){var e=$("<tr>");b=t(b,e);c.forEach(b);
h.forEach(b);q.append(e)});l.append(q);return l};return c}();CB.V31l=CB.V31l||{};CB.V31l.V321=function(){var c=function(){};c.prototype.toHtml=function(b,c,e,g){};return c}();CB.V322=function(){var c=function(b,c){this.propertyName=b;this.headerName=c};c.prototype.propertyName=null;c.prototype.headerName=null;return c}();CB.V31l=CB.V31l||{};
CB.V31l.V323=function(){var c=function(){};c.prototype.toHtml=function(b,c,e,g){c=g.width||4E4;this.ranking=b;e=[];e.push([]);var f=b.players[0],h=b.players[1],l=f.valuation.nation||h.valuation.nation,q=f.valuation.title||h.valuation.title,r=f.valuation.elo||h.valuation.elo,t=g.withPic&&(f.valuation.picture||h.valuation.picture);e.push(this.V324(f,450<c,l,q,r,t));e.push(this.V324(h,450<c,l,q,r,t));c=CB.V31e.convertToHtmlTable(e);g.caption&&(g=$("<caption>"),b=String.formatEx('<a href="http://live.chessbase.com/replay/{0}/0?anno=false">{1}</a>',
b.tournament.arcKey,b.tournament.title),g.html(b),c.prepend(g));c.addClass("cbmatch");return c};c.prototype.V324=function(b,c,e,g,f,h){var l=[];g&&l.push($("<div>",{"class":"title"}).html(b.valuation.title));l.push($("<div>",{"class":"name"}).html(b.getPbServerUrl()));h&&l.push($("<div>",{"class":"picture"}).html(b.valuation.picture));e&&l.push($("<div>",{"class":"nation"}).html(b.valuation.nation));f&&l.push($("<div>",{"class":"elo"}).html(b.valuation.elo));e=b.opponents.sort(function(b,c){return b.round-
c.round});c&&e.forEach(function(c){l.push($("<div>",{"class":"crossResult"}).html(this.ranking.createGameLink(b,c)).prop("outerHTML"))}.bind(this));c=CB.V30z.sum(e,function(b){return b.scoredPoints});l.push($("<div>",{"class":"points"}).text(c).prop("outerHTML"));return l};return c}();CB.V31l=CB.V31l||{};
CB.V31l.V325=function(){var c=function(){};c.prototype.toHtml=function(b,c,e,g){e=this.V326(b);c=e[0];var f=e[1];e=function(b,c){return c.valuation.points-b.valuation.points};c.sort(e);f.sort(e);e=$("<table>",{"class":"shev"});var h=$("<tbody>"),l=$("<tr>");l.append($("<td>"));var q=0;f.forEach(function(b){var c=$("<td>",{"class":"shev-rotate"});this.V327(b);c.html(this.V327(b));b=b.getDisplayeName().length;q=Math.max(q,5*b+48);l.append(c)}.bind(this));h.append(l);c.forEach(function(c){var d=$("<tr>"),
e=$("<td>");d.append(e);e.append(this.V327(c));f.forEach(function(e){c.getAllOpponentEntriesForPlayer(e).forEach(function(e){var f=$("<td>");f.html(b.createGameLink(c,e));d.append(f)})});h.append(d)}.bind(this));e.append(h);e.css("margin-top",Math.sqrt(Math.pow(q,2)));return e};c.prototype.V327=function(b){var c=$("<div>",{"class":"outerPlayerDiv"}),e=$("<div>",{"class":"playerDiv"});e.append(b.valuation.nation);e.append(b.valuation.title);e.append(b.getPbServerUrl());e.append(b.valuation.elo);c.append(e);
return e};c.prototype.V326=function(b){var c=[],e=[],g=b.players[0];g.opponents.forEach(function(b){e.push(b.opponent)});c.push(g);for(var f=e,h=c,g=0;c.length+e.length<b.players.length&&5>g;)b.players.forEach(function(b){if(c.contains(b))f=c,h=e;else if(e.contains(b))f=e,h=c;else return;if(b.opponents.some(function(b){return f.contains(b.opponent)}))return!1;h.merge(b.opponents.map(function(b){return b.opponent}))}),g++;return[c,e]};return c}();
Array.prototype.contains||(Array.prototype.contains=function(c){return 0<=this.indexOf(c)});Array.prototype.merge||(Array.prototype.merge=function(c){c.forEach(function(b){this.contains(b)||this.push(b)}.bind(this))});
CB.Ranking=function(){var c=function(b,c,e,g,f){this.tournament=b;this.round=c;this.rankingOptions=e;this.formatOptions=g;this.players=this.tournament.player;this.tableOptions=f;this.pointMult={win:this.tableOptions.pointsWin,draw:this.tableOptions.pointsDraw,loss:this.tableOptions.pointsLoss};this.init()};c.prototype.tournament=null;c.prototype.round=null;c.prototype.rankingOptions=null;c.prototype.players=null;c.prototype.pointMult=null;c.prototype.tableOptions=null;c.prototype.V328={swiss:new CB.V31l.V31z,
tourn:new CB.V31l.V31y,rapid:new CB.V31l.V31z,ko:new CB.V31l.V31m,match:new CB.V31l.V323,shev:new CB.V31l.V325,getFormatter:function(b){return this[b]||this.swiss}};c.prototype.V328[CB.Tournament.V30b.swiss]=c.prototype.V328.swiss;c.prototype.V328[CB.Tournament.V30b.V30d]=c.prototype.V328.tourn;c.prototype.V328[CB.Tournament.V30b.ko]=c.prototype.V328.ko;c.prototype.V328[CB.Tournament.V30b.match]=c.prototype.V328.match;c.prototype.V328[CB.Tournament.V30b.V30e]=c.prototype.V328.shev;c.prototype.V328[CB.Tournament.V30b.V30c]=
c.prototype.V328.ko;c.prototype.V328[CB.Tournament.V30b.team]=c.prototype.V328.swiss;c.V329=!1;c.lobby=null;c.prototype.V32a=function(b){var c=function(b,c){var d=[];$(".cbtable  tr,.cbpairing tr");$(".cbtable tr,.cbpairing tr,.cbtable .playerDiv").each(function(c,e,f){$(e).find(".name a");$(e).find(".name a").each(function(c,f,g){$(f).text()==b.getDisplayeName()&&d.push({row:e,index:c})})});d.forEach(function(d,e){var f=d.row,g=d.index,h=(new CB.V5o(c.player.m_NewCBPlayer.m_HighData.m_aNation)).getStrFlag(),
h=String.formatEx("https://pgn.chessbase.com/Common/Media/Flags/Flags{1}/{0}.png",h,64);$(f).find(".flagImg");$($(f).find(".flagImg")[g]).attr("src",h);b.valuation.nation.find(".flagImg").attr("src",h);f=d.row;g=d.index;if(c.pic){var h=$("<span>",{"class":"largeImageContainer "}),l=$("<img>",{"class":"playerPicLarge "}).attr("src",window.URL.createObjectURL(new Blob([new Uint8Array(c.pic)],{type:"img/png"})));h.append(l);$($(f).find(".playerImageContainer")[g]).append(h);b.valuation.info.append(h.prop("outerHTML"))}f=
d.row;g=d.index;h=CB.V1hw.Vds(c.player.m_NewCBPlayer.m_HighData.m_aTitle);$($(f).find(".title")[g]).text(h);b.valuation.title.text(h)})},e=function(b){for(var e=0;e<h.length;e++)b[e].found&&c(h[e],b[e])},g=[],g=b,f=g.length,h=[],l=function(){0<f||0<h.length&&V3c6.playerLobby.V2fq(h,e,!0)};g.forEach(function(b){V3c6.playerLobby.V2fm(b.firstName,b.lastName,function(e){c(b,e);f--;l()},function(c){h.push(b);f--;l()})})};c.prototype.V32b=function(){return this.V32c()?CB.Tournament.V30b.ko:this.V32d()?
CB.Tournament.V30b.match:this.V32e()?CB.Tournament.V30b.V30e:this.V32f()?CB.Tournament.V30b.V30d:CB.Tournament.V30b.swiss};c.prototype.V32g=function(){if(this.V32d())return CB.Tournament.V30b.match;if(this.V32c())return CB.Tournament.V30b.ko;if(this.V32f())return CB.Tournament.V30b.V30d;if(this.V32h()||this.tournament.type==CB.Tournament.V30b.V30d&&20<this.tournament.player.length)return CB.Tournament.V30b.team};c.prototype.V32d=function(){return 2==this.players.length};c.prototype.V32c=function(){for(var b=
this.tournament.availbeRounds.length,c=this.tournament.V30f(this.tournament.availbeRounds[0]),e=!1,g=1;g<b&&4<c;g++){var e=!0,f=this.tournament.V30f(this.tournament.availbeRounds[g]),c=c/f;if(1.8>c||2.2<c)return!1;c=f}return e};c.prototype.V32h=function(){return this.players.all(function(b){return b.team})};c.prototype.V32f=function(){var b=this.players.length;if(this.tournament.rounds.length+1===b||12>=b)return!0};c.prototype.V32e=function(){if(3>this.tournament.rounds.length)return!1;var b=[],c=
[],e=this.players[0];e.opponents.forEach(function(b){c.push(b.opponent)});b.push(e);for(var g=!0,f=c,h=b,g=!0,e=0;b.length+c.length<this.players.length&&5>e;)this.players.forEach(function(e){b.contains(e)?(f=b,h=c):c.contains(e)?(f=c,h=b):g=!1;e.opponents.some(function(b){return f.contains(b.opponent)})&&(g=!1);h.merge(e.opponents.map(function(b){return b.opponent}))}.bind(this)),e++;return g&&b.length==c.length&&b.length<=this.players.length/2};c.prototype.init=function(){this.tournament.type=this.tournament.type?
this.V32g()||this.tournament.type:this.V32b();var b;b=this.round?function(b){return b.round<=this.round}.bind(this):function(b){return!0};this.players.forEach(function(c){c.allOpponents=c.opponents;c.opponents=c.opponents.filter(b)});this.players.forEach(function(c){c.valuation.points=CB.V30z.V310(c,"points",b,this.players,0,0,this.pointMult);c.valuation.points&&(c.valuation.points=c.valuation.points.toFixed(1));c.valuation.gCount=c.opponents.filter(function(b){return void 0!=b.scoredPoints}).length}.bind(this));
this.rankingOptions.tiebreakInfosArr&&this.rankingOptions.tiebreakInfosArr.length||(this.tournament.type==CB.Tournament.V30b.swiss?this.rankingOptions.tiebreakInfosArr=[{propertyName:"bhz",cutOffFront:0,cutOffEnd:0}]:this.tournament.type==CB.Tournament.V30b.V30d&&(this.rankingOptions.tiebreakInfosArr=[{propertyName:"snb",cutOffFront:0,cutOffEnd:0}]));this.rankingOptions.tiebreakInfosArr.forEach(function(c){this.players.forEach(function(d){var e=CB.V30z.V310(d,c.propertyName,b,this.players,c.cutOffFront,
c.cutOffEnd),e=void 0!=e&&null!=e&&e.toFixed?e.toFixed(2):e;d.valuation[c.propertyName]=e}.bind(this))}.bind(this));this.players.forEach(function(b){b.valuation.perf=CB.V30z.V310(b,"perf",function(){return!0},this.players,0,0).toFixed(0);b.valuation.perf=isNaN(b.valuation.perf)?0:b.valuation.perf}.bind(this));var c=CB.Comparer.Comparer.fromTiebrakeInfos(this.rankingOptions.tiebreakInfosArr);this.players.sort(c.compare.bind(c));CB.V5t.V64()||this.V32a(this.players);for(var e=this.players[0].valuation.rank=
1;e<this.players.length;e++)0===c.compare(this.players[e],this.players[e-1])?this.players[e].valuation.rank=this.players[e-1].valuation.rank:this.players[e].valuation.rank=e+1};c.prototype.createGameLink=function(b,c){var e=$("<a>"),g,f;c.isWhite?(g=b.lastName,f=c.opponent.lastName):(f=b.lastName,g=c.opponent.lastName);g=String.formatEx("http://live.chessbase.com/replay/{2}/0/?w={0}&b={1}",g,f,this.tournament.arcKey.split(" ").join("_"));e.attr("href",g);null!=c.scoredPoints&&(g=c.scoredPoints.toString().split("0.5").join(".5").split(".5").join("&#189;"),
e.html(g));return e};c.prototype.getResultsForPlayer=function(b,c){return b.opponents.filter(function(b){return b.round==c}).sort(function(b,c){return parseInt(b.board)-parseInt(c.board)}).map(function(b){return b.scoredPoints})};c.prototype.toHtml=function(b){b||(b=1E5);var c=[];c.push(new CB.V322("rank","Rk."));CB.V5t.V64()||c.push(new CB.V322("title",""));c.push(new CB.V322("info","Name"));c.push(new CB.V322("elo","Rtg."));CB.V5t.V64()||c.push(new CB.V322("nation","Nt."));c.push(new CB.V322("points",
"Pts."));c.push(new CB.V322("gCount","n"));this.formatOptions.width=b;return this.V328.getFormatter(this.tournament.type).toHtml(this,c,this.rankingOptions,this.formatOptions)};c.prototype.V32i=function(b,c){return CB.V30z.sum(b.allOpponents.filter(function(b){return!c||b.round<c}),function(b){return this.V32j(b.scoredPoints)}.bind(this))};c.prototype.V32j=function(b){return 1==b?this.pointMult.win:.5==b?this.pointMult.draw:0==b?this.pointMult.loss:b};V3bf.initForListeners(c);V3bf.addEvent(c,"Changed");
return c}();
CB.V32k=function(){var c=function(b){this.ranking=b;this.init()};c.prototype.ranking=null;c.prototype.init=function(){for(var b=function(b){return function(c,d){var e=c.white.valuation["points"+b]+c.black.valuation["points"+b]-(d.white.valuation["points"+b]+d.black.valuation["points"+b]);return 0!=e?-e:-(Math.max(c.white.valuation.elo,c.black.valuation.elo)-Math.max(d.white.valuation.elo,d.black.valuation.elo))}},c=this.ranking.tournament.rounds,e=[],g=0;g<c.length;g++)e.push(this.V32l(c[g],this.ranking.tournament.availbeRounds[g])),
e[g].sort(b(this.ranking.tournament.availbeRounds[g]));this.pairings=e};c.prototype.V32l=function(b,c){var e=[];b.forEach(function(b){b.white.valuation["points"+c]=this.ranking.V32i(b.white,c);b.black.valuation["points"+c]=this.ranking.V32i(b.black,c);e.push(b)}.bind(this));e.roundNr=c;return e};c.prototype.RoundToHtml=function(b){var c=this.pairings[b-1],e=[];e.push(" Name Rtg. Nt. Pts.  Pts.  Name Rtg Nt.".split(" "));c.forEach(function(c){var d=[],h=c.white,l=c.black;d.push(h.valuation.title);
d.push(h.valuation.info);d.push(h.valuation.elo);d.push(h.valuation.nation);d.push($("<div>",{"class":"points"}).html(this.V32m(h.valuation["points"+b])));d.push(this.V32n(c,b));d.push($("<div>",{"class":"points"}).html(this.V32m(l.valuation["points"+b])));d.push(l.valuation.title);d.push($(l.valuation.info.prop("outerHTML")));d.push(l.valuation.elo);d.push(l.valuation.nation);e.push(d)}.bind(this));return CB.V31e.convertToHtmlTable(e)};c.prototype.V32n=function(b,c){var e=b.result/2,g=1-e,f=String.formatEx("http://live.chessbase.com/replay/{2}/{3}/?w={0}&b={1}",
b.white.lastName,b.black.lastName,this.ranking.tournament.arcKey.split(" ").join("_"),c);return $("<a>").attr("href",f).html($("<div>",{"class":"result"}).html(this.V32m(e+"-"+g)))};c.prototype.V32m=function(b){return b.toString().split("0.5").join(".5").split(".5").join("&#189;")};return c}();"use strict";
CB.V32o=function(){var c=function(){$(window).unbind("resize");$(window).on("resize",this.resize.bind(this))};c.prototype.init=function(){this.V32p=!1;this.V32q=[];this.V32r=-1;this.V32s=!1;this.V32t=window.innerWidth;this.V32u=window.innerHeight};c.prototype.V32v=function(){this.isVerti=1.15*window.innerWidth<window.innerHeight&&600>window.innerWidth};c.prototype.V1gu=function(b,c){var g=document.createElement("div");g.id=b+(c||0);g.className=b;return g};c.prototype.V32w=function(b,c,g){b=document.createElement(b);
c&&(b.id=c+(g||0),b.className=c);return b};c.prototype.V32x=function(b,c,g){var f=document.createElement("ul");b&&(f.id=b+(c||0),f.className=b);g.forEach(function(b){var c=document.createElement("li");f.appendChild(c);$(c).text(b||0)});return f};c.prototype.V32y=function(b,c,g,f,h,l){if(b){var q=0;g.forEach(function(b){b.length>q&&(q=b.length)});var r=this.V1gu(c,f),t=this.V32w("ul","ul"+c,f),w=9;CB.V5t.V64()&&(w=12);if(g.length){for(var z=0;z<g.length;z++){var B=this.V32w("li",c+"-item-"+z+"-",f);
g[z]?$(B).html('<a href="#">'+g[z]+"</a>"):$(B).attr("type","separator");t.appendChild(B)}r.appendChild(t);$(b).append(r);z=$("#"+c+f);z.jqxMenu({autoOpenPopup:!1,mode:"popup",width:16+q*w,animationShowDuration:0,animationHideDuration:0,animationHideDelay:0,animationShowDelay:0,autoCloseInterval:0});z.on("itemclick",function(b){b=b.args.id.match(/[-][0-9]*[-]/);b=b[0].substring(1,b[0].length-1);h(b)});z.on("closed",function(){l&&l()})}z[0].dataset.itemcount=g.length;return z[0]}};c.prototype.V32z=
function(b,c,g,f){if(g)return $(b).jqxMenu("close"),!1;var h=b.dataset.itemcount;g=$(window).scrollTop();var l=$(window).scrollLeft(),q=c.clientX-20;5>q&&(q=5);var r=0;CB.V5t.V64()&&(r=2);c=c.clientY-Math.max(60,30+(25+r)*h)+(f||0);$(b).jqxMenu("open",q+l,c+g);CB.V5t.V64()&&$(".jqx-item").css("font-size","18px");return!0};c.prototype.V330=function(b){var c=new CB.V1gv(b);c.setSize(b.offsetWidth,b.offsetHeight);c.setVisible(!0);return c};CB.Vl=function(b,c,g){};var b=new CB.V3bs;c.prototype.resize=
function(c,e){this.V32t||(this.V32t=window.innerWidth);this.V32u||(this.V32u=window.innerHeight);((10<Math.abs(window.innerWidth-this.V32t)||150<Math.abs(window.innerHeight-this.V32u)||!CB.V5t.V64())&&(window.innerWidth!=this.V32t||window.innerHeight-this.V32u)||e)&&b.exec(function(){0<=this.V331&&this.V332(this.V331);this.V333()||(this.V334(),this.V32t=window.innerWidth,this.V32u=window.innerHeight)}.bind(this),600)};c.prototype.V334=function(){var b=0;$(this.V335).each(function(c,g){this.resizePlugin($(g),
b);b++}.bind(this))};c.prototype.V336=function(b,c,g,f){this.V32q[b]&&this.V32q[b].stop();this.V32q[b]=new CB.Timer(function(){this.modules[b].boardArea&&this.V337(b,c,g)}.bind(this));this.V32q[b].runOnce(f)};c.prototype.V337=function(b,c,g){this.V32q[b]&&this.V32q[b].stop();this.modules[b].boardArea.setPosSize(0,0,c,g);this.modules[b].multiBoardCanvas&&this.modules[b].multiBoardCanvas.setPosSize(0,0,c,g)};c.prototype.V338=function(b,c,g){if(this.modules[g].boardAreaW==b&&this.modules[g].boardAreaH==
c)return!1;this.modules[g].boardAreaW=b;this.modules[g].boardAreaH=c;return!0};c.prototype.V339=function(){this.resizePlugin($($(this.V335)[this.V32r]),this.V32r)};c.prototype.V33a=function(){return-1!=document.URL.search(/en.chessbase.com/i)||-1!=document.URL.search(/de.chessbase.com/i)||-1!=document.URL.search(/es.chessbase.com/i)};c.prototype.V33b=function(b,c,g,f,h,l){for(var q="",r=0;r<f.length;r++){if(f[r].title){var t=h;f[r].css&&(t+=" "+f[r].css);var w;w=f[r].subtxt?String.f("<span class='btnSubText'>{0}</span>",
f[r].subtxt):f[r].txt;q+=String.f('<{6} title="{0}" id="{4}-btn{1}-{2}" class="{3}">{5}</{6}>',f[r].title,f[r].id,l,t,g,w,b)}else q+='<span class="toolBarSep"/>';this.V33c[l][f[r].id]=f[r].pic?f[r].pic:f[r].id}$(c).html(q);for(r=0;r<f.length;r++)f[r].id&&(b=$(String.f("#{2}-btn{0}-{1}",f[r].id,l,g)),c=function(b,c){return function(d){this.V32r=c;f[b].handler(c,d);d.preventDefault()}}.call(this,r,l),function(b,c){return function(b){this.V32r=c;b.preventDefault()}}.call(this,r,l),b[0]&&(b[0].onclick=
c))};c.prototype.V33d=function(b,c,g,f,h,l,q){if(c)for(var r='url( "'+CB.V5p()+'Media/Ribbons/{2}/{0}{1}.png" )',t=0;t<c.length;t++)if(c[t].id){var w=$(String.f("#{2}-btn{0}-{1}",c[t].id,h,b));w.css("background-image",String.f(r,this.V33c[h][c[t].id],g,l));q&&w.css("background-position",q);var z=f;c[t].css&&(z+=" "+c[t].css);w.attr("class",z)}};c.prototype.getKernel=function(){if("undefined"!=typeof this.V32r){if(this.modules[this.V32r]&&this.modules[this.V32r].getKernel())return this.modules[this.V32r].getKernel()}else if(this.modules[0])return this.modules[0].getKernel();
return null};c.prototype.V2zp=function(b,c){};c.prototype.showMessage=function(b){};c.prototype.V33e=function(b){$("#boardArea"+b).empty();this.modules[b].boardArea=this.V330(this.modules[b].panels.boardParent);this.modules[b].boardArea.setVisible(!0);this.resize();this.V334()};c.prototype.V33f=function(b){$("#boardArea"+b).empty();this.modules[b].boardArea=this.V33g(this.modules[b].panels.boardParent,b);this.modules[b].boardArea.setVisible(!0);this.resize();this.V334()};c.prototype.V33g=function(b,
c){var g=new CB.V22i(b,"3d"),g=g.createCanvas(this.Vko);this.board=new CB.BoardControl3D(g.canvas,100,100,"FritzBoard",this.Vko.bind(this),c);this.modules[c].board3d=this.board;g.setPosSize(b.offsetLeft,b.offsetTop,b.offsetWidth,b.offsetHeight);g.setVisible(!0);return g};c.prototype.Vko=function(b){this.modules[b].getKernel().setBoardWin(this.modules[b].board3d)};c.prototype.onControlReady=function(){};c.prototype.V33h=function(b){CB.V1gp("Toggle3D");this.V32p?this.V33e(b):this.V33f(b);this.V32p=
!this.V32p};c.prototype.V33i=function(){return{topDist:0,bottomDist:0,marginDistDivisor:30,shiftXPercent:-1.7,minWForCoordinates:260,splitLayout:!0,suppressCalcGeometry:!0}};c.prototype.V26u=function(){};c.prototype.V33j=function(){return CB.V5t.V64()?8:1800<screen.width?7:6};c.prototype.V1gt=function(b){return new CB.Vro};c.prototype.V17d=function(){return!1};c.prototype.useMatBalanceDefault=function(){return!0};c.prototype.V33k=function(b,c){var g=this.V1gu("switchBar",c);$(b).append(g);this.V33l(g,
c)};c.prototype.V33l=function(b,c){var g=$('<div class="cbSwitchToolBar" id="switch-tb"></div>');$(b).append(g);var f=this,g=[];this.V33m=g=g.concat([{title:"Live Chess",id:"switch-Live",pic:"Live",subtxt:"Live Chess",handler:function(){f.redirectToLivePage()}},{title:"Tactics",id:"switch-Tactics",pic:"Tactics",subtxt:"Tactics",handler:function(){f.redirectTo("tactics")}},{title:"Videos",id:"switch-Videos",pic:"Videos",txt:"",subtxt:"Videos",handler:function(){f.redirectTo("videos")}},{title:"Fritz",
id:"switch-Fritz",pic:"Fritz",subtxt:"Fritz",handler:function(){f.redirectTo("fritz")}},{title:"Openings",id:"switch-Openings",pic:"Openings",subtxt:"Openings",handler:function(){f.redirectTo("openings")}},{title:"My Own Games",id:"switch-Mygames",pic:"mygames",subtxt:"My Games",handler:function(){f.redirectTo("mygames")}},{title:"Chess Quiz",id:"switch-quiz",pic:"quiz",subtxt:"Quiz",handler:function(){f.redirectTo("quiz")}},{title:"Players",id:"switch-players",pic:"players",subtxt:"Players",handler:function(){f.redirectTo("players")}},
{title:"News",id:"switch-news",pic:"news",subtxt:"News",handler:function(){f.redirectTo("en")}}]);this.V33b("button",b,"a",g,"switchAppBtn",0);this.V33d("a",this.V33m,32,"switchAppBtn",c,"Switch","center 3px")};c.prototype.V33n=function(){window.location=this.V33o()};c.prototype.V33o=function(){return CB.V5t.V63()||CB.V5t.V64()?"https://live.chessbase.com/LogonIos?returnurl="+encodeURIComponent(document.location):"https://live.chessbase.com/Logon?returnurl="+encodeURIComponent(document.location)};
c.prototype.V33p=function(){CB.V5t.V63()||CB.V5t.V64();return"https://live.chessbase.com/createAccount?returnurl="+encodeURIComponent(document.location)};c.prototype.redirectToLivePage=function(){CB.V2b2("Live");this.redirectTo("live")};c.prototype.V33q=function(){window.open("https://account.chessbase.com/en/me")};c.prototype.redirectTo=function(b){b=String.f("https://{0}.chessbase.com",b);window.location=b};c.prototype.log=function(b){};c.prototype.V1ub=function(b,c){6};return c}();"use strict";
CB.V1t9=function(){var c=function(b){if(!b)throw"Accountsmanager: App required";this.app=b||"playchess";this.V1um=V3c6.config.getAccountUris()[0]};c.prototype.V33r=function(){return window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")};c.prototype.pwLogin=function(b,c,g,f){if(b&&c){b=this.V33s(b);var h=this.V33t(b,"chk");this.V33u({cmd:"chk",user:b,app:this.app,pass:this.V33s(c),key:h},function(b){b&&g(b,f)})}else g({error:!0},f)};c.prototype.V33v=function(b){};c.prototype.tokenLogin=
function(b,c,g){b=this.V33s(b);var f=this.V33t(b,"get");this.V33u({cmd:"get",user:b,app:this.app,token:c,key:f},g)};c.prototype.V2a4=function(b,c,g,f,h){b=this.V33s(b);var l=this.V33t(b,"pw");this.V33u({cmd:"pw",user:b,app:this.app,old:this.V33s(c),"new":this.V33s(g),token:f,key:l},h)};c.prototype.getFriends=function(b,c,g,f){b=this.V33s(b);var h=this.V33t(b,"getfr");this.V33u({cmd:"getfr",user:b,token:c,friendtype:g,key:h},f)};c.prototype.setFriends=function(b,c,g,f,h){for(var l="",q=0;q<f.length;q++)l+=
f[q]+",";f=this.V33s(l);b=this.V33s(b);l=this.V33t(b,"setfr");this.V33u({cmd:"setfr",user:b,token:c,friendtype:g,friends:f,key:l},h)};var b;c.prototype.V33u=function(c,e){var g=[],f;for(f in c)g.push(encodeURIComponent(f)+"="+encodeURIComponent(c[f]));var g=g.join("&"),h=this.V33r();h.open("POST",this.V1um);h.setRequestHeader("Content-type","application/x-www-form-urlencoded");h.setRequestHeader("X-Requested-With","XMLHttpRequest");b=new CB.Timer(function(){h.abort();e({timeout:!0})});b.runOnce(3E3);
h.onload=function(){b.stop();if(4===h.readyState&&200===h.status){var c=h.responseText;e(c?JSON.parse(c):{})}else e({})};h.onerror=function(c){b.stop();e({error:!0})};h.send(g)};c.prototype.V33t=function(b,c){0==b.Length&&(b="nameCoded");for(var g=c+b,f=b.split(""),h=c.split(""),g=g.split(""),l=0,q=0,r=0;r<g.length;r++)0!=(r&1)&&l<h.length?(g[r]=h[l],l++):q<f.length&&(g[r]=f[f.length-q-1],q++);return this.V33s(g.join(""))};c.prototype.V33s=function(b){b=CB.V4a.V4o(b);return CB.V4a.base64.encode(b)};
return c}();"use strict";CB.V33w=function(){var c=function(){};c.prototype.V33x=function(b,c,e,g){(new CB.Form({id:"loginForm",title:b,width:350,height:260,modal:!0,okHandler:c,cancelHandler:e,fields:[{caption:"User:",type:"string",id:"idUser",val:g},{caption:"Password:",type:"password",id:"idPassword",val:""}]})).create()};return c}();"use strict";"NOMINIFY=";CB.V1ze={V5l:-1,Vbe:0,WHITE:1,BLACK:2};CB.V20z={V214:0,V213:1,V210:2};
CB.V33y=function(){function c(b,c){b.push([CB.V4a.V4d(c.title),c.nGames,c.cloudId,CB.V4a.V4d(c.owner)])}var b={openCloudDatabase:function(){V3c6.initCloudManager()},nMaxOnlineDBGames:2,selectCloudDatabase:function(b,d,f){if(!this.V2ba()){for(var h=[],l=[],q=CB.V4a.V4b(b),r=0;r<d.size();r++)d.items[r].owner.toLowerCase()==q.toLowerCase()?c(h,d.items[r]):c(l,d.items[r]);d=[{name:"title",type:"string"},{name:"games",type:"int"},{name:"cloudId",type:"int"},{name:"owner",type:"string"}];var q=[{header:"Title",
dataIndex:"title",flex:2},{header:"Games",dataIndex:"games",flex:1},{header:"Owner",dataIndex:"owner",flex:2}],t=-1;CB.Vnc&&CB.Vnc.V33z(b,h,l,d,q,function(b){b&&(t=b.cloudId);f(t)})}},blockLiveBookUpdates:function(b){this.getKernel().V3bl.blockLiveBookUpdate(b)},loadGame:function(b){this.getKernel().loadSearchResultGame(b)}},d=new CB.V3bs;b.refreshOnlineDBGames=function(){this.dbGames&&this.dbGames.isVisible()&&(this.dbGames.setEmptyText("Searching..."),d.exec(function(){this.getKernel().V3bl.searchOnlineDB()}.bind(this),
500))};b.useMatBalanceDefault=function(){return 800<window.innerHeight};b.execCommand=function(b){try{switch(b){case V3c6.V3bp.ONLINEDB_SEARCH:this.getKernel().V3bl.search();break;case CB.Vm1.V26w:this.V26v()&&this.V26t().setGame(this.getKernel().game);break;case V3c6.V3bp.OPEN_CLOUDDATABASE:this.openCloudDatabase();break;case V3c6.V3bp.LOGIN:V3c6.changeCloudLogin();break;case V3c6.V3bp.SAVE_CLOUDDB:V3c6.saveToCloud(this.getKernel().game,0);break;case V3c6.V3bp.REPLACE_CLOUDDB:V3c6.replaceInCloud(this.getKernel().game,
0);break;case V3c6.V3bp.SAVE_WHITE_REPERTOIRE:V3c6.saveToWhiteRepertoire(this.getKernel().game);break;case V3c6.V3bp.SAVE_BLACK_REPERTOIRE:V3c6.saveToBlackRepertoire(this.getKernel().game);break;case V3c6.V3bp.CREATE_CLOUDDB:V3c6.createCloudDB();break;case V3c6.V3bp.DELETE_CLOUDDB:V3c6.deleteCloudDB();break;case V3c6.V3bp.EDIT_HEADER:V3c6.editHeader(this.getKernel().game);break;case V3c6.V3bp.LOAD_WHITE_MYMOVES:this.getKernel().boardWin.setBlackIsBottom(!1,!0);V3c6.loadMyMoves(CB.V1ze.WHITE,new CB.Game);
break;case V3c6.V3bp.LOAD_BLACK_MYMOVES:this.getKernel().boardWin.setBlackIsBottom(!0,!0);V3c6.loadMyMoves(CB.V1ze.BLACK,new CB.Game);break;case V3c6.V3bp.MARK_CURRENT_MOVE:V3c6.markCurrentMove(this.getKernel(),!1);break;case V3c6.V3bp.IMPORTANT_CURRENT_MOVE:V3c6.markCurrentMove(this.getKernel(),!0);break;case V3c6.V3bp.UNMARK_CURRENT_MOVE:V3c6.unMarkCurrentMove(this.getKernel());break;case V3c6.V3bp.UPLOAD_TO_MYMOVES:V3c6.uploadToMyMoves(this.getKernel())}}catch(c){b=V3c6.V3bp.Vlz(b),CB.V46(b,c)}};
b.execNotaContextMenu=function(b){if(Ext&&Ext.create&&V3c6.cloudMgr){CB.V5q.V21l("MyMove16");CB.V5q.V21l("ImportantMove16");var c=[{text:lm.MARK_MOVE,handler:function(){V3c6.markCurrentMove(V3c6.panelMgr.getKernel(),!1)},iconCls:"MyMove16"},{text:lm.MARK_IMPORTANT,iconCls:"ImportantMove16",handler:function(){V3c6.markCurrentMove(V3c6.panelMgr.getKernel(),!0)}}];if(V3c6.cloudMgr.V217())CB.V5q.V21l("EraseMove16"),CB.V5q.V21l("White16"),CB.V5q.V21l("Black16"),CB.V5q.V21l("Cutline16"),c=c.concat([{text:lm.UNMARK_MOVE,
iconCls:"Erase16",handler:function(){V3c6.unMarkCurrentMove(V3c6.panelMgr.getKernel())}},"-",{text:lm.REMOVE_TREE_FROM_HERE,iconCls:"Cutline16",handler:function(){CB.Vnc.V20i(lm.DELETE_VARIATION_TREE,lm.REMOVE_ALL_MY_MOVES,function(b){"yes"!=b&&"ok"!=b||V3c6.removeWholeTreeFromCurrentMove(V3c6.panelMgr.getKernel())})}}]);else var d=V3c6.V3bp,c=c.concat(this.getMarkEvalItems("Good16 Bad16 VeryGood16 VeryBad16 Interesting16 Dubious16 WhiteWins16 WhiteBetter16 WhiteSlightly16 Equal16 Unclear16 BlackSlightly16 BlackBetter16 BlackWins16 Compensation16".split(" "),
[d.MARK_GOOD,d.MARK_BAD,d.MARK_VERYGOOD,d.MARK_VERYBAD,d.MARK_INTERESTING,d.MARK_DUBIOUS,d.WHITE_WINS,d.WHITE_BETTER,d.WHITE_SLIGHTLY,d.EQUAL,d.UNCLEAR,d.BLACK_SLIGHTLY,d.BLACK_BETTER,d.BLACK_WINS,d.COMPENSATION],"Strong Move;Bad Move;Brilliant Move;Blunder;Interesting Move;Dubious Move;White Is Winning;White Is Better;White: Slight Advantage;Equal;Unclear;Black: Slight Advantage;Black Is Better;Black Is Winning;Compensation".split(";")));Ext.create("Ext.menu.Menu",{items:c}).showAt([b.clientX,b.clientY])}};
b.getMarkEvalItems=function(b,c,d){for(var h=[],l=0;l<b.length;l++)h.push({text:d[l],iconCls:b[l],handler:function(){var b=c[l];return function(){V3c6.commands.V27d(b)}}()});return h};b.getNotaElement=function(){var b=Ext.ComponentManager.get("idNotaPanel");if(b)return b.nota};b.shakeMarkButton=function(){CB.$(".MyMove32").addClass("shakeAnimation");CB.$(".MyMove24").addClass("shakeAnimation");CB.$(".iconMarkHelp").addClass("shakeAnimation")};b.stopShakeMarkButton=function(){CB.$(".MyMove32").removeClass("shakeAnimation");
CB.$(".MyMove24").removeClass("shakeAnimation");CB.$(".iconMarkHelp").removeClass("shakeAnimation")};b.showMessage=function(b,c){this.getKernel()&&this.getKernel().boardWin&&(this.getKernel().boardWin.addMessage(b,!0),c&&(new CB.Timer(function(){this.getKernel().boardWin.destroyMessage()}.bind(this))).runOnce(c))};b.setLayoutMyMoves=function(b,c){this.V169&&(b?this.V169.notaHeaderElement.V1ie(lm.MY_MOVES_FOR+" "+(c?lm.BLACK:lm.WHITE),c?"/common/media/ribbons/Black32.png":"/common/media/ribbons/White32.png"):
this.V169.notaHeaderElement.V1ie(""))};b.getNotationToolBarItems=function(b){return[CB.V138.V340("PGN","Save16","Download Game Notation","downloadPgnId",function(){return V3c6.panelMgr.getKernel().game}),"-",CB.V138.V275(lm.TEXT_AFTER,"Posttext16",b.ADD_POST_TEXT,lm.TEXT_AFTER_TIP),"-",CB.V138.V275(lm.DELETE_LINE,"DeleteLine16",b.DELETE_LINE,lm.DELETE_LINE_TIP),CB.V138.V275(lm.CUT_LINE,"CutLine16",b.CUT_LINE,lm.CUT_LINE_TIP),"-",CB.V138.V275("","MyMove16",b.MARK_CURRENT_MOVE,"Mark as 'My Move'"),
CB.V138.V275("","ImportantMove16",b.IMPORTANT_CURRENT_MOVE,"Mark as Important Move"),CB.V138.V275("","Erase16",b.UNMARK_CURRENT_MOVE,"Unmark current move"),"-",CB.V138.V275("","WhiteSlightly16",b.WHITE_SLIGHTLY,"White has a slight advantage"),CB.V138.V275("","Equal16",b.EQUAL,"The position is equal"),CB.V138.V275("","Unclear16",b.UNCLEAR,"The position ist unclear"),CB.V138.V275("","BlackSlightly16",b.BLACK_SLIGHTLY,"Black has a slight advantage"),CB.V138.V275("","WhiteBetter16",b.WHITE_BETTER,"White is better"),
CB.V138.V275("","BlackBetter16",b.BLACK_BETTER,"Black is better"),CB.V138.V275("","WhiteWins16",b.WHITE_WINS,"White is winning"),CB.V138.V275("","BlackWins16",b.BLACK_WINS,"Black is winning"),CB.V138.V275("","Compensation16",b.COMPENSATION,"Material compensation"),"-",CB.V138.V275("","InsertDiagram16",b.INSERT_DIAGRAM,lm.INSERT_DIAGRAM)]};return b}();
CB.V341=function(){function c(){CB.Vnc.V344("Name","New Database",function(b){b&&V3c6.cloudMgr&&V3c6.cloudMgr.V20g(b)}.bind(this))}function b(){V3c6.cloudMgr&&V3c6.cloudMgr.logOff();V3c6.aTBLobby&&V3c6.aTBLobby.logOff();V3c6.V2ar();V3c6.V2av();if(V3c6.panelMgr.getKernel())V3c6.panelMgr.getKernel().V3bl.onBeforeUnload();V3c6.V29q();V3c6.cloudMgr&&!V3c6.cloudMgr.V217()&&V3c6.V2al()}function d(){V3c6.cloudMgr&&!CB.V5t.V6c()&&(CB.V5t.V64()&&(V3c6.panelMgr.stopEngines&&V3c6.panelMgr.stopEngines(),V3c6.blurLogOffTimer&&
V3c6.stop(),V3c6.blurLogOffTimer=new CB.Timer(function(){V3c6.cloudMgr.logOff()}),V3c6.blurLogOffTimer.runOnce(6E4)),V3c6.cloudMgr.V217()||V3c6.V2al())}function e(){V3c6.blurLogOffTimer&&V3c6.blurLogOffTimer.stop()}function g(){document.hidden?d():e()}return{initCloudManager:function(){if(void 0!==V3c6.cloudMgr)V3c6.cloudMgr.isLoggedIn()?V3c6.cloudMgr.V1zi():this.loginToCloud();else{V3c6.V3bg.userName||(V3c6.V3bg.userName=CB.DOM.V21c(!0));V3c6.V3bg.userName||(V3c6.V3bg.userName=CB.DOM.getCodedCookie("AccountBackName64",
!0));V3c6.V3bg.loginMode=CB.LoginMode.NORMAL;var b=CB.DOM.V21b("AccountToken")||V3c6.V3bg.V1t1;b&&V3c6.V3bg.userName&&"guest"!=V3c6.V3bg.userName?(V3c6.V3bg.V1t1=b,this.createCloudManager(!0,null,b)):V3c6.V3bg.V1t7()?this.createCloudManager(!0):CB.Vnc&&CB.Vnc.V2bl("ChessBase Game Cloud",V3c6.V3bg,function(b){this.createCloudManager(b)}.bind(this),function(){CB.V138.V13a()},{})}},createCloudManager:function(c,h,l){CB.DOM.V1ta(V3c6.V3bg.userName);V3c6.config.V1zk||CB.V138.V139(lm.CONNECTING);V3c6.cloudMgr=
new CB.Server.CloudManager;V3c6.cloudMgr.onServerDown=this.onServerDown.bind(this);V3c6.cloudMgr.onInvalidPassword=this.changeCloudLogin.bind(this);var q=V3c6.V3bg.userName,r=CB.LoginMode.NORMAL;c||(q="Guest",r=CB.LoginMode.GUEST);V3c6.cloudMgr.V1zg(this.config.getCloudServerUris(),q,V3c6.V3bg.password,r,l);window.addEventListener("beforeunload",b);V3c6.V2aj||window.addEventListener("unload",b);window.addEventListener("blur",d);window.addEventListener("focus",e);window.addEventListener("visibilitychange",
g);V3c6.cloudMgr.V1u7();V3c6.cloudMgr.V20e(h);V3c6.initCloudListeners(V3c6.cloudMgr);V3c6.panelMgr.getKernel()&&(V3c6.panelMgr.getKernel().game.addOnResetGameListener(function(){V3c6.cloudMgr&&V3c6.cloudMgr.Vny()}),V3c6.panelMgr.getKernel().game.addOnNotaDoubleClickListener(function(){V3c6.onNotaDoubleClick()}))},connectCloudManager:function(b,c,d){CB.DOM.V1ta(V3c6.V3bg.userName);V3c6.config.V1zk||CB.V138.V139(lm.CONNECTING);var e=V3c6.V3bg.userName,g=CB.LoginMode.NORMAL;b||(e="Guest",g=CB.LoginMode.GUEST);
V3c6.cloudMgr.V1u1(e,V3c6.V3bg.password,g,d);V3c6.cloudMgr.V20e(c)},initCloudListeners:function(b){V3c6.panelMgr.tbBook&&V3c6.panelMgr.tbBook.initCloudListener(b);V3c6.panelMgr.getKernel()&&V3c6.panelMgr.getKernel().V3bl.initCloudListener&&V3c6.panelMgr.getKernel().V3bl.initCloudListener(b)},onServerDown:function(){this.config.V1zk||alert("Sorry, cloud server is currently in maintenance, please wait a few minutes.")},onTokenLoginOk:function(){this.initCloudManager()},onInvalidPassword:function(){},
shouldRequestCloudDBsOnLogin:function(){return!1},loginToCloud:function(b){var c=CB.DOM.V21b("AccountToken");if(c){var d=CB.DOM.V21c(!0);d&&(V3c6.V3bg.userName=d);V3c6.V3bg.loginMode=CB.LoginMode.NORMAL;V3c6.V3bg.V1t1=c;void 0===V3c6.cloudMgr?this.createCloudManager(!0,b,c):this.connectCloudManager(!0,b,c)}else this.changeCloudLogin(b)},changeCloudLogin:function(b){if(CB.Vnc){var c=CB.DOM.V21c(!0);c||(c=CB.DOM.getCodedCookie("AccountBackName64",!0));c&&(V3c6.V3bg.userName=c);CB.Vnc.V2bl("ChessBase Game Cloud",
V3c6.V3bg,function(c){void 0===V3c6.cloudMgr?this.createCloudManager(c,b):this.connectCloudManager(c,b)}.bind(this),function(){CB.V138.V13a()},{guestBtn:!1,createBtn:!0,forgotBtn:!0})}},saveToCloud:function(b){var c=function(){CB.Vnc.V343(b.hdr,function(){b.fireOnHeaderChanged();V3c6.cloudMgr.V20o(b)}.bind(this))}.bind(this);void 0===V3c6.cloudMgr||V3c6.cloudMgr.V1uh()?V3c6.loginToCloud(c):c()},replaceInCloud:function(b){var c=function(){CB.Vnc.V343(b.hdr,function(){b.fireOnHeaderChanged();V3c6.cloudMgr.V20p(b)}.bind(this))}.bind(this);
void 0===V3c6.cloudMgr||V3c6.cloudMgr.V1uh()?V3c6.loginToCloud(c):c()},editHeader:function(b){CB.Vnc.V343(b.hdr,function(){b.fireOnHeaderChanged();V3c6.cloudMgr.V20q(b)&&V3c6.cloudMgr.V20p(b)})},saveToWhiteRepertoire:function(b){alert("NOTIMPL")},saveToBlackRepertoire:function(b){alert("NOTIMPL")},createCloudDB:function(){void 0===V3c6.cloudMgr||V3c6.cloudMgr.V1uh()?this.loginToCloud():c.bind(this)()},deleteCloudDB:function(){void 0===V3c6.cloudMgr||V3c6.cloudMgr.V1uh()?this.loginToCloud():V3c6.cloudMgr.deleteDatabase()},
setLoggedIn:function(b){b?this.V2ay()||(document.title=this.V29j+" - "+V3c6.V3bg.userName):(V3c6.cloudMgr&&V3c6.cloudMgr.isLoggedIn()&&(V3c6.cloudMgr.V217()&&V3c6.panelMgr.getKernel().newGame(),V3c6.cloudMgr.logOff(),delete V3c6.cloudMgr),this.panelMgr.V20b&&this.panelMgr.V20b(null),this.V2ay()||(document.title=this.V29j+" - not logged in"),this.V2bm=!1);this.superClass.setLoggedIn.apply(this,arguments)},loadMyMoves:function(b,c){V3c6.checkCloudLoggedIn()&&V3c6.panelMgr.getKernel().V3bl.mayLoadGames()&&
(V3c6.cloudMgr.V217()||(V3c6.prevGame=new CB.Game,V3c6.prevGame.assign(V3c6.panelMgr.getKernel().game)),V3c6.panelMgr.getKernel().V3bl.shouldRefreshOnlineDB=!0,V3c6.cloudMgr.loadMyMoves(b,c),V3c6.panelMgr.blockLiveBookUpdates(CB.V20z.V214))},restorePrevGame:function(){V3c6.prevGame&&V3c6.panelMgr.getKernel().V3bl.getFnLoadSearchResult().call(V3c6.panelMgr.getKernel(),V3c6.prevGame)},removeWholeTreeFromCurrentMove:function(b,c){if(V3c6.checkCloudLoggedIn()&&b.game.getMoveOffs()<=b.game.getCurLine().length){var d=
new CB.Game,e=b.game.getMoveOffs();c&&(e=b.game.getLineStartMoveNo());for(var g=0;g<e;g++)d.makeMove(b.game.getCurLine()[g]);if(e=b.game.getCurLine()[g])e=new CB.Vei(e.from,e.to,e.prom),V3c6.cloudMgr.V20x(d.getCurPos(),e,V3c6.cloudMgr.V1zd),d.gotoPrev()}},markCurrentMove:function(b,c){V3c6.panelMgr.stopShakeMarkButton();c=c||!1;if(V3c6.checkCloudLoggedIn()&&b.game.getMoveOffs()<=b.game.getCurLine().length&&this.checkMyMovesLoadedForOtherSide(!b.getCurPos().getBTM())){b.game.deleteAnno(CB.AnnoType.Vgp);
c?b.addSymbol(CB.Vlp.Vuc):b.addSymbol(CB.Vlp.Vub);var d=this.cloneGameToCurPos(b.game);V3c6.cloudMgr.V20r(d,c?3:2);var d=new CB.Vie,e=b.game.getLastMove();if(e){var g=b.getCurPos().getMoveNum(),d=d.getMoveNota(e,g),e=d+" "+lm.MARKED;c&&(e=d+" "+lm.MARKED_IMPORANT);b.boardWin.addMessage(e,!0);(new CB.Timer(function(){b.boardWin.destroyMessage()})).runOnce(2E3);V3c6.cloudMgr.V20u(!b.getCurPos().getBTM())&&(d=this.cloneGameToCurPos(b.game,2),V3c6.cloudMgr.loadMyMoves(V3c6.cloudMgr.V1zd,d))}}},checkMyMovesLoadedForOtherSide:function(b){if(0==
this.panelMgr.getKernel().game.getMoveNo())V3c6.panelMgr.showMessage(lm.ENTER_OR_CLICK_MOVE_AND_MARK,5E3);else{var c;switch(V3c6.cloudMgr.V1zd){default:case CB.V1ze.Vbe:b=!0;break;case CB.V1ze.BLACK:c=lm.CAUTION_YOU_ARE_EDITING_MOVES_FOR+" "+lm.BLACK+".";break;case CB.V1ze.WHITE:b=!b,c=lm.CAUTION_YOU_ARE_EDITING_MOVES_FOR+" "+lm.WHITE+"."}b||V3c6.panelMgr.showMessage(c);return b}},makeMainMoveOrder:function(b){if(V3c6.checkCloudLoggedIn()&&b.game.getMoveOffs()<=b.game.getCurLine().length){for(var c=
new CB.Game,d=0;d<b.game.getMoveOffs();d++)c.makeMove(b.game.getCurLine()[d]);V3c6.cloudMgr.makeMainMoveOrder(c);c=new CB.Vie;if(d=b.game.getLastMove()){var e=b.getCurPos().getMoveNum(),c=c.getMoveNota(d,e);b.boardWin.addMessage(c+" is main move order.",!0);(new CB.Timer(function(){b.boardWin.destroyMessage()})).runOnce(2E3);V3c6.cloudMgr.V20u(!b.getCurPos().getBTM())&&V3c6.cloudMgr.V20y()}}},unMarkCurrentMove:function(b){if(V3c6.checkCloudLoggedIn()&&b.game.getMoveOffs()<=b.game.getCurLine().length&&
this.checkMyMovesLoadedForOtherSide(!b.getCurPos().getBTM())){var c=b.game.getLastMove();if(c){b.game.deleteAnno(CB.AnnoType.Vgp);var d=new CB.Position;b.game.enableEvents(!1);b.game.gotoPrev();d.copy(b.game.getCurPos());b.game.gotoNext();V3c6.cloudMgr.removeFromMyMoves(d,c);b.game.enableEvents(!0);var d=new CB.Vie,e=b.getCurPos().getMoveNum(),c=d.getMoveNota(c,e);b.boardWin.addMessage(c+" cleared.",!0);(new CB.Timer(function(){b.boardWin.destroyMessage()})).runOnce(2E3);V3c6.cloudMgr.V20u(!b.getCurPos().getBTM())&&
(c=this.cloneGameToCurPos(b.game,2),V3c6.cloudMgr.loadMyMoves(V3c6.cloudMgr.V1zd,c))}}},uploadToMyMoves:function(b){V3c6.checkCloudLoggedIn()&&(b.boardWin.addMessage(lm.GAME_UPLOADED,!0),V3c6.cloudMgr.uploadToMyMoves(b.game),(new CB.Timer(function(){b.boardWin.destroyMessage()})).runOnce(2E3),V3c6.cloudMgr.V20y())},isCloudLoggedIn:function(){return V3c6.cloudMgr&&V3c6.cloudMgr.isLoggedIn()},checkCloudLoggedIn:function(){if(V3c6.cloudMgr){if(V3c6.cloudMgr.isLoggedIn())return!0;if(V3c6.cloudMgr.wasLoggedIn()&&
!V3c6.cloudMgr.Vrg())return V3c6.cloudMgr.V1u6(),!0}V3c6.panelMgr.showMessage(lm.PLEASE_LOGIN_OPENINGS,3E3);return!1},cloneGameToCurPos:function(b,c){for(var d=new CB.Game,e=0;e<b.getMoveOffs()&&e<(c||999);e++){var g=b.getCurLine()[e];if(g)d.makeMove(new CB.Vei(g.from,g.to,g.prom));else{alert("game logic problem");break}}return d},onNotaDoubleClick:function(){var b=this.cloneGameToCurPos(V3c6.panelMgr.getKernel().game,V3c6.panelMgr.getKernel().game.getMoveOffs()-5);this.loadMyMoves(V3c6.cloudMgr.V1zd,
b);V3c6.panelMgr.refreshOnlineDBGames&&V3c6.panelMgr.refreshOnlineDBGames()},notifyMyMovesChanged:function(){this.cloudMgr.V1zj(this.panelMgr.getKernel().game.getCurPos());this.cloudMgr.V20u(this.panelMgr.getKernel().getCurPos().getBTM())&&this.cloudMgr.V20y()}}}();
CB.V345=function(){var c={createGUIElements:function(b){this.superClass.createGUIElements.call(this,b);b.shouldAnimatePosChange=this.shouldAnimatePosChange.bind(this);this.setDefaultAnimSteps(b)},setDefaultAnimSteps:function(b){if(this.kernel)var c=b||this.kernel.boardWin;c&&(CB.V5t.V64()?c.animSteps={forMove:.3,forPosition:.3}:c.animSteps={forMove:.6,forPosition:.6})},shouldAnimatePosChange:function(){return this.V346},blockLiveBookUpdate:function(b){if(this.V347!=CB.V20z.V210||b!=CB.V20z.V214)this.V347=
b},onAnnotate:function(){return V3c6.cloudMgr&&V3c6.cloudMgr.V217()?(V3c6.panelMgr.showMessage("Cannot annotate 'My Moves'",3E3),!1):this.canAnnotateLoadedGames()},onTextAnno:function(b,c){if(c){if(V3c6.cloudMgr&&V3c6.cloudMgr.V217()){var g=V3c6.cloneGameToCurPos(this.kernel.game);V3c6.cloudMgr.V20v(g,b);return!0}}else V3c6.cloudMgr&&V3c6.cloudMgr.V217()&&V3c6.panelMgr.showMessage("'My Moves' can only have text after a move.");if(this.canAnnotateLoadedGames())return!0;V3c6.panelMgr.showMessage("You can only annotate your own moves");
return!1},onEval:function(b){if(V3c6.cloudMgr&&V3c6.cloudMgr.V217()){var c=this.kernel.game.getAnno(CB.AnnoType.Vgp);c&&c.hasExclusiveEval(b)&&(b=0);c=V3c6.cloneGameToCurPos(this.kernel.game);V3c6.cloudMgr.V20t(c,b);return!0}if(this.canAnnotateLoadedGames())return!0;V3c6.panelMgr.showMessage("You can only annotate your own moves");return!1},canAnnotateLoadedGames:function(){return!1},onPromoteLine:function(){return V3c6.cloudMgr&&V3c6.cloudMgr.V217()?(V3c6.panelMgr.showMessage("Line ordering is automatic in 'My Moves'"),
!1):!0},onDeleteLine:function(){if(V3c6.cloudMgr&&V3c6.cloudMgr.V217())return CB.Vnc.V20i(lm.DELETE_VARIATION_TREE,lm.REMOVE_ALL_MY_MOVES,function(b){"yes"!=b&&"ok"!=b||V3c6.removeWholeTreeFromCurrentMove(this.kernel,!0)}.bind(this)),!1;if(this.canAnnotateLoadedGames())return!0;V3c6.panelMgr.showMessage("You can only annotate your own moves");return!1},onCutLine:function(){if(V3c6.cloudMgr&&V3c6.cloudMgr.V217())return CB.Vnc.V20i(lm.DELETE_VARIATION_TREE,lm.REMOVE_MOVES_FROM_HERE,function(b){"yes"!=
b&&"ok"!=b||V3c6.removeWholeTreeFromCurrentMove(this.kernel)}.bind(this)),!1;if(this.canAnnotateLoadedGames())return!0;V3c6.panelMgr.showMessage("You can only annotate your own moves");return!1},cloudOnEnteredMove:function(b){try{var c=V3c6.panelMgr.getNotaElement();c&&c.focus();if(V3c6.cloudMgr&&V3c6.cloudMgr.V20u(this.kernel.getCurPos().getBTM())){var g=V3c6.cloneGameToCurPos(this.kernel.game);g.getCurPos().preCalcCtx(b);g.makeMove(b);V3c6.cloudMgr.V20r(g,b,1)}}catch(f){alert("CloudEnter: "+f)}},
newGame:function(){delete this.kernel.game.replaceGameNo;delete this.kernel.game.replaceDBId;V3c6.cloudMgr&&V3c6.cloudMgr.Vny();V3c6.panelMgr.setLayoutMyMoves(!1)},searchOnlineDB:function(){if(V3c6.panelMgr.dbGames||V3c6.panelMgr.V1mu&&V3c6.panelMgr.V1mu()){var b=new CB.V1mv;b.setSearchBoard(this.kernel.game.getCurPos().board,this.kernel.game.getCurPos().getSideToMove());b.setUseBoard(!0);null!=V3c6.onlineLobby&&V3c6.onlineLobby.search(b,this.getOnlineDBMaxGames(),this.kernel.game.getMoveNo())}},
getOnlineDBMaxGames:function(){return this.nMaxOnlineDBGames},getFnLoadSearchResult:function(){return function(b){this.V3bl.beforeGameLoad();this.V3bl.V346=!1;V3c6.panelMgr.setLayoutMyMoves.call(V3c6.panelMgr,!1);var c=ObjUtil.clone(this.game),g=c.getCurPos();void 0!==this.boardWin.prepareFullRedraw&&this.boardWin.prepareFullRedraw();this.game.assign(b,!0);b=0;if(this.game.isNormalInit())for(;60>++b&&!this.game.V348(g,!0)&&0<c.getMoveOffs();)c.gotoPrev(!0),g=c.getCurPos();this.game.fireOnResetGame();
this.game.fireOnChanged();this.game.fireOnCurPosChanged();this.game.fireOnHeaderChanged();this.game.isNormalInit()||this.game.gotoFirst();this.V3bl.V346=!0;this.V3bl.Vre()}}},b=new CB.V3bs;c.updateCloudOnGamePos=function(){this.V347!=CB.V20z.V213&&b.exec(function(){V3c6.panelMgr.tbBook&&V3c6.aTBLobby&&V3c6.aTBLobby.Vtf&&(this.V349||!this.Vt9||!this.Vt9.equals(this.kernel.game.getCurPos())||this.V347==CB.V20z.V210)&&(this.V347=CB.V20z.V214,this.Vt9=ObjUtil.clone(this.kernel.game.getCurPos()),V3c6.panelMgr.tbBook.clear(),
(V3c6.panelMgr.tbBook.isVisible()||this.checkCloudWithHiddenBook())&&V3c6.aTBLobby.Vta(this.kernel.game.getCurPos()),V3c6.panelMgr.tbPanel&&(V3c6.panelMgr.tbPanel.isVisible()||this.checkCloudWithHiddenBook())&&V3c6.aTBLobby.Vtd(this.kernel.game.getCurPos()),this.lbInfo=null,this.myMoves=[],V3c6.cloudMgr&&(V3c6.panelMgr.tbBook&&V3c6.panelMgr.tbBook.isVisible()||this.checkCloudWithHiddenBook())&&(this.myMoves=null,!V3c6.cloudMgr.isLoggedIn()&&V3c6.cloudMgr.wasLoggedIn()?V3c6.cloudMgr.V1u6():V3c6.cloudMgr.V1zj(this.kernel.game.getCurPos(),
this.V349,this.V34a)),this.setDefaultAnimSteps())}.bind(this),200)};c.checkCloudWithHiddenBook=function(){return!1};c.initCloudListener=function(b){b.addOnMyMovesListener(this.myMovesListener.bind(this));V3c6.addOnAccountTypeListener(this.V3bmListener.bind(this))};c.myMovesListener=function(b){this.myMoves=b.moves};c.V3bmListener=function(b){switch(b.type){default:case 1:this.nMaxOnlineDBGames=5;break;case 2:this.nMaxOnlineDBGames=30;break;case 3:this.nMaxOnlineDBGames=50}};return c}();
CB.V34b={V34c:function(c,b){return CB.V138.V29u(b,"Databases","Cloud",["Open Cloud Database","Login","Save Game"],["Cloud16","Login16","Save16"],[c.OPEN_CLOUDDATABASE,c.LOGIN_CLOUDDB,c.SAVE_CLOUDDB],c.OPEN_CLOUDDATABASE,"Open database and save games")},V34d:function(c){return CB.V138.V29u(32,"Open","Open",["Open Cloud Database","Open PGN File"],["Cloud16","Open16"],[c.OPEN_CLOUDDATABASE,c.OPEN_PGN_DATABASE],c.OPEN_CLOUDDATABASE)},V34e:function(c,b){return CB.V138.V29u(b,lm.DATABASES,"Cloud",[lm.OPEN_DATABASE,
lm.CREATE_DATABASE,lm.DELETE_DATABASE],["Cloud16","CreateCloudDB16","Delete16"],[c.OPEN_CLOUDDATABASE,c.CREATE_CLOUDDB,c.DELETE_CLOUDDB],void 0,lm.DATABASE_FUNCTIONS)},V34f:function(c,b){return CB.V138.V34g(b,lm.MARK_MOVE,"MyMove",c.MARK_CURRENT_MOVE,"Mark the current move as 'my move' to create a repertoire that you can drill.")},V34h:function(c,b){return CB.V138.V34g(b,lm.LOAD_WHITE,"White",c.LOAD_WHITE_MYMOVES,"Load your White repertoire (marked moves) from the current position.")},V34i:function(c,
b){return CB.V138.V34g(b,lm.LOAD_BLACK,"Black",c.LOAD_BLACK_MYMOVES,"Load your Black repertoire (marked moves) from the current position.")},V34j:function(c,b,d,e){var g=[lm.MARK_MOVE,lm.MARK_IMPORTANT,lm.UNMARK_MOVE],f=["MyMove16","ImportantMove16","Erase16"],h=[c.MARK_CURRENT_MOVE,c.IMPORTANT_CURRENT_MOVE,c.UNMARK_CURRENT_MOVE];d&&(g=g.concat(["-",lm.LOAD_WHITE,lm.LOAD_BLACK]),f=f.concat(["","White16","Black16"]),h=h.concat([null,c.LOAD_WHITE_MYMOVES,c.LOAD_BLACK_MYMOVES]));e&&(g.push(lm.UPLOAD_GAME),
f.push("Upload16"),h.push(c.UPLOAD_TO_MYMOVES));return CB.V138.V29u(b,lm.MY_MOVES,"MyMove",g,f,h,void 0,lm.MY_MOVE_MENU_TTIP)},V34k:function(c,b){return CB.V138.V34g(b,"Cloud Databases","Cloud",c.OPEN_CLOUDDATABASE,"Open the list of your databases (cloud)")},V34l:function(c,b){return CB.V138.V34g(b,"Save","Save",c.SAVE_CLOUDDB,"Append game to the current cloud database")},V34m:function(c,b){return CB.V138.V29u(b,lm.SAVE,"Save",[lm.SAVE,lm.SAVE_AS_NEW,lm.EDIT_GAME],["Replace16","Save16","Edit16"],
[c.REPLACE_CLOUDDB,c.SAVE_CLOUDDB,c.EDIT_HEADER],void 0,lm.SAVE_AND_REPLACE_GAMES)},V34n:function(c,b){return V3c6.V29w(b)}};
CB.V2bg=function(){return{onLogin:function(){this.gameKernel&&this.gameKernel.game.fireOnChanged({forceUpdate:!0});this.setLoginHtml(V3c6.isLoggedIn())},setLoginHtml:function(c){if(this.V2bh){if(c)this.V2bh.setHeight(450<window.innerHeight?28:20),Ext.apply(this.V2bh,{overflowY:"auto"}),this.V2bh.update('<div class="CBInfoLoggedIn">'+this.getLoggedInHtml()+"</div>"),this.V2bh.V2bi(this.getLoginInfoGradient()+";color:white;text-transform:uppercase");else{var b=window.innerHeight/3;this.V2bj&&this.V2bj.el&&
(b=this.V2bj.getHeight());CB.V5t.V64()&&900>window.innerHeight?this.V2bh.setHeight(Math.min(b,120)):this.V2bh.setHeight(Math.min(b,160));Ext.apply(this.V2bh,{overflowY:"scroll"});this.V2bh.update('<div class="CBInfoNotLoggedIn">'+this.getPleaseLoginHtml()+"</div>");this.V2bh.V2bi(CB.V5q.V21i("rgba(254, 254,252,255)","rgba( 251, 251,247,255)")+";color:black;text-transform:none;")}this.V2bh.V29i=c;V3c6.V3bg.V1sl()&&this.V2bh.el&&this.V2bh.setVisible(!1)}},getLoginInfoGradient:function(){return CB.V5q.V21i("rgba(6, 216,19,255)",
"rgba(24, 147,23,255)")},getPleaseLoginHtml:function(c){c=CB.V5q.getHeader("h3",lm.LOGIN_PLEASE_LOGIN,"margin-top:4px");c+=this.getLoginInviteHeader()+"<br/>";if(!CB.V5t.V64()||900<window.innerHeight)c+=this.getFunctionalityText()+"<br/>",c+=lm.LOGIN_ACCOUNT_FREE+"<br/><br/>";return c+=this.genCreateAccountLink()},genCreateAccountLink:function(){return'<a href="'+V3c6.config.createAccountWebUrl+'" style="color:#8B0A16">'+lm.LOGIN_CREATE_LINK+"</a>"},getLoggedInHtml:function(){return String.f(lm.LOGIN_WELCOME,
V3c6.V3bg.userName)},getLoginInviteHeader:function(){return String.f(lm.GENERAL_INVITE,V3c6.V29j)},getFunctionalityText:function(){return lm.PLEASE_LOGIN},resizeInfoPanel:function(){var c=!1;if(this.V2bh&&this.V2bh.el)if(this.V2bh.V29i){var b=22;450<window.innerHeight&&(b=650<window.innerHeight?30:26);this.V2bh.setHeight(b);c=!0}else this.V2bj&&(b=Math.min(220,Math.max(20,.3*this.V2bj.getHeight())),this.V2bh.setHeight(b));return c}}}();
CB.V2bk=function(){return{accountLogin:function(c){V3c6.V3bg.userName=CB.DOM.V21c(!0)||V3c6.V3bg.userName;V3c6.V3bg.V1t1=CB.DOM.V21b("AccountToken");if(!c&&V3c6.V3bg.V1t1&&V3c6.V3bg.userName&&"guest"!=V3c6.V3bg.userName)c=new CB.V1t9(V3c6.V2a9),V3c6.V3bg.userName&&"guest"!=V3c6.V3bg.userName&&V3c6.V3bg.password?c.pwLogin(V3c6.V3bg.userName,V3c6.V3bg.password,this.receiveTokenHandler.bind(this)):c.tokenLogin(V3c6.V3bg.userName,V3c6.V3bg.V1t1,this.tokenLoginHandler.bind(this));else this.onRequestLogin()},
onRequestLogin:function(){this.enterLoginForm()},enterLoginForm:function(c){var b=this.V29i;CB.Vnc?CB.Vnc.V2bl(V3c6.appName,V3c6.V3bg,function(){this.setLoggedIn(!1);(new CB.V1t9(V3c6.V2a9)).pwLogin(V3c6.V3bg.userName,V3c6.V3bg.password,this.receiveTokenHandler.bind(this))}.bind(this),function(){CB.V138&&CB.V138.V13a();b||this.setLoggedIn(!1)}.bind(this),{infoMsg:c,guestBtn:!1,createBtn:!0,forgotBtn:!0}):b||this.setLoggedIn(!1)},tokenLoginHandler:function(c){c&&1!=c.ResultType&&!c.timeout?(this.setLoggedIn(!1),
this.enterLoginForm()):c.timeout?(CB.DOM.V1t2("AccountToken"),this.setLoggedIn(!1)):(this.setLoggedIn(!0),this.onTokenLoginOk());this.V2bm=!1},onTokenLoginOk:function(){},receiveTokenHandler:function(c){if(c&&c.Token){var b=unescape(c.Token);V3c6.V3bg.V1t1=b;V3c6.V3bg.V1t5();c.userId&&1==c.ResultType&&(V3c6.V3bg.userName=c.userId);CB.DOM.V1ta(V3c6.V3bg.userName);this.setLoggedIn(!0);CB.V138&&CB.V138.V139("Logged in OK: "+V3c6.V3bg.userName);CB.Timer.V4w(function(){CB.V138&&CB.V138.V13a()},600);this.onTokenLoginOk()}else{if(c&&
1!=c.Result&&!c.timeout)this.onInvalidToken();c.timeout&&CB.DOM.V1t2("AccountToken","");this.setLoggedIn(!1);this.V2bm=!1}},onInvalidToken:function(){this.enterLoginForm(String.formatEx(lm.PW_INVALID,V3c6.V3bg.userName))},isLoggedIn:function(){return this.V29i||this.V2bm},setLoggedIn:function(c){this.superClass.setLoggedIn.apply(this,arguments);c?document.title=this.V29j+" - "+V3c6.V3bg.userName:(document.title=this.V29j+" - not logged in",this.V2bm=!1)}}}();"use strict";
CB.ReaderMode={LIVE:1,REPLAY:2,DIAGRAM:3,TABLE:4,PAIRING:5,VIDEO:6,LIVEVIDEO:7};
CB.V34o=function(){function c(b){return new CB.Vsq(b,1,{hintTimeout:20,liveBookSilent:!0})}function b(b){return new CB.V359(b)}function d(b,c){"number"!==typeof b&&(b=0);"number"!==typeof c&&(c=0);return c-b}function e(b,c,d){if(c)for(var e=0;e<V3c6.panelMgr.modules[b].kernel.length;e++)if(V3c6.panelMgr.modules[b].kernel[e].idGame==c)return V3c6.panelMgr.modules[b].kernel[e];return V3c6.panelMgr.modules[b].getKernel(d)}var g=function(b){this.V335=".cbreplay,.cblive,.cbdiagram,.cbtable,.cbpairing,.cbvideo,.cblivevideo";
g.superClass.call(this,b);this.init();TRACE(window.innerWidth+"/"+window.innerHeight+"/"+window.devicePixelRatio)};CB.inherit(g,CB.V32o);g.prototype.init=function(){this.superClass.init.call(this);this.modules=[];this.V1er=[];this.chat=[];this.book=[];this.V34p=[];this.V34q=[];this.V331=-1;this.V1mp=this.engineOpen=!1;this.V34r=[];this.V34s=[];this.V34t=[];this.V33c=[];this.V34u=[];this.V34v=[];this.V34w=[]};g.prototype.V34x=function(){this.V34y()};g.prototype.V19j=function(){V3c6.lobby&&(V3c6.lobby.V2za(this.V2zi),
V3c6.playerLobby&&V3c6.playerLobby.addOnConnectedListener(this.V34z.bind(this)))};g.prototype.V350=function(b){if("undefined"===typeof V3c6.AzurePlayerLoaded){var c=document.createElement("link");c.href="//amp.azure.net/libs/amp/latest/skins/amp-default/azuremediaplayer.min.css";c.rel="stylesheet";c.type="text/css";document.getElementsByTagName("head")[0].appendChild(c);jQuery.getScript("//amp.azure.net/libs/amp/latest/azuremediaplayer.min.js",function(){V3c6.AzurePlayerLoaded=!0;b()})}else b()};
g.prototype.V351=function(b){"undefined"===typeof V3c6.NanoPlayerLoaded?jQuery.getScript("//demo.nanocosmos.de/nanoplayer/api/release/nanoplayer.3.min.js",function(){V3c6.NanoPlayerLoaded=!0;b()}):b()};g.prototype.V34y=function(){this.V352();V3c6.addOnLoginListener(this.V353.bind(this));this.V354()};g.prototype.V333=function(){var b=this.V355();this.V32v();return b!=this.V355()?($(this.V335).each(function(b,c){if(this.V356(b))"undefined"==typeof V3c6.livevideoEl&&(V3c6.livevideoEl=[],V3c6.videoDIV=
[],V3c6.V34q=[]),V3c6.livevideoEl[b]=document.getElementById("videoEl"+b),V3c6.videoDIV[b]=V3c6.livevideoEl[b].parentElement,V3c6.V34q[b]=this.V34q[b],V3c6.videoDIV[b].removeChild(V3c6.livevideoEl[b]);else if(this.V357(b))"undefined"==typeof V3c6.videoEl&&(V3c6.videoEl=[],V3c6.videoDIV=[],V3c6.V34p=[]),V3c6.videoEl[b]=document.getElementById("videoEl"+b),V3c6.videoDIV[b]=V3c6.videoEl[b].parentElement,V3c6.V34p[b]=this.V34p[b],V3c6.videoDIV[b].removeChild(V3c6.videoEl[b]);else if(this.isLive(b)){for(var d=
0;d<this.modules[b].list.length;d++)V3c6.lobby.setSessionToBackground(this.modules[b].ticket,this.modules[b].list[d].id);$(c).empty(".root");delete this.modules[b].boardArea}}.bind(this)),this.init(),this.V352(),this.V358(V3c6.isLoggedIn()),this.V354(),V3c6.lobby&&null!=V3c6.lobby.V2za&&V3c6.lobby.V2za(this.V2zi),!0):!1};var f=0;g.prototype.V352=function(){this.V32v();var c=0,d=function(b,d,e,f,g,h){this.V32s=!0;this.V33c[b]={};this.V35a(d);var l=$(d).text();l&&$(d).text("");e=this.V35b(d,c,e);f(e,
c,l);this.modules.push(e);e.addKernel(this);f=h(d,c,e.getKernel(),"100%");e.panels=f;e.nota=f.nota;e.undo=[];e.redo=[];e.onBoardReady=function(){V3c6.V1ix||(V3c6.V1ix=new CB.ChessAudio(V3c6.config.V298()+"Media/Sounds/"),(new CB.Timer(function(){V3c6.V1ix.V1jn()})).runOnce(5E3))};$(d).on("click",function(b){return function(c){this.V32r!=b&&0<=this.V32r&&this.V35c(this.V32r);this.V32r!=b&&this.V35d(b);this.V32r=b}.bind(this)}.call(this,c));f.boardParent&&(e.boardArea=this.V330(f.boardParent));e.engineOpen=
!1;g(e,c,l);c++;e.mode==CB.ReaderMode.LIVE&&($("#listParent"+b).text(lm.CONNECTING),$("#listParent"+b).addClass("msgInListParent"))},e=this,f=1;$(this.V335).each(function(c,g){$(g).is(".cbreplay")?e.doCreateReplayPlugin(g,c,d):$(g).is(".cblive")?(e.doCreateLivePlugin(g,c,d,f),f++):$(g).is(".cbdiagram")?e.doCreateDiagramPlugin(g,c,d):$(g).is(".cbtable")?e.doCreateTablePlugin(g,c,d):$(g).is(".cbpairing")?d.call(this,c,g,b,function(b){b.mode=CB.ReaderMode.PAIRING},function(b,c,d){b.getKernel().fnInitGame=
function(){};this.V35e(g,c)}.bind(this),function(b,c,d,e){return this.V35f(b,c)}.bind(this)):$(g).is(".cbvideo")?this.V350(function(){e.doCreateVideoPlugin(g,c,d)}.bind(this)):$(g).is(".cblivevideo")&&this.V351(function(){e.doCreateLiveVideoPlugin(g,c,d)}.bind(this))}.bind(this));V3c6.isLive=0<$(".cblive").length||0<$(".cblivevideo").length;V3c6.isAnyPlugin=0<$(this.V335).length;$(document.body).on("keydown",function(b){this.chat[this.V32r]&&this.chat[this.V32r].hasFocus()||this.handleKeyDown(b,this.V32r||
0)&&b.preventDefault()}.bind(this));$(document.body).on("orientationchange",function(b){this.V35g()}.bind(this));this.pluginCnt=c};g.prototype.doCreateReplayPlugin=function(c,d,e){e.call(this,d,c,b,function(b,c){b.mode=CB.ReaderMode.REPLAY},function(b,d,e){b.getKernel().fnInitGame=this.V35h(c,d);this.V35i(c,this.V35j.bind(this),d,e);b.toPgn=function(b){if(b=this.modules[b].pgnDatabase)return b.toString()}.bind(this)}.bind(this),function(b,c,d,e){return this.V355()?this.V35k(b,c,d,e):this.V35l(b,c,
d,e)}.bind(this))};g.prototype.doCreateLivePlugin=function(b,d,e,f){e.call(this,d,b,c,function(b){b.mode=CB.ReaderMode.LIVE},function(c){c.requestData=this.V35m(b,f,d,this,c.ticket);c.pgnTitle="LiveGames_"+c.requestData.event+".pgn";c.list=[];c.toPgn=this.V35n.bind(this);this.resizePlugin($(b),d)}.bind(this),function(b,c,d,e){return this.V355()?this.V35k(b,c,d,e):this.V35l(b,c,d,e)}.bind(this))};g.prototype.doCreateDiagramPlugin=function(b,c,d){d.call(this,c,b,function(b){b=new CB.Vsq(b,1,{hintTimeout:20,
liveBookSilent:!0});b.Vth=function(){return CB.Vhs.Vhw};b.onEntry=function(){this.Vt8.exec(function(){V3c6.analysisEngine&&V3c6.analysisEngine.Vsp(this.kernel)}.bind(this),100)};return b},function(b){b.mode=CB.ReaderMode.DIAGRAM},function(d,e,f){d.toPgn=function(b){b=this.modules[b].getKernel().game;return CB.V12j.V12k(b)}.bind(this);d.pgnTitle="Position.pgn";d.getKernel().fnInitGame=this.V35o(b,c,this,f);this.V1gw($(b),c)}.bind(this),function(b,c,d,e){this.V35p(b,c,d);return this.V35q(b,c,d)}.bind(this))};
g.prototype.doCreateTablePlugin=function(c,d,e){e.call(this,d,c,b,function(b){b.mode=CB.ReaderMode.TABLE},function(b,d,e){b.getKernel().fnInitGame=function(){};this.V35r(c,d)}.bind(this),function(b,c,d,e){return this.V35f(b,c)}.bind(this))};g.prototype.V35a=function(b){$(b).hasClass("cbtable")||$(b).hasClass("cbdiagram")||$(b).hasClass("cbpairing")||((CB.V5t.V64()||this.V355())&&$(b).css("min-width",220),this.V355()?CB.V5t.V73()?b.style.height="80vh":CB.V5t.V72()&&(CB.V5t.V67()?b.style.height="100vh":
b.style.height="92vh"):b.style.minHeight="400px",b.style.clear="both")};g.prototype.V35q=function(b,c,d,e){return{nota:null,boardParent:this.V35s(b,c)}};g.prototype.V35f=function(b,c){return{nota:null,boardParent:null}};g.prototype.V35t=function(b,c,d,e,f){if(d.Players){d=CB.Tournament.V30h(d);var g=CB.V30u.V30x(e.tbs),g=new CB.V30r(g,e.top),h=new CB.Ranking(d,e.round,g,f,e);this.modules[c].ranking=h;e=$(b).width();$(b).html("");h.addListener("Changed",function(){$(b).width();this.V35u(b,c);h.resized||
(h.resized=!0)}.bind(this));e=h.toHtml(e)[0];b.appendChild(e);this.V35u(b,c)}};g.prototype.V35v=function(b,c,d,e,f){var g=CB.Tournament.V30h(d);d=e.round;0==d&&(d=g.availbeRounds[g.availbeRounds.length-1]);e=new CB.Ranking(g,1E4,{tiebreakInfosArr:[]},f,e);e=new CB.V32k(e);e.round=d;this.modules[c].pairing=e;c=e.RoundToHtml(d)[0];b.appendChild(c)};g.prototype.doCreateVideoPlugin=function(c,d,e){e.call(this,d,c,b,function(b,c){b.mode=CB.ReaderMode.VIDEO},function(b,d,e){b.getKernel().fnInitGame=this.V35h(c,
d);this.V35w(c,this.V35x.bind(this),d,e);b.toPgn=function(b){if(b=this.modules[b].pgnDatabase)return b.toString()}.bind(this)}.bind(this),function(b,c,d,e){return this.V355()?this.V35k(b,c,d,e):this.V35l(b,c,d,e)}.bind(this))};g.prototype.doCreateLiveVideoPlugin=function(c,d,e){e.call(this,d,c,b,function(b,c){b.mode=CB.ReaderMode.LIVEVIDEO},function(b,d,e){b.getKernel().fnInitGame=this.V35h(c,d);this.V35y(c,this.V35z.bind(this),d,e);b.toPgn=function(b){if(b=this.modules[b].pgnDatabase)return b.toString()}.bind(this)}.bind(this),
function(b,c,d,e){return this.V355()?this.V35k(b,c,d,e):this.V35l(b,c,d,e)}.bind(this))};var h=new CB.V3bs,l=new CB.V3bs,q=new CB.V3bs;g.prototype.V35l=function(b,c,d,e){this.modules[c].noBook=null!=b.dataset.nobook;this.V360(c)&&(e=this.V1gu("cbcaption",c),b.appendChild(e));var f=this.V1gu("rootParent",c);b.appendChild(f);e=this.V1gu("root",c);f.appendChild(e);var g=this.V1gu("west",c);e.appendChild(g);f=this.V1gu("westNest",c);g.appendChild(f);var h=this.V1gu("westNorth",c);f.appendChild(h);g=this.V1gu("westSouth",
c);f.appendChild(g);var l=this.V1gu("east",c);e.appendChild(l);var q=this.V1gu("eastNest",c);l.appendChild(q);var r=this.V1gu("eastLayer",c);q.appendChild(r);l=this.V1gu("eastUpDownNest",c);r.appendChild(l);this.V356(c)&&this.V361(l,c);this.V357(c)&&this.V362(l,c);d=this.V363(l,c,d);this.V364(c)&&this.V365(l,c);this.V366(c)&&this.V367(q,c);h=this.V368(h,c);this.V369(g,c);r=this.V1gu("listParent",c);g.appendChild(r);this.V36a(b,c,e,f,q,l);(this.V357(c)||this.V356(c))&&(new CB.Timer(function(){this.V36b(c,
!1);$("#root"+c).jqxSplitter("refresh")}.bind(this))).runOnce(3E3);return{nota:d,boardParent:h}};g.prototype.V363=function(b,c,d){var e=this.V1gu("notaNest",c);b.appendChild(e);b=this.V1gu("notaparent",c);var f=this.V1gu("notaEl",c);b.appendChild(f);e.appendChild(b);d=this.V36c(f,d,c);b=this.V1gu("belowNota",c);f=this.V1gu("notaButtons",c);b.appendChild(f);e.appendChild(b);this.V36d(f,c);return d};g.prototype.V365=function(b,c){var d=this.V1gu("bookparent",c),e=this.V1gu("bookEl",c);d.appendChild(e);
b.appendChild(d);this.book[c]=this.V36e(e,c)};g.prototype.V367=function(b,c){var d=this.V1gu("chatparent",c),e=this.V1gu("chatEl",c);$(e).height("100%");$(e).width("100%");d.appendChild(e);b.appendChild(d);this.chat[c]=this.V36f(e,c)};g.prototype.V362=function(b,c){var d=this.V1gu("videoparent",c);if("undefined"!=typeof V3c6.videoEl&&V3c6.videoEl[c])d.appendChild(V3c6.videoEl[c]),this.V34p[c]=V3c6.V34p[c],this.V34p[c].videoManager.play();else{var e=this.V1gu("videoEl",c);d.appendChild(e);this.V34p[c]=
this.V36g(e,c)}b.appendChild(d)};g.prototype.V361=function(b,c){var d=this.V1gu("videoparent",c);if("undefined"!=typeof V3c6.livevideoEl&&V3c6.livevideoEl[c])d.appendChild(V3c6.livevideoEl[c]),this.V34q[c]=V3c6.V34q[c],this.V34q[c].videoManager&&this.V34q[c].videoManager.play();else{var e=this.V1gu("videoEl",c);d.appendChild(e);this.V34q[c]=this.V36h(e,c)}b.appendChild(d)};g.prototype.V368=function(b,c){var d=this.V1gu("boardHolder",c);$(d).css("backgroundImage","url( "+CB.V5p()+"media/chess/OrangeBrighterSoftBacklightLessSatur.jpg )");
b.appendChild(d);var e=this.V1gu("boardArea",c);d.appendChild(e);var d=this.V1gu("belowBoard",c),f=this.V1gu("buttons",c);d.appendChild(f);b.appendChild(d);this.V36i(f,c);return e};g.prototype.V36j=function(b,c){var d=this.V1gu("boardHolder",c);$(d).css("backgroundImage","url( "+CB.V5p()+"media/chess/OrangeBrighterSoftBacklightLessSatur.jpg )");var e=this.V1gu("boardArea",c);d.appendChild(e);b.appendChild(d);var d=this.V1gu("belowBoard",c),f=this.V1gu("buttons",c);d.appendChild(f);b.appendChild(d);
this.V36i(f,c);$("#boardHolder"+c)[0].style.height="calc( 92vh - 34px )";return e};g.prototype.V369=function(b,c){var d=this.V1gu("engineParent",c),e=this.V1gu("engineEl",c),f=this.V1gu("engineButtons",c);d.appendChild(f);d.appendChild(e);b.appendChild(d);this.V36k(f,c);$("#engineButtons"+c).hide()};g.prototype.V36a=function(b,c,d,e,f,g){var h=this.V33j(),l=65,q=50;$(b).is(".cblive")&&(880<$(b).width()&&1100>$(b).width()?(q=65,780>$(b).height()&&(l=60)):(l=76,q=65));if($(b).is(".cbvideo")||$(b).is(".cblivevideo"))q=
37,l=68;CB.V5t.V64()&&500>window.innerWidth?q=l=65:$(b).width()<1.1*$(b).height()&&(q=65);this.V36l(c,d,h,q);this.V36m(c,e,h,l);this.V36n(c,f,h);this.V357(c)||this.V356(c)?this.V36o(c,g,h,$(b).height()):this.V36p(c,g,h,$(b).height())};g.prototype.V36l=function(b,c,d,e){var f=this.V36q("root",b);e=f&&f.size?f.size:e;$(c).jqxSplitter({width:"100%",height:"100%",splitBarSize:d,theme:"chessbase",panels:[{size:e+"%",collapsible:!1},{size:100-e+"%",collapsible:!1}]});$(c).on("resize",function(c){h.exec(function(){this.V36r(b,
!0)}.bind(this),100)}.bind(this))};g.prototype.V36m=function(b,c,d,e){var f=this.V36q("westNest",b);e=f&&f.size?f.size:e;$(c).jqxSplitter({orientation:"horizontal",splitBarSize:d+1,theme:"chessbase",panels:[{size:e+"%",collapsible:!1},{size:100-e+"%",collapsible:!1}]});$(c).on("resize",function(c){h.exec(function(){this.V36r(b,!1)}.bind(this),100)}.bind(this))};g.prototype.V36n=function(b,c,d){if(this.V366(b)){var e;e=(e=this.V36q("eastNest",b))&&e.size?e.size:72;$(c).jqxSplitter({orientation:"vertical",
splitBarSize:d+2,theme:"chessbase",panels:[{size:e+"%",collapsible:!1},{size:100-e+"%",collapsible:!1}]});$(c).on("resize",function(c){l.exec(function(){this.V36s(b,!1)}.bind(this),50)}.bind(this))}};g.prototype.V36p=function(b,c,d,e){if(this.V364(b)){var f=90;850<e&&(f=86);f=(e=this.V36q("eastUpDownNest",b))&&e.size?e.size:f;$(c).jqxSplitter({orientation:"horizontal",width:"100%",height:"100%",splitBarSize:d+2,theme:"chessbase",panels:[{size:f+"%",collapsible:!1},{size:100-f+"%",collapsible:!1}]});
$(c).on("resize",function(c){q.exec(function(){this.V36t(b,!1)}.bind(this),50)}.bind(this))}};g.prototype.V36o=function(b,c,d,e){if(this.V357(b)||this.V356(b)){var f=90;850<e&&(f=86);if(this.V357(b)||this.V356(b))f=60;f=(e=this.V36q("eastUpDownNest",b))&&e.size?e.size:f;$(c).jqxSplitter({orientation:"horizontal",width:"100%",height:"100%",splitBarSize:d+2,theme:"chessbase",panels:[{size:f+"%",collapsible:!1},{size:100-f+"%",collapsible:!1}]});$(c).on("resize",function(c){q.exec(function(){this.V36b(b,
!1)}.bind(this),150)}.bind(this))}};g.prototype.V35k=function(b,c,d,e){return this.V36u(b,c,d,e)};g.prototype.V36u=function(b,c,d,e){e=this.V1gu("root",c);b.appendChild(e);b=this.V1gu("north",c);e.appendChild(b);var f=this.V1gu("southNest",c),g=this.V1gu("south",c);e.appendChild(g);g.appendChild(f);g=this.V1gu("ribbon",c);f.appendChild(g);var f=this.V1gu("notaparent",c),l=this.V1gu("listParent",c),q=this.V1gu("videoParent",c);this.V356(c)&&this.V361(q,c);this.V357(c)&&this.V362(q,c);g.appendChild(f);
g.appendChild(l);(this.V357(c)||this.V356(c))&&g.appendChild(q);this.V34u[c]=[f,l];(this.V357(c)||this.V356(c))&&this.V34u[c].push(q);q=this.V1gu("tabNavButtons",c);g.appendChild(q);this.V36v(q,c);$(l).text("Just one game here...");g=this.V1gu("notaEl",c);f.appendChild(g);d=this.V36c(g,d,c);$("#notaEl"+c)[0].style.height="100%";b=this.V36j(b,c);this.fnSelectNota(c);$(e).jqxSplitter({width:"100%",height:"100%",orientation:"horizontal",splitBarSize:10,resizable:!0,theme:"chessbase",panels:[{size:"65%",
min:90,max:window.innerWidth+30,collapsible:!1},{size:"35%",min:20}]});$(e).on("resize",function(b){h.exec(function(){this.V36w(c,!1);this.resize(null,!0)}.bind(this),100)}.bind(this));return{nota:d,boardParent:b}};g.prototype.V36x=function(b){this.V355()&&($("#t-btnSelNota-"+b).remove(),$("#tabNavButtons"+b)[0].style.height="0px")};g.prototype.V355=function(){return this.isVerti};g.prototype.V35s=function(b,c){var d=b.dataset.title;if(d){var e=this.V1gu("aboveDiag",c);b.appendChild(e);var f=this.V1gu("diagTitle",
c);e.appendChild(f);$(f).text(d)}d=this.V1gu("diagarea",c);b.appendChild(d);var g;"0"!=b.dataset.buttons&&(g=this.V1gu("belowDiag",c),b.appendChild(g),e=this.V1gu("diagButtons",c),g.appendChild(e),this.V36y(e,b,c));if(e=b.dataset.legend)g||(g=this.V1gu("belowDiag",c),b.appendChild(g)),f=this.V1gu("diagText",c),g.appendChild(f),$(f).text(e);return d};g.prototype.V36c=function(b,c,d){var e=ObjUtil.clone(CB.cbNotationDefaults);e.useMatBalance=!this.V355();b=CB.NotaElement.factory(b,null,e,d,this.modules[d].ticket);
b.setGame(c.game);return b};g.prototype.V36f=function(b,c){return CB.V1lb.factory(b,c,this.V36z.bind(this),{noInvite:!1})};g.prototype.V36e=function(b,c){return CB.V1mj.factory(b,c,function(){return this.modules[c].getKernel()}.bind(this),this.modules[c].ticket)};g.prototype.V36g=function(b,c){return CB.VideoElement.factory(b,c,function(){return this.modules[c].getKernel()}.bind(this),this.modules[c].ticket,this.V370.bind(this),this.V371.bind(this))};g.prototype.V36h=function(b,c){return CB.LiveVideoElement.factory(b,
c,function(){return this.modules[c].getKernel()}.bind(this),this.modules[c].ticket,this.V372.bind(this))};g.prototype.V1vj=function(b,c){this.chat[0]&&this.chat[0].out(b,c)};g.prototype.V373=function(b){for(var c=0;c<this.modules.length;c++)if(this.modules[c].ticket==b)return c;return 0};g.prototype.V2zl=function(b,c,d,e,f,g){var h=0;e&&e.ticket&&(h=this.V373(e.ticket));this.chat[h]&&this.chat[h].addKibitzChat(b,c,d,e,f,g)};g.prototype.V374=function(b,c){this.chat[b]&&this.chat[b].addKibitzChat(sender,
null,c,gameTicket,!0,!0)};g.prototype.V2zn=function(b,c){var d=this.V373(b);if(this.chat[d])for(d=0;d<c.length;d++)this.V2zl(c[d].sender,c[d].hdr,c[d].txt,{idGame:c[d].gameId,ticket:b,mvInx:c[d].mvInx},c[d].autoChat,d==c.length-1)};g.prototype.V36z=function(b,c){if(V3c6.isLoggedIn()&&V3c6.V3bg.userName){var d=this.modules[b].getKernel();if(d&&d.idGame)return V3c6.lobby.V1m5(V3c6.V3bg.userName,d.idGame,c),d}else this.chat[b].inviteLogin()};g.prototype.V35j=function(b,c,d){$("#boardHolder"+c).height();
$($(".cbreplay")[c]).height();var e=this;$("#listParent"+c).jsGrid({width:"400px",height:"100%",heading:!1,filtering:!1,editing:!1,inserting:!1,updateOnResize:!1,sorting:!0,autoload:!1,rowClick:function(f){d(b.getGame(f.item.No),c,f.item.No);e.isVerti&&e.fnSelectNota(c)},controller:{loadData:function(c){c=[];for(var d=1;d<=b.getGameCount();d++){var e=b.getHeaderJson(d),f=e.white,g=e.black,h=e.elow?e.elow:"-",l=e.elob?e.elob:"-",q=e.result,r=e.eco,y=e.event,t=e.date?e.date:" ",w=d,C="";e.round&&(C=
e.round,e.subRound&&(C+="."+e.subRound));c.push({White:f,Black:g,EloW:h,EloB:l,Res:q,ECO:r,Event:y,Year:t,No:w,Rnd:C,Len:e.plyCount})}return c}},fields:this.V1mo(this.V375(c),!1)});this.V1mp=!0;$("#listParent"+c).jsGrid("loadData");this.resize(null,!0);(new CB.Timer(function(){this.V376(c);console.log("ResizePGN")}.bind(this))).runOnce(1600);return this.V377(b,c,d)?!0:(d(b.getGame(1),c,1),!1)};g.prototype.createLiveListGrid=function(b,c,e){$("#listParent"+c).removeClass("msgInListParent");var f=this.V1mo(this.V375(c),
!0),g=this;$("#listParent"+c).jsGrid({width:"400px",height:"100%",heading:!1,filtering:!1,editing:!1,inserting:!1,updateOnResize:!1,sorting:!0,loadMessage:"Retrieving games ...",loadShading:!0,autoload:!1,rowClick:function(b){e(b.item.id,c,!1);g.isVerti&&g.fnSelectNota(c)},controller:{loadData:function(c){c=[];for(var d=0;d<b.games.length;d++){var e=b.games[d],f=e.white,h=e.black,l=e.eloWhite?e.eloWhite:"-",q=e.eloBlack?e.eloBlack:"-",r=g.getResIcon(e.result),y=e.eco?CB.Vh0.Vhg(e.eco):"",t=e.tourn,
w=d+1,C=e.watchers,z="";e.round1&&(z=e.round1,e.round2&&(z+="."+e.round2));c.push({White:f,Black:h,EloW:l,EloB:q,Res:r,ECO:y,Event:t,No:w,NKib:C,Rnd:z,Len:Math.ceil(e.moveLen/2),id:e.id,Stat:e.stat})}return c}},fields:f});this.V1mp=!0;$("#listParent"+c).jsGrid("loadData");jsGrid.sortStrategies.number=d;b.games.length&&(new CB.Timer(function(){e(b.games[0].id,c);for(var d=1;d<b.games.length;d++)(b.games[d].shouldRequestImmediatelyInLive()||6>=d)&&14>=d&&e(b.games[d].id,c,!0);this.V378(b.games,c,e);
this.V376(c)}.bind(this))).runOnce(500)};g.prototype.V35x=function(b,c,d){this.modules[c].getKernel().Interactive=b.Interactive;$("#boardHolder"+c).height();$($(".cbreplay")[c]).height();var e=this;$("#listParent"+c).jsGrid({width:"400px",height:"100%",heading:!1,filtering:!1,editing:!1,inserting:!1,updateOnResize:!1,sorting:!0,autoload:!1,rowClick:function(f){this.V379(b,f.itemIndex,c,d);e.isVerti&&e.fnSelectNota(c)}.bind(this),controller:{loadData:function(c){c=[];for(var d=0;d<b.Items.length;d++){var f=
b.Items[d],f={Duration:e.getDurationString(f.DurationSeconds),Name:f.Name,Id:f.Id};c.push(f)}return c}},fields:this.V37a(this.V375(c),!1)});this.V1mp=!0;$("#listParent"+c).jsGrid("loadData");this.resize(!0);(new CB.Timer(function(){this.V376(c);0<$("#westNest"+c).length&&$("#westNest"+c).jqxSplitter("refresh");0<$("#eastNest"+c).length&&$("#eastNest"+c).jqxSplitter("refresh");0<$("#root"+c).length&&$("#root"+c).jqxSplitter("refresh")}.bind(this))).runOnce(1E3);if("undefined"==typeof V3c6.videoEl){for(var f=
0,g=0;g<b.Items.length;g++)if(b.Preferred===b.Items[g].Id){f=g;break}(new CB.Timer(function(){this.V379(b,f,c,d)}.bind(this))).runOnce(100)}else this.V37b(b.Items[0].Name,c);return!0};g.prototype.V35z=function(b,c,d){this.modules[c].getKernel().Interactive=!1;$("#boardHolder"+c).height();$($(".cbreplay")[c]).height();this.modules[c].database=b;for(var e=!0,f=0;f<b.results.length;f++)b.results[f].Private||(e=!1);e&&this.V37c(c);var g=this;$("#listParent"+c).jsGrid({width:"400px",height:"100%",heading:!1,
filtering:!1,editing:!1,inserting:!1,updateOnResize:!1,sorting:!0,autoload:!1,rowClick:function(b){this.V37d(g.modules[c].database,b.itemIndex,c,d);g.isVerti&&g.fnSelectNota(c)}.bind(this),controller:{loadData:function(b){b=[];for(var d=0;d<g.modules[c].database.results.length;d++){var e=g.modules[c].database.results[d];e.Private||b.push({Name:e.ID,Id:e.StreamId,url:e.URL,gameId:e.gameId})}return b}},noDataContent:"Currently no broadcast",fields:this.V37e(this.V375(c),!1)});this.V1mp=!0;(new CB.Timer(function(){$.get("https://videos.chessbase.com/live/getlivestreams?client=web",
function(b){if(b){var e=0;this.modules[c].database&&(e=this.modules[c].database);this.modules[c].database=b;$("#listParent"+c).jsGrid("loadData");0<b.results.length&&0==e.results.length&&(new CB.Timer(function(){this.V37d(this.modules[c].database,h,c,d);(new CB.Timer(function(){this.V376(c);0<$("#westNest"+c).length&&$("#westNest"+c).jqxSplitter("refresh");0<$("#eastNest"+c).length&&$("#eastNest"+c).jqxSplitter("refresh");0<$("#root"+c).length&&$("#root"+c).jqxSplitter("refresh")}.bind(this))).runOnce(1E3)}.bind(this))).runOnce(100)}}.bind(this)).fail(function(){this.resizePlugin($(pluginDiv),
c)}.bind(this))}.bind(this))).runPeriodic(3E4);$("#listParent"+c).jsGrid("loadData");this.resize(!0);(new CB.Timer(function(){this.V376(c);0<$("#westNest"+c).length&&$("#westNest"+c).jqxSplitter("refresh");0<$("#eastNest"+c).length&&$("#eastNest"+c).jqxSplitter("refresh");0<$("#root"+c).length&&$("#root"+c).jqxSplitter("refresh")}.bind(this))).runOnce(1E3);if("undefined"==typeof V3c6.videoEl){for(var h=0,f=0;f<b.results.length;f++)if(b.Preferred===b.results[f].Id){h=f;break}(new CB.Timer(function(){this.V37d(b,
h,c,d)}.bind(this))).runOnce(100)}else 0<b.results.length&&this.V37b(b.results[0].ID,c);return!0};g.prototype.V37c=function(b){$.get("https://videos.chessbase.com/home/getcalendar",function(c){if(c){var d;d="<div style='background-color:beige;padding:5px;height:1000px;'><h3>Live Schedule</h3><table style='width:100%;padding:5px;'><tr><th style='color:black;'>Name</th><th style='color:black;'>Start (UTC)</th></tr>";for(var e=0;e<c.Events.length;e++){d+="<tr>";d+="<td style='color:black;'>"+c.Events[e].Descr+
"</td>";var f=c.Events[e].Start.indexOf("("),g=c.Events[e].Start.indexOf(")"),f=c.Events[e].Start.substr(f+1,g-f-1);d+="<td style='color:black;'>"+(new Date(Number(f))).toLocaleString()+"</td>";d+="</tr>"}this.V34q[b].videoManager.el.innerHTML=d}}.bind(this)).fail(function(){}.bind(this))};g.prototype.V37f=function(b){return"undefined"!==typeof b?b.toString():"?"};g.prototype.getDurationString=function(b){var c=Math.floor(b/3600),d=Math.floor((b-3600*c)/60);b=b-3600*c-60*d;c="0"+c+":";if(0!=d||""!==
c)d=10>d&&""!==c?"0"+d:String(d),c+=d+":";return c=""===c?b+"s":c+(10>b?"0"+b:String(b))};g.prototype.V378=function(b,c,d){var e=decodeURIComponent(CB.V4a.V4n(CB.V4a.V4l("w"))),f=decodeURIComponent(CB.V4a.V4n(CB.V4a.V4l("b"))),g=CB.V4a.V4n(CB.V4a.V4l("r")),h=CB.V4a.V4n(CB.V4a.V4l("r2")),l=CB.V4a.V4n(CB.V4a.V4l("mv"));if(e.length&&f.length)for(var q=0;q<b.length;q++)if(0==b[q].white.indexOf(e)&&0==b[q].black.indexOf(f)){var r=0==g.length||b[q].round1==parseInt(g);if(r=r&&0==h.length||b[q].round2==
parseInt(h))return d(b[q].id,c,!1,l),this.V32r=c,!0}};g.prototype.V377=function(b,c,d){var e=decodeURIComponent(CB.V4a.V4n(CB.V4a.V4l("w"))),f=decodeURIComponent(CB.V4a.V4n(CB.V4a.V4l("b"))),g=CB.V4a.V4n(CB.V4a.V4l("r")),h=CB.V4a.V4n(CB.V4a.V4l("r2")),l=CB.V4a.V4n(CB.V4a.V4l("mv"));if(e.length&&f.length)for(var q=0;q<b.getGameCount()&&100>q;q++){var r=b.getHeaderJson(q+1);if(0==r.white.indexOf(e)&&0==r.black.indexOf(f)){var t=0==g.length||r.round==parseInt(g);if(t=t&&0==h.length||r.subRound==parseInt(h))return b=
b.getGame(q+1),d(b,c,q+1,!1,parseInt(l)),this.V32r=c,!0}}return!1};g.prototype.V372=function(b){this.modules[0].getKernel().executeGameAction("GC",b);this.modules[0].boardArea&&this.modules[0].boardArea.canvas&&this.modules[0].boardArea.canvas.requestRedraw()};g.prototype.V15w=function(b,c){return b>=c&b<c+1};g.prototype.V370=function(b,c){if(this.V37g)for(var d=0;d<this.V37g.length;d++)if(this.V15w(this.V37g[d].time,c)&&(0!=c&&this.modules[b].getKernel().executeGameAction(this.V37g[d].type,this.V37g[d].action),
this.modules[b].boardArea&&this.modules[b].boardArea.canvas&&this.modules[b].boardArea.canvas.requestRedraw(),60<=c-this.modules[b].lastSnippedViewed)){var e=this.modules[b].getKernel().V3bl.videoid;if(e){var f=Math.floor(c)/60,f=Math.floor(f);this.modules[b].endEventFired=!1;var g="",h="";V3c6.isLoggedIn()&&V3c6.V3bg.userName&&(h=V3c6.V3bg.userName);h&&(g=encodeURIComponent(h));0<f&&(this.V14p=V3c6.config.V14q()[0],e=this.V14p+"Replay/AddSnippetViewed?id="+encodeURIComponent(e)+"&time="+f+"&user="+
g,$.get(e,function(c){"undefined"===typeof this.V34p[b].loginOk&&c&&0!=c.localeCompare("Ok")&&(this.V34p[b].videoManager.pause(),0==c.localeCompare("Expert")?this.V37h("You have to purchase this video in order to watch it",b):this.V37i(b))}.bind(this)).fail(function(){alert("onsnippedviewed")}.bind(this)))}this.modules[b].lastSnippedViewed=c}};g.prototype.V37i=function(b){this.V34p[b].videoManager.pause();(new CB.V33w).V33x("Login with premium account",function(c){V3c6.V3bg.userName=c.idUser;V3c6.V3bg.password=
c.idPassword;V3c6.V3bg.loginMode=CB.LoginMode.NORMAL;(new CB.V1t9(V3c6.V2a9)).pwLogin(V3c6.V3bg.userName,V3c6.V3bg.password,this.receiveTokenHandler.bind(this),b)}.bind(this),function(c){this.V34p[b].videoManager.disable()}.bind(this),"")};g.prototype.receiveTokenHandler=function(b,c){"error"!=b&&"OK"==b.Result&&3<=b.HighestSubscr?(V3c6.setLoggedIn(!0),this.V34p[c].videoManager.play(),this.V34p[c].loginOk=!0):this.V34p[c].videoManager.disable()};g.prototype.V371=function(b,c){this.modules[b].endEventFired=
!0;this.V14p=V3c6.config.V14q()[0];var d=this.V14p+"Replay/GetNextIdAtEnd?id="+encodeURIComponent(c)+"&fen="+encodeURIComponent(this.modules[b].getKernel().game.getCurPos().toFEN());$.get(d,function(c){if(c){var d=c.ID,e=c.MSG;2<e.length?this.V37h(e,b):"3"==c.STATE?(this.V37h("please try again",b),this.gameKernel.V3bl.V162()):2<d.length&&(this.V34p[b].videoManager.restart(),this.V37j(b,d))}}.bind(this)).fail(function(){this.resizePlugin($(pluginDiv),n)}.bind(this))};g.prototype.V37j=function(b,c){for(var d=
0;d<this.modules[b].videoDatabase.Items.length;d++)this.modules[b].videoDatabase.Items[d].Id===c&&this.V37b(this.modules[b].videoDatabase.Items[d].Name,b);this.V37k(c,b,this.V37l.bind(this))};g.prototype.V37d=function(b,c,d,e){if(0<b.results.length&&!b.results[c].Private){var f=b.results[c].StreamId;this.V37b(b.results[c].ID,d);this.V37m(f,d,e);e=this.modules[d].ticket;if(f=this.modules[d].getKernel())f.idGame&&V3c6.lobby.V2zd(f.idGame,e),f.idGame=b.results[c].GameId;this.chat[d]&&this.chat[d].clear();
V3c6.lobby.V2zc(f.idGame,e);(new CB.Timer(function(){V3c6.lobby.V2zg(d,b.results[c].GameId)}.bind(this))).runOnce(500)}};g.prototype.V379=function(b,c,d,e){var f=b.Items[c].Id;this.V37b(b.Items[c].Name,d);this.V37k(f,d,e)};g.prototype.V37m=function(b,c,d){(this.modules[c].getKernel().V3bl.videoid=b)&&this.V34q[c]&&(this.V34q[c].videoManager.setUrl(b),d("",c))};g.prototype.V37k=function(b,c,d){this.modules[c].lastSnippedViewed=0;(this.modules[c].getKernel().V3bl.videoid=b)&&this.V34p[c]&&this.V34p[c].videoManager.loadVideoFromId(b);
this.V37n(c);var e="";V3c6.isLoggedIn()&&V3c6.V3bg.userName&&(e=V3c6.V3bg.userName);e&&(e=encodeURIComponent(e));this.V14p=V3c6.config.V14q()[0];$.get(this.V14p+"Replay/GetGameActions?id="+b+"&user="+e,function(b){b&&d(b,c)}.bind(this)).fail(function(){this.resizePlugin($(pluginDiv),c)}.bind(this))};g.prototype.getResIcon=function(b){switch(b){case 2:return"win";case 1:return"draw";case 0:return"loss"}};g.prototype.V37o=function(b){switch(b){case CB.Vlw.EQUAL:return"equal";case CB.Vlw.Vly:return"blackslightly";
case CB.Vlw.BLACK_BETTER:return"blackbetter";case CB.Vlw.BLACK_WINS:return"blackwins";case CB.Vlw.WHITE_WINS:return"whitewins";case CB.Vlw.WHITE_BETTER:return"whitebetter";case CB.Vlw.Vlx:return"whiteslightly"}};g.prototype.isLive=function(b){return this.modules[b].mode==CB.ReaderMode.LIVE};g.prototype.V37p=function(b){return this.modules[b].mode==CB.ReaderMode.DIAGRAM};g.prototype.V37q=function(b){return this.modules[b].mode==CB.ReaderMode.TABLE};g.prototype.V37r=function(b){return this.modules[b].mode==
CB.ReaderMode.PAIRING};g.prototype.V357=function(b){return this.modules[b].mode==CB.ReaderMode.VIDEO};g.prototype.V356=function(b){return this.modules[b].mode==CB.ReaderMode.LIVEVIDEO};g.prototype.V366=function(b){return this.isVerti||CB.V5t.V64()&&!CB.V5t.V68()||700>window.innerHeight||1340>window.innerWidth||CB.V5t.V6c()?!1:this.modules[b].mode==CB.ReaderMode.LIVE||this.modules[b].mode==CB.ReaderMode.LIVEVIDEO};g.prototype.V364=function(b){return 0<=b&&(this.V357(b)||this.V356(b))||0<=b&&this.modules[b].noBook||
CB.V5t.V6c()||!CB.V5t.runsOnChessBaseDomain()?!1:!CB.V5t.V64()||800<window.innerHeight&&1500<window.innerWidth};g.prototype.V360=function(b){return(this.V37s()||CB.V5t.V73())&&1E3<window.innerWidth&&700<window.innerHeight};g.prototype.V37t=function(b){return $("#cbcaption"+b).height()};g.prototype.V37u=function(b){return 0};g.prototype.V37b=function(b,c){$("#cbcaption"+c).text(b)};g.prototype.V37v=function(b,c){this.V37b(b.hdr.getStrPlayers(!1,99),c)};g.prototype.V1mu=function(){return this.V364(this.V32r)};
g.prototype.V1mo=function(b,c){var d=function(b,c){var d=0,e=0,f=0,g=0,h=/([0-9]*)\.?([0-9]*)/i;if("number"===typeof b)d=b;else{var l=b.match(h);l[1]&&(d=parseInt(l[1]));l[2]&&(f=parseInt(l[2]))}"number"===typeof c?e=c:(h=c.match(h),h[1]&&(e=parseInt(h[1])),h[2]&&(g=parseInt(h[2])));return 100*e+g-100*d-f},e=[];420>b?e=[{name:"White",type:"text",width:Math.floor(.25*b)},{name:"EloW",type:"text",width:Math.floor(.11*b)},{name:"Black",type:"text",width:Math.floor(.25*b)},{name:"EloB",type:"text",width:Math.floor(.11*
b)},{name:"Res",type:"text",width:Math.floor(.1*b)}]:580>b?(e=[{name:"White",type:"text",width:Math.floor(.23*b)},{name:"EloW",type:"number",width:Math.floor(.09*b)},{name:"Black",type:"text",width:Math.floor(.23*b)},{name:"EloB",type:"number",width:Math.floor(.09*b)},{name:"Res",type:"text",width:Math.floor(.1*b)}],c||e.push({name:"ECO",type:"text",width:Math.floor(.05*b)})):(e=[{name:"White",type:"text",width:Math.floor(.1*b)},{name:"EloW",type:"number",width:Math.floor(.05*b)},{name:"Black",type:"text",
width:Math.floor(.1*b)},{name:"EloB",type:"number",width:Math.floor(.05*b)},{name:"Res",type:"text",width:Math.floor(.04*b)}],c||(e.push({name:"Year",type:"number",width:Math.floor(.05*b)}),e.push({name:"ECO",type:"text",width:Math.floor(.045*b)})),e.push({name:"Event",type:"text",width:Math.floor(.16*b)}));360<b&&((420<b||!c&&400<b)&&e.push({name:"Rnd",type:"number",width:Math.floor(.04*b),sorter:d}),600<b&&e.push({name:"Len",type:"number",width:Math.floor(.03*b)}),c&&(e=[{name:"Stat",type:"staticon",
width:Math.min(30,Math.floor(.05*b))}].concat(e)));e.forEach(function(b){"White"==b.name||"Black"==b.name?b.css="jsg-player":"EloW"==b.name||"EloB"==b.name?(b.css="jsg-elo",b.align="center"):"ECO"==b.name?(b.css="jsg-eco",b.align="center"):"Res"==b.name&&(b.css="jsg-result",b.align="center",c&&(b.type="resicon",b.css="jsg-icon"));"Event"==b.name&&(b.css="jsg-event")});return e};g.prototype.V37a=function(b,c){var d=[],d=[{name:"Duration",type:"text",width:Math.floor(.2*b)},{name:"Name",type:"text",
width:Math.floor(.6*b)}];d.forEach(function(b){"Name"==b.name?b.css="jsg-name":"Duration"==b.name?b.css="jsg-duration":"Created"==b.name&&(b.css="jsg-created")});return d};g.prototype.V37e=function(b,c){var d=[],d=[{name:"Name",type:"text",width:Math.floor(.6*b)}];d.forEach(function(b){"Name"==b.name&&(b.css="jsg-name")});return d};g.prototype.resizePlugin=function(b,c){this.V37p(c)?this.V1gw(b,c):this.V37q(c)?this.V35u(b,c):this.V37r(c)?this.V37w(b,c):this.V355()?this.V37x(b,c):this.V37y(b,c);this.isLive(c)&&
this.V37z(c)};g.prototype.V37y=function(b,c){if(b&&this.modules&&this.modules[c]){var d=this.V37t(c);d?(d+=this.V37u(c),$("#rootParent"+c).height("calc( 100% - "+d+"px )")):$("#rootParent"+c).height("100%");var d=this.getGameCount(c),e=1<d;this.V356(c)&&(e=!0);$(b).find(".cbmove").filter(":last");900<$(b).scrollTop()&&this.V33a()&&this.V331!=c&&$(b).css("width","112%");this.V380(c,e);CB.V5t.V68()?$("#b-btnSave-"+c).show():$("#b-btnSave-"+c).hide();var f=this.V381().getLineHBoard(),g=b.width(),h=b.height(),
l=this.V382(c,$("#westSouth"+c).height(),e),q=e?.72*h-f-l:h-f-l;400>q&&(q=400);q>.5*g&&(q=.5*g,e||(l=h-f-q));q=g-(g-q);$("#east"+c)[0].style.height="100%";$("#west"+c)[0].style.height="100%";this.V383(c);this.chat[c]&&this.chat[c].resize();this.book[c]&&this.book[c].resize();$("#boardHolder"+c)[0].style.width="100%";$("#boardHolder"+c)[0].style.height="calc( 100% - "+f+"px )";$("#belowBoard"+c)[0].style.width="100%";$("#belowBoard"+c)[0].style.height=f+2+"px";$("#buttons"+c)[0].style.width="100%";
$("#buttons"+c)[0].style.height="100%";var f=$("#boardHolder"+c).width(),r=$("#boardHolder"+c).height();if(this.modules[c].boardArea&&!this.modules[c].boardArea.canvas)if(this.isLive(c))this.V384(c);else{var t={topDist:V3c6.config.V1ac,bottomDist:V3c6.config.V1ac,marginDistDivisor:26.5,shiftXPercent:-1.7,minWForCoordinates:240,boardShadow:!0};this.modules[c].boardArea.createCanvas(this.modules[c].getKernel(),t);this.modules[c].getKernel().boardWin.onReadyHandlers.add(this.modules[c].onBoardReady.bind(this.modules[c]))}this.V385(c,
f,r);this.V336(c,f,r,700);this.V386(c,e,l,d,q);this.V387(g,h,c);this.V33d("b",this.V34r[c],this.V381().getBtnHBoard(),this.V381().getCssBoard(),c,"Reader");this.V33d("n",this.V388,this.V381().btnHNota,this.V381().getCssNota(),c,"Reader");this.V389(c);this.V38a(c);$("#eastUpDownNest"+c).jqxSplitter("refresh")}};g.prototype.V389=function(b){var c=CB.$("#notaparent"+b).single();this.modules[b].nota.setSize(c.offsetWidth,c.offsetHeight)};g.prototype.V38a=function(b){if(this.V356(b)){if(this.V34q){var c=
CB.$("#videoparent"+b).single(),d=c.offsetWidth,c=c.offsetHeight;this.V34q[b].resize(d,c)}}else this.V357(b)&&this.V34p&&(c=CB.$("#videoparent"+b).single(),d=c.offsetWidth,c=c.offsetHeight,this.V34p[b].resize(d,c))};g.prototype.V37x=function(b,c){if(b&&this.modules&&this.modules[c]){$(b).css("width","100vw");CB.V5t.V73()?$(b).css("height","80vh"):CB.V5t.V72()?CB.V5t.V67()?$(b).css("height","100vh"):$(b).css("height","92vh"):$(b).css("height","100vh");$(b).css("min-width","300px");$(b).css("min-height",
"300px");$(b).find(".cbmove").filter(":last");this.V33a()&&$(b).css("height",.8*window.innerHeight+"px");var d=this.getGameCount(c),e=1<d;this.V356(c)&&(e=!0);e||this.V38b(c,e);this.V380(c,e);var f=this.V381().getLineHBoard();this.V381();var g=b.width(),h=b.height(),l=0;this.V38c(c)&&(l=$("#tabNavButtons"+c).height());$("#tabNavButtons"+c).width();var q=$("#north"+c).height(),r=q-f-1;$("#boardHolder"+c)[0].style.width="100%";$("#boardHolder"+c)[0].style.height=r+"px";$("#belowBoard"+c)[0].style.width=
"100%";$("#belowBoard"+c)[0].style.height=f+"px";$("#buttons"+c)[0].style.width="100%";$("#buttons"+c)[0].style.height="100%";this.modules[c].boardArea.canvas||this.modules[c].boardArea.createCanvas(this.modules[c].getKernel(),{topDist:2.3*V3c6.config.V1ac,bottomDist:V3c6.config.V1ac,marginDistDivisor:26.5,shiftXPercent:-1.7,minWForCoordinates:240,boardShadow:!0,addTitle:!0,noClock:!this.isLive(c)});f=$("#boardHolder"+c).width();r=$("#boardHolder"+c).height();this.V336(c,f,r,800);this.V38d(c)?(l=
h-l,this.V357(c)||this.V356(c)?this.V38e(c,e,0,d,g-6,l-q-12):this.V38f(c,e,0,d,g-6,l-q-12)):(this.V34v[c]=!1,$("#listParent"+c).hide());this.V387(g,h,c);this.V33d("b",this.V34r[c],this.V381().getBtnHBoard(),this.V381().getCssBoard(),c,"Reader");this.V33d("n",this.V388,this.V381().btnHNota,this.V381().getCssNota(),c,"Reader");$("#buttons"+c)[0].style.width="100%";$("#buttons"+c)[0].style.height=32;this.V38g(c)?this.V38h(b,c,h-q-12):this.V34w[c]=!1;this.V38i(c)&&this.V38j(b,c)}};g.prototype.V38c=function(b){return 1<
this.getGameCount(b)||this.V356(b)};g.prototype.V38k=function(b,c){c?$("#tabNavButtons"+b)[0].style.height="32px":$("#tabNavButtons"+b)[0].style.height="0px"};g.prototype.V38l=function(b,c){if(b&&this.modules&&this.modules[c]){var d=this.getGameCount(c),e=1<d;this.V356(c)&&(e=!0);$(b).find(".cbmove").filter(":last");900<$(b).scrollTop()&&this.V33a()&&this.V331!=c&&$(b).css("width","112%");$(b).css("height","240vw");$("#b-btnSave-"+c).hide();this.V380(c,e);e||$("#southNest"+c).jqxSplitter({showSplitBar:!1,
panels:[{size:"100%"},{size:"0%"}]});var f=this.V381().getLineHBoard();this.V381();var g=b.width(),h=b.height();500>g&&($(b).css("width","100vw"),g=b.width(),$(b).css("min-width","100px"),$(b).css("max-width","1000px"));$("#south"+c)[0].style.width="100%";$("#north"+c)[0].style.width="100%";$("#southNorth"+c).height();$("#notaEl"+c).css("font-size",this.V38m()&&1E3<window.innerWidth?"1.1em":"0.8em");$("#boardHolder"+c)[0].style.width="100%";$("#boardHolder"+c)[0].style.height="calc( 100% - "+f+"px )";
$("#belowBoard"+c)[0].style.width="100%";$("#belowBoard"+c)[0].style.height=f+2+"px";$("#buttons"+c)[0].style.width="100%";$("#buttons"+c)[0].style.height="100%";this.modules[c].boardArea.canvas||this.modules[c].boardArea.createCanvas(this.modules[c].getKernel(),{topDist:V3c6.config.V1ac,bottomDist:V3c6.config.V1ac,marginDistDivisor:26.5,shiftXPercent:-1.7,minWForCoordinates:240,boardShadow:!0});var f=$("#boardHolder"+c).width(),l=$("#boardHolder"+c).height();this.V336(c,f,l,1E3);this.V38n(c,e,0,
d,b.width());this.V387(g,h,c);this.V33d("b",this.V34r[c],this.V381().getBtnHBoard(),this.V381().getCssBoard(),c,"Reader");this.V33d("n",this.V388,this.V381().btnHNota,this.V381().getCssNota(),c,"Reader");this.V389(c);this.V38a(c)}};g.prototype.V380=function(b,c){var d=!1,e=$("#buttons"+b).width();(this.isLive(b)||c)&&(600<e||this.V355())?($("#b-btnLoadNext-"+b).show(),$("#b-btnLoadPrev-"+b).show(),$("#n-btnLoadNext-"+b).show(),$("#n-btnLoadPrev-"+b).show(),d=!0):($("#b-btnLoadNext-"+b).hide(),$("#b-btnLoadPrev-"+
b).hide(),$("#n-btnLoadNext-"+b).hide(),$("#n-btnLoadPrev-"+b).hide());550<e||this.V355()?$("#b-btnGoBegin-"+b).show():$("#b-btnGoBegin-"+b).hide();550<e||this.V355()&&!d?$("#b-btnGoEnd-"+b).show():$("#b-btnGoEnd-"+b).hide()};g.prototype.V38b=function(b,c){c||$("#t-btnSelList-"+b).hide()};g.prototype.V337=function(b,c,d){this.V32q[b]&&this.V32q[b].stop();this.modules[b].boardArea.setSize(c,d);this.modules[b].multiBoard&&(this.V385(b,c,d),this.modules[b].multiBoard.resize(c,d))};g.prototype.V385=function(b,
c,d){if(this.modules[b].multiBoard&&!(100>d)){var e=1;c/=d;160<d&&1.25<c&&(e=1.9<c||800<d?2.3<c?3.3<c||600<d?9:7:2.3<c&&450<d||800<d?7:5:480<d&&(1.8<c||900<d)?5:3);d=this.modules[b].changeNKernels(e,this);if(e>d){c=0;for(var f=d;c<e-d&&f<this.modules[b].list.length;f++){var g=this.modules[b].list[f].id;this.V38o(b,g)||(B(g,b),c++)}}}};g.prototype.V38o=function(b,c){for(var d=0;d<this.modules[b].kernel.length;d++)if(this.modules[b].kernel[d].idGame==c)return!0;return!1};g.prototype.V384=function(b){var c=
this.modules[b].boardArea.createCanvas({createControl:function(b,c,d){var e=this.V33i();e.suppressCalcGeometry=!0;b=new CB.V1kv(b,c,d,e);b.V1l8=this.V1l8.bind(this);b.V1l3=this.V38p.bind(this);return b}.bind(this),onControlReady:function(){V3c6.V1ix||(V3c6.V1ix=new CB.ChessAudio(V3c6.config.V298()+"Media/Sounds/"),(new CB.Timer(function(){V3c6.V1ix.V1jn()})).runOnce(5E3))}},this.V33i()),d=this.V38q(c,this.V33i());this.modules[b].getKernel().setBoardWin(d);this.modules[b].getKernel().V3bl.createGUIElements(d);
this.modules[b].boardArea.setVisible(!0);c=c.control;this.modules[b].multiBoard=c;c.addBoard(d,null)};g.prototype.V38q=function(b,c){var d=new CB.Vkl(b,100,100,"FirstB",c);d.animSteps={forMove:2,forPosition:2};CB.V5t.V64()&&(d.animSteps={forMove:.6,forPosition:.5});d.V1dk=!0;d.allowInput=!0;return d};g.prototype.V1l8=function(b,c){1==this.pluginCnt&&(this.V32r=0);0<=this.V32r&&this.V38r(this.V32r);this.changeSelectedGameKernel(b)};g.prototype.V38p=function(b,c){1==this.pluginCnt&&(this.V32r=0);0<=
this.V32r&&this.trySwapWithBigBoard(b,this.V32r,!0);c.preventDefault()};g.prototype.changeSelectedGameKernel=function(b){if(!(0>this.V32r)){var c=this.modules[this.V32r];try{c.getKernel().releaseCommandHandlers();c.selectKernelByIdGame(b);var d=c.getKernel();d.linkCommandHandlers();var e=d.game,f=this.modules[this.V32r].nota;e&&f&&(f.setGame(e),d.forceTBUpdate=!0,d.boardWin&&(d.nextCurPosNoAnim=!1),e.fireOnCurPosChanged(),e.fireOnNavigate());c.multiBoard&&c.multiBoard.markBoardByGameId&&c.multiBoard.markBoardByGameId(b);
this.V38s(this.V32r,b,"watch");d.boardWin&&(d.boardWin.markLastMove(!1,!0),V3c6.aTBLobby.Vrg()&&(V3c6.aTBLobby.V2fo(b,d.getCurPos(),this.V38t.bind(this)),d.boardWin.setEvaluationInvalid()))}catch(g){CB.V46("RWM:chngSelectedKernel",g)}}};g.prototype.V387=function(b,c,d){b>.9*window.innerWidth&&c>.9*window.innerHeight&&this.V331!=d?$("#b-btnFullScreen-"+d).hide():$("#b-btnFullScreen-"+d).show()};g.prototype.V383=function(b){var c=this.V381().lineHNota;$("#eastNest"+b)[0].style.height="100%";$("#eastLayer"+
b)[0].style.height="100%";$("#eastUpDownNest"+b)[0].style.height="100%";$("#eastUpDownNest"+b)[0].style.width="100%";this.V366(b)||($("#eastNest"+b)[0].style.width="100%");this.V364(b)||this.V357(b)||this.V356(b)||($("#notaNest"+b)[0].style.height="100%");var d=$("#notaNest"+b).height()-c;$("#notaparent"+b)[0].style.height=d+"px";if(this.V357(b)||this.V356(b)){var e=$("#videoNest"+b).height();$("#videoparent"+b)[0].style.height=e-20}$("#notaEl"+b).css("font-size",this.V38m()&&1E3<window.innerWidth?
"1.3em":"0.9em");$("#belowNota"+b)[0].style.width="calc( 100% + 1px )";$("#belowNota"+b)[0].style.height=c+"px";$("#belowNota"+b)[0].style.top=d+"px"};g.prototype.V382=function(b,c,d){c=Math.max(Math.min(c,50),d?Math.min(.35*c,90):Math.min(.35*c,110));!this.modules[b].engineOpen&&d&&(c=0);return c};g.prototype.getGameCount=function(b){return this.modules[b].livevideoDatabase?this.modules[b].livevideoDatabase.results.length:this.modules[b].videoDatabase?this.modules[b].videoDatabase.Items.length:this.modules[b].pgnDatabase?
this.modules[b].pgnDatabase.getGameCount():this.modules[b].requestData&&this.modules[b].requestData.isList()?Math.max(2,this.modules[b].list.length):0};g.prototype.V386=function(b,c,d,e,f){c?$("#engineParent"+b)[0].style.height=d+"px":$("#engineParent"+b)[0].style.height="100%";$("#engineParent"+b)[0].style.width="100%";this.modules[b].engineOpen||!c?($("#engineParent"+b).show(),!c&&$("#replayinfo"+b)[0]&&($("#replayinfo"+b)[0].style.height="100%")):($("#engineParent"+b).hide(),d=0);$("#listParent"+
b)[0].style.width="100%";$("#listParent"+b)[0].style.height="calc( 100% - "+d+"px )";c&&this.V1mp&&($("#listParent"+b).jsGrid("option","height","calc( 100% - "+d+"px )"),$("#listParent"+b).jsGrid("option","width","100%"),$("#listParent"+b).jsGrid("option","heading",!0),this.V356(b)?$("#listParent"+b).jsGrid("option","fields",this.V37e(this.V375(b),this.isLive(b))):this.V357(b)?$("#listParent"+b).jsGrid("option","fields",this.V37a(this.V375(b),this.isLive(b))):$("#listParent"+b).jsGrid("option","fields",
this.V1mo(this.V375(b),this.isLive(b))))};g.prototype.V38f=function(b,c,d,e,f,g){$("#engineParent"+b).hide();$("#listParent"+b)[0].style.height=g+"px";$("#listParent"+b)[0].style.width=f+"px";c&&this.V1mp&&($("#listParent"+b).jsGrid("option","height",g+"px"),$("#listParent"+b).jsGrid("option","width",f+"px"),$("#listParent"+b).jsGrid("option","heading",!0),this.V356(b)?$("#listParent"+b).jsGrid("option","fields",this.V37e(f,this.isLive(b))):this.V357(b)?$("#listParent"+b).jsGrid("option","fields",
this.V37a(f,this.isLive(b))):$("#listParent"+b).jsGrid("option","fields",this.V1mo(f,this.isLive(b))))};g.prototype.V38e=function(b,c,d,e,f,g){$("#engineParent"+b).hide();$("#videoParent"+b)[0].style.height=g-34+"px";$("#videoParent"+b)[0].style.width=f+"px";this.V38a(b);$("#listParent"+b)[0].style.height=g+"px";$("#listParent"+b)[0].style.width=f+"px";c&&this.V1mp&&($("#listParent"+b).jsGrid("option","height",g+"px"),$("#listParent"+b).jsGrid("option","width",f+"px"),$("#listParent"+b).jsGrid("option",
"heading",!0),this.V356(b)?$("#listParent"+b).jsGrid("option","fields",this.V37e(f,this.isLive(b))):this.V357(b)?$("#listParent"+b).jsGrid("option","fields",this.V37a(f,this.isLive(b))):$("#listParent"+b).jsGrid("option","fields",this.V1mo(f,this.isLive(b))))};g.prototype.V38n=function(b,c,d,e,f){$("#engineParent"+b).hide();$("#listParent"+b)[0].style.width="100%";$("#listParent"+b)[0].style.height="100%";c&&this.V1mp&&($("#listParent"+b).jsGrid("option","height","100%"),$("#listParent"+b).jsGrid("option",
"width","100%"),$("#listParent"+b).jsGrid("option","heading",!0),$("#listParent"+b).jsGrid("option","fields",this.V1mo(f,this.isLive(b))))};g.prototype.V38h=function(b,c){var d=0,e;this.V38c(c)&&(d=$("#tabNavButtons"+c).height());e=$("#tabNavButtons"+c).width();var f=$("#north"+c).height(),g=$(b).height()-f,f=this.V381().lineHNota;if(this.V357(c)||this.V356(c))$("#videoparent"+c).css("height",g-d),$("#videoparent"+c).css("width",e+1);$("#notaEl"+c).css("height",g-f);$("#notaEl"+c).css("font-size",
this.V38m()&&1E3<window.innerWidth?"1.1em":"0.9em");g=$("#south"+c).height()-d;$("#notaEl"+c).css("height",g);this.modules[c].nota.setSize(e,g);this.modules[c].nota.scrollCurElemIntoView()};g.prototype.V38j=function(b,c){var d;this.V38c(c)&&$("#tabNavButtons"+c).height();d=$("#tabNavButtons"+c).width();$("#north"+c).height();var e=$("#south"+c).height();$(b).height();if(this.V357(c)||this.V356(c))$("#videoParent"+c)[0].style.height=e-34+"px",$("#videoparent"+c).css("height",e-34),$("#videoparent"+
c).css("width",d+1),this.V38a(c)};g.prototype.V375=function(b){return $("#listParent"+b).width()};g.prototype.V38u=function(b){return $("#boardHolder"+b).width()};g.prototype.V376=function(b){this.V355()?this.V36w(b):this.V36r(b)};g.prototype.V36r=function(b){var c=$("#boardHolder"+b).width(),d=$("#boardHolder"+b).height();$("#belowBoard"+b).height();if(this.V338(c,d,b)){this.modules[b].boardArea&&this.V337(b,c,d);d=1<this.getGameCount(b);this.V356(b)&&(d=!0);var e=$("#engineParent"+b).height();$("#listParent"+
b)[0].style.height="calc( 100% - "+e+"px )";this.V380(b,d);d&&this.V1mp&&($("#listParent"+b).jsGrid("option","height","calc( 100% - "+e+"px )"),this.V356(b)?$("#listParent"+b).jsGrid("option","fields",this.V37e(c,this.isLive(b))):this.V357(b)?$("#listParent"+b).jsGrid("option","fields",this.V37a(c,this.isLive(b))):$("#listParent"+b).jsGrid("option","fields",this.V1mo(c,this.isLive(b))));this.V389(b);this.V38a(b);this.chat[b]&&this.chat[b].resize();this.isLive(b)&&this.V37z(b);this.book[b]&&this.book[b].resize();
this.V38v("root",b);this.V38v("westNest",b)}};g.prototype.V38w=function(b){this.V38x("root",b)};g.prototype.V38y=function(b){this.V38x("westNest",b)};g.prototype.V38z=function(b){this.V38x("eastNest",b)};g.prototype.V390=function(b){this.V38x("eastUpDownNest",b)};g.prototype.V36q=function(b,c){if(this.V357(c)||this.V356(c))return null;var d=this.isLive(c)?"live":"",e=V3c6.V3bg.load(b+"size"+d);V3c6.V3bg.load(b+"coll"+d);return{size:parseFloat(e),coll:!1}};g.prototype.V38v=function(b,c){try{var d=
$("#"+b+c);if(d.length){var e=this.isLive(c)?"live":"",f=$(d).jqxSplitter("panels");f[0]&&V3c6.V3bg.save(b+"size"+e,f[0].size)}}catch(g){CB.V46("RWM:saveSplitSize",g)}};g.prototype.V38x=function(b,c){};g.prototype.V36w=function(b){var c=0;this.V38c(b)&&(c=$("#tabNavButtons"+b).height());$("#tabNavButtons"+b).width();var d=this.V381().getLineHBoard(),e=$("#north"+b).height()-d-1;$("#boardHolder"+b)[0].style.width="100%";$("#boardHolder"+b)[0].style.height=e+"px";$("#belowBoard"+b)[0].style.width="100%";
$("#belowBoard"+b)[0].style.height=d+"px";$("#buttons"+b)[0].style.width="100%";$("#buttons"+b)[0].style.height="100%";c=$("#south"+b).height()-c;$("#notaEl"+b).css("height",c);this.modules[b].nota&&this.V389(b);c=$("#boardHolder"+b).width();d=$("#boardHolder"+b).height();$("#belowBoard"+b).height();this.modules[b].boardArea&&this.V337(b,c,d);d=1<this.getGameCount(b);this.V356(b)&&(d=!0);$("#engineParent"+b)&&$("#engineParent"+b).height();$("#listParent"+b)[0].style.height="100%;";d&&this.V1mp&&(this.V356(b)?
$("#listParent"+b).jsGrid("option","fields",this.V37e(c,this.isLive(b))):this.V357(b)?$("#listParent"+b).jsGrid("option","fields",this.V37a(c,this.isLive(b))):$("#listParent"+b).jsGrid("option","fields",this.V1mo(c,this.isLive(b))));this.modules[b].getKernel().game.fireOnChanged();this.modules[b].getKernel().game.fireOnHeaderChanged({recalc:!0})};g.prototype.V391=function(b,c){var d=$(c).width(),e=this.getGameCount(b),f=1<e;this.V356(b)&&(f=!0);var g=$("#engineParent"+b).height();f&&this.V1mp&&$("#listParent"+
b).jsGrid("option","fields",this.V1mo(d,this.isLive(b)));this.V386(b,f,g,e,d);this.modules[b].getKernel().game.fireOnChanged();this.modules[b].getKernel().game.fireOnHeaderChanged({recalc:!0})};g.prototype.V36s=function(b){this.V383(b);this.chat[b]&&this.chat[b].resize();this.book[b]&&this.book[b].resize();this.V34p[b]&&this.V34p[b].resize();this.V389(b);this.V38a(b);this.V38v("eastNest",b)};g.prototype.V36t=function(b){this.V383(b);this.book[b]&&this.book[b].resize();this.V38v("eastUpDownNest",b)};
g.prototype.V36b=function(b){this.V383(b);this.V38a(b);this.V38v("eastUpDownNest",b)};g.prototype.V381=function(){function b(){return 100<window.innerHeight&&100<window.innerWidth}return CB.V5t.V64()?{getLineHBoard:function(){return b()?60:44},getBtnHBoard:function(){return b()?48:32},getBtnHDiagram:function(c){return b()?32:24},lineHNota:42,btnHNota:32,getCssBoard:function(){return b()?"toolBtn toolBtn48":"toolBtn toolBtn32"}.bind(this),getCssDiagrams:function(c){return b()?"toolBtn toolBtn32":"toolBtn toolBtn24"}.bind(this),
getCssNota:function(){return"toolBtn toolBtn32"}.bind(this),getCssEngine:function(){return"toolBtn toolBtnV16"}.bind(this),getCssTabNav:function(){return"tabNavBtn tabNavBtn32"}.bind(this)}:{getLineHBoard:function(){return 800<window.innerHeight?44:34}.bind(this),getBtnHBoard:function(){return 800<window.innerHeight?32:24}.bind(this),getBtnHDiagram:function(b){return 300<b?24:16},lineHNota:34,btnHNota:24,getCssBoard:function(){return 800<window.innerHeight?"toolBtn toolBtn32":"toolBtn"}.bind(this),
getCssDiagrams:function(b){return 300<b?"toolBtn toolBtn24":"toolBtn toolBtn16"}.bind(this),getCssNota:function(){return"toolBtn"}.bind(this),getCssTabNav:function(){return"tabNavBtn tabNavBtn16"}.bind(this),getCssEngine:function(){return"toolBtn toolBtnV16"}.bind(this)}};g.prototype.V1gw=function(b,c){if(b){var d=400,e=b[0].dataset.size;e&&(d=e);$("#aboveDiag"+c).width(d);$("#belowDiag"+c).width(d);d>.9*window.innerWidth&&(d=.9*window.innerWidth,$(b.width(d)));e=d;d=.8*e;console.log("diag width ="+
e+", n="+c);$("#diagarea"+c).width(e);$("#diagarea"+c).height(d);this.modules[c].boardArea.canvas||(this.modules[c].boardArea.createCanvas(this.modules[c].getKernel(),{topDist:0,bottomDist:0,marginDistDivisor:0,shiftXPercent:-1.65,minWForCoordinates:200,transparent:!0}),this.modules[c].getKernel().boardWin.onReadyHandlers.add(this.modules[c].onBoardReady.bind(this.modules[c])));$("#diagarea"+c)[0]&&this.modules[c]&&this.modules[c].boardArea&&this.V337(c,e-1,d-1);this.V33d("d",this.V34s[c],this.V381().getBtnHDiagram(d),
this.V381().getCssDiagrams(d),c,"Reader");d=$("#diagButtons"+c);e=$("#diagText"+c);d&&d.height();e&&e.height()}};var r=function(b,c){b.css("font-size",c+"em")};g.prototype.V35u=function(b,c){var d=this.modules[c].ranking;if(d){b=$(b);b.html("");var e=b.width(),d=d.toHtml(e);b.append(d);$(b.children()[0]);750>e?r(b,1-(750-e)/1050):r(b,1)}};g.prototype.V37w=function(b,c){var d=this.modules[c].pairing;if(d){b=$(b);b.html("");var e=b.width(),d=d.RoundToHtml(d.round,e);b.append(d);750>e?r(b,1-(750-e)/
1200):r(b,1+(e-750)/4200)}};g.prototype.V339=function(){this.resizePlugin($($(this.V335)[this.V32r]),this.V32r)};g.prototype.V36i=function(b,c){var d=[];this.V357(c)||this.V356(c)?this.V357(c)&&(CB.V5t.V73()||(d=d.concat([{title:lm.LIKE,id:"Like",handler:this.V392.bind(this)}]))):d=d.concat([{title:lm.TAKE_BACK,id:"Retract",handler:this.V393.bind(this)},{title:lm.MAKE_MOVE,id:"Exec",handler:this.V394.bind(this)},{title:"Autoplay (Ctrl, Shift and/or Alt-key when clicking changes time)",id:"Autoplay",
handler:this.V395.bind(this)}]);400<window.innerWidth&&d.push({separator:!0});var e=$("#root0").width();!(this.V355()||880<e)||this.V357(c)||this.V356(c)||(380<=window.innerWidth&&d.push({title:"Goto Begin",id:"GoBegin",handler:this.V396.bind(this)}),380<window.innerWidth&&d.push({title:"Goto End",id:"GoEnd",handler:this.V397.bind(this)}),500<window.innerWidth&&d.push({separator:!0}),450<=window.innerWidth&&d.push({title:"Load Prev",id:"LoadPrev",handler:this.V398.bind(this)}),320<=window.innerWidth&&
d.push({title:"Load Next",id:"LoadNext",handler:this.V399.bind(this)}),500<window.innerWidth&&d.push({separator:!0}));this.V355()||d.push({title:"Maximize",id:"FullScreen",handler:this.V332.bind(this)});this.V355()||(CB.V5t.V64()||d.push({separator:!0}),d.push({title:lm.ANALYSIS_ENGINE,id:"Engine",handler:this.V39a.bind(this)}));500<e&&(d=d.concat([{}]),d.push({title:lm.FLIP_BOARD,id:"Rotate",handler:this.V39b.bind(this)}));d=d.concat([{}]);d.push({title:"Download PGN",id:"Save",handler:this.V39c.bind(this)});
1E3<window.innerWidth&&(d=d.concat([{}]),d.push({title:"Pieces",id:"Pieces",handler:this.V39d.bind(this),css:"btnPieces"}));this.V34r[c]=d;e=this.V381().getCssBoard();this.V33b("button",b,"b",d,e,c)};g.prototype.V36v=function(b,c){var d=[],d=d.concat([{title:"Notation",id:"SelNota",txt:lm.NOTATION,handler:this.fnSelectNota.bind(this)}]),d=d.concat([{title:"List",id:"SelList",txt:lm.GAMES,handler:this.V39e.bind(this)}]);if(this.V357(c)||this.V356(c))d=d.concat([{title:"Video",id:"SelVideo",txt:"Video",
handler:this.V39f.bind(this)}]);CB.V5t.V72()&&(d=d.concat([{title:"Index",id:"SelHome",txt:"Index",handler:this.V39g.bind(this)}]));this.V34t[c]=d;var e=this.V381().getCssTabNav();this.V33b("button",b,"t",d,e,c)};g.prototype.shakeFullWinBtn=function(b){$("#b-btnFullScreen-"+b).addClass("shakeShort")};g.prototype.V39h=function(b){$("#b-btnFullScreen-"+b).removeClass("shakeShort")};g.prototype.V36y=function(b,c,d){var e=[],e=e.concat([{title:lm.TAKE_BACK,id:"Retract",handler:this.V393.bind(this)},{title:lm.MAKE_MOVE,
id:"Exec",handler:this.V394.bind(this)}]);360<=$(c).width()&&(e=e.concat([{},{}]),e.push({title:lm.FLIP_BOARD,id:"Rotate",handler:this.V39b.bind(this)}));c.dataset.hint&&(e=e.concat([{}]),e.push({title:"Hint",id:"Hint",handler:function(b){this.V37h(c.dataset.hint,b)}.bind(this)}));c.dataset.solution&&e.push({title:"Solution",id:"Solution",handler:function(b){this.V39i(c.dataset.solution,b)}.bind(this)});e=e.concat([{},{}]);e.push({title:"Download FEN",id:"Save",handler:this.V39j.bind(this)});this.V34s[d]=
e;var f=this.V381().getCssDiagrams();this.V33b("button",b,"d",e,f,d)};g.prototype.V39k=function(b){this.V33h(b)};g.prototype.V39l=function(b,c){var d=$(String.f("#b-btnAutoplay-{0}",c)),e='url( "'+CB.V5p()+'Media/Ribbons/Reader/{0}{1}.png" )';b?d.css("background-image",String.f(e,"Stop",this.V381().getBtnHBoard())):d.css("background-image",String.f(e,"Autoplay",this.V381().getBtnHBoard()))};g.prototype.V39m=function(){return CB.Vs9.V258||-1!=document.URL.search(/chessbase.com/i)||-1!=document.URL.search(/localhost/i)};
g.prototype.V36d=function(b,c){var d=[];d.push({title:lm.DELETE_LINE+" (Del)",id:"DeleteLine",handler:this.V39n.bind(this)});d.push({title:lm.PROMOTE_LINE+" (Alt-up)",id:"PromoteLine",handler:this.V39o.bind(this)});d.push({title:lm.CUT_LINE+" (})",id:"CutLine",handler:this.V39p.bind(this)});d.push({title:lm.UNANNOTATE+" (Ctrl-Shift-Y)",id:"Unannotate",handler:this.V39q.bind(this)});d.push({separator:!0});d.push({title:"Undo (Ctrl-Z)",id:"Undo",handler:this.V39r.bind(this)});d.push({title:"Redo (Ctrl-Y)",
id:"Redo",handler:this.V39s.bind(this)});d.push({separator:!0});d.push({title:lm.SAVE+" (Ctrl-S)",id:"Save",handler:this.V342.bind(this)});d.push({separator:!0});d.push({title:"Check Database",id:"OnlineDB",handler:this.V39t.bind(this)});1600<window.innerWidth&&(d.push({title:"-> MyGames",id:"MyGames",handler:this.V39u.bind(this)}),d.push({title:"-> Fritz",id:"FritzOnline",handler:this.V39v.bind(this)}));1200<window.innerWidth&&d.push({title:"Live Games Running Now",id:"LiveNew",handler:this.V39w.bind(this)});
1300<window.innerWidth&&(0<document.URL.indexOf("live.chessbase")||0<document.URL.indexOf("localhost"))&&d.push({title:"Tweet this game (the board will be downloaded as png)",id:"Tweet",handler:this.V39x.bind(this)});this.V388=d;var e=this.V381().getCssNota();this.V33b("button",b,"n",d,e,c)};g.prototype.V39y=function(b,c){var d=[];this.V357(c)||this.V356(c)||(d.push({title:"Load Prev",id:"LoadPrev",handler:this.V398.bind(this)}),d.push({title:"Load Next",id:"LoadNext",handler:this.V399.bind(this)}),
d.push({separator:!0}));d.push({title:lm.UNANNOTATE+" (Ctrl-Shift-Y)",id:"Unannotate",handler:this.V39q.bind(this)});d.push({separator:!0});d.push({title:"Undo (Ctrl-Z)",id:"Undo",handler:this.V39r.bind(this)});d.push({title:lm.SAVE+" (Ctrl-S)",id:"Save",handler:this.V342.bind(this)});this.V388=d;var e=this.V381().getCssNota();this.V33b("button",b,"n",d,e,c)};g.prototype.V36k=function(b,c){var d="",e=[];e.push({title:"More Lines",id:"More",handler:function(){this.V39z(c,1)}.bind(this)});e.push({title:"Less Lines",
id:"Less",handler:function(){this.V39z(c,-1)}.bind(this)});e.push({title:"Threat",id:"Threat",handler:this.V3a0.bind(this)});for(var f=this.V381().getCssEngine(),g=0;g<e.length;g++)d+=String.f('<button title="{0}" id="e-btn{1}-{2}" class="{3}"></button>',e[g].title,e[g].id,c,f);$(b).html(d);d='url( "'+CB.V5p()+'Media/Ribbons/Reader/{0}{1}.png" )';for(g=0;g<e.length;g++)f=$(String.f("#e-btn{0}-{1}",e[g].id,c)),e[g].handler&&(f[0].onclick=function(b,c){return function(d){e[b].handler(c,d)}}.call(this,
g,c)),f.css("background-image",String.f(d,e[g].id,16))};g.prototype.V3a1=function(b,c){this.V33c[b].FullScreen=c?"FullScreen":"Restore"};g.prototype.V39c=function(b){this.V342(b,!1)};g.prototype.V342=function(b,c,d){var e="Download";if(c)b=this.modules[b].getKernel().game,c=CB.V12j.V12k(b),0<b.hdr.getStrPlayers(!1,0).length&&(e=b.hdr.getStrPlayers(!1,0)+(d||".pgn")),d=b.requiresPremiumForDownload();else{c=this.modules[b].toPgn(b);if(!c)return;e=this.modules[b].pgnTitle;d=this.modules[b].getKernel().game.requiresPremiumForDownload()}b=
CB.V5t.runsOnChessBaseCom()&&-1==document.URL.search(/view.chessbase.com/i)&&-1==document.URL.search(/cloudserver.chessbase.com/i);V3c6.isLoggedIn()||!b?d&&!V3c6.isPremium()&&b?window.location="https://live.chessbase.com/Premium?returnurl="+encodeURIComponent(document.location):(window.Blob?(console.log("Blob DL: "+e),c=new Blob([c],{type:"text/plain;charset=utf-8"}),window.saveAs(c,e)):0<CB.V5t.V6l()&&window.clipboardData&&clipboardData.setData&&(alert("On Internet Explorer the game has been pasted to the clipboard ('Strg-V')"),
clipboardData.setData("Text",c)),CB.V1gp("PGN")):window.location="https://live.chessbase.com/Logon?returnurl="+encodeURIComponent(document.location)};g.prototype.V37s=function(){return-1!=document.URL.search(/en.chessbase.com/i)||-1!=document.URL.search(/de.chessbase.com/i)||-1!=document.URL.search(/es.chessbase.com/i)||-1!=document.URL.search(/localhost/i)};g.prototype.V39j=function(b){this.V342(b,!1,".fen")};g.prototype.V35n=function(b){return V3c6.lobby.getPgn(this.modules[b].ticket)};g.prototype.V396=
function(b){this.V38r(b);this.modules[b].getKernel().game.gotoStart()};g.prototype.V397=function(b){this.V38r(b);this.modules[b].getKernel().game.gotoEnd()};g.prototype.V393=function(b){this.V38r(b);this.modules[b].getKernel().game.gotoPrev()};g.prototype.V394=function(b){if(!this.V38r(b)){var c=this.modules[b].getKernel().game.getAnno(CB.AnnoType.Vf6);c&&!c.solved||this.modules[b].getKernel().game.gotoNext()}};g.prototype.V38r=function(b){this.modules[b].runAutoplayTimer&&this.modules[b].runAutoplayTimer.stop();
return this.modules[b].timerAutoplay?!this.V395(b):!1};g.prototype.V395=function(b,c,d){if(this.modules[b].timerAutoplay)return this.modules[b].timerAutoplay.stop(),delete this.modules[b].timerAutoplay,this.modules[b].getKernel().boardWin.prepareFullRedraw(),this.modules[b].animSteps&&(this.modules[b].getKernel().boardWin.animSteps=this.modules[b].animSteps),this.modules[b].getKernel().V3bl.setIsAutoplay(!1),this.V39l(!1,b),!1;this.modules[b].getKernel().boardWin&&this.modules[b].getKernel().boardWin.animSteps&&
(this.modules[b].animSteps=this.modules[b].getKernel().boardWin.animSteps,CB.V5t.V64()?this.modules[b].getKernel().boardWin.animSteps.forMove=.3:this.modules[b].getKernel().boardWin.animSteps.forMove=3);this.modules[b].getKernel().game.getMoveNo()==this.modules[b].getKernel().game.getMainLine().length&&this.V396(b);this.V39l(!0,b);var e=d||2500;CB.V5t.V64()&&(e=1600);c&&!d&&(c.ctrlKey?(e=1300,c.altKey&&(e=c.shiftKey?200:700)):c.shiftKey?(e=5E3,c.altKey&&(e=1E4)):c.altKey&&(e=1E3));this.modules[b].getKernel().boardWin&&
this.modules[b].getKernel().boardWin.destroyMessage();this.modules[b].getKernel().V3bl.setIsAutoplay(!0);this.modules[b].getKernel().game.gotoNext();this.modules[b].timerAutoplay=new CB.Timer(function(){this.modules[b].getKernel().game.isOnLastMove()?(this.modules[b].timerAutoplay.stop(),(new CB.Timer(function(){this.modules[b].timerAutoplay&&(this.V399(b),this.modules[b].getKernel().game.gotoIndex(0),this.modules[b].timerAutoplay.runPeriodic(e))}.bind(this))).runOnce(4*e)):this.modules[b].getKernel().game.gotoNext()}.bind(this));
this.modules[b].timerAutoplay.runPeriodic(e);return!0};g.prototype.V3a2=function(b){this.modules[b].nota.handleCursorUp()};g.prototype.V3a3=function(b){this.modules[b].nota.handleCursorDown()};g.prototype.V39a=function(b){this.V39m()?(this.V32r=b,this.modules[b].getKernel().V3bl.toggleEngine()||this.V3a4()):this.modules[this.V32r].engineOpen?this.V3a4():(CB.V1gp("Engine"),this.Vsc(),this.modules[this.V32r].enginePanel.displayInfo("Sorry, you cannot run an engine in this browser yet. On Mac, please try Chrome. Thank you.",
"cbEngineWarnBrowser"))};var t=new CB.V3bs;g.prototype.V39z=function(b,c){this.modules[b].getKernel().V3bl.incNMultiVars(c);t.exec(function(){this.modules[b].getKernel().V3bl.goAll()}.bind(this),300)};var w=new CB.V3bs;g.prototype.V3a0=function(b){w.exec(function(){this.modules[b].getKernel().V3bl.toggleThreat()}.bind(this),300)};g.prototype.V39b=function(b){this.modules[b].getKernel().boardWin&&this.modules[b].getKernel().boardWin.flipBoard()};var z=0;g.prototype.V39d=function(b){this.V38r(b);b=
[CB.Vm1.V27n,CB.Vm1.V17n,CB.Vm1.V17l,CB.Vm1.V17h];z++;z>b.length-1&&(z=0);glSettings.changeBoardStyle(b[z])};g.prototype.V392=function(b){var c=this.modules[b].getKernel().V3bl.videoid;if(c){var d="";V3c6.isLoggedIn()&&V3c6.V3bg.userName&&(d=V3c6.V3bg.userName);c=this.V14p+"Replay/ToggleLike?id="+encodeURIComponent(c)+"&user="+d;$.get(c,function(c){c&&(this.V37h(c,b),this.V37n(b))}.bind(this)).fail(function(b){alert("Liked")}.bind(this))}};g.prototype.V37n=function(b){var c=this.modules[b].getKernel().V3bl.videoid;
if(c){var d="";V3c6.isLoggedIn()&&V3c6.V3bg.userName&&(d=V3c6.V3bg.userName);c=this.V14p+"Replay/GetMetaData?id="+encodeURIComponent(c)+"&user="+d;$.get(c,function(c){this.V33c[b].Like=0<c.Like.length?"Liked":"Like";this.V33d("b",this.V34r[b],this.V381().getBtnHBoard(),this.V381().getCssBoard(),b,"Reader")}.bind(this)).fail(function(b){alert("Liked")}.bind(this))}};g.prototype.V39x=function(b){if(window.Blob){b=this.modules[b].getKernel();var c=b.boardWin;if(c){var d=c.getOuterRect(),c=c.cbcanvas.ctx.getImageData(d.left,
d.top,d.w-1,d.h-1),e=b.game.hdr.getStrPlayers(!1,0)+".png";CB.V88.V8e(c,e,d.w,d.h);if(d=document.URL.split("?")[0])d+="?w="+b.game.hdr.white.last,d+="&b="+b.game.hdr.black.last,b.game.hdr.round&&(d+="&r="+b.game.hdr.round),b.game.hdr.subRound&&(d+="&r="+b.game.hdr.subRound),b.game.getMoveIndex()&&(d+="&mv="+b.game.getMoveIndex()),d=encodeURIComponent(d),c=b.game.hdr.getStrPlayers(!1,0),c+=", "+b.game.hdr.event.event+"\r\n",c=b.game.getCurPos().getBTM()?c+"Black to move.\r\n":c+"White to move.\r\n",
c=encodeURIComponent(c),window.open("https://twitter.com/intent/tweet?text="+c+("&url="+d))}}};g.prototype.V37h=function(b,c){this.modules[c].getKernel().boardWin&&(this.modules[c].getKernel().boardWin.addMessage(b,!0),(new CB.Timer(function(){this.modules[c].getKernel().boardWin.destroyMessage()}.bind(this))).runOnce(4E3))};g.prototype.V39i=function(b,c){if(this.modules[c].getKernel().boardWin&&4==b.length){var d=CB.Vbf.fromString(b.substring(0,2)),e=CB.Vbf.fromString(b.substring(2,4));this.modules[c].getKernel().boardWin.drawArrow(d,
e,"hsla( 120, 70%, 50%, 0.9 )")}};g.prototype.V398=function(b){if(this.modules[b].pgnDatabase){var c=this.modules[b].getKernel().game.gameNo-1;if(!c||1>c)c=this.modules[b].pgnDatabase.getGameCount();var d=this.modules[b].pgnDatabase.getGame(c);this.loadGame(d,b,c,!0)}else if(c=this.modules[b].getKernel().idGame)if(d=this.modules[b].list,1<d.length){for(var e=!1,f=1;!e&&f<d.length;f++)d[f].id==c&&(c=d[f-1].id,B(c,b),e=!0);e||d[d.length-1].id==c||B(d[d.length-1].id,b)}};g.prototype.V399=function(b){if(this.modules[b].pgnDatabase){var c=
this.modules[b].getKernel().game.gameNo+1;if(!c||c>this.modules[b].pgnDatabase.getGameCount())c=1;var d=this.modules[b].pgnDatabase.getGame(c);this.loadGame(d,b,c,!0)}else if(c=this.modules[b].getKernel().idGame){for(var d=this.modules[b].list,e=!1,f=0;!e&&f<d.length-1;f++)d[f].id==c&&(c=d[f+1].id,B(c,b),e=!0);e||d[0].id==c||B(d[0].id,b)}};g.prototype.V332=function(b){if(!this.V355()){this.V39h(b);var c=$(this.V335);if(c&&c[b]){var d=0,e=0;this.V331!=b&&0<=this.V331&&this.V332(this.V331);if(this.V331==
b)this.V3a1(b,!0),this.V331=-1,$(c[b]).css("max-width",this.V3a5),$(c[b]).css("max-height",this.V3a6),$(c[b]).css("box-shadow",this.V3a7),$(c[b]).width(this.V3a8),$(c[b]).height(this.V3a9),$(c[b]).offset({top:this.V3aa.top,left:this.V3aa.left}),$(c[b]).css("z-index","1"),d=this.V3a8,e=this.V3a9,$("#root"+b).jqxSplitter({panels:this.V3ab}),CB.V5t.runsOnChessBaseCom()&&$(".navbar-header").css("position","fixed");else{this.V3a1(b,!1);this.V3a8=$(c[b]).width();this.V3a9=$(c[b]).height();this.V3aa=$(c[b]).offset();
this.V3a5=$(c[b]).css("max-width");this.V3a7=$(c[b]).css("box-shadow");CB.V5t.runsOnChessBaseCom()&&$(".navbar-header").css("position","relative");$("#root"+b).jqxSplitter("panels");this.V3ab=$("#root"+b).jqxSplitter("panels");this.V331=b;d=Math.min(1900,window.innerWidth-2*Math.min(30,Math.round(.05*window.innerWidth)));e=window.innerHeight-10;if(this.V357(b)||this.V356(b))e-=340;$(c[b]).css("max-width",d);$(c[b]).css("max-height",e);$(c[b]).css("box-shadow","1px 1px 12px 2px hsla( 0, 0%, 0%, 0.35 )");
$(c[b]).width(d);$(c[b]).height(e);this.V357(b)||this.V356(b)?$(c).offset({top:window.pageYOffset+62,left:4+(window.innerWidth-d)/2}):$(c[b]).offset({top:window.pageYOffset+2,left:4+(window.innerWidth-d)/2});$(c[b]).css("z-index","100");this.V32r=b;this.V3ac(b,d,e)&&($("#root"+b).jqxSplitter({panels:[{size:"68%",collapsible:!1},{size:"32%",collapsible:!1}]}),700>e&&$("#westNest"+b).jqxSplitter({panels:[{size:"60%",collapsible:!1},{size:"40%",collapsible:!1}]}));CB.V1gp("FullWin")}$("#root"+b).jqxSplitter({width:d+
"px",height:e+"px"});this.resizePlugin($(c[b]),b);h.exec(function(){return function(){this.V376(b,this.isLive(b))}.bind(this)}.call(this,b),300);$("#root"+b).jqxSplitter("refresh");this.V3ad?$("#southNest"+b).jqxSplitter("refresh"):$("#westNest"+b).jqxSplitter("refresh");$("#eastNest"+b).jqxSplitter("refresh");$("#eastUpDownNest"+b).jqxSplitter("refresh")}}};g.prototype.V3ac=function(b,c,d){return!this.V355()&&this.isLive(b)&&1200<c&&700<d&&3<=this.modules[b].list.length};g.prototype.V38i=function(b){return this.V357(b)||
this.V356(b)?this.V3ae(b,2):!1};g.prototype.V38g=function(b){return this.V3ae(b,0)};g.prototype.V38d=function(b){return this.V3ae(b,1)};g.prototype.V3ae=function(b,c){return $(this.V34u[b][c]).is(":visible")};g.prototype.fnSelectNota=function(b){this.V34w[b]=!0;(new CB.Timer(function(){var c=$(this.V335)[b];this.V38h(c,b)}.bind(this))).runOnce(10);this.V3af(b,0)};g.prototype.V39e=function(b){this.V34v[b]||(this.V34v[b]=!0,(new CB.Timer(function(){var c=this.getGameCount(b),d=1<c;this.V356(b)&&(d=
!0);var e=$(this.V335)[b],f=$(e).width(),e=$(e).height(),g=$("#north"+b).height(),h=0;this.V38c(b)&&(h=$("#tabNavButtons"+b).height());this.V357(b)||this.V356(b)?this.V38e(b,d,0,c,f,e-g-h-14):this.V38f(b,d,0,c,f,e-g-h-14)}.bind(this))).runOnce(10));this.V3af(b,1)};g.prototype.V39f=function(b){(new CB.Timer(function(){var c=this.getGameCount(b),d=1<c;this.V356(b)&&(d=!0);var e=$(this.V335)[b],f=$(e).width(),e=$(e).height(),g=0;this.V38c(b)&&(g=$("#tabNavButtons"+b).height());var h=$("#north"+b).height();
this.V357(b)||this.V356(b)?this.V38e(b,d,0,c,f,e-h-g-14):this.V38f(b,d,0,c,f,e-h-g-14);this.V36w(b,!1);this.resize(null,!0)}.bind(this))).runOnce(10);this.V3af(b,2)};g.prototype.V39g=function(b){document.exitFullScreen&&document.exitFullScreen();document.location="https://live.chessbase.com"};g.prototype.V3af=function(b,c){if(0<this.V34t.length)for(var d=0;d<this.V34u[b].length;d++){var e=String.formatEx("#t-btn{0}-{1}",this.V34t[b][d].id,b);d==c?($(this.V34u[b][d]).css("display","block"),$(e).addClass("tabNavBtnSelected")):
($(this.V34u[b][d]).css("display","none"),$(e).removeClass("tabNavBtnSelected"))}};g.prototype.V35g=function(b){0<=this.V331&&this.V332(this.V331);this.V333()};g.prototype.V3ag=function(b){console.log("Nota Save");this.V342(b,!0)};g.prototype.V39t=function(b){var c=$(this.V335);c&&c[b]&&(V3c6.V2al(),window.location="https://database.chessbase.com?ref=pgn")};g.prototype.V39u=function(b){this.modules[b].getKernel().V3bl.saveToCloud(!0)||5;var c=$(this.V335);c&&c[b]&&(V3c6.V2al(),window.location="http://mygames.chessbase.com?ref=pgn")};
g.prototype.V39v=function(b){var c=$(this.V335);c&&c[b]&&V3c6.V2ak(this.modules[b].getKernel().game)};g.prototype.V39o=function(b){this.modules[b].undo.push(ObjUtil.clone(this.modules[b].getKernel().game));this.modules[b].getKernel().V3bl.onPromoteLine()&&this.modules[b].getKernel().game.promoteLine()};g.prototype.V3ah=function(b){this.modules[b].undo.push(ObjUtil.clone(this.modules[b].getKernel().game));this.modules[b].getKernel().V3bl.onDeletePrevious()&&this.modules[b].getKernel().game.deletePrevious()};
g.prototype.V39p=function(b){this.modules[b].undo.push(ObjUtil.clone(this.modules[b].getKernel().game));this.modules[b].getKernel().V3bl.onCutLine()&&this.modules[b].getKernel().game.deleteRemaining()};g.prototype.V39n=function(b){this.modules[b].undo.push(ObjUtil.clone(this.modules[b].getKernel().game));this.modules[b].getKernel().V3bl.onDeleteLine()&&this.modules[b].getKernel().game.deleteLine()};g.prototype.V39r=function(b){if(this.modules[b].undo.length){var c=this.modules[b].undo.pop();this.modules[b].redo.push(ObjUtil.clone(this.modules[b].getKernel().game));
this.modules[b].getKernel().game.assign(c)}};g.prototype.V39s=function(b){if(this.modules[b].redo.length){var c=this.modules[b].redo.pop();this.modules[b].undo.push(ObjUtil.clone(this.modules[b].getKernel().game));this.modules[b].getKernel().game.assign(c)}};g.prototype.V39q=function(b){this.modules[b].undo.push(ObjUtil.clone(this.modules[b].getKernel().game));this.modules[b].getKernel().V3bl.saved=!1;this.modules[b].getKernel().game.unAnnotate()};g.prototype.V3ai=function(b){this.isLive(b)?window.open("https://docu.chessbase.com/reader/cblive.html"):
window.open("https://docu.chessbase.com/reader/cbreplay.html")};g.prototype.V39w=function(b){window.open("http://live.playchess.com")};g.prototype.onNotaClickListener=function(){this.V38r(-1==this.V32r?0:this.V32r)};g.prototype.handleKeyDown=function(b,c){if(this.V32s&&-1!=this.V32r){var d=!0;switch(b.which){default:d=!1;break;case 13:this.V395(c,b,1E3);break;case 27:this.V331==c&&this.V332(c);this.modules[c].timerAutoplay&&this.V395(c,b);break;case 37:this.V393(c);break;case 39:this.V394(c);break;
case 38:b.altKey?this.V39o(c):this.V3a2(c);break;case 40:this.V3a3(c);break;case 46:this.V39n(c);break;case 56:this.V3ah(c);break;case 57:this.V39p(c);break;case 65:b.ctrlKey||(d=!1);break;case 66:b.ctrlKey?this.V39b(c):d=!1;break;case 83:b.ctrlKey?this.V342(c,!0):d=!1;break;case 89:b.ctrlKey?b.shiftKey?this.V39q(c):this.V39s(c):d=!1;break;case 90:b.ctrlKey?this.V39r(c):d=!1;break;case 113:b.altKey?this.V39a(c):d=!1;break;case 122:b.ctrlKey||b.shiftKey?this.V398(c):this.V399(c);break;case 187:this.V39z(c,
1);break;case 189:this.V39z(c,-1)}d&&b.preventDefault();return d}};g.prototype.V38m=function(){return this.V331==this.V32r};g.prototype.V35h=function(b,c){return function(b){if(this.modules&&this.modules.length){var d=this.modules[c].pgnDatabase;d&&b.assign(d.getGame(1),!0)}}};g.prototype.V35o=function(b,c,d,e){return function(f){f.reset();if(b){var g=b.dataset.fen;g?(g=new CB.Position(g),g=new CB.Game(g),d.addColoredAnnos(b,g),f.assign(g)):e&&(f=new CB.V13b(e),d.modules[c].pgnDatabase=e,g=f.getGame(1),
d.modules[c].pgnTitle=g.hdr.getStrPlayers(!1,0)+".pgn",d.modules[c].getKernel())}}};g.prototype.V35p=function(b,c,d){if((b=b.dataset.solution)&&4==b.length){var e=CB.Vbf.fromString(b.substring(0,2)),f=CB.Vbf.fromString(b.substring(2,4)),g=new CB.Timer(function(){d.boardWin.destroyMessage()});d.V3bl.fnAcceptMove=function(b){if(0<d.game.getMoveIndex())return!0;g.runOnce(2E3);if(b.from!=e||b.to!=f)return d.boardWin.addMessage("Wrong Move, sorry",!0),!1;d.boardWin.addMessage("Correct!",!0);return!0}.bind(this)}};
g.prototype.addColoredAnnos=function(b,c){var d=b.dataset.arrows,e=b.dataset.squares;if(d){for(var f=d.split(","),d=new CB.ColArrowAnno,g=0;g<f.length;g++){var h=f[g];if(4==h.length){var l=CB.Vbf.fromString(h.substring(0,2)),h=CB.Vbf.fromString(h.substring(2,4)),l=new CB.ColArrow(l,h,CB.Vv9.GREEN);d.push(l)}}d.length&&c.setAnnoBeforeFirstMove(CB.AnnoType.ARROW_LIST,d,!0)}if(e){e=e.split(",");d=new CB.ColSqAnno;for(f=0;f<e.length;++f)g=e[f],2==g.length&&(g=CB.Vbf.fromString(g),g=new CB.ColSq(g,CB.Vv9.GREEN),
d.push(g));d.length&&c.setAnnoBeforeFirstMove(CB.AnnoType.SQUARE_LIST,d,!0)}};g.prototype.V35i=function(b,c,d,e){if(b){var f=b.dataset.url;f?$.get(f,function(e){if(e){e=new CB.V13b(e);this.modules[d].pgnDatabase=e;this.modules[d].pgnTitle=f;var g=!1;1<e.getGameCount()?g=c(e,d,this.loadGame.bind(this)):(this.V36x(d),this.resizePlugin($(b),d));g||("no"!=b.dataset.autoplay&&1<e.getGameCount()?(parseInt(b.dataset.autoplay),this.modules[d].getKernel().V3bl.loadGame(this.modules[d].pgnDatabase.getGame(1)),
this.modules[d].getKernel().hasTraining()):this.modules[d].getKernel().V3bl.loadGame(this.modules[d].pgnDatabase.getGame(1)));this.V37v(this.modules[d].getKernel().game,d)}}.bind(this)).fail(function(){this.resizePlugin($(b),d)}.bind(this)):e&&(e=new CB.V13b(e),this.modules[d].pgnDatabase=e,1<e.getGameCount()?c(e,d,this.loadGame.bind(this)):(this.V36x(d),this.resizePlugin($(b),d)),e=this.modules[d].pgnDatabase.getGame(1),this.modules[d].pgnTitle=e.hdr.getStrPlayers(!1,0)+".pgn",this.modules[d].getKernel().V3bl.loadGame(e),
this.V37v(e,d),!this.modules[d].getKernel().hasTraining()&&0<parseInt(b.dataset.autoplay)&&(this.modules[d].runAutoplayTimer=new CB.Timer(function(){this.V395(d,null,b.dataset.autoplay)}.bind(this)),this.modules[d].runAutoplayTimer.runOnce(1E4)))}};g.prototype.V35w=function(b,c,d,e){b&&(e=b.dataset.id)&&(this.V14p=V3c6.config.V14q()[0],e=this.V14p+"public/video?id="+encodeURIComponent(e),$.get(e,function(e){e&&(this.modules[d].videoDatabase=e,c(e,d,this.V37l.bind(this)),this.resizePlugin($(b),d))}.bind(this)).fail(function(){this.resizePlugin($(b),
d)}.bind(this)))};g.prototype.V35y=function(b,c,d,e){b&&$.get("https://videos.chessbase.com/live/getlivestreams?client=web",function(e){e&&(this.modules[d].livevideoDatabase=e,c(e,d,this.V3aj.bind(this)),this.resizePlugin($(b),d))}.bind(this)).fail(function(){this.resizePlugin($(b),d)}.bind(this))};g.prototype.V35r=function(b,c){if(b){$(b).html('<div style= "font-size:large;margin-left:auto;margin-right:auto;margin-top:20px;margin-bottom:20px">Loading Table...</div>');var d=b.dataset.url,d=b.dataset.name,
e=parseInt(b.dataset.top),f=b.dataset.round||100,g=b.dataset.tbs,h=b.dataset.caption,l=b.dataset.pic,q=b.dataset.pw||1,r=b.dataset.pd||.5,t=b.dataset.pl||0,d=String.f("{0}/results/{1}/all",V3c6.config.getLiveResult(),d),w={caption:h,withPic:l};d&&$.get(d,function(d){if(d){var h={round:f,top:e,tbs:g,pointsWin:parseFloat(q),pointsDraw:parseFloat(r),pointsLoss:parseFloat(t)};this.V35t(b,c,d,h,w)}}.bind(this))}};g.prototype.V35e=function(b,c){if(b){var d=b.dataset.name,e=parseInt(b.dataset.top),f=b.dataset.round||
3E4,g=b.dataset.pw||1,h=b.dataset.pd||.5,l=b.dataset.pl||0;(d=String.f("{0}/results/{1}/all",V3c6.config.getLiveResult(),d))&&$.get(d,function(d){if(d)var q={round:f,top:e,pointsWin:parseFloat(g),pointsDraw:parseFloat(h),pointsLoss:parseFloat(l)};this.V35v(b,c,d,q,{})}.bind(this))}};g.prototype.V3ak=function(b,c){if(this.modules[b].useFirstBoard)return this.modules[b].useFirstBoard=!1,this.modules[b].kernel[0].setIdGame(c),0;if(this.modules[b].kernel.length<this.modules[b].maxKernels){var d=this.modules[b].addKernel(this);
d.idGame=c;var e=this.modules[b].boardArea.canvas,f=this.V38q(e,this.V33i());f.animateBoard=!1;d.setBoardWin(f);d.V3bl.createGUIElements(f);e.control.addBoard(f,c);d=$("#boardHolder"+b).width();e=$("#boardHolder"+b).height();this.V336(b,d,e,300);return this.modules[b].kernel.length-1}return-1};var B=function(b,c,d,f){var g=V3c6.panelMgr;V3c6.panelMgr.modules[c].nGotoMoveIndex=f;if(g.trySwapWithBigBoard(b,c)){if(f){var h=V3c6.panelMgr.modules[c].nCurrKernel;e(c,b,h).game.gotoIndex(f)}}else{for(var l=
0;l<g.modules[c].kernel.length;l++)if(g.modules[c].kernel[l].idGame==b){g.changeSelectedGameKernel(b);g.onWatch(c,b);f&&(h=V3c6.panelMgr.modules[c].nCurrKernel,e(c,b,h).game.gotoIndex(f));return}h=V3c6.panelMgr.V3ak(c,b);f=0;!d&&0>h&&(f=V3c6.panelMgr.modules[c].getKernel().idGame,V3c6.panelMgr.V38s(c,f,""),V3c6.panelMgr.modules[c].getKernel().setIdGame(b),h=V3c6.panelMgr.modules[c].nCurrKernel);V3c6.lobby.V2ze(b,V3c6.panelMgr.modules[c].ticket,0<=h?function(b){return e(c,b,h)}:null,function(b,d){V3c6.panelMgr.Vjd(c,
b,d)},f,function(b){V3c6.panelMgr.V3al(c,b)},function(){V3c6.panelMgr.modules[c].nGotoMoveIndex&&e(c,b,h)&&(e(c,b,h).game.gotoIndex(V3c6.panelMgr.modules[c].nGotoMoveIndex),(new CB.Timer(function(){V3c6.panelMgr.modules[c].nGotoMoveIndex=0})).runOnce(1E3));V3c6.panelMgr.chat[c]&&!V3c6.panelMgr.modules[c].chatRequested&&(V3c6.panelMgr.modules[c].chatRequested=!0,V3c6.lobby.V2zg(c,b));V3c6.panelMgr.V37b("Live: "+V3c6.panelMgr.modules[c].getKernel().game.hdr.event.event,c)});if(0<=h)V3c6.panelMgr.onWatch(c,
b)}};g.prototype.addGameById=function(b,c,d){B(c,b,!1,d)};g.prototype.trySwapWithBigBoard=function(b,c,d){c=this.modules[c];if(0==c.nCurrKernel||d)if(d=c.getKernelIndexOf(b),0<d){var e=ObjUtil.clone(c.kernel[0].game),f=c.kernel[0].idGame;c.kernel[0].game.assign(c.kernel[d].game);c.kernel[0].setIdGame(b);c.kernel[d].setIdGame(f);c.kernel[d].game.assign(e);this.changeSelectedGameKernel(b);V3c6.lobby.notifySessionSwap(c.ticket,f,b);return!0}};g.prototype.V35b=function(b,c,d){return{pluginDiv:b,ticket:++f,
kernel:[],nCurrKernel:0,useFirstBoard:!0,maxKernels:1,getKernel:function(b){return"undefined"!=typeof b?this.kernel[b]:this.kernel[this.nCurrKernel]},addKernel:function(b,c){var e=new CB.Vk3(b);e.ticket=this.ticket;e.setPlayingMode(d(e));e.pluginCnt=c;e.game.addOnClickInNotationListener(b.onNotaClickListener.bind(b));this.kernel.push(e);return e},selectKernelByIdGame:function(b){for(var c=0;c<this.kernel.length;c++)if(this.kernel[c].idGame==b){this.nCurrKernel=c;break}},getKernelIndexOf:function(b){for(var c=
0;c<this.kernel.length;c++)if(this.kernel[c].idGame==b)return c;return-1},getKernelOfIdGame:function(b){for(var c=0;c<this.kernel.length;c++)if(this.kernel[c].idGame==b)return this.kernel[c]},changeNKernels:function(b,c){var d=this.maxKernels;if(b<this.kernel.length){for(var e=b;e<this.kernel.length;e++){var f=this.multiBoard.V1la(this.kernel[e].idGame);this.multiBoard.V193(f);V3c6.lobby.setSessionToBackground(this.ticket,this.kernel[e].idGame)}c.changeSelectedGameKernel(this.kernel[0].idGame);this.kernel.length=
b}this.maxKernels=b;return d}}};g.prototype.V35m=function(b,c,d,e,f){f={};f.event=b.dataset.event;f.round=b.dataset.round;f.round2=b.dataset.round2;f.player=b.dataset.player;f.white=b.dataset.white;f.black=b.dataset.black;f.date=b.dataset.date;f.kibitzRank=c;"highest"==f.round||"max"==f.round?(f.round="",f.highestRoundOnly=!0):f.highestRoundOnly=!1;f.isList=function(){return!0};f.onList=function(c){e.modules[d].list=c.games;500<c.games.length&&c.games.splice(500);e.createLiveListGrid.call(e,c,d,B);
e.resizePlugin.call(e,$(b),d);e.shakeFullWinBtn(d);for(var f=0;f<c.games.length;f++)e.setResultStat(d,c.games[f].id,e.getResIcon(c.games[f].result))};return f};g.prototype.loadGame=function(b,c,d,e,f){e||this.V38r(c);this.modules[c].getKernel().V3bl.loadGame(b);f&&(new CB.Timer(function(){this.modules[c].getKernel().game.gotoIndex(f);this.modules[c].nota&&this.modules[c].nota.emphasizeMove()}.bind(this))).runOnce(50);this.modules[c].getKernel().game.gameNo=d;this.V37v(b,c)};g.prototype.V3aj=function(b,
c){};g.prototype.V37l=function(b,c){this.V37g=[];for(var d=0;d<b.length;d++){var e=b[d],f=new CB.Vpc;f.time=e.Time;f.type=e.GameActionType;f.action=e.GameActionContent;this.V37g.push(f)}};g.prototype.onWatch=function(b,c){this.V38s(b,c,"watch");this.modules[b].getKernel()&&this.V37b("Live: "+this.modules[b].getKernel().game.hdr.event.event,b)};g.prototype.Vjd=function(b,c,d){d&&this.V38s(b,c,"move");var e=this.modules[b].getKernelOfIdGame(c);if(e){var f=e.game.hdr.result;2>=f?this.setResultStat(b,
c,this.getResIcon(f)):(f=null,d&&d.gameAction.type==CB.Vj1.Vom&&d.gameAction.anno&&(f=d.gameAction.anno[CB.AnnoType.Vgp]),!f&&e.game.getLastMove()&&(d=e.game.getLastMove().getAnno())&&(f=d[CB.AnnoType.Vgp]),f&&(d=f.getEval(),this.setResultStat(b,c,this.V37o(d))))}};g.prototype.V3al=function(b,c){this.V38s(b,c,"anno");TRACE("Anno:"+c)};g.prototype.V38s=function(b,c,d){if(b=this.modules[b].list)for(var e=0;e<b.length;e++)b[e].id==c&&(b[e].stat=d);this.V1mp&&(c=$('*[data-statIcon="'+c+'"]'),d?c.html(this.V3am(d)):
c.html(""))};g.prototype.setResultStat=function(b,c,d){if(b=this.modules[b].list)for(var e=0;e<b.length;e++)b[e].id==c&&(b[e].res=d);this.V1mp&&(c=$('*[data-resIcon="'+c+'"]'),d?c.html(this.V3am(d)):c.html(""))};g.prototype.V37z=function(b){var c=this.modules[b].list;if(c)for(var d=0;d<c.length;d++)this.modules[b].getKernelOfIdGame(c[d].id)?this.V38s(b,c[d].id,"watch"):"watch"!=c[d].stat&&this.V38s(b,c[d].id,c[d].stat),this.setResultStat(b,c[d].id,c[d].res)};g.prototype.V3am=function(b){return'<img src="'+
(CB.V5p()+"Media/Ribbons/Reader/Status/"+b+"16.png")+'" height="16px">'};g.prototype.Vsc=function(){if(!this.modules[this.V32r].enginePanel){var b=document.getElementById("engineEl"+this.V32r);if(b){$("#engineEl"+this.V32r).css("width","calc( 100% - 21px )");var c=new CB.EngineLinesElement(this.V32r);c.V16m(b,{scrollLines:!1});this.modules[this.V32r].enginePanel=c}}this.modules[this.V32r].engineOpen=!0;b=this.V32r;$("#engineButtons"+b).show();var c=this.getGameCount(b),d=$("#west"+b).width(),e=$("#westSouth"+
b).height(),e=this.V382(b,e,1<c);this.V355()?this.V38n(b,1<c,e,c,d):this.V386(b,1<c,e,c,d);return this.modules[this.V32r].enginePanel};g.prototype.V3a4=function(){this.modules[this.V32r].engineOpen=!1;$("#engineEl"+this.V32r).css("width","100%");this.V339();$("#engineButtons"+this.V32r).hide()};g.prototype.V26u=function(){};g.prototype.V3an=function(b){};g.prototype.useMatBalanceDefault=function(){return!0};g.prototype.V35c=function(b){this.modules[b].getKernel().V3bl.onExit()};g.prototype.V35d=function(b){this.modules[b].getKernel().V3bl.onEntry()};
g.prototype.onBlur=function(){if(0<=this.V32r)this.modules[this.V32r].getKernel().V3bl.onExit()};g.prototype.V1ui=function(){this.onBlur()};g.prototype.V1gt=function(b){b=new CB.V359(b);b.blockLiveBook=!0;return b};g.prototype.V354=function(){this.V3ao=[];this.V2zi=[];for(var b=0;b<this.modules.length;b++)if(this.modules[b].mode==CB.ReaderMode.LIVE){var c=function(){var c=b,d=this;return function(){return d.modules[c].getKernel()}}.call(this),d={};d.requestData=this.modules[b].requestData;d.ticket=
this.modules[b].ticket;d.fnGetKernel=c;this.V2zi.push(d)}};g.prototype.V34z=function(){for(var b=0;b<this.modules.length;b++)this.modules[b].nota&&this.modules[b].nota.notaHeaderElement.resetPlayerCache()};g.prototype.V353=function(b){this.V358(b);if(b&&!this.wasLoggedIn){for(var c=0;c<this.chat.length;c++)this.chat[c]&&this.chat[c].outLoginOk(V3c6.V3bg.userName);this.wasLoggedIn=b}};g.prototype.V3ap=function(){this.modules[0]&&this.modules[0].getKernel()&&this.modules[0].getKernel().V3bl.checkLiveBook();
V3c6.aTBLobby&&this.modules[0]&&this.isLive(0)&&(this.V3aq=new CB.Timer(this.V3ar.bind(this)),this.V3as=new CB.Timer(this.V3ar.bind(this)),this.V3as.runOnce(2E3),this.V3aq.runPeriodic(2E4))};g.prototype.V3ar=function(){if(V3c6.aTBLobby)if(!V3c6.aTBLobby.Vrg()&&!V3c6.aTBLobby.V1rw()&&50>V3c6.aTBLobby.V1tl)V3c6.aTBLobby.V1u7(null,this),this.V3as.runOnce(5E3);else{var b=this.modules[0];b.mode==CB.ReaderMode.LIVE&&b.kernel.forEach(function(b){V3c6.aTBLobby.V2fo(b.idGame,b.getCurPos(),this.V38t.bind(this))}.bind(this))}};
g.prototype.V38t=function(b,c){var d=this.modules[0].getKernelOfIdGame(b);if(d&&0<c.move[0].m_aLine[0]){var e=CB.V2jy.generateLine(c.pos.getPosition(),c.move[0],d).lineNota,f=c.move[0].m_nEval/100,g=c.move[0].m_nDepth,f=CB.V1fs.V1ft(c.move[0].m_nEval)+" ("+f+"/"+g+")",e={value:c.move[0].m_nEval,depth:c.move[0].m_nDepth,strLine:e,strEval:f};d.tbTableEvaluation=e;d.boardWin&&(d.boardWin.displayEvaluation(!0,e),d.game.hasTBEval=!0,d.game.fireOnEval(e.depth,e.value))}};g.prototype.V358=function(b){var c=
0,d='<div class="cbreplayInfo" id="replayinfo{0}">';if(CB.V5t.V6l()&&11>CB.V5t.V6l())d+='<span class="browserWarning">Please update your browser. Thank you!</span>';else{switch(CB.V7a.V7b().slice(0,2)){default:b&&(d+='<div>Hello <span class="cbHelloUser">'+V3c6.V3bg.userName+"</span>,</div>");d+="<ul>";d+="<li>Use the four cursor keys and Enter to replay the game.</li>";d+='<li class="cbMaximizeHint">Try maximizing the board:<div class="cbImgFullScreen"></div></li>';d+="<li>Make moves to analyse yourself.</li>";
CB.V5t.V64()||(d+="<li>Press Ctrl-B to rotate the board.</li>",d+="<li>Press F11 to load the next game of a database.</li>");d+="<li>Games viewed here will automatically be stored in your <a href='http://mygames.chessbase.com?ref=pgn'>cloud clipboard</a> (if you are logged in).</li>";b||(d+="<li><a href='https://account.chessbase.com/en/create-account?ref=pgn'>Create an account</a> to access the games cloud.</li>");break;case "de":b&&(d+='<div>Hallo <span class="cbHelloUser">'+V3c6.V3bg.userName+
"</span>,</div>");d+="<ul>";d+="<li>Spielen Sie die Partie mit den vier Pfeiltasten und Enter nach.</li>";d+='<li class="cbMaximizeHint">Maximieren Sie das Brett:<div class="cbImgFullScreen"></div></li>';d+="<li>Geben Sie selbst Z\u00fcge ein, um zu analysieren.</li>";CB.V5t.V64()||(d+="<li>Strg-B dreht das Brett.</li>",d+="<li>F11 l\u00e4dt die n\u00e4chste Partie einer Datenbank.</li>");d+="<li>Alle nachgespielten Partien werden im Clipboard von <a href='http://mygames.chessbase.com?ref=pgn'>MyGames</a> gespeichert (falls eingeloggt).</li>";
b||(d+="<li><a href='https://account.chessbase.com/en/create-account?ref=pgn'>Registrieren Sie sich</a>, um MyGames zu benutzen.</li>");break;case "es":b&&(d+='<div>Hola <span class="cbHelloUser">'+V3c6.V3bg.userName+"</span>,</div>"),d+="<ul>",d+="<li>Use las 4 teclas de flecha para reproducir la partida.</li>",d+='<li class="cbMaximizeHint">Pruebe a maximizar el tablero:<div class="cbImgFullScreen"></div></li>',d+="<li>Ejecute jugadas para analizar usted mismo.</li>",d+="<li>Haga clic en el indicador de turno de juego en la esquina inferior para darle la vuelta.</li>",
d+="<li>Haga clic en el logo de 'MyGames' para guardar sus an\u00e1lisis.</li>",b||(d+="<li><a href='https://account.chessbase.com/en/create-account?ref=pgn'>Create an account</a> to use cloud functions</li>")}d+="</ul>";d+='<div class="cbTinyLog"></div>';d+="</div>"}$(this.V335).each(function(b,e){$("#engineEl"+c).html(String.f(d,b));$("#engineEl"+c).css("font-family","Roboto Condensed");$("#engineEl"+c).css("font-size","12px");c++})};return g}();"use strict";
CB.V359=function(){var c=function(b){CB.V359.superClass.call(this);this.kernel=b;this.Vsn=1;this.V3at=0;this.saved=this.V3au=!1;this.Vt0=0;this.Vst=new CB.Timer(this.Vsu.bind(this));this.Vsy=this.checkLiveBook.bind(this)};CB.inherit(c,CB.Vs4);CB.Vsm&&CB.V0(c,CB.Vsm);c.prototype.createGUIElements=function(b){this.superClass.createGUIElements.call(this,b);b.shouldAnimatePosChange=this.shouldAnimatePosChange.bind(this);CB.V5t.V64()&&(b.animSteps={forMove:.1,forPosition:.1})};c.prototype.shouldAnimatePosChange=
function(){return CB.V5t.runsOnChessBaseDomain()||!CB.V5t.V6s()};var b=new CB.V3bs;c.prototype.getMoveEnterType=function(){return this.kernel.game.isLineEnd()||!V3c6.Vru()?CB.Vhs.Vhy:CB.Vhs.Vhv};c.prototype.Vny=function(){this.Vt0=0};c.prototype.Vn9=function(b){this.saved=!1;var c=this.kernel.game.getAnno(CB.AnnoType.Vf6);if(c){var g=this.kernel.game.getNextMove();g&&g.from==b.from&&g.to==b.to&&(c.solved=!0,this.kernel.game.fireOnChanged())}this.kernel.Interactive&&(c=this.kernel.game.getCurPos(),
this.V3av=c.toFEN(),this.V3aw=this.videoid,g="",V3c6.isLoggedIn()&&V3c6.V3bg.userName&&(g=V3c6.V3bg.userName),this.V14p=V3c6.config.V14q()[0],b=this.V14p+"Replay/GetNextIdWithMove?id="+encodeURIComponent(this.videoid)+"&from="+b.from+"&to="+b.to+"&user="+encodeURIComponent(g)+"&fen="+encodeURIComponent(c.toFEN()),$.get(b,function(b){if(b){var c=b.ID,d=b.MSG;2<d.length?(this.V3ax(d),"4"==b.STATE&&(this.V162(),this.videoid=this.V3aw)):V3c6.panelMgr.V37j(0,c)}}.bind(this)));"undefined"!==typeof this.kernel.pluginCnt&&
V3c6.panelMgr.V38r(this.kernel.pluginCnt);return!0};c.prototype.V162=function(){var b=new CB.Position(this.V3av),b=new CB.Game(b);this.kernel.game.assign(b);this.kernel.game.updateFromExtern()};c.prototype.V3ax=function(b){V3c6.panelMgr.showMessage(b);this.kernel.boardWin.addMessage(b,!0);(new CB.Timer(function(){this.kernel.boardWin.destroyMessage()}.bind(this))).runOnce(3E3)};c.prototype.canAnnotateLoadedGames=function(){return!0};c.prototype.isAnalysis=function(){return!0};b=new CB.V3bs;c.prototype.beforeGameLoad=
function(){this.Vrd();this.saved=!1};c.prototype.Vre=function(){this.kernel.Vob()};c.prototype.Vrd=function(){16<this.V3at&&!this.V3au&&!this.Vrp&&(this.V3au=!0,CB.V2b0(this.kernel.game.hdr.getStrPlayers(!1,0),this.V3at));this.saveToCloud(!0);this.V3at=0;this.V3au=!1};c.prototype.onExit=function(){this.Vrd()};c.prototype.Vkz=function(){this.Vrp||this.V3at++;b.exec(function(){this.kernel.game.getCurPos().hasLegals()&&(this.goAll(),this.Vrp||this.Vsy())}.bind(this),300)};c.prototype.checkLiveBook=function(){this.Vte()?
this.Vt9&&this.Vt9.equals(this.kernel.game.getCurPos())&&!this.kernel.forceTBUpdate||(this.Vt9=ObjUtil.clone(this.kernel.game.getCurPos()),V3c6.aTBLobby.Vta(this.kernel.game.getCurPos(),!1,!1,this.kernel.ticket),this.Vtb||(this.Vtb=V3c6.aTBLobby.addOnLiveBookListener(this.liveBookListener.bind(this))),this.Vtc||(this.Vtc=V3c6.aTBLobby.addOnTBDataListener(this.tbDataListener.bind(this))),this.Vst.runOnce(5E3),this.kernel.forceTBUpdate=!1):V3c6.aTBLobby.fireOnLiveBookDisplay({ticket:this.kernel.ticket,
moves:[]})};c.prototype.Vte=function(){if(!this.blockLiveBook){var b=this.kernel.getCurPos();return 6<b.getPieces().length&&16>b.getPieces().length?!1:V3c6.aTBLobby.isLoggedIn()&&(6>this.Vt0||10>this.kernel.game.getMoveNo())&&(60>this.kernel.game.getMoveNo()||6>=b.getPieces().length||2600<this.kernel.game.hdr.Vhc())}};c.prototype.liveBookListener=function(b){V3c6.aTBLobby.fireOnLiveBookDisplay(b);this.Vst.stop();this.Vt0=0};c.prototype.tbDataListener=function(){};c.prototype.Vsu=function(){V3c6.panelMgr.tbBook&&
V3c6.panelMgr.tbBook.setEmptyText(lm.FRESH_POSITION);this.Vt0++};c.prototype.saveToCloud=function(b){return V3c6.cloudMgr&&V3c6.cloudMgr.isLoggedIn()&&!this.saved&&(1<this.V3at||b)?(V3c6.cloudMgr.Vri(this.kernel.game),this.saved=!0):!1};return c}();CB.V3ay={V1oq:4E3};
CB.V3c3=function(){var c=function(b){this.V3bg=new CB.V1s5("Reader");this.versionCode=new CB.V1nq(CB.V1n8.V1no,16,1,0);this.appName="reader.chessbase.com";this.V2bc="https://reader.chessbase.com";this.V2a9="reader";this.V29j="ChessBase PGN Reader";this.gameKernel={};this.V2aw({pics:(-1==document.URL.search(/chessbase.com/i)||-1!=document.URL.search(/cloudserver/i))&&-1==document.URL.search(/localhost/i),engine:!0});this.V3az()};CB.inherit(c,CB.ChessApp);CB.V0(c,CB.V2bk);CB.V0(c,CB.V341);c.prototype.V29k=
function(){this.superClass.V29k.call(this);this.panelMgr=new CB.V34o;this.Vke=this.commands.Vkf(this);CB.V5t.V6c()||(window.addEventListener("blur",onBlur),window.addEventListener("focus",onFocus))};c.prototype.V3b0=function(){V3c6.lobby=new CB.Server.LiveManager;V3c6.lobby.V1zg(V3c6.config.getLiveUris(),"guest","",CB.LoginMode.GUEST);window.addEventListener("beforeunload",onBeforeUnload);window.addEventListener("unload",onBeforeUnload);window.addEventListener("blur",onBlur);window.addEventListener("focus",
onFocus);document.addEventListener("visibilitychange",onVisibilityChange);V3c6.lobby.V1u7()};c.prototype.onLogin=function(b){this.setLoggedIn(1==b.ResultType)};c.prototype.V29q=function(){this.superClass.V29q.call(this)};c.prototype.V2aj=function(){return!1};c.prototype.V190=function(){return!1};c.prototype.V29o=function(){return CB.V3ay};c.prototype.execCommand=function(b){return this.superClass.execCommand.apply(this,arguments)};c.prototype.V3az=function(){this.config.V2qo=!0;this.config.V1ac=this.config.V1ab=
Math.min(16,Math.max(4,window.innerHeight/50));this.config.V1zk=!0;this.config.V1ux=!0;this.config.V29s=!0;this.config.Vrt=!CB.V5t.V64()};c.prototype.V29x=function(){return[CB.V7a.ENG,CB.V7a.DEU,CB.V7a.ESP]};c.prototype.V2ay=function(){return!0};c.prototype.V29y=function(b){return this.superClass.V29y.call(this,b)};return c}();var V3c6;function onBeforeUnload(c){V3c6.lobby&&(V3c6.lobby.logOff(),CB.Timer.V52(700));V3c6.V29q()}
function onBlur(){V3c6.V2al();V3c6.lobby&&CB.V5t.V64()&&(V3c6.blurLogOffTimer=new CB.Timer(function(){V3c6.lobby&&V3c6.lobby.logOff();V3c6.V2ar()}),V3c6.blurLogOffTimer.runOnce(3E4))}function onFocus(){V3c6.lobby&&(CB.V5t.V64()&&!V3c6.lobby.Vrg()&&V3c6.lobby.wasLoggedIn()&&(V3c6.lobby.V1u6(),V3c6.playerLobby&&!V3c6.playerLobby.Vrg()&&V3c6.playerLobby.wasLoggedIn()&&V3c6.playerLobby.V1u6()),V3c6.blurLogOffTimer&&V3c6.blurLogOffTimer.stop())}
function onVisibilityChange(){V3c6.lobby&&document.visibilityState&&("hidden"==document.visibilityState?onBlur():"visible"==document.visibilityState&&onFocus())}"use strict";
(function(c){function b(){V3c6.V29q();V3c6.V2ar();V3c6.V2at();V3c6.V2av();V3c6.panelMgr.V1ui();V3c6.V2al()}function d(){V3c6.panelMgr.onBlur();CB.V5t.V64();V3c6.V2al()}function e(){document.hidden&&d()}$(function(){var c=document.getElementById("bodytext");c&&document.body.removeChild(c);V3c6=new CB.V3c3;V3c6.V29k();V3c6.V2as();V3c6.V2au();V3c6.panelMgr.V34x();window.addEventListener("beforeunload",b);CB.$(window).on("beforeunload",b).on("blur",d).on("visibilitychange",e);V3c6.isLive&&V3c6.V3b0();
V3c6.V2aq();V3c6.V2an(V3c6.tokenLoginHandler.bind(V3c6))||V3c6.setLoggedIn(!1);V3c6.panelMgr.V19j();V3c6.aTBLobby.V2p5=function(){V3c6.panelMgr.V3ap()};CB.V5t.V64()&&CB.V5t.V72()&&(window.scrollTo(0,0),CB.V5t.V66())})})(window);